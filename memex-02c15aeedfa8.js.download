"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["memex","ui_packages_chart-card_ChartCard_tsx","ui_packages_failbot_failbot_ts"],{41951:(e,t,a)=>{let r,n,i,l,s;var o,d,u,c,m,p,h,f,g,y,x,b,v,w,j,C,I,S,k,N,T,_,A,R,P,D,E,M,B,L,F=a(74848),O=a(48416),G=a(39597),V=a(74753),$=a(5338);a(85828);var W=a(77408),z=a(30391),H=a(66419),U=a(97665),q=a(59299),K=a(96540),Q=a.t(K,2),J=a(47767),X=a(84976),Y=a(45588),Z=a(38267),ee=a(11561);function et(e,t){return Array.from((function e(t,a,r=[]){let n="string"==typeof a?[a]:a,i=function(t,a,r=[]){let n="string"==typeof a?[a]:a,i=function t(a,r,n=[]){if(0===r.length)return a;let i=r[0];return((0,ee.A)(null!=i,"Path must have at least one item"),1===r.length)?a.values.get(i)??null:t(e(a,i,n),r.slice(1),[...n,i])}(t,n);if(!i)return null;if(!el(i))throw Error(`Command at path where command tree expected: ${[...r,...n].join(",")}`);return i}(t,n,r);if(!i)throw Error(`Command tree does not exist at path: ${[...r,...n].join(",")}`);return i})(e,t).values.entries())}function ea(e,t=[]){return{description:e,values:t.reduce((e,t)=>(es(t)?e.set(t[0],ea(t[1],t[2])):e.set(t[0],er(t[1],t[2],t[3])),e),new Map)}}function er(e,t,a){return{description:e,type:t,effect:a}}function en(e,t){if(!es(t)){let a=er(t[1],t[2],t[3]);return eo(e,t[0],a)}let[a,r,n]=t;return eo(e,a,ea(r,n))}function ei(e,[t]){return function(e,t){let a=new Map(e.values);return a.delete(t),{...e,values:a}}(e,t)}function el(e){return"values"in e}function es(e){return Array.isArray(e[2])}function eo(e,t,a){let r=new Map(e.values);return r.set(t,a),{...e,values:r}}let ed=(0,K.createContext)(null);try{ed.displayName||(ed.displayName="StatelessContext")}catch{}var eu=a(88804);function ec(e,t){let a=em(e[0]),r=em(t[0]);return a&&r?Number(e[0])-Number(t[0]):a&&!r?1:!a&&r?-1:e[0].localeCompare(t[0])}function em(e){return/^\d+$/.test(e)}function ep(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}let MemexCommandItem=class MemexCommandItem extends eu.q7{activate(e){el(this.memexItem)?e.pushPage(this.staticItemsPage()):(this.memexItem.effect(),e.dismiss())}copy(e){}select(e){el(this.memexItem)?e.pushPage(this.staticItemsPage()):e.autocomplete(this)}get path(){}buildCommandItems(){if(el(this.memexItem))for(let[e,t]of et(this.memexItem,[]).sort(ec))this.commandItems.push(new MemexCommandItem(t.description,e,t))}staticItemsPage(){return new eu.Ie(this.title,`memex-items-page-${this.memexKey}`,this.commandItems)}constructor(e,t,a){super({title:e,priority:1,group:"commands",hint:"Run command"}),ep(this,"memexKey",void 0),ep(this,"memexItem",void 0),ep(this,"commandItems",[]),this.memexKey=t,this.memexItem=a,this.buildCommandItems()}};function eh(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}let MemexProvider=class MemexProvider extends eu.Dn{clearCache(){}enabledFor(e){let t=">"===e.mode||""===e.mode,a="memex_project"===e.scope.type;return t&&a}async fetch(e,t){let a=[...this.commandItems];if(0!==e.text.trim().length){let t=[];for(let[e,a]of function* e(t,a=[]){for(let[r,n]of t.values.entries())a=[...a,r],yield[a,n],el(n)&&(yield*e(n,a)),a=a.slice(0,-1)}(this.commandTree))el(a)||t.push([e,a]);for(let[e,r]of t)a.push(new MemexCommandItem(r.description,e.join("-"),r));a=this.fuzzyFilter(a,e)}return{results:a}}buildCommandItems(){for(let[e,t]of et(this.commandTree,[]).sort(ec))this.commandItems.push(new MemexCommandItem(t.description,e,t));for(let[e,t]of this.commandItems.entries())t.priority=this.commandItems.length-e}constructor(e){super(),eh(this,"id","memex-provider"),eh(this,"hasCommands",!0),eh(this,"debounce",0),eh(this,"commandItems",[]),eh(this,"commandTree",void 0),this.commandTree=e,this.buildCommandItems()}};let ef=(0,K.memo)(function({children:e}){let[t,a]=(0,K.useState)(()=>ea("root")),[r,n]=(0,K.useState)([]),[i,l]=(0,K.useState)([]);(0,K.useEffect)(()=>{if(0===i.length&&0===r.length)return;let e=t;e=r.reduce(ei,e),a(e=i.reduce(en,e));let s=i.length,o=r.length;l(e=>e.slice(s)),n(e=>e.slice(o))},[r,i,t]);let s=(0,K.useMemo)(()=>({registerCommands:e=>{l(t=>[...t,e])},deregisterCommands:e=>{n(t=>[...t,e])}}),[]);return(0,K.useEffect)(()=>{function e(){window.commandPalette?.registerProvider("memex-provider",new MemexProvider(t))}return window.commandPalette?e():document.addEventListener("command-palette-ready",e),()=>{document.removeEventListener("command-palette-ready",e)}},[t]),(0,F.jsx)(ed.Provider,{value:s,children:e})});try{ef.displayName||(ef.displayName="CommandProvider")}catch{}function eg(e,t){let a=(0,K.useContext)(ed);if(!a)throw Error("useCommands must be used within a <CommandProvider>");let{registerCommands:r,deregisterCommands:n}=a,i=(0,K.useMemo)(e,t);(0,K.useEffect)(()=>{if(i)return r(i),()=>n(i)},[i,n,r])}var ey=a(53949),ex=a(2640),eb=a(59418),ev=a(3541),ew=a(8776),ej=a(10833),eC=a(73218),eI=a(27535),eS=a(26677),ek=a(18312);let eN={Assignees:"assignees",Labels:"labels",LinkedPullRequests:"linkedPullRequests",Milestone:"milestone",ParentIssue:"parentIssue",Repository:"repository",Reviewers:"reviewers",SubIssuesProgress:"subIssuesProgress",Title:"title",Tracks:"tracks",TrackedBy:"trackedBy",Text:"text",Number:"number",Date:"date",SingleSelect:"singleSelect",Iteration:"iteration",IssueType:"issueType"},eT={Assignees:"Assignees",Labels:"Labels",LinkedPullRequests:"Linked pull requests",Milestone:"Milestone",ParentIssue:"Parent issue",Repository:"Repository",Reviewers:"Reviewers",Status:"Status",SubIssuesProgress:"Sub-issues progress",Title:"Title",Tracks:"Tracks",TrackedBy:"Tracked by",IssueType:"Type"},e_=["memex_beta_with_dummy_feature","memex_insights","memex_charts_basic_allow","memex_historical_charts_on_assignees_milestones","tasklist_block","memex_group_by_multi_value_changes","tasklist_tracked_by_redesign","memex_resync_index","memex_automation_enabled","memex_table_without_limits","memex_disable_draft_issue_file_upload","memex_disable_autofocus","memex_status_updates_notifications","memex_mwl_sticky_board_columns","projects_classic_sunset_override","memex_charts_for_all","memex_side_panel_query","memex_mwl_table_cell_perf","issues_react_remove_labels_loading","issues_react_create_milestone","memex_omnibar_prioritize_create_issue","notifyd_issue_watch_activity_notify","notifyd_enable_issue_thread_subscriptions","memex_small_viewport_a11y","memex_v7_start_transition","memex_flag_sync_error_handling","memex_mwl_refresh_groups","memex_mwl_visible_paginator","memex_mwl_omit_table_pages_wrapper","memex_touch_to_drag","issue_dependencies","primer_react_select_panel_with_modern_action_list","issue_dependencies_internal_dev","memex_column_menu_position","memex_charts_basic_public","memex_charts_basic_private","memex_insights_basic_public","memex_insights_basic_private"];function eA(e){let t=document.getElementById(e);if(t&&t.textContent)try{return JSON.parse(t.textContent)}catch{return}}let eR=e_.reduce((e,t)=>(e[t]=!1,e),{});function eP(){if(!r){let e=eA("memex-enabled-features");for(let t of(r=e&&new Set(e),e_))eR[t]=!!r&&r.has(t)}return eR}let eD={Open:"open",Closed:"closed"},eE={Open:"open",Closed:"closed",Draft:"draft"},eM={NotPlanned:"not_planned",Duplicate:"duplicate"},eB={Open:"open",Merged:"merged"},eL={Open:"open",Closed:"closed"},eF={NotPlanned:"not_planned",Duplicate:"duplicate",Completed:"completed",Reopened:"reopened"},eO={Read:"read",Write:"write",Admin:"admin",None:"no access"},eG={Admin:"project_admin",Writer:"project_writer",Reader:"project_reader",None:"none"},eV={User:"user",Team:"team",None:"none"},e$={role:eO.Read,canChangeProjectVisibility:!1,canCopyAsTemplate:!1},eW=new Map([[eO.Read,eG.Reader],[eO.Write,eG.Writer],[eO.Admin,eG.Admin],[eO.None,eG.None]]),ez=new Map([...eW.entries()].map(([e,t])=>[t,e])),eH={mode:void 0,light:void 0,dark:void 0,markdown_fixed_width_font:!1,preferred_emoji_skin_tone:void 0};function eU(){if(!n){let e=eA("memex-owner"),t=eA("memex-data"),a=eA("github-runtime")??"dotcom",r=eA("github-billing-enabled")??!1,i=eA("memex-feedback");n={themePreferences:eA("theme-preferences")??eH,mediaUrls:eA("media-urls"),loggedInUser:eA("logged-in-user"),projectData:t,projectOwner:e,projectCreator:eA("memex-creator"),projectLimits:{projectItemLimit:1200,limitedChartsLimit:2,singleSelectColumnOptionsLimit:25,autoAddCreationLimit:4,viewsLimit:50,...eA("memex-limits")},relayIds:eA("memex-relay-ids"),viewerPrivileges:eA("memex-viewer-privileges")??e$,feedbackLink:i?.url??"https://github.com/github/feedback/discussions/categories/issues-feedback",issueViewerFeedbackLink:i?.issue_viewer_url??"https://github.com/github/feedback/discussions/categories/issues-feedback",pwlBetaFeedbackLink:i?.pwl_beta_url??"https://github.com/orgs/community/discussions/152407",pwlBetaLearnMoreLink:"https://github.blog/changelog/2024-10-01-evolving-github-issues-public-preview/#increased-items-in-github-projects",isOrganization:e?.type==="organization",githubRuntime:a,githubUrl:eA("github-url")??"",isDotcomRuntime:"dotcom"===a,isEnterpriseRuntime:"enterprise"===a,isBillingEnabled:r,showTemplateDialog:!!eA("memex-templates"),createdWithTemplateMemex:eA("created-with-template-memex"),partialFailures:eA("memex-columns-data")?.reduce((e,t)=>t.partialFailures?e.concat(t.partialFailures):e,[]),copyProjectPartialUrl:eA("copy-memex-project-partial-data")?.url??"",systemTemplates:eA("memex-system-templates")}}return n}function eq(e){return!!e&&e.length>=eU().projectLimits.singleSelectColumnOptionsLimit}let eK=()=>{let{viewerPrivileges:e,loggedInUser:t}=eU();return{isLoggedIn:void 0!==t,isReadonly:e.role===eO.Read,hasWritePermissions:e.role!==eO.Read,hasAdminPermissions:e.role===eO.Admin,canChangeProjectVisibility:e.canChangeProjectVisibility,canCopyAsTemplate:e.canCopyAsTemplate}},eQ={FilterName:"tracked-by"},eJ={DraftIssue:"DraftIssue",Issue:"Issue",PullRequest:"PullRequest",RedactedItem:"RedactedItem"},eX="side-panel",eY="draft_convert",eZ="draft_open",e0="view options menu",e1="memex_project_field_group_by",e2="field_sort_asc",e5="field_sort_desc",e3="table header menu",e4="field_hide",e6="command palette",e8="search bar",e7="layout_switch",e9="item_rename",te={SUCCESS:"success",FAILURE:"failure"},tt="tab navigation",ta="settings sidebar nav",tr="settings_field_rename",tn="settings_field_save",ti="settings",tl="table header menu",ts="item_value_edit",to="item_value_add",td="table row action menu",tu="table row keyboard shortcut",tc="board card action menu",tm="board card keyboard shortcut",tp="board column action menu",th="side-panel",tf="top_menu",tg="settings",ty="insights_chart_create",tx="insights_chart_update",tb="slice panel",tv="slice_by_applied",tw="slice_by_removed",tj="side_panel_navigate_to_item",tC="templates_create",tI="copy",tS="copy_as_template",tk="bulk_add_side_panel_open",tN="card_move",tT={KeyboardShortcut:"keyboard_shortcut",MouseMove:"mouse_move",ContextMenu:"context_menu"};var t_=a(23224);function tA(e){throw Error(`${e} has a value, but the types suggest this should not be possible. Did we account for all possible options properly in the typings?`)}function tR(e){let[t]=e.split("T");return(0,ee.A)(t,"A date string must have been passed"),t}var tP=a(13999),tD=a(84929),tE=a(89369),tM=a(40828),tB=a(72880),tL=a(83592),tF=a(72471),tO=a(96912),tG=a(58507),tV=a(17764);function t$(e,t){let{0:a=[],1:r=[]}=function(e,t){let a={};for(let r of e){let e=t(r);(a[e]??(a[e]=[])).push(r)}return a}(e,e=>t(e)?0:1);return[a,r]}var tW=a(9739),tz=a(44660),tH=a(99418);let tU="@today",tq=/^([1-9][0-9]*)days?$/,tK=/^<@today-([1-9][0-9]*)(d|w|m)$/,tQ=/^\s+/,tJ=/^,/,tX=/^>/,tY=/^</,tZ=/^>=/,t0=/^<=/,t1=/^\.\./,t2=/^-/,t5=/^\+/,t3=/^:/,t4=/^'/,t6=/^[^']*/,t8=/^"/,t7=/^[^"]*/,t9=/^-?[A-Za-z0-9_][A-Za-z0-9_-]*/,ae=/^([A-Za-z0-9_=!@#$%^*]+)([A-Za-z0-9_\-=!@#$%^*+]*)/,at=/^@(today|next|previous|current)/,aa=/^(0|[1-9][0-9]*)/,ar=/^[^ ]+/,an=(e,t,a,r)=>{let n=r>0?a.substring(r):a,i=n.match(e);if(null===i)throw Error(`Tried to emit a '${t}' token, but the pattern (${e.toString()}) did not match. Did you check if the pattern has a token before trying to emit it?

Text: ${n}`);let l={start:r,end:i[0].length-1+r},s={kind:t,text:i[0],location:l};return{token:s,remainder:n.replace(e,""),length:s.text.length}};function ai(e){let t=[],a=0,r=e=>{"location"in e?(t.push(e),a=e.location.end+1):(t.push({...e,location:{start:a,end:a+e.text.length-1}}),a+=e.text.length)},n=(t,n)=>{let{token:i}=an(t,n,e,a);return r(i),i},i=(t,r)=>t.test(r??e.substring(a));for(;a<e.length;)if(i(tQ))n(tQ,"source.whitespace");else if(i(t2))n(t2,"keyword.operator.minus");else if(i(t9)){let{token:t,remainder:l}=an(t9,"unknown",e,a);if(i(t3,l)?r({...t,kind:"variable"}):r({...t,kind:"string"}),i(t3))for(n(t3,"keyword.operator.separator"),i(tZ)?n(tZ,"keyword.operator.comparison"):i(tX)?n(tX,"keyword.operator.comparison"):i(t0)?n(t0,"keyword.operator.comparison"):i(tY)&&n(tY,"keyword.operator.comparison");(i(ae)||i(at))&&!i(tQ);){if(i(at)){let t=n(at,"string");if(i(t5))n(t5,"keyword.operator.plus"),i(aa)&&n(aa,"string");else if(i(t2))n(t2,"keyword.operator.minus"),i(aa)&&n(aa,"string");else if(i(ae)){let{token:r}=an(ae,"string",e,a);t.location.end+=r.text.length,t.text+=r.text,a+=r.text.length}}else i(ae)&&n(ae,"string");i(t1)?n(t1,"keyword.operator.range"):i(tJ)&&n(tJ,"punctuation.separator")}}else if(i(t4)||i(t8)){let[t,r]=i(t4)?[t4,t6]:[t8,t7];for(n(t,"punctuation.definition.string.begin");!i(t)&&a<e.length;)i(r)&&n(r,"string");i(t)&&n(t,"punctuation.definition.string.end")}else if(i(t3))n(t3,"keyword.operator.separator");else if(i(tJ))n(tJ,"punctuation.separator");else if(i(t1))n(t1,"keyword.operator.range");else if(i(t5))n(t5,"keyword.operator.plus");else if(i(at)){let t=n(at,"string");if(i(t5))n(t5,"keyword.operator.plus"),i(aa)&&n(aa,"string");else if(i(t2))n(t2,"keyword.operator.minus"),i(aa)&&n(aa,"string");else if(i(ae)){let{token:r}=an(ae,"string",e,a);t.location.end+=r.text.length,t.text+=r.text,a+=r.text.length}}else i(ae)?n(ae,"string"):i(ar)&&n(ar,"unknown");return t}let al=(e,t)=>e.filter(e=>e.location.end<=t),as=(e,t)=>e.filter(e=>e.location.start>=t),ao=(e,t)=>{let{kind:a,start:r,end:n}=t,i="number"==typeof r?al(e,r):al(e,r.location.start),l=Array.isArray(a)?a:[a];for(let e=i.length-1;e>=0;e--){let t=i[e];if((0,ee.A)(null!=t,"Token must exist"),l.some(e=>t.kind.startsWith(e)))return t;if(n){if("number"==typeof n){if(t.location.end>=n)break}else if(Array.isArray(n)||"string"==typeof n){if((Array.isArray(n)?n:[n]).includes(t.kind))break}else if(t.location.end>=n.location.start)break}}return null},ad=(e,t)=>{let{kind:a,start:r,end:n}=t,i="number"==typeof r?as(e,r):as(e,r.location.start),l=Array.isArray(a)?a:[a];for(let e of i){if(l.some(t=>e.kind.startsWith(t)))return e;if(n){if("number"==typeof n){if(e.location.start>=n)break}else if(Array.isArray(n)||"string"==typeof n){if((Array.isArray(n)?n:[n]).includes(e.kind))break}else if(e.location.start>=n.location.start)break}}return null};function au(e,t){let{kinds:a,start:r=0}=t,n=[],i="number"==typeof r?r:r.location.end;for(let t of a){let a=n[n.length-1],r=as(e,a?a.location.end+1:i)[0];if(!r?.kind.startsWith(t))return null;n.push(r)}return n}function ac(e){return"object"==typeof e&&!!e&&"status"in e&&"message"in e&&"string"==typeof e.message}function am(e){return!!ac(e)&&403===e.status}function ap(e){if(!e)return;if(aB(e))return e;let t=parseInt(e,10);if(!isNaN(t))return t}function ah(e){return Number(e.replace(/,/g,""))}function af(e,t="yyyy-MM-dd"){let a=ai(e),r=ad(a,{kind:"string",start:0});if(!r)return null;if(r.text===tU){let e=(0,tW.R)(),t=au(a,{kinds:["keyword.operator","string"],start:r});if(!t&&a.length>1)return null;if(t){let[a,r]=t;(0,ee.A)(null!=r,"offset tokens must define offsetValue"),(0,ee.A)(null!=a,"offset tokens must define offsetOperator");let n=ah(r.text)*("+"===a.text?1:-1);return isNaN(n)?null:(0,tP.f)(e,n)}return e}let n=(0,tz.qg)(r.text,t,new Date);return(0,tO.f)(n)?n:null}function ag(e){if("object"!=typeof e||!e)return null;if("raw"in e&&"string"==typeof e.raw&&"html"in e&&"string"==typeof e.html){let{raw:t,html:a}=e;return{raw:t,html:a}}return null}function ay(e){return"object"==typeof e&&e&&"value"in e&&"number"==typeof e.value?{value:e.value}:null}function ax(e){return"object"==typeof e&&e&&"id"in e&&"string"==typeof e.id?{id:e.id}:null}function ab(e){return"number"==typeof e}let av=/(\d{4}-[01]\d-[0-3]\d)/;function aw(e){return"object"==typeof e&&e?aC(e):null}function aj(e){let t=aw(e);if(t&&t.value)return ak(t.value,{timeZone:"UTC"})}function aC(e){if("object"==typeof e.value)return e;let t=aI(e.value);return t?{value:t}:null}function aI(e){return(e=e.slice(0,10)).match(av)?new Date(`${e}T00:00:00Z`):null}let aS={year:"numeric",month:"short",day:"numeric",timeZone:"UTC"};function ak(e,t={}){return e.toLocaleDateString("en-us",{...aS,...t})}function aN(e){return e.toISOString().slice(0,10)}function aT(e){if(!e)return"";let{title:t}=e.value;return"string"==typeof t?t:t.raw}function a_(e){if(!e)return"";let{title:t}=e.value;return"string"==typeof t?t:t.html}function aA(e){return e&&(e.contentType===eJ.Issue||e.contentType===eJ.PullRequest)?e.value.number:void 0}function aR(e){return e?tH.default.sanitize(e,{ALLOWED_TAGS:[]}):e}function aP(e){return"object"==typeof e&&"raw"in e}function aD(e){return"object"==typeof e&&"value"in e&&"number"==typeof e.value}function aE(e){return"object"==typeof e&&"value"in e&&"string"==typeof e.value}function aM(e){return"object"==typeof e&&"id"in e}function aB(e){return Object.values(eT).some(t=>t===e)}function aL(e){return aF(e.startDate,e.duration)}function aF(e,t){return(0,tP.f)(e instanceof Date?e:(0,tD.H)(e),t-1)}function aO(e){return(0,tP.f)(aL(e),1)}function aG(e,t){let a=(0,tD.H)(t.startDate),r=new Date(e.getFullYear(),e.getMonth(),e.getDate());return(0,tE.d)(r,(0,tM.e)(a,1))&&(0,tB.Y)(r,aO(t))}function aV(e){let t=(0,tL.s)(e,new Date)?"MMM dd":"MMM dd, yyyy";return(0,tF.GP)(e,t)}function a$(e,t){return e.toString().padStart(t,"0")}function aW(e){let t=e.getFullYear(),a=e.getMonth()+1,r=e.getDate();return`${t.toString()}-${a$(a,2)}-${a$(r,2)}`}function az(e){let t=(0,tD.H)(e.startDate),a=(0,tO.f)(t)?t:new Date;return{startDate:a,endDate:aF(a,e.duration)}}function aH(e){let t=`${e.startDate}T00:00:00Z`;return{startDate:aI(t)??new Date,endDate:(0,tG.L)((0,tD.H)(t),(e.duration-1)*24)}}function aU(e){if(!e||!e.startDate)return"";let{startDate:t,endDate:a}=az(e);return`${aV(t)} - ${aV(a)}`}function aq(e){return e?function({quantity:e,units:t}){return`${e} ${1===e?a8[t]:t}`}(a7(e.duration)):""}function aK(e){return aQ(e.settings.configuration)}function aQ(e){let t=[],{iterations:a,completedIterations:r}=e;return a.length&&t.push(...a),r.length&&t.push(...r),t}function aJ({startDate:e,duration:t}){return(0,tB.Y)((0,tP.f)((0,tD.H)(e),t),new Date)}function aX(e){let[t,a]=t$([...e].sort(aZ),aJ);return{completedIterations:t.reverse(),iterations:a}}function aY(e,t){return-aZ(e,t)}function aZ(e,t){return e.startDate<t.startDate?-1:e.startDate>t.startDate?1:0}function a0(e){let t=aQ(e);return 0===t.length?null:t.sort(aY)[0]??null}function a1(e){return Object.values(a5).includes(e)?e:null}function a2(e,t){let a=a1(e);return a?function(e,t){if(e.dataType!==eN.Iteration)return null;let a=e.dataType!==eN.Iteration?null:aK(e).find(e=>aG(new Date,e))??null;if(t===a5.Current)return a;let{completedIterations:r,iterations:n}=aX(aK(e));switch(t){case a5.Previous:return r.length>0?r[0]??null:null;case a5.Next:{let e=a?1:0;return n.length>e?n[e]??null:null}default:return null}}(t,a):null}let a5={Current:"@current",Next:"@next",Previous:"@previous"};function a3(e,t){if(e&&t&&a4(e,t))return{startDate:aW(aO(e)),duration:(0,tV.c)((0,tD.H)(t.startDate),aO(e))}}function a4(e,t){return(0,tV.c)((0,tD.H)(t.startDate),(0,tD.H)(e.startDate))>e.duration}function a6(e,t){return{...e,startDate:0===t?e.startDate:aW((0,tP.f)((0,tD.H)(e.startDate),t))}}let a8={weeks:"week",days:"day"};function a7(e){let t=e%7==0?"weeks":"days";return{quantity:"weeks"===t?e/7:e,units:t}}function a9({units:e,quantity:t}){return t*("weeks"===e?7:1)}let re={quantity:2,units:"weeks"};var rt=a(96884),ra=a(20820);function rr(e){return e.toLowerCase().replace(/^(.)/,e=>e.toUpperCase())}function rn(e,t){if(e===t)return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;let a=Object.keys(e),r=Object.keys(t);if(a.length!==r.length)return!1;for(let r of a)if(!Object.prototype.hasOwnProperty.call(t,r)||e[r]!==t[r])return!1;return!0}let ri="single-select-option",rl=e=>!!e&&!!e.match(ri),rs=(e,t,a)=>{if("GRAY"===t.color&&a.some(e=>"GRAY"!==e.color)){let e=ra.i4.slice(1),a=e[Math.floor(Math.random()*e.length)]||"PURPLE";t={...t,color:a}}return{...t,id:`${ri}-${e}`}},ro=e=>aN(new Date)===e;function rd(e){return!!e}function ru(e){return e.filter(rd)}function rc(e){return void 0!==e}let rm=RegExp('<img.+class=".*\\bemoji\\b.*".+title="(?<emoji>:[^:]+:)".+>\\s+(?<text>.*)|<g-emoji.+>(?<gemoji>.+)<\\/g-emoji>\\s+(?<gtext>.+)',"i"),rp=e=>{let t=e.match(rm),{emoji:a,text:r,gemoji:n,gtext:i}=t?.groups??{};return a&&r?`${a} ${r}`:n&&i?`${n} ${i}`:e};function rh(e){return(0,rt.U0)()?e.metaKey:e.ctrlKey}function rf(e,t){let a=-1;for(;!0===e.test(t);)a=e.lastIndex;return a}function rg(e,t){let a,r;for(;null!==(a=e.exec(t));)r=a;return r}let ry=e=>{e.preventDefault()};function rx(e,t){return void 0!==e.position||void 0!==t.position?(e.position??-1)-(t.position??-1):e.databaseId-t.databaseId}function rb(e,t,a){return[t>0?a[t-1]:void 0,e,t<a.length-1?a[t+1]:void 0]}function rv(e,t){let{x:a,y:r}=t,{left:n,top:i,right:l,bottom:s}=e.getBoundingClientRect();return a>=n&&a<=l&&r>=i&&r<=s}let rw={[eN.Assignees]:{isBoardCardLabelable:!1,isSortable:!0,isFilterable:!0,isGroupable:!0,isVerticalGroup:!1,isSliceable:!0,isValueClearable:!0,isValueEditable:!0,isValueBulkEditable:!0},[eN.Date]:{isBoardCardLabelable:!0,isSortable:!0,isFilterable:!0,isGroupable:!0,isVerticalGroup:!1,isSliceable:!0,isValueClearable:!0,isValueEditable:!0,isValueBulkEditable:!0},[eN.IssueType]:{isBoardCardLabelable:!0,isSortable:!0,isFilterable:!0,isGroupable:!0,isVerticalGroup:!1,isSliceable:!0,isValueClearable:!0,isValueEditable:!0,isValueBulkEditable:!0},[eN.Iteration]:{isBoardCardLabelable:!0,isSortable:!0,isFilterable:!0,isGroupable:!0,isVerticalGroup:!0,isSliceable:!0,isValueClearable:!0,isValueEditable:!0,isValueBulkEditable:!0},[eN.Labels]:{isBoardCardLabelable:!0,isSortable:!0,isFilterable:!0,isGroupable:!1,isVerticalGroup:!1,isSliceable:!0,isValueClearable:!0,isValueEditable:!0,isValueBulkEditable:!0},[eN.LinkedPullRequests]:{isBoardCardLabelable:!0,isSortable:!0,isFilterable:!0,isGroupable:!1,isVerticalGroup:!1,isSliceable:!1,isValueClearable:!1,isValueEditable:!1,isValueBulkEditable:!1},[eN.Milestone]:{isBoardCardLabelable:!0,isSortable:!0,isFilterable:!0,isGroupable:!0,isVerticalGroup:!1,isSliceable:!0,isValueClearable:!0,isValueEditable:!0,isValueBulkEditable:!0},[eN.Number]:{isBoardCardLabelable:!0,isSortable:!0,isFilterable:!0,isGroupable:!0,isVerticalGroup:!1,isSliceable:!0,isValueClearable:!0,isValueEditable:!0,isValueBulkEditable:!0},[eN.ParentIssue]:{isBoardCardLabelable:!0,isSortable:!0,isFilterable:!0,isGroupable:!0,isVerticalGroup:!1,isSliceable:!0,isValueClearable:!0,isValueEditable:!0,isValueBulkEditable:!0},[eN.Repository]:{isBoardCardLabelable:!0,isSortable:!0,isFilterable:!0,isGroupable:!0,isVerticalGroup:!1,isSliceable:!0,isValueClearable:!1,isValueEditable:!0,isValueBulkEditable:!1},[eN.Reviewers]:{isBoardCardLabelable:!0,isSortable:!0,isFilterable:!0,isGroupable:!1,isVerticalGroup:!1,isSliceable:!1,isValueClearable:!1,isValueEditable:!1,isValueBulkEditable:!1},[eN.SingleSelect]:{isBoardCardLabelable:!0,isSortable:!0,isFilterable:!0,isGroupable:!0,isVerticalGroup:!0,isSliceable:!0,isValueClearable:!0,isValueEditable:!0,isValueBulkEditable:!0},[eN.SubIssuesProgress]:{isBoardCardLabelable:!0,isSortable:!0,isFilterable:!0,isGroupable:!1,isVerticalGroup:!1,isSliceable:!1,isValueClearable:!1,isValueEditable:!1,isValueBulkEditable:!1},[eN.Text]:{isBoardCardLabelable:!0,isSortable:!0,isFilterable:!0,isGroupable:!0,isVerticalGroup:!1,isSliceable:!0,isValueClearable:!0,isValueEditable:!0,isValueBulkEditable:!0},[eN.Title]:{isBoardCardLabelable:!1,isSortable:!0,isFilterable:!0,isGroupable:!1,isVerticalGroup:!1,isSliceable:!1,isValueClearable:!1,isValueEditable:!0,isValueBulkEditable:!1},[eN.Tracks]:{isBoardCardLabelable:!0,isSortable:!1,isFilterable:!1,isGroupable:!1,isVerticalGroup:!1,isSliceable:!1,isValueClearable:!1,isValueEditable:!1,isValueBulkEditable:!1},[eN.TrackedBy]:{isBoardCardLabelable:!0,isSortable:!1,isFilterable:!1,isGroupable:!1,isVerticalGroup:!1,isSliceable:!1,isValueEditable:!1,isValueClearable:!1,isValueBulkEditable:!1}};function rj(e){return Object.keys(rw).filter(t=>rw[t][e])}let rC=rj("isBoardCardLabelable");function rI(e){return rC.includes(e)}let rS=rj("isSortable");function rk(e){return rS.includes(e)}let rN=rj("isFilterable");function rT(e){return rN.includes(e)}let r_=rj("isGroupable");function rA(e){return r_.includes(e)}let rR=rj("isVerticalGroup");function rP(e){return rR.includes(e)}let rD=rj("isSliceable");function rE(e){return rD.includes(e)}function rM(e){return rA(e)||rD.includes(e)}let rB=rj("isValueEditable");function rL(e){return rB.includes(e)}let rF=rj("isValueBulkEditable");function rO(e){return rF.includes(e)}let rG=rj("isValueClearable"),rV=/^["'`](.*)["'`]$/,r$=(e,t)=>(t=t.toLocaleLowerCase(),e.every(e=>t.includes(e.replace(rV,"$1")))),rW=(e,t)=>e.some(e=>RegExp(`^${e.trim().split("*").map(e=>(0,t_.A)(e)).join(".*")}$`,"i").test(t.trim())),rz=/>(.*)/,rH=/>=(.*)/,rU=/<(.*)/,rq=/<=(.*)/,rK=/(.*)\.\.(.*)/,rQ=/\*\.\.(.*)/,rJ=/(.*)\.\.\*/,rX=e=>{let t=e.match(rH);return t&&t[1]?{operator:"GREATER_THAN_OR_EQUAL",value:t[1]}:(t=e.match(rz))&&null!=t[1]?{operator:"GREATER_THAN",value:t[1]}:(t=e.match(rq))&&null!=t[1]?{operator:"LESS_THAN_OR_EQUAL",value:t[1]}:(t=e.match(rU))&&null!=t[1]?{operator:"LESS_THAN",value:t[1]}:(t=e.match(rQ))&&null!=t[1]?{operator:"LESS_THAN_RANGE",end:t[1]}:(t=e.match(rJ))&&null!=t[1]?{operator:"GREATER_THAN_RANGE",start:t[1]}:(t=e.match(rK))&&null!=t[1]&&null!=t[2]?{operator:"RANGE",start:t[1],end:t[2]}:null},rY=(e,t)=>{if(!e)return null;switch(e.operator){case"GREATER_THAN":case"GREATER_THAN_OR_EQUAL":case"LESS_THAN":case"LESS_THAN_OR_EQUAL":return{...e,value:t(e.value)};case"GREATER_THAN_RANGE":return{...e,start:t(e.start)};case"LESS_THAN_RANGE":return{...e,end:t(e.end)};case"RANGE":return{...e,start:t(e.start),end:t(e.end)};default:tA(e)}},rZ=(e,t)=>e.some(e=>{let a=rX(e);if(a?.operator==="GREATER_THAN_OR_EQUAL")return t>=ah(a.value);if(a?.operator==="GREATER_THAN")return t>ah(a.value);if(a?.operator==="LESS_THAN_OR_EQUAL")return t<=ah(a.value);if(a?.operator==="LESS_THAN")return t<ah(a.value);if(a?.operator==="LESS_THAN_RANGE")return t<=ah(a.end);if(a?.operator==="GREATER_THAN_RANGE")return t>=ah(a.start);if(a?.operator==="RANGE")return t>=ah(a.start)&&t<=ah(a.end);else return ah(e)===t});function r0(e,t){if("GREATER_THAN_OR_EQUAL"===e.operator)return e.value&&t>=e.value;if("GREATER_THAN"===e.operator)return e.value&&t>e.value;if("LESS_THAN_OR_EQUAL"===e.operator)return e.value&&t<=e.value;if("LESS_THAN"===e.operator)return e.value&&t<e.value;if("LESS_THAN_RANGE"===e.operator)return e.end&&t<=e.end;if("GREATER_THAN_RANGE"===e.operator)return e.start&&t>=e.start;if("RANGE"===e.operator){if(e.start&&e.end)return t>=e.start&&t<=e.end;if(e.start)return t>=e.start;if(e.end)return t<=e.end}return!1}let r1=(e,t)=>{let a=af(t);return!!a&&e.some(r=>{let n=rX(r),i=!1,l=rY(n,e=>{let t=af(e);return e&&!t&&(i=!0),t});if(i)return!1;if(l?.operator)return r0(l,a);{let n=af(r);if(!n)return!1;let i=a.getFullYear()===n.getFullYear()&&a.getMonth()===n.getMonth()&&a.getDate()===n.getDate();return rW(e,t)||i}})};function r2(e,t){let a=a2(e,t);if(a)return a;let r=aK(t).sort(aZ);if(Object.values(a5).some(t=>e.includes(t))){let a=ai(e),n=ad(a,{kind:"string",start:0}),i=n?a1(n.text):null,l=i?a2(i,t):null;if(l&&n){let e=au(a,{kinds:["keyword.operator","string"],start:n});if(!e)return null;let[t,i]=e,s=ah(i.text)*("+"===t.text?1:-1);if(!isNaN(s)){let e=r.findIndex(e=>e.id===l.id);if(e>-1)return r.at(e+s)??null}}}return r.find(t=>e.toLowerCase().trim()===t.title.toLowerCase().trim())??null}function r5(e,t,a,r){let n=aK(t).find(e=>e.id===r);if(!n)return a;let i=e=>{let a=r2(e,t)?.startDate;return a?af(a):void 0};return e.some(e=>{let a=rY(rX(e),i);if(a?.operator){let e=af(n.startDate);return!!e&&r0(a,e)}{let a=r2(e,t);return a?.id===n.id}})}let r3=(e,t,a)=>!a.length||!!t.find(t=>{if(!rT(t.dataType))return!1;switch(t.dataType){case eN.Title:{let t=aT(e.Title),r=aA(e.Title),n=ab(r)?`${t} #${r}`:t;return!!n&&(r$(a,t)||r$(a,n))}case eN.Assignees:return!!e[eT.Assignees]?.find(e=>r$(a,e.login)||e.name&&r$(a,e.name));case eN.SingleSelect:{let r=e[t.id]?.id,n=t.settings.options?.find(e=>e.id===r),i=n?.name;return i&&r$(a,i)}case eN.Labels:return!!e[eT.Labels]?.find(e=>r$(a,e.name));case eN.Repository:{let t=e[eT.Repository]?.nameWithOwner;return!!t&&r$(a,t)}case eN.Milestone:{let t=e[eT.Milestone]?.title;return!!t&&r$(a,t)}case eN.Text:{let r=e[t.id];return!!r&&r$(a,r.raw)}case eN.Number:{let r=e[t.id];return!!r&&r$(a,r.value.toString())}case eN.Date:{let r=e[t.id];return!!r&&r$(a,r.value.toString())}case eN.Iteration:{let r=e[t.id]?.id,n=aK(t).find(e=>e.id===r),i=n?.title;return i&&r$(a,i)}case eN.LinkedPullRequests:return!!e[eT.LinkedPullRequests]?.find(e=>r$(a,e.number.toString()));case eN.Reviewers:return!!e.Reviewers?.find(e=>r$(a,e.reviewer.name)||e.reviewer.name&&r$(a,e.reviewer.name));case eN.IssueType:{let t=e[eT.IssueType]?.name;return!!t&&r$(a,t)}case eN.ParentIssue:{let t=e[eT.ParentIssue]?.nwoReference;return!!t&&r$(a,t)}case eN.SubIssuesProgress:return!1;default:tA(t.dataType)}}),r4=({columnData:e,field:t,value:a,matchNegated:r=!1})=>{let n;let i=e.Title;if(!i)return!1;if("type"===t)switch(i.contentType){case eJ.DraftIssue:return n="draft"===a||"issue"===a,r?!n:n;case eJ.Issue:return n="issue"===a,r?!n:n;case eJ.PullRequest:{let{state:e,isDraft:t}=i.value;return n="draft"===a?"open"===e&&t:"pr"===a,r?!n:n}default:return!1}if("state"===t)switch(i.contentType){case eJ.Issue:return n=i.value.state.toString()===a,r?!n:n;case eJ.PullRequest:{let{isDraft:e,state:t}=i.value;return n=t===a||"merged"===t&&"closed"===a||e&&"open"===t&&"draft"===a,r?!n:n}case eJ.DraftIssue:if("open"===a)return!r;if("closed"===a||"merged"===a)return r;return!1;default:return!1}if("reason"===t)switch(i.contentType){case eJ.Issue:{let e=i.value.state.toString(),t=i.value.stateReason??("closed"===e?eF.Completed:void 0);return n="closed"===e&&t&&new Set([eF.Completed,eF.NotPlanned,eF.Duplicate]).has(t)?t===nj(a):"open"===e&&t===eF.Reopened&&t===nj(a),r?!n:n}case eJ.PullRequest,eJ.DraftIssue:return r}return!1},r6=[],r8=({column:e,columnData:t,values:a=r6,matchEmpty:r=!1,matchNegated:n=!1})=>{let i;let{loggedInUser:l}=eU();if(!rT(e.dataType))return!1;switch(e.dataType){case eN.Title:{let e=aT(t.Title),l=aA(t.Title),s=ab(l)?`${e} #${l}`:e;return i=s?rW(a,e)||rW(a,s):r,n?!i:i}case eN.Assignees:return nt(t,"Assignees",a,r,n,l);case eN.SingleSelect:{let l=t[e.id]?.id,s=e.settings.options?.find(e=>e.id===l),o=s?.name;return i=o?rW(a,o):r,n?!i:i}case eN.Labels:if(r){let e=!t.Labels||!t.Labels?.length;return n?!e:e}return i=!!t.Labels?.find(e=>rW(a,e.name)),n?!i:i;case eN.Repository:{let e=t.Repository?.nameWithOwner;return i=e?rW(a,e):r,n?!i:i}case eN.Milestone:{let e=t.Milestone?.title;return i=e?rW(a,e):r,n?!i:i}case eN.Text:{let l=t[e.id];return i=l?rW(a,l.raw):r,n?!i:i}case eN.Number:{let l=t[e.id];return i=l?rZ(a,l.value):r,n?!i:i}case eN.Date:{let l=t[e.id];return i=l?r1(a,tR(l.value)):r,n?!i:i}case eN.Iteration:{let l=t[e.id]?.id;return i=r5(a,e,r,l),n?!i:i}case eN.LinkedPullRequests:if(r){let e=!t[eT.LinkedPullRequests]||!t[eT.LinkedPullRequests]?.length;return n?!e:e}return i=!!t[eT.LinkedPullRequests]?.find(e=>rW(a,e.number.toString())),n?!i:i;case eN.Reviewers:return nt(t,"Reviewers",a,r,n,l);case eN.IssueType:{let e=t[eT.IssueType]?.name;return i=e?rW(a,e):r,n?!i:i}case eN.ParentIssue:{let e=t[eT.ParentIssue]?.nwoReference;return i=e?rW(a,e):r,n?!i:i}case eN.SubIssuesProgress:{let e=t[eT.SubIssuesProgress];if(a.length)return!1;return i=e?.total?!r:r,n?!i:i}default:tA(e.dataType)}},r7=({itemUpdateAtDate:e,value:t,matchNegated:a})=>{if(!e)return!1;let r=t.match(tq),n=r?r[1]:void 0;return!!n&&!!r0({operator:a?"GREATER_THAN_OR_EQUAL":"LESS_THAN",value:af(`@today-${n}`)},e)},r9={d:1,w:7,m:28},ne=({itemUpdateAtDate:e,value:t,matchNegated:a})=>{if(!e)return!1;let r=t.match(tK);if(r){let[t,n,i]=r;if(n&&i){let t=parseInt(n)*r9[i];return!!r0({operator:a?"GREATER_THAN_OR_EQUAL":"LESS_THAN",value:af(`@today-${t}`)},e)}}return!1};function nt(e,t,a,r,n,i){let l;if(r){let a=!e[t]||!e[t]?.length;return n?!a:a}let s=a.indexOf("@me");return s>-1&&i?.login&&a.splice(s,1,i.login.toLocaleLowerCase()),l="Assignees"===t?!!e[t]?.find(e=>rW(a,e.login)||e.name&&rW(a,e.name)):!!e[t]?.find(e=>rW(a,e.reviewer.name)||e.reviewer.name&&rW(a,e.reviewer.name)),n?!l:l}let na=/(?:[\w-]+:)+(?:[^\s"']+|"(?:[^"]*)"*|'(?:[^']*)'*)*|(?:[^\s"']+|"(?:[^"]*)"*|'(?:[^']*)'*)/g;function nr(e){let t=e.split(na);na.lastIndex=0;let a=[],r=[],n=[],i=na.exec(e);na.lastIndex=0,i&&i.index>0&&n.push({type:"search",value:"",spaceAfter:" ".repeat(i.index)});let l=null,s=1;for(;null!==(l=na.exec(e));){let i=l[0];if(!i)continue;if(nl(i))return{searchTokens:[],fieldFilters:[],orderedTokenizedFilters:[{type:"search",value:e,spaceAfter:""}],invalidQuery:!0};let o=t[s]||"";if(s+=1,null!==i.match(np)){let e=function(e){let t=e.match(nd);return t&&t[0]?t[0]:""}(i),t=i.substring(e.length+1);if(e&&r.push([e,no(t)]),"no"===e)n.push({type:"no-field",field:t,spaceAfter:o});else if("-no"===e)n.push({type:"no-field",field:t,exclude:!0,spaceAfter:o});else if("has"===e)n.push({type:"has",field:t,spaceAfter:o});else if("-has"===e)n.push({type:"has",field:t,exclude:!0,spaceAfter:o});else if("is"===e)n.push({type:"is",value:t,spaceAfter:o});else if("-is"===e)n.push({type:"is",exclude:!0,value:t,spaceAfter:o});else if("reason"===e)n.push({type:"reason",value:t,spaceAfter:o});else if("-reason"===e)n.push({type:"reason",exclude:!0,value:t,spaceAfter:o});else if("last-updated"===e)n.push({type:"last-updated",value:t,spaceAfter:o});else if("-last-updated"===e)n.push({type:"last-updated",exclude:!0,value:t,spaceAfter:o});else if("updated"===e)n.push({type:"updated",value:t,spaceAfter:o});else if("-updated"===e)n.push({type:"updated",exclude:!0,value:t,spaceAfter:o});else{let a=e.startsWith("-");n.push({type:"field",field:a?e.slice(1):e,value:t,exclude:a,spaceAfter:o})}}else{n.push({type:"search",value:i,spaceAfter:o});let e=i.trim();e.length&&a.push(e.toLowerCase())}}return{searchTokens:a,fieldFilters:r,orderedTokenizedFilters:n,invalidQuery:!1}}function nn(e){return"no"===e||"has"===e}function ni(e){return 0===e.indexOf("-")}function nl(e){let t=[],a=[];for(let r of e){let e=a.length>0,n=t.length>0,i=t[t.length-1]||"",l=a[a.length-1]||"";"'"===r?(!e||l<i)&&(t.length>0&&i===r?t.pop():t.push(r)):'"'===r&&(!n||i<l)&&(a.length>0&&l===r?a.pop():a.push(r))}return t.length>0||a.length>0}let ns=/"/g;function no(e){let t=[],a=0;for(let r=0;r<=e.length;r++){let n=e[r],i=e.substring(a,r),l=(i.match(ns)||[]).length;if(","===n&&l%2==0||r===e.length){let e=i.replace(rV,"$1").trim();a=r+1,e.length&&t.push(e)}}return t}let nd=/^[^:]*/;function nu(e){let t=new Map;for(let a of e){let e=nm(a.name);t.set(e,a)}return t}function nc(e){let t=ng(e.toLocaleLowerCase().trim());return["repo","assignee","label"].includes(t)&&("repo"===t&&(t="repository"),"assignee"===t&&(t="assignees"),"label"===t&&(t="labels")),t}function nm(e){let t=e.toLocaleLowerCase().trim().replace(nh,"-");return["repository","assignees","labels"].includes(t)&&("repository"===t&&(t="repo"),"assignees"===t&&(t="assignee"),"labels"===t&&(t="label")),t}let np=/^(?:(?!["']|:).)+(?=:)/,nh=/ /g,nf=/-/g;function ng(e){return e.replace(nf," ")}let ny=(e,t,a)=>{if(!e.length||!a.length||a.length>1)return null;let{dataType:r}=t;switch(r){case eN.SingleSelect:{let e=t.settings.options?.find(e=>rW(a,e.name));return e?{dataType:r,memexProjectColumnId:t.id,value:{id:e.id}}:null}case eN.Iteration:{let e;let{configuration:n}=t.settings;if(!n)return null;let i=a[0];if(null==i)return null;let l=a2(i,t);return(e=1===a.length&&l?l:aQ(n).find(e=>rW(a,e.title))||null)?{dataType:r,memexProjectColumnId:t.id,value:{id:e.id}}:null}case eN.Text:for(let n of e){let e=n.columns[t.id];if(e&&rW(a,e.raw))return{dataType:r,memexProjectColumnId:t.id,value:e.raw}}return null;case eN.Date:{let e=a[0];if(null==e)return null;let n=aI(e);if(!n)return null;return{dataType:r,memexProjectColumnId:t.id,value:{value:n}}}case eN.Number:for(let n of e){let e=n.columns[t.id];if(e&&rW(a,`${e.value}`))return{dataType:r,memexProjectColumnId:t.id,value:e}}return null;case eN.ParentIssue:for(let n of e){let e=n.columns[t.id];if(e&&rW(a,e.nwoReference))return{dataType:r,value:e}}return null;case eN.Assignees:case eN.Labels:return{dataType:r,value:[]};case eN.Milestone:return{dataType:r,value:void 0};case eN.Repository:default:return null}},nx=/^(@)*\w+(-\d+(d|w|m))?$/,nb=/\S+:["']*$/;function nv(e,t,{value:a,replace:r,filterForPresence:n=!1,filterForEmpty:i=!1,filterForNegative:l=!1}={}){let s=nm(t),o=e.trim();r&&(o.endsWith('"')||o.endsWith("'"))&&(o=o.slice(0,-1));let d=o.match(nb),u=`${s}:`,c=ai(o),m=ao(c,{kind:["keyword.operator.range","keyword.operator.comparison"],start:o.length-1,end:["keyword.operator.separator","source.whitespace"]}),p=ao(c,{kind:"keyword.operator.separator",start:o.length-1});m&&(u+=o.substring(p?p.location.start+1:0,m.location.start)+m.text);let h=()=>{let e=o.lastIndexOf(",");if(-1===e)return!1;if(e===o.length-1)return!0;let t=o.substring(e+1);return a?.includes(t)||!1},f=t=>{let a=e.lastIndexOf(" "),r=e.substring(0,a);return r.length?`${r} ${t}`:`${r}${t}`},g=t=>{let a=e.lastIndexOf(","),r=e.substring(0,a+1);return`${r}${t}`};if(n)return h()?g(s):f(`${l?"-":""}has:${s}`);if(i)return h()?g(s):f(`${l?"-":""}no:${s}`);if(l){let e="";return(a&&(e=a.toString().match(nx)?a:`"${a}"`),h())?g(e):f(`-${u}${e}`)}if(a){let e=a.match(nx)?a:`"${a}"`;if(h())return g(e);u=`${u}${e}`}if(d)return e.replace(nb,u);if(r){if(a){let t=e.lastIndexOf(`${s}:`),a=e.substring(0,t);return`${a}${u}`}return f(u)}return o.length?`${o} ${u}`:u}function nw(e){let t=e.toLocaleLowerCase(),a=nr(t);return{normalisedQuery:t,...a}}function nj(e){let t=e.replace(/[-_ ]/g,"").toLocaleLowerCase();return"notplanned"===t?eF.NotPlanned:"duplicate"===t?eF.Duplicate:"completed"===t?eF.Completed:"reopened"===t?eF.Reopened:null}let nC=(e,t,a)=>{let r=(0,t_.A)(e),n=(0,t_.A)(t),i=RegExp(`\\s*${r}:(.*,)?("?${n}"?)(,\\S)?`,"ig").exec(a);if(!i)return a;let l=i[0],s=i[1],o=i[2]??"",d=i[3],u=s?`,${o}`:d?`${o},`:l;return function(e,t){let a=RegExp("^[\\s,\\s]*|[\\s,\\s]*");return e.replace(a,"")}(a.replace(u,""),0)};function nI(e,t,a={}){for(let r of t?.type!=="no-field"&&t?.type!=="has"&&t?.value?t.value.split(",").map(e=>e.trim()):[])e.add(a.columnOptionMap?.get(r.toLowerCase())||r);return e}function nS(e){return!e.includes(" ")||e.startsWith('"')||e.endsWith('"')||e.startsWith("'")||e.endsWith("'")?e:`"${e}"`}var nk=a(44492),nN=a(23125);let nT="_noValue",n_=(0,K.createContext)(null),nA=()=>{let e=(0,K.useContext)(n_);if(!e)throw Error("useSliceBy must be used within a ViewProvider");return e},nR={};function nP(e){let t=nR[e];if(!t){if(t=eA(e))nR[e]=t;else throw Error(`Missing API metadata for ${e}`)}return t}var nD=a(55156),nE=a(56366),nM=a(57572),nB=a(94762);let nL=15e3,nF={success:"success",default:"default",warning:"warning",error:"error"};function nO(e,t="and"){if(e.length<=2)return e.join(` ${t} `);{let a=e.pop();return e.push(`${t} ${a}`),e.join(", ")}}let nG=(e,t="EEE, MMM d")=>{let a=e.toISOString().slice(0,-1),r=(0,tD.H)(a);return(0,tF.GP)(r,t)},nV=e=>{let t=new Date(new Date(e).setHours(0,0,0,0));return new Date(t.getTime()-6e4*t.getTimezoneOffset())},n$=(e,t,a="EEE, MMM d")=>{let r=e.getUTCFullYear()!==t.getUTCFullYear(),n=nG(e,a),i=nG(t,r?`${a} yyyy`:a);return n===i?n:`${n} - ${i}`};function nW([e,t]){return e?t?e<=t?[e,t]:[t,e]:[e,e]:[t,t]}let nz=(e,t,a)=>1===e?t:a,nH={betaSignupSuccessMessage:"This project has been added to the waitlist. Thank you for your interest!",addColumnNameValue:e=>`Add ${e.toLowerCase()}\u{2026}`,addItem:"Add item",archiveGroupItemsConfirmationMessage:e=>`Are you sure you want to archive ${nz(e,"this item",`${e} items`)}?`,deleteGroupItemsConfirmationMessage:e=>`Are you sure you want to delete ${nz(e,"this item",`${e} items`)} from the project?`,archiveGroupItemsConfirmationTitle:"Archive all items?",deleteGroupItemsConfirmationTitle:"Delete all items?",cannotAddItemsWhenGroupByMilestone:"Cannot add items when grouped by milestone",cannotAddItemsWhenGroupByRepository:"Cannot add items when grouped by repository",cannotAddItemsWhenGroupByIssueType:"Cannot add items when grouped by type",cannotAddType:"Cannot add type",cannotEditTitle:"Update permissions",cannotEditItemContent:"You can't edit this item because it belongs to a repository that you don't have write-access to.",confirmDialog:"Got it!",iterationLabel:{current:"Current",planned:"Planned",completed:"Completed",break:"Break"},cannotReorderForSortMessage:"Cannot reorder items between sorted values",cannotReorderForSortAction:"Remove sorting",changesSaved:"Changes saved",columnLimitExceeded:"Column limit is too large, must be less than 1,000,000.",createNewItemOrAddExistingIssueAriaLabel:"Create new item or add existing item",dateEditor:"Date editor",defaultArchiveConfirmationMessage:(e,t)=>`Are you sure you want to archive ${e?`these ${t} items`:"this item"}?`,defaultArchiveConfirmationTitle:e=>`Archive item${e?"s":""}?`,deleteFieldDialogTitle:"Delete field?",deleteField:e=>`This will delete the field \u{201C}${e}\u{201D}`,draftConvertPromptDescription:"Convert to issue to edit this cell",draftConvertPromptTitle:"Convert to issue",duplicateItemForGroup:"Content already exists in this group",duplicateView:({isDirty:e})=>e?"Save changes to new view":"Duplicate view",edit:"Edit",editTitle:"Edit title",emptyColumnNameValue:{number:"Enter a number\u2026",text:"Enter text\u2026",date:"Enter a date\u2026",iteration:"Choose an iteration\u2026",singleSelect:"Choose an option\u2026",linkedPullRequest:"No linked pull requests"},excludeSuggestion:"Exclude",fieldMustBeAnInteger:"This field must be an integer",fieldMustBePositiveOrZero:"This field must be positive or 0.",filterByKeyboardOrByField:"Filter by keyword or by field",genericErrorMessage:"Sorry, something went wrong",genericFormErrorMessage:"This form has errors",groupHeaderMenu:(e,t)=>`Actions for ${t?"column":"group"}: ${e}`,invalidFieldValues:({name:e,value:t,fields:a})=>`Invalid \`${e}\`: ${t}. ${a} are acceptable values for \`${e}\``,issue:"issue",sidePanelRegionNameLabel:"Side panel",sidePanelProjectInfoLabel:"Project information",sidePanelBulkAddLabel:"Add items to project",sidePanelItemNotSupported:"Pull requests are not currently supported in the side panel.",sidePanelItemNotFound:"The item is not in the project, or you don't have access to view it.",sidePanelCloseConfirmation:{title:"Discard changes?",content:"You have unsaved changes. Are you sure you want to discard them?",cancelButtonContent:"Keep editing",confirmButtonContent:"Close and discard"},sidePanelPinLabel:"Pin side panel",sidePanelUnpinLabel:"Unpin side panel",sidePanelToolbarLabel:"Side panel controls",issueButtonLabel:{closeIssue:"Close issue",reopenIssue:"Reopen",closeWithComment:"Close with comment",reopenWithComment:"Reopen and comment",reopenIssueLong:"Reopen issue",closeAsCompleted:"Close as completed",closeAsCompletedDescription:"Done, closed, fixed, resolved",closeAsNotPlanned:"Close as not planned",closeAsNotPlannedDescription:"Won\u2019t fix, can\u2019t repro, duplicate, stale"},issueSideButtonMoreOptionsLabel:"More options",iterationCustomModelError:"Iteration editor requires a custom model",iterationDurationQtyLow:e=>`Iteration length must be ${e} or more`,iterationDurationQtyHigh:e=>`Iteration length must be ${e} or less`,iterationDurationLabel:"Duration",iterationNotFound:"Iteration not found",iterationStartDateLabel:"Starts on",jumpToBottom:"Jump to bottom",joinBeta:"Join beta",joinWaitlist:"Join waitlist",newField:"New Field",newItemAddedToBottomOfColumn:"The new item has been added to the bottom of the column.",newItemAddedToBottomOfRoadmap:"The new item has been added to the bottom of the roadmap.",newItemAddedToBottomOfTable:"The new item has been added to the bottom of the table.",newItemFilterWarning:"The new item is hidden by this view's filters.",viewItem:"Open item",newItemFindIssuePlaceholder:e=>e?"Search issues and pull requests, create a new issue, or add multiple items":"Search issues and pull requests, or add multiple items",newItemPlaceholder:"Start typing to create an item, or type # to select a repository",newItemPlaceholderAriaLabel:"Start typing to create an item, or type hashtag to select a repository",newIterationField:e=>`Iteration${e}`,newOptionsCount:"New options count",noPermissionEmptyColumnValue:e=>`No ${e}`,noDescriptionProvided:"No description provided",noProjectLimitWaitlistBanner:"This project is nearing the 1,200 item limit. Join the waitlist for the beta to unlock increased item limits for this project.",noProjectLimitWaitlistStaffshipBanner:"Would you like to join the beta for increased item limits for this project?",noneYet:"None yet",hasSuggestion:"Has",noSuggestion:"No",numberEditor:"Number editor",projectNameRequired:"Project name is required.",projectSettingsSaved:"Project settings saved successfully",pullRequest:"pull request",repoArchivedErrorMessage:"You can't edit this field because this repository is archived",repoIsEmpty:"This repository is either empty or all items were already added to this project.",repoPickerFilterPlaceholder:"Search repositories",requiredFieldErrorMessage:"Field name is required.",requiresCustomColumn:"requires a custom column",reviewersCount:e=>`${e} reviewer${e>1?"s":""}`,progressCount:({percent:e,total:t})=>`${e}% of ${t}`,progressPercentCount:e=>`${e}% completed`,noItemsInSearchResult:"We couldn't find any items matching that search query.",singleSelectCustomModelError:"Single select editor requires a custom model",singleSelectOptionLimitWarning:e=>`Maximum of ${e} options reached`,clearFilter:"Clear filter",discardChanges:"Discard",saveChanges:"Save",cancelChanges:"Cancel",saveToNewChart:"Save to new chart",selectRepo:"Select repository",set:"Set",reset:"Reset",selectionMaximumExceeded:e=>`More than ${e} cells are selected. Deselect some cells to perform bulk edits.`,sortBy:"Sort by",statusFieldEmptyError:"Error: At least one valid option is required for the status field",sortDatesAscending:"Ascending order: oldest to newest",sortDatesDescending:"Descending order: newest to oldest",sortNumbersAscending:"Ascending order: lowest to highest",sortNumbersDescending:"Descending order: highest to lowest",sortSingleSelectAscending:"Ascending order: first to last",sortSingleSelectDescending:"Descending order: last to first",sortStringsAscending:"Ascending order: A to Z",sortStringsDescending:"Descending order: Z to A",tableHeaderContextMenu:{selectColumn:"Select column",sortAscending:"Sort ascending",sortAscendingActive:"Sorted ascending",sortDescending:"Sort descending",sortDescendingActive:"Sorted descending",filterValues:"Filter by values\u2026",filterByType:"Filter by type or state\u2026",groupByValues:"Group by values",groupByActive:"Grouped by field",sliceByValues:"Slice by values",hideField:"Hide field",fieldSettings:"Field settings\u2026"},textEditor:"Text editor",titleCannotBeBlank:"Title cannot be blank",titleContainsReservedColonCharacter:"Field name can't contain colons",titleHasAlreadyBeenTaken:"This field name has already been taken",titleIsReserved:"This field name is a reserved word",unableToAssignUsersToConvertedIssue:e=>`Unable to assign the following users to the converted issue: ${e.join(", ")}`,unableToPasteLabelsBetweensRepos:"Labels can only be copied within the same repository",unableToPasteAssigneesBetweensRepos:"Assignees can only be copied within the same repository",unableToPasteMilestonesBetweensRepos:"Milestones can only be copied within the same repository",unableToPasteLabelsOnDraftIssue:"Labels cannot be applied to draft issues",unableToPasteMilestonesOnDraftIssue:"Milestones cannot be applied to draft issues",unableToPasteIssueTypesOnDraftIssue:"Issue types cannot be applied to draft issues",unableToPasteIssueTypesOnPullRequest:"Issue types cannot be applied to pull requests",unableToPasteParentIssueOnDraftIssue:"Parent issues cannot be applied to draft issues",unableToPasteParentIssueOnPullRequest:"Parent issues cannot be applied to pull requests",unableToPasteMismatchedDataTypes:"Cannot paste data of different types",updateColumnOptionsFailed:"Column options failed to update.",forbiddenErrorMessage:"You don't have permission to edit this field.",undefined:"undefined",unsortBy:"Unsort by",untitledProject:"Untitled project",untitledUserProject:e=>`@${e}'s untitled project`,viewNameRequired:"View name cannot be empty",removeTitle:"Remove",resultCount:e=>`${e} result${1===e?"":"s"}.`,itemType:e=>{switch(e){case eJ.Issue:return"Issue";case eJ.PullRequest:return"Pull request";case eJ.DraftIssue:return"Draft issue";case eJ.RedactedItem:return"Unknown item"}},dismissNoticeError:"Could not dismiss notice. Please try again.",flagSyncError:"Oops! We hit a snag syncing your project. Please refresh your project.",serviceUnavailable:"We are having trouble connecting to your project. Please try again or reload the page."},nU={updateItem:"update item",updateItems:"update items",delete:"delete",paste:"paste",fillCells:"fill cells",archive:e=>nz(e,"archive item","archive items"),moveItem:"move item"},nq={item:(e,t)=>`${t} \xb7 ${e}`,view:(e,t)=>t?`${t} \xb7 ${e}`:e,archive:e=>`Archive \xb7 ${e}`,settings:(e,t)=>t?`${t} \xb7 Settings \xb7 ${e}`:`Settings \xb7 ${e}`,workflows:e=>`Workflows \xb7 ${e}`,insights:e=>`Insights \xb7 ${e}`,newIssue:e=>`New issue \xb7 ${e}`},nK={insightsButton:"Insights",projectDetailsButton:"Project details",viewMoreOptions:"View more options"},nQ={closed:"Closed",noDueDate:"No due date",addedUnsupportedItemToast:"Drafts can\u2019t be added with a milestone. Item was added to No milestone group",pastDueBy:e=>`Past due by ${(0,nB.m)(e)}`,dueOn:e=>`Due by ${(0,tF.GP)(e,"MMMM d, yyyy")}`},nJ={invalidFilterQuotes:"Invalid filter: Unmatched quotation mark",updatedValueErrorMessage:"Supported format is <@today-X, where X is a number and unit. Unit can be one of d,w or m ex: 7d",lastUpdatedValueErrorMessage:"Supported format is XXdays (except 0days)",unknownFieldFilter:e=>`Invalid filter: Unknown field name "${e}"`,noIterationMatch:(e,t)=>`Invalid value: "${e}" doesn't match any iterations in the "${t}" field`,noOptionsMatch:(e,t)=>`Invalid value: "${e}" doesn't match options for the "${t}" field`,invalidNumberValue:e=>`Invalid value: "${e}" is not a number`,invalidDateValue:e=>`Invalid value: "${e}" is not a valid date (must be formatted YYYY-MM-DD)'`,invalidPwlDateValue:(e,t)=>`Invalid value <pre>${t}</pre> for <pre>${e}</pre>. Fix by using date format YYYY-MM-DD`,invalidQualifier:(e,t)=>`Invalid value: "${e.join(", ")}" does not match the supported values "${nO(Object.values(t),"or")}"`},nX=e=>e===eN.SingleSelect?["option","options"]:e===eN.Iteration?["iteration","iterations"]:["value","values"],nY={deleteProjectWarning:"Unexpected bad things will happen if you don\u2019t read this!",deleteProjectTitle:"Are you absolutely sure?",deleteProjectConfirmation:"I understand the consequences, delete this project",deleteProjectInputLabel:"Type in the name of the project to confirm that you want to delete this project.",noIterationsTitle:"You're out of iterations.",noIterationsDescription:'Create an iteration using the "+ Add iteration" button above.',noCompletedIterationsTitle:"No completed iterations.",noCompletedIterationsDescription:"Iterations will automatically move here over time.",organizationOwnedProjectVisibilityRestriction:"Only organization owners can change project visibility.",projectIsPublic:"This project is currently public.",projectIsPrivate:"This project is currently private.",projectIsInternal:"This project is currently internal to your enterprise.",unselectCollaborator:e=>`Unselect ${e}`,selectCollaborator:e=>`Select ${e}`,userOwnedProjectVisibilityRestriction:"Only admins can change project visibility.",willPushActiveIterations:e=>`${e} active ${1===e?"iteration":"iterations"} will also be pushed forward.`,deleteValuesTitle:(e,t)=>`Delete ${nz(t,nX(e)[0],`${t} ${nX(e)[1]}`)}?`,deleteValuesIntro:(e,t,a)=>`This will permanently delete ${nz(a,`this ${nX(e)[0]}`,`these ${nX(e)[1]}`)} from the "${t}" field.`,deleteValuesAffectedItemsWarning:(e,t,a)=>`The ${nz(t,...nX(e))} will be permanently deleted from ${a} ${nz(a,"item","items")} in this project.`,deleteValuesUnknownAffectedItemsWarning:(e,t)=>`The ${nz(t,...nX(e))} will be permanently deleted from any items in this project.`,deleteIterationValuesIntro:(e,t)=>`This will permanently delete ${nz(t,"this iteration value","these iteration values")} from the "${e}" field.`,deleteIterationValuesAffectedItemsWarning:(e,t)=>`${nz(e,"This iteration value","These iteration values")} will be removed from ${t} ${nz(t,"item","items")} in this project.`,deleteIterationValuesUnknownAffectedItemsWarning:e=>`${nz(e,"This iteration value","These iteration values")} will be removed from any items in this project.`,cannotBeUndone:"This cannot be undone."},nZ={Repository:{Alerts:{NeedsConversion:{title:nH.draftConvertPromptTitle,content:"Convert this draft to an issue to add it to this repository",confirmButtonContent:nH.confirmDialog},CannotTransferPulls:{title:"Unable to transfer pull request",content:"Pull requests cannot be moved between repositories.",confirmButtonContent:nH.confirmDialog},IssueNeedsTransfer:{title:"Transfer issue",confirmButtonContent:nH.confirmDialog}}},Milestone:{Alerts:{NeedsConversion:{title:nH.draftConvertPromptTitle,content:"Drafts can\u2019t be added to milestones. Convert this draft to an issue to add it to a milestone.",confirmButtonContent:nH.confirmDialog},NeedsTransfer:{title:"New milestone required",confirmButtonContent:nH.confirmDialog}}},IssueType:{Alerts:{NeedsConversion:{title:nH.cannotAddType,content:"Convert this draft to an issue to add an issue type.",confirmButtonContent:nH.confirmDialog},CannotAssignPulls:{title:nH.cannotAddType,content:"Pull requests cannot have an issue type.",confirmButtonContent:nH.confirmDialog},NoTypesForRepo:{title:nH.cannotAddType,content:"Issue types are excluded from this repository.",confirmButtonContent:nH.confirmDialog},NeedsTransfer:{title:nH.cannotAddType,confirmButtonContent:nH.confirmDialog}}}},n0={editWorkflow:"Edit",saveWorkflow:"Save and turn on workflow",discardWorkflow:"Discard",deleteWorkflow:"Delete",readOnlyLabel:"Viewing mode. Click edit to make changes to this workflow.",duplicateWorkflowName:"A workflow with this name already exists",emptyFilterDefault:"Filter cannot be empty",emptyFilterAutoAdd:"An empty filter will match all newly created and updated Issues and Pull Requests",emptyWorkflowName:"Workflow name cannot be empty",invalidActionField:"A valid field is required",invalidActionFieldValue:"A valid value is required",invalidNoAction:"An action is required",invalidNoContentType:"A type is required",invalidNoQuery:"A query is required",invalidNoQueryOrFieldId:"A query or a field id is required",invalidNoRepository:"A repository is required",invalidNoValue:"A value is required",workflowNameTooLong:"Workflow name cannot be longer than 250 characters",invalidQuery:"Filter contains invalid syntax",addItemBlockLabel:"Add the item to the project",addSubIssuesBlockLabel:"Add sub-issues to the project",closeItemBlockLabel:"Close the issue",getItemsBlockLabel:"When the filter matches a new or updated item",getSubIssuesBlockLabel:"When an item in the project has sub-issues",itemAddedToProjectLabel:"When an item is added to the project",itemReopenedLabel:"When an item is reopened",itemClosedLabel:"When an item is closed",codeChangesRequestedLabel:"When a pull request has a review requesting changes",codeReviewApprovedLabel:"When a pull request is approved",pullRequestMergedLabel:"When a pull request is merged",autoArchiveItemsLabel:"Filter items",projectItemColumnUpdateLabel:"When the status is updated",setValueLabel:"Set value",selectContentType:"Select a content type",archiveItemLabel:"Archive item",autoAddManualTip:"Going forward, all new or updated items that match your filter will be auto added. You can also manually add items that currently match your filter",manualRunConfirmationButton:e=>"update"===e?"Update workflow":"disable"===e?"Disable workflow?":"Save and enable",manualRunConfirmationMessage:(e,t)=>"disable"===e?"You have to disable this workflow to be able to edit this field.":`${"update"===e?"Updating":"Enabling"} this workflow will archive <strong>${t}</strong> item${t&&t>1?"s":""} that currently meet the filter conditions.
      <br><br>As future items match filter conditions, they will be automatically archived.`,manualRunConfirmationTitle:e=>"update"===e?"Update workflow?":"disable"===e?"Disable workflow?":"Enable workflow?",deleteValuesAffectedWorkflowsWarning:(e,t,a)=>`${nz(t,`This ${nX(e)[0]} is`,`These ${nX(e)[1]} are`)} used in ${a} ${1===a?"workflow":"workflows"}. Deleting ${nz(t,"it","them")} will disable the ${nz(a,"workflow","workflows")} and invalidate any actions referencing ${nz(t,"it","them")}.`,deleteWorkflowError:"Could not delete workflow, please try again",deleteWorkflowSuccess:"Workflow deleted",deleteWorkflowCallToAction:"Delete workflow",deleteWorkflowConfirmationTitle:"Delete workflow",deleteWorkflowConfirmationContent:"Are you sure you want to delete this workflow? This action cannot be undone.",deleteWorkflowConfirmationButton:"Delete"},n1={defaultWorkflowName:"New auto-add workflow",duplicateWorkflowLabel:"Duplicate workflow",workflowNameInputLabel:"Workflow name",duplicateButton:"Duplicate",autoAddWorkflowLimitReached:"Maximum number of auto-add workflows reached. Delete a workflow or upgrade your plan to continue.",newWorkflowName:e=>`Duplicate of ${e}`},n2={privacySettingsAdmin:"Everyone in the organization is an admin of this project.",collaboratorDropDownAdmin:"Can see, make changes to, and add new collaborators to this project.",collaboratorDropDownWrite:"Can see and make changes to this project.",collaboratorDropDownRead:"Can see this project.",collaboratorDropDownNone:"Organization members will only be able to see this project if it\u2019s public. To give an organization member additional access, they can be added as part of a team or as a collaborator.",addCollaboratorPlaceholderUserProject:"Search by username",addCollaboratorPlaceholderOrgProject:"Search by username or team",collaboratorFilterPlaceholderUserProject:"Find a collaborator",collaboratorFilterPlaceholderOrgProject:"Find a collaborator or a team"},n5={saveButton:"Save",cancelButton:"Cancel",shortDescriptionTitle:"Short description",shortDescriptionPlaceholder:"A short description about this project.",readmeTitle:"README",readmePlaceholder:"Let everyone know what this project is about, how to use it and link to important resources.",errorMessage:"An error occurred while saving."},n3={instructions:e=>`Moving ${e}`,firstItemInList:"First item in list.",lastItemInList:"Last item in list.",moveUp:"Move item up in one increment",moveDown:"Move item down in one increment",cancelDrag:"Cancel drag mode",endDrag:"Place item",movedBetween:(e,t)=>`Moved between ${e} and ${t}.`,successfulMove:(e,t,a)=>`Successfully moved ${e} between ${t} and ${a}.`,successfulMoveTop:e=>`Successfully moved ${e} to the first position in list`,successfulMoveBottom:e=>`Successfully moved ${e} to the last position in list`},n4={defaultLeanBurnupChartName:"Burn up",defaultLeanBurnupChartDescription:"The Burn up chart shows the progress of your project items over time, showing how much work has been completed and how much is left to do. Use this chart to view progress, spot trends, and identify bottlenecks to help move the project forward.",defaultStatusChartName:"Status chart",defaultStatusChartDescription:"This chart shows the current status for the total number of items in your project.",invalidFieldLabel:"Missing field",invalidFieldErrorMessage:"The selected field no longer exists",operationLabel:{count:"Count of",sum:"Sum of",avg:"Average of",min:"Minimum of",max:"Maximum of"},sideNavNewChartButton:"New chart",sideNavDefaultCharts:"Default charts",sideNavCustomCharts:"Custom charts",upsellDialogTitle:"Get unlimited charts",upsellDialogSubtitle:"Upgrade your plan to get:",upsellDialogBullet1:"Unlimited custom charts for private projects",upsellDialogBullet2:"Historical insights (Team or Enterprise plans only)",upsellDialogBullet3:"All the additional perks of a premium GitHub plan",upsellDialogCancelButton:"Cancel",items:"Items",upsellDialogUpgradePlanButton:"Upgrade plan",planUpgradeText:e=>`Private projects are limited to ${e} custom charts.  Make your project public or upgrade your plan to add more charts.`,periodNavigationLinkAnnouncement:e=>`Displaying results for ${e}`,negateStr:e=>`No ${e}`},n6={dragSashAriaLabel:"Drag to resize the table column",noDateFieldsConfiguredTooltip:"Create a date or iteration field to specify dates",noIterationConfiguredTooltip:e=>`Create an iteration containing ${e} to add items here`,iterationSuffix:e=>"start"===e?"start":"end",startDate:"Start date",endDate:"Target date",noStartDate:"No start date",noEndDate:"No target date",noDateSet:"No date set",gettingStarted:{popoverTitle:"Welcome to Roadmap!",popoverDismissButton:"Got it!",projectNeedsField:"Your project needs at least one date or iteration field to get started.",fieldsSelectedByDefault:e=>`We've selected an existing ${e} field in your project to get started. You can change the fields used here.`},toolbarRoadmapOptions:"Roadmap options",toolbarDateFields:"Date fields",toolbarDateFieldsAriaLabel:"Select date fields",toolbarToday:"Today",toolbarZoomAriaLabel:e=>`Zoom level: ${e}.`,zoomMenuDialogAriaLabel:e=>`Select zoom level. The current zoom level is ${e}.`,zoomLevel:"Zoom level",zoomLevelOptions:{month:"Month",quarter:"Quarter",year:"Year"},scrollToDateText:e=>`Scroll to: ${nG(e)}`,scrollToPreviousPage:"Scroll to previous date range",scrollToNextPage:"Scroll to next date range"},n8={statuses:{pending:"Starting migration\u2026",in_progress_project_details:"Setting up the project\u2026",in_progress_status_fields:"Creating project columns\u2026",in_progress_default_view:"Creating an initial view\u2026",in_progress_permissions:"Migrating permissions\u2026",in_progress_items:"Migrating issues, pull requests, and drafts\u2026",in_progress_workflows:"Migrating workflows\u2026",error:"Your project could not be migrated."},yourClassicProject:"Your classic project",completedAndClosed1:"has been closed and is read-only.",completedAndClosed2:"Users visiting the classic project will be linked to this one.",completedAndStillOpen:"is still open, but future changes won't be synchronized.",automatedMigrationCompleteMessage:"This project has been migrated as part of the sunset for Projects (classic).",automatedMigrationInProgressMessage:"This project is being migrated as part of the sunset for Projects (classic).",sunsetNoticeLink:"https://github.blog/changelog/2024-05-23-sunset-notice-projects-classic/",learnMore:"Learn more",migrationCompleteMessage:"Migration complete",somethingWentWrongMessage:"Something went wrong"},n7={tasks:(e,t)=>{let a=`task${t>1?"s":""}`;return e?t===e?`${e} ${a} done`:`${e} of ${t} ${a}`:`${t} ${a}`}},n9={trackedBy:"Tracked by",noTrackedBy:"No Tracked by",trackingIssues:"tracking issues",addedUnsupportedItemToast:"PRs and Drafts can\u2019t be added to a tracking issue. Item was added to No Tracked by group",addAllItemsText:e=>`Add all ${e} items`,itemsNotInProjectText:e=>`${e} ${e>1?"items":"item"} not in this project`,moveMultipleTrackedByNoTrackedWarning:{title:"Are you sure?",content:"Moving this issue to No tracked by will remove it from multiple task lists. This cannot be undone.",confirmButtonContent:"Move",confirmButtonType:"danger"},Toasts:{DraftAndPullsNotSupported:{type:nF.error,message:"PRs and draft issues are not supported by tracked-by"}}},ie={addedUnsupportedItemToast:"PRs and Drafts can\u2019t be added as sub-issues. Item was added to No Parent issue group",toasts:{draftAndPullsNotSupported:{type:nF.error,message:"PRs and draft issues are not supported by sub-issues"}}},it={migratingTitle:e=>`Migrating ${e}`},ia={startMessage:"Bulk update pending",progressMessage:e=>`Bulk update in progress ${e}%`,successMessage:"Bulk update completed successfully",refreshPageMessage:e=>`Bulk update failed${e>0?` for ${e} items`:""}. Please refresh the page and try again.`},ir={failureMessage:"An error occurred while copying draft issues.",successMessage:"Draft issues copied successfully.",copyingDraftsMessage:"Copying draft issues to your new project. This may take a minute to complete."},ii={allSelectedMatchingItems:e=>`All ${e.value.toLocaleString()}${e.isApproximate?"+":""} items matching query selected`,selectAllMatchingItems:e=>`Select all ${e.value.toLocaleString()}${e.isApproximate?"+":""} items matching this query`,selectedItems:e=>`${e.toLocaleString()} ${nz(e,"item","items")} selected`,itemCount:(e,t,a)=>`${e.toLocaleString()}-${t.toLocaleString()} of ${a.value.toLocaleString()}${a.isApproximate?"+":""} ${nz(a.value,"item","items")}`,noArchivedItems:"No archived items",deleteAllMatchingItemsConfirmation:"Are you sure you want to delete all items matching this query?"},il={openInNewTab:"Open in new tab",copyLinkInProject:"Copy link in project",archiveInProject:"Archive in project",deleteFromProject:"Delete from project"},is={title:"Status updates",nullStateTitle:"Add a project status update",description:"Status updates are brief reports tracking your project's health and progress. Begin by adding an update.",learnMoreLinkText:"Learn more",addUpdateButtonText:"Add update",saveUpdateButtonText:"Save update",cancelUpdateButtonText:"Cancel",addUpdateTitle:"Add status update",statusFieldLabel:"Status",startDateFieldLabel:"Start date",targetDateFieldLabel:"Target date",statusPickerFilterPlaceholderText:"Filter statuses",statusPickerResultsAriaLabel:"Status results",statusPickerTitle:"Select a status",statusPickerAriaLabel:"Select status",startDatePickerAriaLabel:"Select start date",targetDatePickerAriaLabel:"Select target date",confirmDeleteTitle:"Delete status update",confirmDeleteBody:"Are you sure you'd like to delete this status update?",subscribeToUpdates:"Subscribe to status updates for this project",unsubscribeFromUpdates:"Unsubscribe from status updates for this project"},io={error:"An error has occurred.",noCollaborators:"You don't have any collaborators yet.",filtering:"No collaborators found.",collaboratorsFound:e=>`${e} ${nz(e,"collaborator","collaborators")} found.`},id={setup:"Set up issue types in your project",renameCustomType:e=>`Rename your \u{201C}${e}\u{201C} custom field and start using issue types defined by your organization.`,addedUnsupportedItemToast:"Drafts can\u2019t be added with an issue type. Item was added to No type group",learnMoreText:"Learn more about issue types.",learnMoreLink:"https://gh.io/issue-types-learn-more"},iu={IssueTypeRenamePopover:{title:id.setup,description:id.renameCustomType,altText:"Issues create dialog with issue type selection",actionPrimary:"Get Started",actionSecondary:"I\u2019ll do it later"},IssueTypeRenameDialog:{title:id.setup,description:e=>`To start using issue types in your project, please rename your \u{201C}${e}\u{201C} custom field and update any filters that reference it.`,learnMoreLink:id.learnMoreLink,learnMoreText:id.learnMoreText,fieldLabel:"Rename field",actionPrimary:"Finish setup",actionSecondary:"Cancel",defaultInputString:"Custom Type",videoDescription:"Selecting the type field on a project, and applying Epic, Feature, and Task to project items"}},ic={IssueTypeRename:{copy1:"Action required",copy2:id.renameCustomType,learnMoreLink:id.learnMoreLink,learnMoreText:id.learnMoreText,actionPrimary:"Get Started"}};let ApiError=class ApiError extends Error{constructor(e,t={}){super(e),this.name=function(e){let t={};e.status&&(t.status=e.status),e.code&&(t.code=e.code),e.name&&(t.name=e.name),e.contentType&&(t.contentType=e.contentType);let a="ApiError";return Object.keys(t).length>0?`${a} (${JSON.stringify(t)})`:a}(t),this.status=t.status,this.code=t.code,t.sourceStack&&(this.stack?this.stack+=`
${t.sourceStack.substring(t.sourceStack.indexOf("\n")+1)}`:this.stack=t.sourceStack)}};let im={JSON:"application/json",FormData:"application/x-www-form-urlencoded",CSV:"text/csv",HTML:"text/html",Text:"text/plain"};function ip(e){let t=[];return!function e(t,a,r="",n=!1){let i=Array.isArray(t);for(let l in t){let s=t[l];if(void 0===s)continue;let o=Array.isArray(s),d="object"==typeof s,u=r||"";n&&(u+="[]"),r?i||(u+=`[${l}]`):u+=l,o&&0===s.length?a.push(`${u}[]`):d?e(s,a,u,o):a.push(`${u}=${encodeURIComponent(t[l])}`)}}(e,t),t.join("&")}function ih(e,t=nH.genericErrorMessage){if("object"==typeof e&&null!==e){if("error"in e&&"string"==typeof e.error)return e.error;if("errors"in e&&"string"==typeof e.errors)return e.errors;if("message"in e&&"string"==typeof e.message)return e.message;if("errors"in e&&Array.isArray(e.errors)&&e.errors.length>0&&"string"==typeof e.errors[0])return e.errors[0]}return t}let UsedToCatchStackTraceBeforeAsyncActionError=class UsedToCatchStackTraceBeforeAsyncActionError extends Error{constructor(...e){super(...e),this.name="UsedToCatchStackTraceBeforeAsyncActionError"}};async function ig(e,{token:t,contentType:a=im.JSON,...r}={}){let n;let i=ij(e=(0,nE.RD)(e.toString()),t,iw(r,a));i.headers.set("Accept","application/json"),r.body&&i.headers.set("Content-Type",a),(0,nD.tV)(i.headers);let l=Error(),s=!1,o=0,d=new Headers;try{let e=await fetch(i);s=e.ok,o=e.status,d=e.headers;let t=await e.text();n=t&&JSON.parse(t)}catch(e){if(e instanceof Error)throw new ApiError(e.message,{name:e.name,status:o,sourceStack:l.stack});throw new ApiError(nH.genericErrorMessage,{status:o,sourceStack:l.stack})}if(s&&n)return(0,nE.Av)(n),{headers:d,ok:s,data:n};if(s)return{headers:d,ok:s,data:{}};if(401===o)return window.location.reload(),{headers:d,ok:s,data:{}};if(n)throw new ApiError((Array.isArray(n.errors)?n.errors[0]:n.errors)??nH.genericErrorMessage,{status:o,code:n.code,sourceStack:l.stack});throw new ApiError(nH.genericErrorMessage,{status:o,sourceStack:l.stack})}async function iy(e,{token:t,contentType:a=im.JSON,...r}={}){let n;let i=ij((0,nE.RD)(e.toString()),t,iw(r,a));i.headers.set("Accept","application/json"),r.body&&i.headers.set("Content-Type",a),(0,nD.tV)(i.headers);let l=Error(),s=!1,o=0,d=new Headers;try{let e=await fetch(i);s=e.ok,o=e.status,d=e.headers;let t=await e.text();n=t&&JSON.parse(t)}catch(e){if(e instanceof Error)throw new ApiError(e.message,{name:e.name,status:o,sourceStack:l.stack});throw new ApiError(nH.genericErrorMessage,{status:o,sourceStack:l.stack})}if(s&&n)return(0,nE.Av)(n),{headers:d,ok:s,data:n};if(s)return{headers:d,ok:s,data:{}};if(401===o)return window.location.reload(),{headers:d,ok:s,error:{code:401,message:ih(n,"Unauthorized")}};if(404===o)return{headers:d,ok:s,error:{code:404,message:ih(n,"Not Found")}};if(n)throw new ApiError(ih(n),{status:o,code:n.code,sourceStack:l.stack});throw new ApiError(nH.genericErrorMessage,{status:o,sourceStack:l.stack})}async function ix(e,t){let a;let r=Error(),n=!1,i=0,l=new Headers,s="unknown",o=t?.contentType??im.JSON;try{let r=o===im.FormData?await function(e,t){let a={...t?.headers??{},Accept:"application/json","Content-Type":im.FormData},r=t?.body?ip(t.body):void 0;return(0,nM.DI)(e,{...t,body:r,headers:a})}((0,nE.RD)(e),t):await (0,nM.lS)((0,nE.RD)(e),t);n=r.ok,i=r.status,l=r.headers,s=r.headers.get("content-type")||"unknown";let d=await r.text();a=d&&JSON.parse(d)}catch(e){if(e instanceof Error)throw new ApiError(e.message,{name:e.name,status:i,contentType:s,sourceStack:r.stack});throw new ApiError(nH.genericErrorMessage,{status:i,sourceStack:r.stack})}if(n&&a)return(0,nE.Av)(a),{headers:l,ok:n,data:a};if(n)return{headers:l,ok:n,data:{}};if(401===i)return window.location.reload(),{headers:l,ok:n,data:{}};if(a)throw new ApiError((Array.isArray(a.errors)?a.errors[0]:a.errors)??nH.genericErrorMessage,{status:i,code:a.code,sourceStack:r.stack});throw new ApiError(nH.genericErrorMessage,{status:i,sourceStack:r.stack})}async function ib(e,t,a=1e3){return async function a(r){let n=new Request(e,t);(0,nD.tV)(n.headers);let i=new UsedToCatchStackTraceBeforeAsyncActionError,l=await self.fetch(n),{status:s}=l;if(s<200||s>=300)throw new ApiError(nH.genericErrorMessage,{status:s,sourceStack:i.stack});if(200===s)return l;if(202===s)return await new Promise(e=>setTimeout(e,r)),a(r);throw new ApiError(nH.genericErrorMessage,{status:s,sourceStack:i.stack})}(a)}async function iv(e,t){let a=new UsedToCatchStackTraceBeforeAsyncActionError,r=await (0,nM.DI)(e,t),{status:n}=r;if(r.ok)return r;throw new ApiError(nH.genericErrorMessage,{status:n,sourceStack:a.stack})}function iw({body:e,...t},a){let r={...t};return e&&a===im.JSON?r.body=JSON.stringify(e):e&&(r.body=ip(e)),r}function ij(e,t,a={}){let r=new Request(e,{...a,mode:"same-origin"});return t&&r.headers.append("Scoped-CSRF-Token",t),r}async function iC(e){let t=nP("stats-post-api-data"),{data:a}=await ix(t.url,{method:"POST",body:e});return a}let iI=(0,K.createContext)(null),iS=()=>{let e=(0,K.useContext)(iI);if(!e)throw Error("useViews must be used within a ViewProvider");return e},ik=()=>{let e=(0,K.useContext)(iI);return e?.currentView?.number},iN=()=>{let e=ik(),{loggedInUser:t}=eU();return{postStats:(0,K.useCallback)(a=>{t?.id&&iC({payload:{memexProjectViewNumber:e,...a}})},[e,t])}},iT=[{keyword:"is",isFilterable:!0,description:"Filter by item state or object type"},{keyword:"no",isFilterable:!1,description:""},{keyword:"has",isFilterable:!1,description:""},{keyword:"reason",isFilterable:!0,description:"Filter by item's state reason"},{keyword:"last-updated",isFilterable:!0,description:"Filter by item last updated"},{keyword:"updated",isFilterable:!0,description:"Filter by item's updated date"}];function i_(){let e=(0,K.useCallback)(e=>iT.map(e=>e.keyword).includes(e),[]);return{FilterKeywords:iT,isKeywordQualifier:e}}let iA={open:"open",closed:"closed",merged:"merged",draft:"draft",issue:"issue",pr:"pr"},iR={not_planned:"not planned",duplicate:"duplicate",completed:"completed",reopened:"reopened"},iP={is:iA,reason:iR,"last-updated":{seven_days:"7days",fourteen_days:"14days",twenty_one_days:"21days"},updated:{seven_days:"<@today-7d",two_weeks:"<@today-2w",one_month:"<@today-1m"}},iD=new Set(["reason"]),iE=e=>iD.has(e.toLowerCase());function iM(e){let t=RegExp(".*\\/(?<owner>[^/]+)\\/(?<repo>[^/]+)\\/issues\\/(?<number>\\d+)$"),a=e.match(t),r=a?.groups?.owner,n=a?.groups?.repo,i=a?.groups?.number;return r&&i&&n?{number:parseInt(i,10),repo:n,owner:r,type:"Issue"}:void 0}let iB=e=>{try{new URL(e)}catch{return!1}return/\/(issues|pull)\/\d+/.test(e)};function iL(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}let iF=class MemexItemModelBase{getState(){throw Error("Method not implemented.")}getSuggestionsCacheKey(){return`${this.contentType}:${this.itemId()}`}getItemIdentifier(){}isDraft(){return!1}hierarchyEntry(){return{ownerId:this.contentRepositoryId||0,itemId:this.content?.id||0}}memexItemId(){return this.id}itemId(){return this.content.id}ownerId(){return this.contentRepositoryId||0}getLabels(){return this.columns.Labels||[]}getUrl(){return""}getHtmlTitle(){return a_(this.columns.Title)}getRawTitle(){return aT(this.columns.Title)}getAssignees(){return this.columns.Assignees||[]}getReviewers(){return this.columns.Reviewers||[]}getRepositoryName(){return this.columns.Repository?.name||""}getNameWithOwnerReference(){let e=this.getNameWithOwner();if(!e)return"";let[t,a]=e,r=this.getItemNumber();return`${t}/${a}#${r}`}getItemNumber(){return 0}getMilestone(){return this.columns.Milestone}getLinkedPullRequests(){return this.columns["Linked pull requests"]||[]}getExtendedRepository(){return this.columns.Repository}getCompletion(){return this.columns.Tracks}getTrackedBy(){return this.columns["Tracked by"]}getIssueType(){return this.columns[eT.IssueType]}getParentIssue(){return this.columns[eT.ParentIssue]}login(){}getStatus(){return this.columnData[eT.Status]}getCustomField(e){return this.columnData[e]}getNameWithOwner(){if(this.getUrl())try{let e=new URL(this.getUrl()).pathname.substring(1).split("/",2);if(2===e.length)return e;return}catch{return}}getOwner(){let e=this.getNameWithOwner();if(!e)return;let[t]=e;return t}get columns(){return this.columnData}setItemData(e){if(this.id=e.id,this.priority=e.priority,this.virtualPriority=e.virtualPriority,e.updatedAt&&(this.updatedAt=e.updatedAt),e.createdAt&&(this.createdAt=e.createdAt),e.issueCreatedAt&&(this.issueCreatedAt=e.issueCreatedAt),e.issueClosedAt&&(this.issueClosedAt=e.issueClosedAt),e.state&&(this.state=e.state),e.stateReason&&(this.stateReason=e.stateReason),e.content&&(this.content={...this.content,...e.content}),this.contentType!==e.contentType&&(this.contentType=e.contentType),e.memexProjectColumnValues)for(let t of(this.columnData={},e.memexProjectColumnValues))this.setColumnValueForItemColumnType(t)}isTitleForIssue(e){return!!e&&"string"!=typeof e.title&&"raw"in e.title&&"html"in e.title}async whileSkippingLiveUpdates(e){try{this.skippingLiveUpdates=!0,await e(),this.skippingLiveUpdates=!1}catch(e){throw this.skippingLiveUpdates=!1,e}}setTitleValue(e){switch(this.contentType){case eJ.DraftIssue:{let{title:t}=e;if("string"==typeof t)break;this.isTitleForIssue(e)&&(this.columnData[eT.Title]={contentType:eJ.DraftIssue,value:{...e,title:t}});break}case eJ.RedactedItem:{let{title:t}=e;"string"==typeof t&&(this.columnData.Title={contentType:eJ.RedactedItem,value:{title:t}});break}case eJ.Issue:if("isDraft"in e)return;"number"in e&&this.isTitleForIssue(e)&&(this.columnData.Title={contentType:eJ.Issue,value:e});break;case eJ.PullRequest:"isDraft"in e&&this.isTitleForIssue(e)&&(this.columnData[eT.Title]={contentType:eJ.PullRequest,value:e})}}setColumnValueForItemColumnType(e){switch(e.memexProjectColumnId){case eT.Title:this.setTitleValue(e.value);break;case eT.Assignees:this.columnData[eT.Assignees]=e.value?.sort((e,t)=>e.login.localeCompare(t.login))??void 0;break;case eT.Labels:this.columnData[eT.Labels]=e.value?.sort((e,t)=>e.name.localeCompare(t.name))??void 0;break;case eT.LinkedPullRequests:this.columnData[eT.LinkedPullRequests]=e.value?.sort((e,t)=>e.number-t.number)??void 0;break;case eT.Milestone:this.columnData[eT.Milestone]=e.value??void 0;break;case eT.ParentIssue:this.columnData[eT.ParentIssue]=e.value??void 0;break;case eT.Repository:this.columnData[eT.Repository]=e.value??void 0;break;case eT.Reviewers:this.columnData[eT.Reviewers]=e.value?.sort((e,t)=>e.reviewer.name.localeCompare(t.reviewer.name))??void 0;break;case eT.Status:this.columnData[eT.Status]=e.value??void 0;break;case eT.Tracks:this.columnData[eT.Tracks]=e.value??void 0;break;case eT.TrackedBy:this.columnData[eT.TrackedBy]=e.value??void 0;break;case eT.IssueType:this.columnData[eT.IssueType]=e.value??void 0;break;case eT.SubIssuesProgress:this.columnData[eT.SubIssuesProgress]=e.value??void 0;break;default:this.columnData[e.memexProjectColumnId]=e.value??void 0}}addNewColumnValue(e){this.setColumnValueForItemColumnType(e);let{memex_side_panel_query:t}=eP();if(t){for(let t of this.memexProjectColumnValues)if(t.memexProjectColumnId===e.memexProjectColumnId&&null!=e.value){t.value=e.value;return}this.memexProjectColumnValues.push(e)}}constructor(e){iL(this,"columnData",{}),iL(this,"skippingLiveUpdates",!1),iL(this,"virtualPriority",void 0),iL(this,"updatedAt",void 0),iL(this,"createdAt",void 0),iL(this,"archived",void 0),iL(this,"issueCreatedAt",void 0),iL(this,"issueClosedAt",void 0),iL(this,"state",void 0),iL(this,"stateReason",void 0),iL(this,"prioritizedIndex",void 0),iL(this,"memexProjectColumnValues",void 0),iL(this,"isHierarchy",!1),this.setItemData(e),this.archived=e.archived,this.memexProjectColumnValues=e.memexProjectColumnValues,this.prioritizedIndex=e.id,this.virtualPriority=e.virtualPriority}};let DraftIssueModel=class DraftIssueModel extends iF{isDraft(){return!0}getState(){return eE.Draft}constructor(e){super(e),iL(this,"contentType",eJ.DraftIssue),iL(this,"content",void 0),this.content=e.content}};let RedactedItemModel=class RedactedItemModel extends iF{getState(){return eE.Open}constructor(e){super(e),iL(this,"contentType",eJ.RedactedItem),iL(this,"content",void 0),this.content=e.content}};let IssueModel=class IssueModel extends iF{getState(){return(this.columnData[eT.Title]?.value).state}getUrl(){return this.content.url}getItemNumber(){return(this.columnData[eT.Title]?.value).number}getItemIdentifier(){return iM(this.getUrl())}getNameWithOwnerReferenceParam(){let e=this.getNameWithOwner();if(!e)return"";let[t,a]=e;if(!t||!a)return"";let r=this.getItemNumber();return`${t}|${a}|${r}`}constructor(e){super(e),iL(this,"contentType",eJ.Issue),iL(this,"content",void 0),iL(this,"contentRepositoryId",void 0),this.content=e.content,this.contentRepositoryId=e.contentRepositoryId}};let PullRequestModel=class PullRequestModel extends iF{getState(){return(this.columnData[eT.Title]?.value).state}isDraft(){return(this.columnData[eT.Title]?.value).isDraft}getUrl(){return this.content.url}getItemNumber(){return(this.columnData[eT.Title]?.value).number}constructor(e){super(e),iL(this,"contentType",eJ.PullRequest),iL(this,"content",void 0),iL(this,"contentRepositoryId",void 0),this.content=e.content,this.contentRepositoryId=e.contentRepositoryId}};function iO(e){switch(e.contentType){case eJ.DraftIssue:return new DraftIssueModel(e);case eJ.RedactedItem:return new RedactedItemModel(e);case eJ.Issue:return new IssueModel(e);case eJ.PullRequest:return new PullRequestModel(e)}}function iG(e){return e instanceof iF}function iV(e){return e.contentType===eJ.PullRequest?`pull_request:${e.content.id}`:e.contentType===eJ.Issue?`issue:${e.content.id}`:void 0}let i$=Symbol("UNSET");function iW(e){let t=(0,K.useRef)(i$);return t.current===i$&&(t.current=e()),t}let iz=()=>eP();let BaseColumnModel=class BaseColumnModel{constructor(e){this.id=e.id,this.name=e.name,this.dataType=e.dataType,this.userDefined=e.userDefined,this.databaseId=e.databaseId,this.position=e.position||-1,this.defaultColumn=e.defaultColumn,this.settings={width:200,...e.settings}}};let DateColumnModel=class DateColumnModel extends BaseColumnModel{};let IterationColumnModel=class IterationColumnModel extends BaseColumnModel{constructor(e){super({...e,settings:{...e.settings,configuration:e.settings?.configuration??{startDay:new Date().getDay()||7,duration:14,iterations:[],completedIterations:[]}}})}};let NumberColumnModel=class NumberColumnModel extends BaseColumnModel{};let BaseSingleSelectColumnModel=class BaseSingleSelectColumnModel extends BaseColumnModel{constructor(e){super({...e,settings:{...e.settings,options:e.settings?.options??[]}})}};let SingleSelectColumnModel=class SingleSelectColumnModel extends BaseSingleSelectColumnModel{};let TextColumnModel=class TextColumnModel extends BaseColumnModel{};let AssigneesColumnModel=class AssigneesColumnModel extends BaseColumnModel{};let IssueTypeColumnModel=class IssueTypeColumnModel extends BaseColumnModel{};let LabelsColumnModel=class LabelsColumnModel extends BaseColumnModel{};let LinkedPullRequestsColumnModel=class LinkedPullRequestsColumnModel extends BaseColumnModel{};let MilestoneColumnModel=class MilestoneColumnModel extends BaseColumnModel{};let ParentIssueColumnModel=class ParentIssueColumnModel extends BaseColumnModel{};let RepositoryColumnModel=class RepositoryColumnModel extends BaseColumnModel{};let ReviewersColumnModel=class ReviewersColumnModel extends BaseColumnModel{};let StatusColumnModel=class StatusColumnModel extends BaseSingleSelectColumnModel{};let SubIssuesProgressColumnModel=class SubIssuesProgressColumnModel extends BaseColumnModel{};let TitleColumnModel=class TitleColumnModel extends BaseColumnModel{constructor(e){super({...e,settings:{...e.settings,width:e.settings?.width??650}})}};let TrackedByColumnModel=class TrackedByColumnModel extends BaseColumnModel{};let TracksColumnModel=class TracksColumnModel extends BaseColumnModel{};function iH(e){switch(e.dataType){case eN.Assignees:return new AssigneesColumnModel(e);case eN.Labels:return new LabelsColumnModel(e);case eN.LinkedPullRequests:return new LinkedPullRequestsColumnModel(e);case eN.Milestone:return new MilestoneColumnModel(e);case eN.ParentIssue:return new ParentIssueColumnModel(e);case eN.Repository:return new RepositoryColumnModel(e);case eN.Reviewers:return new ReviewersColumnModel(e);case eN.SubIssuesProgress:return new SubIssuesProgressColumnModel(e);case eN.Title:return new TitleColumnModel(e);case eN.Tracks:return new TracksColumnModel(e);case eN.TrackedBy:return new TrackedByColumnModel(e);case eN.Text:return new TextColumnModel(e);case eN.SingleSelect:if(e.id===eT.Status)return new StatusColumnModel(e);return new SingleSelectColumnModel(e);case eN.Number:return new NumberColumnModel(e);case eN.Date:return new DateColumnModel(e);case eN.Iteration:return new IterationColumnModel(e);case eN.IssueType:return new IssueTypeColumnModel(e);default:tA(e.dataType)}}let iU={"memex-items-data":{memexItems:[],memexColumnsByItemId:new Map},"memex-paginated-items-data":{memexItems:{nodes:[],pageInfo:{hasNextPage:!1,hasPreviousPage:!1},totalCount:{value:0,isApproximate:!1}},memexColumnsByItemId:new Map}};function iq(e,t=iU){if("memex-items-data"===e)return t[e].memexItems.length&&t[e].memexColumnsByItemId.size||(t[e].memexItems=eA(e)??[],t[e].memexColumnsByItemId=iK(t[e].memexItems)),t[e];{var a;if(("nodes"in(a=t[e].memexItems)?a.nodes:"nodes"in a.groups?a.groups.nodes:a.groups).length&&t[e].memexColumnsByItemId.size)return t[e];let r=eA(e)??{nodes:[],pageInfo:{hasNextPage:!1,hasPreviousPage:!1},totalCount:{value:0,isApproximate:!1}};if(r.exception)throw Error(r.exception);if(t[e].memexItems=r,"groups"in r){let a=r.groupedItems.reduce((e,t)=>e.concat(t.nodes),[]);t[e].memexColumnsByItemId=iK(a)}else t[e].memexColumnsByItemId=iK(r.nodes);return t[e]}}function iK(e){let t=new Map;return e.reduce((e,t)=>{let{contentType:a,id:r,memexProjectColumnValues:n}=t;return e.set(r,{contentType:a,columns:n})},t)}let iQ=(e,t)=>t in e.columns,iJ=(0,K.createContext)(null),iX=(0,K.createContext)(null),iY=(0,K.memo)(function({children:e}){let{tasklist_block:t}=iz(),a=iW(()=>eA("reserved-column-names")||[]),[r,n]=(0,K.useState)(()=>{let e=eA("memex-columns-data")||[];return t||(e=e.filter(e=>e.id!==eT.TrackedBy)),iZ(e)}),i=(0,K.useRef)(r),l=iW(()=>i1()),s=(0,K.useCallback)(e=>{n(e),i.current=e},[]),o=(0,K.useCallback)(e=>{l.current.add(e)},[l]),d=(0,K.useMemo)(()=>({reservedColumnNames:a.current,setAllColumns:s,allColumns:r,allColumnsRef:i,addLoadedFieldId:o,loadedFieldIdsRef:l}),[a,l,s,r,o]),u=(0,K.useMemo)(()=>({setAllColumns:s,allColumnsRef:i,addLoadedFieldId:o,loadedFieldIdsRef:l}),[l,o,s]);return(0,F.jsx)(iJ.Provider,{value:d,children:(0,F.jsx)(iX.Provider,{value:u,children:e})})});function iZ(e){return e.map(e=>iH(e))}function i0(e){let t="nodes"in e?e.nodes:"groups"in e?e.groupedItems.reduce((e,t)=>e.concat(t.nodes),[]):e,a=new Set;if(t?.length){let e=t.sort((e,t)=>t.memexProjectColumnValues.length-e.memexProjectColumnValues.length)[0];if(e)for(let t of e.memexProjectColumnValues)a.add(t.memexProjectColumnId)}return a}function i1(){let{memex_table_without_limits:e}=eP(),{memexItems:t}=iq(e?"memex-paginated-items-data":"memex-items-data");return i0(t)}try{iJ.displayName||(iJ.displayName="ColumnsContext")}catch{}try{iX.displayName||(iX.displayName="ColumnsStableContext")}catch{}try{iY.displayName||(iY.displayName="ColumnsStateProvider")}catch{}let i2=()=>{let e=(0,K.useContext)(iJ);if(!e)throw Error("useColumnsContext must be used within a ColumnsContext.Provider");return e},i5=()=>i2();function i3(){let{allColumns:e}=i5(),t=(0,K.useMemo)(()=>nu(e),[e]),{isKeywordQualifier:a}=i_();return{itemMatchesFilterQuery:(0,K.useCallback)((e,r,n)=>(function(e,t,a,r,n){if(e instanceof RedactedItemModel)return!1;let i=e.columns,l=!!t.fieldFilters.length,s=l&&t.fieldFilters.some(e=>e[1].length>0),o=n||[...a.values()];if(l&&s){let n=!0;for(let l of t.fieldFilters){let t=l[0],s=l[1],o=ni(t);o&&(t=t.substring(1));let d=a.get(nm(t));if(!r(t)&&!d)return!1;let u=iE(t),c=!1;if(nn(t)&&s.length)for(let e of s){let r=a.get(nm(e)),l=o&&"no"===t||!o&&"has"===t;if(r&&(n=r8({columnData:i,column:r,matchEmpty:!0,matchNegated:l})))break}else if(r(t)){if(!s.length)return!0;for(let a of s){if("last-updated"===t){n=r7({itemUpdateAtDate:e.updatedAt?af(tR(e.updatedAt)):void 0,value:a,matchNegated:o});break}if("updated"===t){n=ne({itemUpdateAtDate:e.updatedAt?af(tR(e.updatedAt)):void 0,value:a,matchNegated:o});break}switch(a){case iP.is.open:case iP.is.closed:case iP.is.merged:n=r4({columnData:i,field:"state",value:a,matchNegated:o});break;case iP.is.issue:case iP.is.pr:n=r4({columnData:i,field:"type",value:a,matchNegated:o});break;case iP.is.draft:n=r4({columnData:i,field:"state",value:a,matchNegated:o})||r4({columnData:i,field:"type",value:a,matchNegated:o});break;case iP.reason.not_planned:case iP.reason.duplicate:case iP.reason.completed:case iP.reason.reopened:n=r4({columnData:i,field:"reason",value:a,matchNegated:o});break;default:if(!u)return!1;c=!0}if(o&&!n||!o&&n)break}}if(d&&!u||u&&c){if(!d)return!1;if(!s.length)continue;n=r8({columnData:i,column:d,values:s,matchNegated:o})}if(!n)break}return!!n&&(t.searchTokens.length&&(n=r3(i,o,t.searchTokens)),n)}return l?!t.searchTokens.length||r3(i,o,t.searchTokens):(!(t.normalisedQuery.length>0)||0!==t.searchTokens.length)&&r3(i,o,t.searchTokens)})(e,r,t,a,n),[t,a])}}let i4=()=>`${window.location.origin}/404`;function i6(){return(0,K.useEffect)(()=>{window.location.href=i4()},[]),null}let{baseRoute:i8}={baseRoute:function e(t){let a=`${t}`,r=`${t}/*`,n=`${a}/*`;return{path:t,pathWithChildPaths:r,fullPath:a,fullPathWithChildPaths:n,generatePath:e=>(0,Y.tW)(t,e),generateFullPath:e=>(0,Y.tW)(a,e),matchPath:e=>(0,Y.B6)(t,e),matchFullPath:e=>(0,Y.B6)(a,e),matchPathOrChildPaths:e=>(0,Y.B6)(r,e),matchFullPathOrChildPaths:e=>(0,Y.B6)(n,e),childRoute:a=>e(`${t}${a}`)}}("")},i7=i8.childRoute("/:ownerType/:ownerIdentifier/projects/:projectNumber"),i9=i7.childRoute("/views/:viewNumber"),le=i7.childRoute("/workflows"),lt=le.childRoute("/:workflowClientId"),la=i7.childRoute("/settings"),lr=la.childRoute("/fields/:fieldId"),ln=la.childRoute("/access"),li=i7.childRoute("/insights"),ll=li.childRoute("/:insightNumber"),ls=i7.childRoute("/archive"),lo={PROJECT_ROUTE:i7,PROJECT_VIEW_ROUTE:i9,PROJECT_WORKFLOWS_ROUTE:le,PROJECT_WORKFLOW_CLIENT_ID_ROUTE:lt,PROJECT_SETTINGS_ROUTE:la,PROJECT_SETTINGS_FIELD_ROUTE:lr,PROJECT_INSIGHTS_ROUTE:li,PROJECT_INSIGHTS_NUMBER_ROUTE:ll,PROJECT_SETTINGS_ACCESS_ROUTE:ln,PROJECT_ARCHIVE_ROUTE:ls},ld=e=>Object.values(lo).find(t=>t.matchPath(e))??null;try{i4.displayName||(i4.displayName="ORIGIN_404")}catch{}try{i6.displayName||(i6.displayName="Origin404Redirect")}catch{}try{i7.displayName||(i7.displayName="PROJECT_ROUTE")}catch{}try{i9.displayName||(i9.displayName="PROJECT_VIEW_ROUTE")}catch{}try{le.displayName||(le.displayName="PROJECT_WORKFLOWS_ROUTE")}catch{}try{lt.displayName||(lt.displayName="PROJECT_WORKFLOW_CLIENT_ID_ROUTE")}catch{}try{la.displayName||(la.displayName="PROJECT_SETTINGS_ROUTE")}catch{}try{lr.displayName||(lr.displayName="PROJECT_SETTINGS_FIELD_ROUTE")}catch{}try{ln.displayName||(ln.displayName="PROJECT_SETTINGS_ACCESS_ROUTE")}catch{}try{li.displayName||(li.displayName="PROJECT_INSIGHTS_ROUTE")}catch{}try{ll.displayName||(ll.displayName="PROJECT_INSIGHTS_NUMBER_ROUTE")}catch{}try{ls.displayName||(ls.displayName="PROJECT_ARCHIVE_ROUTE")}catch{}function lu(){let e=(0,J.zy)();for(let t of[i9,i7]){let a=t.matchPath(e.pathname);if(a)return{projectViewRoutesMatch:a,isProjectViewRoute:!0}}return{projectViewRoutesMatch:null,isProjectViewRoute:!1}}let lc={SetSortedBy:"SetSortedBy",SetHorizontalGroupedBy:"SetHorizontalGroupedBy",ClearHorizontalGroupedBy:"ClearHorizontalGroupedBy",SetVerticalGroupedBy:"SetVerticalGroupedBy",SetViewType:"SetViewType",SetFilter:"SetFilter",ShowField:"ShowField",HideField:"HideField",ToggleField:"ToggleField",MoveField:"MoveField",GoToViewNumber:"GoToViewNumber",ResetViewState:"ResetViewState",AddField:"AddField",RemoveField:"RemoveField",SetState:"SetState",SaveViewName:"SaveViewName",AddView:"AddView",DeleteView:"DeleteView",UpdateView:"UpdateView",SetViews:"SetViews",SetLocalViewState:"SetLocalViewState",SetViewServerStates:"SetViewServerStates",ReorderView:"ReorderView",ToggleItemsCount:"ToggleItemsCount",AddFieldAggregation:"AddFieldAggregation",RemoveFieldAggregation:"RemoveFieldAggregation",SetRoadmapDateFields:"SetRoadmapDateFields",SetRoadmapZoomLevel:"SetRoadmapZoomLevel",SetColumnWidths:"SetColumnWidths",ToggleRoadmapMarkerFields:"ToggleRoadmapMarkerFields",UpdateBoardColumnLimit:"UpdateBoardColumnLimit",SetSliceBy:"SetSliceBy",ClearSliceBy:"ClearSliceBy",SetSliceValue:"SetSliceValue",SetSliceByFilter:"SetSliceByFilter",SetSliceByPanelWidth:"SetSliceByPanelWidth"},lm={isMainProjectFilter:!0,viewStateActionType:lc.SetFilter,getSearchQueryFromView:e=>e?.localViewState?.filter??"",getSearchIsDirty:e=>e?.isFilterDirty??!1,stats:{search:"search",cancel:"search_cancel"}},lp=(0,K.createContext)(null),lh=()=>{let e=(0,K.useContext)(lp);if(!e)throw Error("useSearch must be used inside a SearchProvider");return e},lf=(0,K.memo)(function({children:e,config:t}){let{currentView:a,viewStateDispatch:r}=iS(),{allColumns:n}=i5(),{itemMatchesFilterQuery:i}=i3(),l=(0,K.useRef)(null),{postStats:s}=iN(),o=(0,nk.M)(s),d=(0,K.useMemo)(()=>(0,nN.A)(e=>{t.stats?.search&&o.current({name:t.stats.search,context:e.trim()})},500),[o,t.stats]),u=(0,K.useCallback)((e,a)=>{d.cancel(),r({type:t.viewStateActionType,viewNumber:e,filter:a}),d(a)},[d,r,t.viewStateActionType]),c=t.getSearchQueryFromView(a),m=t.getSearchIsDirty(a),p=(0,K.useMemo)(()=>a?.localViewStateDeserialized.visibleFields??[],[a?.localViewStateDeserialized.visibleFields]),h=(0,K.useMemo)(()=>{let e,t;let r=a?.localViewStateDeserialized.sliceBy?.field,n=a?.localViewStateDeserialized.sliceValue;if(!r||!n)return nw("");let i=nm(r.name);return n===nT?(e="no",t=i):(e=i,t=n),nw(`${e}:"${t}"`)},[a]),f=(0,K.useMemo)(()=>nw(t.baseQuery?`${t.baseQuery} ${c}`:c),[c,t.baseQuery]),g=(0,K.useCallback)((e,t={})=>{a&&u(a.number,nv(c,e,t))},[a,c,u]),y=(0,K.useCallback)((e,t)=>f.fieldFilters.some(([a,r])=>a===e.toLowerCase()&&r.includes(t.toLowerCase())),[f.fieldFilters]),x=(0,K.useCallback)((e,t)=>{a?.number&&g(nm(e),{value:t.toString()})},[g,a]),b=(0,K.useCallback)((e,t)=>{if(!a?.number)return;let r=nm(e),n=t.toString();u(a.number,nC(r,n,c))},[a,c,u]),v=(0,K.useCallback)((e,t)=>{if(!a?.number)return;let r=nm(e),n=t.toString();(y(r,n)?b:x)(r,n)},[a,y,x,b]),w=(0,K.useCallback)((e,t)=>{if(!a?.number)return;let r=e.toLowerCase(),i=t.toString(),l=function(e){switch(e?.dataType){case eN.SingleSelect:return e.settings.options.map(e=>nS(e.name));case eN.Iteration:return e.settings.configuration.iterations.map(e=>nS(e.title));default:return}}(n.filter(lg).find(e=>e.name.toLowerCase()===("-"===r[0]?r.slice(1):r)));u(a.number,function(e,t,a,r){let{orderedTokenizedFilters:n}=nr(e),i=ni(t),l=(i?t.slice(1):t).toLowerCase(),s=new Set,o=new Set,d=new Map(r?.columnOptions?.map(e=>[e.toLowerCase(),e])),{firstInclusiveFilterIndex:u,firstExclusiveFilterIndex:c,filters:m}=function(e,t,a){let r=-1,n=-1,i=[];for(let l=0;l<e.length;l++){let s=e[l];if("search"!==s.type||""!==s.value){if("field"!==s.type||s?.field.toLocaleLowerCase()!==t.toLocaleLowerCase()){i.push({...s,spaceAfter:" "});continue}s.exclude?(a(!0,s),-1===n&&(n=l,i.push(s))):(a(!1,s),-1===r&&(r=l,i.push(s)))}}return{firstInclusiveFilterIndex:r,firstExclusiveFilterIndex:n,filters:i}}(n,l,(e,t)=>{e?nI(o,t,{columnOptionMap:d}):nI(s,t,{columnOptionMap:d})});i?o.add(nS(a)):s.add(nS(a));let p=[...s][0],h=[...o][0];if(i&&1===s.size&&1===o.size&&p===h)s.delete(p);else for(let e of s)o.has(e)&&(s.delete(e),o.delete(e));let f=0;if(s.size>0){let e=Array.from(s).join(","),t=-1===u?m.length:u;m[t]={type:"field",field:l,value:e,exclude:!1,spaceAfter:m[t]?.spaceAfter||" "}}else u>-1&&(m.splice(u,1),u<c&&f--);if(o.size>0){let e=Array.from(o).join(","),t=-1===c?m.length:c+f;m[t]={type:"field",field:l,value:e,spaceAfter:m[t]?.spaceAfter||" ",exclude:!0}}else c>-1&&m.splice(c+f,1);return m[m.length-1]&&(m[m.length-1].spaceAfter=""),function(e){let t="";for(let a of e){switch(a.type){case"search":t+=a.value;break;case"is":t+=`${a.exclude?"-":""}is:${a.value}`;break;case"reason":t+=`${a.exclude?"-":""}reason:${a.value}`;break;case"field":t+=`${a.exclude?"-":""}${a.field}:${a.value}`;break;case"no-field":t+=`${a.exclude?"-":""}no:${a.field}`}t+=a.spaceAfter}return t}(m)}(c,r,i,{columnOptions:l}))},[a,c,u,n]),j=(0,K.useCallback)((e,t="include")=>{if(!a)return!1;let r=i(e,f,p);return"include"===t&&h.normalisedQuery?r&&i(e,h,p):r},[p,a,f,i,h]),{FilterKeywords:C}=i_(),I=(0,K.useCallback)((e,t="include")=>e.length?(f.normalisedQuery||h.normalisedQuery)&&("exclude"!==t||f.normalisedQuery)?e.reduce((e,a)=>(a.isGrouped?(a.subRows=I(a.subRows,t),e.push({...a})):j(a.original,t)&&e.push(a),e),[]):e:[],[f.normalisedQuery,h.normalisedQuery,j]),S=(0,K.useCallback)(()=>{l.current?.focus()},[]),k=(0,K.useCallback)(e=>{u(e,""),t.stats?.cancel&&s({name:t.stats.cancel})},[s,u,t.stats]),N=(0,K.useCallback)(()=>{let e=c.trimEnd();if(a&&e.length>0){let t=e.endsWith(":")||e.endsWith(",");u(a.number,t?e:`${e} `),S()}else S()},[a,c,u,S]),{isProjectViewRoute:T}=lu();eg(()=>T&&t.isMainProjectFilter?["f","Filter by...",n.filter(lg).map((e,t)=>[t.toString(36),`Filter by ${e.name}`,"filter",()=>{g(e.name),S()}]).concat(C.filter(e=>e.isFilterable).map((e,t)=>[(100+t).toString(),e.description,"filter",()=>{g(e.keyword),S()}]))]:null,[n,g,T,f,S,C,t.isMainProjectFilter]);let _=(0,K.useMemo)(()=>({searchInputRef:l,query:c,baseQuery:t.baseQuery,...f,addSpaceToQuery:N,setQuery:u,clearSearchQuery:k,appendFilter:g,addFilter:x,removeFilter:b,toggleFilter:v,insertFilter:w,isSearchDirty:m,matchesSearchQuery:j,globalFilter:I,focusFilterInput:S,transientQuery:h}),[c,f,N,u,k,g,x,b,v,w,m,j,I,S,h,t.baseQuery]);return(0,F.jsx)(lp.Provider,{value:_,children:e})});function lg(e){return e.dataType!==eN.Title}try{lp.displayName||(lp.displayName="SearchContext")}catch{}try{lf.displayName||(lf.displayName="SearchProvider")}catch{}var ly=a(38621),lx=a(75177),lb=a(44999),lv=a(52464),lw=a(30729);let lj=Z.Ay.button.withConfig({displayName:"toast__StyledButton",componentId:"sc-eb286aca-0"})(["padding:var(--base-size-8);margin:var(--base-size-8) 10px var(--base-size-8) 0px;border-radius:var(--borderRadius-small);color:",";border:0;background:transparent;outline:none;cursor:pointer;&:focus{box-shadow:0 0 0 2px ",";}"],(0,q.Jt)("colors.fg.onEmphasis"),(0,q.Jt)("colors.accent.fg")),lC=e=>(0,F.jsx)(lj,{"aria-label":"Close",...e,children:(0,F.jsx)(lw.A,{icon:ly.XIcon})}),lI={[nF.default]:"accent.emphasis",[nF.success]:"success.emphasis",[nF.warning]:"attention.emphasis",[nF.error]:"danger.emphasis"},lS=(0,F.jsx)(lw.A,{icon:ly.InfoIcon,sx:{color:"fg.onEmphasis"}}),lk=(0,F.jsx)(lw.A,{icon:ly.CheckCircleIcon,sx:{color:"fg.onEmphasis"}}),lN=(0,F.jsx)(lw.A,{icon:ly.AlertIcon,sx:{color:"fg.onEmphasis"}}),lT=(0,F.jsx)(lw.A,{icon:ly.StopIcon,sx:{color:"fg.onEmphasis"}}),l_={[nF.default]:lS,[nF.success]:lk,[nF.warning]:lN,[nF.error]:lT},lA=(0,Z.i7)(["from{transform:translateX(-400px);}to{transform:translateX(0);}"]),lR=(0,Z.i7)(["from{transform:translateX(0);}to{transform:translateX(-460px);}"]),lP=(0,Z.Ay)(lx.A).withConfig({displayName:"toast__IconContainer",componentId:"sc-eb286aca-1"})(["flex-shrink:0;padding:",";"],(0,q.Jt)("space.3")),lD=Z.Ay.div.withConfig({displayName:"toast__StyledToast",componentId:"sc-eb286aca-2"})(["position:fixed;display:flex;box-shadow:",";background-color:",";border-radius:",";align-items:stretch;box-sizing:border-box;overflow:hidden;max-width:400px;bottom:66px;left:var(--base-size-12);z-index:99;animation:"," ","ms cubic-bezier(0.25,1,0.5,1);&.toast-leave{animation:"," ","ms cubic-bezier(0.5,0,0.75,0) forwards;}"],(0,q.Jt)("shadows.shadow.large"),(0,q.Jt)("colors.neutral.emphasisPlus"),(0,q.Jt)("radii.2"),lA,300,lR,300),lE=Z.Ay.button.withConfig({displayName:"toast__ToastAction",componentId:"sc-eb286aca-3"})(["background-color:transparent;border:0;font-weight:",";margin-left:",";margin-top:",";margin-bottom:",";color:",";font-size:",";font-family:inherit;outline:none;padding:0;white-space:nowrap;&:hover{text-decoration:underline;}&:focus{border-color:transparent;box-shadow:0 0 0 3px ",";}",""],(0,q.Jt)("fontWeights.bold"),(0,q.Jt)("space.2"),(0,q.Jt)("space.3"),(0,q.Jt)("space.3"),(0,q.Jt)("colors.fg.onEmphasis"),(0,q.Jt)("fontSizes.1"),(0,q.Jt)("colors.border.default"),lb.A),lM=e=>{let{toast:t,startRemovingToast:a}=e,r=(0,K.useRef)(null);(0,K.useEffect)(()=>{let e=e=>{r.current&&e.ctrlKey&&"t"===e.key&&(r.current.focus(),t.timeout?.cancel())};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[t]);let n=t.icon?(0,F.jsx)(lw.A,{icon:t.icon,sx:{color:"fg.onEmphasis",m:"auto"}}):l_[t.type],i=(0,K.useCallback)(()=>{t.action?.handleClick(),a&&a(t.id)},[t,a]);return(0,F.jsxs)(lD,{role:"status",className:t.className,...(0,ey.G)("toast"),children:[(0,F.jsx)(lP,{sx:{bg:lI[t.type],display:"flex",alignItems:"center"},children:n}),(0,F.jsxs)(lx.A,{sx:{display:"flex",flexDirection:"column"},children:[(0,F.jsx)(lv.A,{sx:{fontSize:1,mx:3,my:3,color:"fg.onEmphasis"},children:t.message}),t.action&&(0,F.jsx)(lE,{ref:r,onClick:i,...(0,ey.G)("toast-action"),sx:{alignSelf:"flex-start"},children:t.action.text})]}),a&&(0,F.jsx)(lC,{onClick:()=>a(t.id)})]})};try{lC.displayName||(lC.displayName="ToastCloseButton")}catch{}try{lP.displayName||(lP.displayName="IconContainer")}catch{}try{lM.displayName||(lM.displayName="Toast")}catch{}let lB=(e,t)=>{let a=lL(e);return(0,K.useMemo)(()=>a(t),[a,t])},lL=e=>{let t=(0,K.useRef)([]);(0,K.useEffect)(()=>()=>{for(let e of t.current)e.cancel()},[]);let a=(0,nk.M)(e);return(0,K.useCallback)(e=>(...r)=>{let n=setTimeout(()=>a.current(...r),e),i={cancel:()=>clearTimeout(n)};return t.current.push(i),i},[a])},lF=({autoDismiss:e=!0,timeout:t=nL}={})=>{let[a,r]=(0,K.useState)([]),[n,i]=(0,K.useState)(null),l=(0,K.useRef)(0),s=()=>l.current++,o=(0,K.useCallback)(e=>a.find(t=>t.id===e),[a]),d=lB(r,300),u=(0,K.useCallback)(e=>{let t=o(e);t&&(t.timeout?.cancel(),r(e=>e.filter(e=>e.id!==t.id)),t.onDismiss&&t.onDismiss())},[o,r]),c=lB(u,300),m=(0,K.useCallback)(e=>{r(t=>t.map(t=>t.id===e?{...t,className:"toast-leave"}:t)),c(e)},[c,r]),p=lB(m,t),h=lB(()=>i(null),300),f=(0,K.useCallback)(()=>{i(e=>e&&{...e,className:"toast-leave"}),h()},[h,i]),g=(0,K.useCallback)(e=>{if(n)return;let t={id:-1,...e},r=a[0];r&&(m(r.id),d([])),i(t)},[n,a,m,d,i]),y=(0,K.useCallback)(e=>{n&&i({id:-1,...e})},[n,i]),x=(0,K.useCallback)(()=>{n&&f()},[n,f]);return{addToast:(0,K.useCallback)(t=>{let n;x();let i=s();e&&!t.keepAlive&&(n=p(i));let l={id:i,timeout:n,...t},o=a[0];return o?(m(o.id),d([l])):r([l]),i},[e,p,d,m,a,x]),toasts:a,removeToast:u,startRemovingToast:m,addPersistedToast:g,updatePersistedToast:y,clearPersistedToast:x,persistedToast:n}},lO=(0,K.createContext)(null),lG=(0,K.memo)(function(e){let{autoDismiss:t,timeout:a,children:r}=e,{addToast:n,removeToast:i,toasts:l,persistedToast:s,addPersistedToast:o,updatePersistedToast:d,clearPersistedToast:u,...c}=lF({autoDismiss:t,timeout:a}),m=(0,K.useMemo)(()=>({addToast:n,removeToast:i,addPersistedToast:o,updatePersistedToast:d,clearPersistedToast:u}),[n,i,o,d,u]);return(0,F.jsxs)(lO.Provider,{value:m,children:[r,l&&l.map(e=>(0,F.jsx)(lM,{toast:e,removeToast:i,...c},e.id)),s&&(0,F.jsx)(lM,{toast:s,startRemovingToast:u},s.id)]})});try{lO.displayName||(lO.displayName="ToastContext")}catch{}try{lG.displayName||(lG.displayName="ToastContainer")}catch{}function lV(){let e=(0,K.useContext)(lO);if(!e)throw Error("useToasts must be used within a ToastContext.Provider");return e}let l$={Table:"table_layout",Board:"board_layout",List:"list_layout",Roadmap:"roadmap_layout"},lW=()=>({hideItemsCount:!1,sum:[]}),lz=["id","number","createdAt","updatedAt","priority"],lH="none",lU={Month:"month",Quarter:"quarter",Year:"year"},lq="sliceValue",lK={Table:"table",Board:"board",List:"list",Roadmap:"roadmap"},lQ={[l$.Board]:lK.Board,[l$.Table]:lK.Table,[l$.List]:lK.List,[l$.Roadmap]:lK.Roadmap},lJ={[lK.Board]:l$.Board,[lK.Table]:l$.Table,[lK.List]:l$.List,[lK.Roadmap]:l$.Roadmap},lX={[l$.Board]:ly.ProjectIcon,[l$.Table]:ly.TableIcon,[l$.List]:ly.ProjectIcon,[l$.Roadmap]:ly.ProjectRoadmapIcon};let EnumValueError=class EnumValueError extends Error{constructor(e,t,a){super(nH.invalidFieldValues({name:e,value:`${t}`,fields:nO(Object.keys(a))})),this.name="EnumValueError"}};function lY(e){let t=lQ[e];if(!t)throw new EnumValueError("ViewTypeParam",e,l$);return t}function lZ(e){let t=lJ[e];if(!t)throw new EnumValueError("ViewType",e,lK);return t}function l0(e){switch(e.dataType){case eN.Assignees:return{memexProjectColumnId:eT.Assignees,value:e.value};case eN.Labels:return{memexProjectColumnId:eT.Labels,value:e.value};case eN.Milestone:return{memexProjectColumnId:eT.Milestone,value:e.value};case eN.IssueType:return{memexProjectColumnId:eT.IssueType,value:e.value};case eN.ParentIssue:return{memexProjectColumnId:eT.ParentIssue,value:e.value};case eN.Number:return{memexProjectColumnId:e.memexProjectColumnId,value:e.value};case eN.Date:var t,a;let r;return t=e.memexProjectColumnId,(a=e.value?.value)&&(r={value:aN(a)}),{memexProjectColumnId:t,value:r};case eN.Repository:return{memexProjectColumnId:eT.Repository,value:e.value||null};case eN.Title:return{memexProjectColumnId:eT.Title,value:e.value};case eN.Text:return{memexProjectColumnId:e.memexProjectColumnId,value:e.value?{raw:e.value,html:e.value}:void 0};case eN.SingleSelect:case eN.Iteration:return{memexProjectColumnId:e.memexProjectColumnId,value:e.value}}}function l1(e){var t,a;switch(e.dataType){case eN.Assignees:return{memexProjectColumnId:eT.Assignees,value:e.value.map(e=>e.id)};case eN.Labels:return{memexProjectColumnId:eT.Labels,value:e.value.map(e=>e.id)};case eN.Milestone:return{memexProjectColumnId:eT.Milestone,value:e.value?e.value.id:""};case eN.IssueType:return{memexProjectColumnId:eT.IssueType,value:e.value?e.value.id:""};case eN.ParentIssue:return{memexProjectColumnId:eT.ParentIssue,value:e.value?e.value.id:""};case eN.Number:{let t=e.value?e.value.value:"";return{memexProjectColumnId:e.memexProjectColumnId,value:t}}case eN.Date:return{memexProjectColumnId:e.memexProjectColumnId,value:(t=e.value?.value)?t.toISOString():""};case eN.Title:return"string"==typeof(a=e.value.title)?{memexProjectColumnId:eT.Title,value:{title:a}}:{memexProjectColumnId:eT.Title,value:{title:a.raw}};case eN.Text:return{memexProjectColumnId:e.memexProjectColumnId,value:e.value||""};case eN.SingleSelect:case eN.Iteration:return{memexProjectColumnId:e.memexProjectColumnId,value:e.value?.id||""};default:return null}}let l2=class DebounceAsyncCancellationError extends Error{constructor(){super("this invocation was cancelled"),this.name="DebounceAsyncCancellationError"}};function l5(e,t){let a=null,r=()=>{a&&(window.clearTimeout(a),a=null)},n=(...n)=>new Promise((i,l)=>{r();let s=window.setTimeout(async()=>{if(a===s)try{let t=await e(...n);if(a===s)return i(t)}catch(e){l(e)}else l(new l2)},t);a=s});return n.cancel=r,n}function l3(){l4.cancel()}let l4=l5(async e=>{let t=nP("memex-refresh-api-data"),{visibleFields:a}=e,r=new URL(t.url,window.location.origin);a.length>0&&r.searchParams.set("visibleFields",JSON.stringify(a));let{data:n,ok:i}=await ig(r);if(!i)throw new ApiError("Unable to refresh project data");return n},1250);async function l6(e){let t=nP("memex-refresh-api-data"),{visibleFields:a}=e,r=new URL(t.url,window.location.origin);a.length>0&&r.searchParams.set("visibleFields",JSON.stringify(a));let{data:n,ok:i}=await ig(r);if(!i)throw new ApiError("Unable to refresh project data");return n}function l8(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}let EagerQueryInvalidation=class EagerQueryInvalidation{constructor(e=10){l8(this,"requestIds",void 0),l8(this,"index",0),l8(this,"register",e=>{this.requestIds[this.index]=e,this.index=(this.index+1)%this.requestIds.length}),l8(this,"has",e=>this.requestIds.includes(e)),this.requestIds=Array(e)}};let l7=new EagerQueryInvalidation;function l9(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}let se=new class MostRecentUpdate{constructor(){l9(this,"updatedAt",0),l9(this,"set",e=>{e>this.updatedAt&&(this.updatedAt=e)}),l9(this,"get",()=>this.updatedAt),l9(this,"_reset",()=>{this.updatedAt=0})}};function st(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}let sa=new class PendingUpdates{constructor(){st(this,"lastIncremented",0),st(this,"value",0),st(this,"increment",()=>{this.lastIncremented=Date.now(),this.value++}),st(this,"decrement",()=>{this.value=Math.max(0,this.value-1),0===this.value&&(this.lastIncremented=0)}),st(this,"hasPendingUpdates",()=>(this.value>0&&this.lastIncremented<=Date.now()-6e4&&(this.value=0,this.lastIncremented=0),this.value>0)),st(this,"_reset",()=>{this.lastIncremented=0,this.value=0})}},sr="X-Github-Request-Id",sn="_noValue";async function si(e){let t=nP("memex-item-update-api-data");sa.increment();try{let{headers:a,data:r}=await ix(t.url,{method:"PUT",body:e});se.set(new Date(r.memexProjectItem.updatedAt||0).getTime()),sa.decrement();let n=a.get(sr);return r.invalidateQueryCache&&n&&l7.register(n),r}catch(e){throw sa.decrement(),e}}let sl=()=>{let e=(0,K.useContext)(iX);if(!e)throw Error("useColumnsStableContext must be used within a ColumnsStableContext.Provider");return e},ss=()=>{let{loadedFieldIdsRef:e}=sl();return{findLoadedFieldIds:(0,K.useCallback)(()=>[...e.current],[e])}},so=()=>{let{loadedFieldIdsRef:e,currentView:t}=iS(),{memex_table_without_limits:a}=iz(),{findLoadedFieldIds:r}=ss(),n=(0,K.useCallback)(()=>[...e.current[t?.id??-1]??[]],[e,t?.id]);return{findLoadedFieldIds:a?n:r}},sd=void 0,su="next_placeholder";var sc=a(24880),sm=a(94747),sp=a(86391);async function sh({memexProjectItemId:e}){let t=new URL(nP("memex-item-get-api-data").url,window.location.origin);return t.searchParams.set("memexProjectItemId",`${e}`),iy(t)}let sf={ISSUE:"issue",PROJECT_DRAFT_ISSUE:"project_draft_issue"},sg={HEART:"heart",TADA:"tada",SMILE:"smile",ROCKET:"rocket",EYES:"eyes",THUMBS_UP:"+1",THUMBS_DOWN:"-1",THINKING_FACE:"thinking_face"},sy={NONE:"NONE"};async function sx(e,t){let a=new URL(nP("memex-get-sidepanel-item-api-data").url,window.location.origin);switch(e.kind){case sf.ISSUE:a.searchParams.set("kind",e.kind),a.searchParams.set("item_id",`${e.itemId}`),a.searchParams.set("repository_id",`${e.repositoryId}`),a.searchParams.set("omit_comments",`${e.omitComments??!1}`),a.searchParams.set("omit_capabilities",`${e.omitCapabilities??!1}`);break;case sf.PROJECT_DRAFT_ISSUE:a.searchParams.set("kind",e.kind),a.searchParams.set("project_item_id",`${e.projectItemId}`)}let{data:r}=await ig(a,t);return r}async function sb(e){let t=nP("memex-comment-on-sidepanel-item-api-data"),{data:a}=await ix(t.url,{method:"POST",body:e,contentType:im.FormData});return a}async function sv(e){let t=nP("memex-edit-sidepanel-comment-api-data"),{data:a}=await ix(t.url,{method:"PUT",body:e,contentType:im.FormData});return a}async function sw(e){let t=nP("memex-update-sidepanel-item-api-data"),{data:a}=await ix(t.url,{method:"POST",body:e,contentType:im.FormData});return a}async function sj(e){let t=nP("memex-update-sidepanel-item-reaction-api-data");await ix(t.url,{method:"POST",body:e,contentType:im.FormData})}async function sC(e){let t=new URL(nP("memex-update-sidepanel-item-state-api-data").url,window.location.origin);t.searchParams.set("kind",sf.ISSUE),await ix(t.toString(),{method:"POST",body:e,contentType:im.FormData})}function sI(e,t,a,r){return r?e[t]=e[t]?.filter(e=>e!==a):t in e?e[t]?.push(a):e[t]=[a],e}let sS="paginatedMemexItems",sk="pageParamsData",sN="sliceByData",sT="paginatedTotalCounts",s_="side-panel-item-not-on-client",sA="sidePanelItem",sR="ungrouped",sP="groups",sD="secondaryGroups",sE=(e,t,a)=>["memex",sS,e,t,a];function sM(e,t){return["memex",sS,e,sR,t]}function sB(e,t){return["memex",sS,e,sP,t]}function sL(e,t){return["memex",sS,e,sD,t]}function sF(e,t,a){return["memex",sS,e,t,a]}function sO(e,t){return["memex",sS,e,"groupedItemBatches",t]}let sG=e=>["memex",sS,e,sk],sV=e=>["memex",sS,{...e,sliceByValue:void 0,fieldIds:void 0},sN],s$=e=>["memex",sS,{...e,fieldIds:void 0},sT],sW=e=>["memex",sS,{...e,fieldIds:void 0},"fieldMetrics"],sz=e=>e[3],sH=e=>e[3]===sP,sU=e=>e[3]===sD,sq=e=>sQ(e[3]),sK=e=>{let t=e[3]===sP||e[3]===sR;return e[4]===sd&&t},sQ=e=>"object"==typeof e&&"groupId"in e,sJ=e=>sQ(e)||e===sR,sX=e=>({groupId:e.groupId,secondaryGroupId:e.secondaryGroupId}),sY=e=>{let t=e.indexOf(":");return -1!==t?{groupId:e.substring(0,t),secondaryGroupId:e.substring(t+1)}:{groupId:e}},sZ=e=>e.secondaryGroupId?`${e.groupId}:${e.secondaryGroupId}`:e.groupId,s0=e=>{let t=e.queryKey,a=t[t.length-1];return a===sk||a===sT||a===sN},s1=e=>{let t=e.queryKey,a=t[t.length-2];return null!=a&&(a===sR||sQ(a))},s2=(0,sp.V)({queryKey:["memex",s_],fetcher:async({itemId:e})=>{let t=Number(e);if(Number.isNaN(t))return;let a=await sh({memexProjectItemId:t});if(a.ok)return iO(a.data.memexProjectItem)}}),s5=(0,sp.V)({queryKey:["memex",sA],fetcher:async({itemId:e})=>{let t=Number(e);if(Number.isNaN(t))return;let a=await sh({memexProjectItemId:t});if(a.ok)return iO(a.data.memexProjectItem)}}),s3=()=>{let e=(0,U.jE)();return{invalidateSidePanelQueries:(0,K.useCallback)(()=>{e.invalidateQueries({queryKey:["memex",sA]})},[e])}},s4=(0,sp.V)({queryKey:["memex","side-panel-item"],fetcher:async({contentType:e,itemId:t,memexItemId:a,repositoryId:r},{signal:n})=>{switch(e){case eJ.Issue:return sx({kind:sf.ISSUE,itemId:t,repositoryId:r},{signal:n});case eJ.DraftIssue:return sx({kind:sf.PROJECT_DRAFT_ISSUE,projectItemId:a},{signal:n});default:throw Error(`${e} is not supported`)}}}),s6=()=>{let e=(0,U.jE)();return(0,sm.n)({mutationFn:async({contentType:e,itemId:t,memexItemId:a,repositoryId:r})=>{switch(e){case eJ.Issue:return sx({kind:sf.ISSUE,itemId:t,repositoryId:r,omitCapabilities:!0});case eJ.DraftIssue:return sx({kind:sf.PROJECT_DRAFT_ISSUE,projectItemId:a,omitCapabilities:!0});default:throw Error(`${e} is not supported`)}},onMutate:async({contentType:t,repositoryId:a,itemId:r,memexItemId:n})=>{e.cancelQueries({queryKey:s4.getKey({contentType:t,repositoryId:a,itemId:r,memexItemId:n})})},onSuccess:async(t,{contentType:a,repositoryId:r,itemId:n,memexItemId:i})=>{e.setQueriesData({queryKey:s4.getKey({contentType:a,repositoryId:r,itemId:n,memexItemId:i})},e=>e?{...e,...t}:e)}})},s8=()=>{let e=(0,U.jE)();return(0,sm.n)({mutationFn:async({contentType:e,itemId:t,memexItemId:a,repositoryId:r,update:n,tasklist_blocks_operation:i,tasklist_blocks_operation_tracker:l})=>{switch(e){case eJ.Issue:return sw({kind:sf.ISSUE,itemId:t,repositoryId:r,update:n,tasklist_blocks_operation:i,tasklist_blocks_operation_tracker:l});case eJ.DraftIssue:return sw({kind:sf.PROJECT_DRAFT_ISSUE,projectItemId:a,update:n,tasklist_blocks_operation:i,tasklist_blocks_operation_tracker:l});default:throw Error(`${e} is not supported`)}},onMutate:async({contentType:t,repositoryId:a,itemId:r,memexItemId:n})=>{e.cancelQueries({queryKey:s4.getKey({contentType:t,repositoryId:a,itemId:r,memexItemId:n})})},onSuccess:async(t,{contentType:a,repositoryId:r,itemId:n,memexItemId:i})=>{e.setQueriesData({queryKey:s4.getKey({contentType:a,repositoryId:r,itemId:n,memexItemId:i})},e=>e?{...e,...t}:e)},onSettled:(t,a,{contentType:r,repositoryId:n,itemId:i,memexItemId:l})=>{e.invalidateQueries({queryKey:s4.getKey({contentType:r,repositoryId:n,itemId:i,memexItemId:l})})}})},s7=()=>{let e=(0,U.jE)();return(0,sm.n)({mutationFn:async e=>sb(e),onSuccess:async(t,{repositoryId:a,itemId:r,memexItemId:n,updateState:i,stateReason:l})=>{e.setQueriesData({queryKey:s4.getKey({contentType:eJ.Issue,repositoryId:a,itemId:r,memexItemId:n})},e=>e?{...e,comments:e.comments?.concat(t),state:{state:i??e.state.state,stateReason:l??e.state.stateReason}}:e)},onSettled:(t,a,{repositoryId:r,itemId:n,memexItemId:i})=>{e.invalidateQueries({queryKey:s4.getKey({contentType:eJ.Issue,repositoryId:r,itemId:n,memexItemId:i})})}})},s9=()=>{let e=(0,U.jE)();return(0,sm.n)({mutationFn:async e=>sv(e),onSuccess:async(t,{repositoryId:a,itemId:r,memexItemId:n})=>{e.setQueriesData({queryKey:s4.getKey({contentType:eJ.Issue,repositoryId:a,itemId:r,memexItemId:n})},e=>e?{...e,comments:e.comments?.map(e=>e.id===t.id?t:e)}:e)},onSettled:(t,a,{repositoryId:r,itemId:n,memexItemId:i})=>{e.invalidateQueries({queryKey:s4.getKey({contentType:eJ.Issue,repositoryId:r,itemId:n,memexItemId:i})})}})},oe=()=>{let e=(0,U.jE)();return(0,sm.n)({mutationFn:async e=>(await sj(e),e),onMutate:async({repositoryId:t,itemId:a,memexItemId:r,commentId:n,reaction:i,actor:l,command:s})=>{e.setQueriesData({queryKey:s4.getKey({contentType:eJ.Issue,repositoryId:t,itemId:a,memexItemId:r})},e=>e?void 0===n&&e.reactions?{...e,reactions:sI(e.reactions,i,l,"unreact"===s)}:{...e,comments:e.comments?.map(e=>{if(e.id===n){let t=sI(e.reactions,i,l,"unreact"===s);return{...e,reactions:t}}return e})}:e)},onSettled:(t,a,{repositoryId:r,itemId:n,memexItemId:i})=>{e.invalidateQueries({queryKey:s4.getKey({contentType:eJ.Issue,repositoryId:r,itemId:n,memexItemId:i})})}})},ot=()=>{let e=(0,U.jE)();return(0,sm.n)({mutationFn:async e=>(await sC(e),e),onMutate:t=>{e.setQueriesData({queryKey:s4.getKey({contentType:eJ.Issue,repositoryId:t.repositoryId,itemId:t.itemId,memexItemId:t.memexItemId})},e=>e?{...e,state:{state:t.state??e.state.state,stateReason:t.stateReason??e.state.stateReason}}:e)},onSettled:(t,a,{itemId:r,repositoryId:n,memexItemId:i})=>{e.invalidateQueries({queryKey:s4.getKey({contentType:eJ.Issue,itemId:r,repositoryId:n,memexItemId:i})})}})},oa=(e,t)=>Error(`Value of column with ID "${e}" does not match expected type "${t}"`);function or(e,t){return on(function(e){if(!rL(e.dataType))throw Error(`Cannot update column of type "${e.dataType}"`);switch(e.dataType){case eN.Assignees:return eT.Assignees;case eN.Labels:return eT.Labels;case eN.Milestone:return eT.Milestone;case eN.Repository:return eT.Repository;case eN.IssueType:return eT.IssueType;case eN.ParentIssue:return eT.ParentIssue;case eN.Title:return eT.Title;case eN.Text:case eN.Number:case eN.Date:case eN.Iteration:case eN.SingleSelect:return e.memexProjectColumnId;default:tA(e)}}(e),e.dataType,t)}function on(e,t,a){if(!rL(t))throw Error(`Cannot update column of type "${t}"`);switch(t){case eN.Assignees:return{dataType:t,value:a.columns[eT.Assignees]??[]};case eN.Labels:return{dataType:t,value:a.columns[eT.Labels]??[]};case eN.Milestone:return{dataType:t,value:a.columns[eT.Milestone]};case eN.Repository:return{dataType:t,value:a.columns[eT.Repository]};case eN.IssueType:return{dataType:t,value:a.columns[eT.IssueType]};case eN.ParentIssue:return{dataType:t,value:a.columns[eT.ParentIssue]};case eN.Title:{let e=a.columns[eT.Title];if(!e||e.contentType===eJ.RedactedItem)throw Error("Cannot update title of redacted item");return{dataType:t,value:e.value}}case eN.Text:if("number"==typeof e){let r=a.columns[e];if(void 0===r||aP(r))return{dataType:t,memexProjectColumnId:e,value:r?.raw}}throw oa(e,t);case eN.Number:if("number"==typeof e){let r=a.columns[e];if(void 0===r||aD(r))return{dataType:t,memexProjectColumnId:e,value:r}}throw oa(e,t);case eN.Date:if("number"==typeof e){let r=a.columns[e];if(aE(r)){let a=aC(r);if(a)return{dataType:t,memexProjectColumnId:e,value:a};if(null===a)return{dataType:t,memexProjectColumnId:e,value:void 0}}else if(void 0===r)return{dataType:t,memexProjectColumnId:e,value:r}}throw oa(e,t);case eN.Iteration:if("number"==typeof e){let r=a.columns[e];if(void 0===r||aM(r))return{dataType:t,memexProjectColumnId:e,value:r}}throw oa(e,t);case eN.SingleSelect:if("number"==typeof e||e===eT.Status){let r=a.columns[e];if(void 0===r||aM(r))return{dataType:t,memexProjectColumnId:e,value:r}}throw oa(e,t);default:tA(t)}}function oi(e){return ab(e)||e===eT.Title||e===eT.Status||e===eT.Assignees}let ol=[eN.Tracks,eN.TrackedBy];function os(e){return ol.some(t=>t===e.dataType)}function oo(e,t,a,{layoutType:r}={}){if(t&&e===eJ.DraftIssue&&(t=t.filter(e=>oi(e.memexProjectColumnId))),t&&0!==t.length||null!=a)return{previousMemexProjectItemId:a,memexProjectColumnValues:t,layoutType:r}}function od(e,t){let{content:a,contentType:r,id:n,memexProjectColumnValues:i,priority:l,virtualPriority:s,updatedAt:o,createdAt:d,issueCreatedAt:u,issueClosedAt:c,state:m,stateReason:p}=t,h=i??Object.keys(e.columns).reduce((t,a)=>{let r=ap(a);if(!r)return t;let n=function(e,t){if(e===eT.Title)return function(e){let t=e.columns.Title;if(!t)return null;switch(t.contentType){case eJ.DraftIssue:case eJ.Issue:case eJ.PullRequest:case eJ.RedactedItem:return{memexProjectColumnId:eT.Title,value:t.value};default:return null}}(t);if(aB(e))return{memexProjectColumnId:e,value:t.columns[e]||null};let a=t.columns[e]||null;return ab(e)?{memexProjectColumnId:e,value:a}:null}(r,e);return n?[...t,n]:t},[]),f=e.contentRepositoryId??-1;"contentRepositoryId"in t&&(f=t.contentRepositoryId);let g=a??e.content,y=e.content;switch(r){case eJ.Issue:case eJ.PullRequest:if(!(g&&"id"in g&&"url"in g))return null;return{contentType:r,content:{...y,...g},contentRepositoryId:f,memexProjectColumnValues:h,id:n,priority:l,virtualPriority:s,updatedAt:o,createdAt:d,issueCreatedAt:u,issueClosedAt:c,state:m,stateReason:p};case eJ.DraftIssue:return{contentType:r,content:{...y,...g},memexProjectColumnValues:h,id:n,priority:l,virtualPriority:s,updatedAt:o,createdAt:d};case eJ.RedactedItem:return{contentType:r,content:g,memexProjectColumnValues:h,id:n,priority:l,virtualPriority:s,updatedAt:o,createdAt:d};default:tA(r)}}function ou(e){return"groups"in e}function oc(e){return"groupedItems"in e}function om(e){return"secondaryGroups"in e}let op=(0,a(15967).r)({queryKey:["memex","memexItems"],structuralSharing:!1,fetcher:()=>({nodes:[],pageInfo:{startCursor:"",endCursor:"",hasNextPage:!1,hasPreviousPage:!1},totalCount:{value:0,isApproximate:!1}}),getNextPageParam:()=>0,initialPageParam:0,initialData:()=>{let{memexItems:e}=iq("memex-items-data");return{pages:[oh((e||[]).map(e=>iO(e)))],pageParams:[0]}},use:[e=>t=>e({...t,enabled:!1})]});function oh(e){for(let[t,a]of e.entries())a.prioritizedIndex=t;return{nodes:e,pageInfo:{startCursor:"",endCursor:"",hasNextPage:!1,hasPreviousPage:!1},totalCount:{value:e.length,isApproximate:!1}}}function of(e){let t=["memex",sS],a=e.getQueryCache().find({queryKey:t,exact:!1,type:"active"});return a?a.queryKey.slice(0,3):t}function og(e){let{memex_table_without_limits:t}=eP();return t?of(e):op.getKey()}let oy={totalCount:{value:0,isApproximate:!1},groups:{}};function ox(e,t,a){let r=s$(t);e.setQueryData(r,e=>{let t=e??oy;return{totalCount:a.totalCount||t?.totalCount,groups:{...t?.groups,...a.groups}}})}function ob(e,t,a){let r=ow(e,t),n=r.totalCount.value+a;return{...r.totalCount,value:n}}function ov(e,t,a,r){let n=ow(e,t),i=n.groups[a]??{isApproximate:!1},l=(n.groups[a]?.value??0)+r;return{...i,value:l}}function ow(e,t){let a=s$(t);return e.getQueryData(a)||oy}function oj(e,t){return e.getQueryData(sG(t))||{pageParams:[]}}function oC(e,t,a){e.setQueryData(sG(t),a)}let oI=e=>{let t={queryKey:["memex",sS],exact:!1,type:"inactive"};e.removeQueries({...t,predicate:t=>{if(s0(t))return!1;let a=t.queryKey;return a[4]===sd&&sq(a)?!function(e,t){let a=oS(e,t[2]).map(e=>sZ(e)),r=sz(t),n=sQ(r)?sZ(r):"";return a.includes(n)}(e,a):(sK(a)&&function(e,t){let a=oj(e,t);if(!a||0===a.pageParams.length||a.pageParams[a.pageParams.length-1]===su)return;let r={pageParams:[sd]};if(oc(a)){let a=oS(e,t);r={...r,groupedItems:a.reduce((e,t)=>(e[sZ(t)]=[sd],e),{})}}om(a)&&(r={...r,secondaryGroups:[sd],groupedItemBatches:[]}),oC(e,t,r)}(e,a[2]),a[4]!==sd&&a[4]!==su)}}),e.invalidateQueries({...t,refetchType:"active",predicate:e=>{let t=e.queryKey;return!s0(e)&&sK(t)}})},oS=(e,t)=>{let a=e.getQueryData(["memex",sS,t,sP,sd]);if(!a)return[];let r=e.getQueryData(["memex",sS,t,sD,sd]);return r?a.groups.reduce((e,t)=>{for(let a of r.groups)e.push({groupId:t.groupId,secondaryGroupId:a.groupId});return e},[]):a.groups.map(e=>({groupId:e.groupId}))},ok={hasNextPage:!1,hasPreviousPage:!1};function oN(){let{memex_table_without_limits:e}=eP();return!e}function oT(e){let t=og(e);return e.getQueriesData({queryKey:t}).flatMap(e=>e[1]&&"nodes"in e[1]?e[1]?.nodes:[])}function o_(e){return of(e)[2]}function oA(e,t){for(let[a,r]of e.getQueriesData(oD))if(r&&"nodes"in r&&r.nodes.find(e=>e.id===t))return a}function oR(e){return{pages:[oh(e)],pageParams:[]}}function oP(e){return void 0!==e&&"nodes"in e}let oD={queryKey:["memex",sS],exact:!1,type:"active",predicate:e=>s1(e)};function oE(e,t,a){let r=sM(t,a);return e.getQueryData(r)}function oM(e,t,a,r){let n=sF(t,a,r);return e.getQueryData(n)}function oB(e,t,a,r){let n=sM(t,a);e.setQueryData(n,r)}function oL(e,t,a,r,n){let i=sF(t,a,r);e.setQueryData(i,n)}function oF(e){return oN()?oX(e.getQueryData(og(e)))||[]:oT(e)}function oO(e){return e.getQueryData(og(e))}function oG(e,t){e.setQueryData(og(e),{...t})}function oV(e,t){if(!oN())return oT(e).find(e=>e.id===t);{let a=oX(e.getQueryData(og(e)));return a?a.find(e=>e.id===t):void 0}}function o$(e,t,a){let r=oA(e,t);if(!r)return!1;let n=sz(r);return sQ(n)&&n.groupId===a}function oW(e,t){if(!oN())return oT(e).findIndex(e=>e.id===t);{let a=oX(e.getQueryData(og(e)));return a?a.findIndex(e=>e.id===t):-1}}function oz(e,t,a){if(oN()){let r=oW(e,t.id);e.setQueryData(og(e),e=>{let n=[...oX(e)||[]],i=a??n.length;return -1!==r&&(n.splice(r,1),i=r),n.splice(i,0,t),oR(n)})}else{let r=oW(e,t.id),n=!1,i=0,l=oF(e).length;if(e.setQueriesData(oD,e=>{if(!oP(e))return e;if(-1!==r)return{...e};if(n)return e;if(null!=a&&a>=i&&a<i+e.nodes.length){let r=[...e.nodes];return r.splice(a-i,0,t),n=!0,{...e,nodes:r}}if(null!=a||i+e.nodes.length!==l)return i+=e.nodes.length,e;{if(n=!0,e.pageInfo.hasNextPage)return e;let a=[...e.nodes];return a.push(t),{...e,nodes:a}}}),n){let t=o_(e),a=ob(e,t,1);ox(e,t,{totalCount:a})}}}function oH(e,t){if(oN())e.setQueryData(og(e),e=>{let a=oX(e)||[],r=new Set(t);return oR(a.filter(e=>!r.has(e.id)))});else{let a=o_(e),r={queryData:[],totalCounts:ow(e,a)},n=new Set(t),i=0,l={};for(let t of e.getQueriesData(oD).map(([e])=>e))e.setQueryData(t,e=>{if(!oP(e))return e;let a=!1;if(i===n.size)return e;let s=[];for(let o of e.nodes)if(n.has(o.id)){i++;let n=sz(t);sQ(n)&&(l[n.groupId]=(l[n.groupId]??0)+1,n.secondaryGroupId&&(l[n.secondaryGroupId]=(l[n.secondaryGroupId]??0)+1)),a||(r.queryData.push({queryKey:t,queryData:e}),a=!0)}else s.push(o);return{...e,nodes:s}});let s={groups:Object.keys(l).reduce((t,r)=>{let n=l[r]??0;return t[r]=ov(e,a,r,-n),t},{}),totalCount:ob(e,a,-i)};return ox(e,a,s),r}}function oU(e,t){if(!t)return;for(let{queryKey:a,queryData:r}of t.queryData)e.setQueryData(a,r);let a=s$(o_(e));e.setQueryData(a,t.totalCounts)}function oq(e,t,a=!1){if(a||function(e,t){let a=function(e,t){if(t&&parseInt(t))return e.getQueryData(s5.getKey({itemId:t}))}(e,t.id.toString());if(a){let r=od(a,t);r&&oJ(e,iO(r))}}(e,t),oN()){let a=oW(e,t.id);-1!==a&&e.setQueryData(og(e),e=>{let r=[...oX(e)||[]],n=r[a];if(n){let e=od(n,t);if(e){let t=iO(e);return r[a]=t,oR(r)}}return e})}else{let a=oA(e,t.id);if(!a)return function(e,t){let a=oK(e,t.id.toString());if(a){let r=od(a,t);r&&oQ(e,iO(r))}}(e,t);e.setQueryData(a,e=>{if(!e)return oh([]);let a=[...e.nodes],r=a.findIndex(e=>e.id===t.id),n=a[r];if(n){let e=od(n,t);if(e){let t=iO(e);a[r]=t}}return{...e,nodes:a}})}}function oK(e,t){if(t)return e.getQueryData(s2.getKey({itemId:t}))}function oQ(e,t){let a=oV(e,t.id),r=s2.getKey({itemId:t.id.toString()});a?e.removeQueries({queryKey:r,exact:!0}):e.setQueryData(r,t)}function oJ(e,t){let a=oV(e,t.id),r=s5.getKey({itemId:t.id.toString()});a&&oq(e,t,!0),e.setQueryData(r,t)}function oX(e){return e?.pages[0]?.nodes}var oY=a(97286);function oZ(e){return e?.dataType===eN.Iteration}function o0(e){return e?.dataType===eN.SingleSelect}function o1(e){return e?.dataType===eN.Date}let o2="no_vertical_group",o5=e=>!!e&&(o3(e)||o4(e)),o3=e=>!!e&&"color"in e&&"name"in e&&"nameHtml"in e&&"description"in e&&"descriptionHtml"in e,o4=e=>!!e&&"duration"in e&&"title"in e&&"startDate"in e,o6=e=>({...e,groupMetadata:e}),o8=e=>({id:e.id,name:e.title,nameHtml:e.titleHtml,groupMetadata:e}),o7=e=>({id:o2,name:`No ${e}`,nameHtml:`No ${e}`,groupMetadata:void 0}),o9=e=>e.map(o6),de=(e,{includeAllCompletedIterations:t=!1}={})=>{let{iterations:a,completedIterations:r}=e,n=r.slice().sort(aY);return[...t?n:n.slice(0,3),...a].sort(aZ).map(o8)};function dt(e,t={}){if(!e)return[];let a=o7(e.name);if(o0(e))return[a,...o9(e.settings.options)];if(oZ(e)){let{configuration:r}=e.settings;return[a,...de(r,t)]}throw Error(`Unable to obtain vertical groups for field type: ${e.dataType}`)}function da(e){return rP(e.dataType)}function dr(e,t,a){let r=sB(t,a);return e.getQueryData(r)}function dn(e,t,a,r){let n=sB(t,a);e.setQueryData(n,r)}function di(e,t,a){let r=sL(t,a);return e.getQueryData(r)}function dl(e,t,a,r){let n=sL(t,a);e.setQueryData(n,r)}function ds(e,t){let a=[...og(e),sP];for(let[r,n]of e.getQueriesData({queryKey:a})){let e=(n&&ou(n)?n.groups:[]).find(e=>e.groupMetadata?.id===t);if(e)return{queryKeyForGroup:r,groupId:e.groupId}}}function dd(e,t){if(t===o2){let t=[...og(e),sP];for(let[a,r]of e.getQueriesData({queryKey:t})){let e=(r&&ou(r)?r.groups:[]).find(e=>e.groupValue===sn);if(e)return e.groupId}return}return t}function du(e,t,a){let r=ds(e,t.id);if(!r)return;let{queryKeyForGroup:n,groupId:i}=r;e.setQueryData(n,e=>{if(!dm(e))return dp(e);let r=e.groups.map(e=>e.groupId===i?{...e,groupValue:a,groupMetadata:t}:e);return{...e,groups:r}})}function dc(e,t,a){let r=function(e){let t=[...og(e),sP],a=e.getQueriesData({queryKey:t}),r=a[a.length-1];if(!r)return;let[n,i]=r;if(n&&i)return ou(i)?n:void 0}(e);if(!r)return;let n={groupId:t.id.toString(),groupValue:a,groupMetadata:t,fieldMetrics:[]};e.setQueryData(r,e=>{if(!dm(e))return dp(e);let t=[...e.groups];return t.push(n),{...e,groups:t}})}function dm(e){return void 0!==e&&"groups"in e}function dp(e){return e||{groups:[],pageInfo:{hasNextPage:!1,hasPreviousPage:!1}}}function dh(e,t,a){"slices"in a&&null!=a.slices&&function(e,t,a){e.setQueryData(sV(t),a)}(e,t,{slices:a.slices})}function df(e,t,a,r){let n={groups:{}},{totalCount:i,...l}=a;if(r&&sQ(r)){let e=sZ(r);n.groups[e]=i}else n.totalCount=i;if("groups"in l)for(let e of l.groups.nodes)n.groups[e.groupId]=e.totalCount;if("secondaryGroups"in l&&l.secondaryGroups)for(let e of l.secondaryGroups.nodes)n.groups[e.groupId]=e.totalCount;ox(e,t,n)}function dg(e,t,a){if("groups"in a){let r={groups:{}};for(let e of a.groups.nodes)r.groups[e.groupId]=e.fieldMetrics;if("secondaryGroups"in a&&a.secondaryGroups)for(let e of a.secondaryGroups.nodes)r.groups[e.groupId]=e.fieldMetrics;!function(e,t,a){let r=sW(t);e.setQueryData(r,e=>({groups:{...e?.groups,...a.groups}}))}(e,t,r)}}function dy(e){let t={groups:[],pageInfo:e.groups.pageInfo};for(let a of e.groups.nodes)t.groups.push(a);return t}function dx(e,t,a){let r=[];for(let n of a.groupedItems){let a={nodes:n.nodes.map(e=>iO(e)),pageInfo:n.pageInfo},i=sX(n);oL(e,t,i,sd,a),r.push(i)}return r}function db(e,t,a){if(!a.secondaryGroups)return;let r={groups:[],pageInfo:a.secondaryGroups.pageInfo};for(let e of a.secondaryGroups.nodes)r.groups.push(e);return dl(e,t,sd,r),r}function dv(e){return null!=e.horizontalGroupedByColumnId||null!=e.verticalGroupedByColumnId}function dw(e){let t=(0,U.jE)(),a=function(e,t){if(0!==e.getQueriesData({queryKey:["memex",sS]}).length){let e={pageParams:[sd]};return null!=t.horizontalGroupedByColumnId&&null!=t.verticalGroupedByColumnId?{...e,groupedItems:{},secondaryGroups:[],groupedItemBatches:[]}:dv(t)?{...e,groupedItems:{}}:e}{let{memexItems:a}=iq("memex-paginated-items-data"),r=(dh(e,t,a),df(e,t,a,void 0),dg(e,t,a),function(e,t,a){if("groups"in a)return{queryData:dy(a),secondaryGroups:db(e,t,a),groupedItems:dx(e,t,a)};{let{totalCount:e,...t}=a;return{queryData:{...t,nodes:t.nodes.map(e=>iO(e))}}}}(e,t,a));if(!("groupedItems"in r))return oB(e,t,sd,r.queryData),{pageParams:[sd]};{dn(e,t,sd,r.queryData);let a=r.groupedItems.reduce((e,t)=>(e[sZ(t)]=[sd],e),{});if(r.secondaryGroups){let e=[sd];return{groupedItems:a,pageParams:[sd],secondaryGroups:e,groupedItemBatches:[]}}return{groupedItems:a,pageParams:[sd]}}}}(t,e),{data:r}=(0,oY.I)({queryKey:sG(e),queryFn:()=>{throw Error("Query function should not be called")},initialData:a,enabled:!1,structuralSharing:!1});return{pageParamsQueryData:r,setPageParamsQueryData:(0,K.useCallback)(a=>{oC(t,e,a)},[t,e]),getPageParamsQueryData:(0,K.useCallback)(()=>oj(t,e),[t,e])}}let dj=(e,t,a=[],r,n)=>{if((0===a.length||a[0]!==sd)&&a.unshift(sd),a[a.length-1]!==su)return a;let i=r===sP?dr(e,t,su):di(e,t,su),l=a.slice(0,a.length-1),s=i?.groups.slice(n.nodes.length);if(!s?.length||!n.pageInfo.hasNextPage||!n.pageInfo.endCursor)return r===sP?e.removeQueries({queryKey:sB(t,su)}):e.removeQueries({queryKey:sL(t,su)}),l;{let a={groups:s,pageInfo:ok},i=[...l,{after:n.pageInfo.endCursor},su];return r===sP?dn(e,t,su,a):dl(e,t,su,a),i}},dC=(e,t)=>{let a=e===sP?t.secondaryGroups:t.groups;return!a?.pageInfo.hasPreviousPage},dI=(e,t,a=[],r,n)=>{if((0===a.length||a[0]!==sd)&&a.unshift(sd),a[a.length-1]!==su)return a;let i=sQ(r)?oM(e,t,r,su):oE(e,t,su),l=a.slice(0,a.length-1),s=i?.nodes.slice(n?.nodes.length);if(!(s?.length&&n?.pageInfo.hasNextPage&&n?.pageInfo.endCursor))return e.removeQueries({queryKey:sE(t,r,su)}),l;{let a={nodes:s,pageInfo:ok},i=[...l,{after:n?.pageInfo.endCursor},su];return sQ(r)?oL(e,t,r,su,a):oB(e,t,su,a),i}};function dS(e,t,a,r){ou(r)?a===sP?dn(e,t,su,r):dl(e,t,su,r):sQ(a)?oL(e,t,a,su,r):oB(e,t,su,r)}function dk(e,t){let{getPageParamsQueryData:a,setPageParamsQueryData:r}=dw(e),n=(0,U.jE)(),i=(0,K.useMemo)(()=>({...e,fieldIds:t??e.fieldIds}),[t,e]),{getPageParamsQueryData:l}=dw(i),s=(0,K.useCallback)(()=>{if(t&&function(e,t,a){let r=oj(e,t);if(r.pageParams.includes(su))return!0;let n=oj(e,a),i=r.pageParams.length>=n.pageParams.length;return!!(dv(t)?dr(e,t,sd):oE(e,t,sd))&&i}(n,e,i))return;let a=l();if(oc(a))!function(e,t,a,r,n){let i={};for(let[n,l]of Object.entries(r.groupedItems)){let r=sY(n),s={nodes:l.flatMap(t=>oM(e,a,r,t)).filter(e=>!!e).flatMap(e=>e.nodes),pageInfo:ok};dS(e,t,r,s),i[n]=[su]}let l={groups:r.pageParams.map(t=>dr(e,a,t)).flatMap(e=>e?.groups??[]),pageInfo:ok};if(dS(e,t,sP,l),om(r)){let l={groups:(r.secondaryGroups?.map(t=>di(e,a,t))).flatMap(e=>e?.groups??[]),pageInfo:ok};dS(e,t,sD,l),n({groupedItems:i,pageParams:[sd,su],secondaryGroups:[su],groupedItemBatches:[]})}else n({groupedItems:i,pageParams:[sd,su]})}(n,e,i,a,r);else{let t={nodes:a.pageParams.map(e=>oE(n,i,e)).filter(e=>!!e).flatMap(e=>e.nodes),pageInfo:ok};dS(n,e,sR,t),r({pageParams:[sd,su]})}},[t,n,e,i,l,r]),o=(0,K.useCallback)((t,i)=>{let l=a(),s=sQ(i)&&oc(l),o=s?sZ(i):void 0,d=s&&o?l.groupedItems[o]||[]:l.pageParams;if(d[d.length-1]!==su)return;let u=dI(n,e,d,i,t);if(s&&o){let e={...l.groupedItems};e[o]=u,r({...l,groupedItems:e})}else r({...l,pageParams:u})},[a,n,r,e]);return{setUpNextPlaceholderQueries:s,updateMemexGroupsNextPlaceholderQuery:(0,K.useCallback)(t=>{let i=a(),l=oc(i)?i.groupedItems:{},s={...l};for(let a of t.groupedItems){let t=sX(a),r=sZ(t),i=dI(n,e,l[r]||[],t,a);s[r]=i}let o=dC(sP,t)?dj(n,e,i.pageParams,sP,t.groups):i.pageParams;if(om(i)){let a=i.secondaryGroups,l=t.secondaryGroups&&dC(sD,t)?dj(n,e,a,sD,t.secondaryGroups):a;r({...i,pageParams:o,groupedItems:s,secondaryGroups:l})}else r({pageParams:o,groupedItems:s})},[a,n,r,e]),updateMemexItemsNextPlaceholderQuery:o}}var dN=a(40458);function dT(){let{addToast:e}=lV();return(0,K.useCallback)(t=>t instanceof ApiError?503===t.status?e({type:"error",message:nH.serviceUnavailable,action:{text:"Reload",handleClick:()=>window.location.reload()}}):e({type:"error",message:t.message}):e({type:"error",message:nH.genericErrorMessage}),[e])}let d_=()=>{let{addLoadedFieldId:e}=sl();return{updateLoadedColumns:(0,K.useCallback)(t=>{e(t)},[e])}},dA=()=>{let{updateLoadedColumns:e}=d_(),{addLoadedFieldIdForCurrentView:t}=iS(),{memex_table_without_limits:a}=iz();return{updateLoadedColumns:(0,K.useCallback)(r=>{a?t(r):e(r)},[e,t,a])}},dR="sortedBy[columnId]",dP="sortedBy[direction]",dD="filterQuery",dE="layout",dM="groupedBy[columnId]",dB="verticalGroupedBy[columnId]",dL="visibleFields",dF="hideItemsCount",dO="sumFields",dG="sliceBy[columnId]",dV="sliceBy[value]",d$="period",dW="start_date",dz="end_date",dH="xAxis[groupBy]",dU="xAxis[dataSource][column]",dq="yAxis[aggregate][columns]",dK="yAxis[aggregate][operation]",dQ="pane",dJ="itemId",dX="issue",dY="statusUpdateId";async function dZ(e={},t){let a=new URL(nP("memex-paginated-items-get-api-data").url,window.location.origin);if(e.after&&a.searchParams.set("after",e.after),e.secondaryAfter&&a.searchParams.set("secondaryAfter",e.secondaryAfter),e.before&&a.searchParams.set("before",e.before),e.first&&a.searchParams.set("first",e.first.toString()),e.q&&a.searchParams.set("q",e.q),e.scope&&a.searchParams.set("scope",e.scope),e.sortedBy)for(let{columnId:t,direction:r}of e.sortedBy)a.searchParams.append(dP,r),a.searchParams.append(dR,`${t}`);null!=e.horizontalGroupedByColumnId&&a.searchParams.set(dM,`${e.horizontalGroupedByColumnId}`),null!=e.verticalGroupedByColumnId&&a.searchParams.set(dB,`${e.verticalGroupedByColumnId}`),e.groupedByGroupValue&&a.searchParams.set("groupedBy[value]",`${e.groupedByGroupValue}`),e.verticalGroupedByGroupValue&&a.searchParams.set("verticalGroupedBy[value]",`${e.verticalGroupedByGroupValue}`),e.sliceByColumnId&&a.searchParams.set(dG,`${e.sliceByColumnId}`),e.sliceByValue&&a.searchParams.set(dV,`${e.sliceByValue}`),e.fieldIds?.length&&a.searchParams.set("fieldIds",JSON.stringify(e.fieldIds)),e.viewType&&a.searchParams.set(dE,e.viewType),e.sumFields&&a.searchParams.set("sumFields",JSON.stringify(e.sumFields));let{data:r}=await ig(a,{signal:t});return r}function d0(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}let GroupedItemBatchRequestResolver=class GroupedItemBatchRequestResolver{async fetchData(e){let t=this.buildRequest(),a=await dZ(t,e);if(!("groups"in a)||null==a.secondaryGroups||!("groupedItems"in a))throw Error("Expected, groups, secondaryGroups, and groupedItems in response");return this._response=a,this._response}handleResponse(e){df(e,this._variables,this._response),dx(e,this._variables,this._response)}buildRequest(){let e;let{horizontalGroupedByColumnId:t,verticalGroupedByColumnId:a,...r}=this._variables;if(t&&a&&(e={...r,horizontalGroupedByColumnId:t,verticalGroupedByColumnId:a,...this._pageParam}),!e)throw Error("Could not create grouped item batch request");return e}constructor(e,t){d0(this,"_variables",void 0),d0(this,"_pageParam",void 0),this._variables=e,this._pageParam=t}};let d1=class BasePaginatedViewRequestResolver{async fetchData(e){return this._response=await this.makeRequest(e),this._response}handleResponse(e){dh(e,this._variables,this._response),df(e,this._variables,this._response,this._pageType),dg(e,this._variables,this._response),this._queryData=this.buildQueryData(e)}queryData(){return this._queryData}constructor(e,t,a,r){d0(this,"_variables",void 0),d0(this,"_groupValuesMap",void 0),d0(this,"_pageType",void 0),d0(this,"_pageParam",void 0),d0(this,"_request",void 0),this._variables=e,this._groupValuesMap=t,this._pageType=a,this._pageParam=r,this._request=this.buildRequest()}},d2=class PaginatedItemsRequestResolver extends d1{buildRequest(){let{horizontalGroupedByColumnId:e,verticalGroupedByColumnId:t,...a}=this._variables;return{...a,...this._pageParam}}async makeRequest(e){let t=await dZ(this._request,e);if("groups"in t)throw Error("Did not expect groups in response");return t}buildQueryData(){let{totalCount:e,...t}=this._response;return{...t,nodes:t.nodes.map(e=>iO(e))}}},d5=class PaginatedGroupedItemsRequestResolver extends d1{buildRequest(){let e;let{horizontalGroupedByColumnId:t,verticalGroupedByColumnId:a,...r}=this._variables;if(t&&!a){let a=this._groupValuesMap[this._pageType.groupId];a&&(e={...r,horizontalGroupedByColumnId:t,groupedByGroupValue:a})}else if(!t&&a){let t=this._groupValuesMap[this._pageType.groupId];t&&(e={...r,verticalGroupedByColumnId:a,verticalGroupedByGroupValue:t})}else if(t&&a&&this._pageType.secondaryGroupId){let n=this._groupValuesMap[this._pageType.secondaryGroupId],i=this._groupValuesMap[this._pageType.groupId];n&&i&&(e={...r,horizontalGroupedByColumnId:t,groupedByGroupValue:n,verticalGroupedByColumnId:a,verticalGroupedByGroupValue:i})}if(!e)throw Error("Could not create grouped items request");return{...e,...this._pageParam}}async makeRequest(e){let t=await dZ(this._request,e);if("groups"in t)throw Error("Did not expect groups in response");return t}buildQueryData(){let{totalCount:e,...t}=this._response;return{...t,nodes:t.nodes.map(e=>iO(e))}}},d3=class PaginatedGroupsRequestResolver extends d1{buildRequest(){let e;let{horizontalGroupedByColumnId:t,verticalGroupedByColumnId:a,...r}=this._variables;if(t&&!a?e={...r,horizontalGroupedByColumnId:t}:!t&&a&&(e={...r,verticalGroupedByColumnId:a}),!e)throw Error("Could not create groups request");return{...e,...this._pageParam}}async makeRequest(e){let t=await dZ(this._request,e);if("nodes"in t||null!=t.secondaryGroups)throw Error("Did not expect nodes or secondaryGroups in response");return t}buildQueryData(e){let t=dy(this._response);return dx(e,this._variables,this._response),t}},d4=class PaginatedGroupsAndSecondaryGroupsRequestResolver extends d1{buildRequest(){let e;let{horizontalGroupedByColumnId:t,verticalGroupedByColumnId:a,...r}=this._variables;if(t&&a&&(this._pageType===sP?e={...r,horizontalGroupedByColumnId:t,verticalGroupedByColumnId:a,...this._pageParam}:this._pageParam&&"after"in this._pageParam&&(e={...r,horizontalGroupedByColumnId:t,verticalGroupedByColumnId:a,secondaryAfter:this._pageParam.after})),!e)throw Error("Could not create groups and secondary groups request");return e}async makeRequest(e){let t=await dZ(this._request,e);if(!("secondaryGroups"in t)||!t.secondaryGroups)throw Error("Expected secondaryGroups in response");return t}buildQueryData(e){if(this._pageType===sP){let t=dy(this._response);return db(e,this._variables,this._response),dx(e,this._variables,this._response),t}{let t={groups:[],pageInfo:this._response.secondaryGroups.pageInfo};for(let e of this._response.secondaryGroups.nodes)t.groups.push(e);return dx(e,this._variables,this._response),t}}};function d6(e){let t=(0,K.useRef)([]);return t.current&&e.length===t.current.length&&e.every((e,a)=>{let r=t.current&&e.data===t.current[a]?.data;return r&&(t.current[a]=e),r})||(t.current=e),t.current}let d8=(0,K.createContext)(null),d7=()=>{let e=(0,K.useContext)(d8);if(!e)throw Error("useHorizontalGroupedBy must be used within a HorizontalGroupedByContext");return e},d9=(0,K.createContext)(null),ue=()=>{let e=(0,K.useContext)(d9);if(!e)throw Error("useVerticalGroupedBy must be used within a VerticalGroupedByContext");return e};var ut=a(46996);let ua=()=>{let{allColumnsRef:e}=sl();return{findColumnByDatabaseId:(0,K.useCallback)(t=>e.current.find(e=>e.databaseId===t),[e])}},ur=(0,K.createContext)(null),un=()=>{let e=(0,K.useContext)(ur);if(!e)throw Error("useSortedBy must be used within a SortedByContext");return e};function ui(){let{currentView:e}=iS(),t=lm.getSearchQueryFromView(e),{viewType:a,aggregationSettings:r}=e?.localViewStateDeserialized??{},{sorts:n}=un(),i=(0,K.useMemo)(()=>n.map(e=>({columnId:e.column.databaseId,direction:e.direction})),[n]),{groupedByColumnId:l}=d7(),{groupedByColumnId:s}=ue();a!==lK.Board&&(s=void 0);let{sliceField:o,sliceValue:d}=nA(),u=o?.id,c=(0,K.useMemo)(()=>r?.sum.map(e=>e.id),[r?.sum]);return function(e){let{viewType:t}=e,{currentView:a}=iS(),{findColumnByDatabaseId:r}=ua(),{visibleFields:n,layoutSettings:i,sortBy:l}=a?.localViewState??{},{dateFields:s,markerFields:o}=i?.roadmap??{},d=(s?.filter(e=>"none"!==e)??[]).concat(o??[]),u=l?.map(e=>e[0]),c=(0,K.useMemo)(()=>{let e=n?[...n]:[];t!==lK.Roadmap&&e&&u?e.push(...u):t===lK.Roadmap&&e&&e.push(...d);let a=[...new Set(ru(e?.map(e=>r(e)?.id)||[]))];return 0===a.length?void 0:a.sort()},[n,t,u,d,r]),m=a?.id??-1,p=(0,K.useRef)({});c&&void 0===p.current[m]&&(p.current[m]=c);let{setUpNextPlaceholderQueries:h}=dk({...e,fieldIds:c},p.current[m]);(0,K.useEffect)(()=>{(0,ut.A)(c,p.current[m])||(h(),p.current[m]=c)},[c,m,h]);let f=p.current[m];return(0,K.useMemo)(()=>({...e,fieldIds:f}),[e,f])}((0,K.useMemo)(()=>({q:t,sortedBy:i,viewType:a,horizontalGroupedByColumnId:l,verticalGroupedByColumnId:s,sliceByColumnId:u,sliceByValue:d??void 0,sumFields:c}),[t,i,a,l,s,u,d,c]))}function ul(){let e=ui(),{queries:t,queryKeys:a,groupedItemBatchesQueries:r,groupedItemBatchesQueryKeys:n}=function(e){let{pageParamsQueryData:t}=dw(e),a=function(e,t){let{updateMemexGroupsNextPlaceholderQuery:a}=dk(e),r=(0,U.jE)(),n=(0,K.useMemo)(()=>{let n=[];if(om(t))for(let i of t.groupedItemBatches)n.push({queryKey:sO(e,i),queryFn:async({signal:t})=>{let n=new GroupedItemBatchRequestResolver(e,i);return a(await n.fetchData(t)),n.handleResponse(r),i},structuralSharing:!1,staleTime:1/0});return n},[t,r,a,e]),i=(0,K.useMemo)(()=>n.map(e=>e.queryKey),[n]);return{groupedItemBatchesQueries:d6((0,dN.E)({queries:n})),groupedItemBatchesQueryKeys:i}}(e,t);return{...function(e,t){let a=(0,U.jE)(),{updateMemexItemsNextPlaceholderQuery:r,updateMemexGroupsNextPlaceholderQuery:n}=dk(e),{updateLoadedColumns:i}=dA(),l=dT(),s=(0,K.useMemo)(()=>{var s;let o=[],d=oc(s=t)?[...Object.entries(s.groupedItems).flatMap(([e,t])=>t.map(t=>({pageType:sY(e),pageParam:t}))),...s.pageParams.map(e=>({pageType:sP,pageParam:e})),...om(s)?s.secondaryGroups.map(e=>({pageType:sD,pageParam:e})):[]]:s.pageParams.map(e=>({pageType:sR,pageParam:e})),u=function(e){let t={},a=[...og(e),sP],r=[...og(e),sD];for(let[n,i]of[...e.getQueriesData({queryKey:a}),...e.getQueriesData({queryKey:r})])for(let e of i&&ou(i)?i.groups:[])t[e.groupId]=e.groupValue;return t}(a);for(let{pageType:t,pageParam:s}of d)o.push({queryKey:sE(e,t,s),queryFn:async({signal:o})=>{if(s===su)return t===sP||t===sD?{groups:[],pageInfo:ok}:{nodes:[],pageInfo:ok};let d=t===sR?new d2(e,u,t,s):sQ(t)?new d5(e,u,t,s):t!==sP?new d4(e,u,t,s):e.horizontalGroupedByColumnId&&e.verticalGroupedByColumnId?new d4(e,u,t,s):new d3(e,u,t,s);try{let e=await d.fetchData(o);if(o.aborted)return{nodes:[],pageInfo:ok,totalCount:{value:0,isApproximate:!1}};d.handleResponse(a);let{totalCount:l,...s}=e;for(let a of("groups"in s?n(s):sJ(t)&&r(s,t),i0(e)||[]))i(a)}catch(e){if(e instanceof ApiError&&503===e.status)l(e);else throw e}return d.queryData()},structuralSharing:!1,staleTime:1/0});return o},[l,t,a,i,n,r,e]),o=(0,K.useMemo)(()=>s.map(e=>e.queryKey||[]),[s]);return{queries:d6((0,dN.E)({queries:s})),queryKeys:o}}(e,t),...a}}(e),i=ow((0,U.jE)(),e),{queriesForItems:l,queryKeysForItems:s,queriesForGroups:o,queryKeysForGroups:d,queriesForSecondaryGroups:u,queryKeysForSecondaryGroups:c}=(0,K.useMemo)(()=>(function(e,t){let a=[],r=[],n=[],i=[],l=[],s=[];for(let[o,d]of e.entries()){let e=t[o];sH(e)?(n.push(d),i.push(e)):sU(e)?(l.push(d),s.push(e)):(a.push(d),r.push(e))}return{queriesForItems:a,queryKeysForItems:r,queriesForGroups:n,queryKeysForGroups:i,queriesForSecondaryGroups:l,queryKeysForSecondaryGroups:s}})(t,a),[t,a]),m=(0,K.useMemo)(()=>l.map(e=>e.data||{nodes:[],pageInfo:{hasNextPage:!1,hasPreviousPage:!1}}),[l]),{groupedItemQueries:p,groupsById:h}=(0,K.useMemo)(()=>({groupedItemQueries:0===o.length?{}:function(e,t){let a={};for(let[r,n]of t.entries()){let t=sz(n),i=e[r];if(i&&sQ(t)){let e=sZ(t),r=a[e]||[];if(r.push(i),a[e]=r,t.secondaryGroupId){let e=a[t.groupId]||[];e.push(i),a[t.groupId]=e;let r=a[t.secondaryGroupId]||[];r.push(i),a[t.secondaryGroupId]=r}}}return a}(l,s),groupsById:function(e,t){let a={};for(let r of e)for(let e of r.data?.groups||[]){let r=t?.groups[e.groupId]||{value:0,isApproximate:!1};a[e.groupId]={...e,totalCount:r}}return a}([...o,...u],i)}),[o,l,u,s,i]),f=l[0],g=f?.data!=null;return{data:m,queriesForItems:l,queryKeysForItems:s,queriesForGroups:o,queryKeysForGroups:d,queriesForSecondaryGroups:u,queryKeysForSecondaryGroups:c,groupedItemQueries:p,groupsById:h,...function(e,t,a){let{getPageParamsQueryData:r,setPageParamsQueryData:n}=dw(a),i=r(),l=oc(i)?t:e,s=l[i.pageParams.length-1],o=(0,K.useCallback)(()=>{let e=r(),t=s?.data?.pageInfo.endCursor,a=null==t?sd:{after:t};n({...e,pageParams:[...e.pageParams,a]})},[r,s?.data?.pageInfo.endCursor,n]);return{fetchNextPage:o,hasNextPage:s?.data==null||s?.data.pageInfo.hasNextPage,isFetchingNextPage:s?.isFetching??!1,isRefetching:l.some(e=>e.isRefetching)}}(l,o,e),...function(e,t){let{getPageParamsQueryData:a,setPageParamsQueryData:r}=dw(t),n=a(),i=e["secondaryGroups"in n?(n.secondaryGroups?.length??0)-1:-1],l=(0,K.useCallback)(()=>{let e=i?.data?.pageInfo.endCursor,t=null==e?sd:{after:e},n=a(),l="secondaryGroups"in n?n.secondaryGroups??[]:[];r({...n,secondaryGroups:[...l,t]})},[a,i?.data?.pageInfo.endCursor,r]),s=i?.data;return{fetchNextPageForSecondaryGroups:l,hasNextPageForSecondaryGroups:null==s||s.pageInfo.hasNextPage,isFetchingNextPageForSecondaryGroups:null!=i&&i.isFetching}}(u,e),...function(e,t,a){let r=(0,U.jE)(),{getPageParamsQueryData:n,setPageParamsQueryData:i}=dw(a),l=n(),s=(0,K.useMemo)(()=>oc(l)?l.groupedItems:{},[l]),o=(0,K.useCallback)(r=>{let n=s[sZ(r)]||[];return us(sF(a,r,n[n.length-1]),e,t)},[s,e,t,a]);return{fetchNextPageForGroupedItems:(0,K.useCallback)(e=>{let t=n(),l=function(e,t,a,r){if(oc(r)){let n=sZ(a),i=r.groupedItems[n]||[];return oM(e,t,a,i[i.length-1])}}(r,a,e,t),s=l?.pageInfo.endCursor,o=null==s?sd:{after:s},d=oc(t)&&t.groupedItems||{},u=sZ(e),c=[...d[u]||[],o],m={...d,[u]:c};i({...t,groupedItems:m})},[n,r,a,i]),hasNextPageForGroupedItems:(0,K.useCallback)(e=>{let t=o(e);if(!t)return!1;let a=t.data;return null==a||a.pageInfo.hasNextPage},[o]),isFetchingNextPageForGroupedItems:(0,K.useCallback)(e=>{let t=o(e);return t?.isFetching},[o])}}(l,s,e),...function(e,t,a,r,n){let{getPageParamsQueryData:i,setPageParamsQueryData:l}=dw(n),s=i();return{fetchGroupedItemsBatch:(0,K.useCallback)((e,t)=>{if(om(s)){let n=uo(a,e),i=uo(r,t),o=a[n-1]?.data?.pageInfo.endCursor,d=r[i-1]?.data?.pageInfo.endCursor;if(o&&d){let e={after:o,secondaryAfter:d},t=s.groupedItemBatches;t.some(t=>t.after===e.after&&t.secondaryAfter===e.secondaryAfter)||l({...s,groupedItemBatches:[...t,e]})}}},[s,a,r,l]),hasDataForGroupedItemsBatch:(0,K.useCallback)((i,l)=>{let s=uo(a,i),o=uo(r,l),d=a[s]?.data?.pageInfo,u=r[o]?.data?.pageInfo;if(d&&u){if(!d.hasPreviousPage||!u.hasPreviousPage)return!0;let i=a[s-1]?.data?.pageInfo,l=r[o-1]?.data?.pageInfo,c=i?.endCursor,m=l?.endCursor;if(c&&m)return null!=us(sO(n,{after:c,secondaryAfter:m}),t,e)}return!0},[t,a,r,e,n]),isFetchingGroupedItemsBatch:(0,K.useCallback)((i,l)=>{let s=uo(a,i),o=uo(r,l),d=a[s-1]?.data?.pageInfo.endCursor,u=r[o-1]?.data?.pageInfo.endCursor;if(d&&u){let a=us(sO(n,{after:d,secondaryAfter:u}),t,e);if(a)return a.isFetching}return!1},[t,a,r,e,n])}}(n,r,o,u,e),...function(e,t,a,r,n){let i=(0,U.jE)(),{setUpNextPlaceholderQueries:l}=dk(n);return{invalidateAllQueries:(0,K.useCallback)(async()=>{let n=[...e.concat(t).concat(a),...r];for(let e of(l(),n))e[4]!==su&&i.removeQueries({queryKey:e});oI(i)},[e,t,a,r,l,i])}}(s,d,c,n,e),totalCount:i.totalCount,hasInitialData:g}}function us(e,t,a){let r=(0,sc.EN)(e);return t[a.findIndex(e=>(0,sc.EN)(e)===r)]}function uo(e,t){for(let[a,r]of e.entries())if(r.data){for(let e of r.data.groups)if(e.groupId===t)return a}return -1}let ud=()=>{let{memex_table_without_limits:e}=iz();return e?uc():uu()},uu=()=>({handleRefresh:eC.l,handleCancelFetchData:eC.l}),uc=()=>{let{invalidateAllQueries:e,queryKeysForGroups:t,queryKeysForItems:a,queryKeysForSecondaryGroups:r}=ul(),n=(0,U.jE)(),i=(0,K.useCallback)(()=>{for(let e of t)e[4]!==su&&n.cancelQueries({queryKey:e});for(let e of r)e[4]!==su&&n.cancelQueries({queryKey:e});for(let e of a)e[4]!==su&&n.cancelQueries({queryKey:e})},[t,n,r,a]);return{handleRefresh:(0,K.useCallback)(async(t,a)=>{let r=(t||1/0)>=Math.floor(se.get()/1e3)&&!sa.hasPendingUpdates(),n=a&&l7.has(a);if(r&&!n)return i(),e()},[e,i]),handleCancelFetchData:i}},um=()=>{let e=(0,U.jE)();return{setItemData:(0,K.useCallback)(t=>{oq(e,t)},[e]),setItemsStateFromModels:(0,K.useCallback)(()=>{!function(e){oN()?e.setQueryData(og(e),e=>oR([...oX(e)||[]])):e.setQueriesData(oD,e=>oP(e)?{...e}:e)}(e)},[e])}},up=()=>{let{setItemsStateFromModels:e}=um();return{setColumnValue:(0,K.useCallback)((t,a,r=!1)=>{let{contentType:n}=t,{memexProjectColumnId:i}=a;(n!==eJ.DraftIssue||oi(i)||r)&&(l3(),t.setColumnValueForItemColumnType(a),e())},[e])}},uh=()=>{let{setColumnValue:e}=up(),{setItemData:t}=um(),{findLoadedFieldIds:a}=so(),r=a(),{handleCancelFetchData:n,handleRefresh:i}=ud();return{updateColumnValueAndPriority:(0,K.useCallback)(async(a,l,{layoutType:s,fieldIds:o}={})=>{if(a.contentType===eJ.RedactedItem)return;let d=[],u=[];if(l.columnValues?.length)for(let t of l.columnValues){let r=l0(t),n=l0(or(t,a));n&&d.push(n);let i=l1(t);i&&u.push(i),r&&e(a,r)}let c=l.previousMemexProjectItemId,m=oo(a.contentType,u,c,{layoutType:s});if(m)try{l3(),n();let{memexProjectItem:e,invalidateQueryCache:l}=await si({memexProjectItemId:a.id,fieldIds:o??r,...m});t(e),l&&i()}catch(t){for(let t of d)e(a,t);throw t}},[r,e,t,n,i]),updateMultipleSequentially:(0,K.useCallback)(async(a,n,i)=>{if(a.contentType===eJ.RedactedItem)return;let l=n.map(l0),s=n.map(l1),o=n.map(e=>l0(or(e,a)));return a.whileSkippingLiveUpdates(async()=>{let n;for(let t of l)t&&e(a,t);for(let e of s){if(!e)continue;let t=e?[e]:void 0,l=oo(a.contentType,t,i);if(l)try{l3(),n=await si({memexProjectItemId:a.id,fieldIds:r,...l})}catch{}}if(n){t(n.memexProjectItem);return}for(let t of o)e(a,t)})},[r,e,t])}},uf=()=>{let{allColumnsRef:e}=sl();return{findColumnByName:(0,K.useCallback)(t=>e.current.find(e=>e.name.toLowerCase()===t.toLowerCase()),[e])}},ug=()=>{let{memex_table_without_limits:e}=iz();return e?uy():ux()},uy=()=>{let{data:e}=ul();return(0,K.useMemo)(()=>({items:e.flatMap(e=>e.nodes)}),[e])},ux=()=>({items:op().data?.pages[0]?.nodes||[]}),ub=()=>{let e=(0,U.jE)();return{findMemexItem:(0,K.useCallback)(t=>oV(e,t),[e]),findMemexItemIndex:(0,K.useCallback)(t=>oW(e,t),[e])}};async function uv({issueId:e}){let t=new URL(nP("memex-tracked-by-api-data").url,window.location.origin);t.searchParams.set("issueId",`${e}`);let{data:a}=await ig(t);return a}let uw=(0,K.createContext)(null),uj=(0,K.createContext)(null),uC=(0,K.memo)(function({children:e}){let{items:t}=ug(),{findMemexItem:a}=ub(),[r,n]=(0,K.useState)(()=>new Map),i=(0,K.useRef)(r),l=(0,K.useRef)(new Map),s=(0,K.useCallback)(async e=>{if(i.current.has(e))return i.current.get(e);i.current.set(e,void 0);let t=await uv({issueId:e}).catch(()=>null);if(!t){n(new Map(r.set(e,void 0)));return}return n(a=>new Map(a.set(e,t))),i.current=new Map(i.current.set(e,t)),r.get(e)},[r]),o=(0,K.useCallback)(e=>{let t=e.reduce((e,t)=>{let a=r.get(t);return a?(i.current.delete(t),e.set(t,a)):e},new Map);return n(new Map(i.current)),()=>{for(let e of t.keys())i.current.set(e,t.get(e));n(new Map(i.current))}},[r]),d=(0,K.useCallback)(e=>{let t=new Map;for(let[a]of i.current){let n=r.get(a);if(!n)continue;let l=n.items.filter(t=>0>e.indexOf(t.itemId));l.length!==n.items.length&&t.set(a,n),0===l.length?i.current.delete(a):i.current.set(a,{...n,items:l,count:l.length})}return n(new Map(i.current)),()=>{for(let e of t.keys())i.current.set(e,t.get(e));n(new Map(i.current))}},[r]),u=(0,K.useCallback)((e,t)=>{l.current.set(e,t)},[]),c=(0,K.useCallback)(()=>l.current,[]),m=(0,nk.M)(t),p=(0,K.useMemo)(()=>t.some(e=>e.contentType===eJ.Issue&&e.columns[eT.TrackedBy]),[t]);(0,K.useEffect)(()=>{l.current=m.current.reduce((e,t)=>{let r=t.columns[eT.TrackedBy];if(t.contentType!==eJ.Issue||!r)return e;let n=a(t.id)?.content.id;if(!n)return e;for(let t of r)e.get(t.key.itemId)?.includes(n)||e.set(t.key.itemId,[...e.get(t.key.itemId)||[],n]);return e},new Map)},[a,p,m]);let h=(0,K.useMemo)(()=>({getChildrenTrackedByParent:s,setChildTrackedByParent:u,parentIssuesById:r,parentIssuesByIdRef:i,removeParentIssues:o,removeChildIssues:d,getAllProjectRelationships:c}),[c,s,r,d,o,u]),f=(0,K.useMemo)(()=>({parentIssuesByIdRef:i,removeParentIssues:o,setChildTrackedByParent:u,getAllProjectRelationships:c}),[c,o,u]);return(0,F.jsx)(uw.Provider,{value:h,children:(0,F.jsx)(uj.Provider,{value:f,children:e})})});try{uw.displayName||(uw.displayName="TrackedByItemsContext")}catch{}try{uj.displayName||(uj.displayName="TrackedByItemsStableContext")}catch{}try{uC.displayName||(uC.displayName="TrackedByItemsStateProvider")}catch{}let uI=()=>{let e=(0,K.useContext)(uw);if(!e)throw Error("useTrackedByItemsContext must be used within a TrackedByItemsContext.Provider.");return e},uS=()=>{let{parentIssuesByIdRef:e}=uI(),t=(0,K.useCallback)(t=>{let a=[],r=new Set(t);for(let[t,n]of e.current)n?.items.some(({itemId:e})=>r.has(e))&&a.push(t);return a},[e]);return{getChildrenIssuesForParent:(0,K.useCallback)(t=>e.current.get(t)?.items??[],[e]),getParentIssuesFromChildren:t,getParentCompletion:(0,K.useCallback)(t=>e.current.get(t)?.parentCompletion,[e]),getParent:(0,K.useCallback)(t=>e.current.get(t),[e])}},uk=()=>{let{getAllProjectRelationships:e,removeParentIssues:t,setChildTrackedByParent:a}=uI(),{getParent:r,getParentIssuesFromChildren:n}=uS(),{findMemexItem:i}=ub(),l=(0,K.useCallback)(a=>{let r=n(a);if(r.length)return t(r);for(let[t,n]of e())n.some(e=>a.includes(e))&&r.push(t);return t(r)},[e,n,t]),s=(0,K.useCallback)(e=>{l([e])},[l]),o=(0,K.useCallback)(e=>{let[t]=n([e]);if(!t)return;let i=r(t);a(t,i?.items.map(({itemId:e})=>e)||[]),s(e)},[r,n,s,a]);return{removeParentFromChildren:l,removeParentFromChild:s,setChildParentRelationship:o,getIssuesIdsToRemove:(0,K.useCallback)(e=>e.reduce((e,t)=>{let a=i(t);return a?[...e,a.content.id]:e},[]),[i])}},uN=({request:e,rollback:t,showErrorToast:a=!0})=>{let r=(0,K.useRef)({status:"idle",data:void 0}),{addToast:n}=lV(),i=(0,K.useCallback)(async(i,l)=>{try{r.current.status="loading";let t=await e(i);r.current.data=t,r.current.status="succeeded"}catch(e){if(e instanceof ApiError){r.current.status="failed",t&&t(l),a&&n({message:e.message,type:nF.error});return}throw e}},[n,e,t,a]);return(0,K.useMemo)(()=>({perform:i,status:r}),[i,r])};function uT(e,t){let a={},r=new Set(t);for(let t in e)r.has(t)||(a[t]=e[t]);return a}async function u_({memexProjectItemId:e}){let t=new URL(nP("memex-item-suggested-assignees-api-data").url,window.location.origin);t.searchParams.set("memexProjectItemId",`${e}`);let{data:a}=await ig(t);return a}async function uA(e){return uE(e,"milestones")}async function uR(e){return uE(e,"labels")}async function uP(e){return uE(e,"assignees")}async function uD(e){return uE(e,"issue_types")}async function uE(e,t){let a=new URL(nP("memex-sidepanel-item-suggestions-api-data").url,window.location.origin);switch(e.kind){case sf.ISSUE:a.searchParams.set("kind",e.kind),a.searchParams.set("item_id",`${e.itemId}`),a.searchParams.set("repository_id",`${e.repositoryId}`),a.searchParams.set("suggestions_type",t);break;case sf.PROJECT_DRAFT_ISSUE:a.searchParams.set("kind",e.kind),a.searchParams.set("project_item_id",`${e.projectItemId}`),a.searchParams.set("suggestions_type",t);break;default:tA(e)}let{data:r}=await ig(a);return r}let uM=(0,K.createContext)(null),uB=(0,K.createContext)(null),uL=(0,K.memo)(function({children:e}){let[t,a]=(0,K.useState)({}),[r,n]=(0,K.useState)({}),[i,l]=(0,K.useState)({}),[s,o]=(0,K.useState)({}),d=(0,K.useCallback)(e=>r[e],[r]),u=(0,K.useCallback)(e=>t[e],[t]),c=(0,K.useCallback)(e=>i[e],[i]),m=(0,K.useCallback)(e=>s[e],[s]),p=(0,K.useCallback)((e,t)=>{n(a=>({...a,[e]:t}))},[n]),h=(0,K.useCallback)((e,t)=>{a(a=>({...a,[e]:t}))},[a]),f=(0,K.useCallback)((e,t)=>{l(a=>({...a,[e]:t}))},[l]),g=(0,K.useCallback)((e,t)=>{o(a=>({...a,[e]:t}))},[o]),y=(0,K.useCallback)(e=>{n(t=>uT(t,e)),a(t=>uT(t,e)),l(t=>uT(t,e)),o(t=>uT(t,e))},[]),x=(0,K.useMemo)(()=>({getSuggestedAssigneesForItem:d,getSuggestedLabelsForItem:u,getSuggestedMilestonesForItem:c,getSuggestedIssueTypesForItem:m,setSuggestedAssigneesForItem:p,setSuggestedLabelsForItem:h,setSuggestedMilestonesForItem:f,setSuggestedIssueTypesForItem:g,removeSuggestions:y}),[d,u,c,m,p,h,f,g,y]),b=(0,K.useMemo)(()=>({setSuggestedAssigneesForItem:p,setSuggestedLabelsForItem:h,setSuggestedMilestonesForItem:f,setSuggestedIssueTypesForItem:g,removeSuggestions:y}),[p,h,f,g,y]);return(0,F.jsx)(uM.Provider,{value:x,children:(0,F.jsx)(uB.Provider,{value:b,children:e})})});async function uF(e){let t,a;try{t=await e()}catch(e){e instanceof Error&&(a=Error(e.message),e instanceof ApiError&&e.code&&(a.name=e.code))}return{response:t,error:a}}try{uM.displayName||(uM.displayName="SuggestionsContext")}catch{}try{uB.displayName||(uB.displayName="SuggestionsStableContext")}catch{}try{uL.displayName||(uL.displayName="SuggestionsStateProvider")}catch{}let uO=()=>{let e=(0,K.useContext)(uB);if(!e)throw Error("useSuggestionsStableContext must be used within a SuggestionsStableContext.Provider.");return e},uG=()=>{let{findMemexItem:e}=ub(),{setColumnValue:t}=up(),{setSuggestedAssigneesForItem:a}=uO();return{fetchSuggestedAssignees:(0,K.useCallback)(async r=>{a(r.getSuggestionsCacheKey(),void 0);let{response:n,error:i}=await uF(()=>{if(r.memexItemId?.())return u_({memexProjectItemId:r.memexItemId()});switch(r.contentType){case eJ.DraftIssue:return uP({kind:sf.PROJECT_DRAFT_ISSUE,projectItemId:r.id});case eJ.Issue:return uP({kind:sf.ISSUE,itemId:r.itemId(),repositoryId:r.ownerId()});default:throw Error(`Unsupported item type: ${r.contentType}`)}}),l=e(r.id);l&&!i&&t(l,{memexProjectColumnId:eT.Assignees,value:n?.suggestions?.filter(e=>e.selected).sort((e,t)=>e.login.localeCompare(t.login))||null});let s=n?.suggestions??i;return a(r.getSuggestionsCacheKey(),s),s},[a,t,e])}};async function uV({memexProjectItemId:e}){let t=new URL(nP("memex-item-suggested-labels-api-data").url,window.location.origin);t.searchParams.set("memexProjectItemId",`${e}`);let{data:a}=await ig(t);return a}let u$=()=>{let e=(0,K.useContext)(uM);if(!e)throw Error("useSuggestionsContext must be used within a SuggestionsContext.Provider.");return e},uW=()=>{let{findMemexItem:e}=ub(),{setColumnValue:t}=up(),{getSuggestedLabelsForItem:a,setSuggestedLabelsForItem:r}=u$();return{fetchSuggestedLabels:(0,K.useCallback)(async n=>{let i=n.getSuggestionsCacheKey(),l=a(i);if(!(l instanceof Error)&&l?.length)return l;let{response:s,error:o}=await uF(()=>{if(n.memexItemId?.())return uV({memexProjectItemId:n.memexItemId()});switch(n.contentType){case eJ.DraftIssue:return uR({kind:sf.PROJECT_DRAFT_ISSUE,projectItemId:n.id});case eJ.Issue:return uR({kind:sf.ISSUE,itemId:n.itemId(),repositoryId:n.ownerId()});default:throw Error(`Unsupported item type: ${n.contentType}`)}}),d=e(n.id);d&&!o&&t(d,{memexProjectColumnId:eT.Labels,value:s?.suggestions.filter(e=>e.selected).sort((e,t)=>e.name.localeCompare(t.name))||null});let u=s?.suggestions??o;return r(i,u),u},[a,r,e,t])}};async function uz({memexProjectItemId:e}){let t=new URL(nP("memex-item-suggested-milestones-api-data").url,window.location.origin);t.searchParams.set("memexProjectItemId",`${e}`);let{data:a}=await ig(t);return a}let uH=()=>{let{findMemexItem:e}=ub(),{setColumnValue:t}=up(),{setSuggestedMilestonesForItem:a}=uO();return{fetchSuggestedMilestones:(0,K.useCallback)(async r=>{a(r.getSuggestionsCacheKey(),void 0);let{response:n,error:i}=await uF(()=>{if(r.memexItemId?.())return uz({memexProjectItemId:r.memexItemId()});switch(r.contentType){case eJ.DraftIssue:return uA({kind:sf.PROJECT_DRAFT_ISSUE,projectItemId:r.id});case eJ.Issue:return uA({kind:sf.ISSUE,itemId:r.itemId(),repositoryId:r.ownerId()});default:throw Error(`Unsupported item type: ${r.contentType}`)}}),l=e(r.id);l&&!i&&t(l,{memexProjectColumnId:eT.Milestone,value:n?.suggestions.find(e=>e.selected)});let s=n?.suggestions??i;return a(r.getSuggestionsCacheKey(),s),s},[a,e,t])}},uU=()=>{let{fetchSuggestedAssignees:e}=uG(),{fetchSuggestedLabels:t}=uW(),{fetchSuggestedMilestones:a}=uH();return(0,K.useCallback)(async(r,n,i)=>{switch(n){case eT.Assignees:{let t=await e(r),a=await uq(t,i);if(!a)return;return{dataType:eN.Assignees,value:a}}case eT.Labels:{let e=await t(r),a=await uK(e,i);if(!a)return;return{dataType:eN.Labels,value:a}}case eT.Milestone:{let e=await a(r),t=await uQ(e,i);if(!t)return;return{dataType:eN.Milestone,value:t}}}},[e,t,a])},uq=async(e,t)=>{if(e instanceof Error)throw e;return e?e.filter(e=>t&&rW([t],e.login)||e.selected).map(e=>uT(e,["selected"])):null},uK=async(e,t)=>{if(e instanceof Error)throw e;return e?e.filter(e=>t&&rW([t],e.name)||e.selected).map(e=>uT(e,["selected"])):null},uQ=async(e,t)=>{if(e instanceof Error)throw e;if(!e)return null;let a=e.find(e=>t&&rW([t],e.title));return a?uT(a,["selected"]):null};var uJ=a(60658),uX=a(53526);function uY(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}let HierarchySidePanelItem=class HierarchySidePanelItem{getState(){return this.state}isDraft(){return!1}getItemIdentifier(){return iM(this.getUrl())}hierarchyEntry(){return{ownerId:this.key.repoId,itemId:this.key.issueId}}itemId(){return this.key.issueId}ownerId(){return this.key.repoId}getHtmlTitle(){return this.title}getRawTitle(){return this.title}getLabels(){return this.labels}getUrl(){return this.url}getAssignees(){return this.assignees}getSuggestionsCacheKey(){return`${this.contentType}:${this.itemId()}`}getRepositoryName(){return this.repoName}getItemNumber(){return this.number}getMilestone(){}getCompletion(){return this.completion}getLinkedPullRequests(){return[]}getExtendedRepository(){return this.repository||{name:this.repoName,nameWithOwner:"",id:this.key.repoId,url:"",isForked:!1,isPublic:!1,isArchived:!1,hasIssues:!1}}getTrackedBy(){return this.trackedBy}getIssueType(){}getStatus(){}getCustomField(e){}constructor(e,t){uY(this,"stateReason",void 0),uY(this,"repository",void 0),uY(this,"completion",void 0),uY(this,"trackedBy",void 0),uY(this,"isHierarchy",!0),uY(this,"contentType",void 0),Object.assign(this,e),this.completion=t,this.contentType=eJ.Issue,this.state===eE.Draft&&(this.contentType=eJ.DraftIssue),-1===this.itemId()&&(this.contentType=eJ.RedactedItem)}};let SubIssueSidePanelItem=class SubIssueSidePanelItem{getState(){return this.state}isDraft(){return!1}getItemIdentifier(){return{number:this.number,repo:this.repo,owner:this.owner,type:"Issue"}}itemId(){return this.id}ownerId(){return 0}hierarchyEntry(){return{itemId:this.itemId(),ownerId:this.ownerId()}}getHtmlTitle(){return this.title}getRawTitle(){return this.title}getLabels(){return[]}getUrl(){return this.url}getAssignees(){return[]}getSuggestionsCacheKey(){return`${this.contentType}:${this.itemId()}`}getRepositoryName(){return this.repo}getItemNumber(){return this.number}getMilestone(){}getCompletion(){}getLinkedPullRequests(){return[]}getExtendedRepository(){}getIssueType(){}getStatus(){}getTrackedBy(){}getCustomField(e){}getNameWithOwnerReference(){return`${this.owner}/${this.repo}#${this.number}`}getNameWithOwnerReferenceParam(){return`${this.owner}|${this.repo}|${this.number}`}constructor(e){uY(this,"id",void 0),uY(this,"title",void 0),uY(this,"url",void 0),uY(this,"state",void 0),uY(this,"stateReason",void 0),uY(this,"number",void 0),uY(this,"owner",void 0),uY(this,"repo",void 0),uY(this,"isHierarchy",!0),uY(this,"contentType",eJ.Issue),this.id=e.id,this.title=e.title,this.number=e.number,this.url=e.url,this.state=e.state.toLocaleLowerCase(),this.stateReason=e.stateReason?.toLocaleLowerCase(),this.owner=e.owner,this.repo=e.repo}};let uZ={INFO:"info",BULK_ADD:"bulk-add",ISSUE:"issue"},u0={EMPTY:{focus:null,previousFocus:null}},u1={NAVIGATE:"NAVIGATE",SET_FOCUS:"SET_FOCUS",INIT:"INIT"},u2=e=>({type:u1.NAVIGATE,navigation:e}),u5=e=>({type:u1.SET_FOCUS,focus:e}),u3=(e,t)=>{let a=(0,K.createContext)({navigationDispatch:()=>void 0,state:{focus:null,previousFocus:null}}),r=(0,K.createContext)({stateRef:(0,K.createRef)(),navigationDispatch:()=>void 0}),n=(0,K.memo)(function({metaRef:n,children:i}){let[l,s]=u4(e,t,n,u0.EMPTY),o=(0,nk.M)(l),d=(0,K.useMemo)(()=>({state:l,navigationDispatch:s}),[s,l]),u=(0,K.useMemo)(()=>({navigationDispatch:s,stateRef:o}),[o,s]);return(0,F.jsx)(a.Provider,{value:d,children:(0,F.jsx)(r.Provider,{value:u,children:i})})});return{context:a,NavigationProvider:n,useNavigation:()=>(0,K.useContext)(a),useStableNavigation:()=>(0,K.useContext)(r)}},u4=(e,t,a,r)=>{let n=iz(),i=(0,K.useCallback)((r,i)=>{switch(i.type){case u1.NAVIGATE:return e(r,a.current,i,n);case u1.SET_FOCUS:return t(r,a.current,i,n);case u1.INIT:return i.state;default:return r}},[a,e,t,n]);return(0,K.useReducer)(i,r)};try{(o=MyComponent).displayName||(o.displayName="MyComponent")}catch{}try{(d=FocusContextValueContext).displayName||(d.displayName="FocusContextValueContext")}catch{}try{(u=StableContext).displayName||(u.displayName="StableContext")}catch{}try{(c=NavigationProvider).displayName||(c.displayName="NavigationProvider")}catch{}let u6={Focus:"Focus",Edit:"Edit",Suspended:"Suspended",Same:"Same"},u8={First:"First",Second:"Second",Previous:"Previous",Same:"Same",Next:"Next",Last:"Last"},{useNavigation:u7,useStableNavigation:u9,NavigationProvider:ce}=u3(function(e,t,a){let{focus:r}=e;if(a.navigation.details?.type==="previousFocus")return{...e,focus:e.previousFocus,previousFocus:null};if(a.navigation.details?.type==="footer"){let n=a.navigation.details.verticalGroupId;if(null==n){if(r?.type==="coordinate"){let e=t.cardGrid[r.details.meta.horizontalGroupIndex];(0,ee.A)(e,"horizontalGroup should not be null"),n=e?.verticalGroups[r.details.x]?.verticalGroupId}else{let e=t.cardGrid[0];(0,ee.A)(e,"horizontalGroup should not be null"),n=e.verticalGroups[0]?.verticalGroupId}}return{...e,focus:{type:"footer",focusType:u6.Focus,details:{verticalGroupId:n,horizontalGroupIndex:a.navigation.details.horizontalGroupIndex}},previousFocus:e.focus}}if(a.navigation.details?.type==="search-input")return{...e,focus:{type:"search-input",focusType:u6.Focus,details:{}},previousFocus:e.focus??e.previousFocus};if(a.navigation.details?.type==="nearestCard"){let{indexOfCardWithinColumn:r,columnIndex:n,cardId:i,findMemexItem:l,horizontalGroupIndex:s}=a.navigation.details;return{...e,focus:function(e,t,a,r,n,i){let l=n[e],s=l?.verticalGroups[a],o=i?s.items.filter(e=>i(e.id)):s.items,d=o.findIndex(e=>e.id===r),u=o.length>1,c=o.length>0,m=o.length-1,p=-1,h=a;if(c&&-1===d)p=o[t>m?m:t]?.id??0;else if(u)p=d===m?o[d-1].id:o[d+1].id;else{let t=1;for(;-1===p&&(a-t>=0||a+t<(l?.verticalGroups.length??0));){let e=l?.verticalGroups[a-t],r=l?.verticalGroups[a+t];a-t>=0&&!cd(e)?(p=e.items[0].id,h=a-t):a+t<(l?.verticalGroups.length??0)&&!cd(r)&&(p=r.items[0].id,h=a+t),t++}if(-1===p)return{type:"footer",focusType:u6.Focus,details:{verticalGroupId:s.verticalGroupId,horizontalGroupIndex:e}}}return{type:"coordinate",focusType:u6.Focus,details:{x:h,y:p,meta:{horizontalGroupIndex:e??0}}}}(s,r,n,i,t.cardGrid,l),previousFocus:e.focus}}if(!r)return e;if("coordinate"===r.type){let n=function(e,t,a){let r=a[e.details.meta.horizontalGroupIndex];(0,ee.A)(r,"horizontalGroup should not be null");let n=e.details.meta.keyboardMovingCard,i=a.findIndex(e=>!e.isCollapsed),l=e.details.meta.horizontalGroupIndex===i;if(t.navigation.y===u8.Next&&function(e,t,a){let r=e.verticalGroups[t];if(cd(r))return!1;let n=r?r.items:[],i=n.length-1;return a===n[i].id}(r,e.details.x,e.details.y)){if(n)return{...e,details:{...e.details,meta:{...e.details.meta,keyboardMovingCard:{...n,sashSide:"after"}}}};let t=e.details.x,r=e.details.meta.horizontalGroupIndex,i=a[r],l=a[r]?.verticalGroups[t];if(l?.hasMoreItems)return{type:"load-more-items",focusType:u6.Focus,details:{verticalGroupId:l.verticalGroupId,horizontalGroupIndex:r}};for(;r<a.length-1&&i&&i.isFooterDisabled;)if(r=cs(a,r,u8.Next),i=a[r],!cd(l=a[r]?.verticalGroups[t])){let e=(l?.items[0]).id;return{type:"coordinate",focusType:u6.Focus,details:{x:t,y:e,meta:{horizontalGroupIndex:r}}}}return!i||i.isFooterDisabled||i.isCollapsed?e:{type:a.length>1?"add-item":"footer",focusType:u6.Focus,details:{verticalGroupId:l.verticalGroupId,horizontalGroupIndex:r}}}if(t.navigation.y===u8.Previous&&function(e,t,a){let r=e.verticalGroups[t];return!cd(r)&&a===(r?.items[0]).id}(r,e.details.x,e.details.y)){if(n)return{...e,details:{...e.details,meta:{...e.details.meta,keyboardMovingCard:{...n,sashSide:"before"}}}};if(l)return{type:"search-input",focusType:u6.Focus,details:{}};let t=e.details.x,r=e.details.meta.horizontalGroupIndex,i=a[r],s=a[r]?.verticalGroups[t];for(i?.isFooterDisabled||(r=cs(a,r,u8.Previous));r>0&&i&&i.isFooterDisabled;)if(r=cs(a,r,u8.Previous),i=a[r],!cd(s=a[r]?.verticalGroups[t])){let e=(s?.items[0]).id;return{type:"coordinate",focusType:u6.Focus,details:{x:t,y:e,meta:{horizontalGroupIndex:r}}}}return!i||i.isFooterDisabled||i.isCollapsed?e:{type:a.length>1?"add-item":"footer",focusType:u6.Focus,details:{verticalGroupId:s.verticalGroupId,horizontalGroupIndex:r}}}let s=co(a,e.details.meta.horizontalGroupIndex,e.details.x,t.navigation.x??u8.Same,!!n),o=r?.verticalGroups[s];if(n&&cd(o))return{type:"coordinate",focusType:u6.Focus,details:{x:s,y:-1,meta:{horizontalGroupIndex:e.details.meta.horizontalGroupIndex,keyboardMovingCard:{...n,sashSide:"before"}}}};if(!o)return e;if(cd(o))return 1===a.length||r?.isFooterDisabled?e:{type:"add-item",focusType:u6.Focus,details:{verticalGroupId:o.verticalGroupId,horizontalGroupIndex:e.details.meta.horizontalGroupIndex}};let d=r.verticalGroups[e.details.x].items.findIndex(t=>t.id===e.details.y),u=-1===e.details.y?0:cl(o.items,d,t.navigation.y??u8.Same),c=o.items[u].id,m=function({action:e,sashSide:t,currentRowIndex:a,newRowIndex:r,newColumn:n}){if(e.navigation.y===u8.First)return"before";if(e.navigation.y===u8.Last);else if(e.navigation.y===u8.Previous&&0===a&&a===r)return"before";else if(e.navigation.y===u8.Next&&a===n.items.length-1&&a===r);else if(t&&a!==r)return t;return"after"}({action:t,sashSide:e.details.meta.keyboardMovingCard?.sashSide,currentRowIndex:d,newRowIndex:u,newColumn:o});return{type:"coordinate",focusType:u6.Focus,details:{x:s,y:c,meta:{horizontalGroupIndex:e.details.meta.horizontalGroupIndex,keyboardMovingCard:e.details.meta.keyboardMovingCard?{...e.details.meta.keyboardMovingCard,sashSide:m}:void 0}}}}(r,a,t.cardGrid);return{...e,focus:n,previousFocus:e.focus}}{let n=function(e,t,a){let r=t.navigation,n=function(e){for(let t=e.length-1;t>=0;t--)if(!e[t]?.isCollapsed)return t;return e.length-1}(a),i=a["footer"===e.type||"add-item"===e.type?e.details.horizontalGroupIndex:0];(0,ee.A)(i);let l=i.verticalGroups.findIndex(t=>t.verticalGroupId===e.details?.verticalGroupId);if(-1===l)return e;let s=e.details&&"horizontalGroupIndex"in e.details&&"number"==typeof e.details.horizontalGroupIndex?e.details?.horizontalGroupIndex:0;if(r.y){if(r.y===u8.Next){if("load-more-items"===e.type){let e=a[s]?.verticalGroups[l];return{type:"add-item",focusType:u6.Focus,details:{verticalGroupId:e.verticalGroupId,horizontalGroupIndex:s}}}if(s===n)return{type:"search-input",focusType:u6.Focus,details:{}};s=Math.max(0,cs(a,s,u8.Next))}let t=co(a,s,l,r.x||u8.Same),i=a[s]?.verticalGroups[t];if(t<0||t>=(a[s]?.verticalGroups.length??0))return e;if(r.y===u8.Previous&&i?.hasMoreItems&&("add-item"===e.type||"footer"===e.type))return{type:"load-more-items",focusType:u6.Focus,details:{verticalGroupId:i.verticalGroupId,horizontalGroupIndex:s}};let o=null;if(r.y===u8.Previous||r.y===u8.Last){if(cd(i)){if(s>0){for(s=Math.max(0,cs(a,s,r.y));s>0&&a[s]?.isFooterDisabled&&(o=(i=a[s]?.verticalGroups[t]).items.length-1,!(i&&i.items?.length>0));)s=Math.max(0,cs(a,s,r.y));if(!a[s]?.isFooterDisabled)return{type:a.length>1?"add-item":"footer",focusType:u6.Focus,details:{verticalGroupId:i.verticalGroupId,horizontalGroupIndex:s}};o=(i=a[s]?.verticalGroups[t]).items.length-1}}else o=i.items.length-1}else if(r.y!==u8.First||cd(i)){if(r.y===u8.Next){if(cd(i)){if(a.length-1>=s)return{type:a.length>1?"add-item":"footer",focusType:u6.Focus,details:{verticalGroupId:i.verticalGroupId,horizontalGroupIndex:s}}}else o=0}}else o=0;if(null!=o&&o>-1){let e=i.items[o].id;return{type:"coordinate",focusType:u6.Focus,details:{x:t,y:e,meta:{horizontalGroupIndex:s}}}}return{type:"search-input",focusType:u6.Focus,details:{}}}if(r.x&&"add-item"===e.type){let e=co(a,s,l,r.x||u8.Same),t=a[s]?.verticalGroups[e];return{type:"add-item",focusType:u6.Focus,details:{verticalGroupId:t.verticalGroupId,horizontalGroupIndex:s}}}if(r.x&&"load-more-items"===e.type){let e=co(a,s,l,r.x||u8.Same),t=a[s]?.verticalGroups[e];return t?.hasMoreItems?{type:"load-more-items",focusType:u6.Focus,details:{verticalGroupId:t.verticalGroupId,horizontalGroupIndex:s}}:{type:"add-item",focusType:u6.Focus,details:{verticalGroupId:t.verticalGroupId,horizontalGroupIndex:s}}}return e}(r,a,t.cardGrid);return{...e,focus:n,previousFocus:e.focus}}},function(e,t,a){return{...e,focus:a.focus,previousFocus:function({focus:e,previousFocus:t}){return e?ct(e)||ca(e)?t:e:null}(e)}});function ct(e){return e?.type==="footer"}function ca(e){return e?.type==="search-input"}function cr(e,t,a,r=u6.Focus){return u5({type:"coordinate",focusType:r,details:{x:t,y:a,meta:{horizontalGroupIndex:e}}})}function cn(){return u2({focusType:u6.Focus,details:{type:"previousFocus"}})}function ci(){return u5(null)}function cl(e,t,a){return a===u8.Same?Math.min(t,e.length-1):a===u8.First?0:a===u8.Last?e.length-1:a===u8.Next?Math.min(t+1,e.length-1):Math.max(0,t-1)}function cs(e,t,a){let r=cl(e,t,a);for(;e[r]?.isCollapsed&&r>0&&r<e.length-1;)r=cl(e,r,a);return r}function co(e,t,a,r,n){let i=e[t];(0,ee.A)(i);let l=cl(i.verticalGroups,a,r);if(n)cd(i.verticalGroups[l])&&i.verticalGroups[l]?.verticalGroupId===o2&&i.verticalGroups[l+1]&&l++;else if(r!==u8.Same&&cd(i.verticalGroups[l])&&(1===e.length||i.isFooterDisabled))for(;l>=0&&l<i.verticalGroups.length&&cd(i.verticalGroups[l]);)l=r===u8.First||r===u8.Next?l+1:l-1;return l}function cd(e){return!e||0===e.items.length}function cu(e){return e.kind,!1}function cc(e){let t=e.filter(e=>e.subRows.length>0);if(t&&t.length>0&&t.every(e=>cu(e.groupedSourceObject))){let a=e.find(e=>!cu(e.groupedSourceObject));a&&t.push(a)}return t}let cm=e=>{if(!cu(e.groupedSourceObject))return nH.addItem;switch(e.groupedColumnId){case eT.Milestone:return nH.cannotAddItemsWhenGroupByMilestone;case eT.IssueType:return nH.cannotAddItemsWhenGroupByIssueType;default:return nH.addItem}};function cp(e){if("empty"===e.kind)return e.value.titleHtml;switch(e.dataType){case eN.Assignees:return nO(e.value.map(e=>e.login));case eN.Date:return aN(e.value.date.value);case eN.Iteration:return e.value.iteration.title;case eN.Milestone:return e.value.title;case eN.IssueType:return e.value.name;case eN.ParentIssue:return e.value.nwoReference;case eN.Number:return`${e.value.number.value}`;case eN.Repository:return e.value.nameWithOwner;case eN.SingleSelect:return e.value.option.name;case eN.Text:return e.value.text.raw;case eN.Labels:return e.value.name;default:tA(e)}}function ch(e){if("empty"===e.kind)return e.value.titleHtml;switch(e.dataType){case eN.Assignees:return e.value.map(e=>e.login).join("_");case eN.Date:return ak(e.value.date.value);case eN.Iteration:return e.value.iteration.title;case eN.Milestone:return e.value.title;case eN.IssueType:return e.value.name;case eN.Number:return`${e.value.number.value}`;case eN.Repository:return e.value.nameWithOwner;case eN.SingleSelect:return e.value.option.name;case eN.Text:return e.value.text.raw;case eN.ParentIssue:return e.value.title}}let cf={COORDINATE:"coordinate",FOOTER:"footer",SEARCH_INPUT:"search-input",GROUP_FOOTER:"group-footer",GLOBAL_OMNIBAR:"global-omnibar"};function cg(e){return e.type===cf.FOOTER}function cy(e){return e?.type===cf.SEARCH_INPUT}function cx(e){return e.type===cf.GROUP_FOOTER}function cb(e,t){return e.type===cf.GROUP_FOOTER&&e.details.groupId===t}function cv(e){return e.type===cf.COORDINATE}function cw(){return u5({focusType:u6.Focus,type:cf.FOOTER,details:null})}function cj(){return u5({focusType:u6.Focus,type:cf.SEARCH_INPUT,details:null})}function cC(e){return u5({focusType:u6.Focus,type:cf.GROUP_FOOTER,details:{groupId:e}})}function cI(e,t,a,r,n,i){return u5({focusType:u6.Focus,type:cf.COORDINATE,details:{y:e,x:t,meta:{editing:a,suspended:r,replaceContents:n,newContent:i}}})}function cS(){return u5(null)}let{useNavigation:ck,useStableNavigation:cN,NavigationProvider:cT}=u3(function(e,t,a){let{focus:r,previousFocus:n}=e,{visibleColumns:i,flatRows:l,groupedRows:s,state:o}=t.instance,{collapsedGroups:d}=o,{getHeaderFocus:u,focusableRowFilter:c,focusableColumnFilter:m}=t;if(!r)return e;let{navigation:p}=a,h=null,f=l.filter(e=>!e.isGrouped),g=c?f.filter(e=>c(r,n,p,e)):f,y=c&&s?s.map(e=>({...e,subRows:e.subRows.filter(e=>c(r,n,p,e))})):s,x=i.filter(e=>!e.nonNavigable).map(e=>e.id),b=m?x.filter(e=>m(e,p,cv(r)?l.find(e=>e.id===r.details.y):void 0)):x;if(y){let e=cA(y,d);if(cv(r)){let t=cG(e,r);t&&(h=cM(t,p,e,b)),null===h&&(h=cO(r,p,g,b,u))}else cx(r)?h=cB(r,p,e,b,n):cy(r)&&(h=cF(p,g,b,n))}else cg(r)?h=cL(p,g,b,u,n):cy(r)?h=cF(p,g,b,n):cv(r)&&(h=cO(r,p,g,b,u));return h?{...e,focus:h,previousFocus:cD(e)}:e},function(e,t,a){let r=null;if(a.focus?.type===cf.GLOBAL_OMNIBAR){let{groupedRows:a,state:n}=t.instance;r=function(e,t){let{focus:a}=e;if(t){if(!t.length)return e.focus;if(a&&cv(a)){let e=cG(t,a);if(e)return cC(e.group.id).focus}let r=t[0];if(r)return cC(r.id).focus}return cw().focus}(e,a?cA(a,n.collapsedGroups):void 0)}return{...e,focus:r??a.focus,previousFocus:cD(e)}});function c_(){let{state:{focus:e}}=ck();return null!=e&&cv(e)&&e.details.meta.newContent||""}function cA(e,t){return e.filter(e=>e.subRows.length>0&&!cu(e.groupedSourceObject)&&-1===t.indexOf(e.groupedValue))}let cR=(e,t,a,r)=>{if(r===u8.Same)return t;if(r===u8.First)return e[0];if(r===u8.Second)return e[1];if(r===u8.Last)return e[e.length-1];if(t&&-1!==a){if(r===u8.Next){let t=Math.min(a+1,e.length-1);return e[t]}if(r===u8.Previous)return e[Math.max(0,a-1)]}};function cP(e,t){if(e&&cv(e)){let a=t.findIndex(t=>t===e?.details?.x);return a>-1?a:null}return null}function cD({focus:e,previousFocus:t}){return e?cg(e)||cx(e)||cy(e)?t:e:null}let cE=e=>{if(!e||0===e.length)return null;let t=0,a=0;for(let r=0;r<e.length;r++){let n=e[r];if(void 0!==n){let e=n.index;e>a&&(a=e,t=r)}}return e[t]},cM=(e,t,a,r)=>{let{firstRow:n,lastRow:i,group:l,colID:s}=e,o=r.findIndex(e=>e===s)??0,d=a.findIndex(e=>e.id===l.id),u=!!t.details?.wrap,c=u&&0===o&&t.x===u8.Previous,m=u&&o===r.length-1&&t.x===u8.Next,p=c||t.y===u8.Previous,h=m||t.y===u8.Next;if(p&&d>0&&n){let e=a[d-1];return e?cC(e.id).focus:null}return h&&i?cC(l.id).focus:null},cB=(e,t,a,r,n)=>{let i=e.details.groupId,l=a.findIndex(e=>e.id===i),s=a[l],o=!!t.details?.wrap,d=o&&t.x===u8.Previous,u=o&&t.x===u8.Next,c=d||t.y===u8.Previous,m=u||t.y===u8.Next,p=cP(n,r);if(m&&l<a.length-1){let e=a[l+1];if(e&&e.subRows.length>0){let t=e.subRows[0]?.id,a=r[o?0:p??0];return void 0===t||void 0===a?null:cI(t,a).focus}if(e)return cC(e.id).focus}if(c&&l>=0&&s&&s.subRows.length>0){let e=s.subRows.at(-1).id,t=o?r.length-1:p??0,a=r[t];return void 0===a?null:cI(e,a).focus}if(c&&l>0&&s&&0===s.subRows.length){let e=a[l-1];return e?cC(e.id).focus:null}if(t.y===u8.Last&&t.x===u8.Second){if(!s)return null;let e=cE(s.subRows);if(!e)return null;let t=r[1]?r[1]:r[0];return void 0===t?null:cI(e.id,t).focus}return null},cL=(e,t,a,r,n)=>{if(e.y===u8.Last&&e.x===u8.Second){let e=cE(t);if(!e)return null;let r=a[1]?a[1]:a[0];return void 0===r?null:cI(e.id,r).focus}let i=cP(n,a);if(e.y===u8.Previous){if(0===t.length)return r();let e=a[i??0];return void 0===e?null:n||cI(t.at(-1).id,e,!1).focus}if(e.y){let r=cR(t.map(e=>e.id),void 0,-1,e.y),n=cR(a,void 0,-1,e.x||u8.First)??a[0];return r&&n?cI(r,n,!1).focus:null}return e.x&&e.details?.wrap?0===t.length?r():cI(t.at(-1).id,a.at(-1),!1).focus:e.details?.previousFocus?n:null},cF=(e,t,a,r)=>{if(e.y){let r=cR(t.map(e=>e.id),void 0,-1,e.y),n=cR(a,void 0,-1,e.x||u8.First)??a[0];return r&&n?cI(r,n,!1).focus:cw().focus}return e.details?.previousFocus?r:cw().focus},cO=(e,t,a,r,n)=>{if(e.details.y===a.at(-1)?.id&&t.y===u8.Next)return cw().focus;if(e.details.y===a.at(0)?.id&&t.y===u8.Previous)return n();let i=a.findIndex(t=>t.id===e.details.y)??0,l=r.findIndex(t=>t===e.details.x)??0,s=cR(a.map(e=>e.id),e?.details.y,i,t.y||u8.Same),o=cR(r,e?.details.x,l,t.x||u8.Same);if(t?.details?.wrap){if(t.x===u8.Next&&r.findIndex(t=>t===e?.details.x)+1>=r.length){if(!(i+1<=a.length-1))return cw().focus;o=r[0],s=a[i+1]?.id}else if(t.x===u8.Previous&&r.findIndex(t=>t===e?.details.x)-1<0){if(!(i-1>=0))return n();o=r[r.length-1],s=a[i-1]?.id}}let d=e?.details.meta.editing??!1,u=e?.details.meta.suspended??!1;return(t.focusType===u6.Edit?d=!0:t.focusType===u6.Focus&&(d=!1),t.focusType===u6.Suspended?u=!0:t.focusType!==u6.Same&&(u=!1),s&&o)?cI(s,o,d,u).focus:null};function cG(e,t){let{x:a,y:r}=t.details;for(let t of e){let e=t.subRows.findIndex(e=>e.id===r);if(e>=0){let r=0===e,n=e===t.subRows.length-1;return{group:t,subRowIndex:e,colID:a,firstRow:r,lastRow:n}}}return null}function cV(e){return{skipTurbo:!0,...e}}let c$=()=>{let e=(0,J.Zp)();return(0,K.useCallback)((t,a)=>e(t,{...a,state:cV(a?.state)}),[e])},cW=(0,K.forwardRef)(function(e,t){return(0,F.jsx)(X.N_,{"data-turbo":"false",...e,state:cV(e.state),ref:t})}),cz=(0,K.forwardRef)(function(e,t){return(0,F.jsx)(X.k2,{"data-turbo":"false",...e,state:cV(e.state),ref:t})}),cH=()=>{let[e,t]=(0,X.ok)();return[e,(0,K.useCallback)((e,a)=>{t(e,{...a,state:cV(a?.state)})},[t])]};try{cW.displayName||(cW.displayName="Link")}catch{}try{cz.displayName||(cz.displayName="NavLink")}catch{}try{(m=function(e){return(0,F.jsx)(J.C5,{...e,state:cV(e.state)})}).displayName||(m.displayName="Navigate")}catch{}let cU=e=>{let t=(0,U.jE)(),{memex_side_panel_query:a}=iz(),r=(0,K.useCallback)(e=>{a&&iG(e)&&oJ(t,e)},[a,t]),n=a?function(e,t){if(!t)return;let a=Number(t);return e.getQueryData(s5.getKey({itemId:a.toString()}))||oV(e,a)}(t,e):void 0,i=s5({variables:{itemId:e},enabled:a&&!!e,initialData:n}),l=(0,K.useCallback)(e=>{e||i.refetch()},[i]),s=(0,K.useCallback)(async()=>{let e=await i.refetch();e.data&&oq(t,e.data)},[i,t]);return a?{paneItem:i?.data,isItemLoading:i.isLoading,loadPaneItemData:eC.l,reloadPaneItem:s,setQueryDataForSidePanelItem:r,setItemIsLoaded:l}:void 0},cq=(e,t)=>{let a=(0,U.jE)(),{memex_table_without_limits:r}=iz(),n=(0,K.useCallback)(e=>{r&&iG(e)&&oQ(a,e)},[r,a]);if(!r)return{query:void 0,setQueryDataForSidePanelItem:n};let i=oK(a,e),l=(0,K.useRef)(i),s=!!(e&&!t&&!l.current);return{query:s2({variables:{itemId:e},enabled:s,initialData:i}),setQueryDataForSidePanelItem:n}},cK=e=>{let{items:t}=ug(),a=e?t.find(t=>t.id===parseInt(e)):void 0,{query:r,setQueryDataForSidePanelItem:n}=cq(e,a);!a&&r?.data&&(a=r.data);let{setItemData:i}=um(),l=(0,K.useCallback)(async e=>{let t=e.memexItemId?.();if(void 0===t)return;let a=await sh({memexProjectItemId:t});a.ok&&i(a.data.memexProjectItem)},[i]),{memex_table_without_limits:s}=iz(),o=(0,K.useRef)(a);s&&(a&&o.current&&function(e,t){return t.id===e.id&&e.memexProjectColumnValues.length<t.memexProjectColumnValues.length}(a,o.current)&&(i(o.current),l(a)),o.current=a);let d=(0,K.useCallback)(async()=>{a&&l(a)},[l,a]),u=(0,K.useRef)(!1);(0,K.useEffect)(()=>{a?.contentType!==eJ.DraftIssue||u.current||(u.current=!0,l(a))},[a,l]);let c=(0,K.useCallback)(e=>{u.current=e},[]);return{paneItem:a,isItemLoading:r?.isLoading||!1,reloadPaneItem:d,setQueryDataForSidePanelItem:n,setItemIsLoaded:c,loadPaneItemData:l}},cQ=e=>{let t=cU(e),a=cK(e);return t||a},cJ=new Set([eJ.DraftIssue,eJ.Issue]),cX="item",cY={type:uZ.INFO},cZ=new Set,c0=(0,K.createContext)(null),c1=(0,K.createContext)(void 0),c2=(0,K.createContext)([]),c5=[],c3=({children:e})=>{let[t,a]=cH(),{items:r}=ug(),n=t.get(dQ),i=n===uZ.BULK_ADD,l=n===cX||n===uZ.ISSUE,s=t.get(dJ),o=t.get(dX),{paneItem:d,isItemLoading:u,reloadPaneItem:c,setQueryDataForSidePanelItem:m,setItemIsLoaded:p,loadPaneItemData:h}=cQ(s);!function(){let[e,t]=cH(),a=e.get(dQ)===cX;(0,K.useEffect)(()=>{a&&t(e=>(e.set(dQ,uZ.ISSUE),e),{replace:!0})},[a,t])}(),function({itemIdParam:e,paneItem:t,externalItem:a}){let{addToast:r}=lV(),[,n]=cH(),i=(0,nk.M)(r);(0,K.useEffect)(()=>{!(!e||t?.contentType&&cJ.has(t.contentType))&&(a||(i.current({type:nF.error,message:t?.contentType===eJ.PullRequest?nH.sidePanelItemNotSupported:nH.sidePanelItemNotFound}),n(e=>(e.delete(dQ),e.delete(dJ),e.delete(dX),e),{replace:!0})))},[i,a,e,t,n])}({itemIdParam:u?null:s,paneItem:d,externalItem:!!o&&!d});let[f,g]=(0,K.useState)(d?[d]:c5),y=0===f.length;if(d&&y&&g([d]),y){if(d)g([d]);else if(s&&o){let e=function(e,t){let[a,r,n]=t.split("|");if(a&&r&&n)return new SubIssueSidePanelItem({id:parseInt(e),number:parseInt(n),owner:a,repo:r,state:"",stateReason:"",title:"",url:""})}(s,o);e&&g([e])}}let x=(0,K.useMemo)(()=>0===f.length?c5:f.reduce((e,t)=>{if(!t.memexItemId)return e.push(t),e;let a=t.memexItemId();if(d&&a===d.id)e.push(d);else{let t=r.find(e=>e.id===a);t&&e.push(t)}return e},[]),[f,r,d]),b=x.at(-1),v=(0,K.useMemo)(()=>l&&b?{type:uZ.ISSUE,item:b}:null,[l,b]),{hasWritePermissions:w}=eK(),j=(0,J.zy)(),C=(0,K.useMemo)(()=>w&&i?{...function(e){let t={targetRepository:void 0,query:void 0,newItemAttributes:void 0};return e&&("targetRepository"in e&&(t.targetRepository=e.targetRepository),"query"in e&&(t.query=e.query),"newItemAttributes"in e&&(t.newItemAttributes=e.newItemAttributes)),t}(j.state),type:uZ.BULK_ADD}:null,[i,w,j.state]);(0,K.useEffect)(()=>{i&&!w&&a(e=>(e.delete(dQ),e),{replace:!0})},[w,i,a]);let I=function(e,t){return e&&new Set(Object.values(uZ)).has(e)?t[e]:null}(n,{[uZ.ISSUE]:v,[uZ.INFO]:cY,[uZ.BULK_ADD]:C});(0,K.useEffect)(()=>{let e=()=>{g(c5)};return window.addEventListener("popstate",e),()=>window.removeEventListener("popstate",e)},[]),(0,K.useEffect)(()=>{!I&&E.current&&(E.current?.(),E.current=void 0)},[I]);let S=!!I;(0,K.useEffect)(()=>{s&&!Y.current?.contains(document.activeElement)&&window.setTimeout(()=>Q.current?.focus())},[s]);let{postStats:k}=iN(),[N,T]=(0,uJ.M)("projects.sidePanelPinned",!1),_=(0,K.useCallback)(e=>{T(e),setTimeout(()=>q.current?.focus(),25),k({name:"side_panel_pin",context:e?"pin":"unpin"})},[T,k]),[A,R]=(0,K.useState)(cZ),P=A.size>0,D=(0,K.useCallback)(()=>R(cZ),[]),E=(0,K.useRef)(void 0),M=(0,K.useCallback)((e,t)=>{cJ.has(e.contentType)&&(m(e),e.contentType===eJ.DraftIssue&&(D(),p(!1)),a(t=>{if(t.set(dQ,uZ.ISSUE),t.set(dJ,e.id.toString()),e instanceof IssueModel||e instanceof SubIssueSidePanelItem){let a=e.getNameWithOwnerReferenceParam();a&&t.set(dX,a)}else t.delete(dX);return t}),E.current=t,g([e]),k({name:eZ,memexProjectItemId:e.id}))},[m,a,k,D,p]),B=(0,K.useCallback)(e=>{t.get(dQ)!==uZ.INFO&&a(t=>(t.set(dQ,uZ.INFO),t.delete(dJ),t.delete(dX),e&&t.set(dY,e.toString()),t),{flushSync:!0})},[t,a]),L=(0,K.useCallback)((e,t,r,n)=>{D(),a(e=>(e.set(dQ,uZ.BULK_ADD),e.delete(dJ),e.delete(dX),e),{state:{targetRepository:t,newItemAttributes:n,query:r}}),k({name:tk,ui:e})},[D,k,a]),O=(0,uX.S)(),G=(0,K.useCallback)(async()=>!P||await O({...nH.sidePanelCloseConfirmation,confirmButtonType:"danger"}),[O,P]),V=(0,K.useCallback)(async e=>{if(P&&!(e&&e.force)){if(!await G())return!1;D()}return a(e=>(e.delete(dQ),e.delete(dJ),e.delete(dX),e.get(dY)&&e.delete(dY),e)),g(c5),!0},[P,D,a,G]),$=(0,K.useCallback)(e=>{if(P)return e.preventDefault(),e.returnValue=""},[P]);(0,X.K)($);let W=(0,K.useCallback)(e=>{if(!e)return;let{historyIdx:t,item:a}=e;a&&(g(e=>{let r=e.slice();return void 0!==t&&(r=e.slice(0,t)),[...r,a]}),k({name:eZ,memexProjectItemId:a.id}))},[k]),z=(0,K.useCallback)(async e=>{if(I?.type!==uZ.ISSUE||!e)return;let{item:t}=e;t&&await G()&&(h(t),D(),W(e))},[I?.type,h,D,W,G]),H=(0,K.useCallback)(async e=>{if(!e||!e.item?.isHierarchy)return;let{item:t}=e;t&&await G()&&(h(t),D(),W(e))},[h,D,W,G]),{isProjectViewRoute:U}=lu();eg(()=>U&&I?.type!==uZ.BULK_ADD?["a","Add items",tk,()=>L(e6)]:null,[U,I,L]),eg(()=>I?N?["p",nH.sidePanelUnpinLabel,"side-panel-unpin",()=>_(!1)]:["p",nH.sidePanelPinLabel,"side-panel-pin",()=>_(!0)]:null,[I,N,_]);let q=(0,K.useRef)(null),Q=(0,K.useRef)(null),Y=(0,K.useRef)(null),Z=(0,K.useMemo)(()=>({sidePanelState:I,openProjectItemInPane:M,reloadPaneItem:c,openPaneInfo:B,openPaneBulkAdd:L,closePane:V,hasUnsavedChanges:P,setDirtyItems:R,dirtyItems:A,isPaneOpened:S,supportedItemTypes:cJ,openPaneHistoryItem:z,openPaneHierarchyHistoryItem:H,pinned:N,setPinned:_,pinButtonRef:q,initialFocusRef:Q,containerRef:Y}),[V,R,A,P,S,L,H,z,B,M,c,I,N,_]);return(0,F.jsx)(c0.Provider,{value:Z,children:(0,F.jsx)(c1.Provider,{value:I&&"item"in I?I.item.id:void 0,children:(0,F.jsx)(c2.Provider,{value:x,children:e})})})},c4=(0,K.memo)(c3),c6=()=>(0,K.useContext)(c2),c8=()=>(0,K.useContext)(c1),c7=()=>{let e=(0,K.useContext)(c0);if(null===e)throw Error("useSidePanel must be used within a SidePanelProvider");return e},c9=()=>{let{openProjectItemInPane:e,...t}=c7(),{navigationDispatch:a}=cN(),{postStats:r}=iN();return{openPane:(0,K.useCallback)(t=>{e(t,()=>{a(u2({focusType:u6.Focus}))}),r({name:"side_panel_table_open",context:JSON.stringify({contentType:t.contentType})}),a(u2({focusType:u6.Suspended}))},[a,e,r]),...t}},me=()=>{let{openProjectItemInPane:e,...t}=c7(),{navigationDispatch:a}=u9(),{postStats:r}=iN();return{openPane:(0,K.useCallback)(t=>{e(t,()=>{a(cn())}),r({name:"side_panel_board_open",context:JSON.stringify({contentType:t.contentType})})},[a,e,r]),...t}};try{c0.displayName||(c0.displayName="SidePanelContext")}catch{}try{c1.displayName||(c1.displayName="SidePanelCurrentItemIdContext")}catch{}try{c2.displayName||(c2.displayName="SidePanelBreadcrumbHistoryContext")}catch{}try{c3.displayName||(c3.displayName="SidePanelProviderRenderFunction")}catch{}try{c4.displayName||(c4.displayName="SidePanelProvider")}catch{}let mt=(0,K.createContext)(null);function ma(){let e=(0,K.useContext)(mt);if(!e)throw Error("useViewType must be used inside a ViewTypeProvider");return e}let mr=[],mn=({onAddItem:e,onAddDraftItem:t,onSave:a,updateActions:r=mr,previousItemId:n,keepSystemFields:i=!1,groupId:l,secondaryGroupId:s})=>{let{fieldFilters:o,query:d,matchesSearchQuery:u,transientQuery:c}=lh(),{items:m}=ug(),{addToast:p}=lV(),{findColumnByName:h}=uf(),{updateMultipleSequentially:f}=uh(),g=uU(),{isKeywordQualifier:y}=i_(),{postStats:x}=iN(),{openProjectItemInPane:b,supportedItemTypes:v}=c7(),{setChildParentRelationship:w}=uk(),{tasklist_block:j,memex_table_without_limits:C}=iz(),{hasNextPage:I,hasNextPageForGroupedItems:S}=C?ul():{hasNextPage:!1,hasNextPageForGroupedItems:(0,K.useCallback)(()=>!1,[])},{viewType:k}=C?ma():{viewType:lK.Table},N=(0,K.useCallback)(()=>{if(!o.length&&!c.fieldFilters.length)return;let{columnValuesForCreate:e,columnValuesFromSuggestions:t}=[...o,...c.fieldFilters].reduce((e,[t,a])=>{if(!a.length||nn(t)||y(t)||t===eQ.FilterName&&!j)return e;let n=[...a],l=h(nc(t));if(!l||i&&!l.userDefined||r.find(e=>"memexProjectColumnId"in e?e.memexProjectColumnId===l.id:e.dataType===l.dataType))return e;if(n.length>1&&(n=[]),mi(l.id))return{...e,columnValuesFromSuggestions:[...e.columnValuesFromSuggestions,{memexProjectColumnId:l.id,filterValue:n[0]}]};let s=ny(m,l,n);return s?{...e,columnValuesForCreate:[...e.columnValuesForCreate,s]}:e},{columnValuesForCreate:[],columnValuesFromSuggestions:[]});return e.push(...r),{columnValuesForCreate:e,columnValuesFromSuggestions:t}},[o,c.fieldFilters,r,y,j,h,i,m]),{perform:T}=uN({request:(0,K.useCallback)(async i=>{let m=null,h=[],y=[],C=[];if(o.length||c.fieldFilters.length){let e=N();if(e){for(let t of e.columnValuesForCreate){let e=l0(t);e&&y.push(e);let a=l1(t);a&&h.push(a)}C=e.columnValuesFromSuggestions}}else for(let e of r){let t=l1(e),a=l0(e);t&&h.push(t),a&&y.push(a)}if("object"==typeof i){let{repositoryId:t,...a}=i;m=await e(a,t,h,y,n,l,s)}else m=await t(i,h,y,n,l,s);if(!m)return;a?.(),j&&w(m.content.id);let T=!1;if(C){let e=(await Promise.all(C.map(async({memexProjectColumnId:e,filterValue:t})=>{if(ml(m,e))try{return await g(m,e,t)}catch{T=!0}}))).filter(e=>!!e);await f(m,e)}if((!u(m)||T)&&(p({type:nF.warning,message:nH.newItemFilterWarning,action:v.has(m.contentType)?{handleClick:()=>m&&b(m),text:nH.viewItem}:void 0}),x({name:"item_added_does_not_match_filter",context:JSON.stringify({model:m,filter:d})})),l?S({groupId:l}):I){let e="";k===lK.Table?e=nH.newItemAddedToBottomOfTable:k===lK.Roadmap?e=nH.newItemAddedToBottomOfRoadmap:k===lK.Board&&(e=nH.newItemAddedToBottomOfColumn),p({type:nF.warning,message:e,action:v.has(m.contentType)?{handleClick:()=>m&&b(m),text:nH.viewItem}:void 0})}},[o.length,c.fieldFilters.length,a,j,u,l,S,I,N,r,e,n,s,t,w,f,g,p,v,x,d,b,k])});return T},mi=e=>e===eT.Assignees||e===eT.Labels||e===eT.Milestone||e===eT.TrackedBy,ml=(e,t)=>!!e&&e.contentType!==eJ.RedactedItem&&(e.contentType!==eJ.DraftIssue||oi(t));function ms(e){let t=e.split("/");if(2===t.length)return{owner:t[0],name:t[1]}}function mo(e){let t=i7.matchFullPathOrChildPaths(window.location.pathname);return["projects-v2","session-store-v1",t?.params.ownerType,t?.params.ownerIdentifier,t?.params.projectNumber,e].join("/")}let md=(0,K.createContext)(null),mu=(0,K.createContext)(null),mc=(0,K.createContext)(null),mm=(0,K.createContext)(null),mp=(0,K.createContext)(void 0),mh=(0,K.memo)(function({children:e}){let[t,a]=(0,K.useState)(""),[r]=(0,K.useState)(()=>{var e;return e=eA("memex-creator"),e?.login?nH.untitledUserProject(e.login):nH.untitledProject}),[n,i]=(0,K.useState)(()=>{let e=eA("memex-data"),t=eA("memex-consistency-metrics-data")||{};return e?{...e,...t}:{id:-1,number:-1,title:r,titleHtml:r,public:!1,closedAt:null,isTemplate:!1}}),l=(0,K.useCallback)(e=>{i(t=>({...t,...e}))},[]),s=n.number,o=!0===n.public,d=null!=n.closedAt,u=!0===n.isTemplate,c=n.templateId,m=(0,K.useMemo)(()=>n.title||r,[r,n.title]),p=(0,K.useMemo)(()=>n.titleHtml||m,[n.titleHtml,m]),h=n.shortDescription||"",f=n.shortDescriptionHtml||h,g=n.description||"",y=n.consistency,x=n.inconsistencyThreshold,b=(0,K.useMemo)(()=>({setProject:l}),[l]),v=(0,K.useMemo)(()=>({projectNumber:s}),[s]),w=(0,K.useMemo)(()=>({isPublicProject:o,isClosed:d,isTemplate:u}),[d,o,u]),j=(0,K.useMemo)(()=>({title:m,titleHtml:p,consistency:y,description:g,shortDescription:h,shortDescriptionHtml:f,descriptionHtml:t,inconsistencyThreshold:x,setDescriptionHtml:a}),[y,g,t,x,h,f,m,p]);return(0,F.jsx)(mm.Provider,{value:b,children:(0,F.jsx)(mu.Provider,{value:v,children:(0,F.jsx)(mc.Provider,{value:w,children:(0,F.jsx)(md.Provider,{value:j,children:(0,F.jsx)(mp.Provider,{value:c,children:e})})})})})});try{md.displayName||(md.displayName="ProjectDetailsContext")}catch{}try{mu.displayName||(mu.displayName="ProjectNumberContext")}catch{}try{mc.displayName||(mc.displayName="ProjectStateContext")}catch{}try{mm.displayName||(mm.displayName="SetProjectContext")}catch{}try{mp.displayName||(mp.displayName="ProjectTemplateIdContext")}catch{}try{mh.displayName||(mh.displayName="MemexStateProvider")}catch{}let mf=()=>{let e=(0,K.useContext)(md);if(!e)throw Error("useProjectDetails must be used within a ProjectDetailsContext.Provider");return e};var mg=a(8832);async function my(e){let t=nP("memex-item-create-api-data"),{data:a}=await ix(t.url,{method:"POST",body:e});return a}let mx=(0,mg.W)({mutationFn:my}),mb=()=>{let{findMemexItemIndex:e}=ub(),{setColumnValue:t}=up(),{addToast:a}=lV(),r=(0,U.jE)(),n=mx(),{memex_table_without_limits:i}=iz(),{updateLoadedColumns:l}=d_(),s=(0,K.useCallback)(t=>void 0===t?void 0:""===t?0:e(t)+1,[e]);return{createMemexItem:(0,K.useCallback)(async(e,o,d)=>{let u=s(e.previousMemexProjectItemId),c=e.localColumnValues;delete e.localColumnValues,l3();let m=await n.mutateAsync({memexProjectItem:e}),p=m.memexProjectItem,h=m.memexProjectColumn?.[0]?.partialFailures;h&&a({message:h.message,type:nF.warning,keepAlive:!0});let f=iO(p);for(let e of p.memexProjectColumnValues)l(e.memexProjectColumnId);if(f&&c)for(let e of c)t(f,e);return i&&null!=o?o$(r,f.id,o)?a({message:nH.duplicateItemForGroup,type:nF.error}):function(e,t,a){let r=o_(e),n=oj(e,r);if(!oc(n))return;let i=sZ(a),l=n.groupedItems[i]||[sd],s=l[l.length-1],o=oM(e,r,a,s);oV(e,t.id)&&oH(e,[t.id]);let d={totalCount:ob(e,r,1),groups:{[a.groupId]:ov(e,r,a.groupId,1)}};if(a.secondaryGroupId&&(d.groups[a.secondaryGroupId]=ov(e,r,a.secondaryGroupId,1)),o?.pageInfo.hasNextPage)return ox(e,r,d),!0;let u=sF(r,a,s);if(o){let a=[...o.nodes,t],r={...o,nodes:a};e.setQueryData(u,r)}else e.setQueryData(u,{nodes:[t],pageInfo:{hasNextPage:!1,hasPreviousPage:!1}}),oC(e,r,{...n,groupedItems:{...n.groupedItems,[i]:[sd]}});ox(e,r,d)}(r,f,{groupId:o,secondaryGroupId:d})&&a({message:nH.newItemAddedToBottomOfColumn,type:nF.warning}):oz(r,f,u),f},[s,n,i,a,l,t,r]),createMemexItemOptimisitcally:(0,K.useCallback)((e,a,n)=>{let i=e.localColumnValues;delete e.localColumnValues;let{contentType:s,content:o}=e,d=null;if(s===eJ.Issue&&(d={contentType:s,content:{...o,url:n||"",globalRelayId:""},contentRepositoryId:o.repositoryId,memexProjectColumnValues:a,id:o.id,priority:null,virtualPriority:null,updatedAt:Date.now().toString()}),d){let e=iO(d);for(let e of d.memexProjectColumnValues)l(e.memexProjectColumnId);for(let a=0;e&&i&&a<i.length;++a){let r=i[a];r&&t(e,r)}oz(r,e)}},[r,l,t])}};async function mv({memexNumber:e,repositoryId:t,onlyWithIssueTypes:a,milestone:r}){let n=new URL(nP("suggested-repositories-api-data").url,window.location.origin);null!=e&&n.searchParams.append("memexNumber",`${e}`),null!=t&&n.searchParams.append("repositoryId",`${t}`),a&&n.searchParams.append("with_issue_types","true"),r&&n.searchParams.append("milestone",r);let{data:i}=await ig(n);return i}let mw=()=>{let e=(0,K.useContext)(mu);if(!e)throw Error("useMemex must be used within a ProjectNumberContext.Provider");return e},mj=(e,t)=>t?`milestone: ${t}`:e?"withIssueTypes":"default",mC={default:{lastFetched:0,repositories:[]}},mI=(0,K.createContext)(null),mS=(0,K.memo)(function({children:e}){let{projectNumber:t}=mw(),a=(0,K.useRef)(mC),r=(0,K.useCallback)((e,t,r)=>{let n=a.current[t];return!!r&&!n?.repositories.find(e=>e.id===r)||null==n||e-n.lastFetched>3e4},[]),n=(0,K.useCallback)((e,t,r)=>{let n=a.current;a.current={...n,[e]:{...n[e],lastFetched:r,repositories:t}}},[]),i=(0,K.useCallback)(async e=>{let{repositoryId:i,onlyWithIssueTypes:l=!1,milestone:s}=e||{},o=Date.now(),d=mj(l,s);if(!r(o,d,i)){let e=a.current[d]?.repositories;if(e&&e.length>0)return e}let u=await mv({memexNumber:t,repositoryId:i,onlyWithIssueTypes:l,milestone:s});return n(d,u.repositories,o),u.repositories},[r,t,n]),l=(0,K.useCallback)(()=>{a.current=mC},[]),s=(0,K.useMemo)(()=>({suggestRepositories:i,repositoriesCache:a,clearCachedSuggestions:l}),[i,l]);return(0,F.jsx)(mI.Provider,{value:s,children:e})});try{mI.displayName||(mI.displayName="RepositoriesContext")}catch{}try{mS.displayName||(mS.displayName="RepositoriesStateProvider")}catch{}let mk=()=>{let e=(0,K.useContext)(mI);if(!e)throw Error("useRepositories must be used within a RepositoriesStateProvider");let{suggestRepositories:t,repositoriesCache:a,clearCachedSuggestions:r}=e;return{clearCachedSuggestions:r,suggestRepositories:t,repositoriesCache:a}},mN=(0,K.createContext)(null),mT=()=>(0,K.useContext)(mN),m_=mo("issue-creator"),mA=(e="",t="")=>({owner:t,name:e,includeTemplates:!0}),mR=e=>void 0!==e.name&&void 0!==e.owner&&""!==e.name&&""!==e.owner,mP=({onClose:e,prefill:t,newItemAttributes:a,returnFocusRef:r})=>{let n;let{loggedInUser:i}=eU(),{addToast:l}=lV(),{projectOwner:s,themePreferences:o}=eU(),d=o.markdown_fixed_width_font,u=i?.paste_url_link_as_plain_text??!1,c=o?.preferred_emoji_skin_tone,m=i?.use_single_key_shortcut??!1,{createMemexItem:p}=mb(),h=mn({updateActions:a&&a.updateColumnActions||void 0,previousItemId:a?.previousItemId,onAddDraftItem:(0,K.useCallback)(()=>Promise.resolve(null),[]),onAddItem:(0,K.useCallback)((e,t,r,n,i)=>p({contentType:e.type,content:{id:e.id,repositoryId:t},memexProjectColumnValues:r,localColumnValues:n,previousMemexProjectItemId:i},a?.groupId,a?.secondaryGroupId),[p,a?.groupId,a?.secondaryGroupId])}),f={onCreateSuccess:(0,K.useCallback)(async({issue:t,createMore:a})=>{let{databaseId:r,repository:n}=t;if(a||e(),!r||!n.databaseId){l({message:"Could not add the new issue to the project: ID is missing",type:"error"});return}await h({type:"Issue",id:r,repositoryId:n.databaseId})},[e,h,l]),onCancel:()=>e({cancelled:!0}),navigate:eC.l,isCreateDialogOpen:!0,setIsCreateDialogOpen:eC.l};t?.issueTitle&&(n={appendTitleToTemplate:t.issueTitle});let g={useMonospaceFont:d,emojiSkinTonePreference:c,pasteUrlsAsPlainText:u,singleKeyShortcutsEnabled:m,scopedOrganization:s?.login,scopedProjectTitle:t?.enforcedSelectedProjectTitle,scopedIssueType:t?.issueTypeName,scopedMilestone:t?.milestoneTitle,scopedAssignees:t?.assignees,showFullScreenButton:!1,returnFocusRef:r,storageKeyPrefix:m_,issueCreateArguments:{repository:t?.repo?.owner&&t?.repo?.name?{owner:t.repo.owner,name:t.repo.name}:void 0,initialValues:n}};return(0,F.jsx)(eb.y,{appName:"memex",category:"Memex Project",metadata:{},children:(0,F.jsx)(ev.or,{...f,optionConfig:g})})},mD=(0,K.memo)(function({children:e}){let{hasWritePermissions:t}=eK(),{title:a}=mf(),r=(0,ek.useRelayEnvironment)(),[n,i]=(0,K.useState)(),{suggestRepositories:l}=mk(),s=(0,K.useCallback)(async()=>{let e=(await l()).at(0)?.nameWithOwner;if(e)return ms(e)},[l]),o=(0,K.useCallback)(async({repo:e,issueTitle:t},r,n,l)=>{e||(e=await s()),(0,eS.D)((0,ew.wK)(m_));let o=r?.updateColumnActions?.find(({dataType:e})=>e===eN.IssueType)?.value,d=r?.updateColumnActions?.find(({dataType:e})=>e===eN.Milestone)?.value,u=r?.updateColumnActions?.find(({dataType:e})=>e===eN.Assignees)?.value;i({visible:!0,prefill:{issueTitle:t,repo:e,enforcedSelectedProjectTitle:a,issueTypeName:o?.name,milestoneTitle:d?.title,assignees:u},newItemAttributes:r,onClose:e=>{l?.(e),i(void 0)},returnFocusRef:n})},[s,a]),d=(0,K.useCallback)(async e=>{if(e||(e=await s()),(0,ej.Xl)(r,ew.tT.repositoriesPreloadCount,!0),e&&mR(e)){let t=mA(e.name,e.owner);(0,ej.DW)(r,t.owner,t.name)}},[r,s]);eg(()=>t?["i","Create issue","create_issue",()=>o({})]:null,[o,t]);let u=(0,K.useMemo)(()=>({start:o,prefetch:d,isOpen:!!n}),[d,o,n]),c=eP();return t?(0,F.jsxs)(eI.s,{features:c,children:[(0,F.jsx)(mN.Provider,{value:u,children:e}),n&&(0,F.jsx)(mP,{...n})]}):(0,F.jsx)(F.Fragment,{children:e})});try{mN.displayName||(mN.displayName="IssueCreatorContext")}catch{}try{mP.displayName||(mP.displayName="IssueCreator")}catch{}try{mD.displayName||(mD.displayName="IssueCreatorProvider")}catch{}let mE=(0,K.createContext)(null),mM=()=>{let e=(0,K.useContext)(mE);if(!e)throw Error("useCustomFieldsSettings must be used within a SettingsContext.Provider");return e},mB=(0,K.memo)(function({children:e}){let[t,a]=(0,K.useState)("");return(0,F.jsx)(mE.Provider,{value:(0,K.useMemo)(()=>({currentColumnTitle:t,setCurrentColumnTitle:a}),[t]),children:e})});try{mE.displayName||(mE.displayName="CustomFieldsSettingsContext")}catch{}try{mB.displayName||(mB.displayName="CustomFieldSettingsProvider")}catch{}let mL=()=>{let{pathname:e}=(0,J.zy)(),{currentView:t}=iS(),{title:a}=mf(),{sidePanelState:r}=c7(),n=ld(e),{currentColumnTitle:i}=mM(),l=mT(),s=l?.isOpen,o=(0,K.useMemo)(()=>{if(r&&"item"in r)return nq.item(a,r.item.getRawTitle());let e=nq.view(a,t?.name);switch(n){case lo.PROJECT_ROUTE:case lo.PROJECT_VIEW_ROUTE:if(s)return nq.newIssue(e);return e;case lo.PROJECT_ARCHIVE_ROUTE:return nq.archive(a);case lo.PROJECT_SETTINGS_FIELD_ROUTE:return nq.settings(a,i);case lo.PROJECT_SETTINGS_ROUTE:case lo.PROJECT_SETTINGS_ACCESS_ROUTE:return nq.settings(a);case lo.PROJECT_WORKFLOWS_ROUTE:case lo.PROJECT_WORKFLOW_CLIENT_ID_ROUTE:return nq.workflows(a);case lo.PROJECT_INSIGHTS_ROUTE:case lo.PROJECT_INSIGHTS_NUMBER_ROUTE:return nq.insights(a)}return a},[r,n,a,t?.name,i,s]);(0,K.useEffect)(()=>{(0,ex.D)(o)},[o]),(0,K.useEffect)(()=>{document.dispatchEvent(new CustomEvent("context-region-label:update",{detail:{label:a}}))},[a])};function mF({children:e,...t}){return(0,F.jsx)(lx.A,{...t,sx:{position:"relative",backgroundSize:"1px 37px",backgroundPositionY:"15px",backgroundRepeat:"repeat-x, repeat",backgroundColor:e=>`${e.colors.canvas.default}`,color:e=>`${e.colors.fg.default}`,width:"100%",height:"100%",overflow:"auto",...t.sx},children:e})}try{mF.displayName||(mF.displayName="BaseSettingsPage")}catch{}async function mO(e,t,a){let r=t.map(t=>` ${e?.nameWithOwner}#${t.number}`).join(","),n={memexProjectItem:{contentType:eJ.DraftIssue,content:{title:r},memexProjectColumnValues:a}},i=nP("memex-item-create-bulk-api-data"),{data:l}=await ix(i.url,{method:"POST",body:n});return(await ib(l.job.url,{headers:{accept:"application/json"}})).ok}async function mG(e,t){let a=e.map(e=>` ${e.userName}/${e.repoName}#${e.number}`).join(","),r={memexProjectItem:{contentType:eJ.DraftIssue,content:{title:a},memexProjectColumnValues:t}},n=nP("memex-item-create-bulk-api-data"),{data:i}=await ix(n.url,{method:"POST",body:r});return(await ib(i.job.url,{headers:{accept:"application/json"}})).ok}async function mV(e,t,a,r){let n=new URL(nP("search-issues-and-pulls-api-data").url,window.location.origin);n.searchParams.set("repositoryId",`${e}`),n.searchParams.set("q",t),null!=a&&n.searchParams.set("memexNumber",`${a}`),null!=r&&n.searchParams.set("limit",`${r}`);let{data:i}=await ig(n);return i}let m$=(e,t)=>{let[a,r]=(0,K.useState)(null),[n,i]=(0,K.useState)(!1),l=(0,K.useRef)(void 0),s=(0,K.useRef)(void 0),{projectNumber:o}=mw(),{perform:d,status:u}=uN({request:(0,K.useCallback)(async({repositoryId:e,query:a,memexNumber:r})=>(await mV(e,a,r,t?.limit)).issuesAndPulls,[t?.limit])}),c=(0,K.useCallback)(async(t,a,n=!1)=>{let c;i(!1);let m=a.trim();return(n||void 0===s.current||s.current!==m)&&(n||e(!0),l.current&&l.current.cancel(),l.current=(0,nN.A)(async()=>{await d({repositoryId:t,memexNumber:o,query:m}),"succeeded"===u.current.status&&(r(u.current.data),i(!0)),n||e(!1)},200),c=l.current()),s.current=m,c||(c=Promise.resolve()),c},[d,o,u,e]),m=(0,K.useCallback)(e=>{a&&r(a.filter(t=>t.id!==e.id))},[a,r]);return{items:a,removeItem:m,removeItems:(0,K.useCallback)(e=>{r(t=>t&&t.filter(t=>!e.has(t.number)))},[r]),refresh:c,finishedFetchingRepoItems:n,setFinishedFetchingRepoItems:i}},mW=(0,K.createContext)(null),mz=(0,K.memo)(function({children:e,selectedRepository:t,query:a}){let[r,n]=(0,K.useState)(!0),[i,l]=(0,K.useState)(!1),[s,o]=(0,K.useState)([]),[d,u]=(0,K.useState)([]),[c,m]=(0,K.useState)(!1),[p,h]=(0,K.useState)(t),[f,g]=(0,K.useState)(a??""),[y,x]=(0,K.useState)(!1),[b,v]=(0,K.useState)(!1),{refresh:w,items:j,removeItems:C}=m$(n,{limit:25}),I=(0,K.useMemo)(()=>new Set(s.map(e=>e.number)),[s]),S=(0,K.useCallback)(e=>{s.some(t=>t.number===e.number)?o(s.filter(t=>t.number!==e.number)):o(t=>[...t,e])},[s]),k=(0,K.useMemo)(()=>s.length===j?.length,[j,s]),N=(0,K.useCallback)(()=>{k?o([]):j&&o(j)},[k,j]),T=(0,K.useCallback)(e=>I.has(e),[I]),_=(0,K.useCallback)(()=>{o([])},[]),A=(0,K.useCallback)(async e=>{v(!1),m(!1),p?(_(),await w(p.id,e,!0)):y&&null===p&&v(!0)},[_,y,w,p]);(0,K.useEffect)(()=>{j&&v(!0)},[j]),(0,K.useEffect)(()=>{A(f)},[A,f]),(0,K.useEffect)(()=>{c&&A(f)},[c,A,f]),(0,K.useEffect)(()=>{b&&y?n(!1):n(!0)},[b,y,r,n]);let R=uN({request:(0,K.useCallback)(async e=>{let t=[];for(let e of d){let a=l1(e);a&&t.push(a)}let a=new Set(e.map(e=>e.number));l(!0),(p?await mO(p,e,t):await mG(e,t))&&(C(a),o(e=>e.filter(e=>!a.has(e.number))),l(!1),25===e.length&&v(!1))},[p,d,C]),rollback:(0,K.useCallback)(()=>{l(!1)},[])});return(0,F.jsx)(mW.Provider,{value:(0,K.useMemo)(()=>({addSelectedItemsRequest:R,clearSelectedItems:_,isSelected:T,selectItem:S,selectedItems:s,selectedRepo:p,setSelectedRepo:h,updateColumnsAction:d,setUpdateColumnsAction:u,hasFetchedRepos:y,setHasFetchedRepos:x,items:j,loading:r,addingItems:i,finishedFetchingRepoItems:b,searchQuery:f,setSearchQuery:g,selectAllItems:N,areAllItemsSelected:k,areAllItemsAdded:c,setAreAllItemsAdded:m,MAX_ITEM_NUM:25}),[R,_,T,S,s,p,h,d,u,y,x,j,r,i,b,f,g,N,k,c,m,25]),children:e})}),mH=()=>{let e=(0,K.useContext)(mW);if(null===e)throw Error("useBulkAddItems must be used within an BulkAddItemsContext");return e};try{mW.displayName||(mW.displayName="BulkAddItemsContext")}catch{}try{mz.displayName||(mz.displayName="BulkAddItemsProvider")}catch{}var mU=a(31655),mq=a(6869);function mK(){let e=(0,J.RQ)(i7.pathWithChildPaths);(0,ee.A)(e);let{ownerType:t,ownerIdentifier:a,projectNumber:r}=e.params;return(0,ee.A)(t),(0,ee.A)(a),(0,ee.A)(r),(0,K.useMemo)(()=>({ownerType:t,ownerIdentifier:a,projectNumber:parseInt(r,10)}),[t,a,r])}async function mQ(){let e=new URL(nP("memex-get-archive-status-api-data").url,window.location.origin),{data:t}=await ig(e);return t}let mJ=(0,K.createContext)(null),mX=(0,K.memo)(function({children:e}){let{items:t}=ug(),{loggedInUser:a}=eU(),[r,n]=(0,K.useState)(!1),[i,l]=(0,K.useState)(!1),s=(0,K.useMemo)(()=>l5(async()=>{if(a)try{let{isArchiveFull:e}=await mQ();n(e)}catch{n(!1)}},500),[a]);return(0,K.useEffect)(()=>(s(),()=>{s.cancel()}),[s,t.length]),(0,F.jsx)(mJ.Provider,{value:(0,K.useMemo)(()=>({isArchiveFull:r,setArchiveStatus:s,shouldDisableArchiveForActiveWorkflow:i,setShouldDisableArchiveForActiveWorkflow:l}),[r,s,i]),children:e})});try{mJ.displayName||(mJ.displayName="ArchiveStatusContext")}catch{}try{mX.displayName||(mX.displayName="ArchiveStatusProvider")}catch{}let mY=()=>{let e=(0,K.useContext)(mJ);if(!e)throw Error("useArchiveStatus must be used within an ArchiveStatusProvider");return e},mZ=(0,K.createContext)(null),m0=({children:e})=>{let[t,a]=(0,K.useState)(!1),[r,n]=(0,K.useState)(),[i,l]=(0,K.useState)(n1.defaultWorkflowName),[s,o]=(0,K.useState)(),d=(0,K.useCallback)(e=>{void 0===e?(n(void 0),l(n1.defaultWorkflowName)):(n({...e}),o(e.clientId),l(n1.newWorkflowName(e.name)))},[]),u=(0,K.useMemo)(()=>({isDialogOpen:t,workflowTemplate:r,workflowName:i,setWorkflowName:l,applyWorkflowTemplate:d,setIsDialogOpen:a,returnFocusClientId:s}),[d,t,s,i,r]);return(0,F.jsx)(mZ.Provider,{value:u,children:e})};try{mZ.displayName||(mZ.displayName="NewWorkflowDialogContext")}catch{}try{m0.displayName||(m0.displayName="NewWorkflowDialogProvider")}catch{}async function m1(e){let t=nP("memex-workflow-create-api-data"),{data:a}=await ix(t.url,{method:"POST",body:e});return a}async function m2(e){let t=nP("memex-workflow-update-api-data"),{data:a}=await ix(t.url,{method:"PUT",body:e});return a}let m5={ItemAdded:"item_added",Reopened:"reopened",ReviewChangesRequested:"review_changes_requested",ReviewApproved:"review_approved",Closed:"closed",Merged:"merged",QueryMatched:"query_matched",ProjectItemColumnUpdate:"project_item_column_update",SubIssues:"sub_issues"},m3={SetField:"set_field",GetItems:"get_items",GetProjectItems:"get_project_items",ArchiveProjectItem:"archive_project_item",AddProjectItem:"add_project_item",CloseItem:"close_item",GetSubIssues:"get_sub_issues"},m4={get_project_items:0,get_items:0,get_sub_issues:0,add_project_item:1,archive_project_item:1,close_item:2,set_field:2},m6={Issue:"Issue",PullRequest:"PullRequest"},m8=(e,t)=>{let a={triggerType:t?.triggerType||m5.QueryMatched,contentTypes:t?.contentTypes||[m6.Issue,m6.PullRequest],actions:t?.actions.map(e=>{let t={...e};return delete t.id,t})||[{actionType:m3.GetItems,arguments:{query:"is:pr,issue is:open label:bug",repositoryId:void 0}},{actionType:m3.AddProjectItem,arguments:{}}]};return{id:void 0,clientId:crypto.randomUUID(),isUserWorkflow:!0,name:e,enabled:!1,...a}};let MemexWorkflowConverter=class MemexWorkflowConverter{static toClient(e,t=!1,a){return{...e,clientId:a||crypto.randomUUID(),isUserWorkflow:t}}static toServer(e){let{id:t,name:a,triggerType:r,contentTypes:n,enabled:i,actions:l}=e;return{id:t,name:a,triggerType:r,contentTypes:n,enabled:i,actions:l}}};function m7(e){return"number"==typeof e.id}function m9(e){return e.actions.some(e=>e.actionType===m3.ArchiveProjectItem)}function pe(e){return e.triggerType!==m5.SubIssues&&e.actions.some(e=>e.actionType===m3.AddProjectItem)}function pt(e){return e.clientId}function pa(e,t){return(m4[e.actionType]??0)-(m4[t.actionType]??0)}function pr(e){let t=Array.from(e.actions).sort(pa),a=t[t.length-1]?.actionType??"";return`${e.triggerType}_${a}`}function pn(e,t,a){let r=a?pr:pt,n=a??r(t);return e.findIndex(e=>r(e)===n)}let pi=e=>{switch(e){case m5.ItemAdded:return ly.PlusIcon;case m5.Reopened:return ly.IssueReopenedIcon;case m5.ReviewChangesRequested:return ly.DiffIcon;case m5.ReviewApproved:return ly.CheckCircleFillIcon;case m5.Closed:return ly.SkipIcon;case m5.Merged:return ly.GitMergeIcon;default:return ly.WorkflowIcon}},pl={enable:"enable"},ps=(e,t)=>{let a=c$(),r=mK(),n=(0,K.useMemo)(()=>e.find(e=>e.clientId===t)??function(e){return e.find(e=>e.enabled)??e[0]}(e),[t,e]),i=(0,K.useMemo)(()=>{let t=new Set(e.map(e=>e.name.toLocaleLowerCase()));return n?.name&&t.delete(n?.name?.toLocaleLowerCase()),t},[n?.name,e]);return{activeWorkflow:n,workflowNames:i,autoArchiveWorkflow:(0,K.useMemo)(()=>e.find(e=>m9(e)),[e]),hasUnpersistedUserAddedWorkflow:(0,K.useMemo)(()=>e.some(e=>e.isUserWorkflow&&!m7(e)),[e]),navigateToWorkflow:(0,K.useCallback)(e=>{e?a(lt.generatePath({...r,workflowClientId:encodeURIComponent(e)}),{replace:!0}):a(le.generatePath(r),{replace:!0})},[a,r]),projectRouteParams:r}},po=function(){var e={defaultValue:null,kind:"LocalArgument",name:"projectId"},t={defaultValue:null,kind:"LocalArgument",name:"workflowNumber"},a=[{alias:null,args:[{fields:[{kind:"Variable",name:"number",variableName:"workflowNumber"},{kind:"Variable",name:"projectId",variableName:"projectId"}],kind:"ObjectValue",name:"input"}],concreteType:"DeleteProjectV2WorkflowByNumberPayload",kind:"LinkedField",name:"deleteProjectV2WorkflowByNumber",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"deletedWorkflowId",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[e,t],kind:"Fragment",metadata:null,name:"deleteProjectV2WorkflowByNumberMutation",selections:a,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[t,e],kind:"Operation",name:"deleteProjectV2WorkflowByNumberMutation",selections:a},params:{id:"2450a4a64f1dc63de57eacac2fcd3f9f",metadata:{},name:"deleteProjectV2WorkflowByNumberMutation",operationKind:"mutation",text:null}}}();po.hash="5ccdf246729b2e483d88018a9460db8b";let pd=(e,t)=>{let a=e.toLocaleLowerCase().trim();return 0===a.length?pp(n0.emptyWorkflowName):a.length>250?pp(n0.workflowNameTooLong):t.has(a)?pp(n0.duplicateWorkflowName):pp()},pu=(e,t)=>{if(!e.actions.length)return pp(n0.invalidNoAction);if(!e.contentTypes.length)return pp(n0.invalidNoContentType);if(t){let a=pd(e.name,t);if(!a.isValid)return a}for(let t of e.actions){let e=pc(t);if(!e.isValid)return e}return pp()},pc=e=>{switch(e.actionType){case m3.SetField:if(!e.arguments.fieldId)return pp(n0.invalidActionField);if(!e.arguments.fieldOptionId)return pp(n0.invalidActionFieldValue);break;case m3.GetProjectItems:{let{query:t,fieldId:a,fieldOptionId:r}=e.arguments;if(t)return pm(e);if(!a)return pp(n0.invalidNoQueryOrFieldId);if(!r)return pp(n0.invalidActionFieldValue);break}case m3.GetItems:if("string"!=typeof e.arguments.query)return pp(n0.invalidNoQuery);if(!e.arguments.repositoryId&&e.id)return pp(n0.invalidNoRepository);break;case m3.AddProjectItem:if(!e.arguments.subIssue&&!e.arguments.repositoryId&&e.id)return pp(n0.invalidNoRepository)}return pp()},pm=e=>{let t=e.arguments.query&&nr(e.arguments.query);if(t){for(let a of t.orderedTokenizedFilters)if("search"!==a.type&&(e.actionType!==m3.GetProjectItems||"field"!==a.type||"last-updated"!==a.field&&"updated"!==a.field)&&"field"===a.type)return pp(n0.invalidQuery)}return pp()},pp=e=>({errorMessage:e,isValid:!e});function ph(e,t,a){let r=function(e){let t=new Map;for(let a of e){let e=pr(a);t.has(e)||a.isUserWorkflow||t.set(e,a.clientId)}return t}(e),n=t.map(e=>{let{defaultWorkflow:t}=e;return MemexWorkflowConverter.toClient(t,!1,r.get(pr(t)))}),i=new Map;for(let e of a){let t=pr(e),a=i.get(t)||0,r=a>0,l=MemexWorkflowConverter.toClient(e,r,e.id.toString()),s=pn(n,l,t);-1!==s?r?n.push(l):n.splice(s,1,l):n.push(l),i.set(t,a+1)}return n}let pf=(0,K.createContext)(null),pg=(0,K.memo)(function({children:e}){let{projectLimits:{autoAddCreationLimit:t}}=eU(),{isArchiveFull:a,setShouldDisableArchiveForActiveWorkflow:r}=mY(),n=J.RQ(lt.path)?.params.workflowClientId,[i]=(0,K.useState)(()=>eA("memex-workflow-configurations-data")||[]),[l]=(0,K.useState)(()=>eA("memex-workflows-data")||[]),[s,o]=(0,K.useState)(()=>ph([],i,l)),[d]=(0,K.useState)(()=>i.reduce((e,t)=>(e[t.triggerType]=t.constraints.contentTypes,e),{})),[u]=(0,K.useState)(()=>i.reduce((e,t)=>(e[t.triggerType]=t.enableable,e),{})),c=s.map(e=>e.clientId).reduce((e,t)=>Object.assign(e,{[t]:!1}),{}),[m,p]=(0,K.useState)(c),h=(0,K.useRef)(new Map),{activeWorkflow:f,workflowNames:g,autoArchiveWorkflow:y,hasUnpersistedUserAddedWorkflow:x,navigateToWorkflow:b}=ps(s,n),v=eA("memex-relay-ids")?.memexProject,{addToast:w}=lV(),j=(0,K.useCallback)((e,t=!0)=>{t||(e.enabled=!1),o(t=>{let a=pn(t,e);return t.splice(a,1,e),[...t]})},[]),C=(0,K.useCallback)((e,t)=>{x||o(a=>ph(a,e,t))},[x]),I=(0,K.useCallback)((e,t,a)=>{let r;return!s.some(t=>t.name===e)&&"query_matched_add_project_item"===t&&(r=m8(e,a),o(e=>(r&&e.push(r),[...e])),b(r.clientId),!0)},[b,s]),S=(0,K.useCallback)(async e=>{let t=h.current.get(e.clientId);if(!t)try{t=py(MemexWorkflowConverter.toServer(e)),h.current.set(e.clientId,t);let a=await t,r=MemexWorkflowConverter.toClient(a.workflow,e.isUserWorkflow,a.workflow.id.toString());o(t=>{let a=pn(t,e);return t.splice(a,1,r),[...t]}),p(t=>{let a={...t};return delete a[e.clientId],{...a,[r.clientId]:!1}}),b(r.clientId)}finally{h.current.delete(e.clientId)}return t},[b]),k=(0,K.useCallback)(async(e,t)=>{if(!v)return;let a=s.findIndex(t=>m7(t)&&t.number===e),r=px(s,a),n=s[a];n&&function({environment:e,input:{workflowNumber:t,projectId:a},optimisticUpdater:r,onCompleted:n,onError:i}){(0,ek.commitMutation)(e,{mutation:po,variables:{workflowNumber:t,projectId:a},optimisticUpdater:r,onCompleted:n,onError:i})}({environment:t,input:{workflowNumber:e,projectId:v},optimisticUpdater:()=>{o(e=>(e.splice(a,1),[...e]))},onCompleted:()=>{w({message:n0.deleteWorkflowSuccess,type:"success"}),b(r?.clientId)},onError:()=>{o(e=>(e.splice(a,0,n),[...e])),w({message:n0.deleteWorkflowError,type:"error"})}})},[w,b,v,s]),N=(0,K.useCallback)(e=>{let t=s.findIndex(t=>t.clientId===e),a=s[t],r=px(s,t);a&&(o(e=>(e.splice(t,1),[...e])),n===a.clientId&&b(r?.clientId))},[n,b,s]),T=(0,K.useCallback)(async e=>await m2(e),[]),_=(0,K.useCallback)(async(e,t)=>{let a={...e,...t};if(!m7(e))return S(a);{let r=await T({workflowNumber:e.number,...t});return j(a),b(e.id.toString()),r}},[S,b,j,T]),A=(0,K.useCallback)(async(e,t)=>_(e,{enabled:t}),[_]),R=(0,K.useCallback)(async(e,t)=>{let a=t.reduce((e,t)=>e.map(e=>e.actionType===t.actionType?t:e),e.actions),r={...e,actions:a};if(pu(r,g).isValid)return _(r,{name:r.name,contentTypes:r.contentTypes,enabled:r.enabled,actions:a});j(r,!1)},[j,_,g]),P=(0,K.useCallback)(e=>d[e],[d]),D=(0,K.useCallback)(e=>u[e],[u]),E=(0,K.useCallback)((e,t)=>s.filter(a=>m7(a)&&a.actions.find(a=>a.arguments.fieldId===e&&a.arguments.fieldOptionId===t)),[s]),M=(0,K.useCallback)((e,t)=>{let a=new Set(t);return s.filter(t=>m7(t)&&t.actions.find(t=>t.arguments.fieldId===e&&t.arguments.fieldOptionId&&!a.has(t.arguments.fieldOptionId)))},[s]),B=(0,K.useCallback)(e=>{for(let t in m)m[t]=t===e&&!m[t];p({...m})},[m]),L=(0,K.useCallback)(()=>{p({...c})},[c]),O=(0,K.useCallback)(e=>m[e],[m]),G=(0,K.useRef)(new Map),V=(0,K.useCallback)(()=>G.current,[]),$=(0,K.useCallback)(e=>{e&&requestAnimationFrame(()=>{let t=V().get(e);t?.focus()})},[V]),W=uN({request:(0,K.useCallback)(async({workflow:e,enable:t})=>{await A(e,t)},[A])});(0,K.useEffect)(()=>{a&&y?.enabled&&W.perform({workflow:y,enable:!1})},[y,W,a]),(0,K.useEffect)(()=>{f&&r(m9(f)&&a)},[f,a,r]);let z=(0,K.useMemo)(()=>s.filter(e=>pe(e)),[s]),H=(0,K.useMemo)(()=>z.length>=t,[z.length,t]),U=(0,K.useMemo)(()=>({activeWorkflow:f,workflows:s,workflowNames:g,handleEnabledChangeRequest:W,updateWorkflowAndAction:R,getValidContentTypesForTriggerType:P,setAllWorkflows:C,workflowWithTriggerTypeIsEnableable:D,workflowsUsingColumnOption:E,workflowsUsingMissingColumnOption:M,newWorkflow:I,setWorkflowMenuState:B,resetWorkflowMenuStates:L,isWorkflowMenuOpen:O,handleReturnFocus:$,getWorkflowMenuItemsMap:V,itemsRef:G,autoAddWorkflowLimitReached:H,deleteWorkflow:k,deleteNonPersistedWorkflow:N}),[f,s,g,W,R,P,C,D,E,M,I,B,L,O,$,V,G,H,k,N]);return(0,F.jsx)(pf.Provider,{value:U,children:(0,F.jsx)(m0,{children:e})})});async function py(e){let{id:t,...a}=e;return m1({workflow:a})}function px(e,t){return t>0?e[t-1]:e[1]}try{pf.displayName||(pf.displayName="WorkflowsContext")}catch{}try{pg.displayName||(pg.displayName="WorkflowsStateProvider")}catch{}function pb(){let e=(0,K.useContext)(pf);if(!e)throw Error("useWorkflows must be used within a WorkflowsStateProvider");return e}function pv(){let e=(0,K.useContext)(mZ);if(!e)throw Error("useNewWorkflowCreation must be used within a NewWorkflowCreationProvider");return e}var pw=a(34614),pj=a(63867),pC=a(65607);let pI=e=>(0,F.jsx)(lx.A,{sx:{...e.sx||{},display:"flex",flex:"1 1 auto",width:"100%",height:"100%",position:"relative",backgroundSize:"1px 37px",backgroundPositionY:"15px",backgroundRepeat:"repeat-x, repeat"},...e,children:(0,F.jsx)(lx.A,{sx:{m:"auto",textAlign:"center"},children:e.children})});try{pI.displayName||(pI.displayName="Blankslate")}catch{}let pS={Checkbox:"item-suggestions-list-module__Checkbox--dAl8Y"};var pk=a(38568),pN=a(40961);let pT=(0,K.createContext)({observer:null,elMapRef:{current:new Map},avgRef:{current:{count:0,avg:0}}}),p_=(0,K.memo)(function(e){let[t,a]=(0,K.useState)(null),r=iW(()=>new Map),n=(0,K.useRef)({count:0,avg:e.sizeEstimate??0}),i=(0,nk.M)(e),{memex_mwl_visible_paginator:l}=iz(),s=(0,K.useCallback)(e=>{(0,pN.unstable_batchedUpdates)(()=>{for(let t of e){let e=t.target,a=r.current.get(e);if(a){if(l&&a.setObservedRootBounds(t.rootBounds),i.current.disableHide&&!t.isIntersecting)continue;a.setIsVisible(t.isIntersecting)}}})},[r,i,l]);(0,pk.N)(()=>{if(e.rootRef&&!e.rootRef.current)return;let t=new IntersectionObserver(s,{root:e.rootRef?.current??null,rootMargin:e.rootMargin??`${window.innerHeight/2}px ${window.innerWidth/2}px`});return a(t),()=>{t?.disconnect()}},[s,e.rootMargin,e.rootRef]);let o=(0,K.useMemo)(()=>({observer:t,elMapRef:r,avgRef:n}),[t,r]);return(0,F.jsx)(pT.Provider,{value:o,children:e.children})});function pA({ref:e,defaultHeight:t}){let[a,r]=(0,K.useState)(!1),[n,i]=(0,K.useState)(void 0),{observer:l,elMapRef:s,avgRef:o}=(0,K.useContext)(pT),d=(0,K.useRef)(t??o.current?.avg),u=(0,K.useRef)(!1),c=(0,K.useCallback)(()=>{if(!e.current||n?.top===void 0)return!1;let t=e.current.getBoundingClientRect();return t.top<=n.bottom&&t.left<=n.right&&t.bottom>=n.top&&t.right>=n.left},[n?.bottom,n?.left,n?.right,n?.top,e]);return(0,pk.N)(()=>{let t=e.current;if(!t)return;let a=t.getBoundingClientRect();a.top<window.pageYOffset+window.innerHeight&&a.left<window.pageXOffset+window.innerWidth&&a.top+a.height>window.pageYOffset&&a.left+a.width>window.pageXOffset&&r(!0)},[e]),(0,pk.N)(()=>{let t=e.current;if(!t||!l)return;let a=s.current;return a.set(t,{setIsVisible:r,setObservedRootBounds:i}),l.observe(t),()=>{a.delete(t),l.unobserve(t)}},[s,l,e]),(0,K.useEffect)(()=>{if(a){if(!e.current||!o.current)return;let a=e.current.getBoundingClientRect().height;t||u.current||(o.current={count:o.current.count+1,avg:(o.current.count*o.current.avg+a)/(o.current.count+1)}),u.current=!0,d.current=a}},[o,a,e,t]),{isVisible:a,size:d.current,isCurrentlyVisible:c}}try{(p=Parent).displayName||(p.displayName="Parent")}catch{}try{(h=Child).displayName||(h.displayName="Child")}catch{}try{p_.displayName||(p_.displayName="ObserverProvider")}catch{}let pR={FORBID_TAGS:["style"],ALLOW_DATA_ATTR:!1},pP={...pR,ALLOWED_TAGS:["a","#text","img","g-emoji","code"],ADD_ATTR:["alias","fallback-src"],FORBID_ATTR:["style"],KEEP_CONTENT:!0},pD={...pR,ADD_TAGS:["action-menu","anchored-position","auto-complete","focus-group","g-emoji","tracking-block","tracking-block-omnibar","tasklist-block-title","details-menu","math-renderer","task-lists","tool-tip","turbo-frame","modal-dialog","primer-text-field"],ADD_ATTR:["alias","anchor","anchor-offset","fallback-src","data-hovercard-type","data-hovercard-url","data-octo-click","data-octo-dimensions","data-identity","data-host","data-src","data-content","data-type","data-json","data-plain","data-id","data-issue","data-draft-issue","data-item-uuid","data-item-id","data-item-title","data-item-state","data-item-position","data-menu-type","data-repository-id","data-repository-name","data-show-dialog-id","data-close-dialog-id","data-modal-dialog-overlay","data-display-number","data-hydro-click-hmac","data-hydro-click-payload","data-hydro-click","data-tracking-block-item-title","data-tracking-block-convert-button","data-tracking-block-remove-button","data-tracking-block-draft-title","data-form-tracking-block-update","data-completion-completed","data-completion-total","data-response-source-type","data-query-type","data-precache","sortable","data-view-component","data-catalyst","data-action","data-target","data-targets","data-canonical-src","data-static-url","mnemonics","popover","popovertarget","retain","side"],ADD_URI_SAFE_ATTR:["data-action","data-item-title","data-plain","data-host","data-content","data-json"]},pE=new Set(["github.com","githubusercontent.com","githubassets.com","github.localhost","ghe.com","ghe.localhost"]),pM=new Set(["media","uploads","assets","avatars"]),pB=e=>{("target"in e||e instanceof HTMLAnchorElement)&&(e.setAttribute("target","_blank"),e.setAttribute("rel","noopener noreferrer")),!e.hasAttribute("target")&&(e.hasAttribute("xlink:href")||e.hasAttribute("href"))&&e.setAttribute("xlink:show","new")},pL=(0,tH.default)();pL.addHook("afterSanitizeAttributes",pB),pL.addHook("afterSanitizeElements",e=>{if(e instanceof Element&&"IMG"===e.tagName){let t=e.getAttribute("src");if(t)try{let a=new URL(t,document.baseURI),r=a.hostname.split(".");if(r.length>=2){let e=`${r.at(-2)}.${r.at(-1)}`;if(pE.has(e)||new URL(document.baseURI).origin===new URL(t,document.baseURI).origin)return;let n=document.getElementById("github-url");if(n){let e=new URL(n.textContent??"");if(Array.from(pM.values()).map(t=>`${t}.${e.hostname}`).includes(a.hostname))return}}e.parentNode?.removeChild(e)}catch{e.parentNode?.removeChild(e)}}});let pF=(0,tH.default)();function pO(e){return pL.sanitize(e,pP).toString()}function pG(e,{skipImageSanitization:t=!1}={}){return t?pF.sanitize(e,pD).toString():pL.sanitize(e,pD).toString()}pF.addHook("afterSanitizeAttributes",pB);let pV=(0,K.forwardRef)(({children:e,...t},a)=>(0,F.jsx)(lv.A,{ref:a,...t,dangerouslySetInnerHTML:{__html:pO(e)}}));pV.displayName="SanitizedHtml";let p$=(0,K.memo)(pV),pW={open:{"aria-label":"Open issue",icon:ly.IssueOpenedIcon,color:"open.fg"},closed:{"aria-label":"Closed as completed issue",icon:ly.IssueClosedIcon,color:"done.fg"},redacted:{"aria-label":"Redacted issue",icon:ly.LockIcon,color:"fg.muted"}},pz={not_planned:{"aria-label":"Closed as not planned issue",icon:ly.SkipIcon,color:"fg.muted"},duplicate:{"aria-label":"Closed as duplicate issue",icon:ly.SkipIcon,color:"fg.muted"},completed:pW.closed,reopened:pW.open},pH={open:{"aria-label":"Open pull request",icon:ly.GitPullRequestIcon,color:"open.fg"},closed:{"aria-label":"Closed pull request",icon:ly.GitPullRequestClosedIcon,color:"closed.fg"},merged:{"aria-label":"Merged pull request",icon:ly.GitMergeIcon,color:"done.fg"},draft:{"aria-label":"Draft pull request",icon:ly.GitPullRequestDraftIcon,color:"fg.muted"}},pU=({type:e,state:t,stateReason:a,isDraft:r})=>e===eJ.PullRequest||t===eB.Merged?pH[t===eB.Open&&r?"draft":t]:t===eL.Closed&&a?pz[a]:pW[t||"redacted"],pq=({type:e,state:t,stateReason:a,isDraft:r,sx:n,...i})=>{let{icon:l,color:s,...o}=pU({type:e,state:t,stateReason:a,isDraft:r});return(0,F.jsx)(lw.A,{icon:l,...o,...i,sx:{color:s,...n}})},pK=({title:e,...t})=>{switch(e.contentType){case eJ.Issue:{let a=e.value.stateReason;return(0,F.jsx)(pq,{type:e.contentType,state:e.value.state,stateReason:a,isDraft:!1,...t})}case eJ.PullRequest:{let a=e.value.isDraft;return(0,F.jsx)(pq,{type:e.contentType,state:e.value.state,isDraft:a,...t})}default:tA(e)}};try{pq.displayName||(pq.displayName="ItemState")}catch{}try{pK.displayName||(pK.displayName="ItemStateForTitle")}catch{}let pQ={Checkbox:"suggested-item-module__Checkbox--vEU1Y"},pJ={borderBottom:"1px solid",borderColor:"border.default","&:last-child":{borderBottom:"none"},display:"flex",alignItems:"center"},pX={color:"fg.default",overflow:"hidden",textAlign:"left",whiteSpace:"nowrap",textDecoration:"none","&:hover":{color:"accent.fg"}},pY=(0,K.memo)(function({item:e,keyName:t,url:a}){let r=(0,K.useRef)(null),{isVisible:n}=pA({ref:r});return(0,F.jsx)(lx.A,{ref:r,as:"li",sx:pJ,children:n?(0,F.jsx)(pZ,{keyName:t,item:e,url:a}):null},t)}),pZ=(0,K.memo)(function({item:e,url:t}){let{selectItem:a,isSelected:r}=mH(),n=(0,K.useCallback)(()=>{a(e)},[a,e]),i=`item-title-${e.number}`;return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(lx.A,{as:"label",sx:{pl:1},...(0,ey.G)("repo-item"),children:(0,F.jsx)(pC.A,{"aria-labelledby":i,checked:r(e.number),onChange:n,className:pQ.Checkbox})}),(0,F.jsx)(lx.A,{sx:{pl:2},children:(0,F.jsx)(pq,{type:e.type,state:e.state,stateReason:e?.stateReason,isDraft:!!e.isDraft})}),(0,F.jsxs)(lx.A,{sx:{p:2,display:"flex",flex:"1",justifyContent:"flex-start",width:"100%",minWidth:"0"},children:[(0,F.jsx)(lx.A,{as:"span",id:i,sx:{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},children:(0,F.jsx)(pw.A,{sx:pX,target:"_blank",rel:"noreferrer",href:t,tabIndex:-1,children:(0,F.jsx)(p$,{children:e.titleHtml})})}),(0,F.jsx)(lv.A,{sx:{ml:2,color:"fg.muted"},children:`#${e.number}`})]})]})});try{pY.displayName||(pY.displayName="SuggestedItem")}catch{}try{pZ.displayName||(pZ.displayName="SuggestedItemInner")}catch{}let p0={listStyleType:"none",display:"flex",flexDirection:"column",contentVisibility:"auto"},p1=(0,K.memo)(function({hasSearchInput:e}){return(0,F.jsxs)(pI,{...(0,ey.G)("side-panel-no-suggested-items"),sx:{backgroundColor:e=>`${e.colors.canvas.default}`,display:"flex",flexGrow:1,m:6},children:[(0,F.jsx)(lw.A,{icon:ly.RepoIcon,size:30,sx:{color:"fg.muted"}}),(0,F.jsx)("h2",{children:"No items to add"}),(0,F.jsx)(lv.A,{as:"p",sx:{color:"fg.muted"},children:e?nH.noItemsInSearchResult:nH.repoIsEmpty})]})}),p2=(0,K.memo)(function({isOrganization:e,owner:t}){return(0,F.jsxs)(pI,{...(0,ey.G)("side-panel-no-suggested-repos"),sx:{backgroundColor:e=>`${e.colors.canvas.default}`,display:"flex",flexGrow:1,m:6},children:[(0,F.jsx)(lw.A,{icon:ly.RepoIcon,size:30,sx:{color:"fg.muted"}}),(0,F.jsx)("h2",{children:"No repositories found"}),(0,F.jsxs)(lv.A,{as:"p",sx:{color:"fg.muted"},children:["Create a"," ",(0,F.jsx)(pw.A,{inline:!0,href:e?`/orgs/${t}/repositories`:`/${t}?tab=repositories`,children:"repository"})," ","to get started."]})]})}),p5=(0,K.memo)(function(){return(0,F.jsx)(pI,{sx:{backgroundColor:e=>`${e.colors.canvas.default}`,display:"flex",flexGrow:1,m:6},children:(0,F.jsx)(pj.A,{})})}),p3=()=>{let{selectedRepo:e,items:t,loading:a,finishedFetchingRepoItems:r,selectAllItems:n,areAllItemsSelected:i,searchQuery:l,MAX_ITEM_NUM:s}=mH(),{projectOwner:o,isOrganization:d}=eU(),u=o?.name?.toLowerCase();return(0,F.jsx)(lx.A,{sx:p0,...(0,ey.G)("side-panel-suggested-items"),children:a?(0,F.jsx)(p5,{}):t?.length===0&&r&&e?(0,F.jsx)(p1,{hasSearchInput:!!l}):e?(0,F.jsxs)("div",{children:[(0,F.jsxs)(lx.A,{...(0,ey.G)("selection-all-items"),sx:{display:"flex",borderBottom:"1px solid",borderColor:"border.default",paddingBottom:2,paddingTop:3,justifyContent:"space-between"},children:[(0,F.jsxs)(lx.A,{sx:{display:"flex"},children:[(0,F.jsx)(lx.A,{as:"label",sx:{pl:1,pr:"10px"},children:(0,F.jsx)(pC.A,{"aria-label":i?"Deselect all items":"Select all items",checked:i,onChange:n,className:pS.Checkbox})}),(0,F.jsx)("span",{children:i?"Deselect all items":"Select all items"})]}),t?.length===s&&(0,F.jsxs)(lv.A,{...(0,ey.G)("side-panel-suggested-items-recent-count"),sx:{fontSize:0,color:"fg.muted"},children:["Showing ",s," most recent items"]})]}),(0,F.jsx)("ul",{children:t?.map(t=>{let a=e.nameWithOwner;return F.jsx(pY,{item:t,keyName:`${e.nameWithOwner}-${t.number}`,url:t.type===eJ.PullRequest?`/${a}/pull/${t.number}`:`/${a}/issues/${t.number}`},`${e.nameWithOwner}-${t.number}`)})}),(0,F.jsxs)(lv.A,{...(0,ey.G)("side-panel-suggested-items-footer"),sx:{color:"fg.muted",display:"block",textAlign:"center",paddingTop:4,paddingBottom:4},children:["Showing ",t?.length," most recent ",t?.length===1?"item":"items"," that"," ",t?.length===1?"has":"have"," not been added to this project",t&&t?.length>1&&". Use search to narrow down this list."]})]}):(0,F.jsx)(p2,{owner:u,isOrganization:d})})};try{p1.displayName||(p1.displayName="NoSuggestedItems")}catch{}try{p2.displayName||(p2.displayName="NoSuggestedRepos")}catch{}try{p5.displayName||(p5.displayName="Loader")}catch{}try{p3.displayName||(p3.displayName="ItemSuggestionsList")}catch{}var p4=a(55847),p6=a(81679);function p8(e){return(0,nk.M)(e).current}let p7=/is:issues?,prs?|is:prs?,issues?/gi,p9=/is:issue/gi,he=/is:pr/gi,ht=/\s*assignee:(.*,)?("?(@me)"?)(,\S)*/gi,ha=RegExp("\\s*assignee:(?<assignees>[^\\s+]*)\\s*","i"),hr=/[@|\s]/g,hn=/is:(\S+)/gi,hi=/issues?/,hl=/prs?/,hs="issue",ho=[m6.Issue,m6.PullRequest],hd=e=>{let{loggedInUser:t}=eU();if(t?.login){let a=[...e.matchAll(ht)];if(a.length){let[r,n,i,l]=a[0];e=e.replace(n?i:l?i:r,t.login)}}let a=e.match(ha);if(a&&a.groups?.assignees){let t=a.groups.assignees,r=[...new Set(t.toLowerCase().replace(hr,"").split(","))].join(",");return e.replace(t,r)}return e},hu=e=>hg(hd(e)).trim(),hc=e=>{let t=hg(e);return t.match(p9)?[m6.Issue]:t.match(he)?[m6.PullRequest]:ho},hm=(e,t)=>{if(hp(t)&&!e.match(p7))return`is:issue,pr ${e}`;if(1===t.length){if(t[0]===m6.Issue&&!e.match(hi))return`is:issue ${e}`;if(t[0]===m6.PullRequest&&!e.match(hl))return`is:pr ${e}`}return e},hp=e=>!(!e||e?.length<ho.length)&&ho.every(t=>e.includes(t)),hh=e=>e.match(hi)?hs:e.match(hl)?"pr":e,hf=e=>{let t=new Set(e.split(",").map(e=>hh(e))),a="";return t.has(hs)&&(t.delete(hs),a="is:issue"),t.has("pr")&&(t.delete("pr"),a=0===a.length?"is:pr":""),t.size>0?`${a} is:${Array.from(t.values()).join(",")}`.trim():a},hg=e=>{let t=e;for(let[e,a]of[...t.matchAll(hn)])a&&(t=t.replace(e,hf(a)));return t},hy=(e,t)=>({title:n0.manualRunConfirmationTitle(e),content:(0,F.jsx)(p$,{children:n0.manualRunConfirmationMessage(e,t)}),confirmButtonContent:n0.manualRunConfirmationButton(e),confirmButtonType:"primary"}),hx=()=>{let e=(0,uX.S)();return(0,K.useCallback)(async({confirmationSource:t,onConfirm:a,count:r,onDismiss:n})=>{await e(hy(t,r))?await a():n?.()},[e])},hb=e=>{let{findColumnByDatabaseId:t}=ua(),{fieldOptionId:a,fieldId:r}=e.arguments,n=r?t(r):void 0,i=n&&"options"in n.settings?n.settings.options?.find(e=>e.id===a):void 0;return{column:n,selectedOption:i}},hv=()=>{let{hasWritePermissions:e}=eK();return{hasWorkflowWritePermission:e}},hw=(e,t)=>{let a=e.actions[0];(0,ee.A)(a,"defaultAction must exist");let{selectedOption:r}=hb(a),{hasWorkflowWritePermission:n}=hv(),{shouldDisableArchiveForActiveWorkflow:i}=mY();return(0,K.useMemo)(()=>{let l=a.actionType===m3.SetField,s=r?.nameHtml,o=0===t.length&&m9(e);return l&&!s||!n||i||o},[a.actionType,r?.nameHtml,t.length,e,n,i])},hj=(e,t,a)=>{let{workflowNames:r}=pb(),[n,i]=(0,K.useState)(e),[l,s]=(0,K.useState)(e.name),[o,d]=(0,K.useState)(()=>pu(e,r).isValid),[u,c]=(0,K.useState)(a),m=(0,K.useMemo)(()=>{if(e.triggerType===m5.ProjectItemColumnUpdate)return"";let t=e.actions.find(e=>"string"==typeof e.arguments.query)?.arguments.query;return"string"==typeof t?hm(t,e.contentTypes):""},[e.actions,e.contentTypes,e.triggerType]),p=(0,K.useMemo)(()=>e.actions.find(e=>e.arguments.repositoryId)?.arguments.repositoryId,[e]),[h,f]=(0,K.useState)(n.contentTypes),[g,y]=(0,K.useState)(m),[x,b]=(0,K.useState)(p),v=(0,K.useRef)(void 0),{updateWorkflowAndAction:w}=pb(),j=hw(n,g),C=hx(),I=(0,K.useCallback)(e=>{let t=n.actions.findIndex(t=>t.id===e.id),a=[...n.actions];a[t]=e,i({...n,actions:[...a]})},[n]),S=(0,K.useCallback)(()=>{e.triggerType===m5.QueryMatched&&(y(m),b(p))},[m,p,e.triggerType]),k=(0,K.useCallback)(()=>{i({...e}),f(e.contentTypes),s(e.name)},[e]),N=(0,K.useCallback)(()=>{c(!0)},[]),T=(0,K.useCallback)(()=>{c(!1)},[]),_=(0,K.useCallback)(()=>n.actions.map(e=>{switch(e.actionType){case m3.GetItems:return{...e,arguments:{...e.arguments,query:hu(g),repositoryId:x}};case m3.AddProjectItem:return{...e,arguments:{...e.arguments,repositoryId:x}};case m3.GetProjectItems:return{...e,arguments:{...e.arguments,query:g}};default:return e}}),[g,x,n.actions]),A=(0,K.useCallback)(async e=>{let t=e?_():n.actions;await w({...n,name:l.trim(),contentTypes:[...h],enabled:e},[...t])},[h,_,w,n,l]),R=uN({request:(0,K.useCallback)(async e=>{await w({...n,name:e.trim()},n.actions)},[w,n])}),P=uN({request:A}),D=(0,K.useCallback)(async e=>{await R.perform(e)},[R]),E=(0,K.useCallback)(async(e=!0)=>{let a=!1;m9(n)&&t>0&&e?await C({count:t,confirmationSource:pl.enable,onConfirm:async()=>await P.perform(e),onDismiss:()=>{a=!0}}):await P.perform(e),"succeeded"!==P.status.current.status||a||c(!1)},[t,P,C,n]);return(0,K.useEffect)(()=>{u||(k(),S())},[S,k,u]),(0,K.useEffect)(()=>{let e=_();d(pu({...n,actions:e}).isValid)},[_,n]),{localContentTypes:h,setLocalContentTypes:f,localQuery:g,setLocalQuery:y,localRepositoryId:x,setLocalRepositoryId:b,workflowName:l,setWorkflowName:s,isEditing:u,setIsEditing:c,edit:N,discard:T,save:E,saveNameChange:D,saveWorkflowChanges:v,shouldDisableWorkflowToggle:j,workflow:n,setWorkflow:i,replaceAction:I,initialQuery:m,initialRepositoryId:p,isWorkflowValid:o,setIsWorkflowValid:d}},hC=(0,K.createContext)(null),hI=({children:e,initialWorkflow:t,startInEditMode:a})=>{let[r,n]=(0,K.useState)(0),{localContentTypes:i,setLocalContentTypes:l,localQuery:s,setLocalQuery:o,localRepositoryId:d,setLocalRepositoryId:u,workflowName:c,setWorkflowName:m,isEditing:p,setIsEditing:h,edit:f,discard:g,save:y,saveNameChange:x,saveWorkflowChanges:b,shouldDisableWorkflowToggle:v,workflow:w,setWorkflow:j,replaceAction:C,initialQuery:I,initialRepositoryId:S,isWorkflowValid:k,setIsWorkflowValid:N}=hj(t,r,a);return(0,F.jsx)(hC.Provider,{value:(0,K.useMemo)(()=>({filterCount:r,setFilterCount:n,localContentTypes:i,shouldDisableWorkflowToggle:v,setLocalContentTypes:l,localQuery:s,setLocalQuery:o,saveWorkflowChanges:b,isEditing:p,setIsEditing:h,edit:f,discard:g,save:y,saveNameChange:x,workflow:w,setWorkflow:j,replaceAction:C,localRepositoryId:d,setLocalRepositoryId:u,workflowName:c,setWorkflowName:m,initialQuery:I,initialRepositoryId:S,isWorkflowValid:k,setIsWorkflowValid:N}),[r,i,v,l,s,o,b,p,h,f,g,y,x,w,j,C,d,u,c,m,I,S,k,N]),children:e})};try{hC.displayName||(hC.displayName="AutomationGraphContext")}catch{}try{hI.displayName||(hI.displayName="AutomationGraphStateProvider")}catch{}let hS=()=>{let e=(0,K.useContext)(hC);if(!e)throw Error("useAutomationGraph must be used within an AutomationGraphStateProvider");return e},hk=({icon:e=ly.AlertIcon,heading:t,content:a,children:r,headingAs:n="h2",...i})=>(0,F.jsxs)(pI,{...i,children:[(0,F.jsx)(lw.A,{icon:e,size:30,sx:{color:"fg.muted"}}),(0,F.jsx)(lv.A,{as:n,sx:{mt:3},children:t}),(0,F.jsx)(lv.A,{as:"p",sx:{color:"fg.muted"},children:a}),r]});try{hk.displayName||(hk.displayName="BlankslateErrorMessage")}catch{}let ErrorBoundary=class ErrorBoundary extends K.Component{static getDerivedStateFromError(e){return{error:e}}componentDidCatch(e){setTimeout(()=>{throw e})}render(){return this.state.error?this.props.fallback:this.props.children}constructor(e){super(e),this.state={error:null}}};let hN=({endpointPosition:e,workflow:t})=>{let a="top"===e?"to bottom":"to top";return(0,F.jsx)(lx.A,{sx:{width:"14px",height:"14px",borderRadius:"50%",marginTop:"top"===e?"-8px":"0px",marginBottom:"bottom"===e?"-8px":"0px",position:"relative",zIndex:1,backgroundImage:e=>`linear-gradient(${a}, ${e.colors.canvas.default} 50%, ${e.colors.border.default} 50%, ${e.colors.border.default})`,"&::before":{content:'""',position:"absolute",top:"1px",left:"1px",width:"12px",height:"12px",backgroundColor:"canvas.default",borderRadius:"50%"},"&::after":{content:'""',position:"absolute",top:"4px",left:"4px",width:"6px",height:"6px",backgroundColor:t.enabled?"accent.emphasis":"border.default",borderRadius:"50%",transition:"background-color 0.3s ease-out"}}})},hT=()=>{let{workflow:e}=hS();return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(hN,{workflow:e,endpointPosition:"top"}),(0,F.jsx)(lx.A,{sx:{height:"30px",width:"0",borderColor:e.enabled?"accent.muted":"border.muted",borderLeftWidth:"2px",borderStyle:"solid",borderRight:"none",transition:"border-color 0.3s ease-out"}}),(0,F.jsx)(hN,{workflow:e,endpointPosition:"bottom"})]})};try{hN.displayName||(hN.displayName="ConnectorEndpoint")}catch{}try{hT.displayName||(hT.displayName="Connector")}catch{}var h_=a(84217);let hA=({icon:e,iconBg:t,iconColor:a,headerDescription:r,children:n,...i})=>(0,F.jsx)(lx.A,{sx:{borderStyle:"solid",borderWidth:"1px",borderColor:"border.subtle",borderRadius:2,backgroundColor:"canvas.default",width:"100%",transition:"border-color 0.3s ease-out",boxShadow:"shadow.medium"},...(0,ey.G)("automation-block"),...i,children:(0,F.jsxs)(lx.A,{sx:{display:"flex",flexDirection:"column"},children:[(0,F.jsxs)(lx.A,{sx:{p:3,display:"flex",alignItems:"center",borderBottom:n?"1px solid":"none",borderBottomColor:"border.subtle"},children:[e&&(0,F.jsx)(lx.A,{sx:{bg:t,borderRadius:"4px",p:1,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:(0,F.jsx)(lw.A,{icon:e,sx:{color:a}})}),r&&(0,F.jsx)(h_.A,{as:"h3",sx:{fontSize:1,color:"fg.default",ml:2},children:r})]}),n?(0,F.jsx)(lx.A,{sx:{display:"flex",flexWrap:"wrap",flex:"auto",alignItems:"center",m:3},children:n}):null]})});try{hA.displayName||(hA.displayName="AutomationBlock")}catch{}let hR=({headerDescription:e=n0.addItemBlockLabel})=>(0,F.jsx)(hA,{icon:ly.PlusIcon,iconBg:"success.subtle",iconColor:"success.fg",headerDescription:e,...(0,ey.G)("automation-add-item-block")});try{hR.displayName||(hR.displayName="AddItemBlock")}catch{}let hP=()=>(0,F.jsx)(hA,{icon:ly.ArchiveIcon,iconBg:"attention.subtle",iconColor:"attention.fg",headerDescription:n0.archiveItemLabel,...(0,ey.G)("automation-archive-block")});try{hP.displayName||(hP.displayName="ArchiveBlock")}catch{}let hD=()=>(0,F.jsx)(hA,{icon:ly.SkipIcon,iconBg:"done.subtle",iconColor:"done.fg",headerDescription:n0.closeItemBlockLabel,...(0,ey.G)("automation-close-block")});try{hD.displayName||(hD.displayName="CloseItemBlock")}catch{}var hE=a(34407),hM=a(73451);async function hB({repositoryId:e,query:t,memexNumber:a}){let r=new URL(nP("count-issues-and-pulls-api-data").url,window.location.origin);r.searchParams.set("repositoryId",`${e}`),r.searchParams.set("q",t),r.searchParams.set("memexNumber",`${a}`);let{data:n}=await ig(r);return n}let hL=()=>{let[e,t]=(0,K.useState)(),[a,r]=(0,K.useState)(0),[n,i]=(0,K.useState)(""),l=(0,K.useRef)(void 0),{localQuery:s,setLocalRepositoryId:o,setLocalQuery:d,setLocalContentTypes:u}=hS(),{projectNumber:c}=mw(),{projectOwner:m}=eU(),p=(0,K.useMemo)(()=>`-project:${m?.login}/${c}`,[c,m]),h=uN({request:(0,K.useCallback)(e=>hB(e),[])}),f=(0,K.useCallback)(async(e,t)=>{if(e){await h.perform({repositoryId:e.id,query:t,memexNumber:c});let{data:a,status:n}=h.status.current;"succeeded"===n&&a&&r(a.count)}},[h,c]),g=(0,K.useCallback)((e,t)=>{let a=hu(t);f(e,a),i(`${e.url}/issues?q=${encodeURIComponent(`${p} ${a}`)}`)},[f,p]);return{count:a,searchResultUrl:n,onSearchQueryChange:(0,K.useCallback)(t=>{d(t),l.current&&l.current.cancel(),l.current=(0,nN.A)(()=>{e&&(g(e,t),u(hc(t)))},200),l.current()},[d,e,g,u]),onRepositoryChange:(0,K.useCallback)(e=>{g(e,s),t(e),o(e.id)},[s,o,g]),repository:e}};var hF=a(90495),hO=a(3830);async function hG({query:e,onlyWithIssueTypes:t,milestone:a}){let r=new URL(nP("search-repositories-api-data").url,window.location.origin);r.searchParams.set("q",e),t&&r.searchParams.append("with_issue_types","true"),a&&r.searchParams.append("milestone",a);let{data:n}=await ig(r);return n}let hV=({repository:e,...t})=>e.isArchived?(0,F.jsx)(lw.A,{icon:ly.ArchiveIcon,"aria-label":"Archived repository",...t}):e.isForked?(0,F.jsx)(lw.A,{icon:ly.RepoForkedIcon,"aria-label":"Forked repository",...t}):e.isPublic?(0,F.jsx)(lw.A,{icon:ly.RepoIcon,"aria-label":"Public repository",...t}):(0,F.jsx)(lw.A,{icon:ly.LockIcon,"aria-label":"Private repository",...t});try{hV.displayName||(hV.displayName="RepositoryIcon")}catch{}let h$=({targetRepositoryId:e,isEditing:t,onRepositorySelected:a,onNoSuggestedRepositories:r,sx:n})=>{let i=(0,K.useRef)(null),l=(0,K.useRef)(null),[s,o]=(0,K.useState)(""),[d,u]=(0,K.useState)(!1),[c,m]=(0,K.useState)(!1),[p,h]=(0,K.useState)(void 0),[f,g]=(0,K.useState)([]),[y,x]=(0,K.useState)([]),b=(0,K.useRef)(void 0),{suggestRepositories:v}=mk(),w=(0,K.useRef)(y),j=(0,K.useRef)(0),C=(0,K.useRef)(!1);(0,hF.r)({restoreFocusOnCleanUp:!0,initialFocusRef:i,containerRef:l});let I=(0,K.useCallback)(()=>{u(!1)},[]),S=(0,K.useCallback)(async()=>{if(w.current.length||C.current)return;C.current=!0,m(!0);let t=await v({repositoryId:e});j.current+=1,t&&(w.current=t),t&&x(t),C.current=!1,m(!1)},[v,e]),k=(0,K.useCallback)(e=>(""!==s?f:y).find(t=>t.id===e),[s,f,y]),N=(0,K.useCallback)(()=>{let t=y.find(t=>t.id===e)||y[0];t&&(h({id:t.id,text:t.name,leadingVisual:()=>hV({repository:t})}),a(t))},[y,e,a]);(0,K.useEffect)(()=>{p||N()},[N,p]),(0,K.useEffect)(()=>{p?.id!==e&&N()},[N,p?.id,e]),(0,K.useEffect)(()=>{!C.current&&(0===j.current?S():e&&!y.find(t=>t.id===e)&&j.current<2?(w.current=[],S()):0===w.current.length&&r&&r())},[S,r,y,e]);let T=(0,K.useCallback)(async e=>{if(""!==e){m(!0);let{repositories:t}=await hG({query:e});g(t),m(!1)}else g(y??[])},[y]),_=(0,K.useCallback)(e=>{b.current&&b.current.cancel(),b.current=(0,nN.A)(()=>T(e),200),b.current()},[T]),A=e=>{if(e?.id){let t=k(e.id);t&&(h({id:t.id,text:t.name,leadingVisual:()=>hV({repository:t})}),a(t))}},R=(""!==s?f:y).map(e=>{let{projectOwner:t}=eU(),a=e.nameWithOwner.split("/")[0],r=a?.toLowerCase()!==t?.login.toLowerCase()?e.nameWithOwner:e.name;return{...e,text:r,leadingVisual:()=>hV({repository:e}),selectionVariant:"single",descriptionVariant:"block",selected:void 0,onAction:(t,a)=>{a.preventDefault(),A(e),I()}}});return(0,F.jsx)(F.Fragment,{children:y.length>0?(0,F.jsx)(hO.X,{placeholderText:nH.repoPickerFilterPlaceholder,open:d,renderAnchor:({children:e,...a})=>(0,F.jsx)(p4.Q,{sx:n,disabled:!p||!t,leadingVisual:p?.leadingVisual,trailingVisual:ly.TriangleDownIcon,...a,...(0,ey.G)("repo-suggestions-button"),children:e||"Select Repo"}),onOpenChange:e=>u(e),loading:c,selected:p,filterValue:s,items:R,showItemDividers:!0,onFilterChange:e=>{o(e),_(e)},onSelectedChange:A,overlayProps:{width:"small",onMouseDown:e=>e.stopPropagation(),height:"auto",onClickOutside:I,...(0,ey.G)("repo-picker-repo-list")}}):(0,F.jsx)(hE.O,{variant:"rounded",width:"138px",height:"32px"})})};h$.displayName="RepositoryPicker";let hW=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"owner"},{defaultValue:null,kind:"LocalArgument",name:"repo"}],t=[{kind:"Variable",name:"name",variableName:"repo"},{kind:"Variable",name:"owner",variableName:"owner"}],a=[{kind:"Literal",name:"first",value:100}],r={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"searchInputLabelSuggestionsQuery",selections:[{alias:null,args:t,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"searchInputLabelSuggestionsPaginated"}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"searchInputLabelSuggestionsQuery",selections:[{alias:null,args:t,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[{alias:null,args:a,concreteType:"LabelConnection",kind:"LinkedField",name:"labels",plural:!1,selections:[{alias:null,args:null,concreteType:"LabelEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"Label",kind:"LinkedField",name:"node",plural:!1,selections:[r,{alias:null,args:null,kind:"ScalarField",name:"color",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"nameHTML",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cursor",storageKey:null},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"__id",storageKey:null}]}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"totalCount",storageKey:null},{alias:null,args:null,concreteType:"PageInfo",kind:"LinkedField",name:"pageInfo",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"endCursor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hasNextPage",storageKey:null}],storageKey:null}],storageKey:"labels(first:100)"},{alias:null,args:a,filters:null,handle:"connection",key:"Repository_labels",kind:"LinkedHandle",name:"labels"},r],storageKey:null}]},params:{id:"0afc284c83cca58f2326e10aab586ccf",metadata:{},name:"searchInputLabelSuggestionsQuery",operationKind:"query",text:null}}}();hW.hash="a97cc6ad8f70cca9b8f704109d9f0319";let hz=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"owner"},{defaultValue:null,kind:"LocalArgument",name:"repo"}],t=[{kind:"Variable",name:"name",variableName:"repo"},{kind:"Variable",name:"owner",variableName:"owner"}],a=[{kind:"Literal",name:"first",value:100}],r={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"searchInputMilestoneSuggestionsQuery",selections:[{alias:null,args:t,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"searchInputMilestoneSuggestionsPaginated"}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"searchInputMilestoneSuggestionsQuery",selections:[{alias:null,args:t,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[{alias:null,args:a,concreteType:"MilestoneConnection",kind:"LinkedField",name:"milestones",plural:!1,selections:[{alias:null,args:null,concreteType:"MilestoneEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"Milestone",kind:"LinkedField",name:"node",plural:!1,selections:[r,{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"closed",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cursor",storageKey:null},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"__id",storageKey:null}]}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"totalCount",storageKey:null},{alias:null,args:null,concreteType:"PageInfo",kind:"LinkedField",name:"pageInfo",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"endCursor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hasNextPage",storageKey:null}],storageKey:null}],storageKey:"milestones(first:100)"},{alias:null,args:a,filters:null,handle:"connection",key:"Repository_milestones",kind:"LinkedHandle",name:"milestones"},r],storageKey:null}]},params:{id:"2ae90bb1622608a706e5a01daaf35d30",metadata:{},name:"searchInputMilestoneSuggestionsQuery",operationKind:"query",text:null}}}();hz.hash="2b30d6dbe062dd2d42ee7353b2f5ca0b";let hH=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"owner"},{defaultValue:null,kind:"LocalArgument",name:"repo"}],t=[{kind:"Variable",name:"name",variableName:"repo"},{kind:"Variable",name:"owner",variableName:"owner"}],a=[{kind:"Literal",name:"first",value:10}],r={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"searchInputIssueTypeSuggestionsQuery",selections:[{alias:null,args:t,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"searchInputIssueTypeSuggestionsPaginated"}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"searchInputIssueTypeSuggestionsQuery",selections:[{alias:null,args:t,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[{alias:null,args:a,concreteType:"IssueTypeConnection",kind:"LinkedField",name:"issueTypes",plural:!1,selections:[{alias:null,args:null,concreteType:"IssueTypeEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"IssueType",kind:"LinkedField",name:"node",plural:!1,selections:[r,{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isEnabled",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cursor",storageKey:null},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"__id",storageKey:null}]}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"totalCount",storageKey:null},{alias:null,args:null,concreteType:"PageInfo",kind:"LinkedField",name:"pageInfo",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"endCursor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hasNextPage",storageKey:null}],storageKey:null}],storageKey:"issueTypes(first:10)"},{alias:null,args:a,filters:null,handle:"connection",key:"Repository_issueTypes",kind:"LinkedHandle",name:"issueTypes"},r],storageKey:null}]},params:{id:"50a67b4e0efa32c2050a70583a9be82c",metadata:{},name:"searchInputIssueTypeSuggestionsQuery",operationKind:"query",text:null}}}();hH.hash="455622ff182f225325d5fe6255345e8e";let hU=function(){var e=[{defaultValue:100,kind:"LocalArgument",name:"count"},{defaultValue:null,kind:"LocalArgument",name:"cursor"},{defaultValue:null,kind:"LocalArgument",name:"id"}],t=[{kind:"Variable",name:"id",variableName:"id"}],a={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},n=[{kind:"Variable",name:"after",variableName:"cursor"},{kind:"Variable",name:"first",variableName:"count"}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"searchInputLabelSuggestionsPaginationQuery",selections:[{alias:null,args:t,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{args:[{kind:"Variable",name:"count",variableName:"count"},{kind:"Variable",name:"cursor",variableName:"cursor"}],kind:"FragmentSpread",name:"searchInputLabelSuggestionsPaginated"}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"searchInputLabelSuggestionsPaginationQuery",selections:[{alias:null,args:t,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[a,r,{kind:"InlineFragment",selections:[{alias:null,args:n,concreteType:"LabelConnection",kind:"LinkedField",name:"labels",plural:!1,selections:[{alias:null,args:null,concreteType:"LabelEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"Label",kind:"LinkedField",name:"node",plural:!1,selections:[r,{alias:null,args:null,kind:"ScalarField",name:"color",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"nameHTML",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},a],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cursor",storageKey:null},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"__id",storageKey:null}]}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"totalCount",storageKey:null},{alias:null,args:null,concreteType:"PageInfo",kind:"LinkedField",name:"pageInfo",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"endCursor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hasNextPage",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:n,filters:null,handle:"connection",key:"Repository_labels",kind:"LinkedHandle",name:"labels"}],type:"Repository",abstractKey:null}],storageKey:null}]},params:{id:"a070d1f6d4a1baeb814107011a04e7ff",metadata:{},name:"searchInputLabelSuggestionsPaginationQuery",operationKind:"query",text:null}}}();hU.hash="7b63f86539c0fac47a54ef3bde3c41e8";let hq=function(){var e=["labels"],t={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{argumentDefinitions:[{defaultValue:100,kind:"LocalArgument",name:"count"},{defaultValue:null,kind:"LocalArgument",name:"cursor"}],kind:"Fragment",metadata:{connection:[{count:"count",cursor:"cursor",direction:"forward",path:e}],refetch:{connection:{forward:{count:"count",cursor:"cursor"},backward:null,path:e},fragmentPathInResult:["node"],operation:hU,identifierInfo:{identifierField:"id",identifierQueryVariableName:"id"}}},name:"searchInputLabelSuggestionsPaginated",selections:[{alias:"labels",args:null,concreteType:"LabelConnection",kind:"LinkedField",name:"__Repository_labels_connection",plural:!1,selections:[{alias:null,args:null,concreteType:"LabelEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"Label",kind:"LinkedField",name:"node",plural:!1,selections:[{kind:"InlineDataFragmentSpread",name:"searchInputLabel",selections:[t,{alias:null,args:null,kind:"ScalarField",name:"color",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"nameHTML",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null}],args:null,argumentDefinitions:[]},{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cursor",storageKey:null},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"__id",storageKey:null}]}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"totalCount",storageKey:null},{alias:null,args:null,concreteType:"PageInfo",kind:"LinkedField",name:"pageInfo",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"endCursor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hasNextPage",storageKey:null}],storageKey:null}],storageKey:null},t],type:"Repository",abstractKey:null}}();hq.hash="7b63f86539c0fac47a54ef3bde3c41e8";let hK=function(){var e=[{defaultValue:100,kind:"LocalArgument",name:"count"},{defaultValue:null,kind:"LocalArgument",name:"cursor"},{defaultValue:null,kind:"LocalArgument",name:"id"}],t=[{kind:"Variable",name:"id",variableName:"id"}],a={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},n=[{kind:"Variable",name:"after",variableName:"cursor"},{kind:"Variable",name:"first",variableName:"count"}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"searchInputMilestoneSuggestionsPaginationQuery",selections:[{alias:null,args:t,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{args:[{kind:"Variable",name:"count",variableName:"count"},{kind:"Variable",name:"cursor",variableName:"cursor"}],kind:"FragmentSpread",name:"searchInputMilestoneSuggestionsPaginated"}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"searchInputMilestoneSuggestionsPaginationQuery",selections:[{alias:null,args:t,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[a,r,{kind:"InlineFragment",selections:[{alias:null,args:n,concreteType:"MilestoneConnection",kind:"LinkedField",name:"milestones",plural:!1,selections:[{alias:null,args:null,concreteType:"MilestoneEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"Milestone",kind:"LinkedField",name:"node",plural:!1,selections:[r,{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"closed",storageKey:null},a],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cursor",storageKey:null},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"__id",storageKey:null}]}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"totalCount",storageKey:null},{alias:null,args:null,concreteType:"PageInfo",kind:"LinkedField",name:"pageInfo",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"endCursor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hasNextPage",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:n,filters:null,handle:"connection",key:"Repository_milestones",kind:"LinkedHandle",name:"milestones"}],type:"Repository",abstractKey:null}],storageKey:null}]},params:{id:"3c21c80d26e4d260a8591b064eebf9fe",metadata:{},name:"searchInputMilestoneSuggestionsPaginationQuery",operationKind:"query",text:null}}}();hK.hash="6a182a85da1b4aaa57c5958db49d2080";let hQ=function(){var e=["milestones"],t={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{argumentDefinitions:[{defaultValue:100,kind:"LocalArgument",name:"count"},{defaultValue:null,kind:"LocalArgument",name:"cursor"}],kind:"Fragment",metadata:{connection:[{count:"count",cursor:"cursor",direction:"forward",path:e}],refetch:{connection:{forward:{count:"count",cursor:"cursor"},backward:null,path:e},fragmentPathInResult:["node"],operation:hK,identifierInfo:{identifierField:"id",identifierQueryVariableName:"id"}}},name:"searchInputMilestoneSuggestionsPaginated",selections:[{alias:"milestones",args:null,concreteType:"MilestoneConnection",kind:"LinkedField",name:"__Repository_milestones_connection",plural:!1,selections:[{alias:null,args:null,concreteType:"MilestoneEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"Milestone",kind:"LinkedField",name:"node",plural:!1,selections:[{kind:"InlineDataFragmentSpread",name:"searchInputMilestone",selections:[t,{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"closed",storageKey:null}],args:null,argumentDefinitions:[]},{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cursor",storageKey:null},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"__id",storageKey:null}]}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"totalCount",storageKey:null},{alias:null,args:null,concreteType:"PageInfo",kind:"LinkedField",name:"pageInfo",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"endCursor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hasNextPage",storageKey:null}],storageKey:null}],storageKey:null},t],type:"Repository",abstractKey:null}}();hQ.hash="6a182a85da1b4aaa57c5958db49d2080";let hJ=function(){var e=[{defaultValue:10,kind:"LocalArgument",name:"count"},{defaultValue:null,kind:"LocalArgument",name:"cursor"},{defaultValue:null,kind:"LocalArgument",name:"id"}],t=[{kind:"Variable",name:"id",variableName:"id"}],a={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},n=[{kind:"Variable",name:"after",variableName:"cursor"},{kind:"Variable",name:"first",variableName:"count"}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"searchInputIssueTypeSuggestionsPaginationQuery",selections:[{alias:null,args:t,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{args:[{kind:"Variable",name:"count",variableName:"count"},{kind:"Variable",name:"cursor",variableName:"cursor"}],kind:"FragmentSpread",name:"searchInputIssueTypeSuggestionsPaginated"}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"searchInputIssueTypeSuggestionsPaginationQuery",selections:[{alias:null,args:t,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[a,r,{kind:"InlineFragment",selections:[{alias:null,args:n,concreteType:"IssueTypeConnection",kind:"LinkedField",name:"issueTypes",plural:!1,selections:[{alias:null,args:null,concreteType:"IssueTypeEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"IssueType",kind:"LinkedField",name:"node",plural:!1,selections:[r,{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isEnabled",storageKey:null},a],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cursor",storageKey:null},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"__id",storageKey:null}]}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"totalCount",storageKey:null},{alias:null,args:null,concreteType:"PageInfo",kind:"LinkedField",name:"pageInfo",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"endCursor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hasNextPage",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:n,filters:null,handle:"connection",key:"Repository_issueTypes",kind:"LinkedHandle",name:"issueTypes"}],type:"Repository",abstractKey:null}],storageKey:null}]},params:{id:"38e455016558697be1cf8632ea2adaaa",metadata:{},name:"searchInputIssueTypeSuggestionsPaginationQuery",operationKind:"query",text:null}}}();hJ.hash="ef89fbe97f30e2ba4545cbadf62f91e7";let hX=function(){var e=["issueTypes"],t={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{argumentDefinitions:[{defaultValue:10,kind:"LocalArgument",name:"count"},{defaultValue:null,kind:"LocalArgument",name:"cursor"}],kind:"Fragment",metadata:{connection:[{count:"count",cursor:"cursor",direction:"forward",path:e}],refetch:{connection:{forward:{count:"count",cursor:"cursor"},backward:null,path:e},fragmentPathInResult:["node"],operation:hJ,identifierInfo:{identifierField:"id",identifierQueryVariableName:"id"}}},name:"searchInputIssueTypeSuggestionsPaginated",selections:[{alias:"issueTypes",args:null,concreteType:"IssueTypeConnection",kind:"LinkedField",name:"__Repository_issueTypes_connection",plural:!1,selections:[{alias:null,args:null,concreteType:"IssueTypeEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"IssueType",kind:"LinkedField",name:"node",plural:!1,selections:[{kind:"InlineDataFragmentSpread",name:"searchInputIssueType",selections:[t,{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isEnabled",storageKey:null}],args:null,argumentDefinitions:[]},{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cursor",storageKey:null},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"__id",storageKey:null}]}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"totalCount",storageKey:null},{alias:null,args:null,concreteType:"PageInfo",kind:"LinkedField",name:"pageInfo",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"endCursor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hasNextPage",storageKey:null}],storageKey:null}],storageKey:null},t],type:"Repository",abstractKey:null}}();hX.hash="ef89fbe97f30e2ba4545cbadf62f91e7";let hY=({offsetWidth:e,offsetHeight:t,clientWidth:a,clientHeight:r})=>({offsetWidth:e,offsetHeight:t,clientWidth:a,clientHeight:r});function hZ(e){let t=(0,K.useRef)({}),{memex_small_viewport_a11y:a}=iz(),r=(0,K.useCallback)(t=>{if(!e)return()=>void 0;let r=new ResizeObserver(()=>a?requestAnimationFrame(t):t());return r.observe(e),()=>{r.unobserve(e),r.disconnect()}},[e,a]);return(0,K.useSyncExternalStore)(r,()=>{if(!e)return t.current;let a=hY(e);return(0,ut.A)(a,t.current)?t.current:(t.current=a,a)})}let h0={None:"none",ColumnOnly:"column-only",ColumnAndValues:"column-and-values"},h1=e=>"last-updated"===e||"updated"===e,h2=[];function h5(){let{allColumns:e}=i5(),t=(0,K.useMemo)(()=>nu(e),[e]);return{findFilterableFieldByName:(0,K.useCallback)(e=>t.get(nm(e)),[t])}}var h3=a(62456),h4=a(30631);let h6=({color:e,sx:t,className:a})=>{let{bg:r,accent:n}=(0,ra.Wk)(e);return(0,F.jsx)(lx.A,{className:a,sx:{bg:r,borderColor:n,borderWidth:2,borderStyle:"solid",width:16,height:16,borderRadius:8,flexShrink:0,...t}})};try{h6.displayName||(h6.displayName="ColorDecorator")}catch{}function h8(e){return`${e.userName}/${e.repoName}#${e.number}`}let h7={Box:"use-search-filter-suggestions-module__Box--uN2Go",ColorDecorator:"use-search-filter-suggestions-module__ColorDecorator--LqZ82",Box_1:"use-search-filter-suggestions-module__Box_1--pQ8WS",Box_2:"use-search-filter-suggestions-module__Box_2--IkCXO",Truncate:"use-search-filter-suggestions-module__Truncate--EKfiy",Text:"use-search-filter-suggestions-module__Text--HUpFC",Box_3:"use-search-filter-suggestions-module__Box_3--O83Mg",Text_1:"use-search-filter-suggestions-module__Text_1--rdGxY",Truncate_1:"use-search-filter-suggestions-module__Truncate_1--pegpM",Text_2:"use-search-filter-suggestions-module__Text_2--uobb7",GitHubAvatar:"use-search-filter-suggestions-module__GitHubAvatar--qkUCr"},h9={UserDefined:0,SystemExclude:1,SystemNo:2,SystemHas:3,Me:4,PreviousIteration:5,NextIteration:6,CurrentIteration:7,TodayToken:7};function fe(e,t,a){for(let r of t){let t=r.columns;if(!t[e.id])continue;let n=t[e.id];n&&a(n)}}let ft=({color:e,nameHtml:t})=>(0,F.jsxs)("div",{className:h7.Box,children:[(0,F.jsx)(h6,{color:e,className:h7.ColorDecorator}),(0,F.jsx)(p$,{children:t})]}),fa=({color:e,nameHtml:t})=>(0,F.jsxs)("div",{className:h7.Box,children:[(0,F.jsx)(lx.A,{sx:{bg:`#${e}`,borderColor:`#${e}`},className:h7.Box_1}),(0,F.jsx)(p$,{children:t})]});function fr(e,t,a){for(let r of(t?.login&&e.set("@me",{value:"@me",priority:h9.Me}),a)){let t="reviewer"in r?r.reviewer.name:r.login,a="reviewer"in r?r.reviewer.avatarUrl:r.avatarUrl;e.set(t,{value:t,renderItem:()=>(0,F.jsxs)("div",{className:h7.Box_3,children:[(0,F.jsx)(h3.r,{loading:"lazy",alt:"",src:a,className:h7.GitHubAvatar}),(0,F.jsx)("span",{children:t})]})})}}try{ft.displayName||(ft.displayName="SingleSelectSuggestion")}catch{}try{fa.displayName||(fa.displayName="LabelSuggestion")}catch{}var fn=a(64515),fi=a(15385);let fl=(e="")=>{let t=(0,K.useId)();return e.trim()?`${e}:${t}`:t};function fs(e){let{originRef:t,contentRef:a,contentWidth:r,contentHeight:n}=e,i=e.alignment??{xAlign:void 0,yAlign:void 0,xOriginEdgeAlign:void 0,yOriginEdgeAlign:void 0,yTopOffset:12},l=r&&n,s=l||a.current,o=l,d=0,u=0;if(t.current&&s){let e=t.current.getBoundingClientRect(),s=parseInt(window.getComputedStyle(t?.current).getPropertyValue("margin-left")),c=l?{width:0,height:0}:a.current.getBoundingClientRect(),m={width:r??c.width,height:n??c.height};switch(o=m.width&&m.height,i.yAlign=function(e,t,a){let r=a.top,n=window.innerHeight-a.bottom,i={top:r>t.height,middle:r>t.height,bottom:n>t.height};return void 0!==e&&i[e]?e:i.bottom?"bottom":"top"}(i.yOriginEdgeAlign||i.yAlign,m,e),i.xAlign=function(e,t,a){let r=window.innerWidth-a.left<t.width,n={left:!r,center:!r,right:r};return void 0!==e&&n[e]?e:n.left?"left":"right"}(i.xOriginEdgeAlign||i.xAlign,m,e),i.xAlign){case"left":switch(i.xOriginEdgeAlign){case void 0:case"left":u=e.left;break;case"right":u=e.left+e.width-s}break;case"center":u=e.left+e.width/2;break;case"right":u=e.left-(m.width-e.width)}switch(i.yAlign){case"top":d=e.top-m.height+(i.yTopOffset??12);break;case"middle":d=e.top-m.height/2+(i.yTopOffset??12);break;case"bottom":d=e.top+e.height+4}}return{top:Math.round(d),left:Math.round(u),yAlign:i.yAlign,xAlign:i.xAlign,hasContentDimensions:o}}let fo=({inputRef:e,selectedIndex:t,getListItemId:a})=>{(0,K.useEffect)(()=>{let r=e.current;if(r){let e=a(t);-1!==t&&e?r.setAttribute("aria-activedescendant",e):r.removeAttribute("aria-activedescendant")}return()=>{r?.removeAttribute("aria-activedescendant")}},[e,t,a])};function fd(e,t,a){let r=a?.preventDefault??!0,n=a?.stopPropagation??!0;return(0,K.useCallback)(t=>{(!e||e&&e(t))&&(r&&t.preventDefault(),n&&t.stopPropagation())},[r,n,...t])}let fu=({children:e,id:t,onMount:a})=>{let r=(0,nk.M)(a),n=iW(()=>document.createElement("div"));return t&&n.current.setAttribute("id",t),(0,K.useEffect)(()=>{let e=n.current,t=document.getElementById("portal-root");return t?.appendChild(e),r.current&&r.current(),function(){t?.removeChild(e)}},[n,r]),(0,pN.createPortal)((0,F.jsx)(H.A,{display:"contents",children:e}),n.current)};try{fu.displayName||(fu.displayName="Portal")}catch{}let fc=e=>{let t={ref:e.selectedItemRef,onSelect:e.onSelect,id:e.id,"aria-selected":e.selected,active:e.selected,tabIndex:-1,...(0,ey.G)(e.testId)};return e.renderItem?(0,F.jsx)(fi.l.Item,{role:"option",...t,children:e.renderItem()}):e.asHTML?(0,F.jsx)(fi.l.Item,{role:"option",...t,children:(0,F.jsx)(p$,{children:e.value})}):(0,F.jsx)(fi.l.Item,{role:"option",...t,children:e.value})};fc.displayName="SuggestionsListItem";let fm=e=>{let[t,a]=(0,K.useState)(0),{items:r,controllingElementRef:n,inputRef:i}=e;fo({inputRef:i??n,selectedIndex:t,getListItemId:(0,K.useCallback)(e=>r[e]?.testId,[r])}),(0,K.useEffect)(()=>{a(0)},[r.length]);let l=(0,K.useCallback)(()=>{a(e=>null==e||e+1===r.length?0:e+1)},[r.length]),s=(0,K.useCallback)(()=>{a(e=>null==e||0===e?r.length-1:e-1)},[r.length]);(0,pk.N)(()=>{d.current?.scrollIntoView({behavior:"smooth",block:"nearest",inline:"nearest"})},[t]);let o=fd(e=>{switch(e.key){case"ArrowDown":return l(),!0;case"ArrowUp":return s(),!0;case"Enter":if(r.length)return r[t]?.onSelect(),!0;return!1;default:return!1}},[r,l,s,t],void 0);(0,K.useEffect)(()=>(window.addEventListener("keydown",o),()=>{window.removeEventListener("keydown",o)}),[o]);let d=(0,K.useRef)(null),u=fl("__omnibarPortalRoot__");return r.length>0?(0,F.jsx)(fu,{id:u,children:(0,F.jsx)(fh,{items:r,controllingElementRef:e.controllingElementRef,listRef:e.listRef,selectedItemIndex:t,selectedItemRef:d,xAlign:e.xAlign,xOriginEdgeAlign:e.xOriginEdgeAlign,testId:e.testId,style:e.style})}):null},fp={position:"absolute",width:"300px",maxHeight:"220px",zIndex:200,overflowY:"auto",overflowX:"hidden",m:0,ml:"22px",py:2,pr:0,pl:1,listStyle:"none",bg:"canvas.overlay",borderRadius:"12px",boxShadow:"shadow.large"};function fh({items:e,controllingElementRef:t,listRef:a,selectedItemIndex:r,selectedItemRef:n,xAlign:i,xOriginEdgeAlign:l,testId:s,style:o}){let d=(0,K.useRef)(null);return(0,fn.T)(a,d),function({controllingElementRef:e,items:t,listRef:a,xAlign:r="left",xOriginEdgeAlign:n="right"}){(0,K.useEffect)(()=>{let{current:t}=a;if(!e.current||!t)return;let i=fs({originRef:e,contentRef:a,alignment:{xAlign:r,xOriginEdgeAlign:n}});t.style.top=`${i.top}px`,t.style.left=`${i.left}px`,t.style.transition="left 0.1s ease"},[e,t,a,r,n])}({controllingElementRef:t,items:e,listRef:d,xAlign:i,xOriginEdgeAlign:l}),(0,F.jsxs)("div",{role:"dialog","aria-label":"Filter suggestions",children:[(0,F.jsx)(fi.l,{sx:{...fp,...o},id:s,"aria-label":"Results",role:"listbox",ref:d,...(0,ey.G)(s),tabIndex:-1,children:e.map((e,t)=>(0,F.jsx)(fc,{id:e.testId,value:e.value,testId:e.testId,asHTML:e.asHTML,onSelect:e.onSelect,renderItem:e.renderItem,selected:r===t,selectedItemRef:r===t?n:null},t))}),(0,F.jsx)("span",{className:"sr-only",id:`${s}-feedback`,"aria-live":"polite","aria-atomic":"true",...(0,ey.G)(`${s}-feedback`),children:nH.resultCount(e.length)})]})}fm.displayName="SuggestionsList";let ff=[{name:"Filter by",icon:ly.FilterIcon}],fg=new Set(["title"]),fy=e=>!fg.has(e.name.toLowerCase());function fx(e){return`${ng(nm(e))}:`}let fb=(0,K.createContext)(null),fv=()=>{let e=(0,K.useContext)(fb);if(!e)throw Error("useFilterSuggestionsItemsContext can only be used inside a FilterSuggestionsItemsContext");return e},fw=/\b([\w-]+:\S+)/g,fj=/(?=(?:[^"]*"[^"]*")*[^"]*$)(?=(?:[^']*'[^']*')*[^']*$),/g,fC=/\s(?=(?:'[^']*'|[^'])*$)/g,fI=/\s(?=(?:"[^"]*"|[^"])*$)/g,fS=(0,K.memo)((0,K.forwardRef)(function({filterInputRef:e,query:t,areFilterSuggestionsVisible:a,setAreFilterSuggestionsVisible:r,setQuery:n,suggestColumns:i=!0,showColumnSuggestionIf:l,testId:s,anchorRef:o},d){let{items:u,repoSuggestions:c,issueTypeSuggestedNames:m}=fv(),{allColumns:p}=i5(),[h,f]=(0,K.useState)(null),{fieldFilters:g}=lh(),{findColumnByDatabaseId:y}=ua(),{findFilterableFieldByName:x}=h5(),{clientWidth:b}=hZ(o.current),v=(0,K.useMemo)(()=>({minWidth:"300px",width:b??"fit-content",marginLeft:0}),[b]),{activeWorkflow:w}=pb(),j=w&&!pe(w),{isKeywordQualifier:C}=i_(),I=(0,K.useMemo)(()=>p.filter(fy),[p]),{displayableColumns:S,displayableCommands:k,displayableKeywords:N}=function({query:e,columns:t,commands:a=h2,options:r={suggestColumns:!0}}){let{searchTokens:n}=(0,K.useMemo)(()=>nr(e),[e]),i=(0,K.useCallback)(e=>{let t="";if(n.length){let e=n[n.length-1];void 0!==e&&(t=e)}return ni(t)&&(t=t.substr(1)),!!(0===t.length||nm(e).startsWith(t.toLowerCase()))||!!ng(nm(e)).startsWith(t.toLowerCase())},[n]),l=(0,K.useMemo)(()=>a.filter(t=>!e||!!t.name.toLowerCase().startsWith(e.toLowerCase())),[a,e]),s=(0,K.useMemo)(()=>{let e=r.suggestColumns?t.filter(e=>i(e.name)):[];return void 0!==r.showColumnSuggestionIf&&(e=e.filter(e=>{let t=r.showColumnSuggestionIf?.(e.name);return t===h0.ColumnOnly||t===h0.ColumnAndValues})),e},[t,i,r]),{FilterKeywords:o}=i_(),d=(0,K.useMemo)(()=>{let e=o.map(e=>e.keyword);return r.suggestColumns?e:e.filter(e=>"no"!==e)},[o,r.suggestColumns]);return{displayableColumns:s,displayableCommands:l,displayableKeywords:(0,K.useMemo)(()=>d.filter(e=>i(e)),[i,d])}}({query:t,columns:I,commands:ff,options:{suggestColumns:i,showColumnSuggestionIf:l}}),{getSuggestionsForColumn:T}={getSuggestionsForColumn:(0,K.useCallback)((e,t,a,r)=>{let n=e.databaseId,i=function(e,t,a,r){let{loggedInUser:n}=eU(),i=new Map;if(!t)return i;switch(t.dataType){case eN.SingleSelect:for(let e of t.settings.options??[])i.set(e.name,{value:e.nameHtml,renderItem:()=>(0,F.jsx)(ft,{color:e.color,nameHtml:e.nameHtml})});return i;case eN.Number:{let a=new Set;for(let r of(fe(t,e,e=>{a.add(e.value)}),[...a].sort((e,t)=>e-t)))i.set(`${r}`,{value:`${r}`});return i}case eN.Iteration:{i.set(a5.Current,{value:a5.Current,priority:h9.CurrentIteration}),i.set(a5.Next,{value:a5.Next,priority:h9.NextIteration}),i.set(a5.Previous,{value:a5.Previous,priority:h9.PreviousIteration});let a=new Set;for(let r of(fe(t,e,e=>{a.add(e.id)}),aK(t)))a.has(r.id)&&i.set(r.title,{value:r.titleHtml});break}case eN.TrackedBy:fe(t,e,e=>{for(let t of e){let e=h8(t);i.set(e,{value:t.title,renderItem:()=>(0,F.jsxs)("div",{className:h7.Box_2,children:[(0,F.jsx)(pq,{state:t.state,type:"Issue",isDraft:!1}),(0,F.jsx)(h4.A,{title:t.title,className:h7.Truncate,children:t.title}),(0,F.jsx)("span",{className:h7.Text,children:e})]})})}});break;case eN.Assignees:fe(t,e,e=>{fr(i,n,e)});break;case eN.Labels:if(a?.labels)for(let e of a.labels)i.set(e.name,{value:e.nameHTML,renderItem:()=>(0,F.jsx)(fa,{nameHtml:e.nameHTML,color:e.color})});else fe(t,e,e=>{for(let t of e)i.set(t.name,{value:t.nameHtml,renderItem:()=>(0,F.jsx)(fa,{nameHtml:t.nameHtml,color:t.color})})});break;case eN.LinkedPullRequests:fe(t,e,e=>{for(let t of e)i.set(t.number.toString(),{value:t.number.toString(),renderItem:()=>(0,F.jsxs)("div",{className:h7.Box_3,children:[(0,F.jsx)(pq,{isDraft:t.isDraft,state:t.state,type:eJ.PullRequest}),(0,F.jsx)("span",{className:h7.Text_1,children:`#${t.number}`})]})})});break;case eN.Repository:fe(t,e,e=>{i.set(e.nameWithOwner,{value:e.nameWithOwner,renderItem:()=>(0,F.jsxs)("div",{className:h7.Box_3,children:[(0,F.jsx)(hV,{repository:e}),(0,F.jsx)("span",{className:h7.Text_1,children:e.nameWithOwner})]})})});break;case eN.Reviewers:fe(t,e,e=>{fr(i,n,e)});break;case eN.Milestone:if(a?.milestones)for(let e of a.milestones)i.set(e.title,{value:e.title});else fe(t,e,e=>{i.set(e.title,{value:e.title})});break;case eN.IssueType:if(a?.issueTypes)for(let e of a.issueTypes)i.set(e.name,{value:e.name});else if(r)for(let e of r)i.set(e,{value:e});else fe(t,e,e=>{i.set(e.name,{value:e.name})});break;case eN.ParentIssue:fe(t,e,e=>{i.set(e.nwoReference,{value:e.title,renderItem:()=>(0,F.jsxs)("div",{className:h7.Box_2,children:[(0,F.jsx)(pq,{state:e.state,stateReason:e.stateReason,type:"Issue",isDraft:!1}),(0,F.jsx)(h4.A,{title:e.title,className:h7.Truncate_1,children:e.title}),(0,F.jsx)("span",{className:h7.Text_2,children:e.nwoReference})]})})});break;case eN.SubIssuesProgress:break;case eN.Title:fe(t,e,e=>{let t=aT(e);i.set(t,{value:t})});break;case eN.Text:fe(t,e,e=>{i.set(e.raw,{value:e.html})});break;case eN.Date:i.set(tU,{value:tU,priority:h9.TodayToken}),fe(t,e,e=>{let t=aC(e);if(t){let e=aN(t.value),a=ak(t.value);e&&a&&i.set(e,{value:a})}})}return new Map([...i.entries()].sort((e,t)=>{let a=e[1].priority??0,r=(t[1].priority??0)-a;if(0!==r)return r;let n=e[0],i=t[0];return n.localeCompare(i)}))}(u,e,c,m);t||(r||i.set(`exclude-${n}`,{value:`exclude-${n}`,priority:h9.SystemExclude}),i.set(`present-${n}`,{value:`present-${n}`,priority:h9.SystemHas}),i.set(`empty-${n}`,{value:`empty-${n}`,priority:h9.SystemNo}));let l=Array.from(i.keys());l.sort((e,t)=>(i.get(t)?.priority??h9.UserDefined)-(i.get(e)?.priority??h9.UserDefined));let s=l.filter(r=>{if("string"!=typeof r)return!1;if(o1(e)||e.dataType===eN.TrackedBy||e.dataType===eN.ParentIssue){if(r.toLowerCase().includes(a))return!0;let e=i.get(r);if(e&&(e.priority??h9.UserDefined)===h9.UserDefined)return e.value.toLowerCase().includes(a)}return!t.includes(r)&&r.toLowerCase().includes(a)});return 1===s.length&&s[0]?.toLowerCase()===a&&s.pop(),{filteredKeys:s,uniqueColumnValues:i}},[u,c,m])},[_,A]=(0,K.useState)("none"),[R,P]=(0,K.useState)(""),[D,E]=(0,K.useState)(null),M=(0,K.useCallback)((a,r,i=!1)=>{(a&&a.name||r)&&(n(nv(t,a?.name??r,{replace:!0,filterForNegative:i})),E({keyword:r,filterForNegative:i,columnDatabaseId:a&&a.databaseId,value:""}),e.current?.focus())},[t,e,n]),B=(0,K.useCallback)((a,{filterForPresence:i=!1,filterForEmpty:l=!1,filterForNegative:s=!1}={})=>{if(D){if(D.columnDatabaseId){let e=y(D.columnDatabaseId);if(!e)return;n(nv(t,e.name,{value:a,replace:!0,filterForPresence:i,filterForEmpty:l,filterForNegative:s}))}else if(D.keyword){if(!j&&h1(D.keyword))return;let[e,r]="updated"===D.keyword?[`${t}<`,a.replace("<","")]:[t,a];n(nv(e,D.keyword,{value:r,replace:!0,filterForPresence:i,filterForEmpty:l,filterForNegative:s}))}E(null),r(!1)}e.current?.focus()},[D,e,r,y,n,t,j]),L=(0,K.useMemo)(()=>{let e="",t=g.find(e=>"is"===e[0])?.[1]?.[0];return t&&(e=t),e},[g]),O=(0,K.useCallback)((e,a,r)=>{let n=ni(e);n&&(e=e.substring(1,e.length));let i=x(e),l=C(e);if(i&&fy(i)){A("values");let l=ao(ai(t),{kind:["keyword.operator.comparison","keyword.operator.range"],start:r,end:"variable"}),s=l&&(i.dataType===eN.Date||i.dataType===eN.Number||i.dataType===eN.Iteration)?t.substring(l.location.end+1,r):t.substring(a+1,r);E({keyword:iE(i.name)?e:null,columnDatabaseId:i.databaseId,value:s,filterForNegative:n});return}if(l){A("values"),E({keyword:e,columnDatabaseId:null,value:t.substring(a+1,r),filterForNegative:n});return}A("none")},[t,C,x]),G=(0,K.useCallback)((e,t)=>{if("number"!=typeof t||t!==e.length){A("none"),E(null);return}if(!h){let e=ff[0];(0,ee.A)(e,"Default filter command must exist"),f(e),A("filterQualifier")}if((0===t||e[t-1])&&e[t]){A("none");return}if(!e){A(h?"filterQualifier":"commands");return}let a=e.charAt(t-1),r=nl(e),n=rg(r?fw:na,e),i=0,l=e,s="";n&&(l=n[0],i=n.index);let o=l.indexOf(":"),d=r&&["'",'"'].includes(a);s=l.substring(0,o),P(l.substring(o+1,t-(d?1:0)));let u=rg(fj,e),c=Math.max(rf(fI,e),rf(fC,e),0),m=Math.max((i+s.length||0)+(r?1:0),(u?u.index:e.lastIndexOf(","))||0);if(c>=m&&!r){if(['"',"'"," "].includes(a)){A("none");return}A("filterQualifier"),E({keyword:null,filterForNegative:ni(e[t-1]),columnDatabaseId:null,value:""});return}O(s,m,t)},[h,O]);(0,K.useEffect)(()=>{let a=requestAnimationFrame(()=>{if(!t.length)return;let a=null;e.current&&(a=e.current.selectionStart),G(t,a)});return()=>{cancelAnimationFrame(a)}},[G,t,e,a]);let V=(0,K.useMemo)(()=>new Set(I.map(e=>e.name.toLowerCase())),[I]),$=(0,K.useMemo)(()=>N.filter(e=>!iE(e)||iE(e)&&!V.has(e)).filter(e=>!h1(e)||j).map(e=>({key:e,value:fx(e),asHTML:!1,onSelect:()=>M(null,e,!!D?.filterForNegative),testId:`search-suggestions-item-${e}`})),[N,V,j,M,D?.filterForNegative]),W=(0,K.useCallback)(t=>{e.current&&(e.current.value="",e.current?.focus()),f(t)},[e,f]);if(!t.length||!a)return null;switch(_){case"commands":return(0,F.jsx)(fm,{xAlign:"left",xOriginEdgeAlign:"left",testId:s,listRef:d,style:v,controllingElementRef:o,inputRef:e,items:k.map(e=>({key:e.name,value:e.name,asHTML:!1,onSelect:()=>W(e),testId:`search-suggestions-item-${e.name}`}))});case"filterQualifier":return(0,F.jsx)(fm,{xAlign:"left",xOriginEdgeAlign:"left",testId:s,listRef:d,controllingElementRef:o,inputRef:e,style:v,items:S.map(e=>({key:e.name,value:fx(e.name),asHTML:!1,onSelect:()=>M(e,iE(e.name)?e.name.toLowerCase():null,!!D?.filterForNegative),testId:`search-suggestions-item-${e.name}`})).concat($)});case"values":{if(!D)return null;let t=D.value.toLowerCase(),a=[];if(D.columnDatabaseId&&i){let e=D.filterForNegative,r=y(D.columnDatabaseId);if(void 0!==l&&l(r.name)!==h0.ColumnAndValues)return null;let{filteredKeys:n,uniqueColumnValues:i}=T(r,R,t,D.filterForNegative),s=ng(nm(r.name));a.push(...n.flatMap(t=>{if(t===`present-${D.columnDatabaseId}`){let a=`${nH.hasSuggestion} ${s}`;return{key:t,value:a,asHTML:!0,onSelect:()=>B(t,{filterForPresence:!0,filterForNegative:e}),testId:`search-suggestions-item-${a}`}}if(t===`empty-${D.columnDatabaseId}`){let a=`${nH.noSuggestion} ${s}`;return{key:t,value:a,asHTML:!0,onSelect:()=>B(t,{filterForEmpty:!0,filterForNegative:e}),testId:`search-suggestions-item-${a}`}}if(t===`exclude-${D.columnDatabaseId}`){let e=`${nH.excludeSuggestion} ${s}`;return{key:t,value:e,asHTML:!0,onSelect:()=>M(r,null,!0),testId:`search-suggestions-item-${e}`}}let a=i.get(t),n=a?a.value:"",l=a&&a.priority&&a.priority>h9.UserDefined?()=>(0,F.jsx)(lv.A,{sx:{color:"accent.fg"},children:n}):a?.renderItem;return{key:t,value:n,renderItem:l,asHTML:!0,onSelect:()=>B(t,{filterForNegative:e}),testId:`search-suggestions-item-${t}`}}))}if(D.keyword){if("no"===D.keyword||"has"===D.keyword){let t=D.value?S.filter(e=>e.name.toLowerCase().indexOf(D.value)>=0):S,a=D.filterForNegative,r=t.map(e=>ng(nm(e.name))).filter(e=>!R.includes(e));return(0,F.jsx)(fm,{style:v,xAlign:"right",xOriginEdgeAlign:"left",testId:s,listRef:d,controllingElementRef:o,inputRef:e,items:r.map(e=>({key:e,value:e,asHTML:!0,onSelect:()=>B(e,{filterForNegative:a}),testId:`search-suggestions-item-${e}`}))})}if(a.length>0)return(0,F.jsx)(fm,{xAlign:"right",xOriginEdgeAlign:"left",testId:s,listRef:d,controllingElementRef:o,inputRef:e,items:a,style:v});if(h1(D.keyword)&&!j||!Object.keys(iP).includes(D.keyword))return null;let t=D.keyword,r=Object.values(iP[t]),n=(D.value?r.filter(e=>e.indexOf(D.value)>=0):r).filter(e=>!R.includes(e));if("reason"===t)switch(L){case iA.open:n=n.filter(e=>e===iR.reopened);break;case iA.closed:n=n.filter(e=>e!==iR.reopened)}let i=D.filterForNegative;a.push(...n.map(e=>({key:e,value:e,asHTML:!0,onSelect:()=>B(e,{filterForNegative:i}),testId:`search-suggestions-item-${e}`})))}if(a.length>0)return(0,F.jsx)(fm,{xAlign:"right",xOriginEdgeAlign:"left",testId:s,listRef:d,controllingElementRef:o,inputRef:e,items:a,style:v});return null}default:return null}}));try{fb.displayName||(fb.displayName="FilterSuggestionsItemsContext")}catch{}try{fw.displayName||(fw.displayName="INVALID_VALUE_REGEX")}catch{}try{fj.displayName||(fj.displayName="COMMA_OUTSIDE_QUOTES_REGEX")}catch{}try{fC.displayName||(fC.displayName="WHITESPACE_OUTSIDE_SINGLE_QUOTES")}catch{}try{fI.displayName||(fI.displayName="WHITESPACE_OUTSIDE_DOUBLE_QUOTES")}catch{}try{fS.displayName||(fS.displayName="FilterSuggestions")}catch{}try{fS.displayName||(fS.displayName="FilterSuggestions")}catch{}let fk=(0,rt.U0)()?"Meta":"Ctrl",fN={ARCHIVE:"e",ARROW_DOWN:"ArrowDown",ARROW_LEFT:"ArrowLeft",ARROW_RIGHT:"ArrowRight",ARROW_UP:"ArrowUp",BACKSPACE:"Backspace",CTRL_J:"Ctrl+j",CTRL_K:"Ctrl+k",CTRL_SPACE:"Ctrl+ ",DELETE:"Delete",END:"End",ENTER:"Enter",ESCAPE:"Escape",HOME:"Home",META_A:`${fk}+a`,META_C:`${fk}+c`,META_V:`${fk}+v`,META_D:`${fk}+d`,META_Z:`${fk}+z`,META_ARROW_DOWN:`${fk}+ArrowDown`,META_ARROW_LEFT:`${fk}+ArrowLeft`,META_ARROW_RIGHT:`${fk}+ArrowRight`,META_ARROW_UP:`${fk}+ArrowUp`,META_END:`${fk}+End`,META_SHIFT_F:`${fk}+Shift+f`,META_F:`${fk}+f`,META_HOME:`${fk}+Home`,META_K:`${fk}+k`,META_ENTER:`${fk}+Enter`,META_SPACE:`${fk}+ `,META_SLASH:`${fk}+/`,SHIFT_ARROW_DOWN:"Shift+ArrowDown",SHIFT_ARROW_UP:"Shift+ArrowUp",SHIFT_SPACE:"Shift+ ",SHIFT_TAB:"Shift+Tab",SHIFT_ENTER:"Shift+Enter",META_SHIFT_ENTER:`${fk}+Shift+Enter`,SPACE:" ",TAB:"Tab",META_F6:`${fk}+F6`},fT=[fN.ARCHIVE,fN.SHIFT_SPACE],f_=()=>{if(!i){let e=document.querySelector("meta[name=keyboard-shortcuts-preference]");i=e?e.content:"all"}return"no_character_key"===i},fA=e=>{let t="";return(e.ctrlKey&&(t+="Ctrl+"),e.metaKey&&(t+="Meta+"),e.shiftKey&&(t+="Shift+"),t+=e.key,f_()&&fT.includes(t))?"":t},fR=fN.META_SLASH,fP=e=>(window.addEventListener("focus",e,{capture:!0}),window.addEventListener("blur",e),window.addEventListener("click",e),()=>{window.removeEventListener("focus",e,{capture:!0}),window.removeEventListener("blur",e),window.removeEventListener("click",e)}),fD=e=>(0,K.useSyncExternalStore)(fP,()=>e.length>0&&e.some(e=>e.current?.contains(document.activeElement)));var fE=a(87330);let fM=({onClick:e,onKeyDown:t})=>e?(0,F.jsx)(fE.K,{tooltipDirection:"sw",variant:"invisible",onClick:e,onKeyDown:t,icon:ly.XCircleFillIcon,size:"small","aria-label":nH.clearFilter,...(0,ey.G)("clear-filter-query")}):null;try{fM.displayName||(fM.displayName="ClearFilterButton")}catch{}var fB=a(982),fL=a(16037);let fF={Filter_0:"filter-bar-module__Filter_0--v8FnK"};var fO=a(1663),fG=a(1120);let fV=new Intl.Collator(void 0,{numeric:!0});function f$(e,t){let a=e.sourceObject,r=t.sourceObject;return a.dataType!==eN.Assignees||r.dataType!==eN.Assignees?-1:fV.compare(e.value,t.value)}function fW(e,t){return fV.compare(e.login,t.login)}function fz(e,t){return fV.compare(e.name,t.name)}function fH(e){if("empty"!==e.kind)switch((0,ee.A)(e.dataType!==eN.Labels,"Drag and drop not yet supported for labels"),e.dataType){case eN.Iteration:return{dataType:e.dataType,memexProjectColumnId:e.value.columnId,value:{id:e.value.iteration.id}};case eN.SingleSelect:return{dataType:e.dataType,memexProjectColumnId:e.value.columnId,value:{id:e.value.option.id}};case eN.Text:return{dataType:e.dataType,memexProjectColumnId:e.value.columnId,value:e.value.text.raw};case eN.Number:{let t=e.value.number;return{dataType:e.dataType,memexProjectColumnId:e.value.columnId,value:{value:t.value}}}case eN.Date:{let t=e.value.date;return{dataType:e.dataType,memexProjectColumnId:e.value.columnId,value:t}}case eN.Milestone:case eN.IssueType:case eN.ParentIssue:case eN.Repository:case eN.Assignees:return{dataType:e.dataType,value:e.value};default:tA(e)}}function fU(e){switch(e.dataType){case eN.Assignees:case eN.Milestone:case eN.Repository:case eN.Labels:case eN.IssueType:case eN.ParentIssue:return{dataType:e.dataType,kind:"empty",value:{titleHtml:`No ${e.name}`}};case eN.Date:case eN.Iteration:case eN.Number:case eN.Text:case eN.SingleSelect:return{dataType:e.dataType,kind:"empty",value:{titleHtml:`No ${e.name}`,columnId:e.id}}}}function fq(e,t,a){if("_noValue"===t)return fU(e);if(rM(e.dataType))switch(e.dataType){case eN.Assignees:if(a&&"login"in a)return{dataType:e.dataType,kind:"group",value:[a]};return;case eN.Date:{let a=aw({value:aI(t)});if(!a)return;return{dataType:eN.Date,kind:"group",value:{date:a,columnId:e.id}}}case eN.Iteration:{if(a&&"duration"in a)return{dataType:e.dataType,kind:"group",value:{iteration:a,columnId:e.id}};let r=aK(e).find(e=>e.title===t);if(!r)return;return{dataType:eN.Iteration,kind:"group",value:{iteration:r,columnId:e.id}}}case eN.Labels:if(a&&"url"in a&&"color"in a)return{dataType:e.dataType,kind:"group",value:a};return;case eN.Milestone:if(a&&"url"in a&&"title"in a&&"repoNameWithOwner"in a)return{dataType:e.dataType,kind:"group",value:a};return;case eN.IssueType:if(a&&"name"in a&&"id"in a)return{dataType:e.dataType,kind:"group",value:a};return;case eN.ParentIssue:if(a&&"nwoReference"in a&&"id"in a)return{dataType:e.dataType,kind:"group",value:a};return;case eN.Number:{let a=ay({value:Number(t)});if(!a)return;return{dataType:eN.Number,kind:"group",value:{number:a,columnId:e.id}}}case eN.Repository:if(a&&"nameWithOwner"in a)return{dataType:e.dataType,kind:"group",value:a};return;case eN.SingleSelect:{if(a&&"descriptionHtml"in a)return{dataType:e.dataType,kind:"group",value:{option:a,columnId:e.id}};let r=(e.settings.options||[]).find(e=>e.name===t);if(!r)return;return{dataType:eN.SingleSelect,kind:"group",value:{option:r,columnId:e.id}}}case eN.Text:{let a=ag({raw:t,html:t});if(!a)return;return{dataType:eN.Text,kind:"group",value:{text:a,columnId:e.id}}}default:tA(e.dataType)}}var fK=a(75632);let fQ=(e,t)=>{if(!(0,fK.G7)("memex_mwl_filter_field_delimiter"))return t;let a=t.length-1,r=e.raw.trim().endsWith(","),n=t?.[a];return(t[a]?.valid||r)&&!t[a]?.value?[...t.slice(0,a),{...n,validations:void 0,valid:!0,value:n?.value??"",startIndex:n?.startIndex??0,endIndex:n?.endIndex??t[a]?.startIndex??0,hasCaret:n?.hasCaret??!1}]:t};function fJ(e){return class extends e{async validateFilterBlockValues(e,t,a){let r=await super.validateFilterBlockValues(e,t,a);return fQ(t,r)}}}function fX(e){return class extends e{async validateFilterBlockValues(e,t,a,r){let n=await super.validateFilterBlockValues(e,t,a,r);return fQ(t,n)}}}let fY=e=>e.toLowerCase().replace(/\s+/g,"-"),fZ=e=>{let t=e.toLocaleLowerCase();return[{ariaLabel:"@current",value:"@current",priority:2,displayName:`Current ${t}`,inlineDescription:!1,icon:ly.IterationsIcon},{ariaLabel:"@next",value:"@next",priority:3,displayName:`Next ${t}`,inlineDescription:!1,icon:ly.IterationsIcon},{ariaLabel:"@previous",value:"@previous",priority:4,displayName:`Previous ${t}`,inlineDescription:!1,icon:ly.IterationsIcon}]},f0=e=>{let t=e.toLocaleLowerCase();return[{ariaLabel:`term*, ${t} starts with`,value:"term*",priority:2,displayName:`${t} starts with...`,inlineDescription:!1,icon:ly.KeyAsteriskIcon},{ariaLabel:`*term, ${t} ends with`,value:"*term",priority:3,displayName:`${t} ends with...`,inlineDescription:!1,icon:ly.KeyAsteriskIcon},{ariaLabel:`*term*, ${t} contains`,value:"*term*",priority:4,displayName:`${t} contains...`,inlineDescription:!1,icon:ly.KeyAsteriskIcon}]};function f1(e,t,a,r){var n,i=arguments.length,l=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,a):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,a,r);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(l=(i<3?n(l):i>3?n(t,a,l):n(t,a))||l);return i>3&&l&&Object.defineProperty(t,a,l),l}let f2=/^(?:>|<|>=|<=)?(\d{4}-\d{2}-\d{2})?$/,f5=/^(?:>|<|>=|<=)?(@[A-Za-z]+)([+-]\d+[mdwqy]?)?$/,f3={date:fB.a6,iteration:fB.a6,linkedPullRequests:fB.$D,milestone:fB.$D,type:fB.$D,no:fB.$D,number:fB.a6,reviewers:fB.$D,singleSelect:fB.$D,state:fB.a6,text:fB.a6,title:fB.$D,subIssuesProgress:fB.$D,parentIssue:fB.$D,reason:fB.a6,lastUpdated:fB.a6},f4={date:e=>({key:fY(e.name),displayName:e.name,icon:ly.CalendarIcon,priority:f3.date,type:fB.CH.Date}),iteration:e=>({key:fY(e.name),displayName:e.name,icon:ly.IterationsIcon,priority:f3.iteration}),linkedPullRequests:{displayName:"Linked pull requests",key:"linked-pull-requests",icon:ly.GitPullRequestIcon,description:"Issue items with a linked pull request",priority:f3.linkedPullRequests},no:{key:"no",displayName:"No",description:"Items without a value for the specified field",priority:f3.no,icon:ly.NoEntryIcon},number:e=>({key:fY(e.name),displayName:e.name,icon:ly.NumberIcon,priority:f3.number,type:fB.CH.Number}),reviewers:{displayName:"Reviewers",key:"reviewers",icon:ly.PersonIcon,description:"Items reviewed by the user",priority:f3.reviewers},singleSelect:e=>({key:fY(e.name),displayName:e.name,icon:ly.SingleSelectIcon,priority:f3.singleSelect}),text:e=>({key:fY(e.name),displayName:e.name,icon:ly.TypographyIcon,priority:f3.text,type:fB.CH.Text}),title:e=>({key:fY(e.name),displayName:e.name,icon:ly.TypographyIcon,priority:f3.title,type:fB.CH.Text}),parentIssue:e=>({key:"parent-issue",displayName:e.name,icon:ly.IssueTrackedByIcon,priority:f3.parentIssue,type:fB.CH.Text}),subIssuesProgress:e=>({key:"sub-issues-progress",displayName:e.name,icon:ly.IssueTracksIcon,priority:f3.subIssuesProgress,type:fB.CH.Unknown}),reason:{key:"reason",displayName:"Closed reason",priority:f3.reason,icon:ly.MentionIcon,description:"Filter by item closed reason"},lastUpdated:{key:"last-updated",displayName:"Last updated",priority:f3.lastUpdated,icon:ly.CalendarIcon,description:"Date when the item was last updated"}},f6=(e,t)=>t.map(t=>"string"!=typeof t.value?t:t.value.includes("@")?{...t,valid:f5.test(t.value)}:f2.test(t.value)?t:{...t,valid:!1,validations:[{type:fB.b.InvalidValue,message:nJ.invalidPwlDateValue(e,t.value)}]});let LinkedPullRequestsFilterProvider=class LinkedPullRequestsFilterProvider extends fG.uy{constructor(e){super(f4.linkedPullRequests,[],{...e,filterTypes:{hasValue:!0,...e?.filterTypes}})}};LinkedPullRequestsFilterProvider=f1([fX],LinkedPullRequestsFilterProvider);let ReviewersFilterProvider=class ReviewersFilterProvider extends fG.Qh{constructor(e,t){super(e,f4.reviewers,t)}};ReviewersFilterProvider=f1([fJ],ReviewersFilterProvider);let DateFilterProvider=class DateFilterProvider extends fG.uy{async validateFilterBlockValues(e,t,a,r){let n=await super.validateFilterBlockValues(e,t,a,r);return fQ(t,f6(this.key,n))}constructor(e){super(f4.date(e),fO.p,{filterTypes:{hasValue:!0}}),this.type=fB.CH.Date}};let IterationFilterProvider=class IterationFilterProvider extends fG.uy{constructor(e){let t=f4.iteration(e),{iterations:a,completedIterations:r}=e.settings.configuration,n=fZ(e.name);super(t,[...n,...[...a,...r].map((t,a)=>{let r=fq(e,t.id),{title:i,titleHtml:l,startDate:s,duration:o}=r&&"empty"!==r.kind?r.value.iteration:t;return{ariaLabel:i,value:i,priority:a+n.length+2,displayName:l,description:aU({startDate:s,duration:o}),inlineDescription:!1}})],{filterTypes:{hasValue:!0}})}};IterationFilterProvider=f1([fX],IterationFilterProvider);let NumberFilterProvider=class NumberFilterProvider extends fG.uy{constructor(e){super(f4.number(e),[],{filterTypes:{hasValue:!0}})}};NumberFilterProvider=f1([fX],NumberFilterProvider);let SingleSelectFilterProvider=class SingleSelectFilterProvider extends fG.uy{constructor(e,t,a){super(f4.singleSelect(e),(e.settings.options??[]).map((a,r)=>{let n=fq(e,a.name),{descriptionHtml:i,name:l,nameHtml:s,color:o}=n&&"empty"!==n.kind?n.value.option:a;return{ariaLabel:l,value:l,priority:r+2,displayName:s,description:i,inlineDescription:!1,iconColor:t(o)?.border}}),{...a,filterTypes:{hasValue:!0,...a?.filterTypes}})}};SingleSelectFilterProvider=f1([fX],SingleSelectFilterProvider);let TextFilterProvider=class TextFilterProvider extends fG.uy{constructor(e){super(f4.text(e),[...f0(e.name)],{filterTypes:{hasValue:!0}})}};TextFilterProvider=f1([fX],TextFilterProvider);let TitleFilterProvider=class TitleFilterProvider extends fG.uy{constructor(e){super(f4.title(e),[...f0(e.name)],{filterTypes:{hasValue:!1,valueless:!1}})}};TitleFilterProvider=f1([fX],TitleFilterProvider);let SubIssuesProgressFilterProvider=class SubIssuesProgressFilterProvider extends fG.uy{constructor(e,t){super(f4.subIssuesProgress(e),[],{...t})}};function f8(){return nP("memex-filter-suggestions-api-data")?.url}function f7(e){return new URLSearchParams({field_id:e.databaseId?.toString()})}SubIssuesProgressFilterProvider=f1([fX],SubIssuesProgressFilterProvider);let MemexAssigneeFilterProvider=class MemexAssigneeFilterProvider extends fG.n5{constructor(e,t,a){super(t,a),this.suggestionEndpoint=f8(),this.providerContext=f7(e)}};MemexAssigneeFilterProvider=f1([fJ],MemexAssigneeFilterProvider);let MemexLabelFilterProvider=class MemexLabelFilterProvider extends fG.aF{constructor(e,t){super(t),this.suggestionEndpoint=f8(),this.providerContext=f7(e)}};MemexLabelFilterProvider=f1([fJ],MemexLabelFilterProvider);let MemexMilestoneFilterProvider=class MemexMilestoneFilterProvider extends fG.Qq{constructor(e,t){super(t),this.suggestionEndpoint=f8(),this.providerContext=f7(e)}};MemexMilestoneFilterProvider=f1([fJ],MemexMilestoneFilterProvider);let MemexParentIssueFilterProvider=class MemexParentIssueFilterProvider extends fG.$q{async fetchSuggestions(){let e=this.suggestionCache.get("");if(e)return e;let t=new URL(this.suggestionEndpoint,window.location.origin);t.search=this.providerContext?.toString()||"";let a=await this.fetchData(t.toString());if(!a||!a.ok)return null;let r=(await a.json()).suggestions.sort((e,t)=>t.updatedAt.localeCompare(e.updatedAt));return this.suggestionCache.set("",r),r}validateFilterValue(){return Promise.resolve(null)}constructor(e,t){super(f4.parentIssue(e),{filterTypes:{...t?.filterTypes}}),this.suggestionEndpoint=f8(),this.providerContext=f7(e)}};MemexParentIssueFilterProvider=f1([fJ],MemexParentIssueFilterProvider);let MemexRepositoryFilterProvider=class MemexRepositoryFilterProvider extends fG.pH{constructor(e,t){super(t),this.suggestionEndpoint=f8(),this.providerContext=f7(e)}};MemexRepositoryFilterProvider=f1([fJ],MemexRepositoryFilterProvider);let MemexReviewersFilterProvider=class MemexReviewersFilterProvider extends ReviewersFilterProvider{};MemexReviewersFilterProvider=f1([fJ],MemexReviewersFilterProvider);let MemexIsFilterProvider=class MemexIsFilterProvider extends fG.I4{};MemexIsFilterProvider=f1([fX],MemexIsFilterProvider);let MemexStateFilterProvider=class MemexStateFilterProvider extends fG.PT{};MemexStateFilterProvider=f1([fX],MemexStateFilterProvider);let ReasonFilterProvider=class ReasonFilterProvider extends fG.uy{constructor(){super(f4.reason,[{value:"completed",displayName:"Completed",priority:1,icon:ly.CheckCircleIcon,iconColor:"var(--fgColor-done, var(--color-done-fg))"},{value:"not-planned",displayName:"Not planned",priority:2,icon:ly.SkipIcon,iconColor:"var(--fgColor-muted, var(--color-neutral-emphasis))"},{value:"duplicate",displayName:"Duplicate",priority:3,icon:ly.SkipIcon,iconColor:"var(--fgColor-muted, var(--color-neutral-emphasis))"},{value:"reopened",displayName:"Reopened",priority:4,icon:ly.IssueReopenedIcon,iconColor:"var(--fgColor-open, var(--color-open-fg))"}],{filterTypes:{valueless:!1}})}};ReasonFilterProvider=f1([fX],ReasonFilterProvider);let LastUpdatedFilterProvider=class LastUpdatedFilterProvider extends fG.uy{constructor(){super(f4.lastUpdated,[{ariaLabel:"7 days",value:"7days",priority:1,displayName:"7 or more days ago"},{ariaLabel:"14 days",value:"14days",priority:2,displayName:"14 or more days ago"},{ariaLabel:"21 days",value:"21days",priority:3,displayName:"21 or more days ago"}],{filterTypes:{valueless:!1}})}};LastUpdatedFilterProvider=f1([fX],LastUpdatedFilterProvider);let MemexUpdatedFilterProvider=class MemexUpdatedFilterProvider extends fG.pv{async validateFilterBlockValues(e,t,a,r){let n=await super.validateFilterBlockValues(e,t,a,r);return fQ(t,f6(this.key,n))}};try{f2.displayName||(f2.displayName="MEMEX_DATE_REGEX")}catch{}try{f5.displayName||(f5.displayName="MEMEX_DYNAMIC_DATE_REGEX")}catch{}function f9(e){(0,K.useEffect)(()=>{function t(t){fA(t)!==fR||t.defaultPrevented||(t.stopPropagation(),t.preventDefault(),e())}return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[e])}let ge=(e,t,a,r,n,i)=>{let l=a?{showAtMe:!0,currentUserLogin:a.login,currentUserAvatarUrl:a.avatarUrl}:{showAtMe:!1};if(rT(e.dataType))switch(e.dataType){case eN.Assignees:return new MemexAssigneeFilterProvider(e,l,{filterTypes:{exclusive:!0,hasValue:!0}});case eN.Date:return new DateFilterProvider(e);case eN.Iteration:return new IterationFilterProvider(e);case eN.Labels:return new MemexLabelFilterProvider(e,{filterTypes:{exclusive:!0,hasValue:!0}});case eN.LinkedPullRequests:return new LinkedPullRequestsFilterProvider({filterTypes:{hasValue:!0}});case eN.Milestone:return new MemexMilestoneFilterProvider(e,{priority:f3.milestone,filterTypes:{exclusive:!0,hasValue:!0}});case eN.IssueType:return new fL.B({priority:f3.type,filterTypes:{valueless:!0,hasValue:!0}},!1,r,void 0,{login:n,projectNumber:i});case eN.Number:return new NumberFilterProvider(e);case eN.Repository:return new MemexRepositoryFilterProvider(e,{filterTypes:{exclusive:!0,hasValue:!0}});case eN.Reviewers:return new MemexReviewersFilterProvider(l,{filterTypes:{exclusive:!0,hasValue:!0}});case eN.SingleSelect:return new SingleSelectFilterProvider(e,t);case eN.SubIssuesProgress:return new SubIssuesProgressFilterProvider(e,{filterTypes:{hasValue:!0}});case eN.Text:return new TextFilterProvider(e);case eN.Title:return new TitleFilterProvider(e);case eN.ParentIssue:return new MemexParentIssueFilterProvider(e,{filterTypes:{hasValue:!0}});default:tA(e.dataType)}},gt=(0,K.memo)(function({value:e,onChange:t}){let a=(0,ek.useRelayEnvironment)(),{memex_table_without_limits:r}=iz(),{allColumns:n}=i5(),{loggedInUser:i,projectOwner:l,projectData:s}=eU(),{getPresentationalColor:o}=(0,ra.M3)(),d=(0,K.useMemo)(()=>n.map(e=>ge(e,o,i,a,l?.login,s?.number)).filter(e=>!!e),[n,i,a,l?.login,s?.number,o]),u=(0,K.useRef)(null);return f9((0,K.useCallback)(()=>{u.current?.focus()},[])),(0,F.jsx)(fB.dJ,{id:"filter-bar-component","data-testid":"filter-bar-component",label:"Filter",filterButtonVariant:"compact",settings:{aliasMatching:!0},variant:r?"input":"full","aria-label":nH.filterByKeyboardOrByField,placeholder:nH.filterByKeyboardOrByField,filterValue:e,inputRef:u,onChange:t,providers:(0,K.useMemo)(()=>[...d,new LastUpdatedFilterProvider,new MemexIsFilterProvider(["issue","pr","open","closed","draft","merged"],{filterTypes:{valueless:!1}}),new MemexStateFilterProvider("mixed",{priority:f3.state,filterTypes:{valueless:!1}}),new MemexUpdatedFilterProvider({filterTypes:{valueless:!1}}),new ReasonFilterProvider],[d]),className:fF.Filter_0})});try{gt.displayName||(gt.displayName="FilterBar")}catch{}var ga=a(91132);function gr({children:e,...t}){let a=(0,K.useRef)(null),r=(0,ga.w)(a.current);return(0,F.jsx)(lx.A,{ref:a,role:"region","aria-label":"View filters",...(0,ey.G)("base-filter-input"),sx:{display:"flex",flex:1,flexDirection:"row",maxWidth:"100%",position:"relative",gap:2,flexWrap:r(["wrap","nowrap"]),justifyContent:r(["flex-end","space-between"])},...t,children:e})}try{gr.displayName||(gr.displayName="FilterContainer")}catch{}var gn=a(12528);let gi={lineHeight:0};function gl({filterCount:e,hideCounterLabel:t}){return t||"number"!=typeof e?null:(0,F.jsxs)(lx.A,{sx:gi,"aria-live":"polite","aria-atomic":!0,children:[(0,F.jsx)(gn.A,{...(0,ey.G)("filter-results-count"),children:e}),(0,F.jsxs)("span",{className:"sr-only",children:[" ",1===e?"matching item":"matching items"]})]})}try{gl.displayName||(gl.displayName="FilterCounterLabel")}catch{}let gs={display:"flex",height:"100%",gap:2,marginTop:"2px"},go={display:"flex",gap:2,flexShrink:0};function gd({onResetChanges:e,onSaveChanges:t,saveButtonText:a,hideSaveButton:r,hideResetChangesButton:n,children:i}){return r&&n?null:(0,F.jsxs)(lx.A,{sx:go,children:[i,(0,F.jsxs)(lx.A,{sx:gs,...(0,ey.G)("filter-state-actions"),children:[n?null:(0,F.jsx)(p4.Q,{onClick:e,size:"small",disabled:!e,...(0,ey.G)("filter-actions-reset-changes-button"),children:nH.discardChanges}),r?null:(0,F.jsx)(p4.Q,{variant:"primary",size:"small",onClick:t,disabled:!t,...(0,ey.G)("filter-actions-save-changes-button"),children:a??nH.saveChanges})]})]})}try{gd.displayName||(gd.displayName="FilterInputActions")}catch{}let gu={alignItems:"center",pl:"12px",pr:2,maxWidth:"100%",flexShrink:1,flexGrow:1,minHeight:"32px",display:"grid",gridTemplateColumns:"auto 1fr auto",gap:2,minWidth:"20px",borderRadius:2,borderColor:"border.default",borderStyle:"solid",borderWidth:"1px",":hover":{cursor:"text"},"&.is-focused":{borderColor:"accent.fg"}},gc=(0,K.forwardRef)(function({children:e},t){return(0,F.jsx)(lx.A,{ref:t,sx:gu,children:e})});try{gc.displayName||(gc.displayName="FilterInputContainer")}catch{}try{gc.displayName||(gc.displayName="FilterInputContainer")}catch{}function gm(e){return t=>(0,q.Jt)(e)({theme:t})}var gp=a(9591);let gh={position:"absolute",top:0,left:0,visibility:"hidden",height:0,overflow:"scroll",whiteSpace:"pre"},gf=(e,t)=>{for(let a of t)a&&(a.style.font=e.font,a.style.fontSize=e.fontSize,a.style.fontFamily=e.fontFamily,a.style.fontWeight=e.fontWeight,a.style.fontStyle=e.fontStyle,a.style.letterSpacing=e.letterSpacing,a.style.textTransform=e.textTransform)},gg=(0,K.forwardRef)(function({minWidth:e=1,as:t=gp.A,containerSx:a,...r},n){let i=(0,K.useRef)(null),l=(0,K.useRef)(null),s=(0,K.useRef)(null);(0,K.useImperativeHandle)(n,()=>i.current);let o=(0,K.useCallback)(()=>{requestAnimationFrame(()=>{let{current:t}=l,{current:a}=s;if(!t)return;let r=i.current&&window.getComputedStyle(i.current);r&&gf(r,[t,a]);let n=t.scrollWidth,o=a?.scrollWidth??0,d=Math.max(n+2,i.current?.value===""?o+2:0,e);i.current&&(i.current.style.width=`${d}px`)})},[e]);(0,K.useEffect)(()=>{o()});let d={...r,onChange:e=>{o(),r.onChange?.(e)},onBlur:e=>{o(),r.onBlur?.(e)},ref:i};return(0,F.jsxs)(lx.A,{sx:a,children:[(0,F.jsx)(lx.A,{sx:gh,ref:l,"aria-hidden":"true",children:function(...e){for(let t of e)if(null!=t)return t.toString();return""}(r.defaultValue,r.value)}),r.placeholder?(0,F.jsx)(lx.A,{sx:gh,ref:s,"aria-hidden":"true",children:r.placeholder}):null,(0,F.jsx)(t,{...d})]})});try{gg.displayName||(gg.displayName="AutosizeTextInput")}catch{}try{gg.displayName||(gg.displayName="AutosizeTextInput")}catch{}let gy={color:"fg.default",fontFamily:"inherit",border:0,padding:0,boxShadow:"none",backgroundColor:"transparent",display:"block",width:"100%","&::-webkit-datetime-edit":{display:"flex",alignItems:"center"},"&:focus-within":{border:0,boxShadow:"none",outline:"none"},"&::placeholder":{color:"fg.muted"},"&.is-disabled":{cursor:"not-allowed"}},gx=(0,K.forwardRef)(function(e,t){let a=(0,K.useMemo)(()=>{var t;return t=e.sx,{...gy,...t}},[e.sx]);return(0,F.jsx)(lx.A,{as:"input",...e,sx:a,ref:t})});gx.displayName="BorderlessTextInput";let gb="search-suggestions-box",gv="filter-bar-input",gw=(0,K.forwardRef)(function({areFilterSuggestionsVisible:e,value:t,onChange:a,onKeyDown:r,onFocus:n,onBlur:i,onClick:l,disabled:s,...o},d){let u=(0,K.useCallback)(e=>{e.stopPropagation(),e.preventDefault(),l?.(e)},[l]);return(0,F.jsx)(gg,{as:gx,role:"combobox",id:gv,"aria-haspopup":"listbox","aria-expanded":e,"aria-autocomplete":"list","aria-controls":gb,"aria-label":nH.filterByKeyboardOrByField,name:"Filter",value:t,disabled:s,onChange:a,onClick:u,onKeyDown:r,onFocus:n,onBlur:i,placeholder:nH.filterByKeyboardOrByField,autoComplete:"off",autoCorrect:"false",autoCapitalize:"false",spellCheck:"false",...(0,ey.G)("filter-bar-input"),ref:d,tabIndex:0,sx:gC,containerSx:gj,...o})}),gj={minWidth:"100%",height:"100%"},gC={position:"relative",display:"flex",resize:"none",outline:"none",border:"0px",width:"100%",padding:"0px",background:"transparent",overflow:"hidden",overflowX:"auto",color:"transparent",minWidth:"100%",caretColor:gm("colors.fg.default"),fontSize:1,flex:1,height:"100%",maxHeight:"unset","&::-webkit-autofill, &::-webkit-contacts-auto-fill-button, &::-webkit-credentials-auto-fill-button":{visibility:"hidden",display:"none !important",pointerEvents:"none",position:"absolute",right:0},"&:disabled":{cursor:"not-allowed"}};try{gw.displayName||(gw.displayName="RawFilterInput")}catch{}var gI=a(7284);let gS={x:0,y:0};function gk(e){let t=(0,K.useCallback)(()=>e(gS),[e]);return(0,K.useSyncExternalStore)(gN,t)}function gN(e){function t(t){let a={x:t.x,y:t.y};(0,ut.A)(a,gS)||(gS={x:t.x,y:t.y}),e()}return document.addEventListener("pointermove",t),()=>document.removeEventListener("pointermove",t)}let gT=e=>e.invalid?{"&::before":{position:"absolute",bottom:0,width:"100%",height:"0.25em",content:'""',background:t=>`linear-gradient(135deg, transparent, transparent 45%, ${t.colors[e.variant??"danger"].emphasis}, transparent 55%, transparent 100%),linear-gradient(45deg, transparent, transparent 45%, ${t.colors[e.variant??"danger"].emphasis}, transparent 55%, transparent 100%)`,backgroundRepeat:"repeat-x,repeat-x",backgroundSize:"0.5em 0.5em"}}:{},g_=({length:e})=>0===e?null:(0,F.jsx)(F.Fragment,{children:Array.from({length:e}).map((e,t)=>(0,F.jsx)(K.Fragment,{children:"\xa0"},t))}),gA={position:"absolute",userSelect:"none",whiteSpace:"nowrap",wordBreak:"break-word",fontSize:1,flex:1,width:"100%",padding:"0px",top:"50%",transform:"translateY(-50%)"},gR=(0,K.memo)(function({query:e,suggestColumns:t=!0,showColumnSuggestionIf:a}){let r=(0,K.useRef)(null),{orderedTokenizedFilters:n,invalidQuery:i}=(0,K.useMemo)(()=>nr(e),[e]),l=gk((0,K.useCallback)(e=>!!r.current&&rv(r.current,e),[])),s=e.split(" ").findIndex(e=>" "!==e);return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsxs)(lx.A,{sx:gA,ref:r,...(0,ey.G)("tokenized-query"),"aria-errormessage":i?"tokenized-query-invalid-query-errormessage":void 0,children:[(0,F.jsx)(g_,{length:s}),n.map((e,r)=>(0,F.jsxs)(K.Fragment,{children:[(0,F.jsx)(gE,{...e,id:`tokenized-query-token-${r}`,invalid:i,suggestColumns:t,showColumnSuggestionIf:a}),(0,F.jsx)(g_,{length:e.spaceAfter.length})]},r))]}),i?(0,F.jsx)(gI.m,{contentRef:r,direction:"se",open:l,"aria-label":i?nJ.invalidFilterQuotes:void 0,id:"tokenized-query-invalid-query-errormessage","aria-live":"polite",anchorSide:"inside-bottom",anchorOffset:-2}):null]})});function gP(e){return{message:e}}let gD=/^(?:[+\-><]?[=]?|(\*\.\.))\d+(\.\d+)?(?:\.\.\*|\.\.)?(?:\d+(\.\d+)?)?$/,gE=(0,K.memo)(function({invalid:e,id:t,suggestColumns:a,showColumnSuggestionIf:r,...n}){let{findFilterableFieldByName:i}=h5(),{repoSuggestions:l}=fv(),{activeWorkflow:s}=pb(),o=s&&pe(s),d=void 0!==r;switch(n.type){case"search":return(0,F.jsx)(gB,{id:t,value:n.value,invalid:e});case"field":{let s;let u=!0;if(o&&"type"===n.field)s=function(e,t){let a=no(e),r=t?.issueTypes?function(e){let t=new Set;for(let a of e)a.isEnabled&&t.add(a.name);return t}(t.issueTypes):void 0,n=new Set;for(let e of a)r?.has(e)||n.add(e);if(n.size>0)return gP(nJ.noOptionsMatch([...n].join(","),"type"))}(n.value,l);else{let e=i(n.field),t=d&&e?r(e.name):void 0;e=d?t===h0.ColumnOnly||t===h0.ColumnAndValues?e:void 0:e,u=!!a&&!!e;let o=d&&t===h0.ColumnAndValues;s=function(e,t,a=!1,r){if(!e)return;let n=no(t);switch(e.dataType){case eN.SingleSelect:{let{options:t}=e.settings,a=new Set;for(let e of n)t.some(t=>rW([e],t.name))||a.add(e);if(a.size>0)return gP(nJ.noOptionsMatch([...a].join(","),e.name));return}case eN.Number:{let e=new Set;for(let t of n)gD.test(t)||e.add(t);if(e.size>0)return gP(nJ.invalidNumberValue([...e].join(",")));return}case eN.Date:{let e=new Set;for(let t of n){let a=rX(t);if(a)switch(a.operator){case"GREATER_THAN":case"GREATER_THAN_OR_EQUAL":case"LESS_THAN":case"LESS_THAN_OR_EQUAL":null===af(a.value)&&e.add(a.value);break;case"RANGE":{let r=!a.start||null!==af(a.start),n=!a.end||null!==af(a.end);r||n?r?n||e.add(a.end):e.add(a.start):e.add(t);break}case"LESS_THAN_RANGE":a.end&&null===af(a.end)&&e.add(a.end);break;case"GREATER_THAN_RANGE":a.start&&null===af(a.start)&&e.add(a.start);break;default:tA(a)}else null===af(t)&&e.add(t)}if(e.size>0)return gP(nJ.invalidDateValue([...e].join(",")));return}case eN.Iteration:{let t=new Set;for(let a of n){if(a1(a))continue;let r=rX(a);if(r)switch(r.operator){case"GREATER_THAN":case"GREATER_THAN_OR_EQUAL":case"LESS_THAN":case"LESS_THAN_OR_EQUAL":null===r2(r.value,e)&&t.add(r.value);break;case"RANGE":{let n=!r.start||null!==r2(r.start,e),i=!r.end||null!==r2(r.end,e);n||i?n?i||t.add(r.end):t.add(r.start):t.add(a);break}case"LESS_THAN_RANGE":r.end&&null===r2(r.end,e)&&t.add(r.end);break;case"GREATER_THAN_RANGE":r.start&&null===r2(r.start,e)&&t.add(r.start);break;default:tA(r)}else null===r2(a,e)&&t.add(a)}if(t.size>0)return gP(nJ.noIterationMatch([...t].join(","),e.name));return}case eN.Labels:{if(!a)return;let t=r?.labels?function(e){let t=new Set;for(let a of e)t.add(a.name);return t}(r.labels):void 0,i=new Set;for(let e of n)t?.has(e)||i.add(e);if(i.size>0)return gP(nJ.noOptionsMatch([...i].join(","),e.name));return}case eN.Milestone:{if(!a)return;let t=r?.milestones?function(e){let t=new Set;for(let a of e)t.add(a.title);return t}(r.milestones):void 0,i=new Set;for(let e of n)t?.has(e)||i.add(e);if(i.size>0)return gP(nJ.noOptionsMatch([...i].join(","),e.name));return}default:return}}(e,n.value,o,l)}return(0,F.jsx)(gM,{id:t,leftSide:n.field,rightSide:n.value,invalid:e||!u,valueErrors:s,keyErrors:u?void 0:{message:nJ.unknownFieldFilter(n.field)},exclude:n.exclude})}case"is":case"reason":{let a=function(e,t){let a=no(e),r=new Set(Object.values(t)),n=new Set(a.filter(e=>!r.has((function(e){let t=e,a=e.match(/(["])(.*?[^\\])\1/);if(a){let e=a[2];(0,ee.A)(e,"Value must be returned from match"),t=e}return t})(e).toLowerCase())));if(0!==n.size)return{message:nJ.invalidQualifier([...n],t)}}(n.value,iP[n.type]);return(0,F.jsx)(gM,{id:t,leftSide:n.type,invalid:e,exclude:n.exclude,rightSide:n.value,valueErrors:a})}case"last-updated":{let a=(d&&r("last-updated")===h0.None)??!1,i=n.value.match(tq)?void 0:{message:nJ.lastUpdatedValueErrorMessage};return(0,F.jsx)(gM,{id:t,leftSide:n.type,invalid:e||a,exclude:n.exclude,rightSide:n.value,valueErrors:a?void 0:i,keyErrors:e||a?{message:nJ.unknownFieldFilter(n.type)}:void 0})}case"updated":{let a=(d&&r("updated")===h0.None)??!1,i=n.value.match(tK)?void 0:{message:nJ.updatedValueErrorMessage};return(0,F.jsx)(gM,{id:t,leftSide:n.type,invalid:e||a,exclude:n.exclude,rightSide:n.value,valueErrors:a?void 0:i,keyErrors:e||a?{message:nJ.unknownFieldFilter(n.type)}:void 0})}case"no-field":case"has":{let a=function(e,t,a=!1){let r=no(e),n=new Set;for(let e of r)if(!t(e)){if(a&&"type"===e)continue;n.add(e)}if(0!==n.size)return{message:nJ.unknownFieldFilter([...n].join(","))}}(n.field,i,o),r="no-field"===n.type?"no":"has";return(0,F.jsx)(gM,{id:t,leftSide:r,rightSide:n.field,exclude:n.exclude,invalid:e,valueErrors:a?{message:nJ.unknownFieldFilter(n.field)}:void 0})}default:tA(n)}}),gM=(0,K.memo)(function({id:e,leftSide:t,rightSide:a,invalid:r,exclude:n=!1,valueErrors:i,keyErrors:l}){let s=(0,K.useRef)(null),o=(0,K.useRef)(null),d=gk((0,K.useCallback)(e=>!!s.current&&rv(s.current,e),[])),u=gk((0,K.useCallback)(e=>!!o.current&&rv(o.current,e),[]));return(0,F.jsxs)(lx.A,{id:e,ref:s,sx:{position:"relative",display:"inline-block",...gT({invalid:!!(r||l)})},children:[(0,F.jsxs)(lv.A,{sx:{display:"inline-block",whiteSpace:"pre",color:"fg.muted"},role:"textbox","aria-errormessage":l?`${e}-key-errormessage`:void 0,children:[`${n?"-":""}${t}:`,l?(0,F.jsx)(gI.m,{direction:"se",open:d,"aria-label":l.message,contentRef:s,id:`${e}-key-errormessage`,"aria-live":"polite",anchorSide:"inside-bottom",anchorOffset:-2}):null]}),(0,F.jsxs)(lv.A,{ref:o,sx:{position:"relative",display:"inline-block",color:"accent.fg",whiteSpace:"pre",...gT({invalid:!!i,variant:"attention"})},role:"textbox","aria-errormessage":i?`${e}-value-errormessage`:void 0,children:[a,i?(0,F.jsx)(gI.m,{contentRef:o,direction:"se",open:u,"aria-label":i.message,id:`${e}-value-errormessage`,"aria-live":"polite",anchorSide:"inside-bottom",anchorOffset:-2}):null]})]})}),gB=(0,K.memo)(function({value:e,invalid:t,id:a}){return(0,F.jsx)(lv.A,{id:a,sx:{color:"fg.default",position:"relative",display:"inline-block",whiteSpace:"pre",...gT({invalid:t,variant:"danger"})},children:e})});try{g_.displayName||(g_.displayName="Spaces")}catch{}try{gR.displayName||(gR.displayName="TokenizedQuery")}catch{}try{gD.displayName||(gD.displayName="NUMBER_VALIDATION")}catch{}try{(f=QUALIFIERS).displayName||(f.displayName="QUALIFIERS")}catch{}try{gE.displayName||(gE.displayName="Token")}catch{}try{gM.displayName||(gM.displayName="PairFilterToken")}catch{}try{gB.displayName||(gB.displayName="SingleFilterToken")}catch{}let gL={position:"relative",display:"flex",alignItems:"center",zIndex:2,maxHeight:"unset",overflowX:"auto",height:"100%",msOverflowStyle:"none",scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}};function gF({children:e}){return(0,F.jsx)(lx.A,{sx:gL,children:e})}try{gF.displayName||(gF.displayName="TokenizedQueryContainer")}catch{}let gO={color:"fg.subtle"},gG=(0,K.memo)(function({height:e,containerRef:t,value:a,onChange:r,onChangeValue:n,onInputKeyDown:i,onFocus:l,onBlur:s,inputRef:o,filterCount:d,onClearButtonClick:u,onClearButtonKeyDown:c,onResetChanges:m,onSaveChanges:p,setValueFromSuggestion:h,saveButtonText:f,suggestColumns:g=!0,showColumnSuggestionIf:y,hideSuggestions:x=!1,filterIconButtonIcon:b=ly.FilterIcon,hideSaveButton:v=!1,hideCounterLabel:w=!1,hideResetChangesButton:j=!1,children:C,onInputClick:I,...S}){let{memex_table_without_limits:k}=iz(),N=(0,K.useRef)(null);(0,K.useImperativeHandle)(o,()=>N.current);let T=(0,K.useRef)(null);(0,K.useImperativeHandle)(t,()=>T.current);let _=(0,K.useRef)(null),A=fD([_,N,T]),R=!!(a&&(u||c)),[P,D]=(0,K.useState)(A);(0,pk.N)(()=>{D(A&&a.trim().length>0)},[A,a]);let E=(0,nk.M)(i),M=(0,K.useCallback)(e=>{switch(fA(e)){case fN.ESCAPE:if(P){D(!1);return}E.current?.(e);return;case fN.ARROW_DOWN:if(P)return;E.current?.(e);return;case fN.TAB:if(a.length>0)return;P&&D(!1),E.current?.(e);return}},[P,E,D,a.length]),B=(0,K.useCallback)(e=>{e.stopPropagation(),(0,pN.flushSync)(()=>{m?.(e)}),N.current?.focus()},[m]),L=(0,K.useCallback)(e=>{e.stopPropagation(),(0,pN.flushSync)(()=>{p?.(e)}),N.current?.focus()},[p]),O=(0,K.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),(0,pN.flushSync)(()=>{u?.(e)}),N.current?.focus()},[u]),G=(0,K.useCallback)(()=>{N.current?.focus()},[]),V=k&&n;return(0,F.jsxs)(gr,{...S,children:[V?(0,F.jsxs)(lx.A,{sx:{display:"flex",position:"relative",width:"100%",minHeight:32},children:[(0,F.jsx)(gt,{value:a,onChange:n}),(0,F.jsx)(lx.A,{sx:{zIndex:6,position:"absolute",right:28,top:"2px",height:28,paddingLeft:2,display:"flex",alignItems:"center",backgroundColor:e=>`${e.colors.canvas.default}`},children:(0,F.jsx)(gl,{hideCounterLabel:w,filterCount:d})})]}):(0,F.jsxs)(gc,{ref:T,children:[(0,F.jsx)("div",{onClick:G,role:"presentation",children:(0,F.jsx)(lw.A,{sx:gO,icon:b})}),(0,F.jsxs)(gF,{children:[(0,F.jsx)(gR,{query:a,suggestColumns:g,showColumnSuggestionIf:y}),(0,F.jsx)(gw,{areFilterSuggestionsVisible:P,onKeyDown:M,ref:N,onChange:r,value:a,onBlur:s,onFocus:l,onClick:I,...S})]}),(0,F.jsxs)(lx.A,{sx:gV,children:[(0,F.jsx)(gl,{hideCounterLabel:w,filterCount:d}),(0,F.jsx)(fM,{onClick:R?O:void 0,onKeyDown:c})]})]}),(0,F.jsx)(gd,{hideSaveButton:v,hideResetChangesButton:j,onResetChanges:m?B:void 0,onSaveChanges:p&&!v?L:void 0,saveButtonText:f,children:C}),x||V?null:(0,F.jsx)(fS,{testId:gb,ref:_,filterInputRef:N,anchorRef:T,query:a,setQuery:h,suggestColumns:g,showColumnSuggestionIf:y,areFilterSuggestionsVisible:P,setAreFilterSuggestionsVisible:D})]})}),gV={display:"flex",alignItems:"center"};try{gG.displayName||(gG.displayName="TokenizedFilterInput")}catch{}try{gG.displayName||(gG.displayName="TokenizedFilterInput")}catch{}let g$=({query:e,filterCount:t,icon:a})=>(0,F.jsx)(gp.A,{"aria-label":"Filters",block:!0,disabled:!0,leadingVisual:a,value:e,trailingVisual:void 0!==t&&(0,F.jsx)(gn.A,{...(0,ey.G)("disabled-filter-results-count"),children:t})});try{g$.displayName||(g$.displayName="DisabledFilterInput")}catch{}let gW={kind:"InlineDataFragment",name:"searchInputMilestone"};gW.hash="25725c8585936addfbf60c431dd10621";let gz={kind:"InlineDataFragment",name:"searchInputLabel"};gz.hash="52a949cfd65641f7e70925d735bf135d";let gH={kind:"InlineDataFragment",name:"searchInputIssueType"};gH.hash="0e2c4c3c51227e87bbabb7dad24e212c",a(69487);let gU=({query:e,initialQuery:t,onQueryChange:a})=>{let[r,n]=(0,K.useState)(t),i=(0,K.useMemo)(()=>e.trim()!==r,[e,r]),{isEditing:l}=hS(),{hasWorkflowWritePermission:s}=hv(),o=(0,K.useCallback)(e=>{a?.(e)},[a]),d=(0,K.useCallback)(()=>{o("")},[o]),u=(0,K.useCallback)(()=>{o(r)},[r,o]),c=(0,K.useCallback)(e=>{o(e.currentTarget.value)},[o]),m=(0,K.useCallback)(e=>{o(e)},[o]);return(0,K.useEffect)(()=>{n(t)},[t]),{queryCheckpoint:r,editingDisabled:!s||!l,isDirty:i,clearQuery:d,handleQueryChange:c,setValueFromSuggestion:m,setQueryCheckpoint:n,resetChanges:u}},gq=new Map([["Labels",h0.ColumnAndValues],["Milestone",h0.ColumnAndValues],["Type",h0.ColumnAndValues],["Assignees",h0.ColumnOnly],["last-updated",h0.None],["updated",h0.None]]),gK=e=>{if(gq.has(e))return gq.get(e)},gQ=({onQueryChange:e,query:t,initialQuery:a="",milestoneSuggestionsQueryRef:r,labelSuggestionsQueryRef:n,issueTypeSuggestionsQueryRef:i})=>{let{workflow:l}=hS(),{setValueFromSuggestion:s,isDirty:o,editingDisabled:d,clearQuery:u,handleQueryChange:c,resetChanges:m}=gU({query:t,initialQuery:a,workflow:l,onQueryChange:e}),p=(0,ek.usePreloadedQuery)(hW,n),h=(0,ek.usePreloadedQuery)(hz,r),f=(0,ek.usePreloadedQuery)(hH,i),{data:g,loadNext:y,isLoadingNext:x,hasNext:b}=(0,ek.usePaginationFragment)(hq,p.repository?p.repository:null),{data:v,loadNext:w,isLoadingNext:j,hasNext:C}=(0,ek.usePaginationFragment)(hQ,h.repository?h.repository:null),{data:I,loadNext:S,isLoadingNext:k,hasNext:N}=(0,ek.usePaginationFragment)(hX,f.repository?f.repository:null),T=I?.issueTypes?.totalCount||0,_=(I?.issueTypes?.edges||[]).flatMap(e=>e?.node?[(0,ek.readInlineData)(gH,e.node)]:[]),A=g?.labels?.totalCount||0,R=(g?.labels?.edges||[]).flatMap(e=>e?.node?[(0,ek.readInlineData)(gz,e.node)]:[]),P=v?.milestones?.totalCount||0,D=(v?.milestones?.edges||[]).flatMap(e=>e?.node?[(0,ek.readInlineData)(gW,e.node)]:[]);(0,K.useEffect)(()=>{b&&!x&&R.length<A&&y(100)},[y,R,A,b,x]),(0,K.useEffect)(()=>{C&&!j&&D.length<P&&w(100)},[w,D,P,C,j]),(0,K.useEffect)(()=>{N&&!k&&_.length<T&&S(100)},[S,_,T,N,k]);let E=(0,K.useMemo)(()=>[].concat(R),[R]),M=(0,K.useMemo)(()=>[].concat(D),[D]),B=(0,K.useMemo)(()=>[].concat(_),[_]),L=(0,K.useMemo)(()=>({items:[],repoSuggestions:{labels:E,milestones:M,issueTypes:B}}),[E,M,B]);return d?(0,F.jsx)(g$,{query:t,icon:(0,F.jsx)(ly.SearchIcon,{})}):(0,F.jsxs)(fb.Provider,{value:L,children:[(0,F.jsx)(gG,{height:"32px",value:t,onChange:c,onClearButtonClick:u,setValueFromSuggestion:s,onResetChanges:o?m:void 0,filterIconButtonIcon:ly.SearchIcon,suggestColumns:!0,showColumnSuggestionIf:gK,hideSaveButton:!0,hideCounterLabel:!0,"aria-describedby":"query-validation-message"}),o&&0===t.length&&(0,F.jsx)(hM.A.Validation,{variant:"error",id:"query-validation-message",sx:{mt:1,color:"attention.fg"},children:n0.emptyFilterAutoAdd})]})};try{gq.displayName||(gq.displayName="AllowedSuggestedColumnsMap")}catch{}try{gQ.displayName||(gQ.displayName="SearchInput")}catch{}let gJ=({onNoSuggestedRepositories:e})=>{let{isEditing:t,localRepositoryId:a,localQuery:r,initialQuery:n}=hS(),{count:i,searchResultUrl:l,onRepositoryChange:s,onSearchQueryChange:o,repository:d}=hL(),u=d?.nameWithOwner.split("/")[0],[c,m,p]=(0,ek.useQueryLoader)(hW),[h,f,g]=(0,ek.useQueryLoader)(hz),[y,x,b]=(0,ek.useQueryLoader)(hH);return(0,K.useEffect)(()=>(d&&u&&(m({owner:u,repo:d.name},{fetchPolicy:"store-or-network"}),f({owner:u,repo:d.name},{fetchPolicy:"store-or-network"}),x({owner:u,repo:d.name},{fetchPolicy:"store-or-network"})),()=>{p(),g(),b()}),[d,b,p,g,x,m,f,u]),(0,F.jsx)(hA,{icon:ly.RepoIcon,iconBg:"severe.subtle",iconColor:"attention.fg",headerDescription:n0.getItemsBlockLabel,...(0,ey.G)("get-items-block"),children:(0,F.jsxs)(hM.A,{sx:{flex:1,alignItems:"stretch"},children:[(0,F.jsx)(hM.A.Label,{children:"Filters"}),(0,F.jsxs)(lx.A,{sx:{display:"flex",flex:"auto"},children:[(0,F.jsx)(h$,{targetRepositoryId:a,sx:{alignSelf:"start"},onRepositorySelected:s,onNoSuggestedRepositories:e,isEditing:t}),(0,F.jsx)(lx.A,{sx:{ml:2,flex:"1 1 100%"},children:c&&h&&y?(0,F.jsx)(gQ,{labelSuggestionsQueryRef:c,milestoneSuggestionsQueryRef:h,issueTypeSuggestionsQueryRef:y,onQueryChange:o,initialQuery:n,query:r}):(0,F.jsx)(hE.O,{variant:"rounded",height:"32px",width:"100%"})})]}),t&&l&&(0,F.jsxs)(lv.A,{sx:{color:"fg.muted",paddingTop:3},children:[(0,F.jsxs)(pw.A,{sx:{alignSelf:"start"},target:"_blank",rel:"noreferrer",href:l,...(0,ey.G)("search-result-link"),children:[" ","See ",i," existing items that match this query ",(0,F.jsx)(ly.LinkExternalIcon,{})]}),(0,F.jsxs)(lx.A,{sx:{paddingTop:3},children:[n0.autoAddManualTip," ",(0,F.jsx)(pw.A,{sx:{alignSelf:"start"},target:"_blank",rel:"noreferrer",href:"https://docs.github.com/issues/planning-and-tracking-with-projects/managing-items-in-your-project/adding-items-to-your-project#adding-multiple-issues-or-pull-requests-from-a-repository",...(0,ey.G)("add-multiple-link"),"aria-label":"Link to GitHub Docs page about adding multiple issues or pull requests to a project",children:(0,F.jsx)(ly.LinkExternalIcon,{})})]})]})]})})};try{gJ.displayName||(gJ.displayName="GetItemsBlock")}catch{}let gX=()=>{let{itemMatchesFilterQuery:e}=i3(),{items:t}=ug(),{setFilterCount:a,localQuery:r,setLocalQuery:n,setLocalContentTypes:i}=hS(),l=(0,K.useRef)(void 0),s=(0,K.useCallback)(a=>t.filter(t=>e(t,nw(a))).length,[e,t]),o=(0,K.useCallback)(e=>{n(e),l.current&&l.current.cancel(),l.current=(0,nN.A)(()=>{i(hc(e))},200),l.current()},[n,i]);return(0,K.useEffect)(()=>{a(s(r))},[s,r,a]),{onSearchQueryChange:o}},gY=({field:e,unit:t,value:a})=>(0,F.jsxs)(lv.A,{as:"p",sx:{fontSize:0,color:"fg.muted",display:"flex",alignItems:"center",mt:2,mb:0,width:"100%"},children:[(0,F.jsx)(lx.A,{as:"span",sx:{display:"flex",mr:1},"aria-hidden":"true",children:(0,F.jsx)(ly.StopwatchIcon,{size:14})}),(0,F.jsxs)("span",{children:["Using the ",e," operator means that your workflow will run every ",a," ",t]})]});try{gY.displayName||(gY.displayName="TimeBoundFilterWarning")}catch{}let gZ={"last-updated":{field:"last-updated",unit:"hours",value:12},updated:{field:"updated",unit:"hours",value:12}},g0=()=>{let{workflow:e,initialQuery:t,localQuery:a,filterCount:r}=hS(),{hasWorkflowWritePermission:n}=hv(),{items:i}=ug(),{onSearchQueryChange:l}=gX(),{setValueFromSuggestion:s,isDirty:o,editingDisabled:d,clearQuery:u,handleQueryChange:c,resetChanges:m}=gU({query:a,initialQuery:t,workflow:e,onQueryChange:l}),p=(0,K.useRef)(null),h=(0,K.useRef)(null),f=(0,K.useMemo)(()=>m9(e),[e]),g=(0,K.useMemo)(()=>{let e={};for(let t of nr(a).orderedTokenizedFilters){let a=gZ[t.type];a&&!e[t.type]&&(e[t.type]=a)}return Object.values(e)},[a]),y=(0,K.useMemo)(()=>({items:i}),[i]),x=(0,K.useId)(),b=(0,K.useId)(),v=f&&g.length>0;return(0,F.jsxs)(hA,{icon:ly.FilterIcon,iconBg:"accent.subtle",iconColor:"accent.fg",headerDescription:n0.autoArchiveItemsLabel,children:[(0,F.jsxs)(hM.A,{sx:{flex:1,alignItems:"stretch"},children:[(0,F.jsx)(hM.A.Label,{children:"Filters"}),d?(0,F.jsx)(g$,{query:a,filterCount:n?r:void 0,icon:(0,F.jsx)(ly.FilterIcon,{})}):(0,F.jsx)(fb.Provider,{value:y,children:(0,F.jsx)(gG,{height:"32px",containerRef:p,value:a,onChange:c,inputRef:h,onClearButtonClick:u,setValueFromSuggestion:s,filterCount:r,onResetChanges:o?m:void 0,suggestColumns:!1,hideSaveButton:!0,"aria-describedby":v?b:x})}),o&&0===a.length&&(0,F.jsx)(hM.A.Validation,{variant:"error",id:x,children:n0.emptyFilterDefault})]}),v&&(0,F.jsx)(lx.A,{sx:{width:"100%"},id:b,...(0,ey.G)("time-bound-notification"),children:g.map(({field:e,value:t,unit:a})=>(0,F.jsx)(gY,{field:e,value:t,unit:a},e))})]})};try{g0.displayName||(g0.displayName="GetProjectItemsBlock")}catch{}let g1=()=>{let{isEditing:e}=hS();return(0,F.jsx)(hA,{icon:ly.IssueTracksIcon,iconBg:"accent.subtle",iconColor:"accent.fg",headerDescription:n0.getSubIssuesBlockLabel,...(0,ey.G)("automation-get-sub-issues-block"),children:e&&(0,F.jsxs)("div",{children:[(0,F.jsxs)(lx.A,{sx:{mb:2},children:["Enabling this workflow will automatically add sub-issues in the following scenarios:",(0,F.jsxs)(lx.A,{as:"ul",sx:{pt:2,pl:6},children:[(0,F.jsx)("li",{children:"When a sub-issue is added to an issue in the project"}),(0,F.jsx)("li",{children:"When an issue with sub-issues is added to the project"})]})]}),(0,F.jsx)("div",{children:"Note: This workflow will initially add all existing sub-issues of issues in the project."})]})})};try{g1.displayName||(g1.displayName="GetSubIssuesBlock")}catch{}let g2=({selectedOption:e,options:t,isEditing:a,onStatusSelected:r,testId:n,sx:i})=>{let l=(0,K.useMemo)(()=>t.map(e=>({text:e.name,id:e.name})),[t]),[s,o]=(0,K.useState)(""),[d,u]=(0,K.useState)(!1),c=(0,K.useCallback)(()=>{u(!1)},[]),m=l.filter(e=>e.text?.toLowerCase().startsWith(s.toLowerCase())),p=l.find(t=>t.text===e?.name);return(0,F.jsx)(hO.X,{placeholderText:n0.setValueLabel,open:d,onOpenChange:u,selected:p,onFilterChange:o,items:m,onSelectedChange:e=>{r(t.find(t=>t.name===e?.text))},renderAnchor:({children:t,...r})=>(0,F.jsx)(p4.Q,{sx:i,disabled:!a,trailingVisual:ly.TriangleDownIcon,...r,...(0,ey.G)(`${n}-anchor`),children:e?(0,F.jsx)(p$,{children:`Status: ${e?.nameHtml}`}):n0.invalidNoValue}),overlayProps:{width:"small",onMouseDown:e=>e.stopPropagation(),height:"auto",onClickOutside:c,...(0,ey.G)(`${n}-panel`)}})};try{g2.displayName||(g2.displayName="StatusPicker")}catch{}let g5=({headerDescription:e})=>{let{isEditing:t,workflow:a,replaceAction:r}=hS(),n=a.actions[0];(0,ee.A)(n,"Action must be defined");let{column:i,selectedOption:l}=hb(n),s=i&&"options"in i.settings?i.settings.options:[];return(0,F.jsx)(hA,{icon:ly.PencilIcon,iconBg:"attention.subtle",iconColor:"attention.fg",headerDescription:e,children:(0,F.jsx)(g2,{onStatusSelected:e=>{r({...n,arguments:{...n.arguments,fieldOptionId:e?.id}})},options:s,selectedOption:l?{...l}:void 0,isEditing:t,testId:"workflow-set-field"})})};try{g5.displayName||(g5.displayName="SetBlock")}catch{}let g3=({selectedContentTypes:e,contentTypes:t,isEditing:a,onContentTypesSelected:r,testId:n,sx:i})=>{let{setIsWorkflowValid:l}=hS(),s=(0,K.useMemo)(()=>t.map(e=>({text:function(e){switch(e){case m6.PullRequest:return nH.pullRequest;case m6.Issue:return nH.issue;default:tA(e)}}(e),id:e})),[t]),[o,d]=(0,K.useState)(""),[u,c]=(0,K.useState)(!1),m=(0,K.useCallback)(()=>{c(!1)},[]),p=(0,K.useCallback)(e=>{0===e.length?l(!1):l(!0)},[l]),h=s.filter(e=>e.text.toLowerCase().startsWith(o.toLowerCase())),f=s.filter(t=>e.includes(t.id));return(0,F.jsx)(hO.X,{placeholderText:n0.selectContentType,open:u,onOpenChange:c,selected:f,onFilterChange:d,items:h,onSelectedChange:e=>{let t=e.map(e=>e.id).filter(e=>void 0!==e&&e in m6);p(t),r(t)},renderAnchor:({children:e,...t})=>(0,F.jsx)(p4.Q,{sx:i,disabled:!f||!a,trailingVisual:ly.TriangleDownIcon,...t,...(0,ey.G)(`${n}-anchor`),children:f.length>0?e:n0.invalidNoContentType}),overlayProps:{width:"small",onMouseDown:e=>e.stopPropagation(),height:"auto",onClickOutside:m,...(0,ey.G)(`${n}-panel`)}})};try{g3.displayName||(g3.displayName="ContentTypePicker")}catch{}let g4=({description:e,icon:t,iconColor:a,iconBg:r})=>{let{isEditing:n,workflow:i,localContentTypes:l,setLocalContentTypes:s}=hS(),{getValidContentTypesForTriggerType:o}=pb(),d=o(i.triggerType);return(0,F.jsx)(hA,{icon:t,iconBg:r,iconColor:a,headerDescription:e,children:d.length>1&&(0,F.jsx)(g3,{contentTypes:d,onContentTypesSelected:s,selectedContentTypes:l,isEditing:n,testId:"workflows-when-content-types"})})};try{g4.displayName||(g4.displayName="WhenBlock")}catch{}let g6=({action:e,onNoSuggestedRepositories:t})=>{let{workflow:a}=hS();switch(e.actionType){case m3.SetField:{let e=function(e){switch(e){case m5.ItemAdded:return{description:n0.itemAddedToProjectLabel,icon:pi(e),iconColor:"success.fg",iconBg:"success.subtle"};case m5.Reopened:return{description:n0.itemReopenedLabel,icon:pi(e),iconColor:"success.fg",iconBg:"success.subtle"};case m5.Closed:return{description:n0.itemClosedLabel,icon:pi(e),iconColor:"fg.muted",iconBg:"canvas.inset"};case m5.ReviewChangesRequested:return{description:n0.codeChangesRequestedLabel,icon:pi(e),iconColor:"danger.fg",iconBg:"danger.subtle"};case m5.ReviewApproved:return{description:n0.codeReviewApprovedLabel,icon:pi(e),iconColor:"open.fg",iconBg:"success.subtle"};case m5.Merged:return{description:n0.pullRequestMergedLabel,icon:pi(e),iconColor:"done.fg",iconBg:"done.subtle"};default:throw Error(`${e} is not a valid MemexWorkflowTriggerType for a WhenBlock`)}}(a.triggerType);return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(g4,{...e}),(0,F.jsx)(hT,{}),(0,F.jsx)(g5,{headerDescription:n0.setValueLabel})]})}case m3.GetProjectItems:if(a.triggerType===m5.ProjectItemColumnUpdate)return(0,F.jsx)(g5,{headerDescription:n0.projectItemColumnUpdateLabel});return(0,F.jsx)(g0,{});case m3.GetItems:return(0,F.jsx)(gJ,{onNoSuggestedRepositories:t});case m3.ArchiveProjectItem:return(0,F.jsx)(hP,{});case m3.AddProjectItem:return(0,F.jsx)(hR,{headerDescription:e.arguments.subIssue?n0.addSubIssuesBlockLabel:n0.addItemBlockLabel});case m3.CloseItem:return(0,F.jsx)(hD,{});case m3.GetSubIssues:return(0,F.jsx)(g1,{});default:return null}};try{g6.displayName||(g6.displayName="ActionBlock")}catch{}let g8=({onNoSuggestedRepositories:e})=>{let{workflow:t}=hS(),a=(0,K.useMemo)(()=>t.actions.sort(pa),[t.actions]);return(0,F.jsx)(lx.A,{sx:{display:"flex",flexDirection:"column",alignItems:"center",minWidth:"80%",px:3},children:a.map((t,r)=>(0,F.jsxs)(K.Fragment,{children:[(0,F.jsx)(g6,{action:t,sortedActions:a,onNoSuggestedRepositories:e}),r<a.length-1&&(0,F.jsx)(hT,{})]},t.id??t.actionType))})};try{g8.displayName||(g8.displayName="AutomationGraph")}catch{}var g7=a(55516),g9=a(95776);let ye=()=>{let[e,t]=(0,K.useState)(!1),{workflowName:a,isEditing:r}=hS(),n=(0,K.useRef)(null);return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsxs)(lx.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,F.jsx)(h_.A,{as:"h2",sx:{fontSize:3,color:"fg.default",wordBreak:"break-word"},id:"workflow-name",...(0,ey.G)("workflow-name-heading"),children:a}),!r&&(0,F.jsx)(fE.K,{ref:n,icon:ly.PencilIcon,onClick:()=>t(!0),variant:"invisible","aria-label":"Edit workflow name",...(0,ey.G)("workflow-name-edit-button")})]}),(0,F.jsx)(yt,{isOpen:e,setIsOpen:t,returnFocusRef:n})]})},yt=({isOpen:e,setIsOpen:t,returnFocusRef:a})=>{let{workflowNames:r}=pb(),{workflowName:n,saveNameChange:i}=hS(),[l,s]=(0,K.useState)(n),[o,d]=(0,K.useState)(),u=(0,K.useRef)(null),c=(0,K.useCallback)(e=>{let t=pd(e,r);t.isValid?o&&d(void 0):d(t.errorMessage)},[r,o]),m=(0,g7.d)(c,200),p=(0,K.useCallback)(e=>{let t=e.target.value;s(t),m(t)},[m]),h=(0,K.useCallback)(()=>{o||(t(!1),i(l))},[o,l,i,t]),f=(0,K.useCallback)(()=>{s(n),t(!1),d(void 0)},[t,n]);return(0,F.jsxs)(g9.A,{isOpen:e,initialFocusRef:u,returnFocusRef:a,onDismiss:f,"aria-labelledby":"workflow-name-editor-header",children:[(0,F.jsx)(g9.A.Header,{sx:{background:"none",border:"none"},id:"workflow-name-editor-header",children:(0,F.jsx)(h_.A,{as:"h3",sx:{fontSize:3},children:"Edit workflow name"})}),(0,F.jsx)(lx.A,{sx:{px:3},children:(0,F.jsxs)(hM.A,{sx:{flex:1},children:[(0,F.jsx)(hM.A.Label,{children:"Workflow name"}),(0,F.jsx)(gp.A,{ref:u,name:"workflowName",value:l,onChange:p,validationStatus:o?"error":void 0,sx:{width:"100%"},"aria-describedby":"workflow-name-editor-error",...(0,ey.G)("workflow-name-editor-input")}),o&&(0,F.jsx)(hM.A.Validation,{variant:"error",id:"workflow-name-editor-error",children:o})]})}),(0,F.jsxs)(lx.A,{sx:{display:"flex",justifyContent:"flex-end",mt:4,py:3,px:3,borderTop:"1px solid",borderColor:"border.default",gap:1},children:[(0,F.jsx)(p4.Q,{variant:"default",onClick:f,children:"Cancel"}),(0,F.jsx)(p4.Q,{variant:"primary",onClick:h,children:"Save"})]})]},e?"open":"closed")};try{ye.displayName||(ye.displayName="WorkflowName")}catch{}try{yt.displayName||(yt.displayName="WorkflowNameEditorDialog")}catch{}let ya=()=>(0,F.jsxs)(lx.A,{sx:{mb:5,color:"fg.muted",fontSize:"12px",display:"flex",alignItems:"center"},...(0,ey.G)("read-only-label"),children:[(0,F.jsx)(lw.A,{icon:ly.LockIcon,size:12,sx:{color:"fg.muted",mr:1}}),(0,F.jsx)("span",{children:n0.readOnlyLabel})]}),yr=(0,K.forwardRef)((e,t)=>{let{discard:a}=hS();return(0,F.jsx)(p4.Q,{ref:t,onClick:a,...(0,ey.G)("workflow-discard-button"),sx:{ml:2},children:n0.discardWorkflow})});yr.displayName="DiscardButton";let yn=({clientId:e})=>{let{deleteNonPersistedWorkflow:t}=pb(),a=(0,uX.S)(),r=(0,K.useCallback)(async()=>{await a({title:n0.deleteWorkflowConfirmationTitle,content:n0.deleteWorkflowConfirmationContent,confirmButtonContent:n0.deleteWorkflowConfirmationButton,confirmButtonType:"danger"})&&t(e)},[a,t,e]);return(0,F.jsx)(p4.Q,{onClick:()=>r(),...(0,ey.G)("workflow-delete-button"),sx:{ml:2},children:n0.deleteWorkflow})},yi=({children:e})=>{let{isEditing:t,edit:a,workflow:r,save:n,isWorkflowValid:i}=hS(),{shouldDisableWorkflowToggle:l}=hS(),s=(0,K.useCallback)(async()=>{n(!r.enabled)},[n,r]),o=m7(r),d=(0,K.useRef)(null),u=(0,K.useRef)(null),c=p8(t);return(0,K.useEffect)(()=>{t!==c&&(t?d.current?.focus():u.current?.focus())},[t,c]),(0,F.jsxs)(lx.A,{sx:{display:"flex",flexDirection:"column",height:"100%"},children:[(0,F.jsxs)(lx.A,{sx:{py:[1,2,3],px:[2,3,4],display:"flex",justifyContent:"space-between",alignItems:"baseline",width:"100%",borderBottom:"1px solid",borderBottomColor:"border.subtle"},children:[(0,F.jsx)(ye,{}),(0,F.jsxs)(lx.A,{sx:{display:"flex"},children:[!t&&(0,F.jsxs)(F.Fragment,{children:[o&&(0,F.jsx)("span",{...(0,ey.G)("workflow-enable-toggle-container"),children:(0,F.jsx)(p6.A,{checked:r.enabled,onClick:s,disabled:l,"aria-labelledby":"workflow-name"})}),(0,F.jsx)(p4.Q,{ref:u,sx:{ml:2},leadingVisual:ly.PencilIcon,onClick:a,...(0,ey.G)("workflow-edit-button"),children:n0.editWorkflow})]}),t&&(0,F.jsxs)(F.Fragment,{children:[!o&&r.isUserWorkflow?(0,F.jsx)(yn,{clientId:r.clientId}):(0,F.jsx)(yr,{ref:d}),(0,F.jsx)(p4.Q,{sx:{ml:2},variant:"primary",disabled:!i,onClick:()=>{n()},...(0,ey.G)("workflow-save-button"),children:n0.saveWorkflow})]})]})]}),(0,F.jsxs)(lx.A,{sx:{display:"flex",flexDirection:"column",alignItems:"center",height:"100%",backgroundColor:"canvas.inset",py:5,borderRadius:2},children:[!t&&(0,F.jsx)(ya,{}),e]})]})},yl=({workflow:e,onNoSuggestedRepositories:t,startInEditMode:a})=>(0,F.jsx)(hI,{startInEditMode:a,initialWorkflow:e,children:(0,F.jsx)(ErrorBoundary,{fallback:(0,F.jsx)(hk,{heading:"Oops!",content:"Something went wrong loading this workflow configuration."}),children:(0,F.jsx)(yi,{children:(0,F.jsx)(g8,{onNoSuggestedRepositories:t})})})});try{ya.displayName||(ya.displayName="ReadOnlyLabel")}catch{}try{yn.displayName||(yn.displayName="DeleteButton")}catch{}try{yi.displayName||(yi.displayName="AutomationGraphViewContent")}catch{}try{yl.displayName||(yl.displayName="AutomationGraphView")}catch{}var ys=a(19509);let yo=(0,K.forwardRef)(function({isActive:e,className:t,...a},r){return(0,F.jsx)(cz,{...a,ref:r,className:({isActive:a})=>a||e?`${t} selected`.trim():t??""})});try{yo.displayName||(yo.displayName="NavLinkWithActiveClassName")}catch{}try{yo.displayName||(yo.displayName="NavLinkWithActiveClassName")}catch{}let yd=(0,K.forwardRef)(function({to:e,children:t,isActive:a,...r},n){let i=(0,J.x$)(e),l=(0,J.RQ)({path:i.pathname,end:!0});return(0,F.jsx)(ys.c.Item,{"aria-current":(!!a||!!l)&&"page",as:yo,...r,to:e,ref:n,children:t})});try{yd.displayName||(yd.displayName="NavLinkActionListItem")}catch{}var yu=a(89323);let yc=({workflowToDuplicate:e})=>{let{setIsDialogOpen:t,applyWorkflowTemplate:a}=pv(),{autoAddWorkflowLimitReached:r,setWorkflowMenuState:n}=pb(),i=(0,K.useCallback)(r=>{a(e),t(!0),n(e.clientId),r.stopPropagation()},[a,e,t,n]);return(0,F.jsxs)(fi.l.Item,{onSelect:i,disabled:r,inactiveText:r?n1.autoAddWorkflowLimitReached:void 0,children:[(0,F.jsx)(fi.l.LeadingVisual,{children:(0,F.jsx)(ly.DuplicateIcon,{})}),n1.duplicateWorkflowLabel]})};try{yc.displayName||(yc.displayName="DuplicateWorkflowButton")}catch{}let ym=(0,K.forwardRef)(({workflow:e,showDelete:t,isOpen:a},r)=>{let{deleteWorkflow:n,setWorkflowMenuState:i,handleReturnFocus:l}=pb(),s=(0,ek.useRelayEnvironment)(),o=(0,uX.S)(),d=(0,K.useCallback)(()=>{i(e.clientId),l(e.clientId)},[i,e.clientId,l]),u=(0,K.useCallback)(async t=>{let a=await o({title:n0.deleteWorkflowConfirmationTitle,content:n0.deleteWorkflowConfirmationContent,confirmButtonContent:n0.deleteWorkflowConfirmationButton,confirmButtonType:"danger"});i(e.clientId),a?n(t.number,s):l(e.clientId)},[o,n,s,l,i,e.clientId]),[c,m]=(0,K.useState)(a),p=(0,K.useCallback)(t=>{t.target instanceof Element&&t.target?.closest("a")?.href?.includes("/workflows/")||i(e.clientId)},[i,e.clientId]),h=(0,K.useRef)(null);(0,fn.T)(r,h);let f=(0,K.useMemo)(()=>{let a=[];return m7(e)&&(t&&a.push((0,F.jsxs)(fi.l.Item,{variant:"danger",onSelect:()=>u(e),...(0,ey.G)(`workflow-nav-item-menu-delete-${e.clientId}`),children:[(0,F.jsx)(fi.l.LeadingVisual,{children:(0,F.jsx)(ly.TrashIcon,{})}),n0.deleteWorkflowCallToAction]},`${e.clientId}-delete-option`)),pe(e)&&a.push((0,F.jsx)(yc,{workflowToDuplicate:e},`${e.clientId}-duplicate-option`))),a},[u,t,e]);return(0,F.jsx)(F.Fragment,{children:f.length>0?(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(fE.K,{id:`workflow-nav-item-menu-${e.clientId}`,ref:h,icon:ly.KebabHorizontalIcon,variant:"invisible","aria-label":"Open workflow options",sx:{color:"fg.default",py:0},...(0,ey.G)(`workflow-nav-item-menu-${e.clientId}`)},`workflow-nav-item-menu-${e.clientId}`),(0,F.jsx)(yu.W,{anchorRef:h,open:c,onOpenChange:m,children:(0,F.jsx)(yu.W.Overlay,{sx:{overflow:"visible"},onClickOutside:p,onEscape:d,children:(0,F.jsx)(fi.l,{...(0,ey.G)(`workflow-nav-item-menu-list-${e.clientId}`),children:f},`workflow-nav-item-menu-list-${e.clientId}`)})})]}):null})});ym.displayName="WorkflowMenu";let yp=(0,K.memo)(({activeWorkflow:e})=>{let{workflows:t,workflowWithTriggerTypeIsEnableable:a,setWorkflowMenuState:r,resetWorkflowMenuStates:n,isWorkflowMenuOpen:i,getWorkflowMenuItemsMap:l}=pb(),{isArchiveFull:s}=mY(),o=(0,K.useCallback)((e,t)=>{["button","svg","path"].includes(e.target.tagName.toLowerCase())?(e.preventDefault(),r(t)):n()},[n,r]),d=mK();return(0,F.jsx)(ys.c,{...(0,ey.G)("settings-side-nav"),children:(0,F.jsxs)(ys.c.Group,{children:[(0,F.jsx)(fi.l.GroupHeading,{as:"h2",children:"Default workflows"}),t.map(r=>{let n=a(r.triggerType),u=r.clientId===e.clientId,c=r.isUserWorkflow&&!m7(r);return(0,F.jsx)(yd,{to:{pathname:lt.generatePath({...d,workflowClientId:r.clientId})},onClick:e=>o(e,r.clientId),tabIndex:n?0:-1,isActive:u,sx:{pointerEvents:n?"auto":"none",opacity:n?void 0:.5,minHeight:"44px",display:"flex",alignItems:"center"},...(0,ey.G)(`workflow-nav-item-${pr(r)}`),children:(0,F.jsxs)(lx.A,{sx:{display:"flex",flex:"auto",alignItems:"center",justifyContent:"space-between"},children:[(0,F.jsxs)(lx.A,{sx:{display:"flex",alignItems:"center",wordBreak:"break-word"},children:[(0,F.jsx)(yh,{workflow:r,isActive:u,isArchiveFull:s,isNonPersistedUserWorkflow:c}),(0,F.jsx)(yf,{name:r.name,isNonPersistedUserWorkflow:c})]}),(0,F.jsx)(lx.A,{sx:{flexShrink:"0",display:"flex",alignItems:"center"},children:m7(r)&&(0,F.jsx)(ym,{ref:e=>{let t=l();e?t.set(r.clientId,e):t.delete(r.clientId)},workflow:r,showDelete:!function(e,t){let a=t.actions.map(e=>e.actionType);return 1===e.filter(e=>e.id&&e.triggerType===t.triggerType&&e.actions.every(e=>a.includes(e.actionType))).length}(t,r),isOpen:i(r.clientId)},`workflow-nav-list-item-${r.clientId}`)})]})},r.clientId)})]})})});yp.displayName="AutomationSideNav";let yh=({workflow:e,isActive:t,isArchiveFull:a,isNonPersistedUserWorkflow:r})=>r?(0,F.jsx)(lw.A,{icon:ly.DotFillIcon,size:20,sx:{mr:1,color:"attention.emphasis"}}):a&&m9(e)?(0,F.jsx)(lw.A,{icon:ly.DotFillIcon,size:20,sx:{mr:1,color:"danger.fg"}}):e.enabled?(0,F.jsx)(lw.A,{icon:ly.DotFillIcon,size:20,sx:{mr:1,color:"success.emphasis"}}):pu(e).isValid?(0,F.jsx)(lw.A,{icon:ly.DotIcon,size:20,sx:{mr:1,color:t?"fg.default":"fg.muted"}}):(0,F.jsx)(lw.A,{icon:ly.StopIcon,size:14,sx:{ml:"3px",mr:"7px",color:"danger.fg"}}),yf=({name:e,isNonPersistedUserWorkflow:t})=>t?(0,F.jsx)(lv.A,{sx:{fontStyle:"italic"},children:e}):(0,F.jsx)("span",{children:e});try{yh.displayName||(yh.displayName="ProjectWorkflowIcon")}catch{}try{yf.displayName||(yf.displayName="WorkflowName")}catch{}let yg=({onWorkflowNameValidation:e,onWorkflowNameChange:t,debounceDelay:a,workflowNames:r})=>{let[n,i]=(0,K.useState)(),l=(0,K.useCallback)(t=>{let a=pd(t,r);a.isValid?n&&(e?.(!0),i(void 0)):(e?.(!1),i(a.errorMessage))},[n,e,r]),s=(0,g7.d)(l,a??200);return{validate:l,onChangeHandler:(0,K.useCallback)(e=>{let a=e.target.value;t?.(a),s(a)},[s,t]),error:n}},yy=({setStartInEditMode:e})=>{let{isDialogOpen:t,setIsDialogOpen:a,workflowName:r,setWorkflowName:n,workflowTemplate:i,applyWorkflowTemplate:l,returnFocusClientId:s}=pv(),{workflowNames:o,activeWorkflow:d,newWorkflow:u,handleReturnFocus:c}=pb(),{error:m,onChangeHandler:p,validate:h}=yg({onWorkflowNameChange:n,workflowNames:d?new Set(o).add(d.name.toLocaleLowerCase()):o}),f=(0,K.useRef)(null),g=(0,K.useCallback)(()=>{u(r,"query_matched_add_project_item",i),a(!1),e(!0)},[u,e,a,r,i]),y=(0,K.useCallback)(()=>{a(!1),l(),c(s)},[l,a,c,s]);return(0,K.useEffect)(()=>{t&&h(r)},[t]),(0,F.jsxs)(g9.A,{isOpen:t,initialFocusRef:f,onDismiss:y,"aria-labelledby":"new-workflow-header",children:[(0,F.jsx)(g9.A.Header,{sx:{background:"none",border:"none"},id:"new-workflow-header",children:(0,F.jsx)(h_.A,{as:"h3",sx:{fontSize:3},children:n1.duplicateWorkflowLabel})}),(0,F.jsx)(lx.A,{sx:{px:3},children:(0,F.jsxs)(hM.A,{sx:{my:2},children:[(0,F.jsx)(hM.A.Label,{children:n1.workflowNameInputLabel}),(0,F.jsx)(gp.A,{ref:f,sx:{width:"100%",minHeight:"34px"},value:r,onChange:p,validationStatus:m?"error":void 0,...(0,ey.G)("new-workflow-dialog-input")}),m&&(0,F.jsx)(lv.A,{as:"p",sx:{color:"danger.fg"},...(0,ey.G)("new-workflow-dialog-error"),children:m})]})}),(0,F.jsx)(lx.A,{sx:{display:"flex",justifyContent:"flex-end",mt:4,py:3,px:3,borderTop:"1px solid",borderColor:"border.default"},children:(0,F.jsx)(p4.Q,{disabled:!!m,variant:"primary",onClick:g,...(0,ey.G)("new-workflow-dialog-create-button"),children:n1.duplicateButton})})]})};try{yy.displayName||(yy.displayName="CreateNewWorkflowDialog")}catch{}let yx=()=>{let[e,t]=(0,K.useState)(!1),{activeWorkflow:a}=pb(),{shouldDisableArchiveForActiveWorkflow:r,setArchiveStatus:n}=mY(),[i,l]=(0,K.useState)(!1);(0,K.useEffect)(()=>(n(),()=>{n.cancel()}),[n]),(0,K.useEffect)(()=>{t(!1),l(!1)},[a]);let s=(0,K.useCallback)(()=>{t(!0)},[t]),{projectOwner:o,isOrganization:d}=eU(),u=o?.name?.toLowerCase();return(0,F.jsx)(mU.M,{containerWidth:"full",columnGap:"none",padding:"none",sx:{height:"100%","& > *":{minHeight:"100%"}},children:a?(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(mU.M.Pane,{position:"start",sx:{padding:[3,null,null,4],borderRight:"1px solid",borderColor:"border.subtle",height:[null,null,"100%"]},children:(0,F.jsx)(yp,{activeWorkflow:a})}),(0,F.jsxs)(mU.M.Content,{width:"full",padding:"none",children:[r?(0,F.jsx)(yb,{}):null,e?(0,F.jsx)(p2,{isOrganization:d,owner:u}):(0,F.jsx)(yl,{startInEditMode:i,workflow:a,onNoSuggestedRepositories:s},a.id)]}),(0,F.jsx)(yy,{setStartInEditMode:l})]}):(0,F.jsx)("div",{children:"No workflows"})})},yb=()=>{let{projectNumber:e}=mw(),t=mK(),a=e?ls.generatePath(t):"";return(0,F.jsx)(mq.A,{variant:"danger",sx:{mb:3},...(0,ey.G)("archive-full-warning"),children:(0,F.jsxs)(lx.A,{sx:{display:"flex",alignItems:"center"},children:[(0,F.jsx)(lw.A,{icon:ly.StopIcon,size:14,sx:{color:"danger.fg"}}),(0,F.jsxs)(lv.A,{sx:{ml:"8px"},children:["This workflow is disabled because the Archive is full. Remove items from"," ",(0,F.jsx)(cW,{to:a,children:"the Archive"})," to enable this workflow."]})]})})};try{yx.displayName||(yx.displayName="AutomationView")}catch{}try{yb.displayName||(yb.displayName="FullArchiveWarning")}catch{}function yv(){return mL(),(0,F.jsx)(mz,{children:(0,F.jsx)(mF,{...(0,ey.G)("automation-page"),children:(0,F.jsx)(yx,{})})})}try{yv.displayName||(yv.displayName="AutomationPage")}catch{}let yw=()=>{window.location.reload()},yj=()=>(0,F.jsx)(hk,{as:"main",headingAs:"h1",heading:"This project failed to load",content:"Sorry about that. Please try refreshing and contact us if the problem persists.",...(0,ey.G)("project-error-fallback"),children:(0,F.jsx)(p4.Q,{variant:"primary",onClick:yw,sx:{mt:2,mx:"auto"},children:"Reload"})});try{yj.displayName||(yj.displayName="ProjectErrorFallback")}catch{}var yC=a(10042);function yI(e){return!!yN(e)&&"string"==typeof e.type&&"payload"in e}function yS(e){return!!yN(e)&&"project_items_bulk_update_complete"===e.type}function yk(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}function yN(e){return yk(e)&&Object.prototype.hasOwnProperty.call(e,"type")}function yT(e,t,a,r){let n=r||function(e){l||(l=eA("memex-alive"));let t=`${e}Channel`;return l?.[t]}(t),i=(0,nk.M)(a),[s,o]=(0,K.useState)({});return(0,K.useEffect)(()=>{let a=e.current;if(!a||!n)return;let r=[`socket:${t}`,e=>{e instanceof CustomEvent&&e.detail&&"object"==typeof e.detail&&"data"in e.detail&&i.current(e.detail)}];return a.addEventListener(...r),()=>{a.removeEventListener(...r)}},[n,t,i,e]),(0,K.useEffect)(()=>{o({className:"js-socket-channel","data-channel":n})},[n]),[s]}function y_(e){return document.addEventListener("visibilitychange",e),()=>{document.removeEventListener("visibilitychange",e)}}function yA(){return!document.hidden}function yR(){return!0}let yP=()=>(0,K.useSyncExternalStore)(y_,yA,yR);function yD(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}let yE=new class BulkUpdateProgress{constructor(){yD(this,"requestId",void 0),yD(this,"percentage",void 0),yD(this,"outstandingTimeouts",void 0),yD(this,"pending",e=>!!e&&(this.reset(),this.requestId=e,!0)),yD(this,"progress",(e,t)=>{if(this.requestId===e)return this.percentage=Math.min(Math.max(0,this.percentage,t),100),this.percentage}),yD(this,"complete",(e,t,a)=>{if(this.requestId!==e)return!1;this.percentage=100;let r=setTimeout(()=>{this.requestId=void 0,this.percentage=0},t);return this.outstandingTimeouts.push({cancel:()=>clearTimeout(r)}),this.outstandingTimeouts.push(a()),!0}),yD(this,"reset",()=>{for(let e of this.outstandingTimeouts)e.cancel();this.outstandingTimeouts.splice(0,1/0),this.requestId=void 0,this.percentage=0}),this.requestId=void 0,this.percentage=0,this.outstandingTimeouts=[]}};var yM=a(37155);let yB=e=>e,yL="chart-series-data";function yF(e){let{filter:t,xAxis:a,yAxis:r}=e,{period:n,startDate:i,endDate:l}="time"===a.dataSource.column?e.time??{}:{};return"time"===a.dataSource.column&&a.groupBy&&delete a.groupBy,{xAxis:a,yAxis:r,...(0,yM.A)({filter:t,period:n,startDate:i,endDate:l},yB)}}let yO=()=>{let e=(0,U.jE)();return{handleRefresh:(0,K.useCallback)(()=>{e.invalidateQueries({queryKey:["memex",yL]})},[e])}},yG=(0,K.createContext)(null);function yV(){let e=(0,K.useContext)(yG);if(null===e)throw Error("useCharts can only be used inside a ChartStateProvider");return e}let y$=()=>{let{allColumnsRef:e}=sl();return{findColumn:(0,K.useCallback)(t=>e.current.find(e=>`${e.id}`==`${t}`),[e]),findColumnIndex:(0,K.useCallback)(t=>e.current.findIndex(e=>`${e.id}`==`${t}`),[e])}},yW=()=>{let{setAllColumns:e,allColumnsRef:t}=sl(),{findColumnIndex:a}=y$();return{updateColumns:(0,K.useCallback)(t=>{e(iZ(t))},[e]),updateColumnEntry:(0,K.useCallback)(r=>{let n=a(r.id);if(-1===n)return;let i=[...t.current];i[n]=r,e(i)},[t,a,e])}},yz=(0,K.createContext)(null),yH=e=>{let{createdWithTemplateMemex:t}=eU(),[a,r]=(0,K.useState)(t),n=(0,K.useMemo)(()=>({createdWithTemplateMemex:a,setCreatedWithTemplateMemex:r}),[a,r]);return(0,F.jsx)(yz.Provider,{value:n,children:e.children})},yU=()=>{let e=(0,K.useContext)(yz);if(!e)throw Error("useCreatedWithTemplateMemex can only be accessed from a CreatedWithTemplateMemexProvider component");return e};try{yz.displayName||(yz.displayName="CreatedWithTemplateMemexContext")}catch{}let yq=()=>{let e=(0,K.useContext)(mm);if(!e)throw Error("useSetProject must be used within a SetProjectContext.Provider");return e},yK=()=>{let e=c8(),t=(0,U.jE)();return{updateMemexItems:(0,K.useCallback)(a=>{!function(e,t,a){if(oN())e.setQueryData(og(e),e=>{let r=oX(e),n=[],i=(r||[]).reduce((e,t)=>(e[t.id]=t,e),{});for(let e of t){let t=i[e.id];if(t){var l;if(!t.skippingLiveUpdates&&(t.id!==a||(l=t).contentType===eJ.Issue&&e.contentType===eJ.Issue&&(l.state!==e.state||l.getRawTitle()!==iO(e).getRawTitle()))){let a=od(t,e);t=a?iO(a):t}}else t=iO(e);n.push(t)}return oR(n)});else{let r=(t||[]).reduce((e,t)=>(e[t.id]=t,e),{}),n=e.setQueriesData(oD,e=>{if(!oP(e))return e;let t=[...e.nodes];for(let[n,i]of e.nodes.entries()){let e=r[i.id];if(i.skippingLiveUpdates||i.id===a)delete r[i.id];else if(e){let a=od(i,e);a&&(t.splice(n,1,iO(a)),delete r[e.id])}}return{...e,nodes:t}}),i=n[n.length-1]?.[0];i&&Object.keys(r).length>0&&e.setQueryData(i,e=>{if(!e)return oh([]);let t=[...e.nodes];if(Object.keys(r).length>0)for(let e of Object.values(r))t.push(iO(e));return{...e,nodes:t}})}}(t,a,e)},[t,e])}},yQ=()=>{let{setAllWorkflows:e}=pb(),{setProject:t}=yq(),{updateMemexItems:a}=yK(),{findLoadedFieldIds:r}=ss(),{updateColumns:n}=yW(),{updateViewServerStates:i}=iS(),{updateChartConfigurations:l}=yV(),{setCreatedWithTemplateMemex:s}=yU(),{memex_table_without_limits:o}=iz(),{addPersistedToast:d}=lV(),{memex_flag_sync_error_handling:u}=iz(),{perform:c,status:m}=uN({request:(0,K.useCallback)(e=>(l3(),l4(e)),[]),showErrorToast:!1});return(0,K.useCallback)(async()=>{if(await c({visibleFields:[...r()]}),"succeeded"===m.current.status){let{memexProject:r,memexProjectItems:c,memexProjectAllColumns:p,memexViews:h,memexWorkflows:f,memexWorkflowConfigurations:g,memexCharts:y,createdWithTemplateMemex:x}=m.current.data,b=!1;null===c&&!o&&u&&(d({type:"error",message:nH.flagSyncError,action:{text:"Refresh",handleClick:()=>{window.location.reload()}}}),b=!0),t(r),o||b||a(c),n(p),i(h),e(g,f),l(y),s(x)}},[r,o,c,m,e,t,l,n,a,i,s,d,u])};function yJ(){let{setAllWorkflows:e}=pb(),{setProject:t}=yq(),{updateMemexItems:a}=yK(),{findLoadedFieldIds:r}=ss(),{updateColumns:n}=yW(),{updateViewServerStates:i}=iS(),{updateChartConfigurations:l}=yV(),{setCreatedWithTemplateMemex:s}=yU(),{memex_table_without_limits:o}=iz(),{perform:d,status:u}=uN({request:(0,K.useCallback)(e=>l6(e),[]),showErrorToast:!1});return(0,K.useCallback)(async()=>{if(await d({visibleFields:[...r()]}),"succeeded"===u.current.status){let{memexProject:r,memexProjectItems:d,memexProjectAllColumns:c,memexViews:m,memexWorkflows:p,memexWorkflowConfigurations:h,memexCharts:f,createdWithTemplateMemex:g}=u.current.data;t(r),o||a(d),n(c),i(m),e(h,p),l(f),s(g)}},[d,r,u,t,o,n,i,e,l,s,a])}async function yX(){let e=nP("memex-migration-get-api-data"),{data:t}=await ig(e.url);return t}let yY={pending:0,in_progress_project_details:3,in_progress_status_fields:6,in_progress_default_view:10,in_progress_permissions:30,in_progress_items:40,in_progress_workflows:90,completed:100,completion_acknowledged:100,error:25},yZ=(0,K.createContext)(null),y0=(0,K.memo)(function({children:e}){let t=eA("memex-project-migration"),[a,r]=(0,K.useState)(t),[n,i]=(0,K.useState)(t?.status),l=(0,K.useMemo)(()=>({projectMigration:a,setProjectMigration:r,initialProjectMigrationStatus:n,setInitialProjectMigrationStatus:i}),[a,n]);return(0,F.jsx)(yZ.Provider,{value:l,children:e})});try{yZ.displayName||(yZ.displayName="ProjectMigrationContext")}catch{}try{y0.displayName||(y0.displayName="ProjectMigrationStateProvider")}catch{}let y1=()=>{let e=(0,K.useContext)(yZ);if(!e)throw Error("useProjectMigration must be used within a ProjectMigrationStateProvider");return e},y2={ERROR:"error",COMPLETED:"completed",COMPLETION_ACKNOWLEDGED:"completion_acknowledged"},y5=()=>{let[e,t]=(0,K.useState)(null),{projectMigration:a,setProjectMigration:r}=y1(),n=yQ(),{items:i}=ug(),l=(0,K.useRef)(!1),s=(0,K.useCallback)((e,t=!0)=>(!l.current&&t&&(l.current=!0),e)?a?a.status===y2.ERROR?void 0:e.status===y2.ERROR?r(e):void(yY[a.status]<yY[e.status]&&r(e)):r(e):void 0,[a,r]),o=(0,K.useCallback)(async()=>{if(a&&!l.current&&a.status!==y2.COMPLETED&&a.status!==y2.COMPLETION_ACKNOWLEDGED)try{let e=await yX();s(e,!1)}catch{}},[a,s]),d=(0,K.useCallback)(()=>e?.status===y2.COMPLETED,[e?.status]),u=(0,K.useCallback)(async()=>{if(!a)return;let r=a.source_project,l=a.status;l!==y2.COMPLETED?t(a):r?.empty||l!==y2.COMPLETED?r?.empty&&e&&t({...e,status:y2.COMPLETED}):(i.length||e?.status===y2.COMPLETED||await n(),t(a))},[n,i.length,e,a]);return(0,K.useEffect)(()=>{u()}),{isMigrationComplete:d,processProjectMigrationState:s,processProjectMigrationOnPageVisibility:o,prevMigrationState:e,projectMigrationState:a}},y3=(0,K.memo)(function(){let{addToast:e,updatePersistedToast:t,clearPersistedToast:a}=lV(),r=lL(e),n=lL(t),i=lB(a,nL),l=(0,K.useRef)(null),o=yQ(),d=yJ(),u=lL(o),{memex_table_without_limits:c}=iz(),m=(0,K.useCallback)(async e=>{await d(),r(2e3)(e)},[d,r]),p=c?ud().handleRefresh:eC.l,h=c?yO().handleRefresh:eC.l,f=yP(),g=p8(f),{processProjectMigrationState:y,processProjectMigrationOnPageVisibility:x,isMigrationComplete:b}=y5(),[v]=yT(l,"message",t=>{var a,l,o,d;if(yk(a=t.data)&&Object.prototype.hasOwnProperty.call(a,"project_migration")){y(t.data.project_migration),u(t.data.wait??0)();return}if(yN(l=t.data)&&"project_items_bulk_update_progress"===l.type&&c){let{loggedInUser:e}=eU(),{percentage:a,actor:r,requestId:i}=t.data,l=r.id===e?.id,s=yE.progress(i,a);l&&s&&n(0)({type:nF.default,message:ia.progressMessage(s),icon:()=>(0,F.jsx)(yC.d,{radius:8,progress:s/100})})}if(yS(t.data)&&!c){let{loggedInUser:a}=eU(),{bulkUpdateSuccess:n,actor:i,bulkUpdateErrors:l,invalidateQueryCache:s}=t.data,o={type:n?nF.success:nF.error,message:n?ia.successMessage:ia.refreshPageMessage(l?.length||0)},d=i.id===a?.id;s&&d?(p(),h(),r(500)(o)):s?(p(),h()):d&&e(o)}if(yS(t.data)&&c){let{loggedInUser:e}=eU(),{bulkUpdateSuccess:a,actor:r,bulkUpdateErrors:l,invalidateQueryCache:s,requestId:o}=t.data,d=r.id===e?.id,u=s?500:0,c=d&&yE.complete(o,u,()=>i());s&&(p(),h()),c&&n(u)({type:a?nF.success:nF.error,message:a?ia.successMessage:ia.refreshPageMessage(l?.length||0)})}if(yI(t.data)){let{type:e}=t.data;s||(s={refreshEvents:new Set(eA("memex-refresh-events"))}),s.refreshEvents.has(e)&&u(t.data.wait??0)()}else yN(o=t.data)&&"memex_item_denormalized_to_elasticsearch"===o.type&&(p(t.data.timestamp,t.data.request_id),h());if(yk(d=t.data)&&"bulkCopySuccess"in d&&"actor"in d&&yk(d.actor)&&"id"in d.actor){let{loggedInUser:e}=eU(),{bulkCopySuccess:a,actor:r}=t.data;r.id===e?.id&&m({type:a?nF.success:nF.error,message:a?ir.successMessage:ir.failureMessage})}});(0,K.useEffect)(()=>{f&&x(),f&&!g&&(p(),h(),o())},[f,g,o,x,b,p,h]),(0,K.useEffect)(()=>()=>{l3()},[]);let w=f?v:void 0;return(0,F.jsx)("span",{...w,ref:l,hidden:!0,...(0,ey.G)("live-update-listener")})});try{y3.displayName||(y3.displayName="LiveUpdate")}catch{}let y4=e=>!!Array.isArray(e),y6=[],y8=e=>{let[t,a]=(0,K.useState)(y6),[r]=yT(e,"presence",e=>{y4(e.data)?a(e.data):a(y6)});return{presenceItems:t,attrs:r}},y7=()=>{let e=(0,K.useContext)(mc);if(!e)throw Error("useProjectState must be used within a ProjectStateContext.Provider");return e},y9=(0,Z.i7)(["from{opacity:0}to{opacity:1}"]),xe=(0,K.forwardRef)((e,t)=>{let{sx:a,...r}=e,n={display:"inline-flex",alignItems:"center",position:"relative",justifyContent:"flex-end",zIndex:"0",animationName:y9.getName(),overflow:"visible",verticalAlign:"text-bottom",...a};return(0,F.jsx)(lx.A,{ref:t,sx:n,...r})});xe.displayName="MemexAvatarStackWrapper";let xt=(0,K.forwardRef)((e,t)=>{let{sx:a,...r}=e,n={display:"flex",alignItems:"center",borderRadius:"100%",flexShrink:0,marginLeft:0,marginRight:e=>`-${e.space[1]}`,animation:"fadeIn 0.5s ease-in-out",...a};return(0,F.jsx)(lx.A,{ref:t,sx:n,...r})});xt.displayName="StyledAvatarBox";let xa=(0,K.forwardRef)((e,t)=>{let{sx:a,...r}=e,n={display:"flex",alignItems:"center",transition:"opacity 0.5s ease-in-out",...a};return(0,F.jsx)(h3.r,{ref:t,sx:n,...r})});xa.displayName="StyledAvatar";let xr=(0,K.forwardRef)((e,t)=>{let{sx:a,...r}=e,n={backgroundColor:"canvas.subtle",display:"flex",alignItems:"center",borderRadius:"20px",marginLeft:e=>`-${e.space[1]}`,animation:"fadeIn 0.5s ease-in-out",...a};return(0,F.jsx)(lx.A,{ref:t,sx:n,...r})});xr.displayName="StyledCounter";let xn=({items:e,backgroundSx:t,size:a=24,maxVisible:r=5})=>{let n=e.length,{backgroundColor:i,boxShadow:l}=t,s=n-r;return(0,F.jsxs)(xe,{...(0,ey.G)("memex-avatar-stack"),children:[(0,F.jsx)(lx.A,{sx:{display:"flex",mr:1},children:e.slice(0,r).map((e,t)=>(0,K.createElement)(xt,{...(0,ey.G)("memex-avatar-stack-item"),key:e.id,sx:{backgroundColor:i,boxShadow:l,zIndex:t}},(0,F.jsx)(xa,{...(0,ey.G)(`memex-avatar-state-${e.isIdle?"idle":"active"}`),sx:{opacity:e.isIdle?.3:1},size:a,src:e.avatarUrl,"data-hovercard-url":e.hovercardUrl})))}),n>r?(0,F.jsx)(lx.A,{sx:{position:"relative",zIndex:r,display:"flex",alignItems:"center"},...(0,ey.G)("memex-avatar-stack-overflow"),children:(0,F.jsx)(xr,{sx:{boxShadow:l},children:(0,F.jsxs)(gn.A,{sx:{height:a+1,width:a+1,fontSize:a<24?"9px":0,p:0,color:"fg.muted",lineHeight:0,display:"flex",alignItems:"center",justifyContent:"center",userSelect:"none",overflow:"hidden"},children:["+",s>99?"\u221E":s]})})}):null]})};try{xn.displayName||(xn.displayName="MemexAvatarStack")}catch{}let xi=(0,K.createContext)(null),xl=()=>{let e=(0,K.useContext)(xi);if(null==e)throw Error("Cannot use usePresenceUsers outside of PresenceUsersProvider");return e},xs=[],xo=(0,K.memo)(function({children:e}){let t=(0,K.useRef)(null),{presenceItems:a,attrs:r}=y8(t),{isPublicProject:n}=y7(),i=(0,K.useMemo)(()=>{let{githubUrl:e}=eU();return n||""===e?xs:a.filter(e=>!e.isOwnUser).map(t=>{var a;return{...a={...t,avatarUrl:`${e}/user_avatars/${t.userId}`},id:a.userId,hovercardUrl:`/hovercards?user_id=${a.userId}`}})},[a,n]);return(0,F.jsxs)(xi.Provider,{value:i,children:[(0,F.jsx)("span",{...(0,ey.G)("presence-avatars-listener"),...r,hidden:!0,ref:t}),e]})}),xd=()=>{let e=xl();return 0===e.length?null:(0,F.jsx)("div",{...(0,ey.G)("presence-avatars"),children:(0,F.jsx)(xn,{items:e,backgroundSx:{backgroundColor:"canvas.subtle",boxShadow:e=>`0 0 0 2px ${e.colors.canvas.subtle} !important`}})})};try{xi.displayName||(xi.displayName="PresenceContext")}catch{}try{xo.displayName||(xo.displayName="PresenceUsersProvider")}catch{}try{xd.displayName||(xd.displayName="PresenceAvatars")}catch{}var xu=a(98939),xc=a(8601);async function xm(){let e=nP("memex-migration-acknowledge-completion-api-data");await ix(e.url,{method:"POST"})}async function xp(){let e=nP("memex-migration-cancel-api-data"),{data:t}=await ix(e.url,{method:"DELETE"});return t}async function xh(){let e=nP("memex-migration-retry-api-data"),{data:t}=await ix(e.url,{method:"POST"});return{redirectUrl:t?.redirectUrl}}let xf=e=>"completion_acknowledged"===e.status||"completed"===e.status?"":n8.statuses[e.status],xg=({migration:e,closeOverlay:t})=>(0,F.jsxs)("div",{children:[(0,F.jsxs)(lx.A,{sx:{display:"flex"},children:[(0,F.jsx)(lx.A,{sx:{justifyContent:"space-around"},children:e.source_project?.closed?(0,F.jsx)(lw.A,{icon:ly.CheckIcon,sx:{color:"success.fg"}}):(0,F.jsx)(lw.A,{icon:ly.AlertFillIcon,sx:{color:"attention.fg"}})}),(0,F.jsx)(lx.A,{sx:{ml:1},children:(0,F.jsx)("span",{...(0,ey.G)("migration-status"),children:e.source_project?.closed?(0,F.jsxs)(F.Fragment,{children:["\u2022 ",(0,F.jsx)(pw.A,{target:"_blank",rel:"noreferrer",href:e.source_project?.path,children:n8.yourClassicProject}),` ${n8.completedAndClosed1}`,(0,F.jsx)("br",{}),`\u{2022} ${n8.completedAndClosed2}`]}):(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(pw.A,{target:"_blank",rel:"noreferrer",href:e.source_project?.path,children:n8.yourClassicProject}),` ${n8.completedAndStillOpen}`]})})})]}),(0,F.jsx)(lx.A,{sx:{mt:3,display:"flex"},children:(0,F.jsx)(p4.Q,{variant:"primary",onClick:t,children:"Done"})})]}),xy=({migration:e,cancelMigration:t,tryAgain:a})=>(0,F.jsxs)("div",{children:[(0,F.jsxs)(lx.A,{sx:{display:"flex"},children:[(0,F.jsx)(lx.A,{sx:{justifyContent:"space-around"},children:(0,F.jsx)(lw.A,{icon:ly.XIcon,sx:{color:"danger.fg"}})}),(0,F.jsx)(lx.A,{...(0,ey.G)("migration-status"),sx:{ml:1},children:xf(e)})]}),(0,F.jsxs)(lx.A,{sx:{mt:3,display:"flex",flexDirection:"row-reverse"},children:[(0,F.jsx)(p4.Q,{variant:"primary",onClick:a,sx:{ml:2},children:"Try again"}),(0,F.jsx)(p4.Q,{onClick:t,children:"Cancel"})]})]}),xx=({migration:e,closeOverlay:t,...a})=>"completed"===e.status?(0,F.jsx)(xg,{migration:e,closeOverlay:t}):"error"===e.status?(0,F.jsx)(xy,{migration:e,...a}):(0,F.jsxs)(lx.A,{sx:{display:"flex"},children:[(0,F.jsx)(lx.A,{sx:{justifyContent:"space-around",p:1},children:(0,F.jsx)(pj.A,{size:"small"})}),(0,F.jsx)(lx.A,{...(0,ey.G)("migration-status"),sx:{ml:1,mt:"3px"},children:xf(e)})]});try{xg.displayName||(xg.displayName="MigrationOverlayCompleted")}catch{}try{xy.displayName||(xy.displayName="MigrationOverlayError")}catch{}try{xx.displayName||(xx.displayName="MigrationOverlayDescription")}catch{}function xb(e,t){return"completed"===e.status?n8.migrationCompleteMessage:"error"===e.status?n8.somethingWentWrongMessage:it.migratingTitle(t)}let xv=async()=>{let e=await xh();e.redirectUrl&&window.location.assign(e.redirectUrl)},xw=async()=>{let e=await xp();e.redirectUrl&&window.location.assign(e.redirectUrl)},xj=()=>{let{projectMigration:e,initialProjectMigrationStatus:t,setInitialProjectMigrationStatus:a}=y1(),{prevMigrationState:r,isMigrationComplete:n}=y5(),{title:i}=mf(),{isEnterpriseRuntime:l}=eU();if(!l||!e||!r||"completion_acknowledged"===t)return null;let s=async()=>{a("completion_acknowledged"),xm()};if(e.is_automated)return(0,F.jsx)(xC,{});let o=n()?yY[e.status]||0:yY[r.status??"pending"]||0,d=xb(r,i),u="error"===e.status?"danger.fg":"success.emphasis",c=r&&function(e){return"completed"===e.status||"error"===e.status}(r)?"200px":"125px";return(0,F.jsx)(xu.A,{open:!0,caret:"bottom",sx:{position:"fixed",width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.5)"},children:(0,F.jsxs)(xu.A.Content,{sx:{paddingTop:"25px",width:"480px",height:c,top:"20%","&::before":{content:"none !important"},"&::after":{content:"none !important"}},...(0,ey.G)("migration-popover"),children:[(0,F.jsx)(h_.A,{as:"h2",sx:{fontSize:3,mb:2},children:d}),(0,F.jsx)(xc.z,{bg:u,progress:o,sx:{marginBottom:"15px"}}),(0,F.jsx)(xx,{migration:e,cancelMigration:xw,tryAgain:xv,closeOverlay:s})]})})},xC=()=>{let{projectMigration:e,initialProjectMigrationStatus:t,setInitialProjectMigrationStatus:a}=y1(),{prevMigrationState:r}=y5(),{title:n}=mf();if(!e||!r||"completion_acknowledged"===t)return null;let i=async()=>{a("completion_acknowledged"),xm()},l=xb(r,n),s="completed"===e.status;return(0,F.jsx)(xu.A,{open:!0,caret:"bottom",sx:{position:"fixed",width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.5)"},children:(0,F.jsxs)(xu.A.Content,{sx:{paddingTop:"25px",width:"480px",top:"20%","&::before":{content:"none !important"},"&::after":{content:"none !important"}},...(0,ey.G)("migration-popover"),children:[(0,F.jsx)(h_.A,{as:"h2",sx:{fontSize:3,mb:2},children:l}),(0,F.jsxs)("span",{...(0,ey.G)("automated-migration-status"),children:[s?n8.automatedMigrationCompleteMessage:n8.automatedMigrationInProgressMessage," ",(0,F.jsx)(pw.A,{target:"_blank",rel:"noreferrer",href:n8.sunsetNoticeLink,children:n8.learnMore})]}),s&&(0,F.jsx)(lx.A,{sx:{mt:3},children:(0,F.jsx)(p4.Q,{variant:"primary",onClick:i,children:"Done"})})]})})};try{xj.displayName||(xj.displayName="ProjectMigrationOverlayView")}catch{}try{xC.displayName||(xC.displayName="AutomatedProjectMigrationOverlay")}catch{}var xI=a(88350),xS=a(81356),xk=a(63033);let xN=(e,t)=>{let a=(0,K.useRef)(!1);(0,K.useEffect)(()=>{a.current&&!e&&t?.current?.focus(),a.current=e},[e,t])},xT=(0,K.createContext)(void 0);function x_(){return(0,K.useContext)(xT)}let xA=()=>{let e=x_();return e?e?.getBoundingClientRect().top:0},xR=()=>{let{clientHeight:e}=hZ(document.body),t=x_(),{clientHeight:a}=hZ(document.querySelector(".application-main")??t??null);return e&&a?e-a:void 0};var xP=a(65165);function xD(e){if(e){let t=e.style.scrollBehavior;e.style.scrollBehavior="auto",e.scrollTop=0,e.scrollLeft=0,e.style.scrollBehavior=t}}let xE=()=>{let{dirtyItems:e,setDirtyItems:t}=c7(),a=(0,K.useRef)(Symbol()).current,r=(0,K.useCallback)((e=!0)=>t(t=>{let r=new Set(t);return e?t.has(a)?t:r.add(a):r.delete(a)?r:t}),[a,t]);return[e.has(a),r]},xM={itemKey:{kind:sf.ISSUE,repositoryId:0,itemId:0},title:{raw:"",html:""},description:{body:"",bodyHtml:""},createdAt:"",updatedAt:"",user:{id:0,global_relay_id:"",login:"",name:"",avatarUrl:"",isSpammy:!1},state:{state:eL.Open},capabilities:[],liveUpdateChannel:"",url:"",issueNumber:0},xB=(0,K.createContext)(null),xL=class UnsupportedActionError extends TypeError{constructor(e){super(`Item does not support ${e}.`),this.name="UnsupportedActionError"}},xF=(0,K.memo)(function({children:e,contentType:t,itemId:a,memexItemId:r,repositoryId:n}){let{findMemexItem:i}=ub(),{setColumnValue:l}=up(),{postStats:s}=iN(),{data:o=xM,isInitialLoading:d}=s4({variables:{contentType:t,itemId:a,repositoryId:n,memexItemId:r}}),u=(0,nk.M)(({name:e,context:a={}})=>{s({name:e,context:JSON.stringify({contentType:t,...a})})}),{mutate:c}=s6(),m=(0,nk.M)(async(e=!1)=>{c({contentType:t,itemId:a,repositoryId:n,memexItemId:r},{onSuccess:()=>{u.current({name:"side_panel_metadata_refresh",context:{fromSocketEvent:e}})}})}),p=(0,K.useMemo)(()=>(0,nN.A)((...e)=>m.current(...e),1250),[m]),{mutateAsync:h}=s8(),f=(0,K.useCallback)(async(e,s,o)=>h({contentType:t,itemId:a,memexItemId:r,repositoryId:n,update:e,tasklist_blocks_operation:s,tasklist_blocks_operation_tracker:o},{onSettled:()=>{u.current({name:"side_panel_edit_item",context:{updates:Object.keys(e)}})},onSuccess:e=>{if(r&&e){let t=i(r);if(t){let a=t.columns.Title?.value;if(a&&a.title!==e.title){let r=l0({dataType:eN.Title,value:{...a,title:e.title}});r&&l(t,r)}}}}}),[t,h,i,a,r,u,n,l]),g=(0,K.useCallback)(async e=>f({title:e}),[f]),y=(0,K.useCallback)(async e=>f({labels:e}),[f]),x=(0,K.useCallback)(async e=>f({assignees:e}),[f]),b=(0,K.useCallback)(async e=>f({milestone:e}),[f]),{mutateAsync:v}=s7(),w=(0,K.useCallback)(async(e,t,i)=>{if(!o.comments)throw new xL("comments");return v({kind:sf.ISSUE,itemId:a,repositoryId:n,comment:e,updateState:t,stateReason:i,memexItemId:r},{onSuccess:()=>{u.current({name:"side_panel_post_comment",context:{state:t,stateReason:i}})}})},[o.comments,v,a,n,r,u]),{mutateAsync:j}=s9(),C=(0,K.useCallback)(async(e,t)=>{if(!o.comments)throw new xL("comments");return j({kind:sf.ISSUE,itemId:a,repositoryId:n,commentId:e,body:t,memexItemId:r},{onSuccess:()=>{u.current({name:"side_panel_edit_comment"})}})},[o.comments,j,a,n,r,u]),{mutate:I}=oe(),S=(0,K.useCallback)(async(e,t,i,l)=>{if(!o.reactions)throw new xL("reactions");return I({reaction:e,command:t?"unreact":"react",commentId:l,itemId:a,repositoryId:n,actor:i,memexItemId:r,kind:sf.ISSUE},{onSuccess:()=>{u.current({name:"side_panel_react",context:{command:t?"unreact":"react",subject:l?"comment":"issue"}})}})},[o.reactions,I,a,n,r,u]),{mutate:k}=ot(),N=(0,K.useCallback)(async(e,i)=>{if(t!==eJ.Issue)throw new xL("state updates");return k({state:e,stateReason:i,itemId:a,repositoryId:n,memexItemId:r,kind:sf.ISSUE},{onSuccess:()=>{u.current({name:"side_panel_update_issue_state",context:{state:e,stateReason:i}})}})},[t,k,a,n,r,u]),T=(0,K.useMemo)(()=>({isLoading:d,sidePanelMetadata:o,editIssue:f,editIssueTitle:g,addIssueComment:w,editIssueComment:C,reactToSidePanelItem:S,updateSidePanelItemState:N,editIssueLabels:y,editIssueAssignees:x,editIssueMilestone:b,reloadSidePanelMetadata:p}),[d,o,f,g,w,C,y,x,b,S,N,p]);return(0,F.jsx)(xB.Provider,{value:T,children:e})});try{xB.displayName||(xB.displayName="IssueContext")}catch{}try{xF.displayName||(xF.displayName="IssueStateProvider")}catch{}let xO=()=>{let e=(0,K.useContext)(xB);if(!e)throw Error("useIssueContext must be used within a IssueContext.Provider.");return e};var xG=a(25273),xV=a(50064);function x$(){let{loggedInUser:e,themePreferences:t}=eU();return{pasteUrlsAsPlainText:e?.paste_url_link_as_plain_text??!1,useMonospaceFont:t?.markdown_fixed_width_font??!1,emojiSkinTonePreference:t?.preferred_emoji_skin_tone}}async function xW(e){let t=nP("memex-preview-markdown-api-data");return(await iv(t.url,{method:"POST",body:ip(e),headers:{Accept:"text/html","Content-Type":im.FormData}})).text()}let xz=e=>{let[t,a]=(0,K.useState)(""),[r,n]=(0,K.useState)(!1);return{html:t,isLoading:r,loadPreview:(0,K.useCallback)(async t=>{n(!0),a("");let r=await xW({text:t,...e});return n(!1),a(r),r},[e])}};async function xH(e){l3();let t=nP("memex-update-api-data"),{data:a}=await ix(t.url,{method:"PUT",body:e});return a}let xU=()=>{let e=mf(),{setProject:t}=yq();return{updateDescription:(0,K.useCallback)(async a=>{a=a.trim(),e.description!==a&&t((await xH({description:a})).memexProject)},[e.description,t])}};var xq=a(57536);function xK(e){let t=pG(e.unverifiedHTML);return(0,F.jsx)(xq.G,{...e,verifiedHTML:t})}try{xK.displayName||(xK.displayName="SanitizedMarkdownViewer")}catch{}var xQ=a(32226),xJ=a(59356),xX=a(18610),xY=a(10986);let xZ=RegExp(Object.keys(xY.B).map(e=>`:${(0,t_.A)(e)}:`).join("|"),"g"),x0=e=>xZ.test(e)?e.replace(xZ,e=>{let t=e.substring(1,e.length-1);return xY.B[t]??e}):e,x1={None:"none",Successful:"successful",Failed:"failed"},x2=({initialValue:e,commitFn:t})=>{let[a,r]=(0,xX.N)(e),[n,i]=(0,K.useState)(!1),[l,s]=(0,K.useState)(x1.None),o=(0,K.useCallback)(()=>{r(e),i(!1)},[r,i,e]),d=(0,K.useCallback)(async()=>{if(!n)return;let e=a.trim();if(0===e.length){s(x1.Failed);return}r(e);try{await t(x0(e)),s(x1.Successful)}catch{s(x1.Failed)}i(!1)},[n,a,r,t]),u=(0,K.useCallback)(e=>{i(!0),s(x1.None),r(x0(e.target.value))},[r,i]),c=(0,K.useCallback)(e=>{switch(s(x1.None),e.key){case"Enter":d();break;case"Escape":n&&e.stopPropagation(),o()}},[d,o,n]),m=(0,xJ._)(c),p=(0,K.useCallback)(()=>{document.hasFocus()&&d()},[d]);return{localValue:a,setLocalValue:r,isSuccess:l===x1.Successful,isError:l===x1.Failed,inputProps:{onChange:u,onBlur:p,...m}}},x5={bg:"danger.subtle",borderColor:"danger.fg",color:"danger.fg"},x3=e=>(0,F.jsx)(lx.A,{sx:{padding:"8px 16px",borderWidth:"1px",borderStyle:"solid",borderRadius:"6px",fontSize:"14px",lineHeight:"20px",...x5},...e}),x4=e=>(0,F.jsx)(xQ.A,{sx:{marginTop:"16px",padding:"8px 6px",borderRadius:"6px",fontSize:"12px",lineHeight:"18px",...x5},...e}),x6=({message:e=nH.genericErrorMessage,caret:t,testId:a="error-state-message-box"})=>(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(lx.A,{sx:{flexBasis:"100%"}}),(0,F.jsx)(t?x4:x3,{caret:t,...(0,ey.G)(a),children:e}),(0,F.jsx)(lx.A,{sx:{flexBasis:"100%"}})]}),x8=()=>(0,F.jsx)(lw.A,{icon:ly.CheckIcon,sx:{ml:3,color:"success.fg"}}),x7=({status:e})=>{switch(e){case"idle":case x1.None:return(0,F.jsx)(F.Fragment,{});case"failed":case x1.Failed:return(0,F.jsx)(lw.A,{icon:ly.XIcon,sx:{color:"danger.fg"}});case"loading":return(0,F.jsx)(pj.A,{size:"small"});case"succeeded":case x1.Successful:return(0,F.jsx)(lw.A,{icon:ly.CheckIcon,sx:{color:"success.fg"}})}},x9={borderColor:"#CB2431 !important"};try{x3.displayName||(x3.displayName="AlertStyledBox")}catch{}try{x4.displayName||(x4.displayName="ErrorStyledPointerBox")}catch{}try{x6.displayName||(x6.displayName="ErrorState")}catch{}try{x8.displayName||(x8.displayName="SuccessState")}catch{}try{x7.displayName||(x7.displayName="RequestStateIcon")}catch{}function be({setProjectDescription:e,onSaveStats:t,editModeOff:a=!1,setHasUnsavedChanges:r,hideLabel:n}){let{hasWritePermissions:i}=eK(),{description:l,descriptionHtml:s,setDescriptionHtml:o}=mf(),{updateDescription:d}=xU(),{projectData:u}=eU(),[c,m]=(0,K.useState)(!1),[p,h]=(0,K.useState)(l),[f,g]=(0,K.useState)(!1),[y,x]=(0,K.useState)(!1),[b,v]=(0,K.useState)(a),{isLoading:w,loadPreview:j}=xz({project:u?.id,subject_type:"Project"}),C=(0,K.useRef)(null),I=(0,K.useRef)(null),S=x$(),k=(0,K.useCallback)(async e=>{l?o(await j(e)):o("")},[l,j,o]),N=(0,K.useCallback)(t=>{r&&r(t!==l),h(t),e?.(t)},[l,r,e]);(0,K.useEffect)(()=>{!s&&l&&k(l)},[l,s,k]),(0,K.useEffect)(()=>{N(l)},[l,N]);let T=(0,K.useCallback)(()=>{a||((0,pN.flushSync)(()=>{v(!1)}),I.current?.focus())},[a]),_=(0,K.useCallback)(async()=>{if(!l&&!p||l===p)return T(),null;try{m(!0),g(!1),t?.(!!l),await d(p),k(p),x(!0),T(),setTimeout(()=>{x(!1)},1800)}catch{g(!0)}finally{m(!1)}},[l,p,T,t,d,k]),A=(0,K.useCallback)(()=>{N(l),T()},[N,l,T]),R=(0,K.useCallback)(e=>{e.target instanceof HTMLAnchorElement||((0,pN.flushSync)(()=>{v(!0)}),C.current?.focus())},[]),P=(0,K.useMemo)(()=>i&&(b||a)?y&&a?(0,F.jsxs)(lx.A,{sx:{minHeight:"30px",display:"flex","& > svg":{ml:"auto"}},children:[(0,F.jsx)(x8,{})," ",(0,F.jsx)(lv.A,{sx:{ml:1},children:"Saved"})]}):p===l&&a?void 0:(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(xV.x,{variant:"invisible",sx:{color:"fg.muted"},onClick:A,children:n5.cancelButton}),(0,F.jsx)(xV.x,{variant:"primary",onClick:_,children:n5.saveButton})]}):void 0,[i,b,a,y,p,l,A,_]);return(0,F.jsxs)(F.Fragment,{children:[a?null:(0,F.jsxs)(F.Fragment,{children:[(0,F.jsxs)(lx.A,{sx:{display:"flex",flexDirection:"row",alignItems:"center",color:"fg.muted",fontSize:1,width:"100%",fontWeight:"normal",mb:1},children:[(0,F.jsxs)(lx.A,{sx:{width:"100%",display:"flex",alignItems:"center",minHeight:32,gap:2},children:[(0,F.jsx)(lw.A,{icon:ly.BookIcon,sx:{color:"fg.subtle"}}),(0,F.jsx)(lv.A,{as:"h3",sx:{fontSize:14,fontWeight:"bold",color:"fg.default"},children:n5.readmeTitle})]}),!b&&i&&(0,F.jsx)(fE.K,{variant:"invisible",onClick:R,sx:{color:"fg.muted"},icon:ly.PencilIcon,"aria-label":"Edit README",tooltipDirection:"sw",ref:I,...(0,ey.G)("pencil-editor-button")})]}),!b&&!p&&(0,F.jsx)(lx.A,{sx:{wordBreak:"break-word",whiteSpace:"normal",textAlign:"start",fontSize:12},children:n5.readmePlaceholder})]}),b?(0,F.jsxs)(lx.A,{sx:{display:"flex",flexDirection:"column",mb:4},children:[(0,F.jsx)(xG.h,{value:p,onChange:N,disabled:!i||!b||c,placeholder:n5.readmePlaceholder,maxLength:1e4,ref:C,label:n5.readmeTitle,showLabel:!n,onPrimaryAction:_,actions:e?void 0:P,subject:u?{type:"project",id:{databaseId:u.id}}:void 0,userSettings:S,...(0,ey.G)("markdown-editor")}),f&&(0,F.jsx)(x6,{caret:"top-left",message:n5.errorMessage})]}):!i||s||w?(0,F.jsx)(xK,{unverifiedHTML:s,loading:w}):null]})}try{be.displayName||(be.displayName="DescriptionEditor")}catch{}var bt=a(19647),ba=a(29982);function br(e){return(0,F.jsx)(ba.x,{...e,tone:eU().themePreferences.preferred_emoji_skin_tone})}try{br.displayName||(br.displayName="EmojiAutocomplete")}catch{}let bn=()=>{let e=mf(),{setProject:t}=yq();return{updateShortDescription:(0,K.useCallback)(async a=>{a=a.trim(),e.shortDescription!==a&&t((await xH({shortDescription:a})).memexProject)},[e.shortDescription,t])}},bi=({setProjectShortDescription:e,onSaveStats:t,editModeOff:a=!1,setHasUnsavedChanges:r,hideLabel:n})=>{let{hasWritePermissions:i}=eK(),{shortDescription:l,shortDescriptionHtml:s}=mf(),{updateShortDescription:o}=bn(),[d,u]=(0,K.useState)(l),[c,m]=(0,K.useState)(!1),[p,h]=(0,K.useState)(a),[f,g]=(0,K.useState)(!1),[y,x]=(0,K.useState)(!1),b=(0,K.useRef)(null),v=(0,K.useRef)(null);(0,K.useEffect)(()=>{u(l),r&&r(!1)},[l,r]);let w=(0,K.useCallback)(async()=>{try{g(!0),m(!1),t?.(!!l),await o(d),a||h(!1),r&&r(!1),x(!0),setTimeout(()=>{x(!1)},1800)}catch{m(!0)}finally{g(!1)}},[t,l,a,r,d,o]),j=(0,K.useCallback)(()=>{u(l),a||h(!1),r&&r(!1)},[r,l,a]),C=(0,K.useCallback)(()=>h(!0),[]);(0,K.useEffect)(()=>{p&&b.current&&!a&&(b.current.focus(),b.current.selectionStart=b.current.selectionEnd=b.current.value.length)},[p,a]);let I=(0,K.useCallback)(t=>{let a=t.currentTarget.value.replace(RegExp("\\s+","gs")," ");r&&r(a!==l),u(a),e?.(a)},[r,l,e]);return(0,F.jsxs)(F.Fragment,{children:[!a&&(0,F.jsxs)(lx.A,{sx:{display:"flex",flexDirection:"row",alignItems:"center",color:"fg.muted",fontSize:1,width:"100%",fontWeight:"normal",mt:3,mb:1},children:[(0,F.jsxs)(lx.A,{sx:{width:"100%",display:"flex",alignItems:"center",minHeight:32,gap:2},children:[(0,F.jsx)(lw.A,{icon:ly.NoteIcon,sx:{color:"fg.subtle"}}),(0,F.jsx)(lv.A,{as:"h3",sx:{fontSize:14,fontWeight:"bold",color:"fg.default"},children:n5.shortDescriptionTitle})]}),!p&&i&&(0,F.jsx)(fE.K,{variant:"invisible",onClick:C,sx:{color:"fg.muted"},icon:ly.PencilIcon,"aria-label":"Edit short description",ref:v,tooltipDirection:"sw",...(0,ey.G)("description-editor-edit")})]}),p?(0,F.jsxs)(F.Fragment,{children:[(0,F.jsxs)(hM.A,{children:[(0,F.jsx)(hM.A.Label,{visuallyHidden:n,children:n5.shortDescriptionTitle}),(0,F.jsx)(br,{style:{width:a?415:"100%"},children:(0,F.jsx)(bt.Ay,{ref:b,placeholder:n5.shortDescriptionPlaceholder,onChange:I,maxLength:300,value:d,...(0,ey.G)("description-editor")})})]}),!e&&(0,F.jsx)(lx.A,{sx:{display:"flex",flexDirection:"row-reverse",mt:2,width:a?415:"100%",minHeight:"30px"},...(0,ey.G)("readme-editor-buttons"),children:y&&a?(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(lv.A,{sx:{ml:1},children:"Saved"})," ",(0,F.jsx)(x8,{})]}):d===l&&a?null:(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(p4.Q,{variant:"primary",size:"small",sx:{ml:2},onClick:w,disabled:f,children:n5.saveButton}),(0,F.jsx)(p4.Q,{variant:"invisible",size:"small",sx:{color:"fg.muted"},onClick:j,disabled:f,children:n5.cancelButton})]})}),c&&(0,F.jsx)(x6,{caret:"top-left",message:n5.errorMessage})]}):(0,F.jsx)(lx.A,{sx:{display:"flex",flexDirection:"column",mb:4},children:s?(0,F.jsx)(p$,{children:s}):(0,F.jsx)(lx.A,{sx:{wordBreak:"break-word",whiteSpace:"normal",textAlign:"start",fontSize:12},children:n5.shortDescriptionPlaceholder})})]})};try{bi.displayName||(bi.displayName="ShortDescriptionEditor")}catch{}let bl=(0,K.createContext)(null);function bs(){let e=(0,K.useContext)(bl);if(!e)throw Error("useStatusUpdates must be used within a StatusUpdatesContext.Provider.");return e}let bo=(0,K.createContext)(null);function bd(){let e=(0,K.useContext)(bo);if(!e)throw Error("useStatusUpdatesEditorState must be used within a StatusUpdatesEditorStateContext.Provider.");return e}let bu={UPDATE_STATUS:"UPDATE_STATUS",UPDATE_BODY:"UPDATE_BODY",UPDATE_START_DATE:"UPDATE_START_DATE",UPDATE_TARGET_DATE:"UPDATE_TARGET_DATE",SET_STATUS_UPDATE:"SET_STATUS_UPDATE",CLEAR_STATUS_UPDATE:"CLEAR_STATUS_UPDATE"},bc=(e,{type:t,payload:a})=>{let r=e[a.id];switch(t){case bu.UPDATE_BODY:if(!r)return e;return{...e,[a.id]:{...r,body:a.body}};case bu.UPDATE_START_DATE:if(!r)return e;return{...e,[a.id]:{...r,startDate:a.date}};case bu.UPDATE_STATUS:if(!r)return e;return{...e,[a.id]:{...r,status:a.status}};case bu.UPDATE_TARGET_DATE:if(!r)return e;return{...e,[a.id]:{...r,targetDate:a.date}};case bu.SET_STATUS_UPDATE:return{...e,[a.id]:a};case bu.CLEAR_STATUS_UPDATE:{let{[a.id]:t,...r}=e;return r}}},bm=()=>{let[e,t]=(0,K.useReducer)(bc,{});return{statusUpdateDrafts:e,statusUpdateDraftsDispatch:t}};var bp=a(3893),bh=a(55295);let bf={display:"flex",flexDirection:"row",flexWrap:"wrap",gap:1},bg=({defaultStatus:e,onChange:t,options:a})=>{let[r,n]=(0,K.useState)(""),[i,l]=(0,K.useState)(e??null),s=a.filter(e=>e.name.toLowerCase().indexOf(r.toLowerCase())>=0),o=(0,K.useCallback)(e=>e.id,[]),d=(0,K.useCallback)(([e])=>{l(e??null),t(e??null)},[t]),u=(0,K.useCallback)(e=>({id:e.id,description:e.description,descriptionVariant:"block",text:e.name,source:e,leadingVisual:()=>(0,F.jsx)(h6,{color:e.color})}),[]),c=(0,K.useRef)(null),m=(0,K.useCallback)(e=>(0,F.jsx)(bh._,{anchorProps:e,readonly:!1,anchorText:is.statusFieldLabel,sharedPickerMainValue:i?i.name:null,leadingIconElement:i?(0,F.jsx)(h6,{color:i.color}):null,ariaLabel:is.statusPickerAriaLabel,ref:c,leadingIcon:ly.SingleSelectIcon}),[i]);return(0,F.jsx)(lx.A,{sx:bf,...(0,ey.G)("status-updates-status-picker"),children:(0,F.jsx)(bp.O,{items:s,initialSelectedItems:i?[i]:[],filterItems:n,getItemKey:o,convertToItemProps:u,placeholderText:is.statusPickerFilterPlaceholderText,selectionVariant:"single",onSelectionChange:d,renderAnchor:m,resultListAriaLabel:is.statusPickerResultsAriaLabel,title:is.statusPickerTitle,selectPanelRef:c})})};try{bg.displayName||(bg.displayName="StatusPicker")}catch{}var by=a(81020);let bx=({leadingIcon:e,hotKey:t,label:a,anchorProps:r,readonly:n,nested:i,ariaLabelledBy:l})=>{let s={"aria-disabled":n,disabled:n,"aria-labelledby":l};return i?(0,F.jsxs)(fi.l.Item,{...r,...s,role:"menuitem",children:[e&&(0,F.jsx)(fi.l.LeadingVisual,{children:(0,F.jsx)(e,{})}),a]}):(0,F.jsx)(p4.Q,{sx:{borderStyle:"dashed",fontWeight:"normal",color:"fg.muted"},size:"small",leadingVisual:e,trailingVisual:t?()=>(0,F.jsx)(lx.A,{sx:{color:"fg.muted",borderWidth:1,borderStyle:"solid",borderColor:"border.default",p:"0px 4px",borderRadius:"6px"},children:t}):void 0,...s,...r,children:a})};try{bx.displayName||(bx.displayName="SharedEmptyPicker")}catch{}var bb=a(6907);let bv={display:"flex",flexDirection:"row",flexWrap:"wrap",gap:1},bw=({defaultDate:e,onChange:t,testId:a,icon:r,label:n,ariaLabel:i})=>{let[l,s]=(0,K.useState)(e??null),o=(0,K.useCallback)(e=>{s(e?new Date((0,bb.x)(e,{representation:"date"})):null),t(e)},[t]),d=(0,K.useCallback)(e=>l?(0,F.jsx)(p4.Q,{size:"small",...e,"aria-label":i,"aria-disabled":!1,disabled:!1,children:(0,F.jsxs)(lx.A,{sx:{display:"flex",alignItems:"center",justifyContent:"center",gap:1},children:[(0,F.jsx)(lx.A,{sx:{color:"fg.muted",fontWeight:"normal"},children:n}),(0,F.jsx)(lx.A,{sx:{display:"flex",alignItems:"center",justifyContent:"center","> *:not(:last-child)":{mr:"-3px"}},children:(0,F.jsx)(lw.A,{icon:r})}),(0,F.jsx)(lx.A,{sx:{fontWeight:"bold"},children:ak(l)})]})}):(0,F.jsx)(bx,{label:n,leadingIcon:r,anchorProps:e}),[i,r,n,l]);return(0,F.jsx)(lx.A,{sx:bv,...(0,ey.G)(a),children:(0,F.jsx)(by.DatePicker,{onChange:o,value:l,showClearButton:!0,showTodayButton:!1,anchor:d})})};try{bw.displayName||(bw.displayName="StatusUpdateDatePicker")}catch{}let bj=e=>({status:e.statusValue.statusId,startDate:e.statusValue.startDate,targetDate:e.statusValue.targetDate,body:e.body.trim()?e.body:null}),bC=(e,t)=>{let a=[];for(let r of["status","startDate","targetDate","body"])t[r]!==e[r]&&a.push(r);return a},bI=({statusUpdate:e})=>{let{hasWritePermissions:t}=eK(),{memexStatusItems:a,statusOptions:r,addStatusUpdate:n,updateStatusUpdate:i}=bs(),{projectData:l}=eU(),{statusUpdateDraftsDispatch:s}=bd(),{postStats:o}=iN(),d=x$(),[u,c]=(0,K.useState)(""),{addToast:m}=lV(),p=(0,K.useRef)(null);(0,K.useEffect)(()=>{u&&p.current&&p.current.focus()},[u]);let h=(0,K.useCallback)(async()=>{if(t){c("");try{let t={id:e.id,status:e.status?.name,hasStartDate:!!e.startDate,hasTargetDate:!!e.targetDate,hasBody:!!e.body.trim(),modifiedFields:{}};if(0===e.id)await n(e),o({name:"status_update_create",context:JSON.stringify(t)});else{let r=await i(e),n=bj(r),l=a.find(t=>t.id===e.id),s=l?bj(l):{};t.modifiedFields=bC(n,s),o({name:"status_update_update",context:JSON.stringify(t)})}s({type:bu.CLEAR_STATUS_UPDATE,payload:{id:e.id}})}catch(e){e instanceof ApiError&&422===e.status?c(e.message):m({type:"error",message:"Unable to save. Something went wrong."})}}},[n,m,t,o,e,s,i,a]),f=(0,K.useCallback)(()=>{s({type:bu.CLEAR_STATUS_UPDATE,payload:{id:e.id}})},[e.id,s]),g=(0,K.useCallback)(t=>{s({type:bu.UPDATE_BODY,payload:{id:e.id,body:t}})},[e.id,s]),y=(0,K.useCallback)(t=>{s({type:bu.UPDATE_STATUS,payload:{id:e.id,status:t}})},[e.id,s]),x=(0,K.useCallback)(t=>{s({type:bu.UPDATE_START_DATE,payload:{id:e.id,date:t}})},[e.id,s]),b=(0,K.useCallback)(t=>{s({type:bu.UPDATE_TARGET_DATE,payload:{id:e.id,date:t}})},[e.id,s]);return(0,F.jsxs)(lx.A,{sx:{display:"flex",flexDirection:"column",gap:2},children:[u&&(0,F.jsxs)(mq.A,{variant:"danger",sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},"aria-live":"polite",children:[(0,F.jsxs)("span",{children:["Unable to save: ",u]}),(0,F.jsx)(fE.K,{icon:ly.XIcon,"aria-label":"Dismiss flash message",ref:p,variant:"invisible",onClick:()=>{c("")}})]}),(0,F.jsxs)(lx.A,{sx:{display:"flex",gap:2,flexWrap:"wrap"},children:[(0,F.jsx)(bg,{defaultStatus:e.status,onChange:y,options:r}),(0,F.jsx)(bw,{ariaLabel:is.startDatePickerAriaLabel,defaultDate:e.startDate,icon:ly.CalendarIcon,label:is.startDateFieldLabel,onChange:x,testId:"status-updates-start-date-picker"}),(0,F.jsx)(bw,{ariaLabel:is.targetDatePickerAriaLabel,defaultDate:e.targetDate,icon:ly.RocketIcon,label:is.targetDateFieldLabel,onChange:b,testId:"status-updates-target-date-picker"})]}),(0,F.jsx)(lx.A,{sx:{width:"100%"},...(0,ey.G)("status-updates-markdown-editor"),children:(0,F.jsx)(xG.h,{userSettings:d,value:e.body,onChange:g,subject:l?{type:"project",id:{databaseId:l.id}}:void 0})}),(0,F.jsxs)(lx.A,{sx:{display:"flex",justifyContent:"flex-end",gap:2},children:[(0,F.jsx)(xV.x,{size:"medium",onClick:f,...(0,ey.G)("status-update-cancel-button"),children:is.cancelUpdateButtonText}),(0,F.jsx)(xV.x,{size:"medium",variant:"primary",onClick:h,...(0,ey.G)("status-update-save-button"),children:is.saveUpdateButtonText})]})]})};try{bI.displayName||(bI.displayName="StatusUpdateEditor")}catch{}var bS=a(23134),bk=a(13922);let bN=(0,K.forwardRef)(({option:e,onClick:t,sx:a,...r},n)=>{let i=!!t,l=(0,ra.Wk)(e.color),s="nameHtml"in e?e.nameHtml:e.name;return(0,F.jsx)(bk.A,{sx:{bg:l.bg,color:l.fg,borderColor:l.border,cursor:i?"pointer":"default",":hover":{bg:l.bg,color:i?l.accent:l.fg,borderColor:l.border,boxShadow:i?void 0:"none"},overflow:"hidden",...a},ref:n,onClick:e=>{e.target instanceof HTMLAnchorElement?e.stopPropagation():t?.(e)},text:(0,F.jsx)(p$,{children:s}),...(0,ey.G)("single-select-token"),...r})});bN.displayName="SingleSelectToken";let bT={display:"flex",flexDirection:"row",alignItems:"center",gap:3,width:"100%",lineHeight:"32px"},b_=({label:e,icon:t,children:a,testId:r})=>(0,F.jsxs)(lx.A,{sx:bT,children:[(0,F.jsxs)(lv.A,{as:"p",sx:{fontSize:14,marginBottom:0,wordBreak:"break-word",width:"122px",flexShrink:0,ml:3,color:"fg.muted"},children:[(0,F.jsx)(lw.A,{icon:t,sx:{color:"fg.subtle",mr:2}}),e,":"]}),(0,F.jsx)(lx.A,{...(0,ey.G)(`status-update-item-value-${r}`),sx:{display:"flex",flexDirection:"row",alignItems:"center",gap:1,fontSize:14},children:a})]}),bA={flexGrow:1,width:"100%",minWidth:0,my:2},bR=({status:e})=>{let{startDate:t,targetDate:a,status:r}=e.statusValue,{bodyHtml:n}=e,i=!!t||!!a||!!r;return(0,F.jsxs)(lx.A,{sx:bA,children:[t&&(0,F.jsx)(b_,{label:"Start date",icon:ly.CalendarIcon,testId:"start-date",children:aN(new Date(t))}),a&&(0,F.jsx)(b_,{label:"Target date",icon:ly.RocketIcon,testId:"target-date",children:aN(new Date(a))}),e&&r&&(0,F.jsx)(b_,{label:"Status",icon:ly.SingleSelectIcon,testId:"status",children:(0,F.jsx)(bN,{option:r})}),n&&(0,F.jsx)(lx.A,{sx:{px:3,pt:i?2:1,pb:1},...(0,ey.G)("status-update-item-value-body"),children:(0,F.jsx)(xK,{unverifiedHTML:n,loading:!1})})]})};try{b_.displayName||(b_.displayName="ItemDetailsRow")}catch{}try{bR.displayName||(bR.displayName="StatusUpdateItemBody")}catch{}var bP=a(5796),bD=a(47139),bE=a(89169);let bM=({creator:e,children:t})=>(0,F.jsx)(pw.A,{href:`/${e.login}`,"data-hovercard-url":(0,bP.dCN)({owner:e.login}),sx:{color:"fg.default",fontWeight:500},children:t}),bB=({status:e,handleOnEditClick:t})=>{let{deleteStatusUpdate:a}=bs(),{hasWritePermissions:r}=eK(),n=(0,K.useRef)(null),i=(0,uX.S)(),{postStats:l}=iN(),{loggedInUser:s}=eU(),o=(0,K.useCallback)(async()=>{r&&await i({title:is.confirmDeleteTitle,content:is.confirmDeleteBody,confirmButtonType:"danger",confirmButtonContent:"Delete"})&&(a(e.id),l({name:"status_update_destroy",context:JSON.stringify({id:e.id})}))},[i,a,r,l,e.id]),d=(0,K.useCallback)(()=>{try{let{origin:t,pathname:a}=window.location,r=`${t}${a}?pane=info&statusUpdateId=${e.id}`;navigator.clipboard.writeText(r)}catch{}},[e.id]);return(0,F.jsx)(lx.A,{sx:{gap:1,pl:[0,3,3],pr:2,display:"flex",flexGrow:1,flexDirection:"row",justifyContent:"flex-end"},children:(0,F.jsxs)(yu.W,{anchorRef:n,children:[(0,F.jsx)(yu.W.Anchor,{children:(0,F.jsx)(fE.K,{variant:"invisible","aria-label":"Status update options",icon:ly.KebabHorizontalIcon,size:"medium"})}),(0,F.jsx)(yu.W.Overlay,{children:(0,F.jsxs)(fi.l,{children:[(0,F.jsxs)(fi.l.Item,{onSelect:d,children:[(0,F.jsx)(fi.l.LeadingVisual,{children:(0,F.jsx)(ly.LinkIcon,{})}),"Copy link"]}),r&&(!s?.isSpammy||s?.isSpammy&&e.creator.login===s?.login)&&(0,F.jsxs)(F.Fragment,{children:[(0,F.jsxs)(fi.l.Item,{onSelect:t,children:[(0,F.jsx)(fi.l.LeadingVisual,{children:(0,F.jsx)(ly.PencilIcon,{})}),"Edit"]}),(0,F.jsxs)(fi.l.Item,{variant:"danger",onSelect:o,children:[(0,F.jsx)(fi.l.LeadingVisual,{children:(0,F.jsx)(ly.TrashIcon,{})}),"Delete"]})]})]})})]})})},bL={backgroundColor:"canvas.subtle",borderTopLeftRadius:2,borderTopRightRadius:2,borderBottom:"1px solid",borderBottomColor:"border.muted",color:"fg.muted",display:"flex",flexDirection:"row",flex:1,fontSize:1,gap:0,py:1,flexWrap:"wrap",justifyContent:"space-between",alignItems:"center",overflow:"hidden",height:"41px"},bF=({status:e,handleOnEditClick:t})=>{let{creator:a,updatedAt:r}=e,{loggedInUser:n}=eU();return(0,F.jsxs)(lx.A,{sx:bL,children:[(0,F.jsxs)(lx.A,{sx:{display:"flex",px:2,flexGrow:1,flexShrink:1,flexDirection:"row",gap:2,alignItems:"center",overflow:"hidden",textOverflow:"ellipsis"},children:[(0,F.jsx)(lx.A,{sx:{display:"block"},children:(0,F.jsx)(bM,{creator:a,children:(0,F.jsx)(h3.r,{src:a.avatarUrl,size:24,sx:{mr:1},alt:`@${a.login}`})})}),(0,F.jsxs)(lx.A,{as:"h3",sx:{display:"flex",flexDirection:["column","column","row","row"],flexWrap:"wrap",columnGap:1,overflow:"hidden",fontSize:"unset",fontWeight:"unset",margin:"unset"},children:[(0,F.jsx)(bM,{creator:a,children:a.login}),e.userHidden&&n?.login!==a.login&&(0,F.jsx)(bD.A,{variant:"danger",children:"Spammy"}),(0,F.jsxs)(lx.A,{sx:{display:"flex",gap:1,fontSize:[0,1,1,1],overflow:"hidden",textOverflow:"ellipsis"},children:[(0,F.jsx)(lv.A,{sx:{fontSize:"inherit",whiteSpace:"nowrap",display:["none","inline","inline","inline"]},children:"updated"}),(0,F.jsx)(pw.A,{href:`?pane=info&statusUpdateId=${e.id}`,sx:{color:"fg.muted"},children:(0,F.jsx)(bE.A,{sx:{fontSize:"inherit"},datetime:r})})]})]})]}),(0,F.jsx)(bB,{status:e,handleOnEditClick:t})]})};try{bM.displayName||(bM.displayName="CreatorLink")}catch{}try{bB.displayName||(bB.displayName="ItemOptions")}catch{}try{bF.displayName||(bF.displayName="StatusUpdateItemHeader")}catch{}let bO={border:"1px solid",borderColor:"border.muted",boxShadow:"shadow.small",borderRadius:2,flexGrow:1,width:"100%",minWidth:0,mt:3},bG={borderColor:"accent.fg",boxShadow:e=>`0 0 0 1px ${e.colors.accent.fg}`},bV={mt:3},b$=({status:e})=>{let{statusUpdateDrafts:t,statusUpdateDraftsDispatch:a}=bd(),{statusUpdateIdParam:r}=bs(),[n,i]=cH(),[l,s]=(0,K.useState)(()=>r===String(e.id)),o=(0,K.useRef)(null),d=t[e.id],u=(0,K.useCallback)(()=>{l&&(s(!1),i(e=>(e.get(dY)&&e.delete(dY),e)))},[l,i]);return(0,bS.g)({onClickOutside:u,containerRef:o}),(0,K.useEffect)(()=>{l&&o.current&&o?.current?.scrollIntoView()},[l,o]),(0,F.jsx)("div",{children:d?(0,F.jsx)(lx.A,{role:"listitem",sx:bV,ref:o,...(0,ey.G)("status-updates-item-container"),children:(0,F.jsx)(bI,{statusUpdate:d})}):(0,F.jsxs)(lx.A,{role:"listitem",ref:o,sx:{...bO,...l?bG:{}},"aria-current":l,...(0,ey.G)(`status-update-item-${e.id}`),children:[(0,F.jsx)(bF,{status:e,handleOnEditClick:()=>{let{startDate:t,targetDate:r,status:n}=e.statusValue;a({type:bu.SET_STATUS_UPDATE,payload:{...e,startDate:t?new Date(t):null,targetDate:r?new Date(r):null,status:n}})}}),(0,F.jsx)(bR,{status:e})]})})};try{b$.displayName||(b$.displayName="StatusUpdateItem")}catch{}var bW=a(94977);let bz=(0,K.createContext)(null);function bH(){let e=(0,K.useContext)(bz);if(!e)throw Error("useNotificationSubscriptions must be used within a StatusUpdatesContext.Provider.");return e}let bU=()=>{let{viewerIsSubscribed:e,subscribe:t,unsubscribe:a,isLoading:r}=bH(),n=e?is.unsubscribeFromUpdates:is.subscribeToUpdates,i=(0,K.useCallback)(async()=>{e?a():t()},[t,a,e]),l=e?ly.BellSlashIcon:ly.BellIcon;return(0,F.jsx)(bW.A,{...(0,ey.G)("notification-subscriptions-toggle-tooltip"),"aria-label":n,direction:"s",children:(0,F.jsx)(p4.Q,{...(0,ey.G)("notification-subscriptions-toggle"),disabled:r,onClick:i,leadingVisual:l,children:e?"Unsubscribe":"Subscribe"})})};try{bU.displayName||(bU.displayName="NotificationSubscriptionsToggle")}catch{}let bq={width:"100%",display:"flex",minHeight:32,justifyContent:"space-between"},bK={display:"flex",flexDirection:"column",gap:2,alignItems:"center",border:e=>`1px solid ${e.colors.border.default}`,padding:"32px 16px",borderRadius:2};function bQ(){let{memexStatusItems:e,isLoading:t}=bs(),{statusUpdateDraftsDispatch:a}=bd(),{hasWritePermissions:r,isLoggedIn:n}=eK(),{memex_status_updates_notifications:i}=iz(),l=0!==e.length,s=(0,K.useCallback)(()=>{let[t]=e;if(!t)return a({type:bu.SET_STATUS_UPDATE,payload:{id:0,body:"",startDate:null,targetDate:null,status:null}});let r=t.statusValue.startDate?(0,tD.H)(t.statusValue.startDate):null,n=t.statusValue.targetDate?(0,tD.H)(t.statusValue.targetDate):null;a({type:bu.SET_STATUS_UPDATE,payload:{id:0,body:"",startDate:r,targetDate:n,status:t.statusValue?.status??null}})},[e,a]);return l||t?(0,F.jsxs)(lx.A,{...(0,ey.G)("status-updates-default-state-header"),sx:bq,children:[(0,F.jsxs)(lx.A,{sx:{display:"flex",gap:2,alignItems:"center"},children:[(0,F.jsx)(lw.A,{icon:ly.PulseIcon,sx:{color:"fg.subtle"}}),(0,F.jsx)(lv.A,{as:"h3",sx:{fontSize:14,fontWeight:"bold",color:"fg.default"},children:is.title})]}),(0,F.jsxs)(lx.A,{sx:{display:"flex",gap:2},children:[i&&n&&(0,F.jsx)(bU,{}),r&&(0,F.jsx)(p4.Q,{variant:"primary",onClick:s,...(0,ey.G)("status-updates-create-button"),children:is.addUpdateButtonText})]})]}):r?(0,F.jsxs)(lx.A,{...(0,ey.G)("status-updates-empty-state-header"),sx:bK,children:[(0,F.jsx)(lw.A,{icon:ly.PulseIcon,size:"medium"}),(0,F.jsx)(lv.A,{as:"h3",sx:{fontSize:20,fontWeight:"bold",color:"fg.default"},children:is.nullStateTitle}),(0,F.jsx)(lv.A,{sx:{fontSize:14,color:"fg.muted",textAlign:"center"},children:is.description}),(0,F.jsxs)(lx.A,{sx:{display:"flex",alignItems:"center",marginTop:3,gap:3},children:[(0,F.jsx)(p4.Q,{variant:"primary",onClick:s,...(0,ey.G)("status-updates-create-button"),children:is.addUpdateButtonText}),(0,F.jsx)(pw.A,{href:"https://gh.io/status-updates-learn-more",style:{cursor:"pointer",marginLeft:"8px"},tabIndex:0,target:"_blank",...(0,ey.G)("status-updates-learn-more-link"),children:is.learnMoreLinkText})]})]}):null}try{bQ.displayName||(bQ.displayName="StatusUpdatesHeader")}catch{}let bJ={display:"flex",flexDirection:"column",flex:"auto",borderTop:"1px solid",borderColor:"border.muted",pt:4,mt:3,width:"100%"},bX=(0,K.memo)(function(){let{memexStatusItems:e,isLoading:t}=bs(),{statusUpdateDrafts:a}=bd(),r=a[0],n=!!r;return(0,F.jsxs)(lx.A,{...(0,ey.G)("status-updates-container"),sx:bJ,children:[n&&r?(0,F.jsxs)(lx.A,{...(0,ey.G)("status-updates-create-container"),sx:{display:"flex",flexDirection:"column",width:"100%",gap:3},children:[(0,F.jsx)(lv.A,{as:"h3",sx:{fontSize:14,fontWeight:"bold",color:"fg.default"},children:is.addUpdateTitle}),(0,F.jsx)(bI,{statusUpdate:r})]}):(0,F.jsx)(bQ,{}),t?(0,F.jsx)(hE.O,{sx:{width:"100%",height:"32px",mb:3,mt:3},variant:"rounded",height:"md"}):(0,F.jsx)(lx.A,{"aria-label":"Status updates",role:"list",sx:{mb:3},children:e.map(e=>(0,F.jsx)(b$,{status:e},e.id))})]})});try{bX.displayName||(bX.displayName="StatusUpdates")}catch{}var bY=a(72559),bZ=a(45996),b0=a(34876);let b1="- [ ] Add a draft title or issue reference here",b2=(e,t=!0)=>`\`\`\`[tasklist]
${t?"### Tasks":""}${e?"\n":""}${e}
\`\`\``,b5=({editedBody:e,onChangeBody:t,isTextButton:a=!1,loading:r=!1,tasklistContent:n=b1})=>{let i=()=>{let a=n,r=!0,i=document.activeElement;if(!i||!(i instanceof HTMLTextAreaElement)){let r=b2(a);t(`${e?`${e}
`:""}${r}`);return}let l=i.selectionStart||0,s=i.selectionEnd||0;l!==s&&(a=e.slice(l,s),r=!(0,b0.Y)(a),a=(0,b0.m)(a));let o=e&&l?`${e.slice(0,l)}
`:"",d=e?`
${e.slice(s)}`:"",u=b2(a,r);(0,pN.flushSync)(()=>{t(`${o}${u}${d}`)});let c=l+u.length+1;i.selectionStart=c,i.selectionEnd=c};return(0,F.jsx)(lx.A,{sx:{position:"relative"},children:a?r?(0,F.jsx)(p4.Q,{size:"small",sx:{borderRadius:20,px:2,boxShadow:"none",marginRight:2,display:"flex",alignItems:"center"},disabled:!0,children:(0,F.jsxs)(lx.A,{sx:{alignItems:"center",display:"flex"},children:[(0,F.jsx)(pj.A,{size:"small",sx:{marginRight:1}}),"Adding tasklist..."]})}):(0,F.jsx)(p4.Q,{size:"small",sx:{borderRadius:20,px:2,boxShadow:"none",marginRight:2},className:"js-add-tasklist-button",leadingVisual:ly.PlusIcon,onClick:i,...(0,ey.G)("add-tasklist-text-button"),children:"Add tasklist"}):(0,F.jsx)(fE.K,{size:"small",icon:ly.ChecklistIcon,"aria-label":"Add a tasklist",onClick:i,...(0,ey.G)("add-tasklist-button")})})},b3={CommentBox:"comment-module__CommentBox--nBFgM"};var b4=a(69676),b6=a(82678),b8=a(85349);let b7=({reactions:e,onReact:t})=>{let{loggedInUser:a}=eU(),r=a?.login||"",n=Object.values(sg).map(t=>[t,e[t]??[]]),i=new Set(n.filter(([,e])=>e?.includes(r)??!1).map(([e])=>e)),l=void 0===t,s=e=>t?.(e,i.has(e),r),{containerRef:o}=(0,b6.G)({bindKeys:b4.z0.HomeAndEnd|b4.z0.ArrowHorizontal,focusOutBehavior:"wrap"});return(0,F.jsxs)(lx.A,{role:"toolbar","aria-label":"Reactions",ref:o,sx:{display:"flex",gap:1,flexWrap:"wrap"},...(0,ey.G)("reactions-toolbar"),children:[!l&&(0,F.jsx)(b9,{onReact:s,reactedReactions:i}),n.map(([e,t])=>(0,F.jsx)(ve,{reaction:e,reactedUsers:t,reacted:i.has(e),onClick:()=>s(e),disabled:l},e))]})},b9=({onReact:e,reactedReactions:t})=>{let[a,r]=(0,K.useState)(!1),{containerRef:n}=(0,b6.G)(),i=t=>{r(!1),e(t)};return(0,F.jsx)(b8.T,{open:a,onOpen:()=>r(!0),onClose:()=>r(!1),anchorRef:n,focusZoneSettings:{bindKeys:b4.z0.ArrowAll|b4.z0.HomeAndEnd,focusOutBehavior:"wrap"},renderAnchor:e=>(0,F.jsx)(fE.K,{size:"small",sx:{borderRadius:"50%",height:28,width:28,"& > span":{ml:"-1px"}},icon:ly.SmileyIcon,...(0,ey.G)("all-reactions-button"),...e,"aria-label":"All reactions","aria-labelledby":void 0}),children:(0,F.jsx)(fi.l,{sx:{display:"flex",flexDirection:"row",p:1,gap:1},role:"menu","aria-orientation":"horizontal",...(0,ey.G)("reactions-overlay"),children:Object.values(sg).map(e=>(0,F.jsx)(fi.l.Item,{sx:{"&:hover":{backgroundColor:"accent.emphasis"},py:1,px:2,m:0,backgroundColor:t.has(e)?"accent.subtle":"transparent"},role:"menuitemcheckbox","aria-checked":t.has(e),onClick:()=>i(e),onKeyDown:t=>{("Enter"===t.key||" "===t.key)&&(t.stopPropagation(),i(e))},...(0,ey.G)(`all-reactions-${e}-reaction-button`),children:va(e)},e))})})},ve=({reaction:e,reactedUsers:t,disabled:a,reacted:r,onClick:n})=>{if(0===t.length)return null;let i=`${r?"React":"Unreact"} with ${va(e)} (${t.length} ${va(e)} reaction${1===t.length?"":"s"} so far, including ${vt(t)})`;return(0,F.jsx)(bW.A,{"aria-label":vt(t),sx:{maxWidth:"100%"},wrap:!0,direction:"ne",align:"left",children:(0,F.jsx)(p4.Q,{size:"small",sx:{"&:hover:not([disabled])":{backgroundColor:"accent.muted"},backgroundColor:r?"accent.subtle":"transparent",borderColor:r?"accent.emphasis":"border.default",borderRadius:20,px:2,boxShadow:"none"},"aria-label":i,role:"switch","aria-checked":r,leadingVisual:()=>(0,F.jsx)(F.Fragment,{children:va(e)}),...(0,ey.G)(`${e}-reaction-button`),onClick:n,disabled:a,children:t.length})})};function vt(e){let t=e.slice(0,5);return(e.length>5&&t.push(`${e.length-5} more`),1===t.length)?t[0]:2===t.length?t.join(" and "):(t.push(`and ${t.pop()}`),t.join(", "))}function va(e){switch(e){case sg.THUMBS_UP:return"\u{1F44D}";case sg.THUMBS_DOWN:return"\u{1F44E}";case sg.SMILE:return"\u{1F604}";case sg.TADA:return"\u{1F389}";case sg.THINKING_FACE:return"\u{1F615}";case sg.HEART:return"\u2764\uFE0F";case sg.ROCKET:return"\u{1F680}";case sg.EYES:return"\u{1F440}";default:throw Error(`${e} must be handled`)}}function vr(){let e=xO().sidePanelMetadata,{projectData:t}=eU();return"issue"===e.itemKey.kind&&e.repository?{type:"issue",repository:{databaseId:e.itemKey.repositoryId,nwo:e.repository.nameWithOwner,slashCommandsEnabled:void 0!==e.slashCommandsSubjectGid},id:{databaseId:e.itemKey.itemId,id:e.slashCommandsSubjectGid??""}}:t?{type:"project",id:{databaseId:t.id}}:void 0}let vn=({url:e,onEdit:t})=>(0,F.jsxs)(yu.W,{children:[(0,F.jsx)(yu.W.Anchor,{children:(0,F.jsx)(fE.K,{icon:ly.KebabHorizontalIcon,variant:"invisible",size:"small","aria-label":"Comment actions",sx:{color:"fg.default"},...(0,ey.G)("comment-overflow-menu-button")})}),(0,F.jsx)(yu.W.Overlay,{align:"end",children:(0,F.jsxs)(fi.l,{children:[(0,F.jsx)(fi.l.Item,{onSelect:()=>navigator.clipboard.writeText(e),children:"Copy link"}),t&&(0,F.jsx)(fi.l.Item,{onSelect:t,...(0,ey.G)("overflow-menu-edit-button"),children:"Edit"})]})})]}),vi=({url:e,onEdit:t})=>e?(0,F.jsx)(vn,{url:e,onEdit:t}):t?(0,F.jsx)(p4.Q,{size:"small",variant:"invisible",sx:{color:"fg.default"},onClick:t,"aria-label":"Edit comment",...(0,ey.G)("edit-comment-button"),children:"Edit"}):null,vl=({createdAt:e,editedAt:t})=>{let a=t??e;return(0,tO.f)(a)?(0,F.jsxs)(lv.A,{sx:{color:"fg.muted"},...(0,ey.G)("edit-timestamp"),children:[(0,F.jsx)(bE.A,{date:a}),a===t&&" (edited)"]}):null},vs=({author:e,createdAt:t,editedAt:a,authorAssociation:r,url:n,onStartEdit:i})=>(0,F.jsxs)(lx.A,{sx:{display:"flex",justifyContent:"space-between",gap:2},as:"header",children:[(0,F.jsxs)(lx.A,{sx:{display:"flex",flexWrap:"wrap",gap:2,alignItems:"center"},children:[e.avatarUrl&&(0,F.jsx)(h3.r,{loading:"lazy",size:24,alt:"",src:e.avatarUrl,...(0,ey.G)("author-avatar"),sx:{flexShrink:0}},e.id),(0,F.jsx)(lv.A,{sx:{fontWeight:600,fontStyle:"normal"},...(0,ey.G)("author-login"),as:"address",children:e.login}),n?(0,F.jsx)(pw.A,{href:n,target:"_blank",...(0,ey.G)("edit-timestamp-link"),children:(0,F.jsx)(vl,{createdAt:t,editedAt:a})}):(0,F.jsx)(vl,{createdAt:t,editedAt:a}),r&&r!==sy.NONE&&(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(lv.A,{sx:{color:"fg.muted"},children:"\xb7"}),(0,F.jsx)(bD.A,{sx:{fontWeight:600,alignSelf:"center"},...(0,ey.G)("author-association"),children:rr(r)})]})]}),(0,F.jsx)(vi,{url:n,onEdit:i})]}),vo=({onCancel:e,onSave:t,updateButtonDisabled:a})=>(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(xV.x,{variant:"invisible",sx:{color:"fg.muted"},onClick:e,...(0,ey.G)("cancel-button"),children:"Cancel"}),(0,F.jsx)(xV.x,{variant:"primary",onClick:t,...(0,ey.G)("save-button"),disabled:a,children:"Update comment"})]}),vd=({allowEmptyBody:e,author:t,authorAssociation:a,createdAt:r,editedAt:n,url:i,description:l,onEdit:s,onEditTasklistBlock:o,reactions:d,onReact:u,showAddTasklistButton:c})=>{let[,m]=xE(),[p,h]=(0,K.useState)(!1),[f,g]=(0,K.useState)(!1),[y,x]=(0,K.useState)(!1),[b,v]=(0,K.useState)(l.body||""),w=(0,K.useRef)(null),j=x$(),C=(0,K.useRef)(null),I=(0,K.useRef)(null),S=(0,K.useRef)([]),k=(0,bZ.A)(),{openPaneHistoryItem:N,sidePanelState:T}=c7(),{items:_}=ug(),[A,R]=(0,K.useState)(!1),{postStats:P}=iN(),{memex_disable_draft_issue_file_upload:D}=iz(),E=vr(),M=!!(T?.type==="issue"&&T.item.isDraft())&&D,B=(0,K.useRef)(!1),L=(0,K.useRef)(null),O=(0,K.useRef)(null),G=e||""!==b.trim(),[V,$]=(0,K.useState)(l.bodyHtml??""),W=(0,K.useCallback)(()=>{p||y||B.current&&!O.current||C.current?.querySelector(".is-dirty, .js-tasklist-dragging")||C.current?.contains(document.activeElement)||$((B.current&&L.current?L.current:l.bodyHtml)??"")},[l.bodyHtml,p,y]),z=(0,K.useCallback)(()=>{!p&&O.current&&v(O.current)},[p]);(0,pk.N)(()=>{(p?!y:y)||B.current||v(l.body||"")},[l.body,p,y]),(0,pk.N)(()=>{W(),z()},[W,z]);let H=(0,K.useCallback)(async()=>{let e=C.current?.querySelector("tracking-block:first-of-type");if(!e)return;let t=e?.closest(".markdown-body");L.current=t?.innerHTML??""},[]);(0,K.useEffect)(()=>{let e=C.current||I.current;if(!e||!s||!o)return;let t=async e=>{let{detail:t}=e;e.preventDefault(),B.current=!1,O.current=null,x(!0);try{if("string"==typeof t)await o(t);else{let{payload:e,resolve:a,reject:r}=t,n=JSON.stringify(S.current);e?await o(e,b,n).then(a,r):await s(b,n).then(a,r)}}finally{x(!1),S.current=[]}},a=async e=>{let{detail:t}=e,{payload:a,resolve:r,reject:n}=t;try{let e=await (0,bY.nj)(b,a),t=!1,n={name:a.operation};(0,bY.hJ)(a)&&(n.value=a.value),S.current.push(n),null!=e?(t=!0,v(e),O.current=e):(v(b),O.current=b),B.current=!0,r(t)}catch(e){n(e)}},r=()=>{m(null!=e.querySelector(".is-dirty"))};return e.addEventListener("tracking-block:update",t),e.addEventListener("tracking-block:operation",a),e.addEventListener("tracking-block:dirty-change",r),()=>{e.removeEventListener("tracking-block:update",t),e.removeEventListener("tracking-block:operation",a),e.removeEventListener("tracking-block:dirty-change",r)}},[s,o,f,p,l.bodyHtml,b,m,H]);let U=(0,K.useCallback)(e=>{v(e),m(!0)},[v,m]),{perform:q}=uN({request:async e=>{s&&(e||g(!0),await s(e||b),L.current=null,k()&&g(!1))},rollback:()=>{g(!1),W()},showErrorToast:!0}),Q=(0,g7.d)(q,1e3),J=(0,K.useCallback)(e=>{v(e),Q(void 0)},[Q]),X=s?()=>{(0,pN.flushSync)(()=>{H(),h(!0)}),w.current?.focus()}:void 0,Y=async()=>{G&&(await q(void 0),k()&&(h(!1),m(!1),B.current=!1))},Z=(0,K.useCallback)((e,t)=>_.find(a=>a.contentRepositoryId===e&&a.content.id===t),[_]),ee=e=>{let t=e.closest("[data-issue]");if(!t)return{};let a=t.getAttribute("data-repository-id"),r=t.getAttribute("data-item-id"),n=t.getAttribute("data-repository-name"),i=t.getAttribute("data-display-number"),l=t.getAttribute("data-item-title"),s={repoId:parseInt(a??"0"),issueId:parseInt(r??"0")},o=Z(s.repoId,s.issueId);if(o)return{item:o};let d=e.closest("a");return{item:new HierarchySidePanelItem({key:s,title:l,url:d?.getAttribute("href")??"",state:"open",repoName:n??"",number:parseInt(i??""),assignees:[],labels:[]},{completed:0,total:0,percent:0})}};return p?(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(xG.h,{label:"Edit comment",showLabel:!1,ref:w,value:b,onChange:U,onPrimaryAction:Y,fileUploadsEnabled:!M,subject:E,userSettings:j,actions:(0,F.jsx)(vo,{onSave:Y,onCancel:()=>{h(!1),v(l.body||""),m(!1)},updateButtonDisabled:!G}),className:b3.CommentBox,...(0,ey.G)("markdown-editor")}),M&&(0,F.jsx)(lv.A,{as:"p",sx:{fontStyle:"italic",fontSize:0,color:"fg.muted",px:3},children:"File uploads have been disabled for draft issues in this organization."})]}):(0,F.jsxs)(lx.A,{sx:{display:"flex",flexDirection:"column",p:3,gap:3},as:"article",children:[(0,F.jsx)(vs,{author:t,createdAt:r,editedAt:n,url:i,onStartEdit:X,authorAssociation:a}),l.bodyHtml?(0,F.jsx)("div",{...(0,ey.G)("comment-body"),ref:C,children:(0,F.jsx)(xq.G,{verifiedHTML:pG(V,{skipImageSanitization:!0}),onChange:J,markdownValue:l.body||"",disabled:f||!s,onLinkClick:e=>{if(e.metaKey||e.shiftKey||1===e.button)return;let t=ee(e.target);t.item&&(e.preventDefault(),N(t))}})}):(0,F.jsx)(lv.A,{className:"js-comment",sx:{color:"fg.muted",m:0,fontStyle:"italic"},as:"p",ref:I,...(0,ey.G)("empty-body-placeholder"),children:nH.noDescriptionProvided}),(0,F.jsx)("footer",{children:(0,F.jsxs)(lx.A,{sx:{display:"flex",alignItems:"center"},children:[c&&X?(0,F.jsx)("tasklist-block-add-tasklist",{onClick:()=>{P({name:"add_tasklist_button_click"})},children:(0,F.jsx)(b5,{editedBody:b,onChangeBody:async()=>{let e=C.current?.querySelector(".js-comment, .markdown-body")||I.current;if(e){R(!0);try{await new Promise((t,a)=>{e.dispatchEvent(new CustomEvent("tracking-block:add-tasklist",{bubbles:!0,cancelable:!0,detail:{resolve:t,reject:a}}))&&t()})}finally{R(!1)}}},isTextButton:!0,loading:A,tasklistContent:""})}):null,(0,F.jsx)(b7,{reactions:d,onReact:u})]})})]})};try{vl.displayName||(vl.displayName="Timestamp")}catch{}let vu=(0,K.memo)(function(){let e=(0,K.useRef)(null),t=(0,K.useRef)(null),a=yP(),r=p8(a),{sidePanelMetadata:n,reloadSidePanelMetadata:i}=xO(),{reloadPaneItem:l,sidePanelState:s}=c7(),{memex_table_without_limits:o,memex_side_panel_query:d}=iz(),u=(0,U.jE)(),{invalidateSidePanelQueries:c}=s3(),m=lL(i),p=lL(d?c:l),h=(0,K.useRef)(null),f=e=>n.itemKey.kind===sf.ISSUE&&!!(yk(e)&&Object.prototype.hasOwnProperty.call(e,"reason"))&&"string"==typeof e.reason,g=e=>n.itemKey.kind===sf.PROJECT_DRAFT_ISSUE&&yI(e)&&e.payload.item_id===n.itemKey.projectItemId,[y]=yT(e,"message",e=>{(f(e.data)||g(e.data))&&m(e.data.wait??0)(!0)},n.liveUpdateChannel),[x]=yT(t,"message",e=>{yI(e.data)&&s?.type===uZ.ISSUE&&e.data.payload&&(s.item.memexItemId?.()===e.data.payload.memex_project_item_id||s.item.memexItemId?.()===e.data.payload.item_id)&&(h.current?.cancel(),h.current=p(e.data.wait??0)())});(0,K.useEffect)(()=>{a&&!r&&(i(!1),d?c():o?u.invalidateQueries({queryKey:["memex",s_]}):l())},[a,r,i,l,o,d,c,u]);let b=a?y:void 0,v=a?x:void 0;return(0,F.jsxs)(F.Fragment,{children:[n.liveUpdateChannel&&(0,F.jsx)("span",{...b,ref:e,hidden:!0,...(0,ey.G)("side-panel-item-live-update-listener")}),(0,F.jsx)("span",{...v,ref:t,hidden:!0,...(0,ey.G)("side-panel-pane-item-live-update-listener")})]})});try{vu.displayName||(vu.displayName="SidePanelLiveUpdate")}catch{}let vc=({editedBody:e,issueId:t,repositoryId:a,projectNumber:r})=>(0,F.jsxs)("form",{id:"tasklist-form",...(0,ey.G)("tasklist-form"),children:[(0,F.jsx)("input",{type:"hidden",name:"body",value:e}),(0,F.jsx)("input",{type:"hidden",name:"item-id",value:t}),(0,F.jsx)("input",{type:"hidden",name:"repository-id",value:a}),(0,F.jsx)("input",{type:"hidden",name:"kind",value:"issue"}),(0,F.jsx)("input",{type:"hidden",name:"project-id",value:r})]}),vm=({item:e,isLoading:t,fullHeight:a})=>{let{sidePanelMetadata:r,editIssue:n,reactToSidePanelItem:i,reloadSidePanelMetadata:l}=xO(),{projectNumber:s}=mw(),{postStats:o}=iN(),d=(0,K.useMemo)(()=>new Set(r.capabilities),[r]),u=d.has("react")?(e,t,a)=>i(e,t,a):void 0,c=(0,K.useMemo)(()=>d.has("editDescription")?async(t,a)=>{await n({body:t},null,a),e.contentType===eJ.DraftIssue&&o({name:"draft_edit",memexProjectItemId:e.id})}:void 0,[d,n,e.contentType,o,e.id]),m=(0,K.useMemo)(()=>d.has("editDescription")?async(e,t,a)=>{if(e&&r.description){let i=t||r.description.body||"";await n({body:i},e,a)}else l(!1)}:void 0,[d,n,l,r.description]);return(0,F.jsxs)(lx.A,{sx:{flex:a?"auto":void 0,px:2},children:[(0,F.jsx)(vu,{}),t?(0,F.jsx)(lx.A,{sx:{display:"flex",flexDirection:"row",py:6,justifyContent:"center"},children:(0,F.jsx)(pj.A,{"aria-label":"Loading"})}):(0,F.jsxs)(lx.A,{as:"section",sx:{height:a?"100%":void 0},children:[(0,F.jsx)("h3",{style:{position:"absolute",clipPath:"circle(0)"},children:"Description"}),(0,F.jsx)(vd,{allowEmptyBody:!0,author:r.user,createdAt:new Date(r.createdAt),editedAt:r.description.editedAt?new Date(r.description.editedAt):void 0,reactions:r.reactions??{},description:r.description,onEdit:c,onEditTasklistBlock:m,onReact:u},e.itemId()),"issue"===r.itemKey.kind&&(0,F.jsx)(lx.A,{sx:{display:"none"},children:(0,F.jsx)(vc,{editedBody:r.description.body||"",issueId:r.itemKey.itemId,repositoryId:r.itemKey.repositoryId,projectNumber:s})})]})]})};try{vm.displayName||(vm.displayName="SidePanelBody")}catch{}function vp(){let e=c$(),t=mK(),{workflows:a}=pb(),{addToast:r}=lV();return function(){let n=a.find(e=>"Auto-add sub-issues to project"===e.name);n?.enabled&&r({message:"Sub-issues will be automatically added to your project. Prefer to disable this? Click the button below to turn off the workflow.",type:"default",action:{text:"Disable workflow",handleClick:()=>{e(lt.generatePath({...t,workflowClientId:n.clientId}))}}})}}var vh=a(47885),vf=a(53904);let vg=({items:e,onClick:t})=>{let a=(0,F.jsx)(vf.A,{children:e.map(({url:a,repoName:r,repoIcon:n,issueNumber:i,id:l},s)=>(0,F.jsxs)(vf.A.Item,{sx:{color:"fg.muted",fontSize:"fontSizes.1"},"data-id":l,href:a,selected:s===e.length-1,target:"_blank","data-hovercard-type":"issue","data-hovercard-url":`${a}/hovercard`,onClick:t??void 0,children:[n&&(0,F.jsx)(lv.A,{sx:{mr:1},children:n}),(0,F.jsx)(h4.A,{inline:!0,as:"span",title:`${r} ${i}`,sx:{maxWidth:s===e.length-1?"none":"150px",textDecoration:"inherit"},children:r}),(0,F.jsx)("span",{children:r?` ${i}`:i})]},s))});return(0,F.jsxs)(lx.A,{sx:{display:"flex"},children:[(0,F.jsx)(lx.A,{sx:{ml:-3,mr:1,mt:"2px"},children:e.length>1?(0,F.jsx)(fE.K,{...(0,ey.G)("side-panel-nav-button-up"),"aria-label":"Navigate up one level",disabled:1===e.length||!t,icon:ly.ChevronLeftIcon,onClick:t,variant:"invisible",sx:{color:"fg.muted",":hover":{bg:"transparent",boxShadow:"none"},":disabled":{color:"fg.muted"},display:"flex",alignItems:"center",justifyContent:"center",pr:2,py:0,pt:"4px",pl:"8px",height:18,width:18,"& svg":{verticalAlign:"top!important"}}}):(0,F.jsx)(lx.A,{sx:{ml:"10px",mt:"2px"}})}),a]})},vy=()=>{let{openPaneHistoryItem:e}=c7(),t=c6(),a=[...t],r=a.map((e,t)=>{let r=e.getExtendedRepository(),n=r?.name||e.getRepositoryName()||"",i=r?.url?(0,F.jsx)(hV,{repository:r}):void 0,l=t===a.length-5||a.length<5&&0===t,s=a[t-1],o=s&&s.getRepositoryName()||"";return!l&&o&&o===n&&(n="",i=void 0),{url:e.getUrl(),repoName:n,repoIcon:i,issueNumber:`#${e.getItemNumber()}`,id:t}});return(0,F.jsx)(vg,{items:r.slice(-5),onClick:a=>{if(a.metaKey||a.shiftKey||1===a.button)return;a.preventDefault();let r=parseInt(a.currentTarget.getAttribute("data-id")??(t.length-2).toString());e({historyIdx:r,item:t[r]})}})};try{vy.displayName||(vy.displayName="SidePanelBreadcrumbsWrapper")}catch{}var vx=a(91089);let vb=({itemType:e,state:t})=>{let a=null;return e===sf.PROJECT_DRAFT_ISSUE&&(a=(0,F.jsx)(vv,{})),e===sf.ISSUE&&(a=(0,F.jsx)(vw,{state:t.state,reason:t.stateReason})),a?(0,F.jsxs)(lx.A,{as:"figure",sx:{m:0},children:[(0,F.jsx)("figcaption",{style:{position:"absolute",clipPath:"circle(0)"},children:"Item status"}),a]}):null},vv=()=>(0,F.jsx)(vx.A,{status:"issueDraft",variant:"small",children:"Draft"}),vw=({state:e,reason:t})=>e===eE.Open?(0,F.jsx)(vx.A,{status:"issueOpened",variant:"small",className:"prc-StateLabel--open",children:"Open"}):e===eE.Closed&&t===eM.NotPlanned?(0,F.jsxs)(vx.A,{status:"draft",variant:"small",sx:{"& > svg:first-child":{visibility:"hidden",position:"absolute"}},children:[(0,F.jsx)(ly.SkipIcon,{}),(0,F.jsx)(lv.A,{sx:{pl:1},children:"Closed"})]}):e===eE.Closed?(0,F.jsx)(vx.A,{status:"issueClosed",variant:"small",children:"Closed"}):null;try{vb.displayName||(vb.displayName="ItemStateLabel")}catch{}try{vv.displayName||(vv.displayName="DraftIssueState")}catch{}try{vw.displayName||(vw.displayName="IssueState")}catch{}let vj=({onResize:e}={})=>{let[t,a]=(0,K.useState)(()=>document.getElementById("memex-project-view-root")),r=hZ(t);(0,pk.N)(()=>{t||a(document.getElementById("memex-project-view-root"))},[t]);let n=(0,nk.M)(e);return(0,pk.N)(()=>{n.current?.(r)},[r,n]),r},vC={completed:0,total:0,percent:0};function vI(e){if(!e)return{};let{repositoryId:t,itemId:a,title:r,url:n,state:i,stateReason:l,repositoryName:s,displayNumber:o,assignees:d,labels:u}=e;return{item:new HierarchySidePanelItem({key:{repoId:t,issueId:a},title:r,url:n,state:i,stateReason:l,repoName:s,number:o,assignees:d,labels:u},vC)}}let vS={Box:"tracked-by-label-module__Box--ierbn",ActionMenu_Overlay:"tracked-by-label-module__ActionMenu_Overlay--cJlCS",Text:"tracked-by-label-module__Text--mVRwa",Box_1:"tracked-by-label-module__Box_1--hxs8t",Text_1:"tracked-by-label-module__Text_1--LD7eB",Text_2:"tracked-by-label-module__Text_2--r98ci",Text_3:"tracked-by-label-module__Text_3--ejJTA",Text_4:"tracked-by-label-module__Text_4--d3jp7"},vk=[],vN=({currentValue:e=vk})=>{let[t,a]=(0,K.useState)(!1),[r,n]=(0,K.useState)(!1),[i,l]=(0,K.useState)(null),{openPaneHistoryItem:s}=c7(),o=hZ(i),d=(0,K.useRef)(null),u=(0,K.useRef)(null),c=()=>a(!t),m=e.length>2&&!t||r,p=t&&!r,h=e.slice(0,2),f=p?e:h,{clientHeight:g}=vj({onResize:()=>{r&&((0,pN.flushSync)(()=>{n(!1)}),n(!0))}});return(0,K.useEffect)(()=>{if(!d.current)return;let e=d.current.getBoundingClientRect().right>(window.innerWidth||document.documentElement.clientWidth);r||n(e)},[r,t]),e.length?(0,F.jsx)("div",{ref:u,children:(0,F.jsxs)("div",{ref:l,style:{width:o.clientWidth},className:vS.Box,children:[(0,F.jsx)(bD.A,{as:"div",onMouseEnter:c,onMouseLeave:c,ref:d,size:"large",sx:t&&!r?{...vD,...vE}:vD,...(0,ey.G)("tracked-by-label"),children:(0,F.jsx)(vP,{showElipsis:m,children:(0,F.jsx)(v_,{items:f})})}),(0,F.jsx)(yu.W,{anchorRef:u,open:r,onOpenChange:eC.l,children:(0,F.jsx)(yu.W.Overlay,{sx:{width:"353px",maxHeight:g},onEscape:()=>n(!1),onClickOutside:()=>n(!1),className:vS.ActionMenu_Overlay,children:(0,F.jsx)(fi.l,{children:(0,F.jsx)(fi.l.Group,{children:e.map(e=>(0,F.jsx)(fi.l.LinkItem,{href:e.url,onClick:vT(e,s),rel:"noreferer",role:"button",target:"_blank",children:(0,F.jsx)(vR,{title:`Tracking: ${e.title}`,displayNumber:e.displayNumber,state:e.state,stateReason:e.stateReason,url:e.url})},e.itemId))})})})})]})}):null},vT=(e,t)=>{let a=vI(e);return e=>{e.ctrlKey||e.metaKey||!a.item||(e.preventDefault(),t(a))}},v_=({items:e})=>{let{openPaneHistoryItem:t}=c7();return(0,F.jsx)(F.Fragment,{children:e.map((a,r)=>(0,F.jsx)(vA,{onClick:vT(a,t),title:`#${a.displayNumber}${e.length>1&&r!==e.length-1?",":""}`,state:a.state,stateReason:a.stateReason,url:a.url,itemId:a.itemId},a.itemId))})},vA=({title:e,state:t,stateReason:a,url:r,itemId:n,...i})=>(0,F.jsxs)(pw.A,{...i,target:"_blank",rel:"noreferer",href:r,role:"button","data-hovercard-type":"issue","data-hovercard-url":`${r}/hovercard`,...(0,ey.G)(`tracked-by-label-${n}`),children:[(0,F.jsx)(pq,{state:t,stateReason:a,type:"Issue",isDraft:!1}),(0,F.jsx)("span",{className:vS.Text,children:e})]}),vR=({displayNumber:e,title:t,state:a,stateReason:r,url:n,...i})=>(0,F.jsxs)("div",{className:vS.Box_1,...i,children:[(0,F.jsx)(pq,{state:a,stateReason:r,type:"Issue",isDraft:!1}),(0,F.jsx)("span",{className:vS.Text_1,children:t}),(0,F.jsx)("span",{className:vS.Text_2,children:`#${e}`})]}),vP=({showElipsis:e,children:t})=>{let{trackedBy:a}=n9;return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)("span",{className:vS.Text_3,children:a}),t,e&&(0,F.jsx)("span",{className:vS.Text_4,children:"..."})]})},vD={backgroundColor:"canvas.subtle",color:"fg.muted",cursor:"pointer",display:"flex",justifyContent:"center",p:"4px 12px",overflow:"hidden",textAlign:"left"},vE={position:"absolute",zIndex:1,top:0,bottom:0,margin:"-12px 0"};try{vN.displayName||(vN.displayName="TrackedByLabel")}catch{}try{v_.displayName||(v_.displayName="TrackedByItems")}catch{}try{vA.displayName||(vA.displayName="TrackedByLink")}catch{}try{vR.displayName||(vR.displayName="TrackedByMenuItem")}catch{}try{vP.displayName||(vP.displayName="TrackedByLabelContent")}catch{}var vM=a(72789),vB=a(34164);let vL={labelStyle:"tracked-by-label-restyled-module__labelStyle--Lj2eF",trackedByStyle:"tracked-by-label-restyled-module__trackedByStyle--ob1b1",Octicon:"tracked-by-label-restyled-module__Octicon--EEuBi",Text_1:"tracked-by-label-restyled-module__Text_1--PzPM_",Text_2:"tracked-by-label-restyled-module__Text_2--aMPLG",Text_3:"tracked-by-label-restyled-module__Text_3--JA1Bu",trackedByTextStyle:"tracked-by-label-restyled-module__trackedByTextStyle--Z9WcL"},vF=({issueId:e,items:t,url:a})=>t.length?(0,F.jsx)(bD.A,{as:"div",size:"large",className:vL.labelStyle,...(0,ey.G)("tracked-by-label"),children:(0,F.jsx)(vW,{children:(0,F.jsx)(vG,{issueId:e,items:t,url:a})})}):null,vO=(e,t)=>{let a=vI(e);return e=>{e.ctrlKey||e.metaKey||!a.item||(e.preventDefault(),t(a))}},vG=({issueId:e,items:t,url:a})=>{let{openPaneHistoryItem:r}=c7();if(!t.length||!t[0])return null;if(t.length>1)return(0,F.jsx)(vV,{items:t,url:a});let n=t[0];return(0,F.jsx)(v$,{onClick:vO(n,r),title:`${n.title}`,displayNumber:n.displayNumber,trackedByTitle:n.trackedByTitle,state:n.state,stateReason:n.stateReason,url:n.url,issueId:e,itemId:n.itemId})},vV=({items:e,url:t})=>{let{openPaneHistoryItem:a}=c7(),r=`${t}/tracked_in/hovercard`;return(0,vM.I)((t,n)=>{if(t!==r)return;let i=n.target.closest("a");if(!i)return;let l=e.find(e=>new URL(e.url).pathname===i.pathname);l&&vO(l,a)(n)}),(0,F.jsxs)("span",{"data-hovercard-type":"tracked_in","data-hovercard-url":r,className:vL.trackedByStyle,children:[(0,F.jsx)(lw.A,{icon:ly.IssueTrackedByIcon,className:vL.Octicon}),(0,F.jsx)("span",{className:(0,vB.$)(vL.Text_1,vL.trackedByTextStyle),children:`${e.length} ${n9.trackingIssues}`})]})},v$=({trackedByTitle:e,displayNumber:t,title:a,state:r,stateReason:n,url:i,issueId:l,itemId:s,...o})=>(0,F.jsxs)(pw.A,{...o,target:"_blank",rel:"noreferer",href:i,role:"button","data-hovercard-type":"tracking","data-hovercard-url":i&&l?`${i}/tracking/${l}/hovercard`:void 0,className:vL.trackedByStyle,...(0,ey.G)(`tracked-by-label-${s}`),children:[(0,F.jsx)(pq,{state:r,stateReason:n,type:"Issue",isDraft:!1}),(0,F.jsx)("span",{className:vL.Text_2,children:a}),(0,F.jsxs)("span",{className:(0,vB.$)(vL.Text_3,vL.trackedByTextStyle),children:[t,(0,F.jsx)(ly.ChevronRightIcon,{size:12}),e]})]}),vW=({children:e})=>(0,F.jsx)(F.Fragment,{children:e});try{vF.displayName||(vF.displayName="RestyledTrackedByLabel")}catch{}try{vG.displayName||(vG.displayName="TrackedByItems")}catch{}try{vV.displayName||(vV.displayName="TrackedByAnchor")}catch{}try{v$.displayName||(v$.displayName="TrackedByLink")}catch{}try{vW.displayName||(vW.displayName="TrackedByLabelContent")}catch{}let vz={Box:"tracking-fields-module__Box--0dUZh"};function vH({progress:e}){let{theme:t}=(0,z.DP)();return(0,F.jsxs)("svg",{"aria-hidden":"true",width:"14",height:"14",viewBox:"0 0 14 14","data-target":"tracked-issues-progress.progress","data-circumference":"38",style:{transform:"rotate(-90deg)",display:"inline-block",overflow:"visible",verticalAlign:"text-bottom"},children:[e<1?null:(0,F.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.0206 11.1074C9.68518 11.3949 9.18014 11.3561 8.8926 11.0206L5.8926 7.52061C5.62055 7.20322 5.63873 6.72989 5.93432 6.4343L7.43432 4.9343C7.74674 4.62188 8.25327 4.62188 8.56569 4.9343C8.87811 5.24672 8.87811 5.75325 8.56569 6.06567L7.58953 7.04182L10.1074 9.97935C10.3949 10.3148 10.3561 10.8198 10.0206 11.1074Z",fill:t?.colors.done.fg}),(0,F.jsx)("circle",{stroke:t?.colors.border.default,strokeWidth:"2",fill:"transparent",cx:"50%",cy:"50%",r:"6"}),(0,F.jsx)("circle",{style:{transition:"stroke-dashoffset 0.35s"},stroke:t?.colors.done.fg,strokeWidth:"2",strokeDasharray:38,strokeDashoffset:38-38*e,strokeLinecap:"round",fill:"transparent",cx:"50%",cy:"50%",r:"6"})]})}let vU=(0,K.forwardRef)(({progress:{percent:e,total:t,completed:a},description:r,constantWidth:n,...i},l)=>{let s=("button"===i.as&&!i.disabled||"a"===i.as)&&!n;return(0,F.jsx)(bk.A,{ref:l,leadingVisual:()=>(0,F.jsx)(vH,{progress:e/100}),text:(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)("span",{...(0,ey.G)("progress-text"),children:r??`${a} of ${t}`}),s&&(0,F.jsx)(lw.A,{icon:ly.TriangleRightIcon,className:"triangle",sx:{opacity:"0 !important",transitionProperty:"transform, opacity",transitionDuration:"0.2s",transitionTimingFunction:"ease-in-out",position:"absolute",right:0,paddingRight:0,transform:"translateX(-12px) translateY(-50%)",top:"50%"}})]}),...i,sx:{pl:1,bg:"canvas.default",transitionProperty:"background-color, padding-right",transitionDuration:"0.2s",transitionTimingFunction:"ease-in-out","&:hover, &:focus":s?{pr:3,".triangle":{opacity:"1 !important",transform:"translateX(0) translateY(-50%)"}}:{},...i.sx}})});vU.displayName="TracksToken";try{vH.displayName||(vH.displayName="ProgressIcon")}catch{}let vq={Label:"tracks-label-module__Label--FoN6J",Text:"tracks-label-module__Text--AVELy"},vK=({completion:e})=>{if(!e||0===e.total)return null;let{completed:t,total:a}=e,{tasks:r}=n7,n=r(t,a);return t?(0,F.jsx)(vU,{progress:e,description:n,size:"large"}):(0,F.jsxs)(bD.A,{size:"large",variant:"secondary",className:vq.Label,children:[(0,F.jsx)(ly.ChecklistIcon,{size:16}),(0,F.jsx)("div",{className:vq.Text,children:n})]})};try{vK.displayName||(vK.displayName="TracksLabel")}catch{}let vQ=()=>{let{sidePanelMetadata:e}=xO(),{completion:t,itemKey:a,trackedBy:r,url:n}=e,i="issue"===a.kind?a.itemId:void 0,{tasklist_tracked_by_redesign:l}=iz();return(0,F.jsxs)("div",{className:vz.Box,...(0,ey.G)("tracking-fields"),children:[(0,F.jsx)(vK,{completion:t}),r?.length?l?(0,F.jsx)(vF,{issueId:i,items:r,url:n}):(0,F.jsx)(vN,{currentValue:r}):null]})};try{vQ.displayName||(vQ.displayName="TrackingFields")}catch{}let vJ={Box:"index-module__Box--OVwUh",Box_1:"index-module__Box_1--gDcP9",Box_2:"index-module__Box_2--zg4BA",Box_3:"index-module__Box_3--JSX6h",Box_4:"index-module__Box_4--ZzD_L",Box_5:"index-module__Box_5--cL6SD",Box_6:"index-module__Box_6--bjQvd",Box_7:"index-module__Box_7--Q4PxM",Text:"index-module__Text--LQtua",Text_1:"index-module__Text_1--bs7QP",Text_2:"index-module__Text_2--A9Xo3",Box_8:"index-module__Box_8--bQQki",Box_9:"index-module__Box_9--sfWz5",Text_3:"index-module__Text_3--wawbh",Box_10:"index-module__Box_10--iQpJb",Box_11:"index-module__Box_11--R9LVR",TextInput:"index-module__TextInput--R8dVC",Text_4:"index-module__Text_4--Lz0Qf",Text_5:"index-module__Text_5--ZEZuQ",Link:"index-module__Link--YjKwo",Text_6:"index-module__Text_6--rfUTO",Box_12:"index-module__Box_12--T539D",UnderlineNav:"index-module__UnderlineNav--h5MR7",UnderlineNav_Link:"index-module__UnderlineNav_Link--PDj98"},vX=(0,K.memo)(function({item:e,isLoading:t,selectedTab:a,onTabChange:r,showBreadcrumbs:n,showTabs:i}){let{sidePanelMetadata:l}=xO(),{title:s,createdAt:o,user:d,state:u,itemKey:c}=l,m=!n&&e.contentType===eJ.Issue;return(0,F.jsxs)("header",{className:vJ.Box,children:[(0,F.jsx)("div",{className:vJ.Box_1,children:(0,F.jsx)("div",{className:vJ.Box_2,children:(0,F.jsxs)("div",{className:vJ.Box_3,children:[(0,F.jsxs)("div",{className:vJ.Box_4,children:[(0,F.jsx)(vZ,{showCloseButton:!0}),n&&(0,F.jsx)("div",{...(0,ey.G)("side-panel-breadcrumbs"),className:vJ.Box_5,children:(0,F.jsx)(vy,{})}),m&&(0,F.jsx)("div",{className:vJ.Box_6,children:(0,F.jsx)(vY,{item:e})})]}),(0,F.jsx)(v0,{item:e,title:s,isLoading:t}),!t&&o&&d.login?(0,F.jsxs)("div",{className:vJ.Box_7,children:[(0,F.jsx)(vb,{itemType:c.kind,state:u}),(0,F.jsx)(vQ,{}),(0,F.jsxs)("address",{className:vJ.Text,children:[(0,F.jsx)("span",{className:vJ.Text_1,children:d.login}),(0,F.jsxs)("span",{className:vJ.Text_2,children:[" opened ",(0,F.jsx)(bE.A,{datetime:o})]})]})]}):null]})})}),i?(0,F.jsx)(v1,{selectedTab:a,onTabChange:r}):(0,F.jsx)("div",{className:vJ.Box_8})]})});vX.displayName="SidePanelHeader";let vY=({item:e})=>{let t=e.getExtendedRepository(),a=t?.name||e.getRepositoryName()||"",r=t?.url?(0,F.jsx)(hV,{repository:t}):void 0;return(0,F.jsxs)("div",{className:vJ.Box_9,children:[r&&(0,F.jsx)("span",{className:vJ.Text_3,children:r}),(0,F.jsx)("span",{children:`${a} #${e.getItemNumber()}`})]})},vZ=({children:e,showCloseButton:t})=>{let{pinButtonRef:a,closePane:r,pinned:n,setPinned:i}=c7();return(0,F.jsxs)("div",{role:"group","aria-label":nH.sidePanelToolbarLabel,className:vJ.Box_10,children:[t&&(0,F.jsx)(fE.K,{variant:"invisible","aria-label":"Close panel",icon:ly.XIcon,onClick:()=>r(),...(0,ey.G)("side-panel-button-close")}),(0,F.jsx)(fE.K,{variant:"invisible","aria-label":n?nH.sidePanelUnpinLabel:nH.sidePanelPinLabel,icon:n?ly.PinSlashIcon:ly.PinIcon,onClick:()=>i(!n),ref:a,tooltipDirection:"sw"}),e]})},v0=(0,K.memo)(function({item:e,title:t,isLoading:a}){let[r,n]=xE(),[i,l]=(0,K.useState)(""),s=(0,K.useRef)(null),{hasWritePermissions:o}=eK(),{postStats:d}=iN(),{addToast:u}=lV(),{editIssueTitle:c,sidePanelMetadata:{capabilities:m,itemKey:p,issueNumber:h,url:f}}=xO(),g=(0,K.useMemo)(()=>m?.includes("editTitle"),[m]),y=(0,K.useCallback)(()=>{r||l(t.raw)},[t,r]);(0,K.useEffect)(()=>y(),[y]);let x=uN({request:(0,K.useCallback)(async t=>{let a=x0(t);e&&(await c(a),d({name:e9,ui:eX,memexProjectItemId:e.id}))},[c,e,d]),rollback:y}),b=(0,K.useCallback)(async()=>{if(s.current&&s.current instanceof HTMLInputElement){let e=s.current.value.trim();if(""===e){u({message:nH.titleCannotBeBlank,type:nF.warning});return}await x.perform(e)}n(!1)},[x,u,n]),v=(0,K.useCallback)(e=>{l(e.target.value)},[l]),w=(0,K.useCallback)(e=>{switch(e.key){case fN.ENTER:b(),e.preventDefault();break;case fN.ESCAPE:y(),n(!1),e.preventDefault()}},[b,y,n]),j=(0,xJ._)(w),C=(0,K.useCallback)(()=>{o&&(y(),n(!0))},[o,y,n]);return(0,K.useEffect)(()=>{r?s.current?.focus():window.setTimeout(()=>{document.activeElement===document.body&&s.current?.focus()})},[r]),(0,F.jsxs)(lx.A,{sx:{pt:r?1:0,mb:r?1:0},className:vJ.Box_11,children:[(0,F.jsx)("div",{className:vJ.Box_5,...(0,ey.G)("side-panel-title"),children:r?(0,F.jsx)(br,{fullWidth:!0,children:(0,F.jsx)(gp.A,{"aria-label":"Item title",ref:s,value:i,onChange:v,...j,size:"small",className:vJ.TextInput,...(0,ey.G)("side-panel-title-input")})}):(0,F.jsx)("h2",{className:vJ.Text_4,...(0,ey.G)("side-panel-title-content"),children:a?(0,F.jsx)("span",{className:vJ.Text_5,children:"Loading..."}):p.kind===sf.ISSUE&&h&&f?(0,F.jsxs)(pw.A,{href:f,target:"_blank",onClick:()=>d({name:tj}),className:vJ.Link,children:[(0,F.jsx)(p$,{as:"bdi",children:t.html}),(0,F.jsxs)("span",{className:vJ.Text_6,children:["#",h]})]}):(0,F.jsx)(p$,{as:"bdi",children:t.html})})}),(0,F.jsxs)(lx.A,{sx:{mt:r?0:1},children:[!r&&!a&&g&&(0,F.jsx)(p4.Q,{size:"small",onClick:C,variant:"invisible",...(0,ey.G)("side-panel-title-edit-button"),className:vJ.Link,children:nH.editTitle}),r&&(0,F.jsxs)("div",{className:vJ.Box_12,children:[(0,F.jsx)(p4.Q,{size:"small",variant:"primary",onClick:b,...(0,ey.G)("side-panel-title-save-button"),children:"Save"}),(0,F.jsx)(p4.Q,{size:"small",onClick:()=>{y(),n(!1)},...(0,ey.G)("side-panel-title-revert-button"),children:"Cancel"})]})]})]})}),v1=({selectedTab:e,onTabChange:t})=>(0,F.jsxs)(vh.A,{className:vJ.UnderlineNav,children:[(0,F.jsx)(vh.A.Link,{onClick:()=>t("details"),selected:"details"===e,className:vJ.UnderlineNav_Link,children:"Details"}),(0,F.jsx)(vh.A.Link,{onClick:()=>t("tracks"),selected:"tracks"===e,className:vJ.UnderlineNav_Link,children:"Tracks"})]});try{vZ.displayName||(vZ.displayName="SidePanelToolbar")}catch{}try{v0.displayName||(v0.displayName="SidePanelTitle")}catch{}let v2=({targetRepository:e,sx:t})=>{let a=(0,K.useRef)(null),r=(0,K.useRef)(null),[n,i]=(0,K.useState)(""),[l,s]=(0,K.useState)(!1),[o,d]=(0,K.useState)(!1),[u,c]=(0,K.useState)(void 0),[m,p]=(0,K.useState)([]),[h,f]=(0,K.useState)([]),g=(0,K.useRef)(void 0),{suggestRepositories:y,clearCachedSuggestions:x}=mk(),{postStats:b}=iN(),v=(0,K.useRef)(h),{hasFetchedRepos:w,setSelectedRepo:j,setHasFetchedRepos:C}=mH();(0,hF.r)({restoreFocusOnCleanUp:!0,initialFocusRef:a,containerRef:r});let I=(0,K.useCallback)(()=>{s(!1)},[]),S=(0,K.useCallback)(async()=>{v.current.length||(d(!0),x(),f(await y({repositoryId:e?.id})??[]),C(!0),d(!1))},[x,C,y,e?.id]),k=(0,K.useCallback)(e=>(""!==n?m:h).find(t=>t.id===e),[n,m,h]);(0,K.useEffect)(()=>{S()},[S,C]),(0,K.useEffect)(()=>{if(w&&!u){let t=h.find(t=>t.id===e?.id)??h[0];t&&c({id:t.id,text:t.name,leadingVisual:()=>hV({repository:t})}),C(!0),j(t||null)}},[j,C,h,u,w,e?.id]);let N=(0,K.useCallback)(async e=>{if(""!==e){d(!0);let{repositories:t}=await hG({query:e});p(t),d(!1)}else p(h??[])},[h]),T=(0,K.useCallback)(()=>{g.current&&g.current.cancel(),g.current=(0,nN.A)(()=>N(n),200),g.current()},[N,n]),_=e=>{if(e?.id){let t=k(e.id);t&&(c({id:t.id,text:t.name,leadingVisual:()=>hV({repository:t})}),j(t),b({name:"bulk_add_side_panel_repo_switched",context:JSON.stringify({repo:t.name})}))}},A=(""!==n?m:h).map(e=>{let{projectOwner:t}=eU(),a=e.nameWithOwner.split("/")[0],r=a?.toLowerCase()!==t?.login.toLowerCase()?e.nameWithOwner:e.name;return{...e,text:r,leadingVisual:()=>hV({repository:e}),selectionVariant:"single",descriptionVariant:"block",selected:void 0,onAction:(t,a)=>{a.preventDefault(),_(e),I()}}});return(0,F.jsx)(hO.X,{placeholderText:nH.repoPickerFilterPlaceholder,open:l,renderAnchor:({children:e,...a})=>(0,F.jsx)(p4.Q,{leadingVisual:u?.leadingVisual,trailingVisual:ly.TriangleDownIcon,sx:t,...a,...(0,ey.G)("repo-suggestions-button"),children:e||nH.selectRepo}),onOpenChange:()=>s(!0),loading:o,selected:u,filterValue:n,items:A,showItemDividers:!0,onFilterChange:e=>{i(e),T()},onSelectedChange:_,overlayProps:{width:"small",onMouseDown:e=>e.stopPropagation(),height:"auto",onClickOutside:I,...(0,ey.G)("repo-picker-repo-list")}})};v2.displayName="RepoSuggestions";let v5=(0,K.memo)(function({onClick:e,disabled:t}){return(0,F.jsx)(p4.Q,{variant:"invisible",size:"small",onClick:e,"aria-label":"Search",disabled:t,sx:{margin:"0 2px",color:t?"accent.muted":"accent.fg",border:"none",height:"24px"},...(0,ey.G)("bulk-add-search-button"),children:"Search \u23CE"})}),v3=({targetRepository:e,newItemAttributes:t})=>{let{postStats:a}=iN(),{isPaneOpened:r}=c7(),{addSelectedItemsRequest:n,selectedItems:i,hasFetchedRepos:l,selectedRepo:s,setSelectedRepo:o,setHasFetchedRepos:d,loading:u,addingItems:c,items:m,searchQuery:p,setSearchQuery:h,setAreAllItemsAdded:f,setUpdateColumnsAction:g,MAX_ITEM_NUM:y}=mH(),[x,b]=(0,K.useState)(!1),[v,w]=(0,K.useState)(!1),[j,C]=(0,K.useState)(p),I=(0,K.useRef)(null),S=(0,K.useRef)(r);(0,K.useEffect)(function(){S.current&&!r&&(o(null),h(""),g([]),d(!1)),S.current=r},[d,h,o,g,r]);let k=(0,K.useCallback)(e=>{let t=fA(e),a=e.currentTarget.value.trim();t===fN.ENTER&&h(a)},[h]),N=(0,xJ._)(k),T=(0,K.useCallback)(e=>{C(e.currentTarget.value),w(e.currentTarget.value.trim().length>0)},[]),_=(0,K.useCallback)(()=>{h(I.current?.value??"")},[h]),A=(0,K.useCallback)(()=>{b(!0)},[]),R=(0,K.useCallback)(()=>{b(!1)},[]);(0,K.useEffect)(()=>{g(t?.updateColumnActions??[])},[g,t]);let P=vp(),D=(0,K.useCallback)(async()=>{await n.perform(i),i.some(e=>"hasSubIssues"in e&&e.hasSubIssues)&&P(),a({name:"bulk_add_side_panel_add_items",context:i.length.toString()}),i.length===y&&f(!0)},[n,i,a,y,P,f]),E=v||x||p!==j;return(0,F.jsxs)(lx.A,{sx:{display:"flex",flexDirection:"column",backgroundColor:"canvas.default",width:"100%",height:"100%",overflow:"auto",justifyContent:"space-between"},...(0,ey.G)("bulk-add-view"),children:[(0,F.jsxs)(lx.A,{sx:{mt:4,mx:[3,"",4]},children:[(0,F.jsxs)(lx.A,{sx:{display:"flex",mb:3,flexDirection:"row-reverse"},children:[(0,F.jsx)(vZ,{showCloseButton:!0}),(0,F.jsx)(lx.A,{sx:{flex:1}}),(0,F.jsx)(lv.A,{sx:{fontWeight:"600",fontSize:3},as:"h2",children:nH.sidePanelBulkAddLabel})]}),(0,F.jsxs)(lx.A,{sx:{display:"flex",justifyContent:"flex-start"},children:[(0,F.jsx)(v2,{targetRepository:e},"repoSuggestions"),(0,F.jsx)(gp.A,{sx:{flex:1,ml:2},disabled:!(l&&s),leadingVisual:ly.SearchIcon,"aria-label":"Search for issues and pull requests",ref:I,type:"text",placeholder:"Search for issues and pull requests",onChange:T,onFocus:A,onBlur:R,...N,size:"small",value:j,trailingAction:E?(0,F.jsx)(v5,{onClick:_,disabled:!v&&!p||p===j}):void 0,...(0,ey.G)("suggested-items-search-input")})]}),(0,F.jsx)(p3,{})]}),(0,F.jsx)(lx.A,{sx:{position:"sticky",zIndex:"1",display:"flex",justifyContent:"flex-end",bottom:"0",backgroundColor:"canvas.default",borderTop:"1px solid",borderColor:"border.default",width:"100%"},children:(0,F.jsx)(p4.Q,{variant:"primary",onClick:D,...(0,ey.G)("bulk-add-button"),disabled:u||c||m?.length===0||0===i.length,sx:{my:3,mr:4},children:c?1===i.length?"Adding item...":"Adding items...":"Add selected items"})})]})};try{v5.displayName||(v5.displayName="SearchButton")}catch{}try{v3.displayName||(v3.displayName="BulkAddView")}catch{}var v4=a(91321);let v6={ButtonGroup:"add-comment-module__ButtonGroup--a8XKf",CommentBox:"add-comment-module__CommentBox--ICi4L"},v8=(0,K.forwardRef)((e,t)=>{let a=x$(),[r,n]=xE(),[i,l]=(0,K.useState)(""),[s,o]=(0,K.useState)(!1),[d,u]=(0,K.useState)(!1);(0,K.useEffect)(()=>n(""!==i.trim()),[i,n]);let[c,m]=(0,K.useState)("edit"),p=()=>{l(""),m("edit"),o(!1)};(0,K.useEffect)(()=>{if(f_())return;let e=e=>{let a="r"===e.key,r=window.getSelection()?.toString(),n=e.ctrlKey||e.altKey||e.metaKey||e.shiftKey,i=document.activeElement instanceof HTMLTextAreaElement||document.activeElement instanceof HTMLInputElement;a&&r&&!n&&!i&&((0,pN.flushSync)(()=>{l(e=>e.length?`${e}

> ${r}

`:`> ${r}

`)}),t&&"current"in t&&(t?.current?.scrollIntoView(),t?.current?.focus())),u((e.ctrlKey||e.metaKey)&&e.shiftKey)},a=()=>u(!1);return window.addEventListener("keydown",e),window.addEventListener("keyup",a),()=>{window.removeEventListener("keydown",e),window.removeEventListener("keyup",a)}},[t]);let{addIssueComment:h,sidePanelMetadata:f,updateSidePanelItemState:g}=xO(),y=(0,K.useMemo)(()=>new Set(f.capabilities),[f]),x=uN({request:async()=>{o(!0),await h(i),p()},rollback:l,showErrorToast:!0}),b=()=>r&&!s&&x.perform(void 0,i),v=uN({request:async({state:e,stateReason:t})=>{o(!0),r?await h(i,e,t):await g(e,t),p()},rollback:l,showErrorToast:!0}),w=(e,t)=>!s&&v.perform({state:e,stateReason:t},i),j=y.has("reopen")?()=>w(eL.Open,eF.Reopened):void 0,C=y.has("close")?e=>w(eL.Closed,e):void 0,I=vr();return f.itemKey.kind!==sf.ISSUE?null:(0,F.jsx)(xG.h,{label:"Add new comment",showLabel:!1,disabled:s,value:i,onChange:l,placeholder:"Leave a comment",subject:I,onPrimaryAction:()=>{if(d)return f.state.state===eL.Closed?j?.():C?.();b()},viewMode:c,onChangeViewMode:m,ref:t,userSettings:a,actions:(0,F.jsx)(wa,{disabled:s,isCommentEmpty:!r,currentIssueState:f.state.state,currentIssueStateReason:f.state.stateReason,onSaveComment:b,onClose:C,onReopen:j}),className:v6.CommentBox,...(0,ey.G)("markdown-editor")})});function v7(e,t,a){return e===eL.Open?a?nH.issueButtonLabel.closeWithComment:nH.issueButtonLabel.closeIssue:t===eF.NotPlanned?nH.issueButtonLabel.closeAsNotPlanned:nH.issueButtonLabel.closeAsCompleted}v8.displayName="SidePanelAddComment";let v9=({selectedStateReason:e,issueState:t,onClose:a,onReopen:r,hasComment:n,disabled:i})=>{switch(e){case eF.Completed:return(0,F.jsx)(p4.Q,{size:"small",onClick:()=>a?.(),leadingVisual:ly.IssueClosedIcon,sx:{color:"done.fg",display:"inline-block"},disabled:!a||i,...(0,ey.G)("sidepanel-close-issue-as-completed-button"),children:(0,F.jsx)(lv.A,{sx:{color:"fg.default"},children:v7(t,e,n)})});case eF.Reopened:return(0,F.jsx)(p4.Q,{size:"small",onClick:r,leadingVisual:ly.IssueReopenedIcon,sx:{color:"open.fg"},disabled:!r||i,...(0,ey.G)("sidepanel-reopen-issue-button"),children:(0,F.jsx)(lv.A,{sx:{color:"fg.default"},children:n?nH.issueButtonLabel.reopenWithComment:nH.issueButtonLabel.reopenIssue})});case eF.NotPlanned:return(0,F.jsx)(p4.Q,{size:"small",onClick:()=>a?.(eF.NotPlanned),leadingVisual:ly.SkipIcon,sx:{color:"fg.muted"},disabled:!a||i,...(0,ey.G)("sidepanel-close-issue-as-not-planned-button"),children:(0,F.jsx)(lv.A,{sx:{color:"fg.default"},children:v7(t,e,n)})});default:return null}},we=({selectedStateReason:e,setSelectedStateReason:t,issueState:a,issueStateReason:r,canClose:n,canReopen:i})=>{let l=(0,F.jsxs)(fi.l.Item,{onSelect:()=>t(eF.Completed),selected:e===eF.Completed,disabled:!n,children:[(0,F.jsx)(fi.l.LeadingVisual,{sx:{color:"done.fg"},children:(0,F.jsx)(ly.IssueClosedIcon,{})}),nH.issueButtonLabel.closeAsCompleted,(0,F.jsx)(fi.l.Description,{variant:"block",children:nH.issueButtonLabel.closeAsCompletedDescription})]},"close-issue-as-completed-option"),s=(0,F.jsxs)(fi.l.Item,{onSelect:()=>t(eF.NotPlanned),selected:e===eF.NotPlanned,disabled:!n,children:[(0,F.jsx)(fi.l.LeadingVisual,{children:(0,F.jsx)(ly.SkipIcon,{})}),nH.issueButtonLabel.closeAsNotPlanned,(0,F.jsx)(fi.l.Description,{variant:"block",children:nH.issueButtonLabel.closeAsNotPlannedDescription})]},"close-issue-as-not-planned-option"),o=(0,F.jsxs)(fi.l.Item,{onSelect:()=>t(eF.Reopened),selected:e===eF.Reopened,disabled:!i,children:[(0,F.jsx)(fi.l.LeadingVisual,{sx:{color:"open.fg"},children:(0,F.jsx)(ly.IssueReopenedIcon,{})}),nH.issueButtonLabel.reopenIssue]},"reopen-issue-option");return(0,F.jsxs)(fi.l,{selectionVariant:"single",role:"listbox","aria-roledescription":"update issue state options menu",sx:{display:"flex",flexDirection:"column"},children:[a===eL.Open&&(0,F.jsxs)(F.Fragment,{children:[l,s]}),a===eL.Closed&&(r===eF.Completed||!r)&&(0,F.jsxs)(F.Fragment,{children:[o,s]}),a===eL.Closed&&r===eF.NotPlanned&&(0,F.jsxs)(F.Fragment,{children:[o,l]})]})};function wt(e){return e===eL.Open?eF.Completed:eF.Reopened}let wa=({isCommentEmpty:e,onSaveComment:t,currentIssueState:a,currentIssueStateReason:r,disabled:n,onClose:i,onReopen:l})=>{let[s,o]=(0,K.useState)(()=>wt(a));(0,pk.N)(()=>o(wt(a)),[a,r]);let[d,u]=(0,K.useState)(!1);return(0,F.jsxs)(lx.A,{sx:{display:"flex",flexDirection:"row",flexWrap:"wrap",gap:2},children:[(i||l)&&(0,F.jsxs)(v4.A,{className:v6.ButtonGroup,children:[(0,F.jsx)(v9,{disabled:n,issueState:a,hasComment:!e,selectedStateReason:s,onClose:i,onReopen:l}),(0,F.jsxs)(yu.W,{open:d,onOpenChange:u,children:[(0,F.jsx)(yu.W.Anchor,{children:(0,F.jsx)(fE.K,{size:"small",icon:ly.TriangleDownIcon,"aria-label":nH.issueSideButtonMoreOptionsLabel})}),(0,F.jsx)(yu.W.Overlay,{children:(0,F.jsx)(we,{selectedStateReason:s,setSelectedStateReason:o,canClose:void 0!==i,canReopen:void 0!==l,issueState:a,issueStateReason:r})})]})]}),(0,F.jsx)(xV.x,{variant:"primary",className:"prc-Button--primary",disabled:e||n,onClick:t,...(0,ey.G)("add-comment-button"),children:"Comment"})]})};try{(g=CloseAsCompleted).displayName||(g.displayName="CloseAsCompleted")}catch{}try{(y=CloseAsNotPlanned).displayName||(y.displayName="CloseAsNotPlanned")}catch{}try{(x=Reopen).displayName||(x.displayName="Reopen")}catch{}let wr=({itemURL:e})=>{let{sidePanelMetadata:{comments:t,capabilities:a},editIssueComment:r,reactToSidePanelItem:n}=xO(),[i,l]=(0,K.useState)(null),s=(0,K.useRef)(null),o=hZ(i).offsetHeight??0;return t?(0,F.jsxs)(lx.A,{sx:{display:"flex",flexDirection:"column",px:2,backgroundColor:"canvas.subtle",borderTop:"1px solid",borderColor:"border.muted",flex:"auto"},as:"section",ref:l,...(0,ey.G)("all-comments-box"),children:[(0,F.jsx)("h3",{style:{clipPath:"circle(0)",position:"absolute"},children:"Comments"}),(0,F.jsx)(wn,{onClick:()=>{s.current?.scrollIntoView({behavior:"smooth",block:"end"}),s.current?.focus({preventScroll:!0})},visible:o>=1e4}),(0,F.jsx)("ul",{style:{listStyle:"none"},children:t.map(t=>(0,F.jsx)(wl,{comment:t,editIssueComment:r,reactToSidePanelItem:n,itemURL:e},t.id))}),a?.includes("comment")&&(0,F.jsx)(v8,{ref:s})]}):null},wn=({onClick:e,visible:t})=>(0,F.jsx)(wi,{sx:{display:"flex",justifyContent:"flex-end",px:3},children:(0,F.jsx)(p4.Q,{variant:"invisible",size:"small",onClick:e,trailingVisual:ly.ArrowDownIcon,sx:{px:2,position:t?"unset":"absolute",clipPath:t?"unset":"Circle(0)",":focus":{position:"unset",clipPath:"unset"}},"aria-label":"Jump to 'add comment' input",...(0,ey.G)("jump-to-bottom-button"),children:nH.jumpToBottom})}),wi=({children:e,sx:t})=>(0,F.jsx)(lx.A,{sx:{borderLeft:"1px solid",borderColor:"border.muted",py:2,ml:4,...t},children:e}),wl=({comment:e,editIssueComment:t,reactToSidePanelItem:a,itemURL:r})=>{let n=`${r}#issuecomment-${e.id}`,i=e.capabilities?.includes("editDescription")?async a=>{await t(e.id,a)}:void 0,l=e.capabilities?.includes("react")?(t,r,n)=>a(t,r,n,e.id):void 0;return(0,F.jsxs)("li",{...(0,ey.G)(`comments-box-${e.id}`),children:[(0,F.jsx)(lx.A,{sx:{border:"1px solid",borderColor:"border.muted",backgroundColor:"canvas.default",borderRadius:2,boxShadow:"shadow.small"},children:(0,F.jsx)(vd,{author:e.user,authorAssociation:e.authorAssociation,createdAt:new Date(e.createdAt),editedAt:e.description.editedAt?new Date(e.description.editedAt):void 0,description:e.description,reactions:e.reactions,onEdit:i,onReact:l,url:n})}),(0,F.jsx)(wi,{})]})};try{wr.displayName||(wr.displayName="SidePanelComments")}catch{}try{wn.displayName||(wn.displayName="JumpToBottomButton")}catch{}try{wi.displayName||(wi.displayName="TimelineSpacer")}catch{}var ws=a(37440),wo=a(3172);let wd=e=>e!==eJ.RedactedItem;async function wu(e){let t=nP("memex-item-archive-api-data"),{data:a}=await ix(t.url,{method:"POST",body:e});return a}async function wc(e){let t=nP("memex-item-unarchive-api-data"),{data:a}=await ix(t.url,{method:"PUT",body:e});return a}function wm(e){let t=(0,K.useCallback)((t,a)=>e.mutateAsync(t,a).catch(eC.l),[e]);return{mutation:e,mutateAsync:t}}let wp=(0,K.createContext)(null),wh=(e,t)=>{switch(t.type){case"removeLast":return e.slice(1);case"register":return[t.data,...e].slice(0,5)}},wf=({children:e})=>{let[[t],a]=(0,K.useReducer)(wh,[]),{postStats:r}=iN(),n=(0,K.useMemo)(()=>t&&{...t,revert:e=>{t.revert(),a({type:"removeLast"}),r({name:"undo",ui:e,context:t.description})}},[t,r]),i=(0,K.useMemo)(()=>({lastAction:n,registerAction:e=>a({type:"register",data:e})}),[n]);return eg(()=>n?["z",`Undo ${n.description}`,"undo",()=>n.revert("command_palette_command")]:null,[n]),(0,K.useEffect)(()=>{let e=e=>{let t=fA(e)===fN.META_Z,a=document.activeElement instanceof HTMLInputElement||document.activeElement instanceof HTMLTextAreaElement;t&&!a&&n&&!e.defaultPrevented&&(e.preventDefault(),n.revert("keyboard_shortcut"))};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[n,r]),(0,F.jsx)(wp.Provider,{value:i,children:e})},wg=()=>(0,K.useContext)(wp);try{wp.displayName||(wp.displayName="HistoryContext")}catch{}try{wf.displayName||(wf.displayName="HistoryProvider")}catch{}let wy=()=>{let e=uO(),{findMemexItem:t}=ub();return{removeSuggestions:(0,K.useCallback)(a=>{e.removeSuggestions(a.map(e=>"number"==typeof e?t(e)?.getSuggestionsCacheKey():e.getSuggestionsCacheKey()).filter(e=>e?.length))},[e,t])}},wx=()=>{let{removeSuggestions:e}=wy(),{setArchiveStatus:t}=mY(),{getIssuesIdsToRemove:a,removeParentFromChildren:r}=uk(),{tasklist_block:n}=iz(),i=(0,U.jE)(),{addToast:l}=lV(),s=wg(),o=(0,sm.n)({mutationFn:e=>wu(e),onMutate:e=>{let t=a(e.memexProjectItemIds),r=oO(i);return oH(i,e.memexProjectItemIds),l3(),{originalQueryData:r,issueIdsToRemove:t}},onSuccess:(a,i,l)=>{let o=n&&l?.issueIdsToRemove?r(l.issueIdsToRemove):void 0;e(i.memexProjectItemIds),t(),l&&s&&s.registerAction({description:nU.archive(i.memexProjectItemIds.length),revert:()=>d.mutateAsync({archivedItemIds:i.memexProjectItemIds,originalItemModels:oX(l.originalQueryData),rollbackRemoveParentFromChildren:o})})},onError:(e,t,a)=>{a?.originalQueryData&&oG(i,a?.originalQueryData),l({type:"error",message:e instanceof ApiError?e.message:nH.genericErrorMessage})}}),d=(0,sm.n)({mutationFn:({archivedItemIds:e})=>wc({memexProjectItemIds:e}),onMutate:({archivedItemIds:e,originalItemModels:t})=>{for(let a of e){let e=t?.findIndex(e=>e.id===a)??-1,r=t?.[e];r&&oz(i,r,e)}l3()},onSuccess:(e,{rollbackRemoveParentFromChildren:a})=>{a?.(),t()},onError:(e,{archivedItemIds:t})=>{oH(i,t),l({type:"error",message:`Failed to undo archive. ${e instanceof ApiError?e.message:nH.genericErrorMessage}`})}});return wm(o)},wb=()=>{let{findMemexItem:e}=ub(),{mutateAsync:t}=wx();return{archiveMemexItems:(0,K.useCallback)(async a=>{let r=a.filter(t=>{let a=e(t);return!!a&&wd(a.contentType)});if(0!==r.length)return t({memexProjectItemIds:r})},[e,t])}},wv=(e,t,a,r)=>({title:a||nH.defaultArchiveConfirmationTitle(e),content:r||nH.defaultArchiveConfirmationMessage(e,t),confirmButtonContent:"Archive"}),ww=(e,t,a,r)=>{let{postStats:n}=iN(),i=(0,uX.S)(),{archiveMemexItems:l}=wb();return{openArchiveConfirmationDialog:(0,K.useCallback)(async(s,o,d,u)=>{let c=s.length>1;e?.();let m=async()=>{r?.(),await l(s),t?.(s),n({name:"item_archive",ui:o,numberOfRows:s.length})};await i(wv(c,s.length,d,u))?m():a?.()},[e,i,r,l,t,n,a])}};async function wj(e){let t=nP("memex-item-delete-api-data"),{data:a}=await ix(t.url,{method:"DELETE",body:e});return a}let wC=()=>{let{removeSuggestions:e}=wy(),{setArchiveStatus:t}=mY(),{getIssuesIdsToRemove:a,removeParentFromChildren:r}=uk(),{tasklist_block:n}=iz(),i=(0,U.jE)(),{addToast:l}=lV();return wm((0,mg.W)({mutationFn:e=>wj(e),onMutate:t=>{let r=a(t.memexProjectItemIds);e(t.memexProjectItemIds);let n=oO(i),l=oH(i,t.memexProjectItemIds);return l3(),{originalQueryData:n,rollbackData:l,issueIdsToRemove:r}},onSuccess:(e,a,i)=>{n&&i?.issueIdsToRemove&&r(i.issueIdsToRemove),t()},onError:(e,t,a)=>{a?.originalQueryData?oG(i,a.originalQueryData):a?.rollbackData&&oU(i,a.rollbackData),l({type:"error",message:e instanceof ApiError?e.message:nH.genericErrorMessage})}})())},wI=()=>{let{mutateAsync:e}=wC();return{removeMemexItems:(0,K.useCallback)(async t=>{if(t.length)return e({memexProjectItemIds:t})},[e])}},wS=(e,t,a,r)=>{let{postStats:n}=iN(),{removeMemexItems:i}=wI(),{confirmRemoveItems:l}=wk();return{openRemoveConfirmationDialog:(0,K.useCallback)(async(s,o,d={})=>{e?.(),await l(s,d)?(r?.(),(0,pN.flushSync)(()=>{i(s)}),(0,pN.flushSync)(()=>{t?.(s)}),n({name:"item_delete",ui:o,numberOfRows:s.length})):a?.()},[e,l,r,n,i,t,a])}};function wk(){let e=(0,uX.S)();return{confirmRemoveItems:(0,K.useCallback)(async(t,a={})=>{let r=t.length>1;return e({title:`Delete item${r?"s":""}?`,content:`Are you sure you want to delete ${r?`these ${t.length} items`:"this item"} from this project?`,confirmButtonContent:"Delete",confirmButtonType:"danger",...a})},[e])}}function wN(e){let{loggedInUser:t,relayIds:a,projectOwner:r}=eU(),n=eP(),[i,l]=(0,K.useState)(e),{hasWritePermissions:s}=eK(),{items:o}=ug(),d=(0,U.jE)(),{openProjectItemInPane:u,reloadPaneItem:c}=c7(),m=(0,K.useCallback)(e=>o.find(t=>{let a=t.getItemIdentifier();return!!a&&a.owner===e.owner&&a.repo===e.repo&&a.number===e.number}),[o]);(0,K.useEffect)(()=>{let{owner:t,repo:a,number:r,url:n,itemId:i}=e,s=m({owner:t,repo:a,number:r,type:"Issue"});l({owner:t,repo:a,number:r,url:n,itemId:s?i:void 0})},[m,e]);let p=(0,K.useCallback)((e,t)=>{let a=e&&m(e);if(!a||!e){window.open(t,"_blank");return}u(a),l({owner:e.owner,repo:e.repo,number:e.number,url:t,itemId:a.id})},[m,u]),h=(0,K.useCallback)(e=>{if(e.metaKey||e.shiftKey||1===e.button||!e.target||!(e.target instanceof HTMLElement))return;let t=e.target.closest("a")?.href;t&&(e.preventDefault(),p(iM(t),t))},[p]),f=(0,K.useCallback)(e=>{let{id:t,owner:a,repo:r,number:n,url:i}=e,s=m({owner:a,repo:r,number:n,type:"Issue"}),o=new SubIssueSidePanelItem(e);s?u(s):u(o),l({owner:a,repo:r,number:n,url:i,itemId:s?t:void 0})},[m,u]),{closePane:g}=c7(),y=x$(),{openArchiveConfirmationDialog:x}=ww(void 0,void 0,void 0,()=>g({force:!0})),{openRemoveConfirmationDialog:b}=wS(void 0,void 0,void 0,()=>g({force:!0})),v=(0,K.useCallback)(()=>{window.open(i.url)},[i.url]),w=(0,K.useCallback)(()=>{navigator.clipboard.writeText(window.location.toString())},[]),j=(0,K.useCallback)(()=>{i.itemId&&x([i.itemId],eX)},[i.itemId,x]),C=(0,K.useCallback)(()=>{i.itemId&&b([i.itemId],eX)},[i.itemId,b]),I=[(0,F.jsxs)(fi.l.Item,{onSelect:v,children:[(0,F.jsx)(fi.l.LeadingVisual,{children:(0,F.jsx)(ly.LinkExternalIcon,{})}),il.openInNewTab]},"open-in-new-tab")].concat(i.itemId?[(0,F.jsxs)(fi.l.Item,{onSelect:w,children:[(0,F.jsx)(fi.l.LeadingVisual,{children:(0,F.jsx)(ly.ProjectSymlinkIcon,{})}),il.copyLinkInProject]},"copy-link-in-project")]:[],i.itemId&&s?[(0,F.jsxs)(fi.l.Item,{onSelect:j,children:[(0,F.jsx)(fi.l.LeadingVisual,{children:(0,F.jsx)(ly.ArchiveIcon,{})}),il.archiveInProject]},"archive-in-project"),(0,F.jsxs)(fi.l.Item,{variant:"danger",onSelect:C,children:[(0,F.jsx)(fi.l.LeadingVisual,{children:(0,F.jsx)(ly.TrashIcon,{})}),il.deleteFromProject]},"delete-from-project")]:[]),S=(0,K.useCallback)(()=>{c()},[c]),k=(0,K.useCallback)(async()=>{i.itemId&&oH(d,[i.itemId]),g({force:!0})},[g,i.itemId,d]),N=(0,K.useCallback)(()=>{g({force:!0}),c()},[g,c]),[T,_]=(0,K.useState)({}),[,A]=xE(),[,R]=xE();(0,K.useEffect)(()=>{A(Object.values(T).some(e=>e))},[T,A]);let{owner:P,repo:D,number:E}=i,M={withLiveUpdates:!0,commentBoxConfig:y,onLinkClick:h,selectedProjectId:a?.memexProject,allowedProjectOwner:r?.login,customEditMenuEntries:I,issueQueriesFetchingPolicy:{fetchPolicy:"store-and-network"},onIssueUpdate:S,timelineEventBaseUrl:`/${P}/${D}/issues`,onIssueDelete:k,onClose:N,showRepositoryPill:!0,navigateBack:N,navigate:eC.l,titleAs:"h2",innerSx:{pl:3,pr:3},additionalHeaderActions:(0,F.jsx)(vZ,{showCloseButton:!1}),onCommentEditStart(e){_(t=>t[e]?t:{...t,[e]:!0})},onCommentEditCancel(e){_(t=>t[e]?{...t,[e]:!1}:t)},onIssueEditStateChange:R,useViewportQueries:!1,onSubIssueClick:f,insideSidePanel:!0,singleKeyShortcutsEnabled:t?.use_single_key_shortcut??!1};return(0,F.jsx)(lx.A,{sx:{position:"relative",height:"100%"},children:(0,F.jsx)(lx.A,{sx:{m:0,height:"100%"},children:(0,F.jsx)(wo.e,{children:(0,F.jsx)(eI.s,{features:n,children:(0,F.jsx)(eb.y,{appName:"memex",category:"Memex Project",metadata:{},children:(0,F.jsx)(ws.cI,{itemIdentifier:{owner:P,repo:D,number:E,type:"Issue"},optionConfig:M})})})})})})}try{wN.displayName||(wN.displayName="SharedIssueViewer")}catch{}let wT=(0,K.forwardRef)(({issueType:e,...t},a)=>{let{bg:r,fg:n,border:i}=(0,ra.Wk)(e.color||"GRAY");return(0,F.jsx)(bk.A,{text:e.name,ref:a,sx:{backgroundColor:r,color:n,borderColor:i},...t,...(0,ey.G)("issue-type-token")})});wT.displayName="IssueTypeToken";let w_=(e="medium")=>"small"===e?10:"medium"===e?14:"large"===e?16:24,wA=(0,K.forwardRef)(({avatars:e,...t},a)=>(0,F.jsx)(bk.A,{leadingVisual:()=>(0,F.jsx)(xn,{backgroundSx:{backgroundColor:"canvas.default",boxShadow:e=>`0 0 0 2px ${e.colors.canvas.default} !important`},items:e,size:w_(t.size)-1,maxVisible:3}),ref:a,...t}));wA.displayName="AvatarsToken";let wR=(0,K.forwardRef)(({linkedPullRequest:e,sx:t,...a},r)=>(0,F.jsx)(bk.A,{ref:r,as:"a",href:e.url,target:"_blank",rel:"noreferrer","data-hovercard-url":`${e.url}/hovercard`,leadingVisual:()=>(0,F.jsx)(pq,{isDraft:e.isDraft,state:e.state,type:eJ.PullRequest,size:w_(a.size)}),sx:{"&, &:hover":{bg:"canvas.default"},...t},text:`#${e.number}`,...(0,ey.G)("linked-pr-token"),...a}));wR.displayName="LinkedPullRequestToken";let wP=(0,K.forwardRef)(({repository:e,withOwner:t,...a},r)=>(0,F.jsx)(bk.A,{leadingVisual:()=>(0,F.jsx)(hV,{repository:e,size:w_(a.size)}),text:t?e.nameWithOwner:e.name,ref:r,...a,...(0,ey.G)("repository-token")}));wP.displayName="RepositoryToken";var wD=a(91385);let wE=(e,t)=>{let a=(0,wD.fN)(e,t);return a===wD.ai&&t.toLocaleLowerCase()!==e.toLocaleLowerCase()&&(a=0),a};function wM(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}let ScoringCache=class ScoringCache{sortByWithCache(e,t){var a;let r=this.scoreCache.get(e)||0,n=this.scoreCache.get(t)||0,i=this.textCache.get(e)||"";return a=this.textCache.get(t)||"",r>n?-1:r<n?1:i<a?-1:i>a?1:0}getText(e){return this.textCache.get(e)}setText(e,t){null==this.scoreCache.get(e)&&this.textCache.set(e,t)}getScore(e){return this.scoreCache.get(e)}setScore(e,t){this.scoreCache.set(e,t)}constructor(){wM(this,"textCache",new WeakMap),wM(this,"scoreCache",new WeakMap)}};function wB(e,t,a,r,n,i=5){let l=t;if(e){for(let n of(l=[],t)){let t=a(n);r.setText(n,t);let i=wE(e,t);r.setScore(n,i),i>0&&l.push(n)}l.sort(n)}null!==i&&(l=l.slice(0,i));let s=new WeakMap;for(let t of l){let r=a(t);s.set(t,{chunks:function(e,t){let a=(0,wD.Xq)(e,t),r=-1,n=0,i=[];for(let e of a)e-1!==r&&(-1===r?i.push({startIndex:n,endIndex:e,highlight:!1}):(i.push({startIndex:n,endIndex:r+1,highlight:!0}),i.push({startIndex:r+1,endIndex:e,highlight:!1})),n=e),r=e;return r===t.length-1?i.push({startIndex:n,endIndex:t.length,highlight:!0}):-1===r?i.push({startIndex:n,endIndex:t.length,highlight:!1}):(i.push({startIndex:n,endIndex:r+1,highlight:!0}),i.push({startIndex:r+1,endIndex:t.length,highlight:!1})),i}(e,r)})}return{filteredItems:l,positionData:s}}let wL=new ScoringCache,wF=wL.sortByWithCache.bind(wL);function wO(e,t,a){return wB(e,t,e=>e.login+(e.name?` ${e.name}`:""),wL,wF,a)}var wG=a(84100);let wV={BEFORE:"before",AFTER:"after"},w$=(e,t)=>{let a=e?.rect?.current?.translated?.top,r=t?.rect.top;return"number"!=typeof a||"number"!=typeof r?null:a<=r?wV.BEFORE:wV.AFTER};function wW(e){let t=e.over?.rect;if(!t)return wV.BEFORE;if(e.activatorEvent instanceof KeyboardEvent)return e.active.rect.current?.translated?.top===t.top?wV.BEFORE:wV.AFTER;{let a=function(e){if(!(e.activatorEvent instanceof PointerEvent||e.activatorEvent instanceof MouseEvent))return null;let t=e.active.rect.current?.initial,a=e.active.rect.current?.translated;if(!t||!a)return null;let r={x:e.activatorEvent.clientX-t.left,y:e.activatorEvent.clientY-t.top};return{x:a.left+r.x,y:a.top+r.y}}(e);if(!a)return wV.BEFORE;let r=t.top+t.height/2;return a.y>r?wV.AFTER:wV.BEFORE}}let wz=()=>{let e=(0,U.jE)();return{setNewRowPosition:(0,K.useCallback)((t,a)=>(function(e,t,a){if(oN()){let r=oW(e,t),n=oX(e.getQueryData(og(e)))||[],i=n[r];if(!i)return{previousItemId:-1};let l="";if(a>0){let e=r<a?n[a]:n[a-1];e&&(l=e.id)}let s=[...n];return s.splice(r,1),s.splice(a,0,i),e.setQueryData(og(e),oR(s)),{previousItemId:l,previousMovingItemIndex:r}}{let r=oW(e,t),n=oV(e,t);if(!n)return{previousItemId:-1};let i="",l=0;return e.setQueriesData(oD,e=>{if(!oP(e))return e;let t=l;l+=e.nodes.length;let s=r>=t&&r<l,o=a>=t&&a<l;if(!s&&!o)return e;if(o&&a>0){let n=r<a?a-t:a-t-1,l=e.nodes[n];l&&(i=l.id)}let d=[...e.nodes];return s&&d.splice(d.indexOf(n),1),o&&d.splice(r<a?a-t-(s?0:1):a-t,0,n),{...e,nodes:d}}),{previousItemId:i,previousMovingItemIndex:r}}})(e,t,a),[e]),setNewPositionForMWL:(0,K.useCallback)((t,a)=>(function(e,t,a){var r;let n;let i=o_(e),l={queryData:[],totalCounts:ow(e,i)},s=oA(e,t),o="overItemId"in a?oA(e,a.overItemId):(r={groupId:a.overGroupId,secondaryGroupId:a.overSecondaryGroupId},[...of(e),r,sd]);if(!o||!s)return;let d="";e.setQueryData(s,e=>{if(!oP(e))return e;l.queryData.push({queryKey:s,queryData:e});let a=e.nodes,r=a.findIndex(e=>e.id===t);n=a[r];let i=[...a];return i.splice(r,1),{...e,nodes:i}}),e.setQueryData(o,t=>{if(!n)return t;if(!t&&"overGroupId"in a){let t=oj(e,i),a=sz(o);if(oc(t)&&sQ(a)){let r=sZ(a);return oC(e,i,{...t,groupedItems:{...t.groupedItems,[r]:[sd]}}),o!==s&&l.queryData.push({queryKey:o,queryData:{nodes:[],pageInfo:{hasNextPage:!1,hasPreviousPage:!1}}}),{nodes:[n],pageInfo:{hasNextPage:!1,hasPreviousPage:!1}}}}if(!oP(t))return t;if(o!==s&&l.queryData.push({queryKey:o,queryData:t}),"overGroupId"in a)return{...t,nodes:[...t.nodes,n]};let{overItemId:r,side:u}=a,c=t.nodes,m=c.findIndex(e=>e.id===r),p="before"===u?m:m+1;if(p>0){let e=c[p-1];e&&(d=e.id)}else d="";let h=[...c];return h.splice(p,0,n),{...t,nodes:h}});let u=sz(s),c="overItemId"in a?sz(o):{groupId:a.overGroupId,secondaryGroupId:a.overSecondaryGroupId};if(sQ(u)&&sQ(c)){let t={groups:{}};if(u.groupId!==c.groupId){let a=u.groupId,r=c.groupId;t.groups[a]=ov(e,i,a,-1),t.groups[r]=ov(e,i,r,1)}if(u.secondaryGroupId!==c.secondaryGroupId&&null!=u.secondaryGroupId&&null!=c.secondaryGroupId){let a=u.secondaryGroupId,r=c.secondaryGroupId;t.groups[a]=ov(e,i,a,-1),t.groups[r]=ov(e,i,r,1)}ox(e,i,t)}return"overItemId"in a?{previousItemId:d,rollbackData:l}:{previousItemId:void 0,rollbackData:l}})(e,t,a),[e])}};function wH(){let{updateColumnValueAndPriority:e}=uh(),t=(0,wG.U)(e,!0),{addToast:a}=lV(),{findMemexItem:r}=ub(),n=(0,wG.U)(r,!0),i=wg();return{updateItem:(0,K.useCallback)(async(e,r,l=nU.updateItem,s)=>{if(!e)return Promise.resolve();if(void 0!==s)try{wQ([e],r,s)}catch(e){if(e instanceof UpdateValidationError){a({message:e.message,type:"warning"});return}throw e}let o=or(r,e),d=e.memexProjectColumnValues.map(e=>e.memexProjectColumnId);await t(e,{columnValues:[r]},{fieldIds:d}),i?.registerAction({description:l,revert:async()=>{let a=n(e.id);"object"==typeof a&&await t(a,{columnValues:[o]},{})}})},[t,n,a,i])}}function wU(e,t,a,r){let n=e.findIndex(e=>e.id===t);if(n<0)return -1;let i=e.findIndex(e=>e.id===a);return i<0?-1:i>n?r===wV.BEFORE?i-1:i:r===wV.BEFORE?i:i+1}function wq(){let{memex_table_without_limits:e}=iz(),{postStats:t}=iN(),{setNewRowPosition:a,setNewPositionForMWL:r}=wz(),{findMemexItem:n}=ub(),{updateColumnValueAndPriority:i}=uh(),l=(0,U.jE)(),s=wg(),o=(0,K.useCallback)(async(n,{reorderData:s,updateColumnActions:o},{visibleItems:d,layoutType:u}={})=>{let c,m,p,h;if(s){if(e){let e=r(n.id,s);p=e?.previousItemId,h=e?.rollbackData}else if("overItemId"in s){c=wU(oF(l),n.id,s.overItemId,s.side);let e=a(n.id,c);p=e.previousItemId,m=e.previousMovingItemIndex}}let f=function(e,t){if(e?.length||null!=t)return{columnValues:e,previousMemexProjectItemId:t}}(o,p);if(f){try{await i(n,f,{layoutType:u})}catch(e){throw void 0!==m&&m>=0?a(n.id,m):h&&oU(l,h),e}return s&&"overItemId"in s&&d&&(c=wU(d,n.id,s.overItemId,s.side)),t({name:"item_order",context:`position: ${c}`,memexProjectItemId:n.id}),{newIndexForRow:c,prevIndexForRow:m}}},[e,t,l,r,a,i]),d=(0,wG.U)(o,!0),u=(0,wG.U)(n,!0),c=(0,K.useCallback)(e=>{let t=oF(l),a=t.findIndex(t=>t.id===e.id),r=t[a-1];if(r)return{overItemId:r.id,side:wV.AFTER};let n=t[0];if(n)return{overItemId:n.id,side:wV.BEFORE}},[l]);return{updateAndReorderItem:(0,K.useCallback)(async(e,t,a={})=>{let r=n(e);if(!r)return;let i=t.updateColumnActions?.map(e=>or(e,r)),l=c(r),m=async()=>{let t=u(e);t&&t!==wG.g&&(i||l)&&await d(t,{updateColumnActions:i,reorderData:l},{})},p=await o(r,t,a);return s?.registerAction({description:nU.moveItem,revert:m}),p},[n,c,o,s,u,d])}}function wK(e,t){return e?.length&&t?{reorderData:t,updateColumnActions:e}:e?.length?{updateColumnActions:e}:t?{reorderData:t}:void 0}let UpdateValidationError=class UpdateValidationError extends Error{constructor(...e){super(...e),this.name="UpdateValidationError"}};function wQ(e,t,a){switch(t.dataType){case eN.Assignees:for(let t of e)if((t.contentType===eJ.Issue||t.contentType===eJ.PullRequest)&&a!==t.contentRepositoryId)throw new UpdateValidationError(nH.unableToPasteAssigneesBetweensRepos);break;case eN.Milestone:for(let t of e){if(t.contentType===eJ.DraftIssue)throw new UpdateValidationError(nH.unableToPasteMilestonesOnDraftIssue);if(a!==t.contentRepositoryId)throw new UpdateValidationError(nH.unableToPasteMilestonesBetweensRepos)}break;case eN.IssueType:for(let t of e){if(t.contentType===eJ.DraftIssue)throw new UpdateValidationError(nH.unableToPasteIssueTypesOnDraftIssue);if(t.contentType===eJ.PullRequest)throw new UpdateValidationError(nH.unableToPasteIssueTypesOnPullRequest)}break;case eN.ParentIssue:for(let t of e){if(t.contentType===eJ.DraftIssue)throw new UpdateValidationError(nH.unableToPasteParentIssueOnDraftIssue);if(t.contentType===eJ.PullRequest)throw new UpdateValidationError(nH.unableToPasteParentIssueOnPullRequest)}break;case eN.Labels:for(let t of e){if(t.contentType===eJ.DraftIssue)throw new UpdateValidationError(nH.unableToPasteLabelsOnDraftIssue);if(a!==t.contentRepositoryId)throw new UpdateValidationError(nH.unableToPasteLabelsBetweensRepos)}}}let wJ={GitHubAvatar:"use-assignees-editor-module__GitHubAvatar--h1AYh"},wX=e=>e.login,wY=(e,t)=>{let a=t.find(t=>t.id===e.id);return{...e,leadingVisual:()=>(0,F.jsx)(h3.r,{alt:e.login,src:e.avatarUrl,className:wJ.GitHubAvatar}),text:e.login,description:e.name??void 0,descriptionVariant:"inline",groupId:a?"assigned":"suggestions",...(0,ey.G)("table-cell-editor-row")}};var wZ=a(46008);let w0={SanitizedHtml:"text-cell-module__SanitizedHtml--t3zAN"},w1=(0,K.forwardRef)(({children:e,dangerousHtml:t,sx:a,className:r,...n},i)=>t?(0,F.jsx)(p$,{...n,ref:i,sx:a,className:(0,vB.$)(r,w0.SanitizedHtml),children:t}):(0,F.jsx)(lv.A,{...n,ref:i,sx:a,className:(0,vB.$)(r,w0.SanitizedHtml),children:e}));w1.displayName="TextCell";let w2={AvatarStack:"user-group-module__AvatarStack--MXFQo",Box:"user-group-module__Box--l0Oje",GitHubAvatar:"user-group-module__GitHubAvatar--Q4zMD",TextCell:"user-group-module__TextCell--C0ZiI",TextCell_1:"user-group-module__TextCell_1--RB8xB"};function w5(e){return{...e.reviewer,hovercardUrl:"User"===e.reviewer.type?`/hovercards?user_id=${e.reviewer.id}`:`${e.reviewer.url}/hovercard`}}function w3(e){return{...e,name:e.login}}let w4=({user:e,isDisabled:t})=>(0,F.jsxs)("div",{className:w2.Box,children:[(0,F.jsx)(h3.r,{loading:"lazy",alt:e.name,src:e.avatarUrl,"data-hovercard-url":e.hovercardUrl,className:w2.GitHubAvatar}),(0,F.jsx)(w1,{isDisabled:t,className:w2.TextCell,children:e.name})]}),w6=({users:e,isDisabled:t})=>e?e.length>1?(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(wZ.A,{className:w2.AvatarStack,children:e.map(e=>(0,F.jsx)(h3.r,{loading:"lazy",alt:e.name,src:e.avatarUrl,"data-hovercard-url":e.hovercardUrl},e.id))}),(0,F.jsx)(w1,{isDisabled:t,className:w2.TextCell_1,children:nO(e.map(e=>e.name))})]}):(0,F.jsx)(F.Fragment,{children:e.map(e=>(0,F.jsx)(w4,{user:e,isDisabled:t},e.id))}):null;try{w4.displayName||(w4.displayName="AvatarWithLogin")}catch{}try{w6.displayName||(w6.displayName="UserGroup")}catch{}let w8=({children:e,listRef:t})=>(0,F.jsx)("dl",{ref:t,children:e}),w7=({label:e,children:t,...a})=>(0,F.jsxs)(lx.A,{as:"div",sx:{px:2,py:1,display:"flex",gap:1,flexDirection:"row",flexWrap:"wrap"},...a,children:[(0,F.jsx)(w9,{children:e}),(0,F.jsx)(lx.A,{as:"dd",sx:{flexBasis:"65%",flexGrow:1,overflow:"hidden",minWidth:"200px"},children:t})]}),w9=({children:e})=>(0,F.jsx)(lv.A,{as:"dt",sx:{px:2,pt:"6px",flexBasis:"33%",flexGrow:1,flexShrink:0,fontSize:0,fontWeight:"bold",color:"fg.muted"},children:e}),je=(0,K.forwardRef)(({interactable:e=!1,children:t,sx:a,...r},n)=>{let i=e?{cursor:"pointer",backgroundColor:"canvas.subtle"}:{};return(0,F.jsx)(lx.A,{...r,sx:{px:2,py:1,background:"transparent",border:"none",borderRadius:1,":hover":i,":focus":i,width:"100%",textAlign:"left",...a},ref:n,...(0,ey.G)("field-value"),children:t})});je.displayName="FieldValue";try{w7.displayName||(w7.displayName="Field")}catch{}try{w9.displayName||(w9.displayName="FieldLabel")}catch{}let jt=({model:e,columnModel:t,content:a,onSaved:r,onKeyDown:n,renderer:i,editor:l})=>{let{hasWritePermissions:s}=eK();return s?(0,F.jsx)(l,{model:e,columnModel:t,content:a,onSaved:r,onKeyDown:n}):(0,F.jsx)(je,{children:(0,F.jsx)(i,{model:e,columnModel:t,content:a})})};try{jt.displayName||(jt.displayName="SidebarField")}catch{}let ja={position:"relative",p:"32px",textAlign:"center"},jr={mx:1,mb:2,color:"fg.muted"},jn={color:"fg.muted",mt:2};function ji(e){let t,a;switch(e.error.name){case"RepoArchived":a=nH.repoArchivedErrorMessage,t=(0,F.jsx)(ly.ArchiveIcon,{size:26});break;case"Forbidden":a=nH.forbiddenErrorMessage,t=(0,F.jsx)(ly.LockIcon,{size:26});break;case"IssueTypesDisabledForRepo":case"IssueTypesDisabledForRepoOwner":a=e.error.message,t=(0,F.jsx)(ly.AlertIcon,{size:26});break;default:a=nH.genericErrorMessage,t=(0,F.jsx)(ly.AlertIcon,{size:26})}return(0,F.jsxs)(lx.A,{sx:ja,children:[(0,F.jsx)(lx.A,{sx:jr,children:t}),(0,F.jsx)(lv.A,{as:"p",sx:jn,children:a})]})}try{ji.displayName||(ji.displayName="SelectMenuError")}catch{}let jl=(e,t,a)=>{let r;let n=u$();if(a)return{suggestions:a,error:void 0};let i=e.getSuggestionsCacheKey();switch(t){case eT.Assignees:r=n.getSuggestedAssigneesForItem(i);break;case eT.Labels:r=n.getSuggestedLabelsForItem(i);break;case eT.Milestone:r=n.getSuggestedMilestonesForItem(i);break;case eT.IssueType:r=n.getSuggestedIssueTypesForItem(i)}return r instanceof Error?{suggestions:void 0,error:r}:{suggestions:r,error:void 0}},js=({fetchSuggestions:e,memexItemModel:t,columnId:a,filterSuggestions:r,maxSuggestions:n,options:i,initialFilterValue:l=""})=>{let[s,o]=(0,K.useState)(l),{suggestions:d,error:u}=jl(t,a,i),c=(0,K.useMemo)(()=>d?r(s,d,n).filteredItems:void 0,[r,s,d,n]);return{onOpen:()=>{(t.contentType!==eJ.DraftIssue||oi(a))&&e&&e()},setFilterValue:o,filterValue:s,suggestions:d,filteredSuggestions:c,error:u}},jo={Text:"use-select-panel-module__Text--qPfpN"},jd={leadingVisual:ly.CircleSlashIcon,text:"No matches",disabled:!0,selected:void 0,key:"no-matches",...(0,ey.G)("table-cell-editor-empty-row")},ju={leadingVisual:void 0,text:"Nothing to show",disabled:!0,selected:void 0,key:"blankslate",...(0,ey.G)("table-cell-editor-blankslate-row")};function jc({model:e,selected:t,initialFilterValue:a,blankslateText:r,saveSelected:n,onOpenChange:i,open:l,fetchOptions:s,options:o,filterOptions:d,getOptionMatchingFilterValue:u,columnId:c,getSortAttribute:m,convertOptionToItem:p,renderCreateNewOption:h,singleSelect:f=!1,groupMetadata:g,placeholderText:y,renderAnchor:x}){let{projectLimits:b}=eU(),{postStats:v}=iN(),[w,j]=(0,xX.N)(t),C=ap(c);(0,ee.A)(C,"systemColumnId must be defined");let{onOpen:I,setFilterValue:S,filterValue:k,suggestions:N,filteredSuggestions:T,error:_}=js({initialFilterValue:a,memexItemModel:e,columnId:C,fetchSuggestions:s,filterSuggestions:d,maxSuggestions:f?b.singleSelectColumnOptionsLimit:12,options:o}),A=(0,nk.M)(I);(0,K.useEffect)(()=>{A.current()},[e,A]);let R=(0,K.useCallback)(t=>{n(t),v({name:w.length>0?ts:to,memexProjectColumnId:ap(c),memexProjectItemId:e.itemId()})},[c,e,v,n,w.length]),P=(0,bZ.A)();(0,K.useEffect)(()=>()=>{void 0!==l||f||P()||R(w)},[l,P,w,f,R]);let D=(0,K.useRef)(l);(0,K.useEffect)(()=>{!D.current||l||f||R(w),D.current=l},[l,w,f,R]);let E=(0,K.useCallback)(e=>{let t=(Array.isArray(e)?e:[e].filter(e=>e)).sort((e,t)=>m(e).localeCompare(m(t)));j(t),f&&R(t)},[j,f,m,R]),M=(0,K.useMemo)(()=>new WeakMap,[p]),B=(0,K.useMemo)(()=>new Set(w.map(e=>e.id)),[w]),L=(0,K.useCallback)(e=>{let t=M.get(e);return t||(t=p(e,w),M.set(e,t)),t},[M,p,w]),O=(0,K.useMemo)(()=>(T??[]).map(L),[T,L]),G=(0,K.useMemo)(()=>f?(T||N||[]).filter(e=>B.has(e.id)).map(L)[0]:(N??[]).filter(e=>B.has(e.id)).map(L),[T,N,L,f,B]),V=k&&T&&u&&!T.some(e=>u(k,e)),$=(0,K.useMemo)(()=>({...ju,text:r??ju.text}),[r]),W=[...O.map(e=>(f&&(e.children&&(e.children=(0,F.jsx)("span",{className:jo.Text,children:e.children})),e.onAction=(t,a)=>{a.preventDefault(),E(G===e?void 0:e),i(!1,"selection",a)}),e)),...k||O.length||!r?[]:[$],...!k||O.length||h?[]:[jd],...V&&h?[h(k)]:[]],z=(0,K.useCallback)(()=>_?(0,F.jsx)(ji,{error:_}):(0,F.jsx)(F.Fragment,{}),[_]),H={open:l??!0,showItemDividers:!0,onSelectedChange:E,selected:G,filterValue:k,onFilterChange:S,onOpenChange:i,items:W,loading:!T&&!_,placeholderText:y,renderAnchor:x};return(g&&(H.groupMetadata=g.filter(e=>W.some(t=>"groupId"in t&&t.groupId===e.groupId))),_)?(H.renderItem=z,H.textInputProps={disabled:!0},H.items=[{}],{...H,...(0,ey.G)("table-cell-editor-error")}):H}function jm({displayValue:e,saveSelected:t,selected:a,...r}){let[n,i]=(0,K.useState)(!1),l=(0,K.useCallback)(e=>i(e),[]),[s,o]=(0,K.useState)(!1),d=(0,K.useRef)(!0),u=(0,bZ.A)(),{perform:c}=uN({request:async e=>{o(!0),d.current=!1,await t(e),d.current=!0,o(!1)},rollback:()=>{d.current=!0,u()&&o(!1)}});(0,K.useEffect)(()=>{d.current&&o(!1)},[a]);let m=jc({...r,open:n,onOpenChange:l,selected:a,renderAnchor:t=>(0,F.jsx)(je,{interactable:!0,as:"button",...t,children:s?(0,F.jsx)(pj.A,{size:"small"}):e}),saveSelected:c});return(0,F.jsx)(hO.X,{...m,overlayProps:{width:"small",height:"auto",maxHeight:"large",...m.overlayProps}})}jm.displayName="SidebarSelectPanelFunc";let jp=(0,K.memo)(jm);try{jp.displayName||(jp.displayName="SidebarSelectPanel")}catch{}let jh=({columnName:e,columnType:t,...a})=>"dangerousHtml"in a&&a.dangerousHtml?(0,F.jsx)(p$,{...uT(a,["dangerousHtml"]),children:a.dangerousHtml}):"text"in a&&a.text?(0,F.jsx)(lv.A,{...uT(a,["text"]),children:a.text}):(0,F.jsx)(jf,{columnName:e,columnType:t,...a}),jf=({columnName:e,columnType:t,sx:a,...r})=>{let n;let{hasWritePermissions:i}=eK();if(!i)return(0,F.jsx)(lv.A,{sx:{color:"fg.subtle",...a},...r,children:nH.noPermissionEmptyColumnValue(e)});switch(t){case eN.Number:n=nH.emptyColumnNameValue.number;break;case eN.Date:n=nH.emptyColumnNameValue.date;break;case eN.Text:n=nH.emptyColumnNameValue.text;break;case eN.SingleSelect:n=nH.emptyColumnNameValue.singleSelect;break;case eN.Iteration:n=nH.emptyColumnNameValue.iteration;break;default:n=nH.addColumnNameValue(e)}return(0,F.jsxs)("div",{children:[(0,F.jsx)(lv.A,{sx:{color:"fg.subtle",...a},...r,children:n}),(t===eN.Iteration||t===eN.SingleSelect)&&(0,F.jsx)(lw.A,{icon:ly.TriangleDownIcon,size:"small",sx:{verticalAlign:"middle",color:"fg.muted",opacity:.3,".is-focused &":{opacity:1},ml:2}})]})};try{jh.displayName||(jh.displayName="TextValueWithFallback")}catch{}try{jf.displayName||(jf.displayName="FallbackText")}catch{}let jg=()=>{let{setColumnValue:e}=up(),{findMemexItem:t}=ub();return{updateLocalMemexItem:(0,K.useCallback)((a,r)=>{let n=t(a);n&&e(n,r,!0)},[t,e])}},jy=e=>(0,F.jsx)(jt,{...e,renderer:jb,editor:jx}),jx=({model:e,columnModel:t,content:a,onSaved:r})=>{let{editIssueAssignees:n}=xO(),{fetchSuggestedAssignees:i}=uG(),{updateLocalMemexItem:l}=jg(),s=(0,K.useMemo)(()=>a?.map(e=>({selected:!0,...e}))??[],[a]);return(0,F.jsx)(jp,{model:e,columnId:t.id.toString(),getSortAttribute:wX,convertOptionToItem:wY,initialFilterValue:"",selected:s,saveSelected:async t=>{await n(t.map(e=>e.id)),e.memexItemId?.()&&l(e.memexItemId?.(),{memexProjectColumnId:eT.Assignees,value:t}),r()},fetchOptions:()=>i(e),filterOptions:wO,placeholderText:"Search people",displayValue:(0,F.jsx)(jb,{model:e,columnModel:t,content:a}),groupMetadata:[{groupId:"assigned"},{groupId:"suggestions",header:{title:"Suggestions",variant:"filled"}}]})},jb=({columnModel:e,content:t})=>t?.length?(0,F.jsx)(lx.A,{sx:{display:"flex"},children:(0,F.jsx)(w6,{users:t.map(w3),isDisabled:!0})}):(0,F.jsx)(jh,{columnName:e.name});try{jy.displayName||(jy.displayName="AssigneeField")}catch{}try{jx.displayName||(jx.displayName="AssigneeEditor")}catch{}try{jb.displayName||(jb.displayName="AssigneeRenderer")}catch{}let jv=e=>(0,F.jsx)(jt,{...e,renderer:jC,editor:jj}),jw=e=>e?{value:new Date((0,bb.x)(e,{representation:"date"}))}:void 0,jj=({model:e,columnModel:t,content:a,onSaved:r})=>{let{updateItem:n}=wH(),{postStats:i}=iN(),l=(0,K.useCallback)(async a=>{if(o1(t)){let l=e.getCustomField(t.id);await n(e,{dataType:eN.Date,memexProjectColumnId:t.id,value:jw(a)}),i({name:l?.value?ts:to,memexProjectColumnId:t.id,memexProjectItemId:e.id}),r()}},[t,e,r,i,n]),s=(0,K.useMemo)(()=>a?.value?new Date(a.value.slice(0,16)):null,[a]);return(0,F.jsx)(by.DatePicker,{onChange:l,value:s,showClearButton:!0,showTodayButton:!1,anchor:r=>(0,F.jsx)(je,{interactable:!0,as:"button",...r,children:(0,F.jsx)(jC,{content:a,columnModel:t,model:e})})})},jC=({content:e,columnModel:t})=>{let a=aj(e)||"";return(0,F.jsx)(jh,{text:a,columnName:t.name,columnType:t.dataType})};try{jv.displayName||(jv.displayName="DateField")}catch{}try{jj.displayName||(jj.displayName="DateEditor")}catch{}try{jC.displayName||(jC.displayName="DateRenderer")}catch{}let jI={borderColor:"border.default",pt:"1px",color:"fg.muted"},jS={...jI,borderColor:"accent.emphasis",color:"accent.fg"},jk={...jI,color:"fg.subtle"};function jN({sx:e}){return(0,F.jsx)(bD.A,{sx:{...jS,...e},children:nH.iterationLabel.current})}function jT({labelType:e,sx:t}){let a=nH.iterationLabel[e];return(0,F.jsx)(lx.A,{sx:{mr:3,width:"5.5rem",display:"flex",flexDirection:"column",alignItems:"flex-start",gap:1,...t??{}},children:(0,F.jsx)(bD.A,{sx:{mt:.75,textDecoration:"inherit",..."current"===e?jS:"break"===e?jk:jI},as:"span",children:a})})}try{jN.displayName||(jN.displayName="CurrentIterationLabel")}catch{}try{jT.displayName||(jT.displayName="IterationRowLabel")}catch{}let j_=new ScoringCache,jA=j_.sortByWithCache.bind(j_),jR={SanitizedHtml:"use-iteration-editor-module__SanitizedHtml--Frm4L"},jP=e=>{let t=(0,F.jsx)(p$,{className:jR.SanitizedHtml,children:e.titleHtml});return{...e,children:t,...(0,ey.G)("table-cell-editor-row")}},jD=e=>e.title,jE=(e,t)=>t.title.toLowerCase()!==e.toLowerCase()?null:t;function jM({model:e,iteration:t,columnModel:a,onSaved:r}){let{updateItem:n}=wH(),i=c$(),{settings:l}=a,s=t?.id,o=(0,K.useMemo)(()=>{let e=l.configuration.iterations;if(e.length>0){let t=new Date;return e.map(e=>{let a=aU(e),r=aG(t,e);return{...e,title:e.title,titleHtml:e.titleHtml,description:a,descriptionVariant:"block",selected:s===e.id,groupId:"active",trailingIcon:r?jN:null}})}return[{id:"create-iteration",title:"Create an Iteration",titleHtml:"Create an iteration",startDate:"",duration:0,selected:!1,groupId:"active"}]},[l,s]),d=(0,K.useMemo)(()=>{let e=l.configuration.completedIterations;return e.length>0?e.map(e=>{let t=aU(e);return{...e,title:e.titleHtml,description:t,descriptionVariant:"block",selected:s===e.id,groupId:"completed"}}):[]},[l,s]),u=(0,K.useMemo)(()=>[...o,...d].filter(e=>e.selected),[o,d]),c=mK(),m=(0,K.useCallback)(async t=>{t[0]?.id==="create-iteration"?i({pathname:lr.generatePath({...c,fieldId:a.id})}):(await n(e,{memexProjectColumnId:a.id,dataType:eN.Iteration,value:{id:t[0]?.id??null}}),r&&r())},[i,a.id,n,e,r,c]),p=(0,K.useCallback)((e,t,a)=>{let r=e.length>0?[...o,...d]:t;return wB(e,r,e=>`${e.title} ${aU(e)}`,j_,jA,a)},[o,d]);return{activeOptions:o,completedOptions:d,selected:u,saveSelected:m,filterChange:p}}let jB=(0,K.forwardRef)(({iteration:e,...t},a)=>(0,F.jsx)(bk.A,{leadingVisual:()=>(0,F.jsx)(ly.IterationsIcon,{size:w_(t.size)}),text:(0,F.jsx)(p$,{children:e.titleHtml}),ref:a,...t}));jB.displayName="IterationToken";let jL=e=>(0,F.jsx)(jt,{...e,renderer:jO,editor:jF}),jF=({model:e,columnModel:t,content:a,onSaved:r})=>{let{activeOptions:n,completedOptions:i,saveSelected:l,filterChange:s,selected:o}=jM({model:e,iteration:a??null,columnModel:t,onSaved:r});return(0,F.jsx)(jp,{model:e,columnId:t.id.toString(),getSortAttribute:jD,convertOptionToItem:jP,initialFilterValue:"",selected:o,options:[...n,...i.slice(0,3)],saveSelected:l,fetchOptions:eC.l,filterOptions:s,placeholderText:"Filter options",displayValue:(0,F.jsx)(jO,{model:e,columnModel:t,content:a}),getOptionMatchingFilterValue:jE,singleSelect:!0,groupMetadata:[{groupId:"active"},{groupId:"completed",header:{title:"Completed",variant:"filled"}}]})},jO=({content:e})=>(function(e){return e?(0,F.jsx)(jB,{iteration:e}):(0,F.jsx)(jh,{columnName:"Iteration",columnType:eN.Iteration})})(e);try{jL.displayName||(jL.displayName="IterationField")}catch{}try{jF.displayName||(jF.displayName="IterationEditor")}catch{}try{jO.displayName||(jO.displayName="IterationRenderer")}catch{}let jG=new ScoringCache,jV=jG.sortByWithCache.bind(jG);function j$(e,t,a){return wB(e,t,e=>e.nameHtml,jG,jV,a)}let jW={SanitizedHtml:"use-labels-editor-module__SanitizedHtml--a8JK_",Box:"use-labels-editor-module__Box--EEJqt"},jz=e=>e.nameHtml,jH=e=>{let t=(0,F.jsx)(p$,{className:jW.SanitizedHtml,children:e.nameHtml}),a=`#${e.color}`;return{...e,leadingVisual:()=>(0,F.jsx)(lx.A,{sx:{bg:a,borderColor:a},className:jW.Box}),children:t,...(0,ey.G)("table-cell-editor-row")}};var jU=a(28115);let jq=(0,K.forwardRef)(({label:e,...t},a)=>(0,F.jsx)(jU.A,{text:(0,F.jsx)(p$,{children:e.nameHtml}),fillColor:`#${e.color}`,ref:a,...t}));jq.displayName="LabelToken";let jK=({color:e})=>(0,F.jsx)(lx.A,{sx:{width:16,height:16,borderRadius:8,flexShrink:0,bg:`#${e}`,borderColor:`#${e}`}});try{jK.displayName||(jK.displayName="LabelDecorator")}catch{}let jQ=e=>(0,F.jsx)(jt,{...e,renderer:jX,editor:jJ}),jJ=({model:e,columnModel:t,content:a,onSaved:r})=>{let{editIssueLabels:n}=xO(),{fetchSuggestedLabels:i}=uW(),{updateLocalMemexItem:l}=jg(),s=(0,K.useMemo)(()=>a?.map(e=>({...e,selected:!0}))??[],[a]);return(0,F.jsx)(jp,{model:e,columnId:t.id.toString(),getSortAttribute:jz,convertOptionToItem:jH,initialFilterValue:"",selected:s,saveSelected:async t=>{await n(t.map(e=>e.id)),e.memexItemId?.()&&l(e.memexItemId?.(),{memexProjectColumnId:eT.Labels,value:t}),r()},fetchOptions:()=>i(e),filterOptions:j$,placeholderText:"Search labels",displayValue:(0,F.jsx)(jX,{model:e,columnModel:t,content:a})})},jX=({columnModel:e,content:t})=>t?.length?(0,F.jsx)(lx.A,{as:"ul",sx:{display:"flex",gap:1,flexWrap:"wrap",listStyle:"none"},children:t?.map(e=>F.jsx("li",{children:F.jsx(jq,{label:e})},e.id))}):(0,F.jsx)(jh,{columnName:e.name});try{jQ.displayName||(jQ.displayName="LabelField")}catch{}try{jJ.displayName||(jJ.displayName="LabelEditor")}catch{}try{jX.displayName||(jX.displayName="LabelRenderer")}catch{}let jY=new ScoringCache,jZ=jY.sortByWithCache.bind(jY);function j0(e,t,a){return wB(e,t,e=>e.title,jY,jZ,a)}let j1={Octicon:"use-milestone-editor-module__Octicon--A9iv9"},j2=e=>e.title,j5=e=>{let t=e.state===eD.Open;return{...e,leadingVisual:()=>(0,F.jsx)(lw.A,{icon:ly.MilestoneIcon,"aria-label":t?"Open milestone":"Closed milestone",className:j1.Octicon}),text:e.title,description:function(e){if(e.state===eD.Closed)return nQ.closed;if(!e.dueDate)return nQ.noDueDate;let t=new Date(`${e.dueDate}T23:59:59`);return t<new Date?nQ.pastDueBy(new Date(`${e.dueDate}T00:00:00`)):nQ.dueOn(t)}(e),descriptionVariant:"block",groupId:t?"open":"closed",...(0,ey.G)("table-cell-editor-row")}},j3=(0,K.forwardRef)(({milestone:e,...t},a)=>(0,F.jsx)(bk.A,{leadingVisual:()=>(0,F.jsx)(ly.MilestoneIcon,{size:w_(t.size)}),text:e.title,ref:a,...(0,ey.G)("milestone-token"),...t}));j3.displayName="MilestoneToken";let j4=e=>(0,F.jsx)(jt,{...e,renderer:j8,editor:j6}),j6=({model:e,columnModel:t,content:a,onSaved:r})=>{let{editIssueMilestone:n}=xO(),{fetchSuggestedMilestones:i}=uH(),{updateLocalMemexItem:l}=jg(),s=(0,K.useMemo)(()=>a?[{selected:!0,...a}]:[],[a]);return(0,F.jsx)(jp,{model:e,columnId:t.id.toString(),getSortAttribute:j2,convertOptionToItem:j5,initialFilterValue:"",selected:s,saveSelected:async t=>{await n(t[0]?.id??"clear"),e.memexItemId?.()&&l(e.memexItemId(),{memexProjectColumnId:eT.Milestone,value:t[0]}),r()},fetchOptions:()=>i(e),filterOptions:j0,placeholderText:"Search milestones",blankslateText:"No milestones to show.",displayValue:(0,F.jsx)(j8,{model:e,columnModel:t,content:a}),singleSelect:!0,groupMetadata:[{groupId:"open",header:{title:"Open",variant:"filled"}},{groupId:"closed",header:{title:"Closed",variant:"filled"}}]})},j8=({content:e})=>e?(0,F.jsx)(j3,{milestone:e}):(0,F.jsx)(jh,{columnName:"Milestone"});try{j4.displayName||(j4.displayName="MilestoneField")}catch{}try{j6.displayName||(j6.displayName="MilestoneEditor")}catch{}try{j8.displayName||(j8.displayName="MilestoneRenderer")}catch{}var j7=a(19377);let j9=({submitValue:e,defaultValue:t,validationFn:a,type:r="text",withEmojiPicker:n=!1,placeholder:i,onKeyDown:l})=>{let s=(0,K.useRef)(null),[o,d]=(0,K.useState)(void 0),[u,c]=(0,K.useState)(t);(0,K.useEffect)(()=>{s.current&&s.current===document.activeElement||c(t)},[t]);let m=e=>{let t=a?.(e);return d(t),!t},p=t=>{m(t)&&e(t)},h=(0,K.useCallback)(()=>c(t),[t]),f=(0,F.jsx)(je,{interactable:!0,as:gx,ref:s,onBlur:()=>{u!==t&&m(u)?e(u):h()},onChange:e=>{let t=e.currentTarget.value;c(t),m(t)},onKeyDown:e=>{"Enter"===e.key?(e.preventDefault(),p(u)):"Escape"===e.key&&(e.preventDefault(),e.stopPropagation(),h()),l?.(e)},type:r,value:u,placeholder:i,"aria-label":"Edit value"});return(0,F.jsxs)(F.Fragment,{children:[n?(0,F.jsx)(br,{fullWidth:!0,children:f}):f,o?(0,F.jsx)(xQ.A,{sx:{position:"absolute",zIndex:100,fontSize:0,mt:"12px",py:1,px:2,bg:"danger.subtle",color:"fg.default",borderColor:"danger.muted"},caret:"top-left",children:(0,F.jsx)("span",{children:o})}):null]})};try{j9.displayName||(j9.displayName="SidebarTextInput")}catch{}let Ce=e=>(0,F.jsx)(jt,{...e,renderer:Ca,editor:Ct}),Ct=({model:e,columnModel:t,content:a,onSaved:r,onKeyDown:n})=>{let{updateItem:i}=wH(),l=(0,K.useCallback)(async a=>{t.dataType===eN.Number&&(await i(e,{dataType:eN.Number,memexProjectColumnId:t.id,value:""!==a?{value:ah(a)}:void 0}),r())},[t,e,r,i]);return(0,F.jsx)(j9,{submitValue:l,validationFn:j7.Ge,defaultValue:a?.value?.toString()||"",placeholder:nH.emptyColumnNameValue.number,onKeyDown:n})},Ca=({columnModel:e,content:t})=>(0,F.jsx)(jh,{text:t?.value.toString(),columnName:e.name,columnType:e.dataType});try{Ce.displayName||(Ce.displayName="NumberField")}catch{}try{Ct.displayName||(Ct.displayName="NumberEditor")}catch{}try{Ca.displayName||(Ca.displayName="NumberRenderer")}catch{}function Cr(e){return e.filter(e=>e.name.length>0)}let Cn={color:"GRAY",description:"",name:""},Ci=new ScoringCache,Cl=Ci.sortByWithCache.bind(Ci);function Cs(e,t,a){return wB(e,t,e=>e.name,Ci,Cl,a)}let Co=(e,t)=>t.name.toLowerCase()!==e.toLowerCase()?null:t,Cd={SanitizedHtml:"use-single-select-editor-module__SanitizedHtml--vLOfK",SanitizedHtml_1:"use-single-select-editor-module__SanitizedHtml_1--YeLKM",ColorDecorator:"use-single-select-editor-module__ColorDecorator--CmzlP"},Cu=e=>e.name,Cc=(e,t)=>({...e,...(0,ey.G)("table-cell-editor-row"),children:(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(p$,{className:Cd.SanitizedHtml,children:e.nameHtml}),(0,F.jsx)(p$,{className:Cd.SanitizedHtml_1,children:aR(e.descriptionHtml)})]}),description:"",leadingVisual:t?()=>(0,F.jsx)(h6,{color:e.color,className:Cd.ColorDecorator}):void 0,descriptionVariant:"block"});function Cm({model:e,columnModel:t,selectedValueId:a,onSaved:r}){let{updateItem:n}=wH(),i=(0,K.useCallback)(async a=>{await n(e,{memexProjectColumnId:t.id,dataType:eN.SingleSelect,value:{id:a[0]?.id??null}}),r?.()},[t.id,e,r,n]),l=(0,K.useMemo)(()=>t.settings.options.map(e=>({...e,selected:e.id===a})),[t.settings,a]),s=(0,K.useMemo)(()=>l.filter(e=>e.selected),[l]);return{saveSelected:i,options:l,selected:s}}async function Cp(e){let t=nP("memex-column-option-create-api-data"),{data:a}=await ix(t.url,{method:"POST",body:e});return a}async function Ch(e){let t=nP("memex-column-option-delete-api-data"),{data:a}=await ix(t.url,{method:"DELETE",body:e});return a}async function Cf(e){let t=nP("memex-column-update-api-data"),{data:a}=await ix(t.url,{method:"PUT",body:e});return a}async function Cg(e){let t=nP("memex-column-option-update-api-data"),{data:a}=await ix(t.url,{method:"PUT",body:e});return a}let Cy=()=>{let{updateLoadedColumns:e}=d_(),{findMemexItem:t}=ub(),{setColumnValue:a}=up(),r=(0,U.jE)();return{updateColumnValues:(0,K.useCallback)(r=>{if(e(r.id),r.memexProjectColumnValues)for(let e of r.memexProjectColumnValues){let n=t(e.memexProjectItemId);n&&a(n,{memexProjectColumnId:r.id,value:e.value})}},[t,a,e]),updateAllColumnValues:(0,K.useCallback)(t=>{e(t.id),function(e,t){if(oN()){let a={};if(t.memexProjectColumnValues)for(let e of t.memexProjectColumnValues)a[e.memexProjectItemId]={memexProjectColumnId:t.id,value:e.value};e.setQueryData(og(e),e=>{let r=[...oX(e)||[]];for(let e of r){let r=a[e.id];r?.value||(r={memexProjectColumnId:t.id,value:null}),e.addNewColumnValue(r)}return oR(r)})}else{let a={};if(t.memexProjectColumnValues)for(let e of t.memexProjectColumnValues)a[e.memexProjectItemId]={memexProjectColumnId:t.id,value:e.value};e.setQueriesData(oD,e=>{if(!oP(e))return e;let r=[...e.nodes];for(let e of r){let r=a[e.id];r?.value||(r={memexProjectColumnId:t.id,value:null}),e.setColumnValueForItemColumnType(r)}return{...e,nodes:r}})}}(r,t)},[r,e])}},Cx=()=>{let{updateColumnEntry:e}=yW(),{updateColumnValues:t}=Cy(),{memex_table_without_limits:a,memex_mwl_refresh_groups:r}=iz(),n=(0,U.jE)(),i=(0,K.useCallback)(async(a,r)=>{let n={...a.settings,options:Cr(r).map(({id:e,color:t,description:a,name:r})=>({id:rl(e)?"":e,color:t,description:a,name:r}))};l3();let{memexProjectColumn:i}=await Cf({memexProjectColumnId:a.id,settings:n});if(i?.settings){let{settings:t}=i;e(iH({...a,settings:t}))}i&&t(i)},[e,t]),l=(0,K.useCallback)((t,a)=>{let{options:r}=a.settings??{};if(r){let a={...t.settings,options:r};e(iH({...t,settings:a}))}},[e]),s=(0,K.useCallback)(async(e,t)=>{if(!t.name)return;let i=crypto.randomUUID(),s=[...e.settings.options,{id:i,...t,nameHtml:t.name,descriptionHtml:t.description}];l(e,{settings:{options:s}});try{let{memexProjectColumn:i}=await Cp({memexProjectColumnId:e.id,option:t});if(l(e,i),a&&r){let e=i.settings?.options;if(!e)return;let t=e[e.length-1];if(!t)return;dc(n,t,t.name)}}catch(t){throw l(e,{settings:{options:e.settings.options.filter(e=>e.id!==i)}}),t}},[r,a,n,l]),o=(0,K.useCallback)(async(e,t,r=!1)=>{if(void 0!==t.name&&""===t.name.trim())return;let i=e.settings.options.find(e=>e.id===t.id);if(!i)return;let s=e.settings.options.map(e=>e.id===t.id?{...e,...t,nameHtml:t.name??e.nameHtml,descriptionHtml:t.description??e.descriptionHtml}:e);if(a){let e={...i,...t,nameHtml:t.name??i.nameHtml,descriptionHtml:t.description??i.descriptionHtml};du(n,e,e.name)}if(l(e,{settings:{options:s}}),r)return;let o={id:t.id,color:t.color,description:t.description,name:t.name},{memexProjectColumn:d}=await Cg({memexProjectColumnId:e.id,option:o});l(e,d)},[a,n,l]);return{addColumnOption:s,moveColumnOption:(0,K.useCallback)(async(e,t)=>{let r=e.settings.options.findIndex(e=>e.id===t.id),i=e.settings.options[r];if(null!=t.position&&i&&e.settings.options){let s=[...e.settings.options];if(s.splice(r,1),s.splice(t.position-1,0,i),l(e,{settings:{options:s}}),a){let a=e.settings.options[t.position-1]?.id,r=t.position===e.settings.options.length;if(!a)return;!function(e,t,a,r){let n;let i=ds(e,t.id),l=ds(e,a);if(!i||!l)return;let{queryKeyForGroup:s,groupId:o}=i,{queryKeyForGroup:d,groupId:u}=l;e.setQueryData(s,e=>{if(!dm(e))return dp(e);let t=e?.groups.findIndex(e=>e.groupId===o);return t>-1&&(n=e.groups[t],e.groups.splice(t,1)),{...e}}),e.setQueryData(d,e=>{if(!dm(e))return dp(e);let t=e?.groups.findIndex(e=>e.groupId===u);return t>-1&&e.groups.splice(r?t+1:t,0,n),{...e}})}(n,i,a,r)}}let{memexProjectColumn:s}=await Cg({memexProjectColumnId:e.id,option:t});l(e,s)},[a,n,l]),updateOptions:i,updateColumnOption:o,destroyColumnOption:(0,K.useCallback)(async(e,t)=>{a&&function(e,t){let a=ds(e,t);if(!a)return;let{groupId:r,queryKeyForGroup:n}=a;e.setQueryData(n,e=>{if(!dm(e))return dp(e);let t=e.groups.filter(e=>e.groupId!==r);return{...e,groups:t}})}(n,t.id);let{memexProjectColumn:r}=await Ch({memexProjectColumnId:e.id,option:t});l(e,r)},[a,n,l])}};var Cb=a(47657),Cv=a(12800),Cw=a(27331);let Cj={display:"flex",flexDirection:"column",overflow:"hidden"},CC={display:"flex",flexDirection:"column",gap:3,overflowY:"auto"},CI=e=>{"Enter"===e.key&&rh(e)&&e.currentTarget.requestSubmit()},CS=({name:e,color:t,description:a})=>({name:e,color:t,description:a}),Ck=({initialOption:e,onSave:t,onCancel:a})=>{let[r,n]=(0,K.useState)(!1),[i,l]=(0,K.useReducer)((e,t)=>(n(!1),{...e,...t}),CS(e)),s=e=>{e.preventDefault(),t({...i,name:x0(i.name),description:x0(i.description)})},o=e=>{e.preventDefault(),n(!0)},d=(0,K.useRef)(null);return(0,bS.g)({containerRef:d,onClickOutside:e=>e.preventDefault()}),(0,F.jsx)(Cw.l,{title:e.name?"Edit option":"New option",onClose:a,width:"medium",ref:d,"aria-label":e.name?"Edit option dialog":"New option dialog",renderBody:()=>(0,F.jsxs)(lx.A,{as:"form",onSubmit:s,onInvalid:o,onKeyDown:CI,onBlur:e=>e.stopPropagation(),sx:Cj,children:[(0,F.jsxs)(Cw.l.Body,{sx:CC,children:[(0,F.jsx)(C_,{option:i}),(0,F.jsx)(CN,{value:i.name,onChange:e=>l({name:e}),showValidation:r}),(0,F.jsx)(Cb.s,{value:i.color,onChange:e=>l({color:e}),label:"Color"}),(0,F.jsx)(CT,{value:i.description,onChange:e=>l({description:e}),showValidation:r})]}),(0,F.jsxs)(Cw.l.Footer,{children:[(0,F.jsx)(p4.Q,{onClick:a,sx:{marginRight:1},children:"Cancel"}),(0,F.jsx)(p4.Q,{type:"submit",variant:"primary",...(0,ey.G)("save-single-select-option-button"),children:"Save"})]})]})})},CN=(0,K.forwardRef)(function({value:e,onChange:t,showValidation:a},r){let n=a&&""===e.trim();return(0,F.jsxs)(hM.A,{required:!0,children:[(0,F.jsx)(hM.A.Label,{children:"Label text"}),(0,F.jsx)(br,{fullWidth:!0,children:(0,F.jsx)(gp.A,{ref:r,value:e,onChange:e=>t(e.target.value),block:!0,name:"Label text",validationStatus:n?"error":void 0,"aria-invalid":n?"true":void 0,pattern:".*\\S+.*",...(0,ey.G)("single-select-option-text-input")})}),n&&(0,F.jsx)(hM.A.Validation,{variant:"error",children:"Label text is required"})]})}),CT=({value:e,onChange:t})=>{let a=eU().projectLimits.singleSelectDescriptionMaxLength,r=(0,K.useRef)(null),n=(0,Cv.S)({minHeightLines:0,maxHeightLines:12,elementRef:r,value:e});return(0,F.jsxs)(hM.A,{children:[(0,F.jsx)(hM.A.Label,{children:"Description"}),(0,F.jsx)(br,{fullWidth:!0,children:(0,F.jsx)(bt.Ay,{ref:r,value:e,onChange:e=>t(e.target.value),block:!0,name:"Description",maxLength:a,sx:{"& textarea":{...n,resize:"vertical"}}})}),(0,F.jsx)(hM.A.Caption,{children:"Visible in group headers and value pickers"})]})},C_=({option:e})=>(0,F.jsxs)(lx.A,{as:"figure",sx:{p:3,borderRadius:2,m:0,display:"flex",alignItems:"center",justifyContent:"center",bg:"canvas.subtle"},children:[(0,F.jsx)("figcaption",{className:"sr-only",children:"Preview"}),(0,F.jsx)(bN,{option:e})]});try{Ck.displayName||(Ck.displayName="SingleSelectOptionModal")}catch{}try{CN.displayName||(CN.displayName="NameInput")}catch{}try{CT.displayName||(CT.displayName="DescriptionInput")}catch{}try{C_.displayName||(C_.displayName="LabelPreview")}catch{}let CA=e=>(0,F.jsx)(jt,{...e,renderer:CP,editor:CR}),CR=({model:e,columnModel:t,content:a,onSaved:r})=>{let{saveSelected:n,options:i,selected:l}=Cm({columnModel:t,model:e,selectedValueId:a?a.id:null,onSaved:r}),{addColumnOption:s}=Cx(),{findColumn:o}=y$(),{navigationDispatch:d}=cN(),[u,c]=(0,K.useState)(null),{projectLimits:{singleSelectColumnOptionsLimit:m}}=eU(),p=i.every(e=>"GRAY"===e.color),h=(0,K.useCallback)(e=>Cc(e,!p),[p]),f=eq(i),g=(0,K.useCallback)(async e=>{c(null),await s(t,e);let a=o(t.id),r=o0(a)?a.settings.options.find(({name:t})=>t===e.name):void 0;r&&n([{...r,selected:!0}]),d(u2({focusType:u6.Focus}))},[s,t,o,n,d]),y=(0,K.useCallback)(e=>{let t=x0(e);return f?{...(0,ey.G)("table-cell-editor-max-options-length-row"),text:nH.singleSelectOptionLimitWarning(m),disabled:!0}:{description:"Create new option",descriptionVariant:"block",leadingVisual:ly.PlusIcon,children:(0,F.jsx)(lv.A,{sx:{color:"accent.emphasis",wordBreak:"break-all"},children:(0,F.jsx)("strong",{children:t})}),onAction:async(e,a)=>{a.preventDefault(),c({...Cn,name:t})},...(0,ey.G)("add-column-option")}},[f,m]);return u?(0,F.jsx)(Ck,{initialOption:u,onSave:g,onCancel:()=>c(null)}):(0,F.jsx)(jp,{model:e,columnId:t.id.toString(),getSortAttribute:Cu,convertOptionToItem:h,initialFilterValue:"",selected:l,saveSelected:n,fetchOptions:eC.l,options:i,filterOptions:Cs,placeholderText:"Filter options",displayValue:(0,F.jsx)(CP,{model:e,columnModel:t,content:a}),singleSelect:!0,renderCreateNewOption:y,getOptionMatchingFilterValue:Co})},CP=({columnModel:e,content:t})=>t?(0,F.jsx)(bN,{option:t}):(0,F.jsx)(jh,{columnName:e.name,columnType:e.dataType});try{CA.displayName||(CA.displayName="SingleSelectField")}catch{}try{CR.displayName||(CR.displayName="SingleSelectEditor")}catch{}try{CP.displayName||(CP.displayName="SingleSelectRenderer")}catch{}let CD=e=>(0,F.jsx)(jt,{...e,renderer:CM,editor:CE}),CE=({model:e,columnModel:t,content:a,onSaved:r,onKeyDown:n})=>{let{updateItem:i}=wH(),l=(0,K.useCallback)(async a=>{t.dataType===eN.Text&&(await i(e,{dataType:eN.Text,memexProjectColumnId:t.id,value:x0(a)}),r&&r())},[t,e,r,i]);return(0,F.jsx)(j9,{withEmojiPicker:!0,submitValue:l,defaultValue:a?.raw||"",placeholder:nH.emptyColumnNameValue.text,onKeyDown:n})},CM=({columnModel:e,content:t})=>(0,F.jsx)(jh,{dangerousHtml:t?.html,columnName:e.name,columnType:e.dataType});try{CD.displayName||(CD.displayName="TextField")}catch{}try{CE.displayName||(CE.displayName="TextEditor")}catch{}try{CM.displayName||(CM.displayName="TextRenderer")}catch{}let CB=({item:e,content:t,field:a,metadata:r,onKeyDown:n})=>{let i=(0,F.jsx)(je,{sx:{color:"fg.subtle"},children:nH.noneYet});switch(a.dataType){case eN.Assignees:i=(0,F.jsx)(jy,{model:e,columnModel:a,content:r.assignees,onSaved:eC.l});break;case eN.Labels:i=(0,F.jsx)(jQ,{model:e,columnModel:a,content:r.labels,onSaved:eC.l});break;case eN.Milestone:i=(0,F.jsx)(j4,{model:e,columnModel:a,content:r.milestone,onSaved:eC.l});break;case eN.Iteration:i=(0,F.jsx)(jL,{model:e,columnModel:a,content:t,onSaved:eC.l});break;case eN.SingleSelect:i=(0,F.jsx)(CA,{model:e,columnModel:a,content:t,onSaved:eC.l});break;case eN.Text:i=(0,F.jsx)(CD,{model:e,columnModel:a,content:t,onSaved:eC.l,onKeyDown:n});break;case eN.Date:i=(0,F.jsx)(jv,{model:e,columnModel:a,content:t,onSaved:eC.l});break;case eN.Number:i=(0,F.jsx)(Ce,{model:e,columnModel:a,content:t,onSaved:eC.l,onKeyDown:n});break;case eN.LinkedPullRequests:i=t?.length?(0,F.jsx)(je,{children:(0,F.jsx)(lx.A,{sx:{display:"flex",gap:1,flexDirection:"column",alignItems:"flex-start"},children:t?.slice(0,10).map(e=>F.jsx(wR,{linkedPullRequest:e},e.id))})}):(0,F.jsx)(je,{sx:{color:"fg.subtle"},children:nH.emptyColumnNameValue.linkedPullRequest});break;case eN.IssueType:t&&(i=(0,F.jsx)(je,{children:(0,F.jsx)(wT,{issueType:t})}));break;case eN.Repository:t&&(i=(0,F.jsx)(je,{children:(0,F.jsx)(wP,{repository:t})}));break;default:t&&(i=(0,F.jsx)(je,{children:t}))}return(0,F.jsx)(w7,{label:a.name,...(0,ey.G)(`sidebar-field-${a.name}`),children:i})};var CL=a(81425);async function CF(e){let t=nP("memex-item-convert-issue-api-data"),{data:a}=await ix(t.url,{method:"POST",body:e});return a}let CO=()=>{let{setItemData:e}=um();return(0,mg.W)({mutationFn:CF,onSuccess:t=>{e(t.memexProjectItem)}})()},CG=()=>{let e=CO();return{convertToIssue:(0,K.useCallback)(async(t,a)=>(l3(),e.mutateAsync({repositoryId:a,memexProjectItemId:t})),[e])}},CV=e=>{let{addToast:t}=lV(),{postStats:a}=iN(),{convertToIssue:r}=CG(),{perform:n,status:i}=uN({request:(0,K.useCallback)(async({memexProjectItem:n,repositoryId:i})=>{if(n.contentType===eJ.DraftIssue){let{memexProjectItem:l,warnings:s}=await r(n.id,i),o=s?.invalidAssigneeLogins??[];o.length>0&&(t({message:nH.unableToAssignUsersToConvertedIssue(o),type:nF.error}),a({name:"draft_convert_dropped_assignee",context:o.length,memexProjectItemId:l.id}));let d=function(e){let t=e.memexProjectColumnValues.find(e=>e.memexProjectColumnId===eT.Title);return!t||t.memexProjectColumnId!==eT.Title||"isDraft"in t.value?null:"number"in t.value?t.value.number:null}(l),u=function(e){let t=e.memexProjectColumnValues.find(e=>e.memexProjectColumnId===eT.Repository);return t&&t.memexProjectColumnId===eT.Repository&&t.value?t.value.nameWithOwner:null}(l);d&&u&&e?.()}},[r,t,a,e])});return{start:(0,K.useCallback)(async(e,t)=>{await n({memexProjectItem:e,repositoryId:t.id})},[n]),status:i}},C$=()=>(0,F.jsx)("div",{}),CW={title:nH.draftConvertPromptTitle,description:nH.draftConvertPromptDescription},Cz=({isOpen:e,anchorRef:t,renderAnchor:a=C$,showPrompt:r=!1,onOpenChange:n,onSuccess:i,item:l,promptOptions:s=CW})=>{let o=(0,K.useRef)(null),d=(0,K.useRef)(null),[u,c]=(0,K.useState)(""),[m,p]=(0,K.useState)(!1),[h,f]=(0,K.useState)(r),[g,y]=(0,K.useState)([]),[x,b]=(0,K.useState)([]),v=(0,K.useRef)(void 0),{suggestRepositories:w}=mk(),{start:j}=CV(),C=(0,CL.L)(t);(0,hF.r)({restoreFocusOnCleanUp:!0,initialFocusRef:o,containerRef:d});let I=(0,K.useCallback)(e=>{n(!1,e)},[n]),S=(0,K.useCallback)(async e=>{await j(l,e)},[j,l]),k=(0,K.useCallback)(async()=>{x.length||(p(!0),b(await w()??[]),p(!1))},[]),N=(0,K.useCallback)(e=>(""!==u?g:x).find(t=>t.id===e),[u,g,x]);(0,K.useEffect)(()=>{e&&(c(""),y([]),k())},[k,e]);let T=(0,K.useCallback)(async e=>{if(""!==e){p(!0);let{repositories:t}=await hG({query:e});y(t),p(!1)}else y(x??[])},[x]),_=(0,K.useCallback)(e=>{v.current&&v.current.cancel(),v.current=(0,nN.A)(()=>T(e),200),v.current()},[T]),A=e=>{if(e?.id){let t=N(e.id);t&&(S(t),i?.(t))}},R=()=>{I("click-outside")},P=(""!==u?g:x).filter(e=>!e.isArchived&&e.hasIssues).map(e=>({...e,text:e.name,leadingVisual:()=>hV({repository:e}),selectionVariant:"single",descriptionVariant:"block",selected:void 0,onAction:(t,a)=>{a.preventDefault(),A(e),n(!1,"convert-confirmation")}}));return h?(0,F.jsx)(b8.T,{anchorRef:C,renderAnchor:a,open:e,overlayProps:{onEscape:R,onClickOutside:R},width:"small",children:(0,F.jsx)("div",{onClick:e=>e.stopPropagation(),role:"presentation",children:(0,F.jsx)(fi.l,{children:(0,F.jsxs)(fi.l.Item,{onSelect:()=>f(!1),...(0,ey.G)("draft-prompt-convert-to-issue"),children:[(0,F.jsxs)(lx.A,{sx:{display:"flex",flexDirection:"column"},children:[(0,F.jsx)(lv.A,{sx:{display:"flex",fontSize:14,fontWeight:"bold",p:0},children:s.title}),(0,F.jsx)(lv.A,{sx:{display:"flex",fontSize:12,p:0,color:"fg.muted"},children:s.description})]}),(0,F.jsx)(fi.l.TrailingVisual,{children:(0,F.jsx)(ly.ArrowRightIcon,{})})]})})})}):(0,F.jsx)(hO.X,{placeholderText:nH.repoPickerFilterPlaceholder,open:e,anchorRef:C,renderAnchor:a,onOpenChange:n,loading:m,selected:void 0,filterValue:u,items:P,showItemDividers:!0,onFilterChange:e=>{c(e),_(e)},onSelectedChange:A,overlayProps:{width:"small",onMouseDown:e=>e.stopPropagation(),height:"small",onClickOutside:R,...(0,ey.G)("repo-picker-repo-list")}})};Cz.displayName="RepoPicker";let CH=({item:e})=>{let{tasklist_block:t}=iz(),{closePane:a,hasUnsavedChanges:r}=c7(),{postStats:n}=iN(),{addToast:i}=lV(),{items:l}=ug(),{removeChildIssues:s}=uI(),{createMemexItem:o}=mb(),{reloadSidePanelMetadata:d}=xO(),[u,c]=cH(),{hasWritePermissions:m}=eK(),p=eU().projectLimits.projectItemLimit,h=e.getUrl(),[f,g]=(0,K.useState)(!1),y=(0,uX.S)(),x=async()=>!r||await y({...nH.sidePanelCloseConfirmation,confirmButtonType:"danger"}),[b,v]=(0,K.useState)(!1),w=(0,K.useRef)(null),j=(0,K.useMemo)(()=>l.find(t=>t.itemId()===e.itemId()&&t.contentType===e.contentType),[l,e]),C=!!j,I=(0,K.useRef)(!1);(0,pk.N)(()=>{let t=document.querySelector(`[data-hovercard-subject-tag="issue:${e.itemId()}"]`)||document.querySelector(`[data-board-card-id="${e.itemId()}"]`);I.current&&t&&(I.current=!1,"scrollIntoViewIfNeeded"in t&&"function"==typeof t.scrollIntoViewIfNeeded?t.scrollIntoViewIfNeeded(!1):t.scrollIntoView({block:"nearest",behavior:"smooth"}),j&&c(e=>(e.set(dQ,uZ.ISSUE),e.set(dJ,j.id.toString()),e)))});let S=(0,K.useCallback)(async()=>{if(l.length+1>p){i({message:`Adding this item will exceed the ${p} project item limit`,type:nF.error});return}g(!0);try{await o({contentType:eJ.DraftIssue,content:{title:h}}),s([e.itemId()]),d(),I.current=!0}catch{i({message:"An error has occurred when trying to 'Add to project'",type:nF.error})}g(!1)},[l.length,p,i,o,h,s,e,d]),{openArchiveConfirmationDialog:k}=ww(void 0,void 0,void 0,()=>a({force:!0})),{openRemoveConfirmationDialog:N}=wS(void 0,void 0,void 0,()=>a({force:!0})),T=[],_=e instanceof DraftIssueModel&&m;return _&&T.push((0,F.jsx)(CU,{onConvert:()=>{x()&&v(!0)},ref:w},"convert")),t&&m&&h&&!C&&e.isHierarchy&&T.push((0,F.jsx)(Cq,{onAddToProject:S,loading:f},"addToProject")),h&&T.push((0,F.jsx)(CK,{itemUrl:h,onClick:()=>n({name:tj})},"open"),(0,F.jsx)(CQ,{itemUrl:h},"copy")),C&&(T.push((0,F.jsx)(CJ,{inProjectUrl:window.location.href},"copyInProjectLink")),m&&T.push((0,F.jsx)(CX,{onArchive:()=>{x()&&C&&k([j.id],eX)}},"archive"),(0,F.jsx)(CY,{onDelete:()=>{C&&N([j.id],eX)}},"delete"))),T.length>0?(0,F.jsxs)(F.Fragment,{children:[(0,F.jsxs)(fi.l,{"aria-label":"Actions",children:[(0,F.jsx)(fi.l.Divider,{}),T]}),_?(0,F.jsx)(Cz,{anchorRef:w,isOpen:b,item:e,onOpenChange:v,onSuccess:()=>{n({name:eY,ui:eX,memexProjectItemId:e.id})}},"repoPicker"):null]}):null},CU=(0,K.forwardRef)(({onConvert:e},t)=>(0,F.jsxs)(fi.l.Item,{onSelect:e,ref:t,...(0,ey.G)("side-pane-convert-to-issue"),children:[(0,F.jsx)(fi.l.LeadingVisual,{children:(0,F.jsx)(ly.IssueOpenedIcon,{})}),"Convert to issue"]}));CU.displayName="ConvertToIssueAction";let Cq=({onAddToProject:e,loading:t})=>(0,F.jsxs)(fi.l.Item,{onSelect:e,disabled:t,...(0,ey.G)("side-pane-add-to-project-action"),children:[(0,F.jsx)(fi.l.LeadingVisual,{children:(0,F.jsx)(ly.PlusCircleIcon,{})}),"Add to project"]});Cq.displayName="AddToProjectAction";let CK=({itemUrl:e,onClick:t})=>(0,F.jsxs)(fi.l.LinkItem,{target:"_blank",href:e,onClick:t,children:[(0,F.jsx)(fi.l.LeadingVisual,{children:(0,F.jsx)(ly.LinkExternalIcon,{})}),"Open in new tab"]}),CQ=({itemUrl:e})=>{let[t,a]=(0,K.useState)(!1),r=lB(()=>a(!1),2e3);return(0,F.jsxs)(fi.l.Item,{onSelect:()=>{navigator.clipboard.writeText(e),a(!0),r()},...(0,ey.G)("copy-link-action"),children:[(0,F.jsx)(fi.l.LeadingVisual,{children:t?(0,F.jsx)(lw.A,{icon:ly.CheckIcon,sx:{color:"success.fg"}}):(0,F.jsx)(ly.CopyIcon,{})}),t?(0,F.jsx)(lv.A,{sx:{fontWeight:"bold",color:"success.fg"},children:"Copied!"}):"Copy link"]})},CJ=({inProjectUrl:e})=>{let[t,a]=(0,K.useState)(!1),r=lB(()=>a(!1),2e3);return(0,F.jsxs)(fi.l.Item,{onSelect:()=>{navigator.clipboard.writeText(e),a(!0),r()},...(0,ey.G)("copy-in-project-link-action"),children:[(0,F.jsx)(fi.l.LeadingVisual,{children:t?(0,F.jsx)(lw.A,{icon:ly.CheckIcon,sx:{color:"success.fg"}}):(0,F.jsx)(ly.CopyIcon,{})}),t?(0,F.jsx)(lv.A,{sx:{fontWeight:"bold",color:"success.fg"},children:"Copied!"}):"Copy link in project"]})},CX=({onArchive:e})=>(0,F.jsxs)(fi.l.Item,{onSelect:e,children:[(0,F.jsx)(fi.l.LeadingVisual,{children:(0,F.jsx)(ly.ArchiveIcon,{})}),"Archive"]}),CY=({onDelete:e})=>(0,F.jsxs)(fi.l.Item,{onSelect:e,variant:"danger",...(0,ey.G)("side-pane-delete-action"),children:[(0,F.jsx)(fi.l.LeadingVisual,{children:(0,F.jsx)(ly.TrashIcon,{})}),"Delete from project"]});try{CH.displayName||(CH.displayName="SidePanelSidebarActions")}catch{}try{CK.displayName||(CK.displayName="OpenInNewTabAction")}catch{}try{CQ.displayName||(CQ.displayName="CopyUrlAction")}catch{}try{CJ.displayName||(CJ.displayName="CopyInProjectUrlAction")}catch{}try{CX.displayName||(CX.displayName="ArchiveAction")}catch{}try{CY.displayName||(CY.displayName="DeleteAction")}catch{}let CZ=({item:e,breakpoint:t})=>(0,F.jsxs)(lx.A,{sx:{borderRightWidth:0,borderBottomWidth:0,borderLeftWidth:t(["0","0","1px","1px"]),borderTopWidth:t(["1px","1px","0","0"]),borderStyle:"solid",borderColor:"border.muted",width:t(["100%","100%","33%","33%"]),maxWidth:t(["","","300px","400px"]),minWidth:t(["","","280px","400px"])},children:[(0,F.jsx)(C2,{item:e}),(0,F.jsx)(CH,{item:e})]}),C0=new Set([eT.Labels,eT.Assignees,eT.Milestone]),C1=e=>"number"!=typeof e&&C0.has(e),C2=({item:e})=>{let t=(0,K.useRef)(null),{allColumns:a}=i5(),{sidePanelMetadata:r}=xO(),n=(0,K.useMemo)(()=>{let t=new Map;return(function(e,t){switch(e){case eJ.DraftIssue:return t.filter(e=>e.id!==eT.Title&&oi(e.id)&&!os(e));case eJ.Issue:return t.filter(e=>e.id!==eT.Title&&e.id!==eT.Reviewers&&!os(e));default:return[]}})(e.contentType,a).map(a=>({content:function(e,t,a){let r=t.get(e.id);switch(e.dataType){case eN.Assignees:return r||a.getAssignees();case eN.Labels:return r||a.getLabels();case eN.Iteration:{let t=r||a.getCustomField(e.id);if(!t)return;return(e.settings.configuration?aQ(e.settings.configuration):[]).find(e=>e.id===t.id)}case eN.Tracks:return r||a.getCompletion();case eN.SingleSelect:{let t=r||(e.id===eT.Status?a.getStatus():a.getCustomField(e.id));if(!t)return;return e.settings?.options?.find(e=>e.id===t.id)}case eN.Text:return r||a.getCustomField(e.id);case eN.Milestone:return r||a.getMilestone();case eN.LinkedPullRequests:return r||a.getLinkedPullRequests();case eN.Date:case eN.Number:return r||a.getCustomField(e.id);case eN.Repository:return r||a.getExtendedRepository();case eN.TrackedBy:return r||a.getTrackedBy();case eN.IssueType:return r||a.getIssueType()}}(a,t,e),field:a}))},[a,e]),i=(0,K.useMemo)(()=>n.reduce((e,t)=>(C1(t.field.id)?e[0].push(t):r.projectItemId&&e[1].push(t),e),[[],[]]).flat(),[n,r.projectItemId]),l=(0,K.useCallback)(e=>{if("Enter"===e.key){e.stopPropagation();let a=t.current?.querySelectorAll("button, input");if(!a?.length)return;let r=Array.from(a).indexOf(e.target),n=a[r+1];n?.focus()}},[]);return(0,F.jsxs)("section",{children:[(0,F.jsx)("h3",{className:"sr-only",children:"Properties"}),(0,F.jsx)(w8,{listRef:t,children:i.map(t=>(0,F.jsx)(CB,{metadata:r,item:e,content:t.content,field:t.field,onKeyDown:l},t.field.id))})]})};try{CZ.displayName||(CZ.displayName="SidePanelSidebar")}catch{}try{C0.displayName||(C0.displayName="UNIVERSAL_FIELDS")}catch{}try{C2.displayName||(C2.displayName="SidePanelSidebarContent")}catch{}let C5=(0,K.memo)(function({sidePanelState:e}){let{loggedInUser:t}=eU();switch(e.type){case uZ.ISSUE:if("Issue"===e.item.contentType){let t=e.item.getItemIdentifier();return t?(0,F.jsx)(wN,{...t,url:e.item.getUrl(),itemId:e.item.id}):null}if("DraftIssue"===e.item.contentType||!t&&"Issue"===e.item.contentType)return(0,F.jsx)(xF,{contentType:e.item.contentType,repositoryId:e.item.ownerId(),itemId:e.item.itemId(),memexItemId:e.item.memexItemId?.(),children:(0,F.jsx)(C6,{item:e.item})});throw Error(`Unexpected contentType of ${e.item.contentType} for SidePanelTypeParam.ISSUE`);case uZ.INFO:return(0,F.jsx)(C3,{});case uZ.BULK_ADD:return(0,F.jsx)(C8,{targetRepository:e.targetRepository,query:e.query,newItemAttributes:e.newItemAttributes});default:tA(e)}}),C3=(0,K.memo)(function(){let{postStats:e}=iN(),{titleHtml:t}=mf(),[,a]=xE(),[,r]=xE(),{isTemplate:n}=y7(),i=(0,K.useCallback)(t=>{e({name:t?"description_update":"description_add",ui:th})},[e]),l=(0,K.useCallback)(t=>{e({name:"readme_add",ui:tg})},[e]);return(0,F.jsxs)(lx.A,{sx:{display:"flex",flexDirection:"column",backgroundColor:"canvas.default",width:"100%",overflowY:"auto",height:"100%",alignItems:"center",px:"20px"},...(0,ey.G)("side-panel-info-content"),children:[(0,F.jsxs)(lx.A,{sx:{width:"100%",mt:4},children:[(0,F.jsxs)(lx.A,{sx:{display:"flex",alignItems:"center",flexDirection:"row-reverse"},children:[(0,F.jsx)(vZ,{showCloseButton:!0}),(0,F.jsx)(lx.A,{sx:{flex:1}}),(0,F.jsx)(p$,{sx:{fontWeight:"600",fontSize:2,wordBreak:"break-word"},as:"h2",children:t})]}),(0,F.jsx)(bi,{onSaveStats:i,setHasUnsavedChanges:a,hideLabel:!0})]}),(0,F.jsx)(lx.A,{sx:{display:"flex",flexDirection:"column",flex:"auto",flexGrow:0,width:"100%"},children:(0,F.jsx)(be,{onSaveStats:l,setHasUnsavedChanges:r,hideLabel:!0})}),!n&&(0,F.jsx)(bX,{})]})}),C4=(0,K.memo)(function({item:e,isLoading:t}){let a=(0,K.useRef)(null),r=e.itemId();(0,pk.N)(()=>{a.current&&xD(a.current)},[r]);let n=(0,ga.w)(a.current);return(0,F.jsxs)(lx.A,{ref:a,sx:{display:"flex",flex:"auto",flexDirection:n(["column","column","row","row"]),backgroundColor:"canvas.default",justifyContent:"stretch",overflowY:"auto"},children:[(0,F.jsxs)(lx.A,{sx:{display:"flex",flex:"auto",flexDirection:"column",width:n(["100%","100%","66%","66%"]),mx:"auto"},children:[(0,F.jsx)(vm,{item:e,isLoading:t}),(0,F.jsx)(wr,{itemURL:e.getUrl()})]}),(0,F.jsx)(CZ,{item:e,breakpoint:n})]})}),C6=(0,K.memo)(function({item:e}){let[t,a]=(0,K.useState)("details"),{tasklist_block:r}=iz(),{isLoading:n}=xO(),i=r&&e.contentType===eJ.Issue;return(0,F.jsxs)(lx.A,{sx:{position:"relative",backgroundColor:"canvas.default",height:"100%",width:"100%",flexGrow:1,zIndex:2,display:"flex",flexDirection:"column"},children:[(0,F.jsx)(vX,{item:e,isLoading:n,showBreadcrumbs:i,showTabs:!1,selectedTab:t,onTabChange:a}),(0,F.jsx)(C4,{item:e,isLoading:n})]})}),C8=(0,K.memo)(function({targetRepository:e,query:t,newItemAttributes:a}){return(0,F.jsx)(mz,{query:t,selectedRepository:e,children:(0,F.jsx)(v3,{targetRepository:e,newItemAttributes:a})})}),C7={position:"relative",backgroundColor:"canvas.default",height:"100%",width:"100%",flexGrow:1,zIndex:2,display:"flex",flexDirection:"column"},C9={margin:"auto"},Ie={width:"400px"},It=(0,K.memo)(function(){return(0,F.jsxs)(lx.A,{...(0,ey.G)("new-issue-viewer-development-warning"),sx:C7,children:[(0,F.jsx)(vZ,{showCloseButton:!0}),(0,F.jsx)(xP.A.Item,{sx:C9,children:(0,F.jsxs)(mq.A,{sx:Ie,variant:"warning",children:[(0,F.jsxs)("p",{children:["We decided not to render the new issue viewer in standalone development environment."," ",(0,F.jsx)(pw.A,{href:"https://github.com/github/memex/blob/main/docs/adr/2024-05-10-issue-viewer-testing.md",target:"_blank",inline:!0,children:"Learn more"}),"."]}),(0,F.jsxs)("p",{children:["E2E tests for the new issue viewer should be added to"," ",(0,F.jsx)(pw.A,{href:"https://github.com/github/github/blob/master/test/e2e/spec/hyperlist-web/memex-issue-viewer.spec.ts",target:"_blank",children:(0,F.jsx)("code",{children:"/test/e2e/spec/hyperlist-web/memex-issue-viewer.spec.ts"})}),"."," "]})]})})]})});try{C5.displayName||(C5.displayName="SidePanelContent")}catch{}try{C3.displayName||(C3.displayName="SidePanelMemexInfoContent")}catch{}try{C4.displayName||(C4.displayName="SidePanelItemDetails")}catch{}try{C6.displayName||(C6.displayName="SidePanelItemContent")}catch{}try{C8.displayName||(C8.displayName="SidePanelMemexBulkAddContent")}catch{}try{It.displayName||(It.displayName="NewIssueViewerDevelopmentWarning")}catch{}let Ia=(0,K.memo)(function({mainAppContent:e}){let{closePane:t,sidePanelState:a,isPaneOpened:r,supportedItemTypes:n,pinned:i,containerRef:l,initialFocusRef:s}=c7(),o=(r&&a&&(a.type!==uZ.ISSUE||n.has(a.item.contentType)))??!1,d=a&&(0,F.jsxs)(lx.A,{ref:l,sx:{display:"contents"},children:[(0,F.jsx)("span",{tabIndex:-1,ref:s,...(0,ey.G)("side-panel-focus-target")}),(0,F.jsx)(C5,{sidePanelState:a})]}),u=function(e){let t=[nH.sidePanelRegionNameLabel];switch(e?.type){case uZ.INFO:t.push(nH.sidePanelProjectInfoLabel);break;case uZ.BULK_ADD:t.push(nH.sidePanelBulkAddLabel);break;case uZ.ISSUE:t.push(nH.itemType(e.item.contentType),e.item.getRawTitle())}return t.join(": ")}(a),c=(0,K.useCallback)(e=>{let a=!1;e.target&&e.target instanceof Element&&(a=e.target.classList.contains("js-site-search-field")),0!==document.querySelectorAll(".omnibar-picker.visible").length||a||t()},[t]);return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(In,{open:o&&i,mainAppContent:e,label:u,initialFocusRef:s,onEscape:c,children:o&&i&&d}),(0,F.jsx)(Ii,{open:o&&!i,label:u,onEscape:c,contentType:a?.type,initialFocusRef:s,children:o&&!i&&d})]})}),Ir=(...e)=>{for(let{current:t}of e)if(t&&document.body.contains(t)){t.focus();return}},In=(0,K.memo)(function({mainAppContent:e,children:t,open:a,label:r,initialFocusRef:n,onEscape:i}){let{memex_small_viewport_a11y:l}=iz(),{postStats:s}=iN(),o=xA(),d=(0,K.useRef)(null),u=(0,K.useRef)(null),c=(0,K.useRef)(null),m=(0,K.useCallback)(e=>{let t=e.relatedTarget,a=e.currentTarget,r=e.target;r instanceof HTMLElement&&(u.current=r),!a.contains(t)&&t instanceof HTMLElement&&(d.current=t,Ir(u))},[]);xN(a,d),(0,xS._N)(["F6"],e=>{e.preventDefault(),c.current?.contains(document.activeElement)?(Ir(d),s({name:"region_focus",context:"target: main"})):(Ir(u,n),s({name:"region_focus",context:"target: side panel"}))},{ctrlKey:!0,triggerWhenInputElementHasFocus:!0,triggerWhenPortalIsActive:!1});let p=(0,K.useRef)(null);return(0,xk.e)({overlayRef:p,returnFocusRef:p,onEscape:i,onClickOutside:eC.l}),(0,F.jsxs)(mU.M,{containerWidth:"full",padding:"none",columnGap:"none",rowGap:"none",sx:{width:"100%",isolation:"isolate",height:`calc(100vh - ${o}px)`,"& > div":{height:"100%"},...l?{"@media (max-width: 768px)":{overflow:"auto"}}:{}},children:[(0,F.jsx)(mU.M.Content,{sx:{isolation:"isolate",minHeight:"50vh",...l?{"@media (max-width: 768px)":{height:"100%"}}:{}},children:(0,F.jsx)(lx.A,{sx:{display:"flex",flexDirection:"column",height:"100%"},children:e})}),(0,F.jsx)(mU.M.Pane,{sticky:!0,resizable:!0,hidden:!a,width:"large",widthStorageKey:"projects.sidePanelWidth","aria-label":r,sx:{"& > :nth-child(2)":{"--pane-min-width":"clamp(350px, 33vw, 500px)","--pane-max-width-diff":"clamp(350px, 33vw, 1000px)"},"& > :nth-child(3)":{width:"3px",zIndex:5,"& > [role='slider']":{inset:"0 -3px"}}},divider:"line",children:(0,F.jsx)(lx.A,{as:"aside","aria-label":r,sx:{isolation:"isolate"},onFocus:m,tabIndex:-1,ref:c,children:t})})]})}),Ii=(0,K.memo)(function({children:e,open:t,label:a,onEscape:r,contentType:n,initialFocusRef:i}){let l=xR(),s=(0,K.useRef)(null),o=(0,K.useRef)(void 0),d=(0,K.useMemo)(()=>{switch(n){case uZ.ISSUE:return o.current="min(90%, 1280px)";case uZ.INFO:return o.current="580px";case uZ.BULK_ADD:return o.current="60%";default:return o.current}},[n]),u=(0,K.useCallback)(e=>{let t=fA(e);t!==fN.ESCAPE&&t!==fN.META_ENTER&&Object.values(fN).includes(t)&&e.stopPropagation()},[]);return(0,F.jsx)(xI.w,{open:t,onClose:r,returnFocusRef:s,topOffset:l,onKeyDown:u,width:d,"aria-label":a,initialFocusRef:i,defaultCloseElement:"first-child",children:e})});try{Ia.displayName||(Ia.displayName="SidePanel")}catch{}try{In.displayName||(In.displayName="DockedSidePanel")}catch{}try{Ii.displayName||(Ii.displayName="OverlaySidePanel")}catch{}var Il=a(13080),Is=a(68593);async function Io(e){let t=nP("memex-template-api-data"),{data:a}=await ix(t.url,{method:"POST",body:e});return a}async function Id(e){let t=nP("memex-view-create-api-data"),{data:a}=await ix(t.url,{method:"POST",body:e});return a}async function Iu(e){let t=nP("memex-view-delete-api-data");await ix(t.url,{method:"DELETE",body:e})}async function Ic(e){let t=nP("memex-view-update-api-data"),{data:a}=await ix(t.url,{method:"PUT",body:e});return a}let Im=({setCurrentViewNumber:e,addView:t})=>uN({request:(0,K.useCallback)(async a=>{l3();let r=await Id(a);return t(r.view),e(r.view.number),r.view},[t,e])}),Ip=()=>uN({request:(0,K.useCallback)(async e=>(l3(),(await Ic(e)).view),[])}),Ih=({setCurrentViewNumber:e,updateView:t})=>uN({request:(0,K.useCallback)(async a=>{l3();let{sliceValue:r,...n}=a.view;a.view=n;let i=await Ic(a);return r&&(i.view.sliceValue=r),t(i.view),e(i.view.number),i.view},[t,e])}),If=({deleteView:e})=>uN({request:(0,K.useCallback)(async t=>{l3(),await Iu(t),e(t.viewNumber)},[e])}),Ig=()=>{let e=mf(),{setProject:t}=yq();return{updateTitle:(0,K.useCallback)(async a=>{a=a.trim(),e.title!==a&&0!==a.length&&t((await xH({title:a})).memexProject)},[e.title,t])}};function Iy(){let e=yJ(),{addToast:t}=lV(),a=(0,K.useRef)(!1),{viewsMap:r}=iS(),n=Ip(),{updateTitle:i}=Ig(),l=uN({request:async e=>{(await Io({template:e})).copyingDraftsAsync&&(t({message:ir.copyingDraftsMessage,type:"default",keepAlive:!1}),a.current=!0)},rollback:e=>{e?.()},showErrorToast:!0});return{applyTemplate:(0,K.useCallback)(async function({template:t,title:a,rollback:s}){let o=[i(a)];if("layout"===t.type){let e=r[1];if(!e)return;o.push(n.perform({viewNumber:e.number,view:uT({...e.serverViewState,layout:lZ(t.viewType)},lz)}))}else{let e="custom"===t.type?String(t.template.projectNumber):t.template.id;o.push(l.perform(e,s))}await Promise.all(o),await e()},[l,e,i,n,r]),isApplyingTemplate:"loading"===l.status.current.status,copyingDraftsAsync:a}}function Ix(e,t){let a=function(){let{resolvedColorScheme:e}=(0,z.DP)();return e?.startsWith("dark")?"Dark":"Light"}(),r=eU().mediaUrls,n=r?.[e]?.[`${t}${a}`];return n?encodeURI(n.toString()):""}async function Ib(){let e=nP("memex-custom-templates-api-data"),{data:t}=await ig(e.url);return t}let Iv=(0,sp.V)({queryKey:["memex","org-templates"],fetcher:()=>Ib()}),Iw=(0,K.createContext)(null),Ij=(0,K.memo)(function({children:e}){let[t,a]=(0,K.useState)(!0),{showTemplateDialog:r}=eU(),n=(0,K.useMemo)(()=>({showTemplateDialog:r,isTemplatesDialogOpen:t,setIsTemplatesDialogOpen:a}),[r,t]);return(0,F.jsx)(Iw.Provider,{value:n,children:e})});try{Iw.displayName||(Iw.displayName="TemplateDialogContext")}catch{}try{Ij.displayName||(Ij.displayName="TemplateDialogStateProvider")}catch{}let IC=()=>{let e=(0,K.useContext)(Iw);if(!e)throw Error("useTemplateDialog must be used within a TemplateDialogStateProvider");return e},II={[eN.Assignees]:{icon:ly.PeopleIcon,text:"Assignees"},[eN.SingleSelect]:{icon:ly.SingleSelectIcon,text:"Single select",sortedAscendingDescription:nH.sortSingleSelectAscending,sortedDescendingDescription:nH.sortSingleSelectDescending},[eN.Title]:{icon:ly.ListUnorderedIcon,text:"Title"},[eN.Number]:{icon:ly.NumberIcon,text:"Number",sortedAscendingDescription:nH.sortNumbersAscending,sortedDescendingDescription:nH.sortNumbersDescending},[eN.Labels]:{icon:ly.TagIcon,text:"Labels"},[eN.Repository]:{icon:ly.RepoIcon,text:"Repository"},[eN.Iteration]:{icon:ly.IterationsIcon,text:"Iteration"},[eN.Milestone]:{icon:ly.MilestoneIcon,text:"Milestone"},[eN.Date]:{icon:ly.CalendarIcon,text:"Date",sortedAscendingDescription:nH.sortDatesAscending,sortedDescendingDescription:nH.sortDatesDescending},[eN.LinkedPullRequests]:{icon:ly.GitPullRequestIcon,text:"Linked pull requests"},[eN.Reviewers]:{icon:ly.PeopleIcon,text:"Reviewers"},[eN.Text]:{icon:ly.TypographyIcon,text:"Text"},[eN.Tracks]:{icon:ly.IssueTracksIcon,text:"Tracks"},[eN.TrackedBy]:{icon:ly.IssueTrackedByIcon,text:"Tracked by"},[eN.IssueType]:{icon:ly.IssueOpenedIcon,text:"Type"},[eN.ParentIssue]:{icon:ly.IssueTrackedByIcon,text:"Parent issue"},[eN.SubIssuesProgress]:{icon:ly.IssueTracksIcon,text:"Sub-issues progress"}},IS=e=>II[e].icon,Ik=e=>II[e].text,IN=e=>II[e].sortedAscendingDescription??nH.sortStringsAscending,IT=e=>II[e].sortedDescendingDescription??nH.sortStringsDescending,I_={cardContainerStyles:"featured-template-card-module__cardContainerStyles--XOlN0",imageContainerStyles:"featured-template-card-module__imageContainerStyles--bafCB",templateImageStyles:"featured-template-card-module__templateImageStyles--IdkPS",templateInfoStyles:"featured-template-card-module__templateInfoStyles--P3FRt",Box_4:"featured-template-card-module__Box_4--fr0zy",Box_5:"featured-template-card-module__Box_5--FVB6f",Box_6:"featured-template-card-module__Box_6--cOdKd"},IA="custom_template",IR="system_template",IP="layout_template";function ID(e){let[t]=cH();return"custom"===e.type&&t.set(IA,String(e.template.projectNumber)),"system"===e.type&&t.set(IR,e.template.id),"layout"===e.type&&t.set(IP,e.viewType),{search:t.toString()}}function IE({template:e}){let{resolvedColorScheme:t}=(0,z.DP)(),a=ID({type:"system",template:e}),r="dark"===t?e.imageUrl.dark:e.imageUrl.light;return(0,F.jsxs)(cW,{to:a,className:I_.cardContainerStyles,children:[(0,F.jsx)("div",{className:I_.imageContainerStyles,children:(0,F.jsx)("img",{src:r,alt:"",className:I_.templateImageStyles})}),(0,F.jsx)("div",{className:I_.templateInfoStyles,children:(0,F.jsxs)("div",{children:[(0,F.jsx)("span",{className:I_.Box_4,children:e.title}),(0,F.jsxs)("span",{className:I_.Box_5,children:[" \u2022 ","GitHub"]}),e.shortDescription&&(0,F.jsx)("p",{className:I_.Box_6,children:e.shortDescription})]})})]})}try{IE.displayName||(IE.displayName="FeaturedTemplateCard")}catch{}let IM=(0,K.createContext)(void 0),IB=({children:e,value:t})=>(0,F.jsx)(IM.Provider,{value:t,children:e}),IL=()=>{let e=(0,K.useContext)(IM);if(!e)throw Error("useLabelId must be used with LabelIdProvider.");return e};try{IM.displayName||(IM.displayName="LabelIdContext")}catch{}try{IB.displayName||(IB.displayName="LabelIdProvider")}catch{}let IF={list:"Items-module__list--Zovv0"},IO=({children:e})=>{let t=IL();return(0,F.jsx)("ul",{"aria-labelledby":t,className:IF.list,children:e})};try{IO.displayName||(IO.displayName="Items")}catch{}let IG={container:"SimpleListViewContainer-module__container--UdJ0O"},IV=({children:e,...t})=>{let a=(0,K.useId)();return(0,F.jsx)(IB,{value:a,children:(0,F.jsx)("div",{className:IG.container,...t,children:e})})};try{IV.displayName||(IV.displayName="SimpleListViewContainer")}catch{}let I$=Object.assign(IV,{Items:IO});try{I$.displayName||(I$.displayName="SimpleListView")}catch{}var IW=a(46309);let Iz={container:"Header-module__container--EQoku"};function IH({children:e}){return(0,F.jsx)(IW.B,{justify:"space-between",direction:"horizontal",className:Iz.container,children:e})}try{IH.displayName||(IH.displayName="Header")}catch{}function IU({children:e,className:t,...a}){let r={id:IL(),children:e,className:t},n={...r,inline:!0};return"href"in a?(0,F.jsx)(pw.A,{href:a.href,...n}):"onClick"in a?(0,F.jsx)(pw.A,{as:"button",onClick:a.onClick,...n}):(0,F.jsx)("span",{...r})}try{IU.displayName||(IU.displayName="Metadata")}catch{}let Iq={title:"Title-module__title--SVcM7"};function IK({headingLevel:e,children:t,className:a,...r}){let n=IL();return(0,F.jsx)(IQ,{id:n,headingLevel:e,className:(0,vB.$)(Iq.title,a),...r,children:t})}function IQ({headingLevel:e,children:t,...a}){let r=`${e}`;return(0,K.createElement)(r,a,t)}try{IK.displayName||(IK.displayName="Title")}catch{}try{IQ.displayName||(IQ.displayName="HeadingTag")}catch{}let IJ=Object.assign(IH,{Title:IK,Metadata:IU});try{IJ.displayName||(IJ.displayName="SimpleListHeader")}catch{}let IX={container:"Actions-module__container--sOX6_"},IY={container:"ItemContainer-module__container--GonLl",disabled:"ItemContainer-module__disabled--IoWxU",contents:"ItemContainer-module__contents--YDLM4",status:"ItemContainer-module__status--vRp2G",actions:"ItemContainer-module__actions--J5mYH",trailingActions:"ItemContainer-module__trailingActions--zcywu"},IZ=({actionStyling:e={},children:t})=>{let{direction:a,gap:r,...n}=e;return(0,F.jsx)(IW.B,{className:(0,vB.$)(IX.container,IY.actions),direction:a||"horizontal",gap:r||"condensed",...n,children:t})};IZ.displayName="Actions";let I0={container:"Description-module__container--kj4Af",text:"Description-module__text--XWFIB"},I1=({children:e})=>"string"==typeof e?(0,F.jsx)("div",{className:I0.container,children:(0,F.jsx)("p",{className:I0.text,children:e})}):(0,F.jsx)("span",{className:I0.container,children:e});I1.displayName="Description";let I2=({disabled:e=!1,children:t})=>{let a=(0,K.useId)();return(0,F.jsx)(IB,{value:a,children:(0,F.jsx)("li",{"aria-labelledby":a,className:(0,vB.$)("controlBoxContainer",IY.container,e&&IY.disabled),children:(0,F.jsx)("div",{className:IY.contents,children:t})})})};try{I2.displayName||(I2.displayName="Container")}catch{}let I5={container:"LeadingVisual-module__container--BTG5o"},I3=({children:e})=>(0,F.jsx)("div",{className:I5.container,children:(0,F.jsx)("div",{children:e})});I3.displayName="LeadingVisualProps";let I4=({statusStyling:e={},children:t})=>{let{direction:a,gap:r,...n}=e;return(0,F.jsx)(IW.B,{className:IY.status,direction:a||"horizontal",gap:r||"condensed",wrap:"wrap",...n,children:t})};I4.displayName="Status";let I6={title:"Title-module__title--RB4XQ",link:"Title-module__link--lQ3_o"};function I8({children:e,...t}){let a=IL(),r={className:I6.title,id:a,children:e},n={...r,inline:!0,className:(0,vB.$)(I6.title,I6.link)};return"href"in t?(0,F.jsx)(pw.A,{href:t.href,...n}):"onClick"in t?(0,F.jsx)(pw.A,{as:"button",onClick:t.onClick,...n}):(0,F.jsx)("span",{...r})}try{I8.displayName||(I8.displayName="Title")}catch{}let I7=({children:e,trailingActionStyling:t={}})=>{let{direction:a,gap:r,...n}=t;return(0,F.jsx)(IW.B,{className:IY.trailingActions,direction:a||"horizontal",gap:r||"condensed",...n,children:e})};I7.displayName="TrailingActions";let I9=Object.assign(I2,{Actions:IZ,Description:I1,LeadingVisual:I3,TrailingActions:I7,Status:I4,Title:I8});try{I9.displayName||(I9.displayName="SimpleListItem")}catch{}let Se={title:"template-list-module__title--W0uLr",metadata:"template-list-module__metadata--R_oOs",Box:"template-list-module__Box--CKI4h",Box_1:"template-list-module__Box_1--H8Rvl"};function St({template:e}){let t=ID({type:"custom",template:e}),[a,r]=(0,K.useState)(!1);return(0,F.jsxs)(I9,{children:[(0,F.jsx)(I9.LeadingVisual,{children:(0,F.jsx)("div",{className:Se.Box,children:(0,F.jsx)(ly.ProjectTemplateIcon,{})})}),(0,F.jsx)(I9.Title,{children:(0,F.jsx)(cW,{to:t,style:{color:a?"var(--fgColor-accent)":"var(--fgColor-default)"},onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),children:pO(e.projectTitle)})}),e.projectShortDescription&&(0,F.jsx)(I9.Description,{children:e.projectShortDescription})]})}function Sa({title:e,templates:t,metadata:a}){return(0,F.jsx)("div",{className:Se.Box_1,children:(0,F.jsxs)(I$,{children:[(0,F.jsxs)(IJ,{children:[(0,F.jsx)(IJ.Title,{className:Se.title,headingLevel:"h3",children:e}),(0,F.jsx)(IJ.Metadata,{className:Se.metadata,children:a})]}),(0,F.jsx)(I$.Items,{children:t.map(e=>(0,F.jsx)(St,{template:e},e.projectNumber))})]})})}try{St.displayName||(St.displayName="TemplateListItem")}catch{}try{Sa.displayName||(Sa.displayName="TemplateList")}catch{}let Sr={templateDetails:"TemplateDialog-module__templateDetails--LZ0Ei",templateGrid:"TemplateDialog-module__templateGrid--YqEHh",Box:"TemplateDialog-module__Box--VVTrC",Box_1:"TemplateDialog-module__Box_1--I7Oh_",Heading:"TemplateDialog-module__Heading--ZQhNi",Box_2:"TemplateDialog-module__Box_2--pzqZN",Box_3:"TemplateDialog-module__Box_3--XNMF_",defaultTemplateImageStyles:"TemplateDialog-module__defaultTemplateImageStyles--SMFT0",Heading_1:"TemplateDialog-module__Heading_1--G0lZd",Box_5:"TemplateDialog-module__Box_5--hJil9",TextInput:"TemplateDialog-module__TextInput--R7gAF",Box_6:"TemplateDialog-module__Box_6--vJvz2",pillRowStyles:"TemplateDialog-module__pillRowStyles--Lkj7M",pillRowLabelStyles:"TemplateDialog-module__pillRowLabelStyles--iS6Pl",CounterLabel:"TemplateDialog-module__CounterLabel--FduRo",pillContainerStyles:"TemplateDialog-module__pillContainerStyles--lUjXw",pillStyles:"TemplateDialog-module__pillStyles--NMYwV",pillIconStyles:"TemplateDialog-module__pillIconStyles--UnYqA",Dialog:"TemplateDialog-module__Dialog--D565T",Box_11:"TemplateDialog-module__Box_11--LZ6GX",Box_12:"TemplateDialog-module__Box_12--Fknim",NavList:"TemplateDialog-module__NavList--ptJpg",FormControl:"TemplateDialog-module__FormControl--flnh6",Heading_2:"TemplateDialog-module__Heading_2--ElNQ6"},Sn="template_dialog_tab",Si={ALL:"all",FEATURED:"featured",ORG:"organization"};function Sl(){let{isOrganization:e}=eU(),t=cH()[0].get(Sn)??Si.ALL;return e?t===Si.ALL||t===Si.FEATURED||t===Si.ORG?t:Si.ALL:Si.FEATURED}function Ss({organizationTemplates:e,systemTemplates:t,previewTemplateCount:a=6,hideViewAll:r=!1}){let n=e?(e.recommendedTemplates&&e.recommendedTemplates.length>0?e.recommendedTemplates:e.templates).slice(0,a):[],i=t.slice(0,2);return(0,F.jsxs)("div",{children:[i.length>0&&(0,F.jsxs)("div",{className:Sr.Box,children:[(0,F.jsxs)("div",{className:Sr.Box_1,children:[(0,F.jsx)(h_.A,{as:"h2",className:Sr.Heading,children:"Featured"}),!r&&t.length>=2&&(0,F.jsx)(cW,{to:`?${Sn}=${Si.FEATURED}`,className:Sr.Box_2,children:"View all"})]}),(0,F.jsx)("div",{className:Sr.templateGrid,children:i.map(e=>(0,F.jsx)(IE,{template:e},e.id))})]}),n.length>0&&(0,F.jsx)(Sa,{title:"From your organization",templates:n,metadata:r?void 0:(0,F.jsx)(cW,{to:`?${Sn}=${Si.ORG}`,children:"View all"})})]})}function So({systemTemplates:e,hideHeading:t=!1}){return(0,F.jsxs)("div",{children:[!t&&(0,F.jsx)(h_.A,{as:"h2",className:Sr.Heading,children:"Featured"}),(0,F.jsx)("div",{className:Sr.templateGrid,children:e.map(e=>(0,F.jsx)(IE,{template:e},e.id))})]})}function Sd({organizationTemplates:e,hideBlankslate:t=!1}){return 0===e.templates.length?t?null:(0,F.jsxs)(Is.A,{children:[(0,F.jsx)(Is.A.Visual,{children:(0,F.jsx)(ly.ProjectTemplateIcon,{})}),(0,F.jsx)(Is.A.Heading,{children:"No templates yet"}),(0,F.jsx)(Is.A.Description,{children:"Templates can be used to quickly get started with a new project."}),(0,F.jsx)("div",{className:Sr.Box_3,children:(0,F.jsx)("a",{target:"_blank",rel:"noopener noreferrer",href:"https://docs.github.com/issues/planning-and-tracking-with-projects/managing-your-project/managing-project-templates-in-your-organization",children:"Learn more"})})]}):(0,F.jsxs)("div",{children:[e.recommendedTemplates&&e.recommendedTemplates.length>0&&(0,F.jsx)("div",{className:Sr.Box,children:(0,F.jsx)(Sa,{title:"Recommended",templates:e.recommendedTemplates})}),(0,F.jsx)("div",{className:Sr.Box,children:(0,F.jsx)(Sa,{title:"All",templates:e.templates})})]})}function Su({title:e,template:t}){let a=Ix("projectTemplateDialog","layout"===t.type?t.viewType:""),{resolvedColorScheme:r}=(0,z.DP)(),n="layout"===t.type?a:"dark"===r?t.template.imageUrl.dark:t.template.imageUrl.light;return(0,F.jsx)("img",{src:n,alt:`Preview screenshot for template ${e}`,className:Sr.defaultTemplateImageStyles})}function Sc({template:e,onChangeProjectName:t,projectName:a}){let r=(0,K.useMemo)(()=>"system"===e.type?[]:"custom"===e.type?e.template.projectFields.filter(({customField:e})=>e):(e.type,[]),[e]),{title:n,description:i,updatedAt:l}=(0,K.useMemo)(()=>{if("layout"===e.type){var t;return"table"===(t=e.viewType)?{title:"New table",description:"Start with a powerful spreadsheet style table to filter, sort and group your issues and pull requests. Easily switch to a board or roadmap layout at any time."}:"board"===t?{title:"New board",description:"Start with a board to spread your issues and pull requests across customizable columns. Easily switch to a table or roadmap layout at any time."}:"roadmap"===t?{title:"New roadmap",description:"Start with a roadmap for a high-level visualization of your project over time. Easily switch to a table or board layout at any time."}:{title:"",description:""}}return"system"===e.type?{title:e.template.title,description:e.template.shortDescription}:{title:e.template.projectTitle,description:e.template.projectShortDescription,updatedAt:e.template.projectUpdatedAt}},[e]);return(0,F.jsxs)("div",{className:Sr.templateDetails,children:[(0,F.jsxs)("div",{children:[(0,F.jsxs)("div",{children:[(0,F.jsx)(h_.A,{as:"h2",className:Sr.Heading_1,children:n}),"system"===e.type&&(0,F.jsxs)("span",{className:Sr.Box_5,children:[" \u2022 ","GitHub"]})]}),i&&(0,F.jsx)("p",{className:Sr.Box_5,children:i}),l&&(0,F.jsxs)("p",{className:Sr.Box_5,children:["Updated"," ",(0,nB.m)(new Date(l),{addSuffix:!0})," "]})]}),(0,F.jsxs)("div",{children:[(0,F.jsxs)(hM.A,{children:[(0,F.jsx)(hM.A.Label,{children:"Project name"}),(0,F.jsx)(br,{fullWidth:!0,children:(0,F.jsx)(gp.A,{autoComplete:"off",placeholder:n,value:a,onChange:e=>t(e.target.value),className:Sr.TextInput})})]}),"system"===e.type||"layout"===e.type?(0,F.jsx)(Su,{title:n,template:e}):null,"custom"===e.type&&(0,F.jsxs)("div",{className:Sr.Box_6,children:[(0,F.jsxs)("div",{className:Sr.pillRowStyles,children:[(0,F.jsxs)("div",{className:Sr.pillRowLabelStyles,children:[(0,F.jsx)(gn.A,{className:Sr.CounterLabel,children:e.template.projectViews.length}),"Views"]}),(0,F.jsx)("div",{className:Sr.pillContainerStyles,children:e.template.projectViews.map(e=>(0,F.jsxs)("div",{className:Sr.pillStyles,children:[(0,F.jsx)(lw.A,{icon:function(e){let t=lX[e];if(!t)throw new EnumValueError("getViewIcons",e,lX);return t}(e.viewType),className:Sr.pillIconStyles}),e.name]},e.name))})]}),(0,F.jsxs)("div",{className:Sr.pillRowStyles,children:[(0,F.jsxs)("div",{className:Sr.pillRowLabelStyles,children:[(0,F.jsx)(gn.A,{className:Sr.CounterLabel,children:r.length}),"Fields"]}),(0,F.jsx)("div",{className:Sr.pillContainerStyles,children:r.map(e=>(0,F.jsxs)("div",{className:Sr.pillStyles,children:[(0,F.jsx)(lw.A,{icon:IS(e.dataType),className:Sr.pillIconStyles}),e.name]},e.name))})]}),(0,F.jsxs)("div",{className:Sr.pillRowStyles,children:[(0,F.jsxs)("div",{className:Sr.pillRowLabelStyles,children:[(0,F.jsx)(gn.A,{className:Sr.CounterLabel,children:e.template.projectWorkflows.length}),"Workflows"]}),(0,F.jsx)("div",{className:Sr.pillContainerStyles,children:e.template.projectWorkflows.map(e=>(0,F.jsxs)("div",{className:Sr.pillStyles,children:[(0,F.jsx)(lw.A,{icon:ly.WorkflowIcon,className:Sr.pillIconStyles}),e.name]},e.name))})]}),(0,F.jsxs)("div",{className:Sr.pillRowStyles,children:[(0,F.jsxs)("div",{className:Sr.pillRowLabelStyles,children:[(0,F.jsx)(gn.A,{className:Sr.CounterLabel,children:e.template.projectCharts.length}),"Insights"]}),(0,F.jsx)("div",{className:Sr.pillContainerStyles,children:e.template.projectCharts.map(e=>(0,F.jsxs)("div",{className:Sr.pillStyles,children:[(0,F.jsx)(lw.A,{icon:ly.GraphIcon,className:Sr.pillIconStyles}),e.name]},e.name))})]})]})]})]})}function Sm(){let{postStats:e}=iN(),[,t]=cH(),{setIsTemplatesDialogOpen:a}=IC(),r=(0,K.useCallback)(()=>{t(e=>(e.delete(Sn),e.delete(IA),e.delete(IR),e.delete(IP),e)),a(!1)},[a,t]),n=Sl(),{isOrganization:i}=eU(),{data:l=null}=Iv({enabled:i}),s=function({organizationTemplates:e}){let[t]=cH(),a=t.get(IA),r=t.get(IR),n=t.get(IP);return(0,K.useMemo)(()=>{if(r){let e=eU().systemTemplates?.find(e=>e.id.toLowerCase()===r.toLowerCase());if(e)return{type:"system",template:e}}if(a){let t=e.find(e=>e.projectNumber===Number(a));if(t)return{type:"custom",template:t}}if(n&&(n===lK.Table||n===lK.Board||n===lK.Roadmap))return{type:"layout",viewType:n}},[a,n,e,r])}({organizationTemplates:l?.templates??[]}),o=mf().title,[d,u]=(0,K.useState)(o),c=!!s,{applyTemplate:m,isApplyingTemplate:p}=Iy(),h=(0,K.useCallback)(async t=>{await m({template:t,title:d,rollback:eC.l}),"custom"===t.type?e({name:tC,context:JSON.stringify({template:"org_templates",template_project_title:t.template?.projectTitle,template_project_number:t.template?.projectNumber}),ui:"template_dialog"}):e({name:tC,context:JSON.stringify({template:"layout"===t.type?t.viewType:t.template.id}),ui:"template_dialog"}),r()},[m,r,e,d]),f=ID({type:"layout",viewType:lK.Table}),g=ID({type:"layout",viewType:lK.Board}),y=ID({type:"layout",viewType:lK.Roadmap}),[x,b]=(0,K.useState)(""),{totalCount:v,showSearchResults:w,filteredTemplates:j}=function({searchQuery:e,organizationTemplates:t}){let a=Sl(),r=(0,K.useMemo)(()=>{let a=eU().systemTemplates?.filter(t=>t.title.toLowerCase().includes(e.toLowerCase()))??[];return{organizationTemplates:t?.templates.filter(t=>t.projectTitle.toLowerCase().includes(e.toLowerCase()))??[],systemTemplates:a}},[t,e]),n=a===Si.ALL||a===Si.ORG,i=a===Si.ALL||a===Si.FEATURED;return{totalCount:(n?r.organizationTemplates.length:0)+(i?r.systemTemplates.length:0),filteredTemplates:r,showSearchResults:e.length>0}}({searchQuery:x,organizationTemplates:l}),C=eU().systemTemplates??[],I=0===v?"No results":1===v?"1 result":`${v} results`,S=(0,nN.A)(e=>{(0,Il.i)(e,{assertive:!0})},100);return(0,K.useEffect)(()=>{x&&S(I)},[S,x,I]),(0,F.jsx)(Cw.l,{title:"Create project",height:"large",onClose:()=>{e({name:"templates_cancel"}),r()},renderHeader:({dialogLabelId:e,onClose:t})=>(0,F.jsx)(Cw.l.Header,{children:(0,F.jsxs)("div",{className:Sr.Box_11,children:[(0,F.jsxs)("div",{className:Sr.Box_12,children:[c&&(0,F.jsx)(cW,{to:{search:`?${Sn}=${n}`},"aria-label":"Back",children:(0,F.jsx)(lw.A,{icon:ly.ArrowLeftIcon,className:Sr.Box_5})}),(0,F.jsx)(Cw.l.Title,{id:e,children:"Create project"})]}),(0,F.jsx)(Cw.l.CloseButton,{onClose:()=>t("close-button")})]})}),renderBody:()=>(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(Cw.l.Body,{children:c&&s?(0,F.jsx)(Sc,{template:s,projectName:d,onChangeProjectName:u}):(0,F.jsxs)("div",{className:Sr.templateDetails,children:[(0,F.jsxs)(ys.c,{className:Sr.NavList,children:[(0,F.jsxs)(ys.c.Group,{title:"Project templates",children:[i&&(0,F.jsx)(ys.c.Item,{as:cW,"aria-current":n===Si.ALL&&"page",to:`?${Sn}=${Si.ALL}`,children:"All templates"}),(0,F.jsx)(ys.c.Item,{as:cW,"aria-current":n===Si.FEATURED&&"page",to:`?${Sn}=${Si.FEATURED}`,children:"Featured"}),i&&(0,F.jsx)(ys.c.Item,{as:cW,"aria-current":n===Si.ORG&&"page",to:`?${Sn}=${Si.ORG}`,children:"From your organization"})]}),(0,F.jsxs)(ys.c.Group,{title:"Start from scratch",children:[(0,F.jsx)(ys.c.Item,{as:cW,to:f,children:"Table"}),(0,F.jsx)(ys.c.Item,{as:cW,to:g,children:"Board"}),(0,F.jsx)(ys.c.Item,{as:cW,to:y,children:"Roadmap"})]})]}),(0,F.jsxs)("div",{children:[(0,F.jsxs)(hM.A,{className:Sr.FormControl,children:[(0,F.jsx)(hM.A.Label,{visuallyHidden:!0,children:"Search templates"}),(0,F.jsx)(gp.A,{block:!0,leadingVisual:ly.SearchIcon,placeholder:"Search templates",value:x,onChange:e=>b(e.target.value),trailingAction:x.length>0?(0,F.jsx)(gp.A.Action,{onClick:()=>b(""),icon:ly.XCircleFillIcon,"aria-label":"Clear search",className:Sr.Box_5}):void 0})]}),(0,F.jsx)(h_.A,{as:"h2",className:Sr.Heading_2,children:w?I:""}),n===Si.ALL&&(0,F.jsx)(Ss,{organizationTemplates:w?{templates:j.organizationTemplates}:l,systemTemplates:w?j.systemTemplates:C,previewTemplateCount:w?100:void 0,hideViewAll:w}),n===Si.FEATURED&&(0,F.jsx)(So,{systemTemplates:w?j.systemTemplates:C,hideHeading:w}),n===Si.ORG&&l&&(0,F.jsx)(Sd,{organizationTemplates:w?{templates:j.organizationTemplates}:l,hideBlankslate:w})]})]})}),(0,F.jsx)(Cw.l.Footer,{sx:{display:c&&s?void 0:"none"},children:c&&s?(0,F.jsx)(p4.Q,{variant:"primary",disabled:p,onClick:()=>h(s),children:"Create project"}):null})]}),className:Sr.Dialog})}function Sp(){let{showTemplateDialog:e}=eU(),{isTemplatesDialogOpen:t}=IC();return e&&t?(0,F.jsx)(Sm,{}):null}try{Ss.displayName||(Ss.displayName="AllTemplatesTab")}catch{}try{So.displayName||(So.displayName="FeaturedTemplatesTab")}catch{}try{Sd.displayName||(Sd.displayName="OrganizationTemplatesTab")}catch{}try{Su.displayName||(Su.displayName="DefaultTemplateImage")}catch{}try{Sc.displayName||(Sc.displayName="TemplateDetails")}catch{}try{Sm.displayName||(Sm.displayName="TemplateDialog")}catch{}try{Sp.displayName||(Sp.displayName="TemplateDialogWrapper")}catch{}var Sh=a(84688),Sf=a(2668),Sg=a(16255);let Sy=()=>(0,K.useContext)(mp),Sx={ButtonGroup:"index-module__ButtonGroup--NkC8r",Button_1:"index-module__Button_1--q2uyO",Box:"index-module__Box--kLjf_",Box_1:"index-module__Box_1--rA8th",topBarActions:"index-module__topBarActions--eL7RB",topBar:"index-module__topBar--G6D0n",topBarWithBorder:"index-module__topBarWithBorder--Ua447"},Sb={latestStatusUpdate:"latest-status-update-module__latestStatusUpdate--loPq5",RelativeTime:"latest-status-update-module__RelativeTime--IwfbM",SingleSelectToken:"latest-status-update-module__SingleSelectToken--9Y0t6"},Sv=()=>{let{latestStatusItem:e}=bs(),{openPaneInfo:t}=c7(),{hasWritePermissions:a}=eK(),{postStats:r}=iN(),[n,i]=(0,K.useState)(!1),l=e?.statusValue.status,s=(0,K.useCallback)(()=>{t(e?.id),r({name:"status_update_open_current",context:JSON.stringify(e?{id:e.id,status:e.statusValue.status?.name,startDate:e.statusValue.startDate,targetDate:e.statusValue.targetDate}:{})})},[e,t,r]);return a||l?(0,F.jsx)("div",{...(0,ey.G)("latest-status-update"),children:l?(0,F.jsxs)(p4.Q,{variant:"invisible",onClick:s,onMouseOver:()=>i(!0),onMouseLeave:()=>i(!1),"aria-label":`View latest ${l.name} status updated ${ak(new Date(e.updatedAt))}`,className:Sb.latestStatusUpdate,children:[n&&(0,F.jsxs)("span",{...(0,ey.G)("latest-status-update-token-button-text"),children:["Updated ",(0,F.jsx)(bE.A,{datetime:e.updatedAt,className:Sb.RelativeTime})," "]}),(0,F.jsx)(bN,{...(0,ey.G)("latest-status-update-token-button"),as:"span",option:l,className:Sb.SingleSelectToken})]}):(0,F.jsx)(p4.Q,{variant:"invisible",onClick:s,children:(0,F.jsx)(bk.A,{...(0,ey.G)("latest-status-update-null-button"),text:"Add status update",className:Sb.SingleSelectToken})})}):null};try{Sv.displayName||(Sv.displayName="LatestStatusUpdate")}catch{}let Sw=(0,K.memo)(function(){let{getChartLinkTo:e}=yV(),{postStats:t}=iN(),a=(0,K.useCallback)(()=>{t({name:"insights_view_open"})},[t]),r=(0,K.useRef)(null),[n,i]=(0,Sf.B)({contentRef:r,"aria-label":nK.insightsButton,direction:"sw",anchorSide:"outside-bottom"});return(0,F.jsxs)(p4.Q,{ref:r,to:e(0).url,onClick:a,...(0,ey.G)("project-insights-button"),"aria-label":nK.insightsButton,as:cW,className:Sx.Button_1,...n,children:[(0,F.jsx)(lw.A,{icon:ly.GraphIcon}),i]})}),Sj=(0,K.memo)(function(){let{openPaneInfo:e}=c7(),{postStats:t}=iN(),a=(0,K.useRef)(null),[r,n]=(0,Sf.B)({contentRef:a,"aria-label":nK.projectDetailsButton,direction:"sw",anchorSide:"outside-bottom"});return(0,F.jsxs)(p4.Q,{ref:a,onClick:()=>{e(),t({name:"description_show",ui:th})},"aria-label":nK.projectDetailsButton,className:Sx.Button_1,...(0,ey.G)("project-memex-info-button"),...r,children:[(0,F.jsx)(lw.A,{icon:ly.SidebarExpandIcon}),n]},"project-details-button")}),SC=(0,K.memo)(function(){let{projectNumber:e}=mw(),{feedbackLink:t,copyProjectPartialUrl:a}=eU(),{memex_automation_enabled:r}=iz(),n=mK(),[i,l]=(0,K.useState)(!1),{postStats:s}=iN(),{hasWritePermissions:o,isLoggedIn:d,canCopyAsTemplate:u}=eK(),c=(0,K.useCallback)(()=>{l(e=>!e)},[]),m=(0,K.useCallback)(()=>{c(),s({name:"feedback_open",ui:tf})},[s,c]),p=(0,K.useCallback)(()=>{c(),s({name:"docs_open",ui:tf})},[s,c]),h=(0,K.useCallback)(()=>{c(),s({name:"changelog_open",ui:tf})},[s,c]),f=(0,K.useCallback)(()=>{c(),s({name:"workflows_open"})},[s,c]),g=(0,K.useCallback)(()=>{s({name:tI,ui:tf})},[s]),y=(0,K.useCallback)(()=>{s({name:tS,ui:tf})},[s]),x=d&&u,b=(0,K.useMemo)(()=>{let a=[];o&&a.push(r&&(0,F.jsx)(SN,{to:le.generatePath(n),icon:ly.WorkflowIcon,text:"Workflows",onClick:f,testId:"automation-settings-button"},"workflows"),(0,F.jsx)(SN,{to:ls.generatePath(n),icon:ly.ArchiveIcon,text:"Archived items",onClick:c,testId:"archive-navigation-button"},"archive"),(0,F.jsx)(SN,{to:la.generatePath(n),icon:ly.GearIcon,text:"Settings",onClick:c,testId:"project-settings-button"},"settings")),d&&a.push((0,F.jsx)(ST,{dialogId:`copy-project-dialog-${e}`,icon:ly.CopyIcon,id:`topmenu-copy-project-dialog-${e}`,onSelect:g,...(0,ey.G)("copy-project-button"),children:"Make a copy"},"topMenuCopyProjectAsTemplateButton")),x&&a.push((0,F.jsx)(ST,{dialogId:`copy-as-template-dialog-${e}`,icon:ly.DuplicateIcon,id:`topmenu-copy-as-template-dialog-${e}`,onSelect:y,...(0,ey.G)("copy-as-template-button"),children:"Copy as template"},"topMenuCopyAsTemplateButton")),a.length&&a.push((0,F.jsx)(yu.W.Divider,{},"divider-write-permissions"));let i=eA("github-runtime")??"dotcom",l=eA("github-version-number"),s="enterprise"===i?`https://docs.github.com/enterprise-server@${"unknown"===l?"latest":l}/issues/planning-and-tracking-with-projects`:"https://docs.github.com/issues/planning-and-tracking-with-projects";return a.push((0,F.jsxs)(fi.l.Group,{variant:"subtle",children:[(0,F.jsx)(fi.l.GroupHeading,{children:"GitHub Projects"}),(0,F.jsx)(Sk,{href:"https://github.blog/changelog/label/projects/",icon:ly.RocketIcon,text:"What\u2019s new",onClick:h,testId:"whats-new-link"},"new"),(0,F.jsx)(Sk,{href:t,icon:ly.CommentIcon,text:"Give feedback",onClick:m,testId:"feedback-link"},"feedback"),(0,F.jsx)(Sk,{href:s,icon:ly.BookIcon,text:"GitHub Docs",onClick:p,testId:"docs-link"},"docs")]},"title-github-projects")),a},[o,d,x,h,t,m,p,r,f,c,e,g,y,n]),v=(0,K.useRef)(null),[w,j]=(0,Sf.B)({contentRef:v,"aria-label":nK.viewMoreOptions,direction:"sw",anchorSide:"outside-bottom",open:!i&&void 0});return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsxs)(p4.Q,{ref:v,...(0,ey.G)("project-menu-button"),...w,onClick:()=>l(e=>!e),"aria-label":nK.viewMoreOptions,className:Sx.Button_1,children:[(0,F.jsx)(lw.A,{icon:ly.KebabHorizontalIcon}),j]}),(0,F.jsx)(yu.W,{anchorRef:v,open:i,onOpenChange:l,children:(0,F.jsx)(yu.W.Overlay,{children:(0,F.jsx)(fi.l,{children:b})})},"project-menu"),(0,F.jsx)(Sg.Z,{children:(0,F.jsxs)("div",{children:[d&&(0,F.jsx)(Sh.x,{src:encodeURI(a)}),x&&(0,F.jsx)(Sh.x,{src:encodeURI(`${a}?copy_as_template=true`)})]})})]})}),SI=(0,K.memo)(function({isProjectPath:e}){let t=[];return t.push((0,F.jsx)(Sw,{})),e&&t.push((0,F.jsx)(Sj,{})),t.push((0,F.jsx)(SC,{})),(0,F.jsx)(v4.A,{className:Sx.ButtonGroup,children:t})}),SS=(0,K.memo)(function(){let{copyProjectPartialUrl:e}=eU(),{isLoggedIn:t}=eK(),{projectNumber:a}=mw(),{postStats:r}=iN(),n=Sy(),i=(0,K.useCallback)(()=>{r({name:tI,ui:"use_this_template_ui"})},[r]);return(0,F.jsxs)("div",{...(0,ey.G)("use-this-template-form"),className:Sx.Box,children:[(0,F.jsx)(p4.Q,{size:"medium",variant:"primary",...(0,ey.G)("use-this-template-button"),"aria-label":"Use this template","data-show-dialog-id":`copy-from-template-dialog-${a}`,onClick:i,children:"Use this template"}),(0,F.jsx)(Sg.Z,{children:(0,F.jsx)("div",{children:t&&(0,F.jsx)(Sh.x,{src:encodeURI(`${e}?template_id=${n}`)})})})]})}),Sk=({text:e,icon:t,testId:a,onClick:r,href:n})=>(0,F.jsxs)(fi.l.LinkItem,{role:"menuitem",href:n,target:"_blank",onClick:r,...(0,ey.G)(a),children:[(0,F.jsx)(fi.l.LeadingVisual,{children:(0,F.jsx)(t,{})}),e]}),SN=({text:e,icon:t,testId:a,onClick:r,to:n})=>(0,F.jsxs)(fi.l.LinkItem,{role:"menuitem",as:cW,to:n,onClick:r,...(0,ey.G)(a),children:[(0,F.jsx)(fi.l.LeadingVisual,{children:(0,F.jsx)(t,{})}),e]}),ST=({children:e,dialogId:t,icon:a,...r})=>(0,F.jsxs)(fi.l.Item,{role:"menuitem",onKeyPress:void 0,children:[(0,F.jsx)(fi.l.LeadingVisual,{children:(0,F.jsx)(a,{})}),(0,F.jsx)("button",{"data-show-dialog-id":t,className:Sx.Box_1,...r,children:e})]}),S_=(0,K.memo)(function({children:e,isProjectPath:t=!1}){let{isTemplate:a}=y7(),{isOrganization:r}=eU();return(0,F.jsxs)("div",{role:"navigation","aria-label":"Project",className:(0,vB.$)(Sx.topBar,{[Sx.topBarWithBorder]:!t}),...(0,ey.G)("top-bar"),children:[e,(0,F.jsx)("div",{style:{flex:1}}),(0,F.jsxs)("div",{className:Sx.topBarActions,children:[t&&!a&&(0,F.jsx)(Sv,{}),(0,F.jsx)(xd,{}),(0,F.jsx)(SI,{isProjectPath:t}),r&&a?(0,F.jsx)(SS,{}):null]})]})});try{Sw.displayName||(Sw.displayName="InsightsNavigationButton")}catch{}try{Sj.displayName||(Sj.displayName="ProjectDetailsButton")}catch{}try{SC.displayName||(SC.displayName="SettingsOverflowMenu")}catch{}try{SI.displayName||(SI.displayName="ProjectNavigationButtons")}catch{}try{SS.displayName||(SS.displayName="UseTemplateButton")}catch{}try{Sk.displayName||(Sk.displayName="ExternalLink")}catch{}try{SN.displayName||(SN.displayName="InternalLink")}catch{}try{ST.displayName||(ST.displayName="CopyDialogAction")}catch{}try{S_.displayName||(S_.displayName="TopBar")}catch{}let SA="settings-project-name",SR={Box:"memex-title-module__Box--LXEBF",Box_1:"memex-title-module__Box_1--CaeMG",IconButton:"memex-title-module__IconButton--B0p3Z",Box_1__hasWritePermissions:"memex-title-module__Box_1__hasWritePermissions--dBTI_",Octicon:"memex-title-module__Octicon--jlbD_",SanitizedHtml:"memex-title-module__SanitizedHtml--GzOwK",Label:"memex-title-module__Label--rpiZZ"},SP=()=>{let{hasWritePermissions:e}=eK(),{shortDescriptionHtml:t,titleHtml:a}=mf(),{isPublicProject:r,isClosed:n,isTemplate:i}=y7(),l=c$(),s=mK(),o=()=>{l(la.generatePath(s)),setTimeout(()=>document.getElementById(SA)?.focus())};return(0,F.jsxs)("div",{children:[(0,F.jsxs)("div",{className:SR.Box,children:[(0,F.jsxs)("div",{onClick:e?o:void 0,className:(0,vB.$)(SR.Box_1,{[SR.Box_1__hasWritePermissions]:e}),children:[n?(0,F.jsx)(SD,{}):null,(0,F.jsx)(lw.A,{icon:r&&i?ly.ProjectTemplateIcon:r?ly.GlobeIcon:ly.LockIcon,className:SR.Octicon}),(0,F.jsx)(p$,{as:"h1",className:SR.SanitizedHtml,children:a}),e&&(0,F.jsx)(fE.K,{id:"edit-project-name-button",icon:ly.PencilIcon,variant:"invisible",size:"small",onClick:o,"aria-label":"Edit project name",className:SR.IconButton})]}),i?(0,F.jsxs)(bD.A,{variant:"secondary",children:[" ",r?"Public":"Private"," template "]}):null]}),i&&(0,F.jsx)("div",{children:(0,F.jsx)(p$,{as:"div",className:"color-fg-muted",children:t})})]})},SD=()=>(0,F.jsx)(bD.A,{variant:"done",...(0,ey.G)("closed-project-label"),className:SR.Label,children:"Closed"});try{SP.displayName||(SP.displayName="MemexTitle")}catch{}try{SD.displayName||(SD.displayName="ClosedLabel")}catch{}let SE={Box:"route-title-module__Box--JGk6t",Octicon:"route-title-module__Octicon--NtaO3",Heading:"route-title-module__Heading--UT4Qm"},SM=({title:e})=>{let{returnToViewLinkTo:t}=iS();return(0,F.jsxs)("div",{className:SE.Box,children:[(0,F.jsx)(cW,{to:t,"aria-label":"Return to project view",children:(0,F.jsx)(lw.A,{icon:ly.ArrowLeftIcon,size:24,className:SE.Octicon})}),(0,F.jsx)(h_.A,{as:"h1",className:SE.Heading,children:e})]})};try{SM.displayName||(SM.displayName="RouteTitle")}catch{}let SB=(0,K.memo)(function(){let{postStats:e}=iN(),t=(0,J.zy)(),a=(0,K.useRef)(null),r=t.pathname;return(0,K.useEffect)(()=>{let t=a.current;if(r!==t){let a=ld(r);e({name:"path_change",context:JSON.stringify({currentPath:r,previousPath:t,currentBestMatchRoute:a?a.path:"<unknown_route>"})})}a.current=r},[r,e]),null});try{SB.displayName||(SB.displayName="TrackPathChanges")}catch{}let SL=l5(async()=>{let e=nP("memex-notification-subscription-create-api-data");await ix(e.url,{method:"POST"})},500),SF=l5(async()=>{let e=nP("memex-notification-subscription-destroy-api-data");await ix(e.url,{method:"DELETE"})},500),SO=(0,K.memo)(function({children:e}){let[t,a]=(0,K.useState)(()=>eA("memex-viewer-subscribed")??!1),[r,n]=(0,K.useState)(!1),i=(0,K.useCallback)(async()=>{n(!0),a(!0);try{await SL()}catch(e){throw a(t),e}finally{n(!1)}},[t]),l=(0,K.useCallback)(async()=>{n(!0),a(!1);try{await SF()}catch(e){throw a(t),e}finally{n(!1)}},[t]);return(0,F.jsx)(bz.Provider,{value:(0,K.useMemo)(()=>({subscribe:i,unsubscribe:l,viewerIsSubscribed:t,isLoading:r,setViewerIsSubscribed:a}),[r,i,l,t,a]),children:e})});try{SO.displayName||(SO.displayName="NotificationSubscriptionsProvider")}catch{}async function SG(e){let t=nP("memex-status-create-api-data"),{data:a}=await ix(t.url,{method:"POST",body:e});return a}async function SV(e){let t=nP("memex-status-destroy-api-data");await ix(`${t.url}/${e}`,{method:"DELETE"})}async function S$(){let e=nP("memex-statuses-api-data"),{data:t}=await ig(e.url);return t}async function SW(e){let t=nP("memex-status-update-api-data"),{data:a}=await ix(t.url,{method:"PUT",body:e});return a}let Sz=(0,K.memo)(function({children:e}){let{loggedInUser:t}=eU(),{sidePanelState:a}=c7(),{statusUpdateDrafts:r,statusUpdateDraftsDispatch:n}=bm(),{setViewerIsSubscribed:i}=bH(),[l,s]=(0,K.useState)([]),[o,d]=(0,K.useState)([]),[u,c]=(0,K.useState)(!0),[m,p]=(0,K.useState)(()=>eA("latest-memex-project-status")),h=(0,K.useRef)(!1),[f]=cH(),g=f.get(dY),y=a?.type==="info";(0,K.useEffect)(()=>{!h.current&&y&&(h.current=!0,c(!0),S$().then(e=>{s(e.statuses),d(e.form.status.options),h.current=!1,c(!1)}))},[s,y]),(0,K.useEffect)(()=>{y&&!u&&p(l[0])},[u,l,y]);let x=(0,K.useCallback)(async({body:e,startDate:a,targetDate:r,status:n})=>{if(!t)throw Error("Must be logged in to create a status update");let{status:l,viewerIsSubscribed:o}=await SG({body:e,startDate:a?aN(a):"",targetDate:r?aN(r):"",statusId:n?.id??null});i(o),s(e=>[l,...e])},[t,i]),b=(0,K.useCallback)(async e=>{s(t=>t.filter(t=>t.id!==e));try{await SV(e)}catch{s(l)}},[l]),v=(0,K.useCallback)(async({id:e,body:a,startDate:r,targetDate:n,status:o})=>{if(!e)throw Error("Unable to determine id of status");if(!t)throw Error("Must be logged in to update a status update");let d=l.findIndex(t=>t.id===e);if(!l[d])throw Error("Unable to find memex status");let u=[...l],{status:c,viewerIsSubscribed:m}=await SW({id:e,body:a,startDate:r?aN(r):"",targetDate:n?aN(n):"",statusId:o?.id??null});return u[d]=c,i(m),s(u),c},[t,l,i]);return(0,F.jsx)(bo.Provider,{value:(0,K.useMemo)(()=>({statusUpdateDrafts:r,statusUpdateDraftsDispatch:n}),[r,n]),children:(0,F.jsx)(bl.Provider,{value:(0,K.useMemo)(()=>({memexStatusItems:l,statusOptions:o,addStatusUpdate:x,deleteStatusUpdate:b,updateStatusUpdate:v,isLoading:u,statusUpdateIdParam:g,latestStatusItem:m}),[l,o,x,b,v,u,g,m]),children:e})})});try{Sz.displayName||(Sz.displayName="MemexStatusItemsProvider")}catch{}function SH(e){if(Number.isNaN(e)||!Number.isFinite(e)||Number.isInteger(e))return 0;let t=e.toString().split(".")[1]?.replace(/0+$/,"");return t?t.length:0}let SU=(0,K.createContext)(null),Sq=()=>{let e=(0,K.useContext)(SU);if(!e)throw Error("useAggregationSettings must be used within a AggregationSettingsContext");return e},SK=(0,K.memo)(function({children:e}){let{currentView:t,viewStateDispatch:a}=iS(),{allColumns:r}=i5(),n=(0,K.useCallback)((e,t,r)=>{a({type:lc.AddFieldAggregation,viewNumber:e,fieldOperation:t,column:r})},[a]),i=(0,K.useCallback)((e,t,r)=>{a({type:lc.RemoveFieldAggregation,viewNumber:e,fieldOperation:t,column:r})},[a]),l=(0,K.useCallback)(e=>{a({type:lc.ToggleItemsCount,viewNumber:e})},[a]),s=function(){let{memex_table_without_limits:e}=iz();if(e)return function(){let e=ui();return(0,oY.I)({queryKey:sW(e),enabled:!1,queryFn:()=>({groups:{}})})}()}(),o=s?.data,d=(0,K.useCallback)(e=>{let a=[],n=r.filter(e=>e.dataType===eN.Number).map(e=>e.id),i={};for(let r of t?.localViewStateDeserialized.aggregationSettings.sum??[]){let t={name:r.name,sum:0,maxDecimalPlaces:0};for(let a of e){let e=a.columns[r.id],l=n.indexOf(r.id);i[r.name]=l,t.sum+=e?.value??0,t.maxDecimalPlaces=Math.max(t.maxDecimalPlaces,SH(e?.value??0))}a.push(t)}return a.sort((e,t)=>(i[e.name]??0)-(i[t.name]??0))},[t?.localViewStateDeserialized.aggregationSettings.sum,r]),u=(0,K.useCallback)(e=>{let a=[],r=o?.groups[e];if(r)for(let e of r){let r=t?.localViewStateDeserialized.aggregationSettings.sum?.find(t=>t.id===e.fieldId);if(r){let t={name:r.name,sum:e.value,maxDecimalPlaces:SH(e.value)};a.push(t)}}return a},[t?.localViewStateDeserialized.aggregationSettings.sum,o?.groups]);return(0,F.jsx)(SU.Provider,{value:(0,K.useMemo)(()=>({hideItemsCount:!!t?.localViewStateDeserialized.aggregationSettings.hideItemsCount,sum:t?.localViewStateDeserialized.aggregationSettings.sum??[],toggleItemsCount:l,addFieldAggregation:n,removeFieldAggregation:i,isAggregationSettingsDirty:t?.isAggregationSettingsDirty??!1,getAggregatesForItems:d,getAggregatesForGroupId:u}),[t?.localViewStateDeserialized.aggregationSettings.hideItemsCount,t?.localViewStateDeserialized.aggregationSettings.sum,t?.isAggregationSettingsDirty,l,n,i,u,d]),children:e})});try{SK.displayName||(SK.displayName="AggregationSettingsProvider")}catch{}var SQ=a(81857),SJ=a(80688);let SX=(0,SJ.A)("localStorage"),SY="projects.collapsedGroups",SZ=()=>{let e=SX.getItem(SY);if(!e)return{};try{let t=JSON.parse(e);if("object"==typeof t&&null!==t)return t;return SX.removeItem(SY),{}}catch{return SX.removeItem(SY),{}}},S0=e=>{let t=(0,SQ.A)(e,e=>0!==Object.keys((0,SQ.A)(e,e=>0!==e.length)).length);0===Object.keys(t).length?SX.removeItem(SY):SX.setItem(SY,JSON.stringify(t))},S1=()=>{let{projectNumber:e}=mw(),[t,a]=(0,K.useState)(()=>SZ()[e]??{});return(0,K.useEffect)(()=>{S0({...SZ(),[e]:t})},[e,t]),[t,a]},S2=[],S5=(0,K.memo)(function({children:e}){let{currentView:t,viewStateDispatch:a}=iS(),[r,n]=S1(),i=t?.number??-1,l=(0,K.useCallback)((e,t)=>{a({type:lc.SetHorizontalGroupedBy,viewNumber:e,column:t}),n(e=>({...e,[i]:[]}))},[a,n,i]),s=(0,K.useCallback)(e=>{a({type:lc.ClearHorizontalGroupedBy,viewNumber:e})},[a]),o=(0,K.useCallback)(e=>{n(t=>{let a=t[i]??[];return a.includes(e)?{...t,[i]:a.filter(t=>t!==e)}:{...t,[i]:[...a,e]}})},[i,n]);return(0,F.jsx)(d8.Provider,{value:(0,K.useMemo)(()=>({groupedByColumnId:t?.localViewStateDeserialized.horizontalGroupByColumns[0]?.id,groupedByColumn:t?.localViewStateDeserialized.horizontalGroupByColumns[0],setGroupedBy:l,clearGroupedBy:s,isGroupedByDirty:t?.isHorizontalGroupedByDirty??!1,collapsedGroups:r[i]??S2,toggleGroupCollapsed:o}),[s,t?.isHorizontalGroupedByDirty,t?.localViewStateDeserialized.horizontalGroupByColumns,l,r,o,i]),children:e})});try{S5.displayName||(S5.displayName="HorizontalGroupedByProvider")}catch{}function S3(e){return e===lK.Roadmap||e===lK.Table}function S4(e){return e===l$.Roadmap||e===l$.Table}function S6(e,t){let a=lY(e);if(!S3(a))throw Error("Column widths can only be applied to table or roadmap views");return t[a]?.columnWidths??{}}function S8(e,t,a){let r=lY(t);if(!S3(r))throw Error("Column widths can only be applied to table or roadmap views");return{...e,layoutSettings:{...e.layoutSettings,[r]:{...e.layoutSettings[r],columnWidths:{...a}}}}}function S7(e){return e!==lH&&(o1(e)||oZ(e))}function S9(e){return"none"!==e&&"number"==typeof e}function ke(e){return!!(e&&e.dateFields&&e.dateFields.length>0)}let kt=lU.Month;function ka(e){return e?.roadmap?.zoomLevel??kt}function kr(e){return[e[0]||lH,e[1]||lH]}function kn(e){return e.map(t=>{let{startDate:a,endDate:r}=az({startDate:t.startDate,duration:t.duration});return`${t.title}: ${n$(a,r,e.length>1?"MMM d":"EEE, MMM d")}`}).join(", ")}let ki=({onResize:e}={})=>{let t=hZ(x_()??null),a=(0,nk.M)(e);return(0,pk.N)(()=>{a.current?.(t)},[t,a]),t},kl=(0,K.createContext)(null),ks=(0,K.createContext)(null),ko=()=>{let e=(0,K.useContext)(kl);if(!e)throw Error("useRoadmapSettings must be used within a RoadmapSettingsContext");return e},kd=()=>{let e=(0,K.useContext)(ks);if(!e)throw Error("useRoadmapSessionSettings must be used within a RoadmapSessionSettingsContext");return e},ku=(0,K.createContext)(null),kc=()=>{let e=(0,K.useContext)(ku);return(0,ee.A)(null!=e,"useRoadmapTableWidth must be used within a RoadmapTableWidthContext"),e},km=(0,K.createContext)(null),kp=()=>{let e=(0,K.useContext)(km);return(0,ee.A)(null!=e,"useRoadmapTotalFixedColumnWidth must be used within a RoadmapTotalFixedColumnWidthContext"),e},kh=(0,K.createContext)(null),kf=()=>{let e=(0,K.useContext)(kh);return(0,ee.A)(null!=e,"useRoadmapZoomLevel must be used within a RoadmapZoomLevelContext"),e},kg=(0,K.createContext)(null),ky=()=>{let e=(0,K.useContext)(kg);return(0,ee.A)(null!=e,"useRoadmapSetZoomLevel must be used within a RoadmapSetZoomLevelContext"),e},kx="row-drag-handle",kb="add-column";function kv(e){return e.id===kx}function kw(){let{clientWidth:e}=ki(),{memex_small_viewport_a11y:t}=iz();return t?{isTableNarrow:(e??0)<544}:{isTableNarrow:!1}}var kj=a(96339);let kC=()=>(0,F.jsx)(kj.U,{keys:"delete"}),kI=()=>f_()?null:(0,F.jsx)(kj.U,{keys:"e"});var kS=a(26109);let kk=(e,t)=>e.prioritizedIndex-t.prioritizedIndex;function kN(e,t,a,r,n,i){let l=a.contentType,s=r.contentType;if(l===eJ.RedactedItem&&s===eJ.RedactedItem)return 0;if(l===eJ.RedactedItem&&s!==eJ.RedactedItem)return n?-1:1;if(l!==eJ.RedactedItem&&s===eJ.RedactedItem)return n?1:-1;if(0===e.length&&t.length>0)return n?-1:1;if(e.length>0&&0===t.length)return n?1:-1;for(let a=0;a<e.length;a++){if(a>=t.length)return 1;let r=e[a],n=t[a];if("string"==typeof r&&"string"==typeof n?r.toLowerCase()!==n.toLowerCase():r!==n)return("string"==typeof r&&"string"==typeof n?r.toLowerCase()>n.toLowerCase():r>n)?1:-1}return t.length>e.length?-1:i?0:kk(a,r)}function kT(e,t,a,r){return kN(e.columns.Assignees?.map(e=>e.login)??[],t.columns.Assignees?.map(e=>e.login)??[],e,t,a,r)}function k_(e,t,a,r,n,i){let l=a.contentType,s=r.contentType;return l===eJ.RedactedItem&&s===eJ.RedactedItem?0:l===eJ.RedactedItem&&s!==eJ.RedactedItem?n?-1:1:l!==eJ.RedactedItem&&s===eJ.RedactedItem?n?1:-1:void 0!==e&&void 0!==t&&e!==t?e-t:void 0===e&&void 0!==t?n?-1:1:void 0!==e&&void 0===t?n?1:-1:i?0:kk(a,r)}function kA(e,t,a,r,n,i){let l=a.contentType,s=r.contentType;if(l===eJ.RedactedItem&&s===eJ.RedactedItem)return 0;if(l===eJ.RedactedItem&&s!==eJ.RedactedItem)return n?-1:1;if(l!==eJ.RedactedItem&&s===eJ.RedactedItem)return n?1:-1;if(""===e&&""!==t)return n?-1:1;if(""!==e&&""===t)return n?1:-1;let o=e.localeCompare(t);return 0!==o?o:i?0:kk(a,r)}function kR(e,t,a,r){return kA(e.columns[eT.IssueType]?.name??"",t.columns[eT.IssueType]?.name??"",e,t,a,r)}function kP(e,t,a,r){return kN(e.columns.Labels?.map(e=>e.nameHtml)??[],t.columns.Labels?.map(e=>e.nameHtml)??[],e,t,a,r)}function kD(e,t,a,r){return kN(e.columns["Linked pull requests"]?.map(e=>e.number)??[],t.columns["Linked pull requests"]?.map(e=>e.number)??[],e,t,a,r)}function kE(e,t,a,r){return kA(e.columns.Milestone?.title??"",t.columns.Milestone?.title??"",e,t,a,r)}function kM(e,t,a,r){let n=e.columns[eT.ParentIssue],i=t.columns[eT.ParentIssue];return kA(n?.title||"",i?.title||"",e,t,a,r)}function kB(e,t,a,r){return kA(e.columns.Repository?.name??"",t.columns.Repository?.name??"",e,t,a,r)}function kL(e,t,a,r){return kN(e.columns.Reviewers?.map(e=>e.reviewer.name)??[],t.columns.Reviewers?.map(e=>e.reviewer.name)??[],e,t,a,r)}function kF(e,t,a,r){let n=e.columns[eT.SubIssuesProgress],i=t.columns[eT.SubIssuesProgress];return k_(n?.total===0?void 0:n?.percentCompleted,i?.total===0?void 0:i?.percentCompleted,e,t,a,r)}function kO(e,t,a,r){return kA(a_(e.columns.Title),a_(t.columns.Title),e,t,a,r)}let kG=(e,t)=>0;function kV(e){if(!rk(e.dataType))return kG;switch(e.dataType){case eN.Title:return kO;case eN.Assignees:return kT;case eN.Labels:return kP;case eN.LinkedPullRequests:return kD;case eN.Reviewers:return kL;case eN.Milestone:return kE;case eN.Repository:return kB;case eN.IssueType:return kR;case eN.ParentIssue:return kM;case eN.SubIssuesProgress:return kF;case eN.Text:return(t,a,r,n)=>(function(e,t,a,r,n){let i=ag(e.columns[a.id]),l=ag(t.columns[a.id]);return kA(i?.raw??"",l?.raw??"",e,t,r,n)})(t,a,e,r,n);case eN.Number:return(t,a,r,n)=>(function(e,t,a,r,n){let i=ay(e.columns[a.id]),l=ay(t.columns[a.id]);return k_(i?.value,l?.value,e,t,r,n)})(t,a,e,r,n);case eN.Date:return(t,a,r,n)=>(function(e,t,a,r,n){let i=aw(e.columns[a.id]),l=aw(t.columns[a.id]);return k_(i?.value.getTime(),l?.value.getTime(),e,t,r,n)})(t,a,e,r,n);case eN.SingleSelect:return(t,a,r,n)=>(function(e,t,a,r,n){let i=ax(e.columns[a.id]),l=ax(t.columns[a.id]),s=i?.id||"",o=l?.id||"",d=a.settings.options;if(!d)return 0;let u=d.findIndex(e=>e.id===s),c=d.findIndex(e=>e.id===o);return e.contentType===eJ.RedactedItem&&t.contentType!==eJ.RedactedItem?r?-1:1:e.contentType!==eJ.RedactedItem&&t.contentType===eJ.RedactedItem?r?1:-1:-1===u&&-1!==c?r?-1:1:-1!==u&&-1===c?r?1:-1:u>c?1:u<c?-1:n?0:kk(e,t)})(t,a,e,r,n);case eN.Iteration:return(t,a,r,n)=>(function(e,t,a,r,n){let i=ax(e.columns[a.id]),l=ax(t.columns[a.id]),s=i?.id||"",o=l?.id||"",d=aK(a);if(!d.length)return 0;if(e.contentType===eJ.RedactedItem&&t.contentType!==eJ.RedactedItem)return r?-1:1;if(e.contentType!==eJ.RedactedItem&&t.contentType===eJ.RedactedItem)return r?1:-1;let u=d.find(e=>e.id===s),c=d.find(e=>e.id===o);if(!u&&c)return r?-1:1;if(u&&!c)return r?1:-1;if(u&&c){let e=aZ(u,c);if(0!==e)return e}return n?0:kk(e,t)})(t,a,e,r,n);default:tA(e.dataType)}}let k$=e=>(t,a)=>{for(let{column:r,direction:n}of e){let e="desc"===n,i=kV(r)(t,a,e,!0);if(e&&(i*=-1),0!==i)return i}return 0===e.length?0:kk(t,a)},kW=e=>"overItemGroup"in e&&void 0!==e.overItemGroup,kz=e=>"overItem"in e&&void 0!==e.overItem;async function kH({memexProjectItemId:e}){let t=new URL(nP("memex-item-suggested-issue-types-api-data").url,window.location.origin);t.searchParams.set("memexProjectItemId",`${e}`);let{data:a}=await ig(t);return a}let kU={ErrorToast:"error-toast",Alert:"alert"},kq={Success:"success",Failure:"failure",Pending:"pending"},kK=(e,t)=>(0,F.jsxs)(F.Fragment,{children:["Please create the ",(0,F.jsx)("code",{children:e.title})," milestone in the"," ",(0,F.jsx)("a",{href:`${t.url}/milestones`,children:t.nameWithOwner})," repository before adding to this milestone group."]}),kQ=(e,t)=>{let a=t.nameWithOwner.split("/")[0],r=t.url.replace(t.nameWithOwner,""),n=`${r}${a}`;return(0,F.jsxs)(F.Fragment,{children:["There is no ",(0,F.jsx)("code",{children:e.name})," issue type in the ",(0,F.jsx)("a",{href:n,children:a})," organization."]})},kJ=async(e,t)=>{if(!t)return{status:kq.Success};let a={itemId:e.id,columnId:eT.Milestone};if(e.contentType===eJ.DraftIssue)return{status:kq.Failure,action:kU.Alert,alertOptions:nZ.Milestone.Alerts.NeedsConversion,stats:{...a,status:te.FAILURE}};if(e.columns.Milestone&&e.columns.Milestone.id===t.id)return{status:kq.Success};let r=(await uz({memexProjectItemId:e.id})).suggestions.find(e=>e.title===t.title);return r?{status:kq.Success,stats:{...a,status:te.SUCCESS},updateColumnActionOverride:{dataType:eN.Milestone,value:r}}:{status:kq.Failure,action:kU.Alert,alertOptions:{...nZ.Milestone.Alerts.NeedsTransfer,content:kK(t,e.columns.Repository)},stats:{...a,status:te.FAILURE}}},kX=async(e,t)=>{if(!t)return{status:kq.Success};let a={itemId:e.id,columnId:eT.IssueType};if(e.contentType===eJ.DraftIssue)return{status:kq.Failure,action:kU.Alert,alertOptions:nZ.IssueType.Alerts.NeedsConversion,stats:{...a,status:te.FAILURE}};if(e.contentType===eJ.PullRequest)return{status:kq.Failure,action:kU.Alert,alertOptions:nZ.IssueType.Alerts.CannotAssignPulls,stats:{...a,status:te.FAILURE}};if(e.columns[eT.IssueType]?.id===t.id)return{status:kq.Success};let r=[];try{r=(await kH({memexProjectItemId:e.id})).suggestions}catch(t){let e=t instanceof ApiError?t.message:nH.genericErrorMessage;return{status:kq.Failure,action:kU.Alert,alertOptions:{...nZ.IssueType.Alerts.NeedsTransfer,content:e},stats:{...a,status:te.FAILURE}}}let n=r.find(e=>e.name===t.name);return n?{status:kq.Success,stats:{...a,status:te.SUCCESS},updateColumnActionOverride:{dataType:eN.IssueType,value:n}}:0===r.length?{status:kq.Failure,action:kU.Alert,alertOptions:nZ.IssueType.Alerts.NoTypesForRepo,stats:{...a,status:te.FAILURE}}:{status:kq.Failure,action:kU.Alert,alertOptions:{...nZ.IssueType.Alerts.NeedsTransfer,content:kQ(t,e.columns.Repository)},stats:{...a,status:te.FAILURE}}},kY=e=>(0,F.jsxs)("div",{children:["You can transfer this issue to a different repository from the\xa0",(0,F.jsx)(pw.A,{inline:!0,target:"_blank",href:e,children:"issue page"}),"."]}),kZ=(e,t)=>{if(!t)return{status:kq.Success};let a={itemId:e.id,columnId:eT.Repository,status:te.FAILURE};return e.contentType===eJ.DraftIssue?{status:kq.Failure,action:kU.Alert,alertOptions:nZ.Repository.Alerts.NeedsConversion,stats:a}:e.contentType===eJ.PullRequest?{status:kq.Failure,action:kU.Alert,alertOptions:nZ.Repository.Alerts.CannotTransferPulls,stats:a}:e.contentType===eJ.Issue&&e.columns.Repository?.nameWithOwner!==t.nameWithOwner&&e.content&&"url"in e.content?{status:kq.Failure,action:kU.Alert,alertOptions:{...nZ.Repository.Alerts.IssueNeedsTransfer,content:kY(e.content.url)},stats:a}:{status:kq.Success}},k0=(e,t)=>t&&(e.contentType===eJ.DraftIssue||e.contentType===eJ.PullRequest)?{status:kq.Failure,action:kU.ErrorToast,toastOptions:ie.toasts.draftAndPullsNotSupported,stats:{status:te.FAILURE,itemId:e.id,columnId:eT.ParentIssue}}:{status:kq.Success};async function k1(e,t){switch(t.dataType){case eN.Repository:return kZ(e,t.value);case eN.Milestone:return await kJ(e,t.value);case eN.IssueType:return kX(e,t.value);case eN.ParentIssue:return k0(e,t.value)}return{status:kq.Success}}let k2=(0,K.createContext)(null),k5=e=>{let[t,a]=(0,K.useState)(!1);(0,K.useEffect)(()=>{let e=e=>{a(e.ctrlKey)};return window.addEventListener("mousedown",e),window.addEventListener("mousemove",e),()=>{window.removeEventListener("mousedown",e),window.removeEventListener("mousemove",e)}}),(0,K.useEffect)(()=>{let e=e=>{a(e.ctrlKey)};return window.addEventListener("keydown",e),window.addEventListener("keyup",e),()=>{window.removeEventListener("keydown",e),window.removeEventListener("keyup",e)}});let r=(0,K.useMemo)(()=>({ctrlKey:t}),[t]);return(0,F.jsx)(k2.Provider,{value:r,children:e.children})},k3=()=>{let e=(0,K.useContext)(k2);if(!e)throw Error("useKeyPress can only be accessed from a KeyPressProvider component");return e};try{k2.displayName||(k2.displayName="KeyPressContext")}catch{}let k4={Header:"alert-dialog-module__Header--EGZD2"},k6={fontSize:1,p:3,pt:0,color:"fg.muted",flexGrow:1},k8={display:"flex",m:3,mt:0,button:{fontSize:1,py:"5px",px:3,ml:"auto"}},k7={fontSize:3,fontWeight:"bold",py:"6px",px:2,flexGrow:1},k9=({children:e})=>(0,F.jsx)(lx.A,{sx:k6,children:e}),Ne=({footerButtons:e})=>(0,F.jsx)(lx.A,{sx:k8,children:(0,F.jsx)(Cw.l.Buttons,{buttons:e??[]})}),Nt=({title:e,onClose:t,dialogLabelId:a})=>{let r=(0,K.useCallback)(()=>{t("close-button")},[t]);return(0,F.jsxs)(xP.A,{className:k4.Header,children:[(0,F.jsx)(xP.A.Item,{sx:k7,id:a,children:e}),(0,F.jsx)(Cw.l.CloseButton,{onClose:r})]})},Na=({children:e,confirmButtonContent:t="OK",onClose:a,title:r})=>{let n=(0,K.useCallback)(()=>{a("confirm")},[a]);return(0,F.jsx)(Cw.l,{title:r,role:"alertdialog",width:"medium",onClose:a,footerButtons:[{buttonType:"primary",content:t,onClick:n}],renderBody:k9,renderFooter:Ne,renderHeader:Nt,children:e})};try{k9.displayName||(k9.displayName="SingleConfirmBody")}catch{}try{Ne.displayName||(Ne.displayName="SingleConfirmFooter")}catch{}try{Nt.displayName||(Nt.displayName="SingleConfirmHeader")}catch{}try{Na.displayName||(Na.displayName="AlertDialog")}catch{}let Nr=()=>{let{theme:e,colorMode:t,dayScheme:a,nightScheme:r}=(0,z.DP)();return(0,K.useCallback)(n=>(function(e,{content:t,...a}){return new Promise(r=>{let n=document.createElement("div"),i=(0,$.H)(n);i.render((0,F.jsx)(K.StrictMode,{children:(0,F.jsx)(z.NP,{...e,children:(0,F.jsx)(H.A,{display:"contents",children:(0,F.jsx)(Na,{...a,onClose:e=>{i.unmount(),r("confirm"===e)},children:t})})})}))})})({theme:e,colorMode:t,dayScheme:a,nightScheme:r},n),[e,t,a,r])},Nn={title:nH.cannotEditTitle,content:nH.cannotEditItemContent,confirmButtonContent:nH.confirmDialog},Ni=()=>{let e=Nr(),t=(0,uX.S)(),{addToast:a}=lV(),{postStats:r}=iN(),n=(0,K.useCallback)((e,t,a)=>{r({name:"item_drag_and_drop",context:e,memexProjectItemId:t,memexProjectColumnId:a})},[r]),{memex_group_by_multi_value_changes:i}=iz(),{ctrlKey:l}=k3();return{getUpdateForGroupDropEvent:(0,K.useCallback)(async r=>{if(!kW(r))return;let s=function(e,t,a={memex_group_by_multi_value_changes:!1,ctrlKeyPressed:!1}){switch((0,ee.A)(e.dataType!==eN.Labels,"Drag and drop not yet supported for labels"),e.dataType){case eN.Iteration:{let t="group"===e.kind?{id:e.value.iteration.id}:void 0;return{dataType:e.dataType,memexProjectColumnId:e.value.columnId,value:t}}case eN.SingleSelect:{let t="group"===e.kind?{id:e.value.option.id}:void 0;return{dataType:e.dataType,memexProjectColumnId:e.value.columnId,value:t}}case eN.Text:{let t="group"===e.kind?e.value.text.raw:void 0;return{dataType:e.dataType,memexProjectColumnId:e.value.columnId,value:t}}case eN.Number:{let t="group"===e.kind?e.value.number:void 0;return{dataType:e.dataType,memexProjectColumnId:e.value.columnId,value:t}}case eN.Date:{let t="group"===e.kind?e.value.date:void 0;return{dataType:e.dataType,memexProjectColumnId:e.value.columnId,value:t}}case eN.Milestone:case eN.IssueType:case eN.ParentIssue:case eN.Repository:return{dataType:e.dataType,value:"group"===e.kind?e.value:void 0};case eN.Assignees:{let r="group"===e.kind?e.value:[];if(r.length>0&&a.memex_group_by_multi_value_changes)for(let e of t.Assignees||[])r.find(t=>t.id===e.id)||r.push(e);return{dataType:e.dataType,value:r}}default:tA(e)}}(r.overItemGroup.sourceObject,r.activeItem.columns,{memex_group_by_multi_value_changes:i,ctrlKeyPressed:l}),o=await k1(r.activeItem,s);if(o.stats&&n(o.stats.status,o.stats.itemId,o.stats.columnId),o.updateColumnActionOverride&&(s=Object.assign({},s,o.updateColumnActionOverride)),o.status===kq.Failure&&o.action===kU.Alert)await e(o.alertOptions);else if(o.status===kq.Failure&&o.action===kU.ErrorToast)a(o.toastOptions);else if(o.status!==kq.Pending||await t(o.confirmOptions))return s},[a,e,t,l,i,n]),handleGroupDropRequestError:(0,K.useCallback)((t,r)=>am(t)?e(Nn):ac(t)?r?e({title:"Item can't be moved",content:t.message}):a({message:t.message,type:nF.error}):void 0,[e,a])}},Nl=(0,K.createContext)(null),Ns=(0,K.memo)(function({children:e}){let[t,a]=(0,K.useState)(void 0),r=(0,K.useCallback)((e,t,r)=>{let n={validationMessage:e,rowId:t,colId:r};a(e=>void 0!==e&&rn(e,n)?e:n)},[]),n=(0,K.useCallback)(()=>{a(void 0)},[]),i=(0,K.useMemo)(()=>({validationState:t,setValidationMessage:r,clearValidationMessage:n}),[n,r,t]);return(0,F.jsx)(Nl.Provider,{value:i,children:e})});function No(e,t){let a;let r=(0,K.useContext)(Nl);if(!r)throw Error("Wrap use of `useCellValidationMessage` in `CellValidationContext` provider");return r.validationState&&r.validationState.rowId===e&&r.validationState.colId===t&&(a=r.validationState.validationMessage),{validationMessage:a,setValidationMessage:r.setValidationMessage,clearValidationMessage:r.clearValidationMessage,validationMessageId:a&&"table-cell-validation-message"}}try{Nl.displayName||(Nl.displayName="CellValidationContext")}catch{}try{Ns.displayName||(Ns.displayName="CellValidationContextProvider")}catch{}let Nd=(0,K.createContext)(null),Nu=(0,K.createContext)(null),Nc=(0,K.createContext)(null),Nm=(0,K.createContext)(void 0),Np=(0,K.createContext)(null),Nh=(0,K.createContext)(null),Nf=(0,K.createContext)(null),Ng=(0,K.createContext)(null),Ny=(0,K.createContext)(0),Nx=e=>(0,F.jsx)(Nd.Provider,{value:e.table.state,children:(0,F.jsx)(Nc.Provider,{value:e.table.state.overColumn,children:(0,F.jsx)(Nm.Provider,{value:e.table.state.selectedRowIds,children:(0,F.jsx)(Np.Provider,{value:e.table.state.sortBy,children:(0,F.jsx)(Nh.Provider,{value:e.table.state.rowMenuShortcutOrigin,children:(0,F.jsx)(Nf.Provider,{value:e.table.state.columnResizing,children:(0,F.jsx)(Ng.Provider,{value:e.table,children:(0,F.jsx)(Nu.Provider,{value:e.table.dispatch,children:(0,F.jsx)(Ns,{children:(0,F.jsx)(Ny.Provider,{value:e.cellHeight,children:e.children})})})})})})})})})});function Nb(){let e=(0,K.useContext)(Nd);if(!e)throw Error("Must use `useTableState` in child of `<TableStateProvider>");return e}function Nv(){let e=(0,K.useContext)(Nu);if(!e)throw Error("Must use `useTableDispatch` in child of `<TableDispatchProvider>");return e}function Nw(){return(0,K.useContext)(Nm)}function Nj(){let e=(0,K.useContext)(Ng);if(!e)throw Error("Must use `useTableInstance` in child of `<TableProvider>");return e}try{Nd.displayName||(Nd.displayName="TableStateContext")}catch{}try{Nu.displayName||(Nu.displayName="TableDispatchContext")}catch{}try{Nc.displayName||(Nc.displayName="TableStateOverColumnContext")}catch{}try{Nm.displayName||(Nm.displayName="TableStateSelectedRowIdsContext")}catch{}try{Np.displayName||(Np.displayName="TableStateSortByContext")}catch{}try{Nh.displayName||(Nh.displayName="TableStateRowMenuShortcutOriginContext")}catch{}try{Nf.displayName||(Nf.displayName="TableStateColumnResizingContext")}catch{}try{Ng.displayName||(Ng.displayName="TableInstanceContext")}catch{}try{Ny.displayName||(Ny.displayName="TableCellHeightContext")}catch{}let NC=e=>{let t=e;if(kW(t)){let{activeItemGroup:e,overItemGroup:a,...r}=t;e.value===a.value&&(t=kz(r)?r:void 0)}if(t&&kz(t)){let{overItem:e,side:a,...r}=t;t.activeItem.id===e.id&&(t=kW(r)?r:void 0)}return t},NI=({itemId:e,navigationDispatch:t,flatRows:a})=>{let r=a.find(t=>t.original.id===e);r?.toggleRowSelected?.(!0);let n=r?.cells[1]?.column.id;n&&t(cI(r.id,n,!1,!1))},NS=()=>{let{updateAndReorderItem:e}=wq(),{addToast:t}=lV(),{sorts:a,clearSortedBy:r}=un(),n=Nj(),{navigationDispatch:i}=cN(),{getUpdateForGroupDropEvent:l,handleGroupDropRequestError:s}=Ni(),{toggleGroupCollapsed:o}=d7(),d=(0,K.useCallback)(()=>n.flatRows.filter(e=>!e.isGrouped).map(e=>({id:e.original.id})),[n]),u=(0,K.useCallback)(e=>{let t=n.groupedRows?.find(t=>t.subRows.some(t=>t.original.id===e));if(t?.isCollapsed)return o(t.groupedValue),!0},[n,o]),c=(0,K.useCallback)(async(t,a)=>{let r=(a.updateColumnActions||[]).filter(e=>"parentIssue"===e.dataType).length>0;try{await e(t,a,{visibleItems:d()}),u(t),setTimeout(()=>NI({itemId:t,navigationDispatch:i,flatRows:n.flatRows}))}catch(e){return s(e,r)}},[e,d,u,i,n.flatRows,s]),m=(0,K.useCallback)(e=>{if(!kz(e)){let t=n.groupedRows?.find(t=>t.groupedValue===e.overItemGroup.value)?.subRows.at(-1);return t?{overItemId:t.original.id,side:wV.AFTER}:void 0}if(!kW(e)){for(let n of a)if(0!==kV(n.column)(e.activeItem,e.overItem,void 0,!0)){let e={text:nH.cannotReorderForSortAction,handleClick:()=>r()};t({message:nH.cannotReorderForSortMessage,type:nF.warning,action:e});return}}return{overItemId:e.overItem.id,side:e.side}},[t,r,a,n.groupedRows]);return(0,K.useCallback)(async e=>{let t=NC(e);if(!t)return;let a=await l(t);if(kW(t)&&!a)return;let r=m(t);(r||a)&&await c(t.activeItem.id,{reorderData:r,updateColumnActions:a?[a]:[]})},[l,m,c])};function Nk(e,t,a,r,n,i){var l;let s;let o=r&&r(t,i),d=new Map,u=[],c=[],{dataType:m}=t;for(let r of e){let e=a(t,r);if(!e){let e=n?n(r,"none"):r;c.push(e);continue}for(let t of e){let{value:e}=t;o||-1!==u.findIndex(t=>t.value===e)||u.push(t);let a=n?n(r,e):r,i=d.get(e);i?i.push(a):d.set(e,[a])}}s=o?o.map(e=>({...e,rows:d.get(e.value)??[]})):(l=[...u],m===eN.Assignees?l.sort(f$):l.sort((e,t)=>fV.compare(e.value,t.value))).map(e=>({...e,rows:d.get(e.value)??[]}));let p=fU(t);return p&&s.push({value:nH.undefined,sourceObject:p,rows:c}),s}function NN(e,t){return{...e,id:`${t}-${e.id}`}}let NT=(e,t)=>{let{memex_table_without_limits:a}=eP();return r=>a?function(e,t,a){let r=[];for(let n of e){let e=a(t,n);if(e)for(let t of e){let{value:e}=t;-1===r.findIndex(t=>t.value===e)&&r.push(t)}}let{memex_table_without_limits:n}=eP();if(n&&r.length>0)return r;let i=fU(t);return i&&r.push({value:n?"_noValue":nH.undefined,sourceObject:i}),r}(r,e,t.getGroupingMetadata):Nk(r,e,t.getGroupingMetadata,t.getAllGroupMetadata,NN)},N_=(e,t)=>a=>t.getGroupingMetadata(e,a),NA=({close:e,selectedRow:t})=>{let{rows:a,groupedRows:r}=Nj(),n=NS(),i=t.original,l=NR(t,r),s=NP(a,l,r),o=function(e){if(e)return`Move selected item within ${cp(e.groupedSourceObject)}`}(l);return(0,F.jsx)(kS.Ux.Provider,{value:(0,K.useMemo)(()=>({dragIndex:null,overId:null,direction:"vertical",isInDragMode:!1,moveDialogItem:{title:i.getRawTitle(),index:s.findIndex(e=>e.original.id===i.id)},openMoveDialog:eC.l,moveToPosition:async(t,a,r)=>{let i=s[t]?.original,l=s[a]?.original;i&&l&&(e(),await n({activeItem:i,overItem:l,side:r?wV.BEFORE:wV.AFTER}))},items:s.map(e=>({title:e.original.getRawTitle(),id:e.original.id}))}),[e,s,i,n]),children:(0,F.jsx)(kS.BS.SortableMoveDialog,{dialogTitle:o,closeDialog:()=>{e()}})})};function NR(e,t){if(!t)return;let a=function(e){let{id:t}=e;return t.slice(0,t.lastIndexOf("-"))}(e);return t.find(e=>e.id===a)}function NP(e,t,a){return!a||a.length<2?e:t?.isGrouped?t.subRows:e}let ND=(0,K.createContext)({setMoveDialogProps:()=>{}}),NE=()=>{let{setMoveDialogProps:e}=(0,K.useContext)(ND);return{setMoveDialogProps:e}};try{NA.displayName||(NA.displayName="MoveDialog")}catch{}try{ND.displayName||(ND.displayName="MoveDialogContext")}catch{}let NM=()=>(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)("p",{children:"You are about to overwrite the currently set sort order. All previous settings will be lost."}),(0,F.jsx)("p",{children:"Are you sure you want to proceed?"})]}),NB=({onConfirm:e,onDismiss:t,onOpen:a})=>{let{clearSortedBy:r}=un(),{confirmRemoveSortOrder:n}=function(){let e=(0,uX.S)();return{confirmRemoveSortOrder:(0,K.useCallback)(async()=>e({title:"Confirm sort order overwrite",content:(0,F.jsx)(NM,{}),confirmButtonContent:"Overwrite sorting",confirmButtonType:"primary"}),[e])}}();return{openRemoveSortOrderConfirmationDialog:(0,K.useCallback)(async()=>{a?.(),await n()?((0,pN.flushSync)(()=>{r()}),(0,pN.flushSync)(()=>{e?.()})):t?.()},[a,n,r,e,t])}};try{NM.displayName||(NM.displayName="ConfirmationContent")}catch{}let NL=(0,K.memo)(function({selectedRow:e,onOpen:t}){let{setMoveDialogProps:a}=NE(),{isSorted:r}=un(),{openRemoveSortOrderConfirmationDialog:n}=NB({onOpen:t,onConfirm:()=>{a({selectedRow:e})}});return(0,F.jsxs)(fi.l.Item,{"aria-label":`Move ${e.original.getRawTitle()}`,onSelect:()=>{t?.(),r?n():a({selectedRow:e})},children:[(0,F.jsx)(fi.l.LeadingVisual,{children:(0,F.jsx)(ly.GrabberIcon,{})}),"Move item"]})});try{NL.displayName||(NL.displayName="MoveItem")}catch{}let NF={Box:"base-cell-module__Box--bqkLG",Box_1:"base-cell-module__Box_1--z9MzV"},NO=(0,K.forwardRef)((e,t)=>{let{sx:a,editing:r,disallowSelection:n,className:i,style:l,...s}=e,o=(0,K.useContext)(Ny);return(0,F.jsx)(lx.A,{ref:t,sx:a,style:{height:`${o}px`,userSelect:n?"none":"auto",...l},className:(0,vB.$)(i,NF.Box,r&&NF.Box_1),...s})});NO.displayName="BaseCell";let NG={BaseCell:"row-dragger-module__BaseCell--bQM04",Box:"row-dragger-module__Box--NRFs3",IconButton:"row-dragger-module__IconButton--_bfK_"},NV=Math.floor(14.8);var N$=a(23149);let NW=(0,K.createContext)(null);try{NW.displayName||(NW.displayName="DroppedItemIdContext")}catch{}let Nz={is:e=>(0,N$.A)(e)&&"sortable"in e&&(0,N$.A)(e.sortable)&&"containerId"in e.sortable&&"string"==typeof e.sortable.containerId},NH=e=>`reorderable_table-row-${e.id}`,NU=e=>{let t=(0,kS.gl)({id:NH(e),data:{originalItemId:e.original.id}}),a=(0,K.useContext)(NW);return{isDropped:e.original.id===a,...t}},Nq=({rows:e,children:t,groupedValue:a})=>{let r=(0,K.useMemo)(()=>e.map(NH),[e]);return(0,F.jsx)(kS.gB,{items:r,strategy:kS._G,id:a,children:t})};try{Nq.displayName||(Nq.displayName="ReorderableRowsContext")}catch{}var NK=a(50523);async function NQ(e){let{memex_table_without_limits:t}=eP();sa.increment();try{let a=nP("memex-item-update-bulk-api-data"),{headers:r,data:n}=await ix(a.url,{method:"PUT",body:e}),i=0;if(n.memexProjectItems)for(let e of n.memexProjectItems)e.updatedAt&&(i=Math.max(i,new Date(e.updatedAt).getTime()));se.set(i),sa.decrement();let l=r.get(sr)||void 0;return t&&l&&l7.register(l),{requestId:l,...n}}catch(e){throw sa.decrement(),e}}let NJ=(0,K.createContext)(null),NX=()=>(0,K.useContext)(NJ),NY=(0,K.memo)(function({children:e}){let[t,a]=(0,K.useState)([]),[r,n]=(0,K.useState)(-1),[i,l]=(0,K.useState)([]),[s,o]=(0,K.useState)([]),d=(0,K.useCallback)((e,a)=>{if(t.length>0&&a===r){let a=t.find(t=>Number(t.memexProjectItemId)===e);return a?.message}},[t,r]),u=(0,K.useCallback)((e,r,i)=>{o(e),l(r),n(i),t.length>0&&a([])},[o,l,n,t,a]),c=(0,K.useMemo)(()=>({setErrors:a,memexProjectColumnId:r,errorMessageFor:d,selectedItemIds:i,reverts:s,onPreparingToBulkUpdate:u}),[a,r,i,s,d,u]);return(0,F.jsx)(NJ.Provider,{value:c,children:e})});try{NJ.displayName||(NJ.displayName="BulkUpdateItemsContext")}catch{}try{NY.displayName||(NY.displayName="BulkUpdateItemsProvider")}catch{}let NZ=(0,K.createContext)(null),N0=(0,K.memo)(function({children:e}){let{handleRefresh:t}=ud(),a=(0,K.useMemo)(()=>({handlePaginatedDataRefresh:t}),[t]);return(0,F.jsx)(NZ.Provider,{value:a,children:e})}),N1=()=>(0,K.useContext)(NZ);try{NZ.displayName||(NZ.displayName="PaginatedMemexItemsQueryContext")}catch{}try{N0.displayName||(N0.displayName="PaginatedMemexItemsQueryProvider")}catch{}let N2=()=>{let e=NX(),{addPersistedToast:t}=lV(),{setColumnValue:a}=up(),{setItemData:r}=um(),{findMemexItem:n}=ub(),{postStats:i}=iN(),{findLoadedFieldIds:l}=so(),s=l(),{memex_table_without_limits:o}=iz(),d=N1(),u=(0,wG.U)(async l=>{let u=[],c=[];for(let{itemId:e,updates:t}of l){let r=n(e);if(!r)continue;let i=[],l=[];for(let e of t){let t=l1(e),n=or(e,r),s=l0(e);i.push(n),a(r,s),t&&l.push(t)}c.push({itemId:e,updates:i}),l.length&&u.push({id:r.id,memexProjectColumnValues:l})}try{l3();let a=u[0];(0,ee.A)(a,"need at least one project item update");let n=a.memexProjectColumnValues[0];(0,ee.A)(n,"need at least one column value");let l=n.memexProjectColumnId;e?.onPreparingToBulkUpdate(c,u.map(e=>e.id),l),i({name:"bulk_column_value_update",ui:"shortcut",context:u.length,memexProjectColumnId:l});let m=await NQ({memexProjectItems:u,fieldIds:s});if(o&&m.job&&yE.pending(m.requestId)&&t({message:ia.startMessage,icon:ly.ClockIcon,type:nF.default}),"memexProjectItems"in m&&m.memexProjectItems){for(let e of m.memexProjectItems)r(e);m.invalidateQueryCache&&d?.handlePaginatedDataRefresh()}return e&&"bulkUpdateErrors"in m&&m.bulkUpdateErrors&&e.setErrors(m.bulkUpdateErrors),c}catch(e){for(let{itemId:e,updates:t}of c){let r=n(e);if(r)for(let e of t)a(r,l0(e))}throw e}});return{bulkUpdateColumnValues:(0,K.useCallback)(async e=>{let t=await u(e);return async()=>{t!==wG.g&&await u(t)}},[u])}},N5=()=>{let{bulkUpdateColumnValues:e}=N2(),{addToast:t}=lV(),a=wg();return{bulkUpdateSingleColumnValue:async(r,n,i=1===r.length?nU.updateItem:nU.updateItems,l)=>{if(r.length>50){t({message:"Error updating items: Cannot update more than 50 items at once",type:"error"});return}try{void 0!==l&&wQ(r,n,l);let t=r.map(e=>({itemId:e.id,updates:[n]})),s=await e(t);a?.registerAction({revert:s,description:i})}catch(e){if(e instanceof ApiError&&!e.message.includes("not valid JSON"))throw t({message:`Error updating items: ${e.message}`,type:"error"}),e;if(e instanceof ApiError&&e.status&&e.status>=500)t({message:"Something went wrong, please try again.",type:"error"});else if(e instanceof UpdateValidationError)t({message:e.message,type:"warning"});else throw e}},bulkUpdateMultipleColumnValues:async(r,n=1===r.length?nU.updateItem:nU.updateItems)=>{if(r.length>50){t({message:"Error updating items: Cannot update more than 50 items at once",type:"error"});return}try{let t=await e(r);a?.registerAction({revert:t,description:n})}catch(e){if(e instanceof ApiError&&!e.message.includes("not valid JSON"))throw t({message:`Error updating items: ${e.message}`,type:"error"}),e;if(e instanceof ApiError&&e.status&&e.status>=500)t({message:"Something went wrong, please try again.",type:"error"});else if(e instanceof UpdateValidationError)t({message:e.message,type:"warning"});else throw e}}}},N3=()=>{let e=Nj();return(0,K.useCallback)(()=>e.groupedRows?.flatMap(e=>e.isCollapsed?[]:e.subRows)??e.flatRows,[e])},N4={DESELECT_ALL_ROWS:"useDeselectAllRows.deselectAllRows"},N6=Object.values(N4),N8=e=>N6.includes(e.type),N7=()=>({type:N4.DESELECT_ALL_ROWS}),N9=e=>{e.stateReducers.push(Tt)};N9.pluginName="useDeselectAllRows";let Te={},Tt=(e,t)=>{let a;return N8(t)?t.type===N4.DESELECT_ALL_ROWS?(a={...e,selectedRowIds:Te},rn(e,a))?e:a:void 0:e},Ta={EMPTY:{columnId:null,rowIds:new Set,rangeReferenceId:null,isMaximumExceeded:!1},isEqual:(e,t)=>e===t||e.columnId===t.columnId&&e.rangeReferenceId===t.rangeReferenceId&&function(e,t){if(e.size!==t.size)return!1;for(let a of e)if(!t.has(a))return!1;return!0}(e.rowIds,t.rowIds)},Tr=(e,t)=>{let a=Math.min(e,t),r=Array.from({length:Math.abs(e-t)+1},(e,t)=>a+t);return e<=t?r:r.reverse()},Tn=[],Ti=(e,{columnId:t,affectedRowIds:a=Tn,mode:r,keepRangeReference:n=!1})=>{let i;if(null===t)return Ta.EMPTY;let l=e.columnId!==t?Ta.EMPTY:e,s=Array.isArray(a)?a:a?.(l),o=n?e.rangeReferenceId:s.at(-1)??e.rangeReferenceId;switch(r){case"toggle":i=function(e,t){let a=new Set(e);for(let e of t)a.delete(e)||a.add(e);return a}(l.rowIds,new Set(s));break;case"replace":i=new Set(s);break;case"add":i=new Set([...l.rowIds,...s])}let d={columnId:t,rowIds:i,rangeReferenceId:o,isMaximumExceeded:i.size>50};return Ta.isEqual(d,e)?e:d},Tl=(0,K.createContext)(Ta.EMPTY),Ts=(0,K.createContext)(null),To=(0,K.createContext)(null),Td=(0,K.memo)(function(e){let[t,a]=(0,K.useReducer)(Ti,Ta.EMPTY),r=Nj(),n=(0,nk.M)(ck().state.focus),i=(0,K.useCallback)(e=>r.flatRows.findIndex(t=>t.original.id===e),[r]),l=(0,K.useCallback)(e=>r.flatRows[e]?.original.id,[r]),s=(0,K.useCallback)(()=>{let e=n.current;return e&&cv(e)?r.rowsById[e.details.y]?.cells.find(t=>t.column?.id===e.details.x):void 0},[n,r]),o=(0,K.useCallback)((e,t,a)=>{let r=s(),n=i(a);return Tr(null!==t?i(t):r?.column.id===e?i(r.row.original.id):n,n).map(e=>l(e)).filter(rc)},[i,l,s]),d=N3(),u=(0,K.useCallback)(()=>d().map(e=>e.original.id),[d]),c=(0,K.useCallback)(e=>l(i(e)-1)??e,[i,l]),m=(0,K.useCallback)(e=>l(i(e)+1)??e,[i,l]),p=(0,K.useMemo)(()=>({select:(e,t)=>a({columnId:e.column.id,mode:t,affectedRowIds:({columnId:a})=>{let r=s();return("toggle"===t||"add"===t)&&null===a&&r?[r.row.original.id,e.row.original.id]:[e.row.original.id]}}),selectRange:(e,t)=>a({columnId:e.column.id,mode:t,affectedRowIds:({rangeReferenceId:t})=>o(e.column.id,t,e.row.original.id),keepRangeReference:!0}),clearSelection:()=>a({columnId:null,mode:"replace"}),expandSelectionUp:e=>a({columnId:e.column.id,mode:"add",affectedRowIds:[e.row.original.id,c(e.row.original.id)]}),expandSelectionDown:e=>a({columnId:e.column.id,mode:"add",affectedRowIds:[e.row.original.id,m(e.row.original.id)]}),selectColumn:e=>a({affectedRowIds:u(),columnId:e,mode:"replace"})}),[o,c,m,u,s]),h=Nv();return(0,K.useEffect)(()=>{t.rowIds.size>0&&h(N7())},[h,t]),(0,F.jsx)(Ts.Provider,{value:p,children:(0,F.jsx)(Tl.Provider,{value:t,children:(0,F.jsxs)(To.Provider,{value:t.rowIds.size>0,children:[e.children,(0,F.jsx)("span",{className:"sr-only","aria-live":"polite","aria-relevant":"additions removals",children:t.isMaximumExceeded&&nH.selectionMaximumExceeded(50)})]})})})}),Tu=()=>(0,K.useContext)(Tl),Tc=()=>(0,K.useContext)(Ts),Tm=e=>{let t=Tu();return!!e&&t.columnId===e.column.id&&t.rowIds.has(e.row.original.id)},Tp=()=>(0,K.useContext)(To),Th=()=>{let{rowIds:e}=Tu(),t=Nj();return(0,K.useCallback)(()=>Array.from(e).map(e=>t.flatRows.find(t=>t.original.id===e)).filter(e=>void 0!==e&&e.original.contentType!==eJ.RedactedItem),[e,t])},Tf=()=>{let e=Tu(),t=Nj();return null!==e.columnId?t.visibleColumns.find(t=>t.id===e.columnId):null};try{Tl.displayName||(Tl.displayName="SelectionStateContext")}catch{}try{Ts.displayName||(Ts.displayName="SelectionMethodsContext")}catch{}try{To.displayName||(To.displayName="SelectionAreCellsBulkSelectedContext")}catch{}try{Td.displayName||(Td.displayName="TableCellBulkSelectionProvider")}catch{}try{Td.displayName||(Td.displayName="TableCellBulkSelectionProvider")}catch{}let Tg=()=>{let e=Tu(),t=Tp(),a=Th(),{bulkUpdateSingleColumnValue:r}=N5();return(0,K.useCallback)(async n=>{if(!t||!e.columnId)return;let i=a(),[l,...s]="as-selected"===n?i:i.sort((e,t)=>e.index-t.index),o=l?.cells.find(t=>t.column.id===e.columnId);if(!o)return;let d=function(e){try{let t=e.column.columnModel;return void 0!==t?on(t.id,t.dataType,e.row.original):null}catch{return null}}(o);d&&r(s.map(e=>e.original),d,nU.fillCells,o.row.original.contentRepositoryId)},[r,a,t,e.columnId])},Ty=(0,K.createContext)({isDragging:!1}),Tx=(0,K.memo)(function({children:e}){let[t,a]=(0,K.useState)(!1),r=Tg(),n=(0,wG.U)(()=>{r("as-selected"),a(!1)});(0,K.useEffect)(()=>(t&&document.addEventListener("mouseup",n),()=>document.removeEventListener("mouseup",n)),[t,n]);let i=(0,K.useCallback)(()=>a(!0),[]);if(!Tc())throw Error("`TableDragToFillProvider` requires `TableCellBulkSelectionProvider` as an ancestor");return(0,F.jsx)(Ty.Provider,{value:(0,K.useMemo)(()=>({isDragging:t,onFillStart:i}),[t,i]),children:e})}),Tb=e=>{let{isDragging:t,onFillStart:a}=(0,K.useContext)(Ty),r=Tu(),n=Array.from(r.rowIds),i=t&&r.columnId===e.column.id&&n[0]===e.row.original.id,l=t&&r.columnId===e.column.id&&n.at(-1)===e.row.original.id,s=(0,K.useCallback)(t=>{t.metaKey||t.ctrlKey||t.shiftKey||a?.(e.column.id,e.row.index)},[e,a]),o=Tw(e),d=(0,K.useCallback)(e=>{e.stopPropagation(),o()},[o]);return a?{isFillSourceCell:i,isFillLastCell:l,onFillHandleMousedown:s,onFillHandleDoubleClick:d}:null},Tv=(e,t)=>{let a=t.id;return!e.original.columns[a]},Tw=e=>{let t=Nj(),a=Tc(),r=Tg(),n=(0,wG.U)(r);return(0,K.useCallback)(()=>{let r=e.row,i=e.column.columnModel;if(!a||!i||Tv(r,i))return;let l=t.flatRows,s=l.slice(r.index+1).findIndex(e=>e.original.contentType===eJ.RedactedItem||!Tv(e,i)||r.groupedValue!==e.groupedValue),o=-1===s?l.length-1:s+r.index;if(o===r.index)return;let d=l[o]?.cells.find(t=>t.column.id===e.column.id);d&&(a.select(e,"replace"),a.selectRange(d,"replace"),setTimeout(()=>n("down")))},[a,e,n,t.flatRows])};try{Ty.displayName||(Ty.displayName="DragToFillContext")}catch{}try{Tx.displayName||(Tx.displayName="TableDragToFillProvider")}catch{}function Tj(e,t){return t&&cv(t)&&t.details.y===e.row.id&&t.details.x===e.column.id?{isFocused:!0,isEditing:!!t.details.meta.editing,isSuspended:!!t.details.meta.suspended,replaceContents:!!t.details.meta.replaceContents}:{isFocused:!1,isEditing:!1,isSuspended:!1,replaceContents:!1}}let TC=(0,K.createContext)(null),TI=()=>{let e=(0,K.useContext)(TC);if(!e)throw Error("useVisibleFields must be used within a ViewProvider");return e},TS=Symbol("clipboard-only_url_id"),Tk={dataType:Symbol("clipboard-only_url_data-type"),id:TS,name:"URL"},TN={UPDATE_CLIPBOARD:"UPDATE_CLIPBOARD",CLEAR_CLIPBOARD:"CLEAR_CLIPBOARD"},TT=(...e)=>new Blob(e,{type:im.HTML}),T_=(...e)=>new Blob(e,{type:im.Text}),TA=(...e)=>"undefined"==typeof ClipboardItem?null:new ClipboardItem(Object.fromEntries(e.map(e=>[e.type,e]))),TR=e=>{if(1!==e.length)return;let t=e[0];if(t?.length===1)return t[0]},TP=e=>e?.html??pO(e?.text??""),TD=(e,t)=>{if(0===e.length)return;let a=TR(e);if(a)return TP(a);let r=t?`
<thead><tr>${t.map(e=>`<th>${pO(e)}</th>`).join("")}</tr></thead>`:"",n=`<tbody>
${e.map(e=>`<tr>${e.map(e=>`<td>${TP(e)}</td>`).join("")}</tr>`).join("\n")}
</tbody>`;return`<table>${r}
${n}
</table>`};let PasteValidationFailureError=class PasteValidationFailureError extends Error{constructor(...e){super(...e),this.name="PasteValidationFailureError"}};let DataTypeMismatchFailureError=class DataTypeMismatchFailureError extends PasteValidationFailureError{constructor(){super(nH.unableToPasteMismatchedDataTypes),this.name="DataTypeMismatchFailureError"}};let TE={[eN.Assignees]:{readContent:e=>{let t=e.columns.Assignees||[];if(e.contentType!==eJ.RedactedItem)return{text:t.map(e=>e.login).join(", "),dataType:eN.Assignees,value:t,repositoryId:e.contentRepositoryId}},buildUpdate:e=>{if("string"==typeof e)return;if(e.dataType!==eN.Assignees)throw new DataTypeMismatchFailureError;let t=e.value;return{dataType:eN.Assignees,value:t}}},[eN.Date]:{readContent:(e,t)=>{let a=e.columns[t.id],r=aj(a)||"",n=aw(a)||void 0;return{text:r,dataType:eN.Date,value:n}},buildUpdate:(e,t)=>{if("string"!=typeof e){if(e.dataType===eN.Date){let a=e.value;return{dataType:eN.Date,memexProjectColumnId:t.id,value:a?{value:a.value}:void 0}}if(e?.value)throw new DataTypeMismatchFailureError;return{dataType:eN.Date,memexProjectColumnId:t.id,value:void 0}}}},[eN.IssueType]:{readContent:e=>{if(e.contentType!==eJ.Issue)return;let t=e.columns[eT.IssueType];return{text:t?t.name:"",dataType:eN.IssueType,value:t,repositoryId:e.contentRepositoryId,html:t?pO(t.name):""}},buildUpdate:e=>{if("string"==typeof e)return;if(e.dataType!==eN.IssueType)throw new DataTypeMismatchFailureError;let t=e.value;return{dataType:eN.IssueType,value:t}}},[eN.Iteration]:{readContent:(e,t)=>{let a=e.columns[t.id],r=a?.id,n=aK(t).find(e=>e.id===r);return{text:n?.title||"",dataType:eN.Iteration,value:a,html:n?pO(n.titleHtml):""}},buildUpdate:(e,t)=>{let a;if("string"!=typeof e){if(e.dataType===eN.Iteration&&e.columnId===t.id){let t=e.value;a=t?.id}else if(e.dataType===eN.Text){let r=e.value;if(!t)throw new DataTypeMismatchFailureError;let n=r?.raw.trim().toLowerCase(),i=aK(t).find(e=>e.title.trim().toLowerCase()===n);if(!i&&r)throw new PasteValidationFailureError(nH.iterationNotFound);a=i?.id}if(!a&&e.value)throw new DataTypeMismatchFailureError;return{dataType:eN.Iteration,memexProjectColumnId:t.id,value:a?{id:a}:void 0}}}},[eN.Labels]:{readContent:e=>{if(e.contentType===eJ.DraftIssue||e.contentType===eJ.RedactedItem)return;let t=e.columns.Labels||[];return{text:t.map(e=>e.name).join(", "),dataType:eN.Labels,value:t,repositoryId:e.contentRepositoryId,html:t.map(e=>pO(e.nameHtml)).join(", ")}},buildUpdate:e=>{if("string"==typeof e)return;if(e.dataType!==eN.Labels)throw new DataTypeMismatchFailureError;let t=e.value;return{dataType:eN.Labels,value:t}}},[eN.LinkedPullRequests]:{readContent:e=>{let t=e.columns["Linked pull requests"];if(t&&0!==t.length)return{text:t.map(e=>e.url).join(", "),dataType:eN.LinkedPullRequests,value:t,html:t.map(e=>`<a href="${e.url}">#${e.number}</a>`).join(", ")}}},[eN.Milestone]:{readContent:e=>{if(e.contentType===eJ.DraftIssue||e.contentType===eJ.RedactedItem)return;let t=e.columns.Milestone;return{text:t?t.title:"",dataType:eN.Milestone,value:t,repositoryId:e.contentRepositoryId,html:t?`<a href="${t.url}">${pO(t.title)}</a>`:""}},buildUpdate:e=>{if("string"==typeof e)return;if(e.dataType!==eN.Milestone)throw new DataTypeMismatchFailureError;let t=e.value;return{dataType:eN.Milestone,value:t}}},[eN.Number]:{readContent:(e,t)=>{let a=ay(e.columns[t.id])||void 0;return{text:a?a.value.toString():"",dataType:eN.Number,value:a}},buildUpdate:(e,t)=>{let a;if("string"==typeof e){if(isNaN(a=parseFloat(e))&&e)return}else if(e.dataType===eN.Number){let t=e.value;a=t?.value}else if(e.dataType===eN.Text){if(isNaN(a=parseFloat(e.text))&&e.text)throw new DataTypeMismatchFailureError}else if(isNaN(a=parseFloat(e.text))&&e.text)throw new DataTypeMismatchFailureError;return{dataType:eN.Number,memexProjectColumnId:t.id,value:a?{value:a}:void 0}}},[eN.ParentIssue]:{readContent:e=>{if(e.contentType!==eJ.Issue)return;let t=e.columns["Parent issue"];return{text:t?.url||"",dataType:eN.ParentIssue,value:t,repositoryId:e.contentRepositoryId,html:t?`<a href="${t.url}">${pO(`${t.nwoReference}`)}</a>`:""}},buildUpdate:e=>{if("string"==typeof e)return;if(e.dataType!==eN.ParentIssue)throw new DataTypeMismatchFailureError;let t=e.value;return{dataType:eN.ParentIssue,value:t}}},[eN.Repository]:{readContent:e=>{let t=e.columns.Repository;if(t)return{text:t.nameWithOwner,dataType:eN.Repository,value:t,html:`<a href="${t.url}">${pO(t.nameWithOwner)}</a>`}}},[eN.Reviewers]:{readContent:e=>{let t=e.columns.Reviewers;if(t&&0!==t.length)return{text:t.map(e=>e.reviewer.name).join(", "),dataType:eN.Reviewers,value:t||[]}}},[eN.SingleSelect]:{readContent:(e,t)=>{let a=e.columns[t.id],r=a?.id,n=(t.settings.options||[]).find(e=>e.id===r),i=ax(a)||void 0;return{text:n?.name||"",dataType:eN.SingleSelect,value:i,html:n?pO(n.nameHtml):void 0}},buildUpdate:(e,t)=>{let a;if("string"!=typeof e){if(e.dataType===eN.SingleSelect&&e.columnId===t.id){let t=e.value;a=t?.id}else if(e.dataType===eN.Text){let r=e.value,n=t.settings.options,i=r?.raw.trim().toLowerCase(),l=n.find(e=>e.name.trim().toLowerCase()===i);a=l?.id}if(!a&&e.value)throw new DataTypeMismatchFailureError;return{dataType:eN.SingleSelect,memexProjectColumnId:t.id,value:a?{id:a}:void 0}}}},[eN.SubIssuesProgress]:{readContent:e=>{let t=e.columns["Sub-issues progress"];if(!t)return;let a=`${t.completed} / ${t.total} (${t.percentCompleted}%)`;return{text:a,dataType:eN.SubIssuesProgress,value:t,html:a}}},[eN.Text]:{readContent:(e,t)=>{let a=ag(e.columns[t.id])||void 0;return{text:a?.raw||"",dataType:eN.Text,value:a,html:a?pO(a.html):""}},buildUpdate:(e,t)=>({dataType:eN.Text,memexProjectColumnId:t.id,value:"string"==typeof e?e:e.text})},[eN.Title]:{readContent:e=>{let t=e.columns[eT.Title];if(!t||t.contentType===eJ.RedactedItem)return;let a=pO(t.value.title.html),r=e.getUrl(),n=r?`<a href="${r}">${a}</a>`:a;return{text:t.value.title.raw,dataType:eN.Title,value:{title:t.value.title},html:n}}},[eN.Tracks]:{readContent:e=>{let t=e.columns.Tracks;if(t&&0!==t.total)return{text:nH.progressCount({percent:function(e){if(e?.percent!==void 0)return e.percent;let t=function(e){if(!e)return;if(e?.percent)return e.percent/100;let{total:t,completed:a}=e;if(0!==t)return a/t}(e);return t?Math.round(100*t):0}(t),total:t.total}),dataType:eN.Tracks,value:t}}},[eN.TrackedBy]:{readContent:e=>{let t=e.columns["Tracked by"];if(t&&0!==t.length)return{text:t.map(e=>e.url).join(", "),dataType:eN.TrackedBy,value:t||[],html:t.map(e=>`<a href="${e.url}">${pO(h8(e))}</a>`).join(", ")}}},[Tk.dataType]:{readContent:e=>{let t=e.getUrl();return{text:t,dataType:Tk.dataType,value:t}}}};function TM(e){let t=TE[e.dataType];if(!t)throw Error(`No behavior found for data type: ${String(e.dataType)}`);return t}let TB=(e,t)=>{let a=function(e,t){let a;return t.contentRepositoryId&&(a=t.contentRepositoryId),{repositoryId:a,column:e,row:t}}(e,t);if(!a)return;let r=TM(e).readContent(a.row,a.column);if(r)return{...r,columnId:a.column.id,itemId:a.row.id}},TL=(e,t)=>e.filter(e=>e.contentType!==eJ.RedactedItem).map(e=>t.map(t=>TB(t,e))),TF=async({items:e,clipboardDispatch:t,itemsToCsv:a,addToast:r,withHeaders:n,selectedFields:i})=>{let l=n?i.map(e=>e.name):void 0,s=TL(e,i),o=TD(s,l)??"",d=a(e,{withHeaders:n,selectedFields:i});try{await function(e,t=aR(e)){let a=TA(TT(e),T_(t));return a&&void 0!==navigator.clipboard?.write?navigator.clipboard.write([a]):function(e){if(void 0===navigator.clipboard?.writeText)throw Error("Copying is not supported in this browser");return navigator.clipboard.writeText(e)}(t)}(o,d),t({type:TN.UPDATE_CLIPBOARD,state:s})}catch{r({message:"Could not copy items. Please check the page permissions and try again.",type:"error",keepAlive:!1})}},TO={type:"empty"},TG=()=>{let e=(0,K.createContext)({state:TO,clipboardDispatch:()=>void 0});return e.displayName="CopyPaste",e},TV=(e="")=>e.includes("	")?`"${e.replaceAll('"','""')}"`:e,T$=(e,t)=>[...t?[t.map(e=>TV(e)).join("	")]:[],...e.map(e=>e.map(e=>TV(e?.text)).join("	"))].join("\n"),TW=({items:e,withHeaders:t,selectedFields:a})=>{let r=e.every(e=>"DraftIssue"===e.contentType)?a:a.flatMap(e=>e.id===eT.Title?[e,Tk]:[e]),n=t?r.map(e=>e.name):void 0;return T$(TL(e,r),n)},Tz=({cell:e,clipboard:t})=>{if("empty"===t.type)return;let a=TR(t.value);return a?.columnId?.toString()===e.column.id&&a.itemId===e.row.original.id},TH=async({cell:e,selectedItems:t,currentClipboard:a,clipboardDispatch:r,updateItems:n,addToast:i})=>{let l="";try{l=await navigator.clipboard.readText()}catch{}let s=a,o=!1;if("empty"===a.type&&(o=!!l),"populated"===a.type&&(o=!!l&&l!==T$(a.value)),o&&(s={type:"populated",value:[[{dataType:"text",text:l,value:{raw:l,html:l}}]]},r({type:TN.CLEAR_CLIPBOARD})),"empty"===s.type)return;let d=0===t.length?[e.row.original]:t,u=TR(s.value);if(!u)return;let c=u.dataType&&u.columnId?u:u.text,m=e.column.columnModel;if(!c||!m)return;let p="object"==typeof c&&"repositoryId"in c?c.repositoryId:void 0;try{let e=TM(m);if(!e.buildUpdate)return;let t=e.buildUpdate(c,m);t&&await n(d,t,nU.paste,p)}catch(e){if(e instanceof PasteValidationFailureError)i({message:e.message,type:"warning"});else throw e}},TU=(e,t)=>{switch(t.type){case TN.CLEAR_CLIPBOARD:return TO;case TN.UPDATE_CLIPBOARD:return{type:"populated",value:t.state};default:return e}},Tq=e=>(0,K.useReducer)(TU,e);try{(b=CopyPasteContext).displayName||(b.displayName="CopyPasteContext")}catch{}try{(v=CopyPasteProvider).displayName||(v.displayName="CopyPasteProvider")}catch{}let{CopyPasteProvider:TK,useCopyPaste:TQ}=(()=>{let e=TG(),t=(0,K.memo)(function({children:t}){let[a,r]=Tq(TO),n=(0,K.useMemo)(()=>({state:a,clipboardDispatch:r}),[a,r]);return(0,F.jsx)(e.Provider,{value:n,children:t})});return{CopyPasteContext:e,CopyPasteProvider:t,useCopyPaste:()=>{let{state:t,clipboardDispatch:a}=(0,K.useContext)(e),{visibleFields:r}=TI(),{addToast:n}=lV(),i=(0,K.useCallback)(()=>{a({type:TN.CLEAR_CLIPBOARD})},[a]),{bulkUpdateSingleColumnValue:l}=N5(),s=(0,K.useCallback)(async(e,r)=>{TH({cell:e,selectedItems:r,addToast:n,updateItems:l,currentClipboard:t,clipboardDispatch:a})},[n,l,t,a]),o=(0,K.useCallback)(e=>Tz({cell:e,clipboard:t}),[t]),d=(0,K.useCallback)((e,{withHeaders:t=!1,selectedFields:a=r}={})=>TW({items:e,withHeaders:t,selectedFields:a}),[r]);return{paste:s,clearClipboard:i,isCellCopySource:o,copyItems:(0,K.useCallback)(async(e,{withHeaders:t=!1,selectedFields:i=r}={})=>{TF({items:e,withHeaders:t,selectedFields:i,clipboardDispatch:a,addToast:n,itemsToCsv:d})},[r,d,a,n]),itemsToCsv:d}}}})(),TJ={Box:"table-cell-module__Box--EVWC0"};function TX(e){return`TableColumnHeader{id: ${e}}`}function TY(e){return`TableRow{index: ${e}}`}function TZ(e,t){return`TableCellEditor{row: ${e}, column: ${t}}`}function T0(){let{openPane:e}=c9(),t=(0,U.jE)(),a=(0,K.useCallback)(a=>{if(a){if("getState"in a)e(a);else{let{id:r,number:n,owner:i,repository:l,state:s,stateReason:o,title:d,url:u}=a;e(oF(t).find(e=>e.content.id===a.id)??new SubIssueSidePanelItem({id:r,number:n,owner:i,repo:l,state:s,stateReason:o,title:d,url:u}))}}},[e,t]);return(0,K.useMemo)(()=>({openParentIssue:a}),[a])}function T1(e){e.stopPropagation(),e.preventDefault()}function T2(e,t){t===fN.META_ARROW_LEFT||t===fN.META_ARROW_RIGHT||t===fN.ARROW_LEFT||t===fN.ARROW_RIGHT?e.stopPropagation():T1(e)}function T5(e,t){let a=function(e){let t=fA(e),a=null;switch(t){case fN.META_HOME:a=u2({y:u8.First,x:u8.First,focusType:u6.Focus});break;case fN.SHIFT_ARROW_UP:case fN.SHIFT_ARROW_DOWN:break;case fN.ARROW_UP:a=u2({y:u8.Previous,focusType:u6.Focus});break;case fN.META_ARROW_UP:a=u2({y:u8.First,focusType:u6.Focus});break;case fN.ARROW_DOWN:a=u2({y:u8.Next,focusType:u6.Focus});break;case fN.META_ARROW_DOWN:a=u2({y:u8.Last,focusType:u6.Focus});break;case fN.ARROW_LEFT:a=u2({x:u8.Previous,focusType:u6.Focus});break;case fN.META_ARROW_LEFT:a=u2({x:u8.First,focusType:u6.Focus});break;case fN.ARROW_RIGHT:a=u2({x:u8.Next,focusType:u6.Focus});break;case fN.META_ARROW_RIGHT:a=u2({x:u8.Last,focusType:u6.Focus});break;case fN.META_END:a=u2({x:u8.Last,y:u8.Last,focusType:u6.Focus})}return{keyAsShortcut:t,action:a}}(t);return a.action&&e(a.action),a}let T3={Up:"up",Down:"down"},T4=()=>{let e=Tc(),t=Nv();return(0,K.useCallback)((a=!0)=>{a&&e?.clearSelection(),t(N7())},[e,t])},T6=e=>e.original.contentType!==eJ.RedactedItem,T8=e=>void 0!==e&&e.isSelected&&T6(e),T7=(e,t,a)=>{let r=T8(e),n=!1,i=!1;if(r){let a=t.filter(e=>!e.isGrouped),r=a.findIndex(t=>t.id===e.id);n=T8(a[r-1]),i=T8(a[r+1])}let l=!1,s=!1;if(a&&r)for(let t of a){let a=t.subRows.findIndex(t=>t.id===e.id);if(0===a&&(l=!0),a===t.subRows.length-1&&(s=!0),l||s)break}return{beforeSelected:n,afterSelected:i,firstInGroup:l,lastInGroup:s}},T9=[];function _e(e,t=T9){let{navigationDispatch:a,stateRef:r}=cN(),{flatRows:n,selectedFlatRows:i}=Nj(),[l,s]=(0,K.useState)(null),[o,d]=(0,K.useState)(null),u=Tc(),c=Nv();(0,K.useEffect)(()=>{i.length>0&&u?.clearSelection()},[i,u]);let m=(0,K.useCallback)(t=>{let a=n.filter(e=>null!=e.toggleRowSelected),r=a.findIndex(e=>e.id===t),i=a.findIndex(t=>t.id===e.id),l=[];if(i<r?l=a.slice(i,r+1):i>r&&(l=a.slice(r,i+1)),l.length)for(let e of(c(N7()),l))e.toggleRowSelected(!0)},[n,e.id,c]),p=(0,K.useCallback)((e,t)=>{let a=i.filter(e=>!e.isGrouped);if(0===a.length)return;let r=n.filter(e=>!e.isGrouped),l=[],s=a[0],o=r.findIndex(e=>e.id===s.id),d=a[a.length-1],u=r.findIndex(e=>e.id===d.id),m=r.findIndex(e=>e.id===t.id);if(1===a.length)e===T3.Up?l=r.slice(o-1,o+1):e===T3.Down&&(l=r.slice(o,o+2));else if(m<u)e===T3.Up?l=r.slice(o,u):e===T3.Down&&(l=r.slice(o,u+2));else if(e===T3.Up){if(0===o)return;l=r.slice(o-1,m+1)}else e===T3.Down&&(l=r.slice(o+1,m+1));if(l.length)for(let e of(c(N7()),l))e.toggleRowSelected(!0)},[n,i,c]);return{onRowClick:(0,K.useCallback)(r=>{if(t.some(e=>e.current===r.target)){if(rh(r)){e.toggleRowSelected();let t=e.cells[1];t&&a(cI(e.id,t.column.id,!1))}else if(i.length&&r.shiftKey&&l?.focus?.type==="coordinate"){let{x:e,y:t}=l.focus.details;m(t),a(cI(t,e,!1))}else{c(N7()),e.toggleRowSelected(!0);let t=e.cells[1];t&&a(cI(e.id,t.column.id,!1))}}},[t,i.length,l?.focus?.type,l?.focus?.details,e,a,m,c]),onRowPointerDown:(0,K.useCallback)(()=>{if(r.current?.focus?.type==="coordinate"){s(r.current);let{y:e}=r.current.focus.details;d(n.findIndex(t=>t.id===e))}else d(n.findIndex(t=>t.id===e.id))},[n,r,e]),focusLastRowIndex:(0,K.useCallback)(e=>{if(null!==o&&o>-1){let t=new Set(e),r=n.filter(e=>!t.has(e.original.id)&&e.cells.length>1),i=r.length-1,l=r[o>i?i:o];if(l){let e=l.cells[1];e&&a(cI(l.id,e.column.id,!1))}else a(cw())}},[n,o,a]),expandRowSelectionInDirection:p}}let _t=(e,t,a,r=!1,n=!1,i=!1)=>{let l=(0,K.useRef)(null),s=(0,K.useRef)(null),{stateRef:o,navigationDispatch:d}=cN(),u=(0,K.useRef)(!1),{toggleAllRowsSelected:c,selectedFlatRows:m,flatRows:p}=Nj(),{hasWritePermissions:h}=eK(),{copyItems:f,paste:g}=TQ(),{expandRowSelectionInDirection:y}=_e(e.row),x=Nv(),{openPane:b}=c9(),{toggleFilter:v}=lh(),{bulkSelectActions:w,bulkSelectedColumn:j,canBulkEdit:C,clearColumnValue:I,deselectAll:S,fillSelection:k,hasBulkSelection:N,getBulkSelectedRows:T,openParentIssue:_}=function(e){let{memex_table_without_limits:t,memex_mwl_table_cell_perf:a}=iz();return t&&a?function(){let{openParentIssue:e}=T0();return{bulkSelectActions:null,canBulkEdit:!1,hasBulkSelection:!1,bulkSelectedColumn:null,fillSelection:_r,clearColumnValue:_n,deselectAll:_i,getBulkSelectedRows:_a,openParentIssue:e}}():function(e){let t=Tc(),a=null!==t&&e.column.columnModel&&rO(e.column.columnModel.dataType),r=Tp(),n=Tf(),i=Th(),l=Tg(),{clearColumnValue:s}=function(){let{bulkUpdateSingleColumnValue:e}=N5(),{addToast:t}=lV();return{clearColumnValue:(0,K.useCallback)(async(a,r)=>{if(!a.columnModel){t({type:"error",message:"You cannot delete this"});return}let n=r.map(e=>e.original),{dataType:i}=a.columnModel,l=ap(a.id);if(!rG.includes(i)){let e=Ik(i);t({type:"error",message:`${e} cannot be deleted`});return}switch(i){case eN.Assignees:return e(n,{columnValue:{dataType:eN.Assignees,value:[]}}.columnValue,nU.delete);case eN.Labels:return e(n,{columnValue:{dataType:eN.Labels,value:[]}}.columnValue,nU.delete);case eN.Milestone:return e(n,{columnValue:{dataType:eN.Milestone,value:void 0}}.columnValue,nU.delete);case eN.IssueType:return e(n,{columnValue:{dataType:eN.IssueType,value:void 0}}.columnValue,nU.delete);case eN.ParentIssue:return e(n,{columnValue:{dataType:eN.ParentIssue,value:void 0}}.columnValue,nU.delete);case eN.Text:case eN.Number:case eN.Date:case eN.Iteration:if(ab(l))return e(n,{dataType:i,memexProjectColumnId:l,value:void 0},nU.delete);break;case eN.SingleSelect:if(l===eT.Status||ab(l))return e(n,{memexProjectColumnId:l,dataType:i,value:void 0},nU.delete);break;default:tA(i)}},[e,t])}}(),o=T4(),{openParentIssue:d}=T0();return{bulkSelectActions:t,canBulkEdit:a,hasBulkSelection:r,bulkSelectedColumn:n,fillSelection:l,clearColumnValue:s,deselectAll:o,getBulkSelectedRows:i,openParentIssue:d}}(e)}(e),A=null!==w,R=(0,K.useMemo)(()=>p.findIndex(t=>t.id===e.row.id),[e.row.id,p]),P=(0,K.useCallback)((e=[])=>{if(-1===R)return;let t=new Set(e),a=p.filter(e=>!t.has(e.original.id)),r=a.length-1,n=a[R>r?r:R];if(n){let e=n.cells[1];if(!e)return;d(cI(n.id,e.column.id,!1))}else d(cw())},[p,R,d]),D=(0,K.useCallback)((e=[])=>{P(e)},[P]),E=(0,K.useCallback)(e=>{S(),D(e)},[D,S]),{openRemoveConfirmationDialog:M}=wS(void 0,E,P),{openArchiveConfirmationDialog:B}=ww(void 0,E,P),L=(0,K.useCallback)(()=>{!function(e,t,a){if(!e?.focus?.details||"coordinate"!==e.focus.type)return!1;let r=e.focus.details;return r.y===t&&r.x===a}(o.current,e.row.id,e.column.id)&&d(cI(e.row.id,e.column.id,!1))},[o,e.row.id,e.column.id,d]),F=(0,K.useCallback)(t=>{if(e.column.nonNavigable||t.isPropagationStopped()||t.shiftKey)return;let a=t.target instanceof Node&&s.current?.contains(t.target),n=u.current||a;r&&n&&(u.current=!1,d(cI(e.row.id,e.column.id,r)),w?.clearSelection())},[e,r,d,w]),O=(0,K.useCallback)(a=>{if(!e.column.nonNavigable){if(A){if(a.shiftKey){w.selectRange(e,rh(a)?"add":"replace"),a.preventDefault();return}rh(a)?w.select(e,"toggle"):w.clearSelection()}t?t&&r&&(u.current=!0):u.current=!1,x(N7())}},[A,e,t,r,x,w]),G=m.filter(e=>T8(e)),V=(0,K.useCallback)(t=>{if(kv(e.column)||a)return;let n=fA(t);if(A&&(n===fN.ARROW_LEFT||n===fN.ARROW_RIGHT)&&w.clearSelection(),T5(d,t).action)x(N7()),T1(t);else{switch(n){case fN.ENTER:r&&(d(u2({focusType:u6.Edit})),T1(t));return;case fN.HOME:d(u2({x:u8.First,focusType:u6.Focus})),x(N7()),T1(t);return;case fN.SHIFT_SPACE:h&&(T1(t),e.row.toggleRowSelected(!0));return;case fN.SPACE:"Title"===e.column.id&&(b(e.row.original),T1(t)),e.column.columnModel?.dataType===eN.ParentIssue&&(_(e.row.original.getParentIssue()),T1(t)),e.column.columnModel?.dataType===eN.SubIssuesProgress&&(v("parent-issue",e.row.original.getNameWithOwnerReference()),T1(t));return;case fN.META_ENTER:A&&(w.select(e,"toggle"),T1(t));return;case fN.SHIFT_ENTER:A&&(w.selectRange(e,"replace"),T1(t));return;case fN.META_SHIFT_ENTER:A&&(w.selectRange(e,"add"),T1(t));return;case fN.SHIFT_ARROW_UP:m.length>0?(y(T3.Up,e.row),T1(t)):A&&(w.expandSelectionUp(e),d(u2({y:u8.Previous,focusType:u6.Focus})),T1(t));return;case fN.SHIFT_ARROW_DOWN:m.length>0?(y(T3.Down,e.row),T1(t)):A&&(w.expandSelectionDown(e),d(u2({y:u8.Next,focusType:u6.Focus})),T1(t));return;case fN.END:d(u2({x:u8.Last,focusType:u6.Focus})),x(N7()),T1(t);return;case fN.META_C:if(e.row.original.contentType!==eJ.RedactedItem){if(G.length>0)f(G.map(e=>e.original),{withHeaders:m.length===p.length});else{let t=T().map(e=>e.original);t.length&&j?.columnModel?f(t,{selectedFields:[j.columnModel]}):e.column.columnModel&&f([e.row.original],{selectedFields:[e.column.columnModel]})}t.preventDefault()}return;case fN.META_V:h&&e.row.original.contentType!==eJ.RedactedItem&&(g(e,T().sort((e,t)=>e.index-t.index).map(e=>e.original)),t.preventDefault());return;case fN.META_A:m.length===p.length?x(N7()):m.length>0?c(!0):0===m.length&&e.row.toggleRowSelected(!0),T1(t);return;case fN.DELETE:case fN.BACKSPACE:if(h&&G.length>0)T1(t),M(G.map(e=>e.original.id),tu);else if(r){let a=T();0===a.length&&a.push(e.row),I(e.column,a),T1(t)}return;case fN.META_D:C&&h&&N&&(T1(t),k("down"));return;case fN.ARCHIVE:if(G.length&&h&&G.every(e=>wd(e.original.contentType))){T1(t),B(G.map(e=>e.original.id),tu);return}}if(t.key.match(/^\S$/)&&!function(e){return e.altKey||e.ctrlKey||e.metaKey}(t)&&"/"!==t.key){let a=!1!==e.column.typeToEditEnabled;r&&a&&d(cI(e.row.id,e.column.id,!0,!1,!0,t.key)),T1(t);return}}},[e,a,A,d,w,x,r,h,b,m,y,j,f,p.length,T,g,c,G,M,I,C,N,k,B,_,v]),$=(0,K.useCallback)(t=>{if(1!==t.buttons||!w||e.column.nonNavigable)return;let a=o.current?.focus,r=a&&cv(a)&&!a.details.meta.suspended?a.details.x:null;e.column.id===r&&w.selectRange(e,rh(t)?"add":"replace")},[w,e,o]);return{wrapperProps:(0,K.useMemo)(()=>({ref:l,onKeyDown:V,onClick:F,onMouseDown:O,onFocus:L,onMouseEnter:$,tabIndex:e.column.nonNavigable?void 0:0}),[V,F,O,L,$,e.column.nonNavigable]),contentsProps:(0,K.useMemo)(()=>a?{replaceContents:i,isDisabled:n}:{dropdownRef:s,isDisabled:n},[a,s,i,n])}},_a=()=>[],_r=async()=>{},_n=async()=>{},_i=()=>{};function _l({row:e,column:t,...a}){let r=(0,K.useMemo)(()=>({column:t,row:e}),[t,e]),{state:{focus:n}}=ck(),{isFocused:i,isEditing:l,isSuspended:s,replaceContents:o}=Tj(r,n);return(0,F.jsx)(_s,{...a,cell:r,isFocused:i,isEditing:l,isSuspended:s,replaceContents:o})}let _s=(0,K.memo)(function({focusCellElement:e,isDragging:t,styles:a,children:r,getCellProps:n,render:i,cell:l,className:s,sx:o,isFocused:d,isEditing:u,isSuspended:c,replaceContents:m}){var p,h;let{isReadonly:f,hasWritePermissions:g}=eK(),{bulkActions:y,isMaximumExceeded:x,dragToFill:b,isBulkSelected:v,tableHasBulkSelection:w}=function(e){let{memex_table_without_limits:t,memex_mwl_table_cell_perf:a}=iz();return t&&a?{bulkActions:null,isMaximumExceeded:!1,dragToFill:null,isBulkSelected:!1,tableHasBulkSelection:!1}:function(e){let t=Tc(),a=Tp(),{isMaximumExceeded:r}=Tu(),n=Tm(e);return{bulkActions:t,isMaximumExceeded:r,dragToFill:Tb(e),isBulkSelected:n,tableHasBulkSelection:a}}(e)}(l),{columnModel:j}=l.column,C=j?j.id:l.column.id,{validationMessage:I,validationMessageId:S}=No(l.row.id,C),k=(0,K.useMemo)(()=>l.column.columnModel&&function(e,t){if(!rL(t)||t===eN.IssueType&&e===eJ.PullRequest||t===eN.ParentIssue&&(e===eJ.DraftIssue||e===eJ.PullRequest))return!1;switch(e){case eJ.RedactedItem:return!1;case eJ.DraftIssue:return!0;case eJ.Issue:case eJ.PullRequest:return t!==eN.Repository}}(l.row.original.contentType,l.column.columnModel.dataType)&&g,[l.column.columnModel,l.row.original.contentType,g]),N=(0,K.useMemo)(()=>f&&l.column.id===eT.Title?l.row.original.contentType===eJ.RedactedItem:!k,[l.column.id,l.row.original.contentType,k,f]),T=(0,K.useMemo)(()=>l.column.columnModel&&rO(l.column.columnModel.dataType),[l.column.columnModel]),{wrapperProps:_,contentsProps:A}=_t(l,d,u,k,N,m),R=d&&u&&!!I,{isCellCopySource:P}=TQ();(0,pk.N)(()=>{let t=_.ref.current;t&&d&&!u&&!u&&e(t,l.column.id,{isSuspended:c})},[u,_.ref,e,c,l.column.id,d]);let D=kv(l.column),E=(0,vB.$)({hoverable:!t,"is-focused":d&&!D,"is-selected":v,"is-disabled-selected":v&&(N||!T||x),"is-copy-source":b?.isFillSourceCell||P(l),"is-editing":u,"is-invalid":R,draggable:D,"is-dragging":t,"cursor-not-allowed":!f&&!k,"is-first-row":0===l.row.index},s),M=l.column.id===kb?1:"unset",B=n({style:(0,K.useMemo)(()=>({flexGrow:M,overflowX:D?"visible":"unset",whiteSpace:"nowrap",minWidth:l.column.width,...a}),[l.column.width,M,D,a]),className:E,role:"gridcell"});return(0,K.createElement)(_o,{"aria-selected":v&&!N,..._,...B,key:B.key,...(0,ey.G)((p=l.row.index,h=l.column.columnModel?.name||l.column.id,`TableCell{row: ${p}, column: ${h}}`)),sx:o,"data-test-cell-is-focused":d||void 0,"data-test-cell-is-editing":u||void 0,"data-test-cell-is-suspended":c||void 0,children:[i(u?"CellEditor":"Cell",A),S&&(0,F.jsx)(NK.n,{id:S,message:I}),r,b&&(d&&null!==y&&T&&!N&&!w||b.isFillLastCell)&&(0,F.jsx)(_d,{onMouseDown:b.onFillHandleMousedown,onDoubleClick:b.onFillHandleDoubleClick})]})});_l.displayName="TableCell";let _o=Z.Ay.div.withConfig({displayName:"table-cell__StyledTableCell",componentId:"sc-65d1c1eb-0"})(["scroll-margin-top:35px;scroll-margin-bottom:64px;cursor:default;border-left:1px solid ",";border-bottom:1px solid ",";outline:none;&:first-of-type{border-left:0;}&:nth-of-type(2){border-left:0;}&:last-child{border-right:0;}.row-highlight &.hoverable:hover{background-color:unset;}&.is-selected{position:relative;overflow-x:visible !important;overflow-y:visible;background-color:",";::before{content:'';position:absolute;width:calc(100%);height:calc(100%);border:1px solid ",";left:-1px;top:-1px;z-index:0;pointer-events:none;}}&.is-focused,&.is-copy-source{position:relative;overflow-x:visible !important;overflow-y:visible;::before{content:'';position:absolute;width:calc(100% - 2px);height:calc(100% - 2px);border-radius:2px;left:-1px;top:-1px;z-index:0;pointer-events:none;border-width:var(--borderWidth-thick);border-color:",";}}&.is-focused::before{border-style:solid;box-shadow:inset -3px 0 0 0 ",",inset 0 -3px 0 0 ",",inset 3px 0 0 0 ",",inset 0 3px 0 0 ",",",";}&.is-copy-source::before{border-style:dotted;}&.is-copy-source.is-focused::before{border-style:dashed;}&.is-focused.is-first-row{::before{top:0px;height:calc(100% - 3px);}}&.is-focused.is-editing{background-color:",";::before{box-shadow:inset -3px 0 0 0 ",",inset 0 -3px 0 0 ",",inset 3px 0 0 0 ",",inset 0 3px 0 0 ",",",";}::after{display:none;}}&.is-focused.is-invalid{::before{border-color:",";}}&.is-focused.cursor-not-allowed::before{border-color:",";box-shadow:none;}&.cursor-not-allowed{cursor:not-allowed;}&.is-disabled-selected{::before{border-color:",";}}&.draggable{cursor:grab;user-select:none;}&.draggable:active,&.is-dragging{cursor:grabbing;user-select:none;}.reveal-link-icon{visibility:hidden;}&:hover .reveal-link-icon{visibility:visible;}",""],(0,q.Jt)("colors.border.muted"),(0,q.Jt)("colors.border.muted"),(0,q.Jt)("colors.accent.subtle"),(0,q.Jt)("colors.accent.emphasis"),(0,q.Jt)("colors.accent.emphasis"),(0,q.Jt)("colors.canvas.default"),(0,q.Jt)("colors.canvas.default"),(0,q.Jt)("colors.canvas.default"),(0,q.Jt)("colors.canvas.default"),(0,q.Jt)("shadows.shadow.medium"),(0,q.Jt)("colors.canvas.default"),(0,q.Jt)("colors.canvas.default"),(0,q.Jt)("colors.canvas.default"),(0,q.Jt)("colors.canvas.default"),(0,q.Jt)("colors.canvas.default"),(0,q.Jt)("shadows.shadow.medium"),(0,q.Jt)("colors.danger.fg"),(0,q.Jt)("colors.fg.subtle"),(0,q.Jt)("colors.fg.subtle"),lb.A),_d=(0,K.memo)(({onMouseDown:e,onDoubleClick:t})=>(0,F.jsx)("div",{"aria-hidden":!0,onMouseDown:e,onDoubleClick:t,onClick:e=>e.stopPropagation(),style:{height:"12px",width:"12px",bottom:"-6px",right:"-6px"},className:TJ.Box,...(0,ey.G)("table-cell-fill-handle")}));_d.displayName="FillerHandle";try{_s.displayName||(_s.displayName="InnerTableCell")}catch{}let _u=Z.Ay.div.withConfig({displayName:"table-row__StyledTableRow",componentId:"sc-b6819590-0"})(["display:flex;background-color:",";&.row-highlight{position:relative;background-color:",";box-shadow:0 0 0 1px ",";> *{border-bottom:transparent;}}&.row-selected{position:relative;background-color:",";&.selection-top-edge{box-shadow:0 -1px 0 0 ",";&.selection-bottom-edge{box-shadow:0 0 0 1px ",";}}&.selection-bottom-edge{box-shadow:0 1px 0 0 ",";}}&.hoverable:not(.is-focused):hover{background-color:",";}&.hoverable:hover .menu-trigger,&.hoverable:focus .menu-trigger{opacity:1;}",""],(0,q.Jt)("colors.canvas.default"),(0,q.Jt)("colors.accent.subtle"),(0,q.Jt)("colors.accent.emphasis"),(0,q.Jt)("colors.accent.subtle"),(0,q.Jt)("colors.accent.emphasis"),(0,q.Jt)("colors.accent.emphasis"),(0,q.Jt)("colors.accent.emphasis"),(0,q.Jt)("colors.canvas.subtle"),lb.A),_c=(0,K.createContext)({rowNumber:0}),_m={height:"37px",width:"100%",flexShrink:0},_p=(0,K.memo)(e=>{let{flatRows:t,groupedRows:a}=Nj(),r=Nw();e.data.prepareRow(e.row);let{setNodeRef:n,setActivatorNodeRef:i,listeners:l,isSorting:s,isDragging:o,isDropped:d}=NU(e.row),u=!!r?.[e.row.id]&&T6(e.row),{beforeSelected:c,afterSelected:m,firstInGroup:p,lastInGroup:h}=T7(e.row,t,a),f=(0,vB.$)({hoverable:!s,"row-selected":u,"row-highlight":o||d,"selection-top-edge":u&&(!c||p),"selection-bottom-edge":u&&(!m||h)}),g=(0,K.useMemo)(()=>({rowNumber:e.index+1,setSortActivatorNodeRef:i,sortListeners:l}),[e.index,i,l]),y=e.row.getRowProps({className:f});return(0,F.jsx)(_c.Provider,{value:g,children:(0,K.createElement)(_u,{...y,key:y.key,...(0,ey.G)(TY(e.row.index)),style:_m,"data-test-row-is-selected":u,"data-hovercard-subject-tag":iV(e.row.original),ref:n},e.row.cells.map(t=>(0,F.jsx)(_l,{row:t.row,column:t.column,render:t.render,getCellProps:t.getCellProps,focusCellElement:e.data.focusCellElement,isDragging:s},t.column.id)))})});_p.displayName="TableRow";try{_c.displayName||(_c.displayName="RowContext")}catch{}let _h={SET_ROW_MENU_OPEN:"useRowMenuShortcut.setRowMenuOpen"},_f=Object.values(_h),_g=e=>_f.includes(e.type),_y=e=>({type:_h.SET_ROW_MENU_OPEN,origin:e}),_x=e=>{e.stateReducers.push(_b)};_x.pluginName="useRowMenuShortcut";let _b=(e,t)=>{let a;return _g(t)?t.type===_h.SET_ROW_MENU_OPEN?(a={...e,rowMenuShortcutOrigin:t.origin},rn(e,a))?e:a:void 0:e},_v={position:"relative",overflow:"visible",userSelect:"none",WebkitUserSelect:"none"},_w=e=>{for(let t of e)t.isSelected||t.toggleRowSelected()},_j=e=>{for(let t of e)t.isSelected&&t.toggleRowSelected()};function _C({column:e,row:t}){let a=Nv(),r=Nj(),{selectedFlatRows:n}=r,{navigationDispatch:i}=cN(),l=(0,K.useContext)(Nh)??void 0,{postStats:s}=iN(),{contentType:o}=t.original,{rowNumber:d,setSortActivatorNodeRef:u,sortListeners:c}=(0,K.useContext)(_c),[m,p]=(0,K.useState)(!1),[h,f]=(0,K.useState)(!1),g=(0,K.useRef)(null),y=(0,K.useRef)(!1),{hasWritePermissions:x}=eK(),b=(0,K.useRef)(null),v=(0,K.useRef)(null),{memex_table_without_limits:w}=iz(),{onRowClick:j,onRowPointerDown:C,focusLastRowIndex:I}=_e(t,(0,K.useMemo)(()=>[b,v],[b,v])),S=NR(t,r.groupedRows),k=NP(r.rows,S,r.groupedRows),N=(0,K.useMemo)(()=>n.filter(e=>T8(e)),[n]),T=(0,K.useCallback)(()=>{l&&i(u5(l)),a(_y())},[l,a,i]),_=(0,K.useCallback)(()=>{(0,pN.flushSync)(()=>{i(cS()),p(!0)})},[i]),A=(0,K.useCallback)(()=>{y.current||T(),p(!1)},[y,T,p]),R=(0,K.useCallback)(e=>e?_():A(),[_,A]),P=(0,K.useCallback)(()=>{y.current=!0,-1!==N.findIndex(e=>e.id===t.id)?_w(N):(_j(N),_w([t]))},[t,N]),D=(0,K.useCallback)(()=>{y.current=!1,A(),g.current?.focus()},[A]),E=(0,K.useCallback)(e=>{y.current=!1,T(),a(N7()),I(e)},[T,a,I]);(0,K.useEffect)(()=>{l?.details.y===t.id&&o!==eJ.RedactedItem&&R(!0)},[t.id,R,l?.details.y,o]);let{openRemoveConfirmationDialog:M}=wS(P,E,D),{openArchiveConfirmationDialog:B}=ww(P,E,D),L=(0,K.useCallback)(()=>{M([t.original.id],td)},[M,t.original.id]),O=(0,K.useCallback)(()=>{B([t.original.id],td)},[B,t.original.id]),G=(0,K.useCallback)(()=>{B(N.map(e=>e.original.id),td)},[B,N]),V=(0,K.useCallback)(()=>{M(N.map(e=>e.original.id),td)},[M,N]),$=T8(t)&&N.length>1,W=N.every(e=>wd(e.original.contentType))&&wd(o)&&x,z=(0,K.useCallback)(()=>{s({name:eY,ui:"row-dragger-menu",memexProjectItemId:t.original.id})},[s,t]),H=(0,K.useMemo)(()=>o!==eJ.RedactedItem&&x?{draggable:!0,style:_v,onClick:j,ref:e=>{u?.(e),b.current=e},onPointerDown:e=>{C(),c?.onPointerDown?.(e)}}:{style:{..._v,cursor:"default"},title:"Reordering this item is disabled",onClick:j,onPointerDown:void 0,ref:b},[o,x,j,u,C,c]),{isTableNarrow:U}=kw();return kv(e)?(0,F.jsxs)(NO,{...H,className:NG.BaseCell,...(0,ey.G)("row-dragger"),children:[(0,F.jsx)("div",{ref:v,className:NG.Box,children:d}),x&&o!==eJ.RedactedItem&&!U&&(0,F.jsxs)(F.Fragment,{children:[(0,F.jsxs)(yu.W,{open:m,onOpenChange:R,anchorRef:g,children:[(0,F.jsx)(yu.W.Anchor,{children:(0,F.jsx)(fE.K,{ref:g,icon:ly.TriangleDownIcon,"aria-label":"Row actions",className:(0,vB.$)("menu-trigger",NG.IconButton),tabIndex:-1,block:!0,...(0,ey.G)("row-menu-trigger")})}),(0,F.jsx)(yu.W.Overlay,{...(0,ey.G)("row-menu"),children:(0,F.jsxs)(fi.l,{children:[$||o!==eJ.DraftIssue?null:(0,F.jsxs)(fi.l.Item,{onSelect:()=>f(!0),...(0,ey.G)("row-menu-convert-to-issue"),children:[(0,F.jsx)(fi.l.LeadingVisual,{children:(0,F.jsx)(ly.IssueOpenedIcon,{})}),"Convert to issue"]}),W?(0,F.jsx)(F.Fragment,{children:$?(0,F.jsxs)(fi.l.Item,{onSelect:G,...(0,ey.G)("row-menu-archive-multiple"),children:[(0,F.jsx)(fi.l.LeadingVisual,{children:(0,F.jsx)(ly.ArchiveIcon,{})}),"Archive ",N.length," items",(0,F.jsx)(fi.l.TrailingVisual,{children:(0,F.jsx)(kI,{})})]}):(0,F.jsxs)(fi.l.Item,{onSelect:O,...(0,ey.G)("row-menu-archive"),children:[(0,F.jsx)(fi.l.LeadingVisual,{children:(0,F.jsx)(ly.ArchiveIcon,{})}),"Archive",(0,F.jsx)(fi.l.TrailingVisual,{children:(0,F.jsx)(kI,{})})]})}):null,$?(0,F.jsxs)(fi.l.Item,{variant:"danger",onSelect:V,...(0,ey.G)("row-menu-delete-multiple"),children:[(0,F.jsx)(fi.l.LeadingVisual,{children:(0,F.jsx)(ly.TrashIcon,{})}),"Delete ",N.length," selected items from project",(0,F.jsx)(fi.l.TrailingVisual,{children:(0,F.jsx)(kC,{})})]}):(0,F.jsxs)(fi.l.Item,{variant:"danger",onSelect:L,...(0,ey.G)("row-menu-delete"),children:[(0,F.jsx)(fi.l.LeadingVisual,{children:(0,F.jsx)(ly.TrashIcon,{})}),"Delete from project",(0,F.jsx)(fi.l.TrailingVisual,{children:(0,F.jsx)(kC,{})})]}),w&&k.length>1&&(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(fi.l.Divider,{}),(0,F.jsx)(NL,{selectedRow:t})]})]})})]}),(0,F.jsx)(Cz,{anchorRef:b,isOpen:h,item:t.original,onOpenChange:e=>f(e),onSuccess:z,...(0,ey.G)("row-menu-repo-picker")})]})]}):null}let _I=(0,K.memo)(_C);try{_C.displayName||(_C.displayName="RowDragger")}catch{}let _S={Header:"",id:kx,width:60,canSort:!1,nonNavigable:!0,canBeShifted:!1,canReorder:!1,Cell:e=>(0,F.jsx)(_I,{column:e.column,row:e.row}),CellEditor:e=>(0,F.jsx)(_I,{column:e.column,row:e.row})};function _k(e){return[_S,...e]}let _N=e=>{e.columns.unshift(_k)};function _T(){let{getRoadmapSettingsOrDefaults:e}=function(){let{allColumnsRef:e}=sl(),t=e.current.find(e=>e.dataType===eN.Title),a=(0,K.useCallback)(()=>{let[t,a]=e.current.reduce((e,t)=>(o1(t)?e[0].push(t.databaseId):oZ(t)&&e[1].push(t.databaseId),e),[[],[]]);return t?.length?kr(t):a?.length?[a[0]??lH,a[0]??lH]:kr([])},[e]),r=(0,K.useCallback)((e,r)=>{let n=t&&S6(l$.Roadmap,e)[t.databaseId],i=t?{[t.databaseId]:n??350}:{},l={...e.roadmap?.columnWidths??{},...i};return r?{columnWidths:l}:e.roadmap?.dateFields||e.roadmap?.zoomLevel?{...e.roadmap,columnWidths:l}:{dateFields:a(),zoomLevel:ka(e),columnWidths:l}},[a,t]);return(0,K.useMemo)(()=>({getRoadmapSettingsOrDefaults:r}),[r])}(),{getTableSettingsOrDefaults:t}=function(){let e=(0,K.useCallback)(e=>({columnWidths:e.table?.columnWidths??{}}),[]);return(0,K.useMemo)(()=>({getTableSettingsOrDefaults:e}),[e])}(),a=(0,K.useCallback)((a,r=!1)=>({...a,roadmap:e(a,r),table:t(a)}),[e,t]),r=(0,K.useCallback)((e,t)=>{let r=t.localViewState.layout;if(r===e||r!==l$.Roadmap&&e!==l$.Roadmap)return;let n=r===l$.Roadmap&&!ke(t.serverViewState.layoutSettings.roadmap)&&ke(t.localViewState.layoutSettings.roadmap);return a(t.localViewState.layoutSettings,n)},[a]);return(0,K.useMemo)(()=>({getNextLayoutSettings:r,getLayoutSettingsWithDefaults:a}),[r,a])}_N.pluginName="useRowDragHandle";let __=()=>{let{findColumn:e}=y$(),{currentView:t,viewStateDispatch:a}=iS(),{getLayoutSettingsWithDefaults:r}=_T(),n=Ip(),i=(0,K.useCallback)(a=>{let n=e(a);if(n){let e=t?.localViewState&&r(t?.localViewState.layoutSettings);if(e){let a=S6(t.localViewState.layout,e),r=a?.[n.databaseId.toString()];if(r)return r}}return n?.settings.width??void 0},[e,r,t]);return{updateWidth:(0,K.useCallback)(async(r,l)=>{let s=Math.round(l),o=e(r);if(!o||i(r)===s)return;let d=t?.number;if(!d)return;let u=lY(t.localViewState.layout);if(!S3(u))return;let{layout:c}=t.localViewState,m=S6(c,t.localViewState.layoutSettings),p={...m,[o.databaseId.toString()]:s},h=S8(t.serverViewState,c,p);a({type:lc.SetColumnWidths,viewType:u,viewNumber:d,columnWidths:p}),l3(),await n.perform({viewNumber:t.number,view:uT(h,lz)}),"failed"===n.status.current.status&&a({type:lc.SetColumnWidths,viewType:u,viewNumber:d,columnWidths:m})},[i,e,t,n,a]),getWidth:i}},_A=(0,SJ.A)("localStorage"),_R=(0,K.createContext)(null),_P={roadmapTruncateTitles:"Truncate titles",roadmapShowDateFields:"Show date fields"};function _D(e,t,a){let r=_A.getItem(`projects.${e}`),[n,i]=(0,K.useReducer)(_E,t,()=>void 0!==a?a:r?"true"===r:t),{postStats:l}=iN(),s=(0,K.useCallback)(()=>{i({type:"toggle",name:e}),l({name:"user_settings_edit",context:JSON.stringify({name:e,enabled:!n})})},[n,e,l]),o=_P[e];return(0,K.useMemo)(()=>({name:e,enabled:n,toggleEnabled:s,label:o}),[e,n,s,o])}function _E(e,t){if("toggle"===t.type)return _A.setItem(`projects.${t.name}`,String(!e)),!e;throw Error(`Unknown action type: ${t.type}`)}function _M({children:e}){let t=_D("roadmapTruncateTitles",!1),a=_D("roadmapShowDateFields",!1);return(0,F.jsx)(_R.Provider,{value:(0,K.useMemo)(()=>({roadmapTruncateTitles:t,roadmapShowDateFields:a}),[a,t]),children:e})}let _B=()=>{let e=(0,K.useContext)(_R);return(0,ee.A)(null!==e,"useUserSettings must be used within a UserSettingsProvider"),e};try{_R.displayName||(_R.displayName="UserSettingsContext")}catch{}try{_M.displayName||(_M.displayName="UserSettingsProvider")}catch{}let _L=[],_F=(0,K.memo)(function({children:e}){let{currentView:t,viewStateDispatch:a}=iS(),{allColumns:r}=i5(),n=(0,K.useCallback)((e,t)=>{a({type:lc.SetRoadmapDateFields,viewNumber:e,dateFields:t})},[a]),i=(0,K.useCallback)((e,t)=>{a({type:lc.ToggleRoadmapMarkerFields,viewNumber:e,field:t})},[a]),l=(0,K.useMemo)(()=>t?.localViewState?.layout===l$.Roadmap&&t.localViewStateDeserialized.layoutSettings?.roadmap?.dateFields?.length?kr(t.localViewStateDeserialized.layoutSettings.roadmap.dateFields):kr([]),[t]),s=(0,K.useMemo)(()=>l.length>0&&t?.serverViewState.layoutSettings.roadmap===void 0,[t?.serverViewState.layoutSettings.roadmap,l.length]),[o,d]=(0,K.useState)({}),u=(0,K.useMemo)(()=>o[t?.id??0]??!1,[t?.id,o]),c=(0,K.useCallback)(()=>{t?.id&&!u&&d({...o,[t.id]:!0})},[t?.id,u,o]),m=(0,K.useMemo)(()=>t?.localViewState?.layout!==l$.Roadmap?new Map:r.reduce((e,t)=>{if(oZ(t)){let a=aK(t).reduce((e,t)=>{let{id:a,startDate:r,duration:n}=t,i=aH({startDate:r,duration:n}),l={...t,start:i.startDate,end:i.endDate};return e.set(a,l),e},new Map);e.set(t.id,a)}return e},new Map),[r,t]),p=(0,K.useCallback)((e,t)=>{let a=l[t];if(!a||"none"===a)return{date:void 0,iteration:void 0};let r=e[a.id];if(!r)return{date:void 0,iteration:void 0};if(o1(a))return{date:aw(r)?.value,iteration:void 0};if(oZ(a)&&"id"in r){let e=m.get(a.id);if(e){let a=e.get(r.id);if(a)return{date:0===t?a.start:a.end,iteration:a}}}return{date:void 0,iteration:void 0}},[l,m]),h=(0,K.useCallback)(e=>{if(!l.length)return{start:void 0,end:void 0};let t=p(e,0),a=p(e,1);return{start:t.date,startIteration:t.iteration,end:a.date,endIteration:a.iteration}},[p,l]),f=(0,K.useMemo)(()=>ka(t?.localViewState?.layoutSettings),[t]),g=(0,K.useCallback)((e,t)=>{a({type:lc.SetRoadmapZoomLevel,viewNumber:e,zoomLevel:t})},[a]),{getWidth:y,updateWidth:x}=__(),{hasWritePermissions:b}=eK(),v=t&&S4(t.localViewState.layout),w=r.find(e=>e.dataType===eN.Title)?.id,[j,C]=(0,K.useState)(()=>new Map),I=(0,K.useCallback)(e=>{t&&b&&C(a=>new Map(a).set(t.number,e))},[t,b]),{memex_small_viewport_a11y:S}=iz(),{roadmapShowDateFields:k}=_B(),N=k.enabled,T=l[0]!==lH,_=l[1]!==lH,A=N&&(T||_)?T&&_&&l[0]!==l[1]?2:1:0,{clientWidth:R}=ki(),P=R??0,D=t?.number&&j.get(t.number),E=w&&v?y(w):void 0,M=S&&P<=1024&&(E??0)>P-180,[B,L]=(0,uJ.M)("projects.roadmapNarrowViewportTitleColumnWidth",75),O=(0,K.useCallback)(e=>{e&&e>75&&e<1e3&&L(e)},[L]),G=(0,K.useMemo)(()=>S&&M?B:D??E??650,[S,M,D,E,B]),V=120*A+60,$=(0,K.useCallback)(e=>{if(!w)throw Error("Title column not found");if(b){if(M){L(e);return}return I(null),x(w,e)}},[b,L,M,w,I,x]),W=t?.localViewStateDeserialized?.layoutSettings.roadmap?.markerFields??_L;return(0,F.jsx)(kg.Provider,{value:g,children:(0,F.jsx)(kh.Provider,{value:f,children:(0,F.jsx)(ku.Provider,{value:G+V,children:(0,F.jsx)(km.Provider,{value:V,children:(0,F.jsx)(kl.Provider,{value:(0,K.useMemo)(()=>({dateFields:l,markerFields:W,areDateFieldsDefault:s,setDateFields:n,toggleMarkerField:i,isRoadmapMarkerFieldsDirty:t?.isRoadmapMarkerFieldsDirty??!1,isRoadmapDateFieldsDirty:t?.isRoadmapDateFieldsDirty??!1,isRoadmapZoomLevelDirty:t?.isRoadmapZoomLevelDirty??!1,getTimeSpanFromColumnData:h,titleColumnWidth:G,updateTitleColumnWidth:$,updateLocalTitleColumnWidth:M?O:I,showDateFields:N}),[l,W,s,n,i,t?.isRoadmapMarkerFieldsDirty,t?.isRoadmapDateFieldsDirty,t?.isRoadmapZoomLevelDirty,h,G,$,M,O,I,N]),children:(0,F.jsx)(ks.Provider,{value:(0,K.useMemo)(()=>({isDateFieldsPopoverDisabled:u,disableDateFieldsPopover:c}),[u,c]),children:e})})})})})})});try{_F.displayName||(_F.displayName="RoadmapSettingsProvider")}catch{}let _O=(0,K.memo)(function({children:e}){let{currentView:t,viewStateDispatch:a}=iS(),r=Ip(),n=t?.localViewStateDeserialized.sliceBy?.field??null;n&&rE(n.dataType)||(n=null);let i=(0,K.useCallback)((e,t)=>{a({type:lc.SetSliceValue,value:t,viewNumber:e})},[a]),l=(0,K.useCallback)((e,t)=>{a({type:lc.SetSliceValue,value:"",viewNumber:e}),a({type:lc.SetSliceBy,column:t,viewNumber:e})},[a]),s=(0,K.useCallback)(e=>{a({type:lc.SetSliceValue,value:"",viewNumber:e}),a({type:lc.ClearSliceBy,viewNumber:e})},[a]),o=(0,K.useCallback)(async e=>{let n=t?.number;if(!n)return;a({type:lc.SetSliceByPanelWidth,viewNumber:n,panelWidth:e});let i=t.serverViewState.sliceBy||{},l={...t.serverViewState,sliceBy:{...i,panelWidth:e}};await r.perform({viewNumber:n,view:uT(l,lz)}),"failed"===r.status.current.status&&a({type:lc.SetSliceByPanelWidth,viewNumber:n,panelWidth:i.panelWidth})},[t,r,a]);return(0,F.jsx)(n_.Provider,{value:(0,K.useMemo)(()=>({sliceField:n,setSliceField:l,clearSliceField:s,isSliceByDirty:t?.isSliceByDirty??!1,sliceValue:t?.localViewStateDeserialized.sliceValue??null,setSliceValue:i,sliceByPanelWidth:t?.localViewState.sliceBy?.panelWidth,setSliceByPanelWidth:o}),[n,l,s,t?.isSliceByDirty,t?.localViewStateDeserialized.sliceValue,t?.localViewState.sliceBy?.panelWidth,i,o]),children:e})});try{_O.displayName||(_O.displayName="SliceByProvider")}catch{}let _G=e=>{switch(e){case"asc":return"desc";case"desc":return null;case null:return"asc"}},_V=e=>{switch(e){case 0:return"primary";case 1:return"secondary";default:return`no. ${e+1}`}},_$=[],_W=(0,K.memo)(function({children:e}){let{currentView:t,viewStateDispatch:a}=iS(),r=t?.number,n=t?.localViewStateDeserialized.sortByColumnsAndDirections??_$,i=(0,K.useCallback)((...e)=>{void 0!==r&&a({type:lc.SetSortedBy,sorts:e,viewNumber:r})},[r,a]),l=(0,K.useCallback)((e=0)=>{void 0!==r&&a({type:lc.SetSortedBy,sorts:n.slice(0,e),viewNumber:r})},[r,a,n]),s=(0,K.useCallback)(e=>n.find(t=>t.column.id===e.id),[n]),o=(0,K.useCallback)((e,t)=>{let a=n.findIndex(t=>t.column.id===e.id);if(null===t&&a>-1){let e=[...n];e.splice(a,1),i(...e)}else if(null==t)return;else if(a>-1){let r=[...n];r.splice(a,1,{column:e,direction:t}),i(...r)}else{let a=[...n];null!=t&&(a=a.slice(0,1)).push({column:e,direction:t}),i(...a)}},[i,n]),d=(0,K.useCallback)((e,t)=>{let a=n.findIndex(t=>t.column.id===e.id);if(null!=t){if(a>0)i({column:e,direction:t});else{let a=[...n];a.splice(0,1,{column:e,direction:t}),i(...a)}}},[i,n]);return(0,F.jsx)(ur.Provider,{value:(0,K.useMemo)(()=>({sorts:n,isSorted:n.length>0,setSortedBy:i,clearSortedBy:l,isSortedByDirty:t?.isSortedByDirty??!1,setColumnSort:o,setPrimarySortPreservingSecondary:d,getColumnSort:s}),[l,t?.isSortedByDirty,s,o,d,i,n]),children:e})});try{_W.displayName||(_W.displayName="SortedByProvider")}catch{}let _z=(0,K.memo)(function({children:e}){let{currentView:t,viewStateDispatch:a}=iS(),r=(0,K.useCallback)((e,t)=>{a({type:lc.SetVerticalGroupedBy,viewNumber:e,column:t})},[a]);return(0,F.jsx)(d9.Provider,{value:(0,K.useMemo)(()=>({groupedByColumnId:t?.localViewStateDeserialized.verticalGroupByColumns[0]?.id,groupedByColumn:t?.localViewStateDeserialized.verticalGroupByColumns[0],setGroupedBy:r,isGroupedByDirty:t?.isVerticalGroupedByDirty??!1}),[t?.isVerticalGroupedByDirty,t?.localViewStateDeserialized.verticalGroupByColumns,r]),children:e})});try{_z.displayName||(_z.displayName="VerticalGroupedByProvider")}catch{}var _H=a(11499);async function _U(e){let t=new URL(nP("memex-columns-get-api-data").url,window.location.origin);for(let a of e.memexProjectColumnIds)t.searchParams.append("columnIds[]",`${a}`);let{data:a}=await ig(t);return a}let _q=()=>{let{loadedFieldIdsRef:e}=sl();return{hasColumnData:(0,K.useCallback)(t=>e.current.has(t),[e])}},_K=[eT.Repository],_Q=[eT.Title,eT.Assignees,eT.Status,..._K],_J=[..._K],_X=[];function _Y(){let{findMissingColumnIds:e}=_1(),{loadColumnsWithItemColumnValues:t}=_2(),[a,r]=(0,K.useState)(_X),n=(0,K.useCallback)(t=>{let a=e(t);r(e=>0===a.filter(t=>!e.includes(t)).length?e:[...new Set([...e,...a])])},[e]),{perform:i}=uN({request:(0,K.useCallback)(async e=>{await t(e),r(_X)},[t])});return(0,K.useEffect)(()=>{a.length>0?i(a):r(_X)},[a,e,i]),{missingFieldIds:a,addPotentiallyMissingFieldIds:n}}function _Z(){let{findFilterableFieldByName:e}=h5();return{getFieldIdsFromFilter:(0,K.useCallback)(function(t){let a=new Set,{fieldFilters:r}=nr(t),n=t=>{let r=e(t);r&&a.add(r.id)};for(let e of r){let t=e[0],a=e[1];if(ni(t)&&(t=t.slice(1)),nn(t))for(let e of a)n(e);else n(t)}return a},[e])}}let _0=e=>{let{findMissingColumnIds:t}=_1(),{getFieldIdsFromFilter:a}=_Z(),{missingFieldIds:r,addPotentiallyMissingFieldIds:n}=_Y();return(0,K.useEffect)(()=>{e&&n(t(function(e,t){let{localViewStateDeserialized:{visibleFields:a,viewType:r,filter:n,verticalGroupByColumns:i,horizontalGroupByColumns:l,aggregationSettings:s,sortByColumnsAndDirections:o,sliceBy:d}}=e,u=new Set(a.map(e=>e.id).concat(r!==lK.Table?_Q:_J));for(let e of i)e.id!==eT.Status&&u.add(e.id);for(let e of l)u.add(e.id);for(let e of s.sum)u.add(e.id);for(let e of o)u.add(e.column.id);d.field?.id&&(u.add(d.field.id),d.field.id===eT.TrackedBy&&u.add(eT.Tracks));let c=d.filter?t(d.filter):[];return Array.from(new Set([...u,...t(n),...c]))}(e,a)))},[n,e,t,a]),r},_1=()=>{let{hasColumnData:e}=_q();return{findMissingColumnIds:(0,K.useCallback)(t=>[...new Set(t).add(eT.Status)].filter(t=>!e(t)),[e])}},_2=()=>{let{updateAllColumnValues:e}=Cy(),{addToast:t}=lV(),{memex_table_without_limits:a}=iz();return{loadColumnsWithItemColumnValues:(0,K.useCallback)(async r=>{if(a||0===r.length)return;let n=[];await Promise.allSettled(r.map(async t=>{for(let a of(await _U({memexProjectColumnIds:[t]})).memexProjectColumns){e(a);let t=a.partialFailures;t&&n.push(t.message)}})),n&&n.length>0&&t({message:n.join(", "),type:nF.warning,keepAlive:!0})},[t,a,e])}};function _5(e,t,a=""){if(!e)throw Error("Must provide a view to get a url for");let r=new URLSearchParams(a);if(e.isViewTypeDirty?r.set(dE,e.localViewStateDeserialized.viewType):r.delete(dE),e.isFilterDirty?r.set(dD,e.localViewStateDeserialized.filter):r.delete(dD),r.delete(dP),r.delete(dR),e.isSortedByDirty){let t=e.localViewStateDeserialized.sortByColumnsAndDirections;if(t.length>0)for(let{column:e,direction:a}of t)r.append(dP,a),r.append(dR,`${e.id}`);else r.set(dP,""),r.set(dR,"")}if(e.isHorizontalGroupedByDirty){let[t]=e.localViewStateDeserialized.horizontalGroupByColumns;t?r.set(dM,`${t.id}`):r.set(dM,"")}else r.delete(dM);if(e.isVerticalGroupedByDirty){let[t]=e.localViewStateDeserialized.verticalGroupByColumns;t?r.set(dB,`${t.id}`):r.set(dB,"")}else r.delete(dB);if(e.isVisibleFieldsDirty){let t=e.localViewStateDeserialized.visibleFields;t.length>0?r.set(dL,JSON.stringify(t.map(e=>e.id))):r.set(dL,"")}else r.delete(dL);if(e.isAggregationSettingsDirty){let{sum:t,hideItemsCount:a}=e.localViewStateDeserialized.aggregationSettings;t.length>0?r.set(dO,JSON.stringify(t.map(e=>e.id))):r.set(dO,""),r.set(dF,JSON.stringify(!!a))}else r.delete(dO),r.delete(dF);if(e.isSliceByDirty){let t=e.localViewStateDeserialized.sliceBy;t.field?r.set(dG,`${t.field.id}`):r.set(dG,"")}else r.delete(dG);if(e.localViewStateDeserialized.sliceValue){let t=`${e.localViewStateDeserialized.sliceValue}`;r.set(dV,t)}else r.delete(dV);return{pathname:i9.generatePath({...t,viewNumber:e.localViewStateDeserialized.number}),search:r.toString()}}function _3(e,t){return e.length!==t.length||JSON.stringify(e)!==JSON.stringify(t)}function _4({serverViewState:e,localViewState:t}){var a,r;let n=e.layout!==t.layout,i=_3(e.groupBy,t.groupBy),l=_3(e.verticalGroupBy||[],t.verticalGroupBy||[]),s=e.sortBy.length!==t.sortBy.length||JSON.stringify(e.sortBy)!==JSON.stringify(t.sortBy),o=e.filter?.trim()!==t.filter?.trim(),d=_3(e.visibleFields,t.visibleFields),u=!!t.aggregationSettings?.hideItemsCount,c=!!e.aggregationSettings?.hideItemsCount!==u||_3(t.aggregationSettings?.sum||[],e.aggregationSettings?.sum||[]),m=_3(kr(t.layoutSettings?.roadmap?.dateFields??[]),kr(e.layoutSettings?.roadmap?.dateFields??[])),p=(a=t.layoutSettings?.roadmap?.markerFields??[],r=e.layoutSettings?.roadmap?.markerFields??[],a.length!==r.length||JSON.stringify(a.slice().sort())!==JSON.stringify(r.slice().sort())),h=(t.layoutSettings?.roadmap?.zoomLevel||lU.Month)!==(e.layoutSettings?.roadmap?.zoomLevel||lU.Month),f=t.sliceBy?.field!==e.sliceBy?.field,g=t.sliceBy?.filter!==e.sliceBy?.filter;return{isViewTypeDirty:n,isHorizontalGroupedByDirty:i,isVerticalGroupedByDirty:l,isSortedByDirty:s,isFilterDirty:o,isVisibleFieldsDirty:d,isAggregationSettingsDirty:c,isRoadmapDateFieldsDirty:m,isRoadmapZoomLevelDirty:h,isRoadmapMarkerFieldsDirty:p,isSliceByDirty:f,isSliceByFilterDirty:g,isViewStateDirty:o||i||l||s||n||d||c||m||h||p||f||g}}var _6=a(98488);let _8=(0,SJ.A)("sessionStorage"),_7=Symbol("effects"),_9=(e,t)=>(a,r)=>{let{[_7]:n,...i}=a,l=e(i,r);return{...l,[_7]:n.concat([()=>t(l,a,r)])}},Ae=e=>{let t=e[_7];(0,K.useEffect)(()=>{if(!t)return;let e=[];for(;t.length>0;){let a=t.shift();if(a&&"function"==typeof a){let t=a();t&&"function"==typeof t&&e.push(t)}}return()=>{for(let t of e)t&&t()}},[t])};function At(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Aa(e){if(!Ar(e))return!1;let t=e.constructor;if(void 0===t)return!0;let a=t.prototype;return!!(Ar(a)&&Object.prototype.hasOwnProperty.call(a,"isPrototypeOf"))}function Ar(e){return"[object Object]"===Object.prototype.toString.call(e)}let An=(e,t)=>{if(t.type===lc.RemoveField){let a=new Set(e);return a.has(t.column.databaseId)?(a.delete(t.column.databaseId),Array.from(a)):e}return e},Ai=(e,t)=>{switch(t.type){case lc.RemoveField:case lc.HideField:if(-1===e.findIndex(([e])=>e!==t.column.databaseId))return e;return e.filter(([e])=>e!==t.column.databaseId);default:return e}},Al=(e,t)=>{switch(t.type){case lc.ShowField:{let a=new Set(e);if(a.has(t.column.databaseId))return e;return a.add(t.column.databaseId),Array.from(a)}case lc.RemoveField:case lc.HideField:{let a=new Set(e);if(!a.has(t.column.databaseId))return e;return a.delete(t.column.databaseId),Array.from(a)}case lc.MoveField:{let a=e.findIndex(e=>e===t.column.databaseId);if(a===t.newPosition)return e;let r=[...e];return -1!==a&&r.splice(a,1),r.splice(t.newPosition,0,t.column.databaseId),r}case lc.AddField:{let a=new Set(e);if(a.has(t.column.databaseId))return e;return a.add(t.column.databaseId),Array.from(a)}default:return e}},As=(e,t,a)=>{let r=new Set(e);return r.has(a)?(r.delete(a),Array.from(r)):e},Ao=(e,t)=>{switch(t.type){case lc.ToggleItemsCount:return{...e,hideItemsCount:!e?.hideItemsCount};case lc.RemoveField:{if(!e)return e;let{hideItemsCount:a,...r}=e;for(let e of Object.keys(r))r[e]=As(r[e]??[],e,t.column.databaseId);return{hideItemsCount:a,...r}}case lc.RemoveFieldAggregation:{let a=e?.[t.fieldOperation]??[];return{...e,[t.fieldOperation]:As(a,t.fieldOperation,t.column.databaseId)}}case lc.AddFieldAggregation:{let a=new Set(e?.[t.fieldOperation]??[]);if(a.has(t.column.databaseId))return e;return a.add(t.column.databaseId),{...e,[t.fieldOperation]:Array.from(a)}}default:return e}},Ad=(e,t)=>t.type===lc.UpdateBoardColumnLimit?e?.columnLimits?.[t.columnDatabaseId]?.[t.optionId]===t.limit?e:{...e,columnLimits:{...e?.columnLimits,[t.columnDatabaseId]:{...e?.columnLimits?.[t.columnDatabaseId],[t.optionId]:t.limit}}}:e,Au=(e,t)=>{switch(t.type){case lc.ToggleRoadmapMarkerFields:{let a=new Set(e.roadmap?.markerFields),r=new Set(a);if(r.has(t.field.databaseId)?r.delete(t.field.databaseId):r.add(t.field.databaseId),r.size===a.size)return e;return{...e,roadmap:{...e.roadmap,markerFields:[...r]}}}case lc.SetRoadmapDateFields:return{...e,roadmap:{...e.roadmap,dateFields:t.dateFields.map(e=>"none"===e?"none":e.databaseId)}};case lc.SetRoadmapZoomLevel:return{...e,roadmap:{...e.roadmap,zoomLevel:t.zoomLevel}};case lc.UpdateBoardColumnLimit:if(Ad(e.board,t)===e.board)return e;return{...e,board:Ad(e.board,t)};case lc.SetColumnWidths:return{...e,[t.viewType]:{...e[t.viewType],columnWidths:{...t.columnWidths}}};default:return e}},Ac=(e,t)=>{switch(t.type){case lc.SetFilter:if(e.filter===t.filter)return e;return{...e,filter:t.filter};case lc.SetHorizontalGroupedBy:{let a=[t.column.databaseId];if((0,ut.A)(a,e.groupBy))return e;return{...e,groupBy:a}}case lc.SetVerticalGroupedBy:{let a=[t.column.databaseId];if((0,ut.A)(a,e.verticalGroupBy))return e;return{...e,verticalGroupBy:a}}case lc.SetSortedBy:if((0,ut.A)(t.sorts,e.sortBy))return e;return{...e,sortBy:t.sorts.map(({column:e,direction:t})=>[e.databaseId,t])};case lc.ClearHorizontalGroupedBy:if(0===e.groupBy.length)return e;return{...e,groupBy:[]};case lc.SetSliceBy:return{...e,sliceBy:{field:t.column.databaseId,filter:"",panelWidth:e.sliceBy?.panelWidth}};case lc.ClearSliceBy:if(!e.sliceBy?.field&&!e.sliceBy?.filter)return e;return{...e,sliceBy:{}};case lc.SetSliceValue:return{...e,sliceValue:t.value};case lc.SetSliceByFilter:return{...e,sliceBy:{...e.sliceBy,filter:t.filter??""}};case lc.SetSliceByPanelWidth:return{...e,sliceBy:{...e.sliceBy,panelWidth:t.panelWidth}};case lc.SetViewType:return{...e,layout:lZ(t.viewType),layoutSettings:{...t.layoutSettings?t.layoutSettings:e.layoutSettings}};case lc.ShowField:return{...e,visibleFields:Al(e.visibleFields,t)};case lc.HideField:{let a=new Set(e.visibleFields);if(!a.has(t.column.databaseId))return e;return a.delete(t.column.databaseId),{...e,visibleFields:Al(e.visibleFields,t),groupBy:An(e.groupBy,t),sortBy:Ai(e.sortBy,t)}}case lc.ToggleField:if(new Set(e.visibleFields).has(t.column.databaseId))return Ac(e,{type:lc.HideField,column:t.column,viewNumber:t.viewNumber});return Ac(e,{type:lc.ShowField,column:t.column,viewNumber:t.viewNumber,position:t.position});case lc.MoveField:return{...e,visibleFields:Al(e.visibleFields,t)};case lc.SaveViewName:if(e.name===t.name)return e;return{...e,name:t.name};case lc.AddField:return{...e,visibleFields:Al(e.visibleFields,t)};case lc.RemoveField:return{...e,visibleFields:Al(e.visibleFields,t),groupBy:An(e.groupBy,t),sortBy:Ai(e.sortBy,t)};case lc.UpdateView:{let a={...t.view,filter:t.view.filter??"",aggregationSettings:t.view.aggregationSettings??lW()};if((0,ut.A)(a,e))return e;return a}case lc.ToggleItemsCount:case lc.AddFieldAggregation:case lc.RemoveFieldAggregation:{let a=Ao(e.aggregationSettings,t);if((0,ut.A)(a,e.aggregationSettings))return e;return{...e,aggregationSettings:Ao(e.aggregationSettings,t)}}case lc.UpdateBoardColumnLimit:case lc.SetColumnWidths:case lc.ToggleRoadmapMarkerFields:case lc.SetRoadmapDateFields:case lc.SetRoadmapZoomLevel:{let a=Au(e.layoutSettings,t);if((0,ut.A)(a,e.layoutSettings))return e;return{...e,layoutSettings:a}}default:return e}},Am=(e,t)=>{switch(t.type){case lc.MoveField:case lc.ToggleField:case lc.HideField:case lc.ShowField:case lc.SetViewType:case lc.SetSortedBy:case lc.SetHorizontalGroupedBy:case lc.ClearHorizontalGroupedBy:case lc.SetVerticalGroupedBy:case lc.SetFilter:case lc.ToggleItemsCount:case lc.AddFieldAggregation:case lc.RemoveFieldAggregation:case lc.SetRoadmapDateFields:case lc.ToggleRoadmapMarkerFields:case lc.SetRoadmapZoomLevel:case lc.SetSliceBy:case lc.ClearSliceBy:case lc.SetSliceValue:case lc.SetSliceByFilter:case lc.SetSliceByPanelWidth:case lc.SetColumnWidths:{let a=Ac(e.localViewState,t);if((0,ut.A)(a,e.localViewState))return e;return{...e,localViewState:a}}case lc.UpdateBoardColumnLimit:return{...e,localViewState:Ac(e.localViewState,t),serverViewState:Ac(e.serverViewState,t)};case lc.ResetViewState:{let t={id:e.serverViewState.id,name:e.serverViewState.name,number:e.serverViewState.number,serverViewState:e.serverViewState,localViewState:e.serverViewState};if(e.localViewState.sliceBy?.field&&e.localViewState.sliceBy.field===e.serverViewState.sliceBy?.field&&(t.localViewState.sliceValue=e.localViewState.sliceValue),(0,ut.A)(t,e))return e;return t}case lc.RemoveField:case lc.UpdateView:case lc.AddField:return{id:e.serverViewState.id,name:e.serverViewState.name,number:e.serverViewState.number,serverViewState:Ac(e.serverViewState,t),localViewState:Ac(e.localViewState,t)};case lc.SaveViewName:return{id:e.serverViewState.id,name:t.name,number:e.serverViewState.number,serverViewState:Ac(e.serverViewState,t),localViewState:Ac(e.localViewState,t)};case lc.SetLocalViewState:if((0,ut.A)(t.localViewState,e.localViewState))return e;return{...e,localViewState:t.localViewState};default:return e}},Ap=(e,t)=>{switch(t.type){case lc.SetViewServerStates:{let a=Object.fromEntries(t.viewStates.map(t=>{let a;let r={...t,filter:t.filter??"",aggregationSettings:t.aggregationSettings??lW()},n=e[t.number];if(!n||(0,ut.A)(uT(n.localViewState,[lq]),uT(n.serverViewState,[lq])))a=r,n?.localViewState.sliceBy?.field&&n.localViewState.sliceBy.field===a.sliceBy?.field&&(a.sliceValue=n.localViewState.sliceValue);else{let{layout:e}=r;if(n.localViewState.layout===e&&S4(e)){let t=S6(e,r.layoutSettings);a=Object.keys(t).length>0?S8(n.localViewState,e,t):n.localViewState}else a=n.localViewState;let t=n.localViewState.sliceBy?.field;t&&t===r.sliceBy?.field&&a.sliceBy&&r.sliceBy.panelWidth&&(a.sliceBy.panelWidth=r.sliceBy.panelWidth)}return[t.number,{id:t.id,number:t.number,name:t.name,localViewState:a,serverViewState:r}]}));for(let t of Object.values(e))a[t.number]||(a[t.number]={...t,isDeleted:!0});return a}case lc.UpdateView:{let a=e[t.view.number];if(!a)return e;return{...e,[t.view.number]:Am(a,t)}}case lc.AddField:case lc.SaveViewName:case lc.MoveField:case lc.ToggleField:case lc.HideField:case lc.ShowField:case lc.SetViewType:case lc.SetSortedBy:case lc.SetHorizontalGroupedBy:case lc.ClearHorizontalGroupedBy:case lc.SetVerticalGroupedBy:case lc.SetFilter:case lc.ResetViewState:case lc.ToggleItemsCount:case lc.AddFieldAggregation:case lc.RemoveFieldAggregation:case lc.SetRoadmapDateFields:case lc.ToggleRoadmapMarkerFields:case lc.SetRoadmapZoomLevel:case lc.SetSliceBy:case lc.ClearSliceBy:case lc.SetSliceValue:case lc.SetSliceByFilter:case lc.SetSliceByPanelWidth:case lc.SetColumnWidths:case lc.UpdateBoardColumnLimit:{let a=e[t.viewNumber];if(!a)return e;let r=Am(a,t);if((0,ut.A)(r,a))return e;return{...e,[t.viewNumber]:r}}case lc.AddView:{let a={...t.view,filter:t.view.filter??"",aggregationSettings:t.view.aggregationSettings??lW()};return{...e,[t.view.number]:{id:a.id,name:a.name,number:a.number,serverViewState:a,localViewState:a}}}case lc.RemoveField:return Object.entries(e).reduce((e,[a,r])=>(e[Number(a)]=Am(r,t),e),{});case lc.DeleteView:{let{[t.viewNumber]:a,...r}=e;return r}case lc.SetLocalViewState:{let a=e[t.viewNumber];if(!a)return e;let r=Am(a,t);if((0,ut.A)(r,a))return e;return{...e,[t.viewNumber]:r}}case lc.SetViews:return t.views;default:return e}},Ah=(e,t)=>{switch(t.type){case lc.AddView:return{...e,views:Ap(e.views,t),currentViewNumber:t.view.number,viewsOrder:[...e.viewsOrder||[],t.view.number]};case lc.SetViewServerStates:{let a=Ap(e.views,t);return{...e,views:a,viewsOrder:t.viewStates.map(e=>e.number)}}case lc.SetLocalViewState:case lc.RemoveField:case lc.UpdateView:case lc.AddField:case lc.SaveViewName:case lc.MoveField:case lc.ToggleField:case lc.HideField:case lc.ShowField:case lc.SetViewType:case lc.SetHorizontalGroupedBy:case lc.SetVerticalGroupedBy:case lc.SetSortedBy:case lc.ClearHorizontalGroupedBy:case lc.SetFilter:case lc.ResetViewState:case lc.ToggleItemsCount:case lc.AddFieldAggregation:case lc.RemoveFieldAggregation:case lc.SetRoadmapDateFields:case lc.ToggleRoadmapMarkerFields:case lc.SetRoadmapZoomLevel:case lc.SetSliceBy:case lc.ClearSliceBy:case lc.SetSliceValue:case lc.SetSliceByFilter:case lc.SetSliceByPanelWidth:case lc.SetColumnWidths:case lc.UpdateBoardColumnLimit:{let a=e.currentViewNumber;return"currentViewNumber"in t&&void 0!==t.currentViewNumber&&(a=t.currentViewNumber),{...e,views:Ap(e.views,t),currentViewNumber:a}}case lc.SetState:return{...e,...t.state};case lc.DeleteView:{let a;let r=Object.keys(e.views).map(e=>parseInt(e,10)).indexOf(t.viewNumber),n=Ap(e.views,t),i=Object.keys(n).map(e=>parseInt(e,10));return a=i.length>r?r:r-1,{...e,views:n,currentViewNumber:i[a],viewsOrder:(e.viewsOrder??[]).filter(e=>e!==t.viewNumber)}}case lc.SetViews:return{...e,views:Ap(e.views,t),currentViewNumber:t.currentViewNumber??e.currentViewNumber};case lc.GoToViewNumber:return{...e,currentViewNumber:t.viewNumber};case lc.ReorderView:{let a=(e.viewsOrder??[]).filter(e=>e!==t.viewNumber);if(!t.prevViewNumber)return{...e,viewsOrder:[...a,t.viewNumber]};let r=a.indexOf(t.prevViewNumber);return{...e,viewsOrder:[...a.slice(0,r),t.viewNumber,...a.slice(r)]}}default:tA(t)}},Af=(e,t)=>(function e(t,a){if(t===a)return t;let r=At(t)&&At(a);if(r||Aa(t)&&Aa(a)){let n=r?t.length:Object.keys(t).length,i=r?a:Object.keys(a),l=i.length,s=r?[]:{},o=0;for(let n=0;n<l;n++){let l=r?n:i[n];s[l]=e(t[l],a[l]),s[l]===t[l]&&o++}return n===l&&o===n?t:s}return a})(e,Ah(e,t)),Ag=Symbol("historyAction"),Ay=()=>{let{findColumn:e}=y$(),t=function(){let{findColumnByDatabaseId:e}=ua(),{findColumn:t}=y$();return(0,K.useCallback)(function(a){let r;let n=ru(a.groupBy.map(t=>e(t))),i=ru((a.verticalGroupBy||[]).map(t=>e(t)));if(0===i.length){let e=t("Status");e&&i.push(e)}let l=ru(a.sortBy.map(([t,a])=>{let r=e(t);if(r&&a)return{column:r,direction:a}})),s=a.sliceBy?.field?{field:e(a.sliceBy.field),filter:a.sliceBy.filter??""}:{field:void 0,filter:""};{let t=new Set(ru(a.visibleFields.map(t=>e(t))));for(let e of l)t.add(e.column);r=Array.from(t)}let o=new Set(ru((a.aggregationSettings?.sum??[]).map(t=>e(t))));return{id:a.id,number:a.number,name:a.name,filter:a.filter??"",viewType:lY(a.layout),horizontalGroupByColumns:n,verticalGroupByColumns:i,sortByColumnsAndDirections:l,visibleFields:r,createdAt:a.createdAt,updatedAt:a.updatedAt,aggregationSettings:{hideItemsCount:a.aggregationSettings?.hideItemsCount??!1,sum:Array.from(o)},layoutSettings:{...a.layoutSettings,roadmap:a.layoutSettings.roadmap?{...a.layoutSettings.roadmap,markerFields:ru((a.layoutSettings.roadmap.markerFields??[]).map(t=>e(t))),dateFields:ru((a.layoutSettings.roadmap.dateFields??[]).map(t=>t===lH?t:e(t)))}:void 0},sliceBy:s,sliceValue:a.sliceValue}},[e,t])}(),{getLayoutSettingsWithDefaults:a}=_T(),r=(0,K.useCallback)(({initialViewData:t})=>{let r=!function(e){for(let t of[i9,i7])if(t.matchFullPath(e))return!0;return!1}(window.location.pathname)?new URLSearchParams:new URLSearchParams(window.location.search),n=r.get(dM),i=r.get(dB),l=r.getAll(dR),s=r.get(dD),o=r.get(dL),d=r.get(dE),u=r.get(dF),c=r.get(dO),m=r.get(dG),p=r.get(dV),h={...t,filter:t.filter??"",aggregationSettings:t.aggregationSettings||lW()},f=(0,_6.A)(h);if(null!=n){let t=e(n);t?f.groupBy=[t.databaseId]:f.groupBy=[]}if(null!=i){let t=e(i);t?f.verticalGroupBy=[t.databaseId]:f.verticalGroupBy=[]}if(l.length>0){let t=r.getAll(dP);f.sortBy=l.map((a,r)=>{let n=e(a),i="desc"===t[r]?"desc":"asc";return n?[n.databaseId,i]:void 0}).filter(rc)}if(null!=s&&(f.filter=s),null!=o)try{let t=JSON.parse(o);if(Array.isArray(t)){let a=ru(t.map(t=>e(t)?.databaseId));f.visibleFields=a}}catch{}if(m){let t=e(m);t&&(f.sliceBy={field:t.databaseId,filter:""})}if(p&&(f.sliceValue=p),d&&Object.values(lK).includes(d)){let e=d===lK.Roadmap,t=d===lK.Board||d===lK.Table;e&&f.layout!==l$.Roadmap&&d===lK.Roadmap&&(f.layoutSettings=a(f.layoutSettings)),(t||e)&&(f.layout=lZ(d))}if(f.layout===l$.Board||f.layout===l$.Table&&f.groupBy.length>0){if(null!=u)try{let e=JSON.parse(u);"boolean"==typeof e&&(f.aggregationSettings.hideItemsCount=e)}catch{}if(null!=c)try{let t=JSON.parse(c);if(Array.isArray(t)){let a=ru(t.map(t=>e(t)?.databaseId));f.aggregationSettings.sum=a}}catch{}}return f},[e,a]),n=function(){let e=c$(),t=(0,J.zy)(),{isProjectViewRoute:a}=lu(),r=mK();return(0,K.useCallback)((n,{replace:i})=>{if(!n||!a)return;let l=_5(n,r,t.search);(l.pathname!==t.pathname||l.search!==t.search.slice(1))&&e(l,{replace:i,flushSync:!0})},[t.search,t.pathname,a,e,r])}(),i=(0,K.useCallback)(e=>({...e,localViewStateDeserialized:t(e.localViewState),..._4(e)}),[t]),l=(0,K.useCallback)((e,{currentViewNumber:t,sessionStorageViews:a})=>{let n={};for(let i of e){let e;let l={...i,filter:i.filter??"",aggregationSettings:i.aggregationSettings||lW()};if(i.number===t)e=r({initialViewData:l});else if(a?.[i.number]){let t=a[i.number];(0,ee.A)(t,"session view data is defined"),e={...t,aggregationSettings:t.aggregationSettings??i.aggregationSettings??{}}}else e=l;n[i.number]={id:l.id,name:l.name,number:l.number,serverViewState:l,localViewState:e}}return n},[r]),s=(0,K.useMemo)(()=>_9(Af,(e,t,{[Ag]:a})=>{let r="number"==typeof e.currentViewNumber?e.views[e.currentViewNumber]:void 0;r&&a?.navigate!==!1&&n(i(r),{replace:a?.replace})}),[i,n]),[o,d]=(0,K.useReducer)(s,null,function(){let e=eA("memex-views")??[],t=i9.matchFullPath(window.location.pathname),a=t&&t.params.viewNumber?parseInt(t.params.viewNumber,10):e[0]?.number,r=e.find(e=>e.number===a),n=l(e,{currentViewNumber:r?.number,sessionStorageViews:function(){let e=_8.getItem(mo(Ax));if(!e)return null;let t=JSON.parse(e);return!function(e){for(let t of Object.values(e))try{lY(t.layout)}catch(e){if(e instanceof EnumValueError)return!1}return!0}(t)?null:t}()}),i=e.map(e=>e.number);return r?{views:n,currentViewNumber:r.number,viewsOrder:i,[_7]:[]}:{views:n,currentViewNumber:void 0,viewsOrder:i,[_7]:[]}});Ae(o);let u=(0,K.useCallback)(e=>{d({type:lc.SetLocalViewState,localViewState:r({initialViewData:e}),viewNumber:e.number,currentViewNumber:e.number,[Ag]:{navigate:!1}})},[r]),c=(0,K.useCallback)((e,t)=>{d({views:l(e,{currentViewNumber:o.currentViewNumber}),currentViewNumber:t,type:lc.SetViews})},[l,o.currentViewNumber]);(0,K.useEffect)(()=>{function e(){let e=i9.matchFullPath(window.location.pathname);if(!e?.params.viewNumber){let e=Object.keys(o.views).map(e=>parseInt(e,10)),t=o.views[Math.min(...e)];t&&u(t.serverViewState);return}let t=parseInt(e.params.viewNumber,10),a=o.views[t];a?u(a.serverViewState):d({type:lc.GoToViewNumber,viewNumber:void 0,[Ag]:{navigate:!1}})}return window.addEventListener("popstate",e),()=>{window.removeEventListener("popstate",e)}},[u,o.views]);let m=(0,K.useMemo)(()=>{let e=(o.viewsOrder??[]).reduce((e,t,a)=>({...e,[t]:a}),{});return Object.values(o.views).map(e=>({...e,..._4(e)})).sort((t,a)=>(e[t.number]??0)-(e[a.number]??0))},[o.views,o.viewsOrder]);(0,K.useEffect)(()=>{!function(e){var t;t=JSON.stringify(e),_8.setItem(mo(Ax),t)}(Object.fromEntries(Object.entries(o.views).map(([e,t])=>[e,t.localViewState])))},[o.views]);let p=null!=o.currentViewNumber?o.views[o.currentViewNumber]:void 0;return{currentView:(0,K.useMemo)(()=>{if(p)return i(p)},[p,i]),viewsMap:o.views,views:m,viewStateDispatch:d,setViews:c}},Ax="memex-views";function Ab({children:e}){let t=c$(),{memex_table_without_limits:a}=iz(),{projectLimits:{viewsLimit:r}}=eU(),{postStats:n}=iN(),{currentView:i,views:l,viewsMap:s,viewStateDispatch:o}=Ay(),{hasWritePermissions:d}=eK(),u=function(e,t){let{findMissingColumnIds:a}=_1(),{findColumnByDatabaseId:r}=ua(),{loadColumnsWithItemColumnValues:n}=_2(),{perform:i}=uN({request:n});return(0,K.useEffect)(()=>{let t=a(ru([...new Set(Object.values(e).map(e=>{let t=[...e.localViewState.verticalGroupBy||[],...e.localViewState.groupBy,...e.localViewState.sortBy.map(e=>e[0])];return e.localViewState.layout===l$.Roadmap&&ke(e.localViewState.layoutSettings.roadmap)&&t.push(...e.localViewState.layoutSettings.roadmap.dateFields.filter(S9)),t}).flat())].map(e=>r(e)?.id)));0!==t.length&&i(t)},[r,a,i,e]),_0(t)}(l,i),c=(0,K.useCallback)((e,t)=>{o({type:lc.ReorderView,viewNumber:e,prevViewNumber:t})},[o]),m=(0,K.useCallback)((e,t)=>{o({type:lc.GoToViewNumber,viewNumber:e}),t&&n({name:"view_open",memexProjectViewNumber:e,...t})},[n,o]),p=(0,K.useCallback)(e=>{o({type:lc.AddView,view:e})},[o]),h=(0,K.useCallback)(e=>{o({type:lc.UpdateView,view:e})},[o]),f=(0,K.useCallback)(e=>{o({type:lc.DeleteView,viewNumber:e})},[o]),g=(0,K.useCallback)(e=>{o({type:lc.SetViewServerStates,viewStates:e})},[o]),y=Im({setCurrentViewNumber:m,addView:p,updateView:h,deleteView:f}),x=(0,K.useCallback)((e,t)=>{if("loading"===y.status.current.status)return;let a=y.perform({view:e});return n({name:"view_create",memexProjectViewNumber:i?.number,context:e.layout?lY(e.layout):lK.Table,...t}),a},[y,i?.number,n]),b=Ih({setCurrentViewNumber:m,addView:p,updateView:h,deleteView:f}),v=If({setCurrentViewNumber:m,addView:p,updateView:h,deleteView:f}),w=Ip(),j=(0,K.useCallback)((e,t)=>{o({type:lc.ResetViewState,viewNumber:e}),t&&n({name:"view_reset",memexProjectViewNumber:e,...t})},[n,o]),C=Im({setCurrentViewNumber:(0,K.useCallback)(e=>{i&&i.isDeleted?f(i.number):i&&j(i.number),m(e)},[f,j,m,i]),addView:p,updateView:h,deleteView:f}),I=(0,K.useCallback)(async(e,t,a)=>{let r=s[e];if(r&&!r.isDeleted&&t!==r.name){let i=uT(r.serverViewState,lz);await w.perform({viewNumber:r.number,view:{...i,name:t,filter:r.serverViewState.filter??""}}),n({name:"view_rename",memexProjectViewNumber:e,...a}),"succeeded"===w.status.current.status&&o({type:lc.SaveViewName,viewNumber:e,name:t})}},[s,w,o,n]),S=(0,K.useCallback)(async(e,t)=>{let a=s[e];if(!a||a.isDeleted)return;let r=uT(a.localViewState,lz),i=b.perform({viewNumber:e,view:r});n({name:"view_save",memexProjectViewNumber:e,...t}),await i},[s,b,n]),k=(0,K.useCallback)(async(e,t,a)=>{let i=s[e];if(!i)throw Error("No view found");if(Object.keys(s).length>r)return;let l=_4(i),o=uT(i.localViewState,[...lz,"name"]);return n(l.isViewStateDirty?{name:"view_save_as_new",memexProjectViewNumber:e,...a}:{name:"view_duplicate",memexProjectViewNumber:e,...a}),C.perform({view:{...o,name:t}})},[s,C,n,r]),N=(0,uX.S)(),T=(0,K.useCallback)(async(e,t,a)=>{let r=await N({title:"Delete view?",content:"Are you sure you want to delete this view?",confirmButtonContent:"Delete",confirmButtonType:"danger"}),i=s[e];if(r){if(i?.isDeleted){f(e),a?.();return}await v.perform({viewNumber:e}),n({name:"view_delete",memexProjectViewNumber:e,...t})}a?.()},[N,s,v,n,f]),{isProjectViewRoute:_}=lu(),A=(0,K.useCallback)(async(e,t,a,r)=>{let n=s[e];if(!n||n.isDeleted)return;let i=uT(n.serverViewState,lz);c(e,a);try{await w.perform({viewNumber:e,view:{...i,previousMemexProjectViewId:t}})}catch{c(e,r)}},[s,w,c]),R=(0,nk.M)(i),P=(0,K.useCallback)(()=>{let e=R.current;e&&e.isViewStateDirty&&!e.isDeleted&&S(e.number,{ui:"keyboard shortcut"})},[S,R]),D=mK();eg(()=>{if(!i)return null;let e=[];return(_&&i.isViewStateDirty&&!i.isDeleted&&(d&&e.push(["s","Save view","views_save",()=>S(i.number,{ui:e6})]),e.push(["r","Reset view","views_reset",()=>j(i.number,{ui:e6})])),l.length>1&&(_&&d&&e.push(["d","Delete view","views_delete",()=>T(i.number,{ui:e6})]),e.push(["g","Go to view...",l.reduce((e,a,r)=>(_&&a.number===i.number||e.push([`${r}`,`Go to ${a.name}`,"views_change",()=>{m(a.number,{ui:e6}),_||t(i9.generatePath({...D,viewNumber:a.number}))}]),e),[])])),_&&l.length<r&&d&&(e.push(["n","New view","views_create",()=>x({},{ui:e6})]),e.push(["c",nH.duplicateView({isDirty:i.isViewStateDirty}),"views_duplicate",()=>k(i.number,void 0,{ui:e6})])),0===e.length)?null:["v","View options...",e]},[x,i,T,k,d,_,t,j,S,m,l,r,D]);let{getFieldIdsFromFilter:E}=_Z(),M=(0,K.useMemo)(()=>{if(!i)return!0;if(a||0===u.length)return!1;let e=E(i.localViewStateDeserialized.filter),t=u.some(t=>e.has(t)),r=!!u.find(e=>i.localViewStateDeserialized.horizontalGroupByColumns.some(t=>t.id===e)),n=!!u.find(e=>i.localViewStateDeserialized.verticalGroupByColumns.some(t=>t.id===e&&t.id!==eT.Status)),l=!!u.find(e=>i.localViewStateDeserialized.sortByColumnsAndDirections.some(t=>t.column.id===e));return t||r||l||n},[i,E,a,u]),B=(0,K.useMemo)(()=>i?_5(i,D):i7.generatePath(D),[i,D]),L=iW(()=>{if(!a||!i)return{};let e=i1();return{[i.id]:e}}),O=(0,K.useCallback)(e=>{if(!a)return;let t=i?.id;t&&(L.current[t]?L.current[t].add(e):L.current[t]=new Set([e]))},[i?.id,L,a]);return(0,F.jsxs)(iI.Provider,{value:(0,K.useMemo)(()=>({views:l,viewsMap:s,viewStateDispatch:o,createView:y,currentView:i,duplicateCurrentViewState:k,setCurrentViewNumber:m,updateView:b,updateViewPriority:A,saveCurrentViewState:S,destroyView:v,isViewStateDirty:i?.isViewStateDirty??!1,resetViewState:j,createNewDefaultView:x,destroyCurrentView:T,renameView:I,missingRequiredColumnData:M,returnToViewLinkTo:B,updateViewServerStates:g,loadedFieldIdsRef:L,addLoadedFieldIdForCurrentView:O}),[l,s,o,y,i,k,m,b,A,S,v,j,x,T,I,M,B,g,L,O]),children:[(0,F.jsx)(_H.ak,{commands:{"projects:save-view":_&&d&&!i?.isDeleted&&i?.isViewStateDirty?P:void 0}}),e]})}try{Ab.displayName||(Ab.displayName="ViewProvider")}catch{}let Av=(0,K.memo)(function({children:e}){let{viewStateDispatch:t,currentView:a}=iS(),{getNextLayoutSettings:r}=_T(),{postStats:n}=iN(),i=(0,K.useCallback)((e,a,i)=>{t({type:lc.SetViewType,viewType:a,viewNumber:e.number,layoutSettings:r(lZ(a),e)}),n({name:e7,ui:i,context:a})},[n,t,r]),{isProjectViewRoute:l}=lu();return eg(()=>l&&a?["y","Switch layout...",Object.entries({[lK.Table]:["t","Switch layout: Table","view.table",()=>i(a,lK.Table,"command palette")],[lK.Board]:["b","Switch layout: Board","view.board",()=>i(a,lK.Board,"command palette")],[lK.Roadmap]:["r","Switch layout: Roadmap","view.roadmap",()=>i(a,lK.Roadmap,"command palette")],[lK.List]:null}).reduce((e,[t,r])=>(t!==a.localViewStateDeserialized.viewType&&null!==r&&e.push(r),e),[])]:null,[a,l,i]),(0,F.jsx)(mt.Provider,{value:(0,K.useMemo)(()=>({isViewTypeDirty:a?.isViewTypeDirty??!1,setViewType:i,viewType:a?.localViewStateDeserialized.viewType??lK.Table}),[a?.isViewTypeDirty,a?.localViewStateDeserialized.viewType,i]),children:e})});try{Av.displayName||(Av.displayName="ViewTypeProvider")}catch{}async function Aw(e){let t=nP("memex-column-delete-api-data");await ix(t.url,{method:"DELETE",body:e})}let Aj=()=>{let{setAllColumns:e,allColumnsRef:t}=sl(),{findColumn:a}=y$();return{destroyColumn:(0,K.useCallback)(async r=>{let n=a(r);n&&n.userDefined&&(e(t.current.filter(e=>e.id!==n.id)),l3(),await Aw({memexProjectColumnId:n.id}))},[t,e,a])}},AC=(0,K.memo)(function({children:e}){let{currentView:t,viewStateDispatch:a}=iS(),{postStats:r}=iN(),{destroyColumn:n}=Aj(),i=(0,K.useCallback)(e=>(a({type:lc.RemoveField,column:e}),n(e.id.toString())),[n,a]),l=(0,K.useCallback)((e,t)=>{a({type:lc.ShowField,viewNumber:e,column:t})},[a]),s=(0,K.useCallback)((e,t)=>{a({type:lc.HideField,viewNumber:e,column:t})},[a]),o=(0,K.useCallback)(e=>!!t&&!!t.localViewStateDeserialized.visibleFields.find(t=>t.id===e.id),[t]),d=(0,K.useCallback)((e,t,n,i=e3)=>{r({name:o(t)?e4:"field_show",ui:i,memexProjectColumnId:t.id}),a({type:lc.ToggleField,viewNumber:e,column:t,position:n})},[o,r,a]),u=(0,K.useCallback)((e,t,n,i=e3)=>{r({name:"field_move",context:`position: ${n}`,memexProjectColumnId:t.id,ui:i}),a({type:lc.MoveField,viewNumber:e,column:t,newPosition:n})},[a,r]),c=(0,K.useMemo)(()=>new Map((t?.localViewStateDeserialized.visibleFields??[]).map((e,t)=>[e.id,t])),[t?.localViewStateDeserialized.visibleFields]);return(0,F.jsx)(TC.Provider,{value:(0,K.useMemo)(()=>({visibleFields:t?.localViewStateDeserialized.visibleFields??[],isVisibleFieldsDirty:t?.isVisibleFieldsDirty??!1,visibleFieldIndexMap:c,isFieldVisible:o,showField:l,hideField:s,moveField:u,toggleField:d,removeField:i}),[t?.isVisibleFieldsDirty,t?.localViewStateDeserialized.visibleFields,s,o,u,i,l,d,c]),children:e})});try{AC.displayName||(AC.displayName="VisibleFieldsProvider")}catch{}let AI=(0,K.memo)(function({children:e}){return(0,F.jsx)(Ab,{children:(0,F.jsx)(Av,{children:(0,F.jsx)(lf,{config:lm,children:(0,F.jsx)(AC,{children:(0,F.jsx)(_O,{children:(0,F.jsx)(S5,{children:(0,F.jsx)(_z,{children:(0,F.jsx)(_W,{children:(0,F.jsx)(SK,{children:(0,F.jsx)(SO,{children:(0,F.jsx)(_M,{children:(0,F.jsx)(_F,{children:(0,F.jsx)(c4,{children:(0,F.jsx)(mB,{children:(0,F.jsx)(Sz,{children:e})})})})})})})})})})})})})})})});try{AI.displayName||(AI.displayName="ViewsProvider")}catch{}let AS={ADMIN:"ADMIN",WRITE:"WRITE",DEFAULT:"DEFAULT"},Ak=(e=AS.DEFAULT)=>{let{hasAdminPermissions:t,hasWritePermissions:a}=eK();switch(e){case AS.ADMIN:return t;case AS.WRITE:return a;case AS.DEFAULT:return t||a}};function AN(e,t){return Ak(e)?t:null}function AT(e,{timeoutMs:t=225}={}){let[a,r]=(0,K.useState)(e),n=(0,nk.M)(t);return(0,K.useEffect)(()=>{let t=!0,a=setTimeout(()=>{t&&r(e)},n.current);return()=>{t=!1,clearTimeout(a)}},[e,n]),a}let A_=(0,K.createContext)(null),AA=(0,K.createContext)(null),AR=(0,K.createContext)(null),AP=(0,K.createContext)(null),AD=(0,K.createContext)(null);async function AE(e){let t=new URL(nP("memex-archived-items-get-api-data").url,window.location.origin);void 0!==e.perPage&&t.searchParams.set("per_page",e.perPage.toString()),e.visibleFields&&t.searchParams.set(dL,JSON.stringify(e.visibleFields));let{data:a}=await ig(t);return a}function AM({children:e}){let[t,a]=(0,K.useState)([]),{itemMatchesFilterQuery:r}=i3(),[n,i]=(0,K.useState)(""),l=AT(n.trim()),{state:s,optimisticRemoveItems:o,optimisticRollbackRemoveItems:d,loadAllItems:u,loadAllItemsStatus:c}=function({filter:e}){let t=iW(()=>new Map),[a,r]=(0,K.useState)("idle"),[n,i]=(0,K.useState)(null),[l,s]=(0,K.useState)(!1),o=(0,U.jE)(),{requiredFields:d,hasAllFieldsLoaded:u,addRequiredFieldsFromFilter:c,markFieldsAsLoaded:m}=function({initialFields:e}){let[t,a]=(0,K.useState)(()=>new Set(e)),[r,n]=(0,K.useState)(()=>new Set),{getFieldIdsFromFilter:i}=_Z(),l=(0,K.useCallback)(e=>{let r=Array.from(i(e)).filter(e=>!t.has(e));r.length>0&&a(e=>new Set([...Array.from(e),...r]))},[i,t]),s=(0,K.useCallback)(e=>{n(t=>new Set([...Array.from(t),...e]))},[]),o=(0,K.useMemo)(()=>(0,ut.A)(t,r),[t,r]),d=(0,K.useMemo)(()=>Array.from(r),[r]),u=(0,K.useMemo)(()=>Array.from(t),[t]);return(0,K.useMemo)(()=>({loadedFields:d,requiredFields:u,addRequiredFieldsFromFilter:l,markFieldsAsLoaded:s,hasAllFieldsLoaded:o}),[l,o,d,s,u])}({initialFields:[eT.Title]}),p=(0,K.useCallback)(async e=>{try{r("loading");let{memexProjectItems:a,totalCount:n}=await AE({visibleFields:e,perPage:l?1e4:500});for(let l of(m(e),i({archivedItems:a.map(e=>iO(e)),totalCount:n}),r("idle"),a))t.current.set(l.id,l)}catch{r("error")}},[t,l,m]),h=(0,K.useCallback)(async()=>{try{s(!1),r("loading");let{memexProjectItems:e,totalCount:a}=await AE({visibleFields:d,perPage:1e4}),n=e.map(e=>iO(e));for(let l of(i({archivedItems:n,totalCount:a}),r("idle"),s(!0),e))t.current.set(l.id,l);return n}catch{r("error")}},[t,d]),f=(0,K.useCallback)(e=>{for(let a of e){let e=t.current.get(a);if(e){let{archived:t,...a}=e;oz(o,iO(a))}t.current.delete(a)}i(t=>t?.archivedItems&&t.totalCount?{...t,totalCount:t.totalCount-e.length,archivedItems:t.archivedItems.filter(t=>!e.includes(t.id))}:t)},[t,o]),g=(0,K.useCallback)(e=>{oH(o,e.map(e=>e.id)),i(t=>t?.archivedItems&&t.totalCount?{...t,totalCount:t.totalCount+e.length,archivedItems:[...e,...t.archivedItems].sort((e,t)=>(function(e,t){let a=0;if(e.archivedAt&&t.archivedAt){let r=(0,tD.H)(e.archivedAt);a=(0,tD.H)(t.archivedAt).getTime()-r.getTime()}return 0!==a?a:t.id-e.id})({id:e.id,archivedAt:e.archived?.archivedAt},{id:t.id,archivedAt:t.archived?.archivedAt}))}:t)},[o]);return(0,K.useEffect)(()=>{u||"idle"!==a||p(d)},[u,p,d,a]),(0,K.useEffect)(()=>{c(e)},[c,e]),{state:n,status:a,optimisticRemoveItems:f,optimisticRollbackRemoveItems:g,loadAllItemsStatus:a,loadAllItems:h}}({filter:l}),m=(0,K.useCallback)(()=>{a([])},[]),p=(0,K.useCallback)(e=>{if(t.some(t=>t.id===e))a(t.filter(t=>t.id!==e));else{let t=s?.archivedItems?.find(t=>t.id===e);if(t?.contentType===eJ.RedactedItem)return;t&&a(e=>[...e,t])}},[s?.archivedItems,t]),h=(0,K.useCallback)(e=>{a(AV(e))},[]),f=(0,K.useCallback)(e=>{let r=AV(e);t.length===r.length?a([]):a(r)},[t.length]),g=(0,K.useMemo)(()=>new Set(t.map(e=>e.id)),[t]),y=(0,K.useCallback)(e=>g.has(e),[g]),{openRemoveConfirmationDialog:x}=wS(void 0,(0,K.useCallback)(e=>{o(e),a(t=>t.filter(t=>!e.includes(t.id)))},[o])),b=(0,K.useCallback)(()=>{x(t.map(e=>e.id),"archive page bulk action menu")},[x,t]),v=(0,K.useCallback)((e,t)=>{x(e,t)},[x]),w=uN({request:(0,K.useCallback)(async e=>{let t=new Set(e.map(e=>e.id));o(Array.from(t)),a(e=>e.filter(e=>!t.has(e.id))),await wc({memexProjectItemIds:Array.from(t)})},[o]),rollback:(0,K.useCallback)(async e=>{d(e)},[d])}),j=(0,K.useMemo)(()=>l?s?.archivedItems?.filter(e=>r(e,nw(l)))??[]:s?.archivedItems??[],[l,s?.archivedItems,r]),C=(0,K.useMemo)(()=>AV(j),[j]);return(0,K.useEffect)(()=>{l&&m()},[m,l]),(0,F.jsx)(A_.Provider,{value:(0,K.useMemo)(()=>({archivedItems:s?.archivedItems,totalCount:s?.totalCount,loaded:null!==s,filteredItems:j,loadAllItemsStatus:c,loadAllItems:u}),[j,u,c,s]),children:(0,F.jsx)(AA.Provider,{value:(0,K.useMemo)(()=>({filteredItems:j,filterValue:n,deferredFilterValue:l,setFilterValue:i}),[l,n,j,i]),children:(0,F.jsx)(AD.Provider,{value:(0,K.useMemo)(()=>({selectedItems:t,selectableItems:C,selectItem:p,selectAllItems:h,toggleSelectAllItems:f,isSelected:y,clearSelectedItems:m}),[m,y,h,p,C,t,f]),children:(0,F.jsx)(AR.Provider,{value:(0,K.useMemo)(()=>({restoreItemsRequest:w}),[w]),children:(0,F.jsx)(AP.Provider,{value:(0,K.useMemo)(()=>({removeAllSelectedItems:b,removeItems:v}),[b,v]),children:e})})})})})}let AB=()=>{let e=(0,K.useContext)(A_);if(null===e)throw Error("useArchiveItems must be used within an ArchivedItemsContext");return e},AL=()=>{let e=(0,K.useContext)(AR);if(null===e)throw Error("useRestoreArchiveItems must be used within an RestoreArchiveItemsContext");return e},AF=()=>{let e=(0,K.useContext)(AD);if(null===e)throw Error("useSelectArchiveItems must be used within an SelectArchiveItemsContext");return e},AO=()=>{let e=(0,K.useContext)(AP);if(null===e)throw Error("useRemoveArchiveItems must be used within an RemoveArchiveItemsContext");return e},AG=()=>{let e=(0,K.useContext)(AA);if(null===e)throw Error("useFilterArchiveItems must be used within an FilterArchiveItemsContext");return e},AV=e=>e.filter(e=>e.contentType!==eJ.RedactedItem);try{AM.displayName||(AM.displayName="ArchivedItemsProvider")}catch{}let A$={BaseSettingsPage:"archive-page-module__BaseSettingsPage--WUAZp"},AW={Checkbox:"archive-header-module__Checkbox--gq2H2",Box:"archive-header-module__Box--qsM95",Text:"archive-header-module__Text--Skao2",Text_1:"archive-header-module__Text_1--InwDI",Box_1:"archive-header-module__Box_1--ppgDn"},Az={Box:"archive-header-wrapper-module__Box--o6FiG",Box_1:"archive-header-wrapper-module__Box_1--nVdvN"};function AH({children:e}){return(0,F.jsx)("div",{className:Az.Box,children:(0,F.jsx)("div",{className:Az.Box_1,children:e})})}try{AH.displayName||(AH.displayName="ArchiveHeaderWrapper")}catch{}function AU({projectItemLimit:e,canBulkRestore:t}){let{hasWritePermissions:a}=eK(),{archivedItems:r,loaded:n,loadAllItemsStatus:i,loadAllItems:l,totalCount:s}=AB(),{selectedItems:o,selectableItems:d,selectAllItems:u,toggleSelectAllItems:c}=AF(),{removeAllSelectedItems:m}=AO(),{restoreItemsRequest:p}=AL(),{deferredFilterValue:h}=AG(),{itemMatchesFilterQuery:f}=i3(),{setArchiveStatus:g}=mY(),y=(0,K.useCallback)(async()=>{await p.perform(o,o),g()},[p,o,g]),x=(0,K.useCallback)(()=>{c(d)},[c,d]),b=o.length===d.length&&d.length>0,v=0===o.length,w=o.length>0,j=!b&&!v,C=!!r&&r.length>0,I=!!r&&!!s&&s>r.length,{primaryText:S,secondaryText:k,loadAllText:N,loadAllAction:T}=(0,K.useMemo)(()=>{let e="loaded"===i||!I;return r&&s?e||w||h?!e&&w?{primaryText:`${o.length.toLocaleString()} selected`,secondaryText:"Only selecting results from most recently archived",loadAllText:"Select all",loadAllAction:async()=>{let e=await l();e&&u(e.filter(e=>f(e,nw(h))))}}:!e&&h?{primaryText:`${d.length.toLocaleString()} archived ${1===d.length?"item":"items"}`,secondaryText:"Only filtering on most recently archived",loadAllText:"Filter on all",loadAllAction:l}:e&&h?{primaryText:`${d.length.toLocaleString()} archived ${1===d.length?"item":"items"}`}:e&&w?{primaryText:`${o.length.toLocaleString()} selected`}:{primaryText:`${s.toLocaleString()} archived ${1===s?"item":"items"}`}:{primaryText:"Most recently archived",secondaryText:`of ${s.toLocaleString()} archived items`,loadAllText:"Show all",loadAllAction:l}:{primaryText:"0 archived items"}},[i,I,r,s,w,h,l,o.length,u,f,d.length]),_="loading"===i;return(0,F.jsxs)(AH,{children:[(0,F.jsxs)("div",{className:AW.Box,children:[(0,F.jsx)("div",{children:C?(0,F.jsx)(pC.A,{onChange:x,"aria-label":"Toggle select all items",disabled:_||!a,...j?{indeterminate:!0}:{checked:b},className:AW.Checkbox}):null}),(0,F.jsxs)("div",{children:[S?(0,F.jsx)("span",{className:AW.Text,children:S}):null,n&&C?(0,F.jsxs)("div",{children:[k?(0,F.jsx)("span",{className:AW.Text_1,children:k}):null,N?(0,F.jsx)(pw.A,{as:"button",onClick:T,disabled:_,sx:{color:_?"primer.fg.disabled":void 0,"&&":{cursor:_?"default":"pointer"}},children:N}):null]}):null]})]}),n&&"loading"===i?(0,F.jsx)(pj.A,{size:"small"}):w?(0,F.jsxs)("div",{className:AW.Box_1,children:[(0,F.jsx)(p4.Q,{leadingVisual:ly.TrashIcon,variant:"danger",size:"small",onClick:m,children:"Delete from project"}),(0,F.jsx)(p4.Q,{size:"small",onClick:y,disabled:!t,children:t?"Restore":(0,F.jsx)(bW.A,{"aria-label":`This will exceed the ${e} project item limit`,children:"Restore unavailable"})})]}):null]})}try{AU.displayName||(AU.displayName="ArchiveHeader")}catch{}let Aq={Found:"found",Empty:"empty",Loading:"loading"};function AK(e){return{state:Aq.Found,value:e}}let AQ={state:Aq.Loading},AJ={state:Aq.Empty};function AX(e){return"loading"===e.state}function AY(e){return"empty"===e.state}function AZ(e){return"found"===e.state}let A0=(0,K.memo)(function({titleColumn:e}){if(!AZ(e)||!e)return null;switch(e.value.contentType){case eJ.RedactedItem:return(0,F.jsx)(ly.LockIcon,{"aria-label":"Redacted item"});case eJ.DraftIssue:return(0,F.jsx)(lw.A,{icon:ly.IssueDraftIcon,sx:{color:"fg.muted"},"aria-label":"Draft issue"});case eJ.Issue:case eJ.PullRequest:return(0,F.jsx)(pK,{title:e.value});default:tA(e.value)}});try{A0.displayName||(A0.displayName="MemexItemIcon")}catch{}var A1=a(65556);let A2={color:"fg.default",overflow:"hidden",textAlign:"left",whiteSpace:"nowrap",textDecoration:"none",textOverflow:"ellipsis","&.is-disabled":{color:"fg.muted"},"&:hover":{color:"accent.fg"},"&:focus, &:focus-visible":{outline:"none"}};function A5({model:e,currentValue:t,isDisabled:a,openPane:r,onHover:n}){let{safeClearTimeout:i}=(0,A1.A)(),l=(0,K.useRef)(void 0),s=(0,K.useCallback)(t=>{!r||e instanceof RedactedItemModel||t.currentTarget instanceof Element&&"A"===t.currentTarget.tagName&&(t.metaKey||t.ctrlKey)||(r(e),t.preventDefault(),t.stopPropagation())},[e,r]),o=AZ(t)?a_(t.value):"",d=(0,K.useCallback)(()=>{n&&n()},[n]);switch(e.contentType){case eJ.RedactedItem:return(0,F.jsx)(w1,{isDisabled:a,children:o});case eJ.DraftIssue:return(0,F.jsx)(w1,{sx:{"&:hover":{color:"accent.fg",cursor:"pointer",textDecoration:"underline"}},dangerousHtml:o,onClick:s,isDisabled:a});case eJ.PullRequest:case eJ.Issue:return(0,F.jsx)(pw.A,{sx:A2,onMouseEnter:d,onMouseLeave:()=>l.current&&i(l.current),target:"_blank",rel:"noreferrer",href:e.content.url,className:a?"is-disabled":void 0,onClick:e.contentType===eJ.Issue?s:void 0,tabIndex:-1,children:(0,F.jsx)(p$,{children:o})});default:tA(e)}}try{A5.displayName||(A5.displayName="InteractiveItemTitle")}catch{}let A3={Checkbox:"archive-item-module__Checkbox--zW2ni",Box:"archive-item-module__Box--SXJ85",Box_1:"archive-item-module__Box_1--iyWjp",Box_2:"archive-item-module__Box_2--UJJom",Box_3:"archive-item-module__Box_3--tsISw",Box_4:"archive-item-module__Box_4--uvmtX",Text:"archive-item-module__Text--_2SuV",Box_5:"archive-item-module__Box_5--D929Y",Text_1:"archive-item-module__Text_1--kz1yp",Box_6:"archive-item-module__Box_6--EOQrZ"},A4=(0,K.memo)(function({archivedItem:e,columnData:t,canRestore:a,projectItemLimit:r}){let{hasWritePermissions:n}=eK(),{restoreItemsRequest:i}=AL(),{setArchiveStatus:l}=mY(),s=(0,K.useCallback)(async()=>{let t=[e];await i.perform(t,t),l()},[e,i,l]),{selectItem:o,isSelected:d}=AF(),u=(0,K.useCallback)(()=>{o(e.id)},[e,o]),{removeItems:c}=AO(),m=(0,K.useCallback)(()=>{c([e.id],"archive page row action menu")},[e.id,c]),p=`item-title-${e.id}`,h=t.Title,f=h?AK(h):AJ,g=aA(h),y=e.contentType===eJ.RedactedItem,x=y||!n;return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)("label",{className:A3.Box,children:(0,F.jsx)(pC.A,{"aria-labelledby":p,checked:!x&&d(e.id),onChange:x?void 0:u,disabled:x,className:A3.Checkbox})}),(0,F.jsx)("div",{className:A3.Box_1,children:(0,F.jsx)(A0,{titleColumn:f})}),(0,F.jsxs)("div",{className:A3.Box_2,children:[(0,F.jsxs)("div",{id:p,className:A3.Box_3,children:[(0,F.jsx)(A5,{model:e,currentValue:f}),ab(g)&&(0,F.jsx)("div",{className:A3.Box_4,children:(0,F.jsxs)("span",{className:A3.Text,children:[" #",g]})})]}),(0,F.jsxs)("div",{className:A3.Box_5,children:["archived ",(0,F.jsx)(bE.A,{datetime:e.archived?.archivedAt}),!y&&e.archived?.archivedBy?(0,F.jsxs)(F.Fragment,{children:[" by ",(0,F.jsx)("span",{className:A3.Text_1,children:e.archived.archivedBy.login})]}):null]})]}),(0,F.jsx)("div",{className:A3.Box_6,children:x?null:(0,F.jsxs)(yu.W,{children:[(0,F.jsx)(yu.W.Anchor,{children:(0,F.jsx)(fE.K,{icon:ly.KebabHorizontalIcon,variant:"invisible","aria-label":"Open item actions",className:A3.Text_1})}),(0,F.jsx)(yu.W.Overlay,{children:(0,F.jsxs)(fi.l,{children:[(0,F.jsxs)(fi.l.Item,{onSelect:s,disabled:!a,children:[(0,F.jsx)(fi.l.LeadingVisual,{children:(0,F.jsx)(ly.HistoryIcon,{})}),a?"Restore":(0,F.jsxs)(F.Fragment,{children:["Restore unavailable",(0,F.jsxs)(fi.l.Description,{variant:"block",children:["This will exceed the ",r," project item limit"]})]})]}),(0,F.jsxs)(fi.l.Item,{onSelect:m,variant:"danger",children:[(0,F.jsx)(fi.l.LeadingVisual,{children:(0,F.jsx)(ly.TrashIcon,{})}),"Delete from project"]})]})})]})})]})});try{A4.displayName||(A4.displayName="ArchiveItem")}catch{}let A6={PageLayout:"archive-view-module__PageLayout--BQnjg",Box:"archive-view-module__Box--qBBV5"},A8={Blankslate:"archive-empty-states-module__Blankslate--_7Fvx",Octicon:"archive-empty-states-module__Octicon--fiub1"},A7=(0,K.memo)(function(){return(0,F.jsxs)(pI,{className:A8.Blankslate,children:[(0,F.jsx)(lw.A,{icon:ly.ArchiveIcon,size:30,className:A8.Octicon}),(0,F.jsx)("h2",{children:"There aren't any archived items"}),(0,F.jsx)("p",{className:A8.Octicon,children:"Archive items from a project view and they'll be shown here."})]})}),A9=(0,K.memo)(function(){return(0,F.jsxs)(pI,{className:A8.Blankslate,children:[(0,F.jsx)(lw.A,{icon:ly.ArchiveIcon,size:30,className:A8.Octicon}),(0,F.jsx)("h2",{children:"No results matched your filter"})]})}),Re=(0,K.memo)(function(){return(0,F.jsx)(pI,{className:A8.Blankslate,children:(0,F.jsx)(pj.A,{})})});try{A7.displayName||(A7.displayName="NoArchivedItems")}catch{}try{A9.displayName||(A9.displayName="NoFilteredItems")}catch{}try{Re.displayName||(Re.displayName="Loader")}catch{}let Rt={Box:"archive-list-item-module__Box--zvedj"},Ra=(0,K.memo)(function({children:e}){let t=(0,K.useRef)(null),{isVisible:a,size:r}=pA({ref:t});return(0,F.jsx)("li",{style:(0,K.useMemo)(()=>({height:a?"unset":r,flexShrink:0}),[a,r]),ref:t,className:Rt.Box,children:a?e:null})});try{Ra.displayName||(Ra.displayName="ArchiveListItem")}catch{}let Rr={listStyleType:"none",display:"flex",flexDirection:"column",border:"1px solid",borderTop:0,borderColor:"border.default",borderRadius:6,borderTopRightRadius:0,borderTopLeftRadius:0,contentVisibility:"auto",m:0},Rn=(0,K.memo)(function({filteredItems:e,loaded:t,hasArchive:a,renderItem:r,sx:n}){return(0,F.jsx)(lx.A,{as:"ul",sx:{...Rr,...n},...(0,ey.G)("archived-item-list"),children:t?a?0===e.length?(0,F.jsx)("li",{children:(0,F.jsx)(A9,{})}):(0,F.jsx)(p_,{rootRef:null,sizeEstimate:55,children:e.map(e=>(0,F.jsx)(Ra,{children:r(e)},e.id))}):(0,F.jsx)("li",{children:(0,F.jsx)(A7,{})}):(0,F.jsx)("li",{...(0,ey.G)("archived-item-loader"),children:(0,F.jsx)(Re,{})})})});try{Rn.displayName||(Rn.displayName="ArchiveList")}catch{}let Ri=[];function Rl(){let{archivedItems:e,loaded:t}=AB(),{filterValue:a,setFilterValue:r,filteredItems:n}=AG(),{selectedItems:i}=AF(),{items:l}=ug(),s=eU().projectLimits.projectItemLimit,o=i.length+l.length>s,d=l.length+1>s,u=(0,K.useCallback)(e=>(0,F.jsx)(A4,{archivedItem:e,columnData:e.columns,canRestore:!d,projectItemLimit:s}),[s,d]),c=(0,K.useMemo)(()=>({items:e??Ri}),[e]),m=(0,K.useRef)(null);return(0,F.jsx)(mU.M,{containerWidth:"large",rowGap:"condensed",className:A6.PageLayout,children:(0,F.jsxs)(mU.M.Content,{children:[(0,F.jsxs)("div",{className:A6.Box,children:[(0,F.jsx)(fb.Provider,{value:c,children:(0,F.jsx)(gG,{inputRef:m,height:40,value:a,onChange:(0,K.useCallback)(e=>r(e.target.value),[r]),onClearButtonClick:(0,K.useCallback)(()=>{r("")},[r]),filterCount:a.trim()?n.length:void 0,setValueFromSuggestion:r,hideSaveButton:!0,hideResetChangesButton:!0})}),(0,F.jsx)(AU,{projectItemLimit:s,canBulkRestore:!o})]}),(0,F.jsx)(Rn,{filteredItems:n,loaded:t,hasArchive:!!e&&e.length>0,renderItem:u})]})})}try{Rl.displayName||(Rl.displayName="ArchiveView")}catch{}let Rs=(0,sp.V)({queryKey:["memex","archivedItems"],fetcher:async({after:e,q:t})=>dZ({after:e,q:t,scope:"archived",fieldIds:[eT.Title]}),use:[e=>t=>e({...t,placeholderData:sc.rX,staleTime:6e4,refetchOnMount:"always"})]}),Ro=e=>{if("groups"in e)throw Error("groups not expected in archived data");let{nodes:t,...a}=e;return{...a,itemModels:e.nodes.map(e=>iO(e))}},Rd=(e={})=>Rs({variables:e,select:Ro}),Ru=()=>{let e=(0,U.jE)();return(0,mg.W)({mutationFn:wj,onSuccess:async t=>{t&&"job"in t&&await ib(t.job.url,{headers:{accept:"application/json"}});let a=Rs.getKey();e.invalidateQueries({queryKey:a})}})()},Rc=()=>{let e=(0,U.jE)();return(0,mg.W)({mutationFn:wc,onSuccess:async t=>{t&&"job"in t&&await ib(t.job.url,{headers:{accept:"application/json"}});let a=Rs.getKey();e.invalidateQueries({queryKey:a})}})()},Rm=(e,t)=>({type:"SET_NEXT_CURSOR",nextCursor:e,currentPageItemCount:t}),Rp=()=>({type:"SET_PREVIOUS_CURSOR"}),Rh=e=>({type:"SET_ITEM_SELECTION",itemSelection:e}),Rf=(e,t)=>{switch(t.type){case"SET_NEXT_CURSOR":{let a=e.previousCursors[e.previousCursors.length-1],r=e.previousCursors.concat({cursor:e.currentCursor,previousPagesItemCount:(a?a.previousPagesItemCount:0)+t.currentPageItemCount});return{...e,previousCursors:r,currentCursor:t.nextCursor,itemSelection:"all_on_server"===e.itemSelection?"all_on_server":[]}}case"SET_PREVIOUS_CURSOR":{let t=[...e.previousCursors],a=t.pop();return{...e,previousCursors:t,currentCursor:a?.cursor,itemSelection:"all_on_server"===e.itemSelection?"all_on_server":[]}}case"SET_DEBOUNCED_FILTER_VALUE":return{...e,debouncedFilterValue:t.debouncedFilterValue,previousCursors:[],currentCursor:void 0,itemSelection:[]};case"SET_ITEM_SELECTION":return{...e,itemSelection:t.itemSelection};default:return e}},Rg={currentCursor:void 0,previousCursors:[],debouncedFilterValue:"",itemSelection:[]};var Ry=a(760),Rx=a(37954),Rb=a(12380),Rv=a(80528);function Rw(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}let single_select_filter_provider_SingleSelectFilterProvider=class single_select_filter_provider_SingleSelectFilterProvider extends EventTarget{handleEvent(e){let t=e.parsedQuery.at(-1);t&&((""!==t.value||this.priority<=Ry.$D)&&"filter"!==t.type&&!e.parsedQuery.some(e=>"filter"===e.type&&e.filter===this.value)&&((0,wD.qA)(t.value,this.name)||(0,wD.qA)(t.value,this.value))&&this.dispatchEvent(new Event("show")),"filter"===t.type&&t.filter===this.value&&this.filterValues.map(e=>{if(!e)return;let a=e.charAt(0).toUpperCase()+e.slice(1);e.indexOf(" ")>-1&&(e=`${e}`),this.emitSuggestion(this.value,e,a,t.value,Ry.a6,void 0)}))}emitSuggestion(e,t,a,r,n,i){(!r||(0,wD.qA)(r,t))&&(r&&(n-=(0,wD.fN)(r,t)),this.dispatchEvent(new Rv.qi({filter:e,value:t,name:a,priority:n,icon:i})))}constructor(e,{name:t,value:a,priority:r,icon:n},i){super(),Rw(this,"type","filter"),Rw(this,"name",void 0),Rw(this,"singularItemName",void 0),Rw(this,"value",void 0),Rw(this,"priority",void 0),Rw(this,"icon",void 0),Rw(this,"filterValues",void 0),this.name=t,this.singularItemName=t,this.value=a,this.priority=r,this.icon=n,this.filterValues=i,e.addEventListener("query",this),e.attachProvider(this)}};let Rj=[{filter:{name:"Is",value:"is",icon:Rv.m4.Apps,description:'Filter for "issues" or "pull requests", or items that are "open", "closed", "merged", or "draft"',priority:3},values:[{value:"issue",description:"Issues only",priority:1,icon:Rv.m4.Issue},{value:"pr",description:"Pull Requests only",priority:2,icon:Rv.m4.PullRequest,name:"Pull Request"},{value:"open",description:"Items with open state",priority:3,icon:Rv.m4.Issue},{value:"closed",description:"Items with closed state",priority:4,icon:Rv.m4.IssueClosed},{value:"merged",description:"Items with merged state",priority:5,icon:Rv.m4.Merged},{value:"draft",description:"Items with draft state",priority:6,icon:Rv.m4.Draft}]}],RC={name:"No",value:"no",icon:Rv.m4.No,description:"Fields without values",priority:2},RI=[Ry.yV.assignee],RS=(0,K.forwardRef)(({onChange:e,value:t},a)=>{let{loggedInUser:r}=eU(),{allColumnsRef:n}=sl(),i=(0,K.useRef)(null);(0,fn.T)(a,i);let l=(0,K.useCallback)(e=>{e.stopPropagation();let t=e.target;Rj.map(e=>(0,Rb.Om)(e.filter,t,e.values));let a=[{value:"assignee",description:"Items without an assignee",priority:1,icon:Rv.m4.No,name:"Assignee"}];for(let e of n.current)"singleSelect"===e.dataType&&(!function(e,t){let a=nm(t.name),r={name:t.name,value:a,priority:4,description:`Filter for ${t.name}`,icon:Rv.m4.SingleSelect},n=t.settings.options.map(e=>e.name.replaceAll("-"," "));new single_select_filter_provider_SingleSelectFilterProvider(e,{...r,name:`Exclude ${t.name}`,icon:Rv.m4.Not,value:`-${r.value}`,priority:Ry.a6},n),new single_select_filter_provider_SingleSelectFilterProvider(e,r,n)}(t,e),a.push({value:nm(e.name),description:`Items without a '${e.name}' value`,priority:a.length+1,icon:Rv.m4.No,name:e.name}));(0,Rb.Om)(RC,t,a),RI.map(e=>(0,Rb.qc)(e,t,r?.login??"",r?.avatarUrl??""))},[n,r?.avatarUrl,r?.login]),s=(0,K.useCallback)(t=>{e(t.target.value)},[e]);return(0,F.jsx)(Rx.o,{inputRef:i,label:nH.filterByKeyboardOrByField,id:"archive-query-builder",onChange:s,inputValue:t,placeholder:nH.filterByKeyboardOrByField,onRequestProvider:l,...(0,ey.G)("filter-bar-input")})});RS.displayName="ArchiveQueryBuilder";let Rk={Box:"paginated-archive-footer-module__Box--CFwHn",Box_1:"paginated-archive-footer-module__Box_1--HFNN4",Box_2:"paginated-archive-footer-module__Box_2--MASKD",Box_3:"paginated-archive-footer-module__Box_3--IsX67"};function RN({children:e}){return(0,F.jsx)("div",{className:Rk.Box,children:(0,F.jsx)("div",{className:Rk.Box_1,children:e})})}function RT({hasResults:e,onFetchNextPage:t,onFetchPreviousPage:a,mutationIsLoading:r}){if(!e)return null;let n=a&&!r,i=t&&!r;return(0,F.jsx)(RN,{children:(0,F.jsx)("div",{className:Rk.Box_2,children:(0,F.jsxs)("div",{className:Rk.Box_3,children:[(0,F.jsxs)(p4.Q,{disabled:!n,onClick:a,children:[n&&(0,F.jsx)(lw.A,{icon:ly.ChevronLeftIcon})," Previous"]}),(0,F.jsxs)(p4.Q,{disabled:!i,onClick:t,children:["Next ",i&&(0,F.jsx)(lw.A,{icon:ly.ChevronRightIcon})]})]})})})}try{RN.displayName||(RN.displayName="ArchiveFooterWrapper")}catch{}try{RT.displayName||(RT.displayName="PaginatedArchiveFooter")}catch{}let R_={Checkbox:"paginated-archive-header-module__Checkbox--nXyYj",Box:"paginated-archive-header-module__Box--WRaPh",Box_1:"paginated-archive-header-module__Box_1--Z_DzL",Box_2:"paginated-archive-header-module__Box_2--hyDiL",Text:"paginated-archive-header-module__Text--izybx",Text_1:"paginated-archive-header-module__Text_1--ZN8Rv",Link:"paginated-archive-header-module__Link--AyZZU"};function RA({projectItemLimit:e,canBulkRestore:t,loading:a,filteredItemCount:r,itemSelection:n,hasSelectedAllItemsInPage:i,hasMoreItemsOnServer:l,onToggleSelectAll:s,onRestoreSelectedItems:o,onRemoveSelectedItems:d,selectMatchingItemsOnServer:u,totalCount:c,previousPagesItemCount:m,removeIsMutating:p,restoreIsMutating:h}){let{hasWritePermissions:f}=eK(),g=n&&!i;return(0,F.jsxs)(AH,{children:[(0,F.jsxs)("div",{className:R_.Box,children:[(0,F.jsx)("div",{children:r>0?(0,F.jsx)(pC.A,{onChange:f?s:void 0,"aria-label":"Toggle select all items",disabled:!f||h||p,...g?{indeterminate:!0}:{checked:i},className:R_.Checkbox}):null}),(0,F.jsx)("div",{children:(0,F.jsx)(RE,{itemSelection:n,selectMatchingItemsOnServer:l&&i&&"all_on_server"!==n?u:void 0,totalCount:c,previousPagesItemCount:m,countForCurrentPage:r,loading:a,disabled:h||p})})]}),(0,F.jsx)(RP,{projectItemLimit:e,canBulkRestore:t,itemSelection:n,onRestoreSelectedItems:o,onRemoveSelectedItems:d,restoreIsMutating:h,removeIsMutating:p})]})}function RR(e,t){return e&&"all_on_server"!==t&&t<=10}function RP({projectItemLimit:e,canBulkRestore:t,itemSelection:a,onRestoreSelectedItems:r,onRemoveSelectedItems:n,restoreIsMutating:i,removeIsMutating:l}){if(a){let s=i||l,o=RR(l,a),d=RR(i,a);return(0,F.jsxs)("div",{className:R_.Box_1,children:[(0,F.jsx)(p4.Q,{leadingVisual:o?RD:ly.TrashIcon,variant:"danger",size:"small",onClick:n,disabled:s,"aria-label":o?"Deleting items from project...":void 0,children:"Delete from project"}),(0,F.jsx)(p4.Q,{leadingVisual:d?RD:void 0,size:"small",onClick:r,disabled:!t||s,"aria-label":d?"Restoring items in project...":void 0,children:t?"Restore":(0,F.jsx)(bW.A,{"aria-label":`This will exceed the ${e} project item limit`,children:"Restore unavailable"})})]})}return null}function RD(){return(0,F.jsx)(pj.A,{size:"small"})}function RE({itemSelection:e,selectMatchingItemsOnServer:t,totalCount:a,previousPagesItemCount:r,countForCurrentPage:n,loading:i,disabled:l}){return i?(0,F.jsxs)("div",{className:R_.Box_2,children:[(0,F.jsx)("span",{className:R_.Text,children:"Loading..."}),(0,F.jsx)(pj.A,{size:"small"})]}):e?(0,F.jsxs)("div",{className:R_.Box_2,children:[(0,F.jsx)("span",{className:R_.Text_1,children:"all_on_server"===e?ii.allSelectedMatchingItems(a):ii.selectedItems(e)}),t&&(0,F.jsx)(pw.A,{disabled:l,as:"button",onClick:t,className:R_.Link,children:ii.selectAllMatchingItems(a)})]}):(0,F.jsx)("div",{children:(0,F.jsx)("span",{className:R_.Text_1,children:0===n?ii.noArchivedItems:ii.itemCount(1+r,n+r,a)})})}try{RA.displayName||(RA.displayName="PaginatedArchiveHeader")}catch{}try{RP.displayName||(RP.displayName="ArchiveHeaderBulkActions")}catch{}try{RD.displayName||(RD.displayName="SmallSpinner")}catch{}try{RE.displayName||(RE.displayName="ArchiveHeaderTitle")}catch{}let RM={Checkbox:"paginated-archive-item-module__Checkbox--kMlF2",Box:"paginated-archive-item-module__Box--sFZ3c",Box_1:"paginated-archive-item-module__Box_1--mS69x",Box_2:"paginated-archive-item-module__Box_2--GmO4J",Box_3:"paginated-archive-item-module__Box_3--WBkHx",Box_4:"paginated-archive-item-module__Box_4--iLTfX",Text:"paginated-archive-item-module__Text--N4aLy",Box_5:"paginated-archive-item-module__Box_5--eXH3b",Text_1:"paginated-archive-item-module__Text_1--kp0ZG",Box_6:"paginated-archive-item-module__Box_6--ejSad"},RB=(0,K.memo)(function({archivedItem:e,columnData:t,canRestore:a,projectItemLimit:r,isSelected:n,onToggleSelection:i,onRestoreItems:l,onRemoveItems:s,mutationLoading:o}){let{hasWritePermissions:d}=eK(),u=e.archived?.archivedAt,c=!u,m=e.contentType===eJ.RedactedItem,p=m||c||!d,h=`item-title-${e.id}`,f=t.Title,g=f?AK(f):AJ,y=aA(f),x=(0,K.useMemo)(()=>u||new Date(Date.now()-1e3).toISOString(),[u]),b=(0,K.useCallback)(()=>{l({memexProjectItemIds:[e.id]})},[l,e.id]),v=(0,K.useCallback)(()=>{s({memexProjectItemIds:[e.id]})},[s,e.id]);return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)("label",{className:RM.Box,children:(0,F.jsx)(pC.A,{"aria-labelledby":h,checked:!p&&n,onChange:p?void 0:i,disabled:p||o,className:RM.Checkbox})}),(0,F.jsx)("div",{className:RM.Box_1,children:(0,F.jsx)(A0,{titleColumn:g})}),(0,F.jsxs)("div",{className:RM.Box_2,children:[(0,F.jsxs)("div",{id:h,className:RM.Box_3,children:[(0,F.jsx)(A5,{model:e,currentValue:g}),ab(y)&&(0,F.jsx)("div",{className:RM.Box_4,children:(0,F.jsxs)("span",{className:RM.Text,children:[" #",y]})})]}),(0,F.jsxs)("div",{className:RM.Box_5,children:[e.archived?"archived":"restored"," ",(0,F.jsx)(bE.A,{datetime:x}),!m&&e.archived?.archivedBy?(0,F.jsxs)(F.Fragment,{children:[" by ",(0,F.jsx)("span",{className:RM.Text_1,children:e.archived.archivedBy.login})]}):null]})]}),(0,F.jsx)("div",{className:RM.Box_6,children:p||o?null:(0,F.jsxs)(yu.W,{children:[(0,F.jsx)(yu.W.Anchor,{children:(0,F.jsx)(fE.K,{icon:ly.KebabHorizontalIcon,variant:"invisible","aria-label":"Open item actions",className:RM.Text_1})}),(0,F.jsx)(yu.W.Overlay,{children:(0,F.jsxs)(fi.l,{children:[(0,F.jsxs)(fi.l.Item,{onSelect:b,disabled:!a,children:[(0,F.jsx)(fi.l.LeadingVisual,{children:(0,F.jsx)(ly.HistoryIcon,{})}),a?"Restore":(0,F.jsxs)(F.Fragment,{children:["Restore unavailable",(0,F.jsxs)(fi.l.Description,{variant:"block",children:["This will exceed the ",r," project item limit"]})]})]}),(0,F.jsxs)(fi.l.Item,{onSelect:v,variant:"danger",children:[(0,F.jsx)(fi.l.LeadingVisual,{children:(0,F.jsx)(ly.TrashIcon,{})}),"Delete from project"]})]})})]})})]})});try{RB.displayName||(RB.displayName="PaginatedArchiveItem")}catch{}let RL={Popover:"paginated-archive-mutation-in-progress-dialog-module__Popover--ckygB",Popover_Content:"paginated-archive-mutation-in-progress-dialog-module__Popover_Content--R83Eq",Heading:"paginated-archive-mutation-in-progress-dialog-module__Heading--hGPXh",Box:"paginated-archive-mutation-in-progress-dialog-module__Box--zRJS2",Text:"paginated-archive-mutation-in-progress-dialog-module__Text--JpMMR"},RF=({headerText:e})=>(0,F.jsx)(xu.A,{open:!0,caret:"bottom",className:RL.Popover,children:(0,F.jsxs)(xu.A.Content,{className:RL.Popover_Content,children:[(0,F.jsx)(h_.A,{as:"h2",className:RL.Heading,children:e}),(0,F.jsxs)("div",{className:RL.Box,children:[(0,F.jsx)(pj.A,{}),(0,F.jsx)("span",{className:RL.Text,children:"This may take some time. This dialog will close when the job is complete."})]})]})});try{RF.displayName||(RF.displayName="PaginatedArchiveMutationInProgressDialog")}catch{}let RO={PageLayout:"paginated-archive-view-module__PageLayout--HE9_W",Box:"paginated-archive-view-module__Box--hk1fj"},RG=e=>({filteredItems:e?.itemModels??[],hasNextPage:e?.pageInfo.hasNextPage??!1,endCursor:e?.pageInfo.endCursor,totalCount:e?.totalCount??{value:0,isApproximate:!1}});function RV(){var e;let[t,a]=(0,K.useReducer)(Rf,Rg),{data:r,isInitialLoading:n,isFetching:i}=Rd({after:t.currentCursor,q:t.debouncedFilterValue}),{filteredItems:l,hasNextPage:s,endCursor:o,totalCount:d}=RG(r),u=t.previousCursors.length>0,c=s&&o?()=>a(Rm(o,l.length)):void 0,m=(0,K.useMemo)(()=>"all_on_server"===t.itemSelection?"all_on_server":new Set(t.itemSelection),[t.itemSelection]),p=(0,K.useMemo)(()=>l.filter(e=>{let t=e.contentType===eJ.RedactedItem,a=!e.archived?.archivedAt;return!(t||a)}).map(e=>e.id),[l]),h=(0,K.useCallback)(()=>{"all_on_server"===m||p.length===m.size?a(Rh([])):a(Rh(p))},[p,m]),f=(0,K.useCallback)(()=>{a(Rh("all_on_server"))},[]),{items:g}=ug(),y=eU().projectLimits.projectItemLimit,x=g.length+1<=y,b=(e=d.value,"all_on_server"===m?g.length+e<y:g.length+m.size<=y),v=(0,K.useCallback)(e=>{if("all_on_server"===m)a(Rh(p.filter(t=>t!==e.id)));else{let t=new Set(m);t.has(e.id)?t.delete(e.id):t.add(e.id),a(Rh(Array.from(t)))}},[p,m]),w=dT(),{setArchiveStatus:j}=mY(),{mutate:C,isPending:I}=Rc(),S=(0,K.useCallback)(async e=>{C(e,{onSuccess:()=>{if("all_on_server"===t.itemSelection||t.itemSelection.length===p.length)a(Rh([]));else{let r="memexProjectItemIds"in e?e.memexProjectItemIds:[];a(Rh(t.itemSelection.filter(e=>!r.includes(e))))}j()},onError:w})},[w,C,p.length,j,t.itemSelection]),k=(0,K.useCallback)(()=>{"all_on_server"===m?S({q:t.debouncedFilterValue}):S({memexProjectItemIds:Array.from(m)})},[S,m,t.debouncedFilterValue]),{mutate:N,isPending:T}=Ru(),{confirmRemoveItems:_}=wk(),A=(0,K.useCallback)(async e=>{let r,n=[];"memexProjectItemIds"in e?n=e.memexProjectItemIds:r=ii.deleteAllMatchingItemsConfirmation,await _(n,r?{content:r}:void 0)&&N(e,{onSuccess:()=>{"all_on_server"===t.itemSelection||t.itemSelection.length===p.length?a(Rh([])):a(Rh(t.itemSelection.filter(e=>!n.includes(e)))),j()},onError:w})},[_,w,N,p.length,j,t.itemSelection]),R=(0,K.useCallback)(()=>{"all_on_server"===m?A({q:t.debouncedFilterValue,scope:"archived"}):A({memexProjectItemIds:Array.from(m)})},[A,m,t.debouncedFilterValue]),P=(0,K.useCallback)(e=>(0,F.jsx)(RB,{archivedItem:e,columnData:e.columns,canRestore:x,projectItemLimit:y,isSelected:"all_on_server"===m||m.has(e.id),onToggleSelection:()=>v(e),onRestoreItems:S,onRemoveItems:A,mutationLoading:I||T}),[x,A,S,v,y,T,I,m]),[D,E]=(0,K.useState)(""),M=(0,g7.d)(e=>a({type:"SET_DEBOUNCED_FILTER_VALUE",debouncedFilterValue:e}),225),B=(0,K.useCallback)(e=>{E(e),M(e)},[M]),L=(0,K.useRef)(null),O=l.length>0||!!t.debouncedFilterValue,G=t.previousCursors[t.previousCursors.length-1],V=G?G.previousPagesItemCount:0,$=(I||T)&&("all_on_server"===m||m.size>10);return(0,F.jsx)(mU.M,{containerWidth:"large",rowGap:"condensed",className:RO.PageLayout,children:(0,F.jsxs)(mU.M.Content,{children:[(0,F.jsxs)("div",{className:RO.Box,children:[(0,F.jsx)(RS,{ref:L,onChange:e=>B(e),value:D}),(0,F.jsx)(RA,{canBulkRestore:b,projectItemLimit:y,loading:i,restoreIsMutating:I,removeIsMutating:T,filteredItemCount:l.length,itemSelection:"all_on_server"===m?"all_on_server":m.size,hasSelectedAllItemsInPage:"all_on_server"===m||m.size===p.length,hasMoreItemsOnServer:s||u,onToggleSelectAll:h,onRestoreSelectedItems:k,onRemoveSelectedItems:R,selectMatchingItemsOnServer:f,totalCount:d,previousPagesItemCount:V})]}),(0,F.jsx)(Rn,{filteredItems:l,loaded:!n,hasArchive:O,renderItem:P,sx:l.length>0?{borderRadius:0,borderBottom:0}:void 0}),(0,F.jsx)(RT,{hasResults:l.length>0,onFetchNextPage:c,onFetchPreviousPage:u?()=>a(Rp()):void 0,mutationIsLoading:T||I}),$&&(0,F.jsx)(RF,{headerText:I?"Restoring items...":"Deleting items..."})]})})}try{RV.displayName||(RV.displayName="PaginatedArchiveView")}catch{}function R$(){mL();let{memex_table_without_limits:e}=iz();return e?(0,F.jsx)(mF,{...(0,ey.G)("paginated-archive-page"),className:A$.BaseSettingsPage,children:(0,F.jsx)(RV,{})}):(0,F.jsx)(mF,{...(0,ey.G)("archive-page"),className:A$.BaseSettingsPage,children:(0,F.jsx)(AM,{children:(0,F.jsx)(Rl,{})})})}try{R$.displayName||(R$.displayName="ArchivePage")}catch{}async function RW({filter:e,xAxis:t,yAxis:a,startDate:r,endDate:n,period:i}){let l=new URL(nP("memex-chart-show-api-data").url,window.location.origin),s=t.dataSource.column,o=t.dataSource.sortOrder,d=t.groupBy?.column,u=a?.aggregate.operation,c=a?.aggregate.columns;e&&l.searchParams.append(dD,e),s&&l.searchParams.append(dU,s.toString()),o&&l.searchParams.append("xAxis[dataSource][sortOrder]",o),d&&l.searchParams.append(dH,d.toString()),u&&l.searchParams.append(dK,u),c&&l.searchParams.append(dq,c.join(",")),r&&l.searchParams.append(dW,r),n&&l.searchParams.append(dz,n),i&&l.searchParams.append(d$,i);let{data:m}=await ig(l);return m}function Rz(e){return(0,oY.I)({queryKey:["memex",yL,yF(e)],queryFn:async()=>RW(yF(e)),staleTime:1/0})}function RH({localVersion:e,serverVersion:t}){let a=e.configuration,r=t.configuration,n=a.filter.trim()!==r.filter.trim(),i=a.type!==r.type,l=a.xAxis.dataSource.column!==r.xAxis.dataSource.column,s=a.xAxis.dataSource.sortOrder!==r.xAxis.dataSource.sortOrder,o=a.xAxis.groupBy?.column!==r.xAxis.groupBy?.column,d=a.xAxis.groupBy?.sortOrder!==r.xAxis.groupBy?.sortOrder,u=l||s||o||d,c=a.yAxis.aggregate.operation!==r.yAxis.aggregate.operation,m=!(0,ut.A)(a.yAxis.aggregate.columns,r.yAxis.aggregate.columns),p=a.time?.period!==r.time?.period,h=a.time?.startDate!==r.time?.startDate,f=a.time?.endDate!==r.time?.endDate,g=p||h||f,y=i||u||c||m;return{isXAxisColumnDirty:l,isXAxisGroupByColumnDirty:o,isXAxisGroupBySortOrderDirty:d,isXAxisDirty:u,isYAxisAggregateOperationDirty:c,isYAxisAggregateColumnsDirty:m,isFilterDirty:n,isConfigurationDirty:y,isTimePeriodDirty:g,isDirty:y||n||g}}function RU(e){return"time"===e.localVersion.configuration.xAxis.dataSource.column}function Rq(e){return e.number<=0}function RK(e){let t=new URLSearchParams(e);return t.delete(dD),t.delete(dE),t.delete(dU),t.delete(dH),t.delete(dq),t.delete(dK),t.delete(d$),t.delete(dW),t.delete(dz),t}let RQ={bar:"bar",column:"column",line:"line","stacked-area":"stacked-area","stacked-bar":"stacked-bar","stacked-column":"stacked-column"},RJ={sum:"sum",count:"count",max:"max",min:"min",avg:"avg"},RX={sum:"sum",count:"count"};function RY(e){let{memex_table_without_limits:t}=eP();return t?e in RX:e in RJ}function RZ({memexChartOperation:e,values:t}){switch(e){case"sum":return t.reduce((e,t)=>e+t,0);case"avg":return 0===t.length?null:t.reduce((e,t)=>e+t,0)/t.length;case"min":return 0===t.length?null:Math.min(...t);case"max":return 0===t.length?null:Math.max(...t);default:throw Error(`Unknown memex chart operation: ${e}`)}}let R0=(0,K.createContext)(null);function R1(){let e=(0,K.useContext)(R0);if(null===e)throw Error("useCharts can only be used inside a ChartStateProvider");return e}let R2=(0,K.createContext)(null),R5=(0,K.memo)(function({children:e}){let[t,a]=(0,K.useState)(!1),[r,n]=(0,K.useState)(!1),i=(0,K.useRef)(0),l=(0,K.useCallback)(()=>{clearTimeout(i.current),n(!1),a(!0)},[]),s=(0,K.useCallback)(()=>{n(!0),i.current=window.setTimeout(()=>{a(!1),n(!1)},300)},[]),o=(0,K.useMemo)(()=>({openPane:l,closePane:s,isClosing:r,isOpen:t}),[l,s,r,t]);return(0,F.jsx)(R2.Provider,{value:o,children:e})}),R3=()=>{let e=(0,K.useContext)(R2);if(null===e)throw Error("useInsightsConfigurationPane must be used within a InsightsConfigurationPaneProvider");return e};try{R2.displayName||(R2.displayName="InsightsConfigurationPaneContext")}catch{}try{R5.displayName||(R5.displayName="InsightsConfigurationPaneProvider")}catch{}let R4={bar:"bar",column:"column",line:"line","stacked-area":"areaspline","stacked-bar":"bar","stacked-column":"column"},R6=e=>"line"===e||"stacked-area"===e,R8=e=>"stacked-area"===e||"stacked-bar"===e||"stacked-column"===e,R7=["2W","1M","3M","max","custom"],R9=(e,t)=>{let a=e.get(d$);return a&&R7.includes(a)?a:t?.period??"2W"},Pe=e=>!!e&&/^\d{4}-\d{2}-\d{2}$/.test(e),Pt=(e,t)=>{let a=R9(e,t),r={period:a};if("custom"===a){let a=e.get(dW)??t?.startDate,n=e.get(dz)??t?.endDate;Pe(a)&&Pe(n)?(r.startDate=a,r.endDate=n):r.period=t?.period??"2W"}return r};var Pa=a(31844),Pr=a(66567);let Pn="insights-query-element-memex-with-opaque-error",Pi=e=>e.setAttribute("error",""),Pl=function({tagName:e,elementClass:t,events:a}){return"undefined"==typeof window||window.customElements.get(e)||window.customElements.define(e,t,void 0),(0,Pr.a)({tagName:e,elementClass:t,react:Q,events:a,displayName:e})}({tagName:Pn,elementClass:class InsightsQueryWithOpaqueError extends Pa.on{constructor(...e){super(...e),function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(this,"renderError",(e,t)=>{super.renderError(e,t,{chartCallback:Pi})})}}}),Ps=(0,K.forwardRef)(function(e,t){let a=(0,K.useRef)(null);(0,K.useImperativeHandle)(t,()=>a.current);let r=(0,K.useRef)(null);return(0,K.useEffect)(()=>{let e=!0,t=a.current;return async function(){await window.customElements.whenDefined(Pn),r.current=window.setTimeout(()=>{t&&e&&t.executeQuery()})}(),()=>{e=!1,r.current&&window.clearTimeout(r.current)}},[e.authUrl,e.apiUrl,e.query,e.autoRender,e.options]),(0,F.jsx)(Pl,{...e,ref:a})});try{Pl.displayName||(Pl.displayName="ReactInsightsQuery")}catch{}try{Ps.displayName||(Ps.displayName="AutoExecutingInsightsQuery")}catch{}try{Ps.displayName||(Ps.displayName="AutoExecutingInsightsQuery")}catch{}var Po=a(39647);let Pd=["business","business_plus"];function Pu(){let{isDotcomRuntime:e,isBillingEnabled:t,projectOwner:a}=eU(),{isPublicProject:r}=y7(),{isOrganization:n,projectLimits:i}=eU(),{memex_insights:l,memex_charts_basic_public:s,memex_charts_basic_private:o,memex_charts_basic_allow:d,memex_insights_basic_private:u,memex_insights_basic_public:c,memex_charts_for_all:m}=iz(),p=!1===t||m||l&&n&&e||n&&e&&!!a&&Pd.includes(a.planName||""),h=p||d||(r?s:o),f=h?Number.MAX_VALUE:i.limitedChartsLimit;return{isInsightsEnabled:p,hasUnlimitedSavedCharts:h,savedChartsLimit:f,isInsightsEligible:r?c:u}}function Pc(e,t,a){t!==a?e.set(dD,t):e.delete(dD)}function Pm(e,t,a){t===a?e.delete(dE):e.set(dE,t)}function Pp(e,t,a){(0,ut.A)(t,a)?(e.delete(dU),e.delete(dH)):(e.set(dU,`${t.dataSource.column}`),e.set(dH,t.groupBy?`${t.groupBy.column}`:""))}function Ph(e,t,a){(0,ut.A)(t,a)?(e.delete(dK),e.delete(dq)):(e.set(dK,t.aggregate.operation),e.set(dq,t.aggregate.columns?t.aggregate.columns.join(","):""))}function Pf(e,t,a){!t||(0,ut.A)(t,a)?(e.delete(d$),e.delete(dW),e.delete(dz)):"custom"===t.period?(e.set(d$,t.period),e.set(dW,t.startDate||""),e.set(dz,t.endDate||"")):(e.set(d$,t.period),e.delete(dW),e.delete(dz))}function Pg(e){let[t,a]=cH(),{getNextSearchParamsForConfigurationUpdate:r}=function(){let[e]=cH(),{hasUnlimitedSavedCharts:t}=Pu();return{getNextSearchParamsForConfigurationUpdate:(0,K.useCallback)((a,r)=>{let n=r.serverVersion.configuration,i=new URLSearchParams(e);return t&&(a.type&&Pm(i,a.type,n.type),a.xAxis&&Pp(i,a.xAxis,n.xAxis),a.yAxis&&Ph(i,a.yAxis,n.yAxis)),"string"==typeof a.filter&&Pc(i,a.filter,n.filter),Pf(i,a.time,n.time),i},[t,e])}}(),n=(0,K.useCallback)((n,{replace:i=!1}={})=>{let l=r(n,e);t.toString()!==l.toString()&&a(l,{replace:i})},[r,e,t,a]);return(0,K.useMemo)(()=>({setNextChartParams:n}),[n])}let Py={Text:"shared-module__Text--Vv2q2"},Px={flex:1,gridTemplateColumns:"min-content 1fr min-content",textAlign:"left",width:"100%","[data-component=buttonContent]":{flex:0}},Pb={width:"353px"},Pv=({children:e,sx:t,...a})=>(0,F.jsx)(lv.A,{sx:t,className:Py.Text,...a,children:e});try{Pv.displayName||(Pv.displayName="SelectorLabel")}catch{}let Pw={Text:"validation-module__Text--XDcv6",Box:"validation-module__Box--mdSRH"},Pj={success:ly.CheckCircleFillIcon,error:ly.AlertFillIcon,warning:ly.AlertFillIcon},PC={success:"success.fg",error:"danger.fg",warning:"attention.fg"},PI=({children:e,validationStatus:t,sx:a})=>{let r=t?Pj[t]:void 0,n=t?PC[t]:void 0;return(0,F.jsxs)(lv.A,{sx:{color:n,...a},className:Pw.Text,children:[r&&(0,F.jsx)("span",{className:Pw.Box,children:(0,F.jsx)(r,{size:12,fill:"currentColor"})}),(0,F.jsx)("span",{children:e})]})};try{PI.displayName||(PI.displayName="Validation")}catch{}let PS={Box:"y-axis-selector-module__Box--CY1uI",SelectorLabel:"y-axis-selector-module__SelectorLabel--yIpg8",ActionMenu_Button:"y-axis-selector-module__ActionMenu_Button--UvyqT"},Pk=e=>"count"!==e,PN=new Set([eN.Number]),PT=(e,t)=>`${n4.operationLabel[e]} ${t}`,P_={count:{label:PT("count","items"),type:"count"},sum:{label:PT("sum","a field"),type:"sum"},avg:{label:PT("avg","a field"),type:"avg"},min:{label:PT("min","a field"),type:"min"},max:{label:PT("max","a field"),type:"max"}},PA=Object.values(P_),PR=(e,t)=>e?.field.name??(t?n4.invalidFieldLabel:"None");function PP({chart:e}){let{setNextChartParams:t}=Pg(e),{allColumns:a}=i5(),{updateLocalChartConfiguration:r}=R1(),n=(0,K.useMemo)(()=>a.filter(e=>PN.has(e.dataType)).map(e=>({label:e.name,icon:IS(e.dataType),field:e})),[a]),i=(0,K.useCallback)(a=>{let i={operation:a.type,columns:"count"===a.type?void 0:n[0]?.field.databaseId?[n[0].field.databaseId]:void 0},l={yAxis:{...e.localVersion.configuration.yAxis,aggregate:i}};r(e.number,l),t(l)},[n,e.localVersion.configuration.yAxis,e.number,t,r]),l=(0,K.useCallback)(a=>{let n={yAxis:{...e.localVersion.configuration.yAxis,aggregate:{...e.localVersion.configuration.yAxis.aggregate,columns:a}}};r(e.number,n),t(n)},[e.localVersion.configuration.yAxis,e.number,t,r]),s=e.localVersion.configuration.yAxis.aggregate.columns||[],o=n.find(e=>s.includes(e.field.databaseId)),d=!o&&s.length>0,u=d?{borderColor:"danger.emphasis"}:{},c=(0,F.jsx)(PI,{validationStatus:"error",children:n4.invalidFieldErrorMessage}),m=PR(o,d),p=P_[e.localVersion.configuration.yAxis.aggregate.operation],h=(0,K.useId)(),f=(0,K.useId)(),g=(0,K.useId)(),y=(0,K.useId)(),x=RU(e)?PA.filter(e=>RY(e.type)):PA;return(0,F.jsxs)("div",{className:PS.Box,children:[(0,F.jsx)(Pv,{id:h,children:"Y-axis"}),(0,F.jsxs)(yu.W,{children:[(0,F.jsx)(yu.W.Button,{id:f,"aria-labelledby":`${h} ${f}`,sx:Px,children:p?.label??"None"}),(0,F.jsx)(yu.W.Overlay,{sx:Pb,children:(0,F.jsx)(fi.l,{selectionVariant:"single",...(0,ey.G)("chart-y-axis-list"),children:x.map(e=>(0,F.jsx)(fi.l.Item,{selected:p?.type===e.type,onSelect:()=>i(e),disabled:Pk(e.type)&&0===n.length,children:e.label},e.type))})})]}),p&&Pk(p.type)?(0,F.jsxs)(F.Fragment,{children:[(0,F.jsxs)(yu.W,{children:[(0,F.jsx)(Pv,{id:g,className:PS.SelectorLabel,children:"Y-axis field"}),(0,F.jsx)(yu.W.Button,{id:y,"aria-labelledby":`${g} ${y}`,sx:{...Px,...u},leadingVisual:o?.icon,disabled:0===n.length,className:PS.ActionMenu_Button,children:m}),(0,F.jsx)(yu.W.Overlay,{sx:Pb,children:(0,F.jsx)(fi.l,{selectionVariant:"single",...(0,ey.G)("chart-y-axis-field-list"),children:n.map(e=>(0,F.jsxs)(fi.l.Item,{selected:o?.field.databaseId===e.field.databaseId,onSelect:()=>l([e.field.databaseId]),children:[(0,F.jsx)(fi.l.LeadingVisual,{children:(0,F.jsx)(e.icon,{})}),e.field.name]},e.field.id))})})]}),d?c:null]}):null]})}try{PP.displayName||(PP.displayName="YAxisSelector")}catch{}function PD(e,t,a){let r={name:e?.name||"Unknown",dataType:"nvarchar"},n={name:"Count",dataType:"int"};return t&&a&&"count"!==a&&(n={name:PT(a,t.name),dataType:"int"}),{xAxis:r,yAxis:n}}function PE(e,t){let a=function(e,t){switch(e.dataType){case eN.SingleSelect:{let a=t[e.id]?.id,r=PM(e.settings.options),n=e.settings.options?.find(e=>e.id===a),i=r.get(n?.id);if(i)return[i];return[`${nH.noSuggestion} ${e.name}`]}case eN.Milestone:return t[eT.Milestone]?.title;case eN.IssueType:return t[eT.IssueType]?.name;case eN.Repository:return t[eT.Repository]?.nameWithOwner;case eN.Date:return aj(t[e.id]);case eN.Number:{let a=t[e.id];return a?.value.toString()}case eN.Labels:return t.Labels?.map(e=>e.name);case eN.LinkedPullRequests:return t[eT.LinkedPullRequests]?.map(e=>e.number.toString());case eN.Assignees:return t[eT.Assignees]?.map(e=>e.login);case eN.Reviewers:return t[eT.Reviewers]?.map(e=>e.reviewer.name);case eN.Iteration:{let a=t[e.id]?.id,r=aK(e),n=PM(r),i=r.find(e=>e.id===a),l=n.get(i?.id);if(l)return l;return`${nH.noSuggestion} ${e.name}`}case eN.ParentIssue:return t[eT.ParentIssue]?.title;default:throw Error(`${e.dataType} column is not a supported chart data type`)}}(e,t);return a&&0!==a.length?Array.isArray(a)?a:[a]:[`${nH.noSuggestion} ${e.name}`]}function PM(e){let t=new Map,a=new Map;for(let r of e){let e=r.name||r.title;a.get(e)?a.set(e,(a.get(e)||0)+1):a.set(e,1);let n=a.get(e)||0;n>1?t.set(r.id,`${e} (${n-1})`):t.set(r.id,e)}return t}let PB=(e="emphasis")=>[`var(--data-blue-color-${e}, var(--data-blue-color))`,`var(--data-green-color-${e}, var(--data-green-color))`,`var(--data-orange-color-${e}, var(--data-orange-color))`,`var(--data-pink-color-${e}, var(--data-pink-color))`,`var(--data-yellow-color-${e}, var(--data-yellow-color))`,`var(--data-red-color-${e}, var(--data-red-color))`,`var(--data-purple-color-${e}, var(--data-purple-color))`,`var(--data-auburn-color-${e}, var(--data-auburn-color))`,`var(--data-teal-color-${e}, var(--data-teal-color))`,`var(--data-gray-color-${e}, var(--data-gray-color))`],PL=(e,t)=>{let a;let r=R4[e],n=0;"number"==typeof t?n=t%PB().length:a=t;let i=a?.backgroundColor??PB("muted")[n]??"var(--data-blue-color)",l=a?.borderColor??PB("emphasis")[n]??"var(--data-blue-color)",s=i;switch(window.CSS?.supports("color",`rgb(from ${i} r g b / 0.5)`)&&(s=`rgb(from ${i} r g b / 0.5)`),r){case"bar":case"column":return{color:s,borderColor:l,borderWidth:2};case"area":case"areaspline":return{fillColor:s,color:l};default:return{color:l}}};function PF(e,t){let a=e.fillColor??e.color,r=e.borderColor??e.color,n=`<span style="width: 14px; height: 14px; border-radius: 50%; position: absolute; background-color: ${a}; border: 1px solid ${r};"></span>`,i=`<span style="padding-left: 20px">${pO(t)}</span>`;return`${n} ${i}`}let PO={Box:"loading-box-module__Box--ueQKx"},PG=({children:e})=>(0,F.jsx)("div",{className:PO.Box,children:e});try{PG.displayName||(PG.displayName="LoadingBox")}catch{}let PV={Heading:"loading-card-module__Heading--E1VkY"},P$=()=>(0,F.jsxs)(PG,{children:[(0,F.jsx)(ly.GraphIcon,{className:"fgColor-muted",size:"medium"}),(0,F.jsxs)(h_.A,{as:"h3",className:PV.Heading,children:["Loading ",(0,F.jsx)("span",{className:"AnimatedEllipsis"})]})]});try{P$.displayName||(P$.displayName="LoadingCard")}catch{}let PW={Heading:"no-data-card-module__Heading--wMYlF",Box:"no-data-card-module__Box--g5fE2"},Pz=()=>(0,F.jsxs)(PG,{children:[(0,F.jsx)(ly.GraphIcon,{className:"fgColor-muted",size:"medium"}),(0,F.jsx)(h_.A,{as:"h3",className:PW.Heading,children:"No data available"}),(0,F.jsx)("p",{className:PW.Box,children:"No results were returned."})]});try{Pz.displayName||(Pz.displayName="NoDataCard")}catch{}let PH=(0,K.memo)(function({configuration:e,filteredItems:t}){let{memex_table_without_limits:a}=iz(),{series:r,axis:n,xCoordinates:i,isLoading:l}=a?function(e){let{findColumnByDatabaseId:t}=ua(),{xAxis:a,yAxis:r}=e,n=a.dataSource.column,i=a.groupBy?.column,l=r.aggregate?.columns?.[0],s=r.aggregate?.operation,o=ab(n)?t(n):void 0,d=ab(l)?t(l):void 0,u=ab(i)?t(i):void 0,c=PD(o,d,e.yAxis.aggregate.operation),m=Rz(e),p=!m.data,h=[],f=[];if(m.data&&o?.name&&m.data.dataSeries[0]){let e=n4.negateStr(o.name);if(f=m.data.xAxis.values.map(t=>"_noValue"===t?e:t),u){let e=n4.negateStr(u.name);h=m.data.dataSeries.map(t=>"_noValue"===t.name?{...t,name:e}:t)}else{let e=d&&"count"!==s?d.name:n4.items;h=[{...m.data.dataSeries[0],name:PT(s,e)}]}}return{series:h,axis:c,xCoordinates:f,isLoading:p}}(e):function(e,t){let{items:a}=ug(),{findColumnByDatabaseId:r}=ua(),n=e.xAxis.dataSource.column,i=e.xAxis.groupBy?.column,l=e.yAxis.aggregate?.columns?.[0],s=ab(n)?r(n):void 0,o=ab(i)?r(i):void 0,d=ab(l)?r(l):void 0,u=PD(s,d,e.yAxis.aggregate.operation),{series:c,xCoordinates:m}=function({items:e,xAxisColumnModel:t,yAxisColumnModel:a,groupByColumnModel:r,yAxisAggregate:n,isChartCard:i=!1}){if(!t)return[];let l=kV(t),s=l?e.slice().sort((e,t)=>{let a=l(e,t,!1);if(0===a&&r){let n=r?kV(r):void 0;return n?.(e,t,!1)??a}return a}):e.slice();return"count"!==n.operation&&a?r?function({items:e,xAxisColumnModel:t,yAxisColumnModel:a,groupByColumnModel:r,memexChartOperation:n,isChartCard:i}){let l=new Map,s=[];for(let n of e){let e=n.columns,i=PE(t,e),o=parseFloat(PE(a,e)[0]);for(let t of i){let a=l.get(t)??new Map;for(let n of(l.get(t)||l.set(t,a),PE(r,e))){s.includes(n)||s.push(n);let e=a.get(n)??[];isNaN(o)||e.push(o),a.set(n,e)}}}let o=Array.from(l.keys()),d=s.map(e=>({name:e,data:[]})),u=[];for(let[e,t]of l)for(let a of s){let r=t.get(a),i=r&&r.length>0?RZ({memexChartOperation:n,values:r}):0;r&&r.length>0&&u.push([e,i,a]),d.find(e=>e.name===a)?.data.push(i??0)}return i?{xCoordinates:o,series:d}:u}({items:s,xAxisColumnModel:t,yAxisColumnModel:a,groupByColumnModel:r,memexChartOperation:n.operation,isChartCard:i}):function({items:e,xAxisColumnModel:t,yAxisColumnModel:a,memexChartOperation:r,isChartCard:n}){let i=new Map;for(let r of e){let e=r.columns,n=PE(t,e),l=parseFloat(PE(a,e)[0]);for(let e of n){let t=i.get(e)||[];isNaN(l)||t.push(l),i.set(e,t)}}let l=[{data:[],name:"Sum of Estimate"}],s=Array.from(i.keys()),o=[];for(let[e,t]of i)t.length>0&&o.push([e,RZ({memexChartOperation:r,values:t})]),l[0]?.data.push(RZ({memexChartOperation:r,values:t})??0);return n?{series:l,xCoordinates:s}:o}({items:s,xAxisColumnModel:t,yAxisColumnModel:a,memexChartOperation:n.operation,isChartCard:i}):r?function(e,t,a,r){let n={},i=[];for(let r of e)for(let e of PE(t,r.columns))for(let t of(void 0===n[e]&&(n[e]={}),PE(a,r.columns)))n[e]?.[t]===void 0&&(n[e][t]=0),i.includes(t)||i.push(t),n[e][t]+=1;let l=Object.keys(n),s=i.map(e=>({name:e,data:[]})),o=[];for(let e of Object.keys(n))for(let t of i){let a=n[e][t];a&&o.push([e,a,t]),s.find(e=>e.name===t)?.data.push(a??0)}return r?{xCoordinates:l,series:s}:o}(s,t,r,i):function(e,t,a){let r={};for(let a of e)for(let e of PE(t,a.columns))void 0===r[e]&&(r[e]=0),r[e]+=1;let n=[{data:[],name:"Sum of Estimate"}],i=Object.keys(r),l=[];for(let e of Object.keys(r))l.push([e,r[e]]),n[0]?.data.push(r[e]);return a?{series:n,xCoordinates:i}:l}(s,t,i)}({items:null===t?a:t,xAxisColumnModel:s,yAxisColumnModel:d,groupByColumnModel:o,yAxisAggregate:e.yAxis.aggregate,isChartCard:!0});return{series:c.filter(e=>e.data.length),axis:u,xCoordinates:m,isLoading:!1}}(e,t),{xAxis:s,yAxis:o}=n,d=r.map((t,a)=>{let r=PL(e.type,a);return{...t,...r}});return l?(0,F.jsx)(P$,{}):i.length?(0,F.jsx)(Po.d,{padding:"spacious",size:"xl",children:(0,F.jsx)(Po.d.Chart,{colors:PB("emphasis"),series:d,xAxisTitle:s.name,xAxisOptions:{title:{text:null},categories:i},yAxisTitle:o.name,yAxisOptions:{title:{text:null},maxPadding:0,allowDecimals:!1},plotOptions:{series:{stacking:R8(e.type)?"normal":void 0,marker:{enabled:!1},pointPlacement:R6(e.type)?"on":void 0}},overrideOptionsNotRecommended:{legend:{reversed:!1,verticalAlign:"bottom",align:"right",layout:"horizontal",enabled:!0,useHTML:!0,symbolHeight:0,symbolWidth:0,labelFormatter(){return PF(this.options,this.name)}},tooltip:{valuePrefix:"&nbsp;"}},type:R4[e.type]})}):(0,F.jsx)(Pz,{})});try{PH.displayName||(PH.displayName="CurrentInsightsChart")}catch{}let PU={Box:"base-chart-error-module__Box--lUppw"},Pq=({icon:e,heading:t,content:a,children:r,...n})=>(0,F.jsx)(lx.A,{className:PU.Box,...n,children:(0,F.jsx)(hk,{icon:e,heading:t,content:a,children:r})});try{Pq.displayName||(Pq.displayName="BaseChartError")}catch{}let PK=()=>(0,F.jsx)(Pq,{heading:"This chart configuration is no longer valid",content:"A required field may have been deleted. You will need to delete and re-create this chart."});try{PK.displayName||(PK.displayName="ChartErrorFallback")}catch{}let PQ={Button:"invalid-config-error-module__Button--JSphg"},PJ=()=>{let{openPane:e}=R3();return(0,F.jsx)(Pq,{...(0,ey.G)("chart-invalid-config-error"),heading:"This chart configuration is no longer valid",content:"A required field may have been deleted. Update the configuration or delete the chart.",children:(0,F.jsx)(p4.Q,{onClick:e,className:PQ.Button,children:"Update configuration"})})};try{PJ.displayName||(PJ.displayName="InvalidConfigError")}catch{}let PX=()=>(0,F.jsx)(Pq,{icon:ly.CircleSlashIcon,heading:"This insight chart no longer exists",content:"Select another chart to view insights"});try{PX.displayName||(PX.displayName="MissingChartError")}catch{}let PY=e=>{let{updateChartName:t}=R1(),[a,r]=(0,xX.N)(e.name),n=(0,K.useCallback)(()=>{r(e.name)},[e.name,r]),i=(0,K.useCallback)(async()=>{if(Rq(e))return;let r=a.trim();r!==e.name&&(r.length?await t.perform({chartNumber:e.number,chart:{name:r}}):n())},[e,a,t,n]);return{chartName:a,setLocalChartName:r,revertChartName:n,saveChartName:i}},PZ={Box:"insights-chart-name-module__Box--x4v44",Box_1:"insights-chart-name-module__Box_1--qFYSE",Box_2:"insights-chart-name-module__Box_2--VFB4Z",Dialog_Header:"insights-chart-name-module__Dialog_Header--LURye",Heading:"insights-chart-name-module__Heading--fmuW5",Box_3:"insights-chart-name-module__Box_3--lf7oH",FormControl:"insights-chart-name-module__FormControl--Hnb39",TextInput:"insights-chart-name-module__TextInput--tWujB",Box_4:"insights-chart-name-module__Box_4--qan3h"},P0=(0,K.memo)(function({chart:e}){let{hasWritePermissions:t}=eK(),{chartName:a}=PY(e),[r,n]=(0,K.useState)(!1),i=(0,K.useRef)(null);return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)("div",{className:PZ.Box,children:(0,F.jsxs)("div",{className:PZ.Box_1,children:[(0,F.jsx)("div",{className:PZ.Box_2,...(0,ey.G)("insights-chart-name"),children:a}),t&&(0,F.jsx)(fE.K,{ref:i,icon:ly.PencilIcon,onClick:()=>n(!0),variant:"invisible","aria-label":"Edit chart name",...(0,ey.G)("chart-name-edit-button")})]})}),(0,F.jsx)(P1,{chart:e,isOpen:r,setIsOpen:n,returnFocusRef:i})]})}),P1=({chart:e,isOpen:t,setIsOpen:a,returnFocusRef:r})=>{let{chartName:n,setLocalChartName:i,revertChartName:l,saveChartName:s}=PY(e),o=(0,K.useRef)(null),d=(0,K.useCallback)(e=>i(e.target.value),[i]),u=(0,K.useCallback)(()=>{a(!1),s()},[s,a]),c=(0,K.useCallback)(()=>{l(),a(!1)},[l,a]);return(0,F.jsxs)(g9.A,{isOpen:t,initialFocusRef:o,returnFocusRef:r,onDismiss:c,"aria-labelledby":"chart-name-editor-header",children:[(0,F.jsx)(g9.A.Header,{id:"chart-name-editor-header",className:PZ.Dialog_Header,children:(0,F.jsx)(h_.A,{as:"h3",className:PZ.Heading,children:"Edit chart name"})}),(0,F.jsx)("div",{className:PZ.Box_3,children:(0,F.jsxs)(hM.A,{className:PZ.FormControl,children:[(0,F.jsx)(hM.A.Label,{children:"Chart name"}),(0,F.jsx)(gp.A,{ref:o,name:"chartName",value:n,onChange:d,className:PZ.TextInput,...(0,ey.G)("chart-name-editor-input")})]})}),(0,F.jsxs)("div",{className:PZ.Box_4,children:[(0,F.jsx)(p4.Q,{variant:"default",onClick:c,children:"Cancel"}),(0,F.jsx)(p4.Q,{variant:"primary",onClick:u,children:"Save"})]})]},t?"open":"closed")};try{P0.displayName||(P0.displayName="InsightsChartName")}catch{}try{P1.displayName||(P1.displayName="ChartNameEditorDialog")}catch{}let P2={Box:"insights-chart-view-module__Box--bFz3F",Heading:"insights-chart-view-module__Heading--Zg41S",Text:"insights-chart-view-module__Text--pNWlb",Box_1:"insights-chart-view-module__Box_1--_dX4S",Box_2:"insights-chart-view-module__Box_2--znZ9X",Box_3:"insights-chart-view-module__Box_3--Lvuje",chartBufferStyles:"insights-chart-view-module__chartBufferStyles--eiemt"};var P5=a(22870);let P3={Box:"action-buttons-module__Box--PcnYh"};function P4({chart:e,showUpsellDialog:t}){let{canCreateChart:a}=yV(),{updateLocalChartConfiguration:r,updateChartConfiguration:n,createChartConfiguration:i,resetLocalChangesForChartNumber:l}=R1(),{closePane:s}=R3(),o=c$(),d=RH(e),[u,c]=cH(),m=mK(),p=(0,K.useCallback)(async()=>{function r(){let e=RK(new URLSearchParams(u));e.toString()!==u.toString()&&c(e,{replace:!0})}Rq(e)?a()?(await i.perform({chart:{configuration:e.localVersion.configuration}}),l(e.number),r(),"succeeded"===i.status.current.status&&o(ll.generatePath({...m,insightNumber:i.status.current.data.chart.number}))):t():(await n.perform({chartNumber:e.number,chart:{configuration:e.localVersion.configuration}}),r()),s()},[e,s,u,c,a,i,l,o,t,n,m]),h=(0,K.useCallback)(()=>{r(e.number,{...e.serverVersion.configuration,filter:e.localVersion.configuration.filter});let t=function(e){let t=new URLSearchParams(e);return t.delete(dE),t.delete(dU),t.delete(dH),t.delete(dq),t.delete(dK),t}(new URLSearchParams(u));u.toString()!==t.toString()&&c(t),s()},[e.localVersion.configuration.filter,e.number,e.serverVersion.configuration,s,u,c,r]);return(0,F.jsxs)("div",{className:P3.Box,children:[(0,F.jsx)(p4.Q,{onClick:h,disabled:!d.isDirty,...(0,ey.G)("insights-discard-changes"),children:nH.discardChanges}),(0,F.jsx)(p4.Q,{variant:"primary",onClick:p,disabled:!d.isDirty,...(0,ey.G)("insights-save-changes"),children:Rq(e)?nH.saveToNewChart:nH.saveChanges})]})}try{P4.displayName||(P4.displayName="ActionButtons")}catch{}let P6={Box:"insights-configuration-pane-module__Box--fOu_G",Box_1:"insights-configuration-pane-module__Box_1--duWyM",Box_2:"insights-configuration-pane-module__Box_2--RRajp",Box_3:"insights-configuration-pane-module__Box_3--Zp7bG",Heading:"insights-configuration-pane-module__Heading--E11ss",IconButton:"insights-configuration-pane-module__IconButton--nzJ3d"};function P8(){return(0,F.jsx)("svg",{"aria-hidden":"true",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,F.jsxs)("g",{children:[(0,F.jsx)("line",{x1:"1.75",y1:"0.75",x2:"1.75",y2:"15.25",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),(0,F.jsx)("rect",{x:"1",y:"3",width:"9",height:"3",rx:"1.5",fill:"currentColor"}),(0,F.jsx)("rect",{x:"1",y:"7",width:"13",height:"3",rx:"1.5",fill:"currentColor"}),(0,F.jsx)("rect",{x:"1",y:"11",width:"6",height:"3",rx:"1.5",fill:"currentColor"})]})})}try{P8.displayName||(P8.displayName="BarChartIcon")}catch{}function P7(){return(0,F.jsxs)("svg",{"aria-hidden":"true",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,F.jsx)("line",{x1:"15.25",y1:"14.25",x2:"0.75",y2:"14.25",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),(0,F.jsx)("rect",{x:"2.75",y:"6.75",width:"1.5",height:"7.5",rx:"0.75",stroke:"currentColor",strokeWidth:"1.5",strokeLinejoin:"round"}),(0,F.jsx)("rect",{x:"6.75",y:"4.75",width:"1.5",height:"9.5",rx:"0.75",stroke:"currentColor",strokeWidth:"1.5",strokeLinejoin:"round"}),(0,F.jsx)("rect",{x:"10.75",y:"9.75",width:"1.5",height:"4.5",rx:"0.75",stroke:"currentColor",strokeWidth:"1.5",strokeLinejoin:"round"})]})}try{P7.displayName||(P7.displayName="ColumnChartIcon")}catch{}function P9(){return(0,F.jsxs)("svg",{"aria-hidden":"true",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,F.jsx)("path",{d:"M0.75 14.25H0C0 14.6642 0.335786 15 0.75 15L0.75 14.25ZM0.75 13.25L0.281479 12.6643C0.103567 12.8067 0 13.0222 0 13.25H0.75ZM5.75 9.25L6.08541 8.57918L5.6562 8.36457L5.28148 8.66435L5.75 9.25ZM9.75 11.25L9.41459 11.9208C9.67891 12.053 9.99621 12.0176 10.2249 11.8305L9.75 11.25ZM15.25 6.75H16C16 6.46021 15.833 6.19635 15.5712 6.07225C15.3093 5.94815 14.9994 5.98602 14.7751 6.16953L15.25 6.75ZM15.25 14.25V15C15.6642 15 16 14.6642 16 14.25H15.25ZM1.5 14.25V13.25H0V14.25H1.5ZM1.21852 13.8357L6.21852 9.83565L5.28148 8.66435L0.281479 12.6643L1.21852 13.8357ZM5.41459 9.92082L9.41459 11.9208L10.0854 10.5792L6.08541 8.57918L5.41459 9.92082ZM10.2249 11.8305L15.7249 7.33047L14.7751 6.16953L9.27507 10.6695L10.2249 11.8305ZM14.5 6.75V14.25H16V6.75H14.5ZM15.25 13.5H0.75V15H15.25V13.5Z",fill:"currentColor"}),(0,F.jsx)("path",{d:"M0.281479 8.91435C-0.0419677 9.17311 -0.0944088 9.64507 0.164348 9.96852C0.423106 10.292 0.895075 10.3444 1.21852 10.0857L0.281479 8.91435ZM5.75 5.5L6.08541 4.82918C5.82376 4.69835 5.50991 4.7316 5.28148 4.91435L5.75 5.5ZM9.75 7.5L9.41459 8.17082L9.87424 8.40065L10.2545 8.05496L9.75 7.5ZM15.7545 3.05496C16.061 2.77632 16.0836 2.30199 15.805 1.9955C15.5263 1.689 15.052 1.66641 14.7455 1.94504L15.7545 3.05496ZM1.21852 10.0857L6.21852 6.08565L5.28148 4.91435L0.281479 8.91435L1.21852 10.0857ZM5.41459 6.17082L9.41459 8.17082L10.0854 6.82918L6.08541 4.82918L5.41459 6.17082ZM10.2545 8.05496L15.7545 3.05496L14.7455 1.94504L9.2455 6.94504L10.2545 8.05496Z",fill:"currentColor"})]})}try{P9.displayName||(P9.displayName="StackedAreaChartIcon")}catch{}let De={bar:{label:"Bar",type:"bar",icon:P8},column:{label:"Column",type:"column",icon:P7},line:{label:"Line",type:"line",icon:ly.GraphIcon},"stacked-area":{label:"Stacked area",type:"stacked-area",icon:P9},"stacked-bar":{label:"Stacked bar",type:"stacked-bar",icon:P8},"stacked-column":{label:"Stacked column",type:"stacked-column",icon:P7}},Dt=Object.values(De),Da={Box:"layout-selector-module__Box--IBuwq"};function Dr({chart:e}){let{updateLocalChartConfiguration:t}=R1(),{number:a,localVersion:{configuration:{type:r}}}=e,n=De[r],{setNextChartParams:i}=Pg(e),l=(0,K.useCallback)(e=>{let r={type:e.type};t(a,r),i(r)},[t,a,i]),s=(0,K.useId)(),o=(0,K.useId)();return(0,F.jsxs)("div",{className:Da.Box,children:[(0,F.jsx)(Pv,{id:s,children:"Layout"}),(0,F.jsxs)(yu.W,{children:[(0,F.jsx)(yu.W.Button,{id:o,"aria-labelledby":`${s} ${o}`,leadingVisual:n?.icon,sx:Px,children:n?.label??"None"}),(0,F.jsx)(yu.W.Overlay,{sx:Pb,children:(0,F.jsx)(fi.l,{selectionVariant:"single",...(0,ey.G)("chart-layout-list"),children:Dt.map(e=>(0,F.jsxs)(fi.l.Item,{selected:e.type===r,onSelect:()=>l(e),children:[(0,F.jsx)(fi.l.LeadingVisual,{children:(0,F.jsx)(e.icon,{})}),e.label]},e.type))})})]})]})}try{Dr.displayName||(Dr.displayName="LayoutSelector")}catch{}let Dn={Box:"x-axis-selector-module__Box--EMNF9"},Di=new Set([eN.Iteration,eN.SingleSelect,eN.Milestone,eN.Repository,eN.Labels,eN.Assignees,eN.IssueType,eN.ParentIssue]),Dl=new Set([eN.Iteration,eN.SingleSelect,eN.Repository,eN.Labels]),Ds=new Set([eN.Milestone,eN.Assignees]),Do=(e,t)=>e?.label??(t?n4.invalidFieldLabel:"None"),Dd={borderColor:"danger.emphasis"},Du=e=>({...Px,...e?Dd:{}});function Dc({chart:e}){let{allColumns:t}=i5(),{findColumnByName:a}=uf(),{updateLocalChartConfiguration:r}=R1(),{setNextChartParams:n}=Pg(e),i=a("Status"),{memex_historical_charts_on_assignees_milestones:l}=iz(),s=(0,K.useCallback)(t=>{let a={xAxis:{...e.localVersion.configuration.xAxis,dataSource:{column:t.type},groupBy:"time"===t.type?{column:i.databaseId}:void 0},yAxis:"time"===t.type?{aggregate:{operation:"count"}}:e.localVersion.configuration.yAxis};r(e.number,a),n(a)},[i.databaseId,e.localVersion.configuration.xAxis,e.localVersion.configuration.yAxis,e.number,n,r]),o=(0,K.useCallback)(t=>{if("time"===t)return;let a={xAxis:{...e.localVersion.configuration.xAxis,groupBy:null==t?void 0:{column:t}}};r(e.number,a),n(a)},[e.localVersion.configuration.xAxis,e.number,n,r]),d=(0,K.useMemo)(()=>t.filter(e=>Di.has(e.dataType)).map(e=>({label:e.name,icon:IS(e.dataType),type:e.databaseId,category:"field"})).concat({label:"Time",type:"time",icon:ly.CalendarIcon,category:"historical"}).sort((e,t)=>e.label.localeCompare(t.label)),[t]),u=(0,K.useMemo)(()=>{let e=new Set([...Dl,...l?Ds:[]]);return t.filter(t=>e.has(t.dataType)).map(e=>({label:e.name,icon:IS(e.dataType),type:e.databaseId,category:"field"})).sort((e,t)=>e.label.localeCompare(t.label))},[t,l]),c=d.find(t=>t.type===e.localVersion.configuration.xAxis.dataSource.column),m=!c&&!!e.localVersion.configuration.xAxis.dataSource.column,p=Do(c,m),h=(0,K.useMemo)(()=>d.filter(e=>"historical"===e.category),[d]),f=(0,K.useMemo)(()=>d.filter(e=>"field"===e.category),[d]),g=(0,K.useMemo)(()=>RU(e)?u:d.filter(e=>!("time"===e.type||e.type===c?.type)),[e,u,c?.type,d]),y=g.find(t=>t.type===e.localVersion.configuration.xAxis.groupBy?.column),x=!y&&!!e.localVersion.configuration.xAxis.groupBy?.column,b=Do(y,x),v=(0,F.jsx)(PI,{validationStatus:"error",children:n4.invalidFieldErrorMessage}),{isInsightsEnabled:w}=Pu(),j="time"===e.localVersion.configuration.xAxis.dataSource.column,C=(0,K.useId)(),I=(0,K.useId)(),S=(0,K.useId)(),k=(0,K.useId)();return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsxs)("div",{className:Dn.Box,children:[(0,F.jsx)(Pv,{id:C,children:"X-axis"}),(0,F.jsxs)(yu.W,{children:[(0,F.jsx)(yu.W.Button,{leadingVisual:c?.icon,sx:Du(m),id:I,"aria-labelledby":`${C} ${I}`,children:p}),(0,F.jsx)(yu.W.Overlay,{sx:Pb,children:(0,F.jsxs)(fi.l,{selectionVariant:"single",...(0,ey.G)("chart-x-axis-list"),children:[w&&(0,F.jsxs)(fi.l.Group,{children:[(0,F.jsx)(fi.l.GroupHeading,{children:"Historical"}),h.map(e=>(0,F.jsxs)(fi.l.Item,{selected:c?.type===e.type,onSelect:()=>s(e),children:[(0,F.jsx)(fi.l.LeadingVisual,{children:(0,F.jsx)(e.icon,{})}),e.label]},e.label))]}),(0,F.jsxs)(fi.l.Group,{children:[(0,F.jsx)(fi.l.GroupHeading,{children:w?"Fields":""}),f.map(e=>(0,F.jsxs)(fi.l.Item,{selected:c?.type===e.type,onSelect:()=>s(e),children:[(0,F.jsx)(fi.l.LeadingVisual,{children:(0,F.jsx)(e.icon,{})}),e.label]},e.label))]})]})})]}),m?v:null]}),j?null:(0,F.jsxs)("div",{className:Dn.Box,children:[(0,F.jsx)(Pv,{id:S,children:"Group by (optional)"}),(0,F.jsxs)(yu.W,{children:[(0,F.jsx)(yu.W.Button,{id:k,"aria-labelledby":`${S} ${k}`,leadingVisual:y?.icon,sx:Du(x),children:b}),(0,F.jsx)(yu.W.Overlay,{sx:Pb,children:(0,F.jsxs)(fi.l,{selectionVariant:"single",...(0,ey.G)("chart-x-axis-group-by-list"),children:[(0,F.jsx)(fi.l.Item,{selected:void 0===e.localVersion.configuration.xAxis.groupBy,onSelect:()=>o(null),children:"None"}),g.map(t=>(0,F.jsxs)(fi.l.Item,{selected:e.localVersion.configuration.xAxis.groupBy?.column===t.type,onSelect:()=>o(t.type),children:[(0,F.jsx)(fi.l.LeadingVisual,{children:(0,F.jsx)(t.icon,{})}),t.label]},t.label))]})})]}),x?v:null]})]})}try{Dc.displayName||(Dc.displayName="XAxisSelector")}catch{}let Dm=({chart:e,showUpsellDialog:t})=>(0,F.jsxs)("div",{children:[(0,F.jsxs)("div",{className:P6.Box,children:[(0,F.jsx)(Dr,{chart:e}),(0,F.jsx)(Dc,{chart:e}),(0,F.jsx)(PP,{chart:e})]}),(0,F.jsx)("div",{className:P6.Box_1,children:(0,F.jsx)(P4,{chart:e,showUpsellDialog:t})})]}),Dp=({chart:e,showUpsellDialog:t,returnFocusRef:a})=>{let{closePane:r,isOpen:n}=R3(),i=ki(),{containerRef:l}=(0,hF.r)();return n?(0,F.jsx)(P5.Ay,{returnFocusRef:a,onEscape:r,onClickOutside:r,children:(0,F.jsxs)("div",{ref:l,style:{height:i.clientHeight},className:P6.Box_2,...(0,ey.G)("insights-configuration-pane"),children:[(0,F.jsxs)("div",{className:P6.Box_3,children:[(0,F.jsx)(h_.A,{as:"h2",className:P6.Heading,children:"Configure chart"}),(0,F.jsx)(fE.K,{"aria-label":"Close configuration pane",variant:"invisible",icon:ly.XIcon,onClick:r,className:P6.IconButton,...(0,ey.G)("side-panel-button-close")})]}),(0,F.jsx)(Dm,{chart:e,showUpsellDialog:t})]})}):null};try{Dm.displayName||(Dm.displayName="InsightsConfigurationPaneForm")}catch{}try{Dp.displayName||(Dp.displayName="InsightsConfigurationPane")}catch{}let Dh=({filterCount:e,filterValue:t,handleFilterValueChange:a,handleNewFilterBarValueChange:r,onClearButtonClick:n,setValueFromSuggestion:i,onSaveChanges:l,onResetChanges:s,inputRef:o,hideSaveButton:d})=>{let{items:u}=ug(),c=(0,K.useMemo)(()=>({items:u}),[u]);return(0,F.jsx)(fb.Provider,{value:c,children:(0,F.jsx)(gG,{inputRef:o,height:"32px",value:t,onChange:a,onChangeValue:r,onClearButtonClick:n,setValueFromSuggestion:i,filterCount:e,onSaveChanges:l,onResetChanges:s,hideSaveButton:d})})};try{Dh.displayName||(Dh.displayName="InsightsFilters")}catch{}let Df={Box:"insights-upsell-dialog-module__Box--vBMQP",Octicon:"insights-upsell-dialog-module__Octicon--Q4_hx",Text:"insights-upsell-dialog-module__Text--aawTo",Box_1:"insights-upsell-dialog-module__Box_1--izWdK",Text_1:"insights-upsell-dialog-module__Text_1--hZ7z_",Box_2:"insights-upsell-dialog-module__Box_2--ZMLOM",Octicon_1:"insights-upsell-dialog-module__Octicon_1--lSpIO"};function Dg(){let[e,t]=(0,K.useState)(!1),{postStats:a}=iN(),r=(0,K.useCallback)(()=>{t(!0),a({name:"insights_upsell_dialog_open"})},[a]),n=(0,K.useCallback)(()=>t(!1),[]);return{showDialog:r,InsightsUpsellDialog:(0,K.useCallback)(()=>e?(0,F.jsx)(Dy,{hideDialog:n}):null,[n,e])}}function Dy({hideDialog:e}){let{savedChartsLimit:t}=Pu(),a=Ix("insightsChartLimitDialog","banner"),{postStats:r}=iN();return(0,F.jsxs)(Cw.l,{"aria-labelledby":"insights-chart-limits-dialog-title",onClose:()=>e(),width:"xlarge",role:"alertdialog",renderHeader:()=>(0,F.jsx)("div",{style:{backgroundImage:`url(${a})`},className:Df.Box}),footerButtons:[{content:n4.upsellDialogCancelButton,onClick:()=>e()},{as:"a",buttonType:"primary",content:(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(lw.A,{icon:ly.LinkExternalIcon,className:Df.Octicon}),n4.upsellDialogUpgradePlanButton]}),href:"https://github.com/pricing",sx:{ml:3},target:"_blank",rel:"noreferrer",onClick:()=>r({name:"insights_upsell_dialog_upgrade_click"})}],children:[(0,F.jsx)("span",{id:"insights-chart-limits-dialog-title",className:Df.Text,children:n4.upsellDialogTitle}),(0,F.jsxs)("div",{className:Df.Box_1,children:[(0,F.jsx)("span",{children:n4.planUpgradeText(t)}),(0,F.jsx)("span",{className:Df.Text_1,children:n4.upsellDialogSubtitle}),(0,F.jsx)(Dx,{text:n4.upsellDialogBullet1}),(0,F.jsx)(Dx,{text:n4.upsellDialogBullet2}),(0,F.jsx)(Dx,{text:n4.upsellDialogBullet3})]})]})}function Dx({text:e}){return(0,F.jsxs)("div",{className:Df.Box_2,children:[(0,F.jsx)(lw.A,{icon:ly.CheckIcon,className:Df.Octicon_1})," ",(0,F.jsx)("span",{children:e})]})}try{(w=InsightsUpsellDialog).displayName||(w.displayName="InsightsUpsellDialog")}catch{}try{Dy.displayName||(Dy.displayName="UpsellDialog")}catch{}try{Dx.displayName||(Dx.displayName="UpsellDialogChecklistItem")}catch{}var Db=a(42340),Dv=a(39804),Dw=a(76935),Dj=a(85551);let DC="yyyy-MM-dd";function DI(){let e=(0,Pa.O4)(),t=Pa.Tj[(0,Pa.cD)(e)].scale,a=t.green[(0,Pa.Qo)(e,4,5)],r=t.green[(0,Pa.Qo)(e,0,9)],n=t.purple[(0,Pa.Qo)(e,5,5)],i=t.purple[(0,Pa.Qo)(e,0,9)],l=t.red[(0,Pa.Qo)(e,4,5)],s=t.red[(0,Pa.Qo)(e,0,9)],o=t.gray[(0,Pa.Qo)(e,6,4)],d=t.gray[(0,Pa.Qo)(e,0,7)];if(void 0!==a&&void 0!==r&&void 0!==n&&void 0!==i&&void 0!==l&&void 0!==s&&void 0!==o&&void 0!==d)return{[DS.OPEN]:{borderColor:a,backgroundColor:r},[DS.COMPLETED]:{borderColor:n,backgroundColor:i},[DS.CLOSED]:{borderColor:l,backgroundColor:s},[DS.NOT_PLANNED]:{borderColor:o,backgroundColor:d},[DS.DUPLICATE]:{borderColor:o,backgroundColor:d}}}let DS={OPEN:"Open",COMPLETED:"Completed",CLOSED:"Closed pull requests",NOT_PLANNED:"Not planned",DUPLICATE:"Duplicate"};function Dk(e){return e?new Date(e):void 0}function DN(e){return e.issueCreatedAt?e.issueCreatedAt:"DraftIssue"===e.contentType?e.createdAt:void 0}function DT(e){return e?(0,tF.GP)(new Date(e),DC).toString():""}function D_(e){let t=e.columns?.Title;return t?.contentType===eJ.PullRequest&&t.value.state===eB.Merged}function DA(e,t,a){let r=DS[t],n=DI()?.[r],i=e.series.find(e=>e.name===r),l=n?PL(a,n):{};void 0===i?e.series.push({name:r,data:[e[t]],index:DR(r),...l}):i.data.push(e[t])}function DR(e){switch(e){case DS.OPEN:return 0;case DS.COMPLETED:return 1;case DS.CLOSED:return 2;case DS.NOT_PLANNED:return 3;case DS.DUPLICATE:return 4;default:return 5}}let DP=(0,K.memo)(function({configuration:e,endDate:t,filteredItems:a,startDate:r}){let{memex_table_without_limits:n}=iz(),{series:i,xCoordinates:l,isLoading:s}=n?function({configuration:e,startDate:t,endDate:a}){let{time:r}=e,n=Rz(r?{...e,time:{...r,startDate:t,endDate:a}}:uT(e,["time"])),i=!n.data,l=e.type;return{series:(n.data?.dataSeries||[]).map(e=>{let t=DI()?.[e.name],a=t?PL(l,t):{};return{...e,...a}}),xCoordinates:function(e){let t=new Date().getUTCFullYear(),a=Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",timeZone:"UTC"}),r=Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric",timeZone:"UTC"});return e.map(e=>{let n=new Date(e);return n.getUTCFullYear()===t?a.format(n):r.format(n).replace(",","")})}(n.data?.xAxis.values||[]),isLoading:i}}({configuration:e,startDate:r,endDate:t}):function({configuration:e,filteredItems:t,startDate:a,endDate:r}){let n=e.time?.period||"2W",{items:i}=ug(),{findColumnByDatabaseId:l}=ua(),s=t||i,o=function({period:e,startDate:t,endDate:a,items:r}){let n=new Date;switch(e){case"2W":return(0,Db.k)({start:(0,tM.e)(n,14),end:n});case"1M":return(0,Db.k)({start:(0,Dv.a)(n,1),end:n});case"3M":return(0,Db.k)({start:(0,Dv.a)(n,3),end:n});case"max":{let e=(0,Dw.j)(r.map(e=>{let t=DN(e);return t?new Date(t):n})),t=(0,tM.e)(n,7);return(0,Db.k)({start:(0,tB.Y)(e,t)?e:t,end:n})}case"custom":return(0,Db.k)({start:t?new Date(t):n,end:a?new Date(a):n})}}({period:n,startDate:a,endDate:r,items:s}),d=e.yAxis.aggregate,u=d?.columns?.[0],c=ab(u)?l(u):void 0;return"count"!==d.operation&&c?{isLoading:!1,...function({items:e,dates:t,yAxisColumnModel:a,memexChartOperation:r}){let n=(0,Dw.j)(t),i=new Map,l=new Map(t.map(e=>[DT(e.toISOString()),new Map([[DS.NOT_PLANNED,new Set],[DS.DUPLICATE,new Set],[DS.COMPLETED,new Set],[DS.CLOSED,new Set],[DS.OPEN,new Set]])])),s=new Set([DS.NOT_PLANNED,DS.DUPLICATE,DS.COMPLETED,DS.CLOSED,DS.OPEN]);for(let r of e){let e=parseFloat(PE(a,r.columns)[0]);for(let a of(i.set(r.id,e),t)){let e=DT(a.toISOString()),t=function({item:e,date:t,startDate:a}){let r=Dk(DN(e)),n=Dk(e.issueClosedAt);if(n&&((0,tB.Y)(n,t)||(0,Dj.r)(n,t))){if((0,tB.Y)(n,a))return;if(e.contentType===eJ.Issue)return e.stateReason===eM.NotPlanned?DS.NOT_PLANNED:e.stateReason===eM.Duplicate?DS.DUPLICATE:DS.COMPLETED;if(e.contentType!==eJ.PullRequest)return;return D_(e)?DS.COMPLETED:DS.CLOSED}if(r&&((0,tB.Y)(r,t)||(0,Dj.r)(r,t)))return DS.OPEN}({item:r,date:a,startDate:n});t&&(l.get(e)?.get(t)?.add(r.id),s.delete(t))}}let o=[],d=[];for(let[e,t]of l)for(let[a,n]of(o.push(e),t)){let e=RZ({memexChartOperation:r,values:Array.from(n).map(e=>i.get(e)||0)});if(!s.has(a)){let t=d.find(e=>e.name===a);if(void 0===t){let t=DI()?.[a];d.push({name:a,data:[e||0],fillColor:t?.backgroundColor,color:t?.borderColor,index:DR(a)})}else t.data.push(e||0)}}return{series:d,xCoordinates:o}}({items:s,dates:o,yAxisColumnModel:c,memexChartOperation:d.operation})}:{isLoading:!1,...function({items:e,dates:t,type:a}){if(e.length){let r=function({items:e,dates:t}){let a=(0,Dw.j)(t);return e.reduce((e,t)=>{let r=DN(t);return r&&(0,tB.Y)(new Date(r),a)&&e.open++,t.issueClosedAt&&(0,tB.Y)(new Date(t.issueClosedAt),a)&&(t.contentType===eJ.Issue?(t.stateReason===eM.NotPlanned?e.notPlanned++:t.stateReason===eM.Duplicate?e.duplicate++:e.completed++,e.open--):t.contentType===eJ.PullRequest&&(D_(t)?e.completed++:e.closed++,e.open--)),e},{open:0,completed:0,closed:0,notPlanned:0,duplicate:0})}({items:e,dates:t}),n=function({items:e}){return e.reduce((e,t)=>{let a=DT(DN(t));if(!a)return e;e.open.get(a)?e.open.set(a,(e.open.get(a)||0)+1):e.open.set(a,1);let r=DT(t.issueClosedAt),n=t.contentType===eJ.Issue?t.stateReason===eM.NotPlanned?e.notPlanned:t.stateReason===eM.Duplicate?e.duplicate:e.completed:D_(t)?e.completed:e.closed;return r&&(n.get(r)?n.set(r,(n.get(r)||0)+1):n.set(r,1)),e},{open:new Map,completed:new Map,closed:new Map,notPlanned:new Map,duplicate:new Map})}({items:e}),{series:i,xCoordinates:l}=t.reduce((e,t)=>{let i=(0,tF.GP)(t,DC).toString(),l=n.open.get(i)||0,s=n.completed.get(i)||0,o=n.closed.get(i)||0,d=n.notPlanned.get(i)||0,u=n.duplicate.get(i)||0;return e.OPEN=e.OPEN+l-s-o-d-u,e.COMPLETED+=s,e.CLOSED+=o,e.NOT_PLANNED+=d,e.DUPLICATE+=u,e.xCoordinates.push((0,tF.GP)(t,"MMM d")),n.notPlanned.size>0&&DA(e,"NOT_PLANNED",a),n.duplicate.size>0&&DA(e,"DUPLICATE",a),n.closed.size>0&&DA(e,"CLOSED",a),n.completed.size>0&&DA(e,"COMPLETED",a),n.open.size+r.open>0&&DA(e,"OPEN",a),e},{series:[],xCoordinates:[],OPEN:r.open,COMPLETED:0,CLOSED:0,NOT_PLANNED:0,DUPLICATE:0});return{series:i,xCoordinates:l}}return{series:[],xCoordinates:[]}}({items:s,dates:o,type:e.type})}}({configuration:e,filteredItems:a,startDate:r,endDate:t});if(s)return(0,F.jsx)(P$,{});if(!l.length)return(0,F.jsx)(Pz,{});let o=e.type;return(0,F.jsx)(Po.d,{padding:"spacious",size:"xl",children:(0,F.jsx)(Po.d.Chart,{series:i,xAxisTitle:"Date",xAxisOptions:{title:{text:null},categories:l,tickAmount:28},yAxisTitle:"items",yAxisOptions:{title:{text:null},maxPadding:0,allowDecimals:!1},plotOptions:{series:{stacking:R8(o)?"normal":void 0,marker:{enabled:!1},pointPlacement:R6(e.type)?"on":void 0}},overrideOptionsNotRecommended:{legend:{reversed:!0,align:"right",layout:"horizontal",verticalAlign:"bottom",useHTML:!0,symbolHeight:0,symbolWidth:0,labelFormatter(){return PF(this.options,this.name)}},tooltip:{valuePrefix:"&nbsp;"}},type:R4[o]})})});try{DP.displayName||(DP.displayName="LeanHistoricalInsightsChart")}catch{}function DD({size:e,color:t}){return`0 0 0 ${e} ${t}`}let DE=({startDate:e,endDate:t})=>{let[a,r]=cH(),n=(0,K.useMemo)(()=>{let a=(0,tD.H)(e??""),r=(0,tD.H)(t??"");return(0,tO.f)(a)&&(0,tO.f)(r)?{from:a,to:r}:null},[t,e]),i=(0,K.useCallback)(e=>{if(!e)return;let t=new URLSearchParams(a);t.set(d$,"custom"),t.set(dW,(0,bb.x)(e.from,{representation:"date"})),t.set(dz,(0,bb.x)(e.to,{representation:"date"})),r(t)},[r,a]),l=null!==n;return(0,F.jsx)(by.DatePicker,{variant:"range",value:n,onChange:i,placeholder:"Custom range",anchor:({children:e,...t})=>(0,F.jsxs)(p4.Q,{variant:"invisible",sx:{fontWeight:"normal",bg:l?"btn.outline.selectedBg":"transparent",color:l?"btn.outline.selectedText":"fg.default",":hover":{bg:l?"btn.outline.selectedBg":"transparent",boxShadow:e=>DD({size:"1px",color:e.colors.btn.outline.hoverBorder})}},...(0,ey.G)("insight-custom-date-picker"),...t,children:[(0,F.jsx)(ly.CalendarIcon,{}),(0,F.jsx)(lv.A,{sx:{px:2},children:e}),(0,F.jsx)(ly.ChevronDownIcon,{})]})})};try{DE.displayName||(DE.displayName="InsightCustomDatePicker")}catch{}let DM=[{value:"2W",ariaLabel:"Last 2 weeks"},{value:"1M",ariaLabel:"Last month"},{value:"3M",ariaLabel:"Last 3 months"},{text:"Max",value:"max"}];function DB({periodValue:e,selected:t,children:a,"aria-label":r}){let n=(0,J.zy)(),i=(0,K.useMemo)(()=>{let t=new URLSearchParams(n.search);return t.set(d$,e),t.delete(dW),t.delete(dz),{pathname:n.pathname,search:t.toString()}},[e,n.pathname,n.search]),l=(0,K.useCallback)(()=>(0,Il.i)(n4.periodNavigationLinkAnnouncement(r??a)),[r,a]);return(0,F.jsx)("li",{children:(0,F.jsx)(lx.A,{as:cW,"aria-current":t,"aria-label":r,to:i,onClick:l,sx:{display:"flex",alignItems:"center",px:2,borderRadius:"6px",minHeight:"30px",textDecoration:"none",color:t?"fg.onEmphasis":"fg.default",backgroundColor:t?"accent.emphasis":"transparent",borderColor:t?"accent.emphasis":"transparent",":focus-visible":{outlineOffset:"1px"},"&:hover":{textDecoration:"none",backgroundColor:t?"accent.emphasis":"canvas.subtle"}},children:a},e)})}function DL({period:e}){return(0,F.jsx)("nav",{"aria-label":"Time period",children:(0,F.jsx)(lx.A,{as:"ul",sx:{listStyle:"none",margin:0,padding:0,display:"flex",gap:2},children:DM.map((t,a)=>(0,F.jsx)(DB,{periodValue:t.value,selected:e===t.value||!e&&0===a,"aria-label":t.ariaLabel,children:t.text??t.value},t.value))})})}try{DB.displayName||(DB.displayName="PeriodNavigationLink")}catch{}try{DL.displayName||(DL.displayName="PeriodNavigation")}catch{}let DF=(0,K.memo)(function(){let e=(0,J.g)(),{getChartConfigurationByNumber:t}=yV(),a=t(e.insightNumber?Number(e.insightNumber):0);if(!a)return(0,F.jsx)(PX,{});let r=(0,F.jsx)(PK,{});return(0,F.jsx)(ErrorBoundary,{fallback:r,children:(0,F.jsx)(DG,{chart:a})},a.number)}),DO={minWidth:"100%",minHeight:"200px",aspectRatio:["4/3","4/3","16 / 9"],maxWidth:"100%",[`& ${Pn}`]:{width:"100%",display:"block",height:"100%"},"& .redaction_msg":{ml:"unset !important"}},DG=(0,K.memo)(function({chart:e}){let{hasWritePermissions:t}=eK(),{updateChartConfiguration:a}=R1(),[r,n]=cH(),{filteredItems:i,filterValue:l,handleFilterValueChange:s,handleNewFilterBarValueChange:o,onClearButtonClick:d,setValueFromSuggestion:u,resetFilter:c,inputRef:m}=function(e){let{localFilterValue:t,setLocalFilterValueAndSyncToQueryParam:a,resetFilter:r}=function(e){let t=e.localVersion.configuration.filter,a=e.serverVersion.configuration.filter,{updateLocalChartConfiguration:r}=R1(),n=(0,bZ.A)(),[i,l]=cH(),s=(0,K.useRef)(null),o=(0,K.useRef)(!1);(0,K.useEffect)(()=>()=>{s.current&&window.clearTimeout(s.current)},[]);let[d,u]=(0,K.useState)(()=>i.get(dD)??t),c=(0,K.useCallback)((t,a={immediate:!1})=>{function d(){let n=new URLSearchParams(i);t===e.serverVersion.configuration.filter?n.delete(dD):n.set(dD,t),r(e.number,{filter:t}),l(n,{replace:a.replace})}u(t),a.skipNextSyncFromExternalChange&&(o.current=!0),s.current&&window.clearTimeout(s.current),a.immediate?d():s.current=window.setTimeout(()=>{n()&&d()},200)},[i,e.serverVersion.configuration.filter,e.number,r,l,n]),m=(0,nk.M)(c);return(0,K.useEffect)(function(){if(o.current)o.current=!1;else{let e=new URLSearchParams(window.location.search);m.current(e.get(dD)??t,{immediate:!0,replace:!0})}},[t,m,e.number]),{localFilterValue:d,setLocalFilterValueAndSyncToQueryParam:c,resetFilter:(0,K.useCallback)(()=>{m.current(a,{immediate:!0})},[a,m]),setLocalFilterValue:u}}(e),{filteredItems:n}=function(e){let t=AT(e),{items:a}=ug(),{itemMatchesFilterQuery:r}=i3();return{filteredItems:(0,K.useMemo)(()=>t.trim()?a.filter(e=>r(e,nw(t))):null,[t,a,r])}}(t),i=(0,K.useRef)(null),l=t.trim(),s=(0,K.useMemo)(()=>l?()=>{a("",{immediate:!0,skipNextSyncFromExternalChange:!0})}:void 0,[l,a]),o=(0,K.useCallback)(e=>a(e,{immediate:!0,skipNextSyncFromExternalChange:!0}),[a]);return{chart:e,filteredItems:n,filterValue:t,handleFilterValueChange:(0,K.useCallback)(e=>{a(e.target.value,{immediate:!1,skipNextSyncFromExternalChange:!0})},[a]),handleNewFilterBarValueChange:(0,K.useCallback)(e=>{a(e,{immediate:!1,skipNextSyncFromExternalChange:!0})},[a]),onClearButtonClick:s,setValueFromSuggestion:o,resetFilter:r,inputRef:i}}(e),{endDate:p,period:h,startDate:f}=function(e){let t=RU(e),[a]=cH(),{time:r}=e.localVersion.configuration,{period:n,startDate:i,endDate:l}=Pt(a,r),{updateLocalChartConfiguration:s}=R1();return(0,K.useEffect)(()=>{t&&"custom"!==n&&s(e.number,{time:{period:n}})},[e.number,t,n,s]),(0,K.useEffect)(()=>{t&&i&&l&&s(e.number,{time:{period:"custom",startDate:i,endDate:l}})},[e.number,t,i,l,s]),{endDate:l,period:n,startDate:i}}(e),{openPane:g,isOpen:y}=R3(),{memex_table_without_limits:x}=iz(),{filterCount:b}=x?function(e){let t=Rz(e);return{filterCount:e.filter?.trim()?t.data?.totalCount:void 0}}(e.localVersion.configuration):{filterCount:i?.length},{isValid:v}=function(e){let{getFieldIdsFromFilter:t}=_Z(),{missingFieldIds:a,addPotentiallyMissingFieldIds:r}=_Y(),{findColumnByDatabaseId:n}=ua(),[i,l]=(0,K.useState)(!0);return(0,K.useEffect)(()=>{let a=t(e.filter),s=new Set;if("number"==typeof e.xAxis.dataSource.column){let t=e.xAxis.dataSource.column,r=n(t);r?a.add(r.id):s.add(t)}if(e.xAxis.groupBy){let t=e.xAxis.groupBy.column,r=n(t);r?a.add(r.id):s.add(t)}if(e.yAxis.aggregate.columns)for(let t of e.yAxis.aggregate.columns){let e=n(t);e?a.add(e.id):s.add(t)}l(0===s.size),i&&a.size>0&&r([...a])},[r,e.filter,e.xAxis.dataSource.column,e.xAxis.groupBy,e.yAxis.aggregate.columns,n,t,l,i]),(0,K.useMemo)(()=>({isLoading:a.length>0,isValid:i,missingFieldIds:a}),[a,i])}(e.localVersion.configuration),w=(0,K.useCallback)(async()=>{if(Rq(e))return;await a.perform({chartNumber:e.number,chart:{configuration:{...e.localVersion.configuration,filter:l}}});let t=new URLSearchParams(r);t.delete(dD),n(t,{replace:!0})},[e,l,r,n,a]),j=RH(e),C=Rq(e),I=!C,S=RU(e),{InsightsUpsellDialog:k,showDialog:N}=Dg(),T=(0,K.useRef)(null);return(0,F.jsxs)("div",{className:P2.Box,children:[(0,F.jsxs)(h_.A,{...(0,ey.G)("insights-header"),as:"h2",className:P2.Heading,children:[C?e.name:(0,F.jsx)(P0,{chart:e}),t&&(0,F.jsx)("div",{children:(0,F.jsx)(p4.Q,{ref:T,leadingVisual:ly.PencilIcon,onClick:g,...(0,ey.G)("insights-configuration-pane-button-open"),children:"Configure"})})]}),e.description?(0,F.jsxs)("span",{className:P2.Text,...(0,ey.G)("insights-description"),children:[e.description," "]}):null,(0,F.jsx)("div",{className:P2.Box_1,children:(0,F.jsx)("div",{className:P2.Box_2,children:(0,F.jsx)(Dh,{inputRef:m,filterValue:l,filterCount:b,handleFilterValueChange:s,handleNewFilterBarValueChange:o,onClearButtonClick:d,setValueFromSuggestion:u,onSaveChanges:I&&j.isFilterDirty?w:void 0,hideSaveButton:!I||!t,onResetChanges:j.isFilterDirty?c:void 0})})}),v?(0,F.jsxs)(F.Fragment,{children:[S?(0,F.jsxs)("div",{className:P2.Box_3,children:[(0,F.jsx)(DL,{period:h}),(0,F.jsx)(DE,{startDate:f,endDate:p})]}):null,(0,F.jsx)(lx.A,{sx:DO,children:(0,F.jsx)("div",{className:P2.chartBufferStyles,children:S?(0,F.jsx)(DP,{configuration:e.localVersion.configuration,filteredItems:i,filterValue:l,startDate:f,endDate:p}):(0,F.jsx)(PH,{configuration:e.localVersion.configuration,filterValue:l,filteredItems:i})})})]}):(0,F.jsx)(PJ,{}),y&&(0,F.jsx)(Dp,{chart:e,showUpsellDialog:N,returnFocusRef:T}),(0,F.jsx)(k,{})]})});try{DF.displayName||(DF.displayName="InsightsChartView")}catch{}try{DG.displayName||(DG.displayName="InsightChartContent")}catch{}let DV={position:"relative"},D$=(0,K.memo)(function({children:e,isDirty:t,hideDirtyState:a=!1,...r}){let n=a?{}:{height:"8px",width:"8px",backgroundColor:"accent.emphasis",top:"-1px",right:"-3px",borderRadius:"100%",boxShadow:e=>`0 0 0 2px ${e.colors.canvas.overlay}`,flex:"none",...r.sx},i=(0,K.useRef)(null),l={...r,title:void 0,ref:i,"aria-label":"Unsaved changes",role:"status",sx:e?{...n,position:"absolute"}:{...n,position:"relative"}};return e?(0,F.jsxs)(lx.A,{className:"dirty-icon-container",sx:DV,children:[e,t&&(0,F.jsx)(lx.A,{...l})]}):t?(0,F.jsx)(lx.A,{...l}):null});try{D$.displayName||(D$.displayName="PotentiallyDirty")}catch{}let DW={Box:"chart-link-module__Box--lPKlO",PotentiallyDirty:"chart-link-module__PotentiallyDirty--Guavb"},Dz=(0,K.memo)(function({to:e,isActive:t,children:a,isDirty:r,leadingVisual:n=null,trailingVisual:i=null,...l}){return(0,F.jsxs)(yd,{to:e,isActive:t,end:!0,...l,children:[n?(0,F.jsx)(ys.c.LeadingVisual,{children:n}):null,(0,F.jsxs)("div",{className:DW.Box,children:[a,!t&&r?(0,F.jsx)(D$,{isDirty:!0,hideDirtyState:!1,className:DW.PotentiallyDirty,...(0,ey.G)("my-chart-navigation-item-dirty")}):null]}),i?(0,F.jsx)(ys.c.TrailingVisual,{className:"pointer-events-auto",children:i}):null]})});try{Dz.displayName||(Dz.displayName="ChartLink")}catch{}let DH={Button:"index-module__Button--iKHSe",Box:"index-module__Box--sESXY",NavList:"index-module__NavList--SZn02"},DU={IconButton:"insights-chart-options-module__IconButton--PQQAy",ActionMenu_Overlay:"insights-chart-options-module__ActionMenu_Overlay--wcD3B",ActionList_Group:"insights-chart-options-module__ActionList_Group--vT5ij",ActionList_Item:"insights-chart-options-module__ActionList_Item--CPz3b",ActionList_Item_1:"insights-chart-options-module__ActionList_Item_1--RqEkT"},Dq=({chart:e})=>{let{isDirty:t,isConfigurationDirty:a}=RH(e),[,r]=cH(),n=mK(),[i,l]=(0,K.useState)(!1),s=(0,K.useRef)(null),{hasWritePermissions:o}=eK(),{saveChartName:d}=PY(e),{showDialog:u,InsightsUpsellDialog:c}=Dg(),m=(0,K.useCallback)(e=>{l(e),e||d()},[d]),{canCreateChart:p}=yV(),{destroyChartConfiguration:h,createChartConfiguration:f,updateChartConfiguration:g,resetLocalChangesForChartNumber:y}=R1(),x=c$(),b=(0,uX.S)(),{getChartLinkTo:v}=yV(),w=Rq(e),j=!w,C=(0,K.useCallback)(async t=>{t.preventDefault(),t.stopPropagation(),!w&&await b({title:"Delete chart?",content:`Are you sure you want to delete "${e.name}"?`,confirmButtonContent:"Delete",confirmButtonType:"danger"})&&(await h.perform(e.number),"succeeded"===h.status.current.status&&x(v(0).url))},[e.name,e.number,w,b,h,v,x]),I=(0,K.useCallback)(async t=>{t.preventDefault(),t.stopPropagation();let a=e.number;p()?(await f.perform({chart:{configuration:e.localVersion.configuration}}),"succeeded"===f.status.current.status&&x(ll.generatePath({...n,insightNumber:f.status.current.data.chart.number})),y(a)):u()},[p,e.localVersion.configuration,e.number,f,x,y,u,n]),S=(0,K.useCallback)(async t=>{t.preventDefault(),t.stopPropagation(),w||(await g.perform({chartNumber:e.number,chart:{configuration:{...e.localVersion.configuration}}}),r(RK(new URLSearchParams(window.location.search))))},[e.localVersion.configuration,e.number,w,r,g]),k=(0,K.useCallback)(async t=>{t.preventDefault(),t.stopPropagation(),y(e.number),r(RK(new URLSearchParams(window.location.search)))},[e.number,y,r]),{openPane:N}=R3();return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(D$,{isDirty:t,hideDirtyState:!o,...t?(0,ey.G)("chart-options-dirty"):void 0,children:(0,F.jsx)(fE.K,{...(0,ey.G)("chart-options-button"),ref:s,"aria-haspopup":"true","aria-expanded":i,icon:ly.TriangleDownIcon,onClick:(0,K.useCallback)(e=>{e.preventDefault(),l(e=>!e)},[]),"aria-label":"Chart options",className:DU.IconButton})}),(0,F.jsx)(yu.W,{open:i,onOpenChange:m,anchorRef:s,children:(0,F.jsx)(yu.W.Overlay,{width:"medium",className:DU.ActionMenu_Overlay,children:(0,F.jsxs)(fi.l,{children:[(0,F.jsxs)(fi.l.Item,{onSelect:N,...(0,ey.G)("chart-options-open-configure"),children:[(0,F.jsx)(fi.l.LeadingVisual,{children:(0,F.jsx)(D$,{isDirty:a,children:(0,F.jsx)(ly.PencilIcon,{})})}),"Configure"]}),(0,F.jsxs)(fi.l.Item,{onSelect:I,children:[(0,F.jsx)(fi.l.LeadingVisual,{children:(0,F.jsx)(ly.VersionsIcon,{})}),t?"Save changes to new chart":"Duplicate chart"]}),w?null:(0,F.jsxs)(fi.l.Item,{variant:"danger",onSelect:C,children:[(0,F.jsx)(fi.l.LeadingVisual,{children:(0,F.jsx)(ly.TrashIcon,{})}),"Delete chart"]}),t?(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(fi.l.Divider,{}),(0,F.jsxs)(fi.l.Group,{className:DU.ActionList_Group,children:[o&&j?(0,F.jsx)(fi.l.Item,{onSelect:S,...(0,ey.G)("view-options-menu-save-changes-button"),className:DU.ActionList_Item,children:nH.saveChanges}):null,(0,F.jsx)(fi.l.Item,{onSelect:k,...(0,ey.G)("chart-options-menu-reset-changes-button"),className:DU.ActionList_Item_1,children:nH.discardChanges})]})]}):null]})})}),(0,F.jsx)(c,{})]})};try{Dq.displayName||(Dq.displayName="InsightsChartOptions")}catch{}let DK=(0,K.memo)(function(){let{getCreateChartRequest:e,canCreateChart:t}=yV(),{createChartConfiguration:a}=R1(),r=c$(),{showDialog:n,InsightsUpsellDialog:i}=Dg(),l=mK();return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(i,{}),(0,F.jsx)(p4.Q,{...(0,ey.G)("add-chart-button"),onClick:(0,K.useCallback)(async()=>{let i=e();if(t()){if(await a.perform(i),"succeeded"===a.status.current.status){let e=a.status.current.data;r(ll.generatePath({...l,insightNumber:e.chart.number}))}}else n()},[e,t,a,r,n,l]),leadingVisual:ly.PlusIcon,className:DH.Button,children:n4.sideNavNewChartButton})]})});function DQ(e,t){return e.name.localeCompare(t.name)}let DJ=({chartConfiguration:e,isActiveChart:t})=>{let{hasWritePermissions:a}=eK();return(0,F.jsx)("div",{className:DH.Box,children:t&&a?(0,F.jsx)(Dq,{chart:e}):null})},DX=()=>{let{hasWritePermissions:e}=eK(),t=(0,J.g)(),{chartConfigurations:a,getChartLinkTo:r}=yV(),{postStats:n}=iN(),i=t.insightNumber?Number(t.insightNumber):0,{defaultCharts:l,myCharts:s}=(0,K.useMemo)(()=>{let[e,t]=t$(Object.values(a),Rq);return{defaultCharts:e.sort(DQ),myCharts:t.sort(DQ)}},[a]),o=(0,K.useCallback)((e,t)=>{n({name:"insights_chart_navigation",context:JSON.stringify({chartNumber:e,...t})})},[n]);return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsxs)(ys.c,{className:DH.NavList,...(0,ey.G)("insights-side-nav"),children:[(0,F.jsx)(ys.c.Group,{title:n4.sideNavDefaultCharts,children:l.map(e=>{let t=0===i,a=RH(e),n=De[e.localVersion.configuration.type].icon;return(0,K.createElement)(Dz,{...(0,ey.G)("default-chart-navigation-item"),key:e.number,isDirty:a.isDirty,to:r(e.number).url,isActive:t,leadingVisual:(0,F.jsx)(n,{}),trailingVisual:(0,F.jsx)(DJ,{chartConfiguration:e,isActiveChart:t}),onClick:a=>{t?a.preventDefault():o(e.number,e.localVersion.configuration)}},e.name)})}),(0,F.jsx)(ys.c.Group,{title:n4.sideNavCustomCharts,children:s.map(e=>{let t=i===e.number,a=RH(e),n=De[e.localVersion.configuration.type].icon;return(0,K.createElement)(Dz,{...(0,ey.G)("my-chart-navigation-item"),key:e.number,to:r(e.number).url,isActive:t,isDirty:a.isDirty,leadingVisual:(0,F.jsx)(n,{}),trailingVisual:(0,F.jsx)(DJ,{chartConfiguration:e,isActiveChart:t}),onClick:a=>{t?a.preventDefault():o(e.number,e.localVersion.configuration)}},e.name)})})]}),e&&(0,F.jsx)("div",{children:(0,F.jsx)(DK,{})})]})};try{DK.displayName||(DK.displayName="AddChartButton")}catch{}try{DJ.displayName||(DJ.displayName="ChartItemTrailingVisual")}catch{}try{DX.displayName||(DX.displayName="InsightsSideNav")}catch{}let DY=(0,K.memo)(function({children:e}){return(0,F.jsxs)(mU.M,{containerWidth:"full",sx:{height:"100%",padding:0,m:0,[`& > ${lx.A}`]:{minHeight:"100%"}},children:[(0,F.jsx)(mU.M.Pane,{position:"start",sx:{padding:[3,null,null,4],borderRight:"1px solid",borderColor:"border.subtle"},children:(0,F.jsx)(DX,{})}),(0,F.jsx)(mU.M.Content,{width:"large",sx:{padding:[3,null,null,4]},children:e})]})});try{DY.displayName||(DY.displayName="InsightsLayout")}catch{}function DZ(){return mL(),(0,F.jsx)(mF,{...(0,ey.G)("insights-page"),children:(0,F.jsx)(R5,{children:(0,F.jsx)(DY,{children:(0,F.jsx)(J.sv,{})})})})}try{DZ.displayName||(DZ.displayName="InsightsPage")}catch{}let D0={Box:"access-settings-view-module__Box--khdE9",Heading:"access-settings-view-module__Heading--MUNgn"};async function D1(e){let t=nP("memex-collaborators-api-data"),{data:a}=await ix(t.url,e);return a}async function D2(e){let t=nP("memex-remove-collaborators-api-data"),{data:a}=await ix(t.url,{method:"DELETE",body:e});return a}async function D5({role:e,collaborators:t}){let a=nP("memex-add-collaborators-api-data"),{data:r}=await ix(a.url,{method:"POST",body:{permission:eW.get(e),collaborators:t}});return r}async function D3(e){let{url:t}=nP("memex-get-organization-access-api-data"),{data:a}=await ix(t,e);return{role:a.role??a.permission}}async function D4({role:e}){let t=nP("memex-update-organization-access-api-data");await ix(t.url,{method:"PUT",body:{permission:eW.get(e)}})}function D6(e){let{projectOwner:t}=eU();return"user"===e.actor_type?e.login:`${t?`${t.login}/`:""}${e.slug}`}let D8=e=>`${e.actor_type}/${e.id}`,D7=(0,sp.V)({queryKey:["memex","organization-access"],fetcher:(e,{signal:t})=>D3({signal:t}),initialData:{role:eG.None}}),D9=()=>D7({select:(0,K.useMemo)(()=>e=>ez.get(e.role)??eO.None,[])}),Ee=()=>{let e=(0,U.jE)();return(0,K.useCallback)(()=>e.prefetchQuery(D7.getFetchOptions()),[e])},Et=()=>{let e=(0,U.jE)();return(0,sm.n)({mutationFn:D4,onMutate:({role:t})=>{e.setQueriesData({queryKey:D7.getKey()},{role:eW.get(t)??eG.None})},onSettled:()=>{e.invalidateQueries({queryKey:D7.getKey()})}})},Ea=(0,sp.V)({queryKey:["memex","all-collaborators"],fetcher:(e,{signal:t})=>D1({signal:t})});function Er(e){return new Set(e.collaborators.map(e=>D8(e)))}let En=()=>Ea({select:Er}),Ei=e=>new Map(e.collaborators.map(e=>[D8(e),e])),El=()=>Ea({select:Ei}),Es=()=>{let e=(0,U.jE)();return(0,K.useCallback)(()=>e.prefetchQuery(Ea.getFetchOptions()),[e])},Eo=(0,mg.W)({mutationFn:D2}),Ed=()=>{let e=(0,U.jE)();return Eo({onMutate:({collaborators:t})=>{e.setQueriesData({queryKey:Ea.getKey()},e=>e?{collaborators:e.collaborators.filter(e=>!t.includes(D8(e)))}:e)},onSettled:()=>{e.invalidateQueries({queryKey:Ea.getKey()})}})},Eu=(0,mg.W)({mutationFn:D5}),Ec=()=>{let e=(0,U.jE)();return Eu({onMutate:({collaborators:t,role:a})=>{e.setQueriesData({queryKey:Ea.getKey()},e=>{if(!e)return e;let r=new Set(t);return{collaborators:e.collaborators.map(e=>r.has(D8(e))?{...e,role:eW.get(a)??eG.None,isUpdated:!0}:e)}})},onSettled:()=>{e.invalidateQueries({queryKey:Ea.getKey()})}})};async function Em({query:e},t){let a=nP("memex-suggested-collaborators-api-data"),r=new URLSearchParams({q:e}),n=`${a.url}?${r}`,{data:i}=await ix(n,t);return i}let Ep=(0,sp.V)({queryKey:["memex","suggested-collaborators"],fetcher:(e,{signal:t})=>Em(e,{signal:t}),use:[e=>t=>e({...t,enabled:(t.variables?.query??"").trim().replace(/^@/,"").length>0})]}),Eh=e=>{let{data:t}=En(),a=(0,K.useCallback)(e=>e.suggestions.map(e=>{if("user"in e){let a="user";return{...e.user,isCollaborator:t?.has(D8({id:e.user.id,actor_type:a}))??!1,actor_type:a}}if("team"in e){let a="team";return{...e.team,isCollaborator:t?.has(D8({id:e.team.id,actor_type:a}))??!1,actor_type:a}}tA(e)}),[t]);return Ep({...e,select:a})},Ef={Octicon:"add-collaborators-module__Octicon--dRGZP",Octicon_1:"add-collaborators-module__Octicon_1--RwCRX",Box:"add-collaborators-module__Box--S3uzI",FormControl:"add-collaborators-module__FormControl--ioxhR",Box_1:"add-collaborators-module__Box_1--kaaJ8",Heading:"add-collaborators-module__Heading--YwjRT",Box_2:"add-collaborators-module__Box_2--d3CVI",Box_3:"add-collaborators-module__Box_3--L2WIz",Octicon_2:"add-collaborators-module__Octicon_2--DXQ4H",Box_4:"add-collaborators-module__Box_4--IPKFx",Box_5:"add-collaborators-module__Box_5--hAJ7B",GitHubAvatar:"add-collaborators-module__GitHubAvatar--jhXTF",Text:"add-collaborators-module__Text--JYysm",Text_1:"add-collaborators-module__Text_1--FscXM"},Eg={Box:"collaborator-pill-module__Box--TEGrV",GitHubAvatar:"collaborator-pill-module__GitHubAvatar--ykgE_",Text:"collaborator-pill-module__Text--kKdXt",Button:"collaborator-pill-module__Button--t0YxO"};function Ey({login:e,id:t,onRemove:a,avatarUrl:r}){return(0,F.jsxs)("div",{className:Eg.Box,...(0,ey.G)(`collaborator-pill-${e}`),children:[(0,F.jsx)(h3.r,{loading:"lazy",alt:e,src:r,className:Eg.GitHubAvatar}),(0,F.jsx)("span",{className:Eg.Text,children:e}),(0,F.jsxs)(p4.Q,{variant:"invisible",onClick:a,className:Eg.Button,children:[(0,F.jsx)(ly.XIcon,{}),(0,F.jsxs)("span",{className:"sr-only",children:["Remove collaborator ",e]})]})]},t)}try{Ey.displayName||(Ey.displayName="CollaboratorPill")}catch{}let Ex={Box:"collaborator-role-drop-down-module__Box--X8Mxf"},Eb=({displayName:e,selected:t,onClose:a,role:r,description:n,handleOnClick:i})=>{let l=(0,K.useCallback)(()=>{i(r)},[i,r]);return(0,F.jsxs)(fi.l.Item,{tabIndex:0,selected:t,onClick:l,onKeyDown:e=>{"Enter"===e.key&&(l(),a())},...(0,ey.G)(`collaborators-role-dropdown-item-${r}`),children:[e,(0,F.jsx)(fi.l.Description,{variant:"block",children:n})]})},Ev=[{value:eO.Admin,displayName:rr(eO.Admin.toString()),description:n2.collaboratorDropDownAdmin},{value:eO.Write,displayName:rr(eO.Write.toString()),description:n2.collaboratorDropDownWrite},{value:eO.Read,displayName:rr(eO.Read.toString()),description:n2.collaboratorDropDownRead}];function Ew({align:e="inside-right",roles:t=Ev,selectedRoles:a,isOrganizationRole:r=!1,handleOnClick:n,handleDropDownButtonClick:i}){let[l,s]=(0,K.useState)(!1),o=a.length>1?"Mixed":rr(a[0]??""),d=a.length>0?new Set(a.map(e=>rr(e))):new Set;return(0,F.jsx)("div",{className:Ex.Box,children:(0,F.jsxs)(yu.W,{open:l,onOpenChange:e=>s(e),...(0,ey.G)("collaborators-role-dropdown"),children:[(0,F.jsxs)(yu.W.Button,{onClick:i,...(0,ey.G)("collaborators-role-dropdown-button"),children:[r?null:(0,F.jsx)("span",{style:{fontWeight:400},children:"Role: "}),o]}),(0,F.jsx)(yu.W.Overlay,{anchorSide:e,children:(0,F.jsx)(fi.l,{selectionVariant:"single",children:t.map(e=>(0,F.jsx)(Eb,{role:e.value,description:e.description,displayName:e.displayName,onClose:()=>s(!1),selected:d.has(e.displayName),handleOnClick:e=>{n(e)}},e.value))})})]})})}try{Eb.displayName||(Eb.displayName="CollaboratorRoleDropDownItem")}catch{}try{Ew.displayName||(Ew.displayName="CollaboratorRoleDropDown")}catch{}let Ej=({collaboratorsAddedCount:e,setInvitationRequestState:t})=>{let a=lB(()=>t(x1.None),5e3);return(0,K.useEffect)(()=>{a()},[a]),(0,F.jsxs)("div",{...(0,ey.G)("success-message"),children:[(0,F.jsx)(lw.A,{icon:ly.CheckIcon,className:Ef.Octicon}),(0,F.jsxs)("span",{children:[" ",e," successfully added "]})]})},EC=()=>(0,F.jsxs)("div",{...(0,ey.G)("failure-message"),children:[(0,F.jsx)(lw.A,{icon:ly.StopIcon,className:Ef.Octicon_1}),(0,F.jsx)("span",{children:" Unable to add some users "})]}),EI="add-collaborators-suggestions-list",ES=[],Ek=[],EN=()=>{let e=(0,K.useRef)(null),t=(0,K.useRef)(null),a=(0,K.useRef)(null),{projectOwner:r}=eU(),[n,i]=(0,K.useState)(!1),[l,s]=(0,K.useState)(!1),[o,d]=(0,K.useState)(eO.Write),[u,c]=(0,K.useState)(ES),[m,p]=(0,K.useState)(x1.None),[h,f]=(0,K.useState)(""),[g,y]=(0,K.useState)(""),x=AT(g.startsWith("@")?g.trim().slice(1):g.trim()),{data:b=Ek}=Eh({variables:{query:x}});!function(e,t){let a=(0,nk.M)(e),r=(0,nk.M)(t);(0,K.useEffect)(()=>{let e=e=>{document.body.contains(e.target)&&(a.current.some(t=>t.current?.contains(e.target))||r.current())};return window.addEventListener("click",e,!0),()=>{window.removeEventListener("click",e,!0)}},[a,r])}([a,e],()=>s(!1));let v=(0,K.useCallback)(e=>{c(t=>{let a=t.filter(t=>D8(t)!==D8(e));return a.length===t.length?t:a})},[]),w=(0,K.useCallback)(e=>{let t=new Set(e);c(e=>{let a=[];for(let r of e)t.has(`${D8(r)}`)&&a.push(r);return a})},[c]),j=e=>{let t=b.find(t=>D8(t)===e);t&&c(e=>e.some(e=>D8(e)===D8(t))?e:[...e,t])},C=t=>{t.isCollaborator||(s(!1),y(""),j(D8(t)),e.current?.focus())},I=(0,K.useCallback)(({target:e})=>{y(e.value)},[]),S=(0,K.useCallback)(()=>{s(!0),i(!0)},[s,i]),k=(0,K.useCallback)(()=>{i(!1)},[i]),N=(0,K.useCallback)(e=>{if("Backspace"===e.key&&""===g&&u.length>0){let e=u[u.length-1];e&&v(e)}m!==x1.None&&(p(x1.None),f(""))},[m,g,u,v]),{addToast:T}=lV(),{mutate:_}=Ec(),A=(0,K.useCallback)(()=>{if(0!==u.length)return _({role:o,collaborators:u.map(e=>D8(e))},{onSuccess:({failed:e})=>{if(e.length>0)p(x1.Failed),w(e);else{y("");let e=u.length;f(`${e} ${1===e?"user":"users"}`),p(x1.Successful),c(ES)}},onError:e=>{T({type:nF.error,message:e&&"object"==typeof e&&"message"in e&&"string"==typeof e.message?e.message:"Failed to update collaborators"})}})},[T,u,o,_,w]);(0,pk.N)(()=>{s((x.startsWith("@")?x.substring(1,x.length):x).length>0)},[x]);let R=(0,K.useCallback)(e=>{v(e),m!==x1.None&&p(x1.None)},[p,m,v]),P=r&&"organization"===r.type?n2.addCollaboratorPlaceholderOrgProject:n2.addCollaboratorPlaceholderUserProject,D=b.length>0&&x.length>0&&l;return(0,F.jsx)("div",{className:Ef.Box,...(0,ey.G)("add-collaborators"),children:(0,F.jsxs)(hM.A,{className:Ef.FormControl,children:[(0,F.jsx)(hM.A.Label,{visuallyHidden:!0,children:"Add Collaborators"}),(0,F.jsxs)("div",{className:Ef.Box_1,children:[(0,F.jsx)(h_.A,{as:"h3",className:Ef.Heading,children:"Invite collaborators"}),(0,F.jsx)("div",{children:(0,F.jsxs)("div",{"aria-live":"polite",children:[m===x1.Successful&&(0,F.jsx)(Ej,{setInvitationRequestState:p,collaboratorsAddedCount:h}),m===x1.Failed&&(0,F.jsx)(EC,{})]})})]}),(0,F.jsxs)("div",{className:Ef.Box_2,children:[(0,F.jsxs)(lx.A,{ref:t,onClick:()=>e.current?.focus(),sx:{boxShadow:n?e=>`0 0 0 2px ${e.colors.accent.fg}`:void 0,borderColor:n?"accent.emphasis":"border.default"},className:Ef.Box_3,children:[(0,F.jsx)(lw.A,{icon:ly.PersonIcon,className:Ef.Octicon_2}),(0,F.jsxs)("div",{className:Ef.Box_4,children:[u.map(e=>{let t=D8(e);return(0,F.jsx)(Ey,{avatarUrl:e.avatarUrl,login:D6(e),id:t,onRemove:()=>R(e)},t)}),(0,F.jsx)(gx,{role:"combobox","aria-haspopup":"listbox","aria-expanded":D,"aria-autocomplete":"list","aria-controls":EI,"aria-label":P,style:{flex:1,width:"auto",display:"inline"},autoComplete:"off",value:g,ref:e,onChange:I,onFocus:S,onBlur:k,onKeyDown:N,placeholder:P,id:"add-collaborators-input",...(0,ey.G)("add-collaborators-input")}),D&&(0,F.jsx)(fm,{testId:EI,listRef:a,controllingElementRef:e,xOriginEdgeAlign:"left",style:{width:"400px"},items:b.map(e=>({renderItem:()=>(0,F.jsx)(ET,{suggestion:e}),key:e.id,value:D6(e),asHTML:!0,onSelect:()=>C(e),testId:`collaborator-suggestion-item-${D6(e)}`}))})]})]}),(0,F.jsx)("div",{className:Ef.Box_5,children:(0,F.jsx)(Ew,{selectedRoles:[o],handleOnClick:d})}),(0,F.jsx)(p4.Q,{variant:"primary",onClick:A,...(0,ey.G)("add-collaborators-invite-button"),children:"Invite"})]})]})})};function ET({suggestion:e}){let t=D6(e);return(0,F.jsxs)("span",{children:[(0,F.jsx)(h3.r,{loading:"lazy",alt:t,src:e.avatarUrl,className:Ef.GitHubAvatar}),(0,F.jsxs)(lv.A,{sx:{color:e.isCollaborator?"fg.muted":"fg.default"},children:[e.name," ",(0,F.jsx)("span",{className:Ef.Text,children:t})]}),e.isCollaborator&&(0,F.jsx)("span",{className:Ef.Text_1,children:"\xb7 Already a collaborator"})]})}try{Ej.displayName||(Ej.displayName="AddCollaboratorSuccess")}catch{}try{EC.displayName||(EC.displayName="AddCollaboratorError")}catch{}try{EN.displayName||(EN.displayName="AddCollaborators")}catch{}try{ET.displayName||(ET.displayName="CollabSuggestionItem")}catch{}let E_=(0,K.createContext)(null),EA=()=>{let e=(0,K.useContext)(E_);if(!e)throw Error("useCollaboratorsFilter must be used inside the Provider");return e},ER={Role:"role",Type:"type"},EP=({children:e})=>{let t=(0,K.useMemo)(()=>/(admin|read|write)/gi,[]),a=(0,K.useMemo)(()=>/(user|team)/gi,[]),r=(0,K.useCallback)((e,t)=>{let a=RegExp(`\\b${t}:\\b\\S+`,"gi");return e.replace(a,"").replace(/\s\s+/g," ").trim()},[]),[n,i]=(0,K.useState)(""),[l,s]=(0,K.useState)(()=>[]),[o,d]=(0,K.useState)(eO.None),[u,c]=(0,K.useState)(eV.None),m=e=>{d(eO.None),c(eV.None),s(e.split(" ")),i(e)},p=(0,K.useCallback)(e=>{let r=nr(e);if(r.fieldFilters.length){let n=r.fieldFilters.filter(e=>e[0]===ER.Role),i=r.fieldFilters.filter(e=>e[0]===ER.Type),l=!n||1!==n.length,s=!i||1!==i.length;if(l&&s){m(e);return}{let r=!0;if(!l){let e=n[0]?.[1]??"";1===e.length&&e[0]?.match(t)&&(d(e[0]),r=!1)}if(!s){let e=i[0]?.[1];e?.length===1&&e[0]?.match(a)&&(c(e[0]),r=!1)}if(r){m(e);return}}}else d(eO.None),c(eV.None);s(r.searchTokens),i(e)},[t,a]),h=(0,K.useCallback)((e,i)=>{let l=i===ER.Role?n.match(t):n.match(a);if((e=e.toLocaleLowerCase())===eO.None||e===eV.None&&i===ER.Type){p(`${r(n,i)}`);return}if(l&&1===l.length){p(n.replace(l[0],`${e}`));return}let s=n.trimEnd();l&&l.length>1&&(s=`${r(n,i)}`),p(`${s}${s.length?" ":""}${i}:${e}`)},[n,t,a,p,r]),f=(0,K.useCallback)(e=>{d(e),h(e.toLowerCase(),ER.Role)},[d,h]),g=(0,K.useCallback)(e=>{c(e),h(e.toLowerCase(),ER.Type)},[h,c]),y=(0,K.useCallback)(e=>{let t=D6(e);if(0===l.length&&o===eO.None&&u===eV.None)return!0;let a=o&&o!==eO.None&&e.role!==eW.get(o.toLowerCase()),r=!!(u&&u!==eV.None&&u!==e.actor_type);return!a&&!r&&(!(l.length>0)||!!t&&r$(l,t.toLowerCase())||!!e.name&&r$(l,e.name.toLowerCase()))},[o,l,u]),x=(0,K.useMemo)(()=>({query:n,setQuery:p,roleFilter:o,typeFilter:u,setTypeFilter:g,setRoleFilter:f,match:y}),[n,p,o,f,u,g,y]);return(0,F.jsx)(E_.Provider,{value:x,children:e})};try{EP.displayName||(EP.displayName="CollaboratorsFilterProvider")}catch{}let ED={Box:"collaborators-list-item-module__Box--TLDVI",Box_1:"collaborators-list-item-module__Box_1--t5CiG",Box_2:"collaborators-list-item-module__Box_2--mVC14",Link:"collaborators-list-item-module__Link--OnxQL",Text:"collaborators-list-item-module__Text--lqa1s",Button:"collaborators-list-item-module__Button--NhgGh"};function EE(e,t){return"user"===e.actor_type?`/users/${e.login}/hovercard`:"team"===e.actor_type&&t?.type==="organization"?`/orgs/${t.login}/teams/${e.slug}/hovercard`:void 0}let EM={padding:3,marginTop:"-1px",borderTopColor:"border.default",borderTopStyle:"solid",borderTopWidth:1,borderRadius:"0 0 6px 6px"},EB={padding:3,listStyleType:"none",marginTop:"-1px",borderTopColor:"border.muted",borderTopStyle:"solid",borderTopWidth:1},EL=({collaborator:e,isLastItem:t,isSelected:a,onCheckboxChange:r,onDropDownClick:n,onRemoveButtonClick:i})=>{let{projectOwner:l}=eU(),s=ez.get(e.role)??eO.None,o=e.isUpdated?EF:lx.A,d="team"===e.actor_type?function(e){let t=e.membersCount,a=1===t?`${t} member`:`${t} members`;return`@${e.slug} \u{2022} ${a}`}(e):D6(e);return(0,F.jsx)(o,{sx:t?EM:EB,...(0,ey.G)(`collaborators-row-${d}`),children:(0,F.jsxs)("div",{className:ED.Box,children:[(0,F.jsx)("div",{className:ED.Box_1,children:(0,F.jsx)("input",{type:"checkbox","aria-label":a?nY.unselectCollaborator(d):nY.selectCollaborator(d),checked:a,name:D8(e),onChange:r,...(0,ey.G)(`collaborators-checkbox-${d}`)})}),(0,F.jsxs)("div",{className:ED.Box,children:[(0,F.jsx)(h3.r,{loading:"lazy",alt:d,src:e.avatarUrl,size:32,"data-hovercard-type":e.actor_type,"data-hovercard-url":EE(e,l),className:ED.Box_1}),(0,F.jsxs)("div",{className:ED.Box_2,children:[(0,F.jsx)(pw.A,{"data-hovercard-type":e.actor_type,"data-hovercard-url":EE(e,l),href:function(e,t){let a="";return"user"===e.actor_type&&(a=`/${e.login}`),"team"===e.actor_type&&(a=t?`/orgs/${t.login}/teams/${e.slug}`:""),a}(e,l),className:ED.Link,...(0,ey.G)("collaborator-link"),children:e.name||d}),e.name&&(0,F.jsx)("span",{className:ED.Text,...(0,ey.G)("collaborator-login"),children:d})]})]}),(0,F.jsx)(Ew,{selectedRoles:[s],handleOnClick:t=>n(t,new Set([D8(e)]))}),(0,F.jsx)(p4.Q,{variant:"invisible",onClick:()=>i(new Set([D8(e)])),...(0,ey.G)(`remove-collaborator-${d}`),"aria-label":nH.removeTitle,className:ED.Button,children:nH.removeTitle})]})},e.id)},EF=(0,Z.Ay)(lx.A).withConfig({displayName:"collaborators-list-item__FadedRow",componentId:"sc-1011f9e5-0"})(["animation:fadeOut 2s ease-out;@keyframes fadeOut{from{background:",";}to{background:",";}}"],(0,q.Jt)("colors.neutral.subtle"),(0,q.Jt)("colors.canvas.default")),EO=(0,K.memo)(EL);try{EL.displayName||(EL.displayName="CollaboratorsListItemComponent")}catch{}try{EF.displayName||(EF.displayName="FadedRow")}catch{}try{EO.displayName||(EO.displayName="CollaboratorsListItem")}catch{}let EG={Heading:"collaborators-table-module__Heading--fu3m_",Box:"collaborators-table-module__Box--jhdjH",Box_1:"collaborators-table-module__Box_1--eDpoe",Box_2:"collaborators-table-module__Box_2--SKg8B",Box_3:"collaborators-table-module__Box_3--PBCfH"},EV={boxHeaderStyles:"collaborators-table-header-module__boxHeaderStyles--lVXRg",Box_1:"collaborators-table-header-module__Box_1--odond",Box_2:"collaborators-table-header-module__Box_2--mj9Uu",FormControl_Label:"collaborators-table-header-module__FormControl_Label--c6ibL",Box_3:"collaborators-table-header-module__Box_3--G1nnC",Box_4:"collaborators-table-header-module__Box_4--uipPJ",Button:"collaborators-table-header-module__Button--vlFam",Box_5:"collaborators-table-header-module__Box_5--hvaWV",Octicon:"collaborators-table-header-module__Octicon--bHlLn",Box_6:"collaborators-table-header-module__Box_6--LqWaZ",TextInput:"collaborators-table-header-module__TextInput--UGU6k",Text:"collaborators-table-header-module__Text--Cf2gk",ActionMenu_Button:"collaborators-table-header-module__ActionMenu_Button--UmIKq"},E$=["Read","Write","Admin"],EW=["User","Team"],Ez=new Map([[eG.Reader,"Read"],[eG.Writer,"Write"],[eG.Admin,"Admin"]]),EH=new Map,EU=(0,K.memo)(function({userCount:e,teamCount:t,showError:a,selectedCollaboratorIds:r,onCheckBoxChange:n,onDropDownItemClick:i,onRemoveButtonClick:l,onDropDownButtonClick:s}){var o;let{data:d=EH}=El(),u=new Set;for(let e of r){if(u.size===E$.length)break;let t=d.get(e);if(t){let e=Ez.get(t.role);e&&u.add(e)}else r.delete(e)}let c=(0,K.useRef)(null),{typeFilter:m}=EA(),p=(o={userCount:e,teamCount:t},({[eV.User]:o.userCount,[eV.Team]:o.teamCount,[eV.None]:o.userCount+o.teamCount})[m]);(0,pk.N)(()=>{c.current&&(c.current.indeterminate=0!==r.size&&r.size<p)},[r,p]);let h="";h=1!==e?`${e} members`:`${e} member`,t&&(0===e&&(h=""),h+=(e?", ":"")+(t>1?`${t} teams`:`${t} team`));let f=r.size;return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsxs)("div",{className:EV.boxHeaderStyles,children:[(0,F.jsx)("div",{className:EV.Box_1,children:(0,F.jsx)("div",{className:EV.Box_2,children:(0,F.jsxs)(hM.A,{id:"collaborators-checkbox-bulk",children:[(0,F.jsx)(pC.A,{name:"collaborators-checkbox-bulk",ref:c,onChange:n,checked:f>0&&f===p,...(0,ey.G)("collaborators-checkbox-bulk")}),(0,F.jsxs)(hM.A.Label,{className:EV.FormControl_Label,children:[(0,F.jsx)("span",{className:"sr-only",children:"Select all collaborators. "}),(0,F.jsx)("span",{...(0,ey.G)("collaborators-table-counter"),children:f>0?`${f} selected`:h})]})]})})}),(0,F.jsxs)("div",{className:EV.Box_3,children:[(0,F.jsx)("div",{"aria-live":"polite",children:f>1&&a&&(0,F.jsx)(Eq,{})}),(0,F.jsx)("div",{...(0,ey.G)("collaborators-header-dropdown"),children:f>1?(0,F.jsx)(EK,{selectedRoles:Array.from(u),collaboratorIds:r,onDropDownItemClick:i,onDropDownButtonClick:s}):(0,F.jsxs)("div",{className:EV.Box_4,children:[(0,F.jsx)(EJ,{}),(0,F.jsx)(EX,{})]})}),f>1&&(0,F.jsx)(p4.Q,{onClick:()=>l(r),className:EV.Button,...(0,ey.G)("collaborators-remove-bulk"),children:nH.removeTitle})]})]}),(0,F.jsx)("div",{className:EV.Box_5,children:(0,F.jsx)(EQ,{})})]})});function Eq(){return(0,F.jsxs)("div",{...(0,ey.G)("failure-message"),className:EV.Box_2,children:[(0,F.jsx)(lw.A,{icon:ly.StopIcon,className:EV.Octicon}),(0,F.jsx)("span",{children:"Something went wrong"})]})}function EK(e){return(0,F.jsx)(Ew,{selectedRoles:e.selectedRoles,handleOnClick:t=>e.onDropDownItemClick(t,e.collaboratorIds),handleDropDownButtonClick:e.onDropDownButtonClick,...(0,ey.G)("collaborators-header-role-picker")})}let EQ=()=>{let{query:e,setQuery:t}=EA(),{projectOwner:a}=eU(),[r,n]=(0,xX.N)(e),i=(0,K.useRef)(void 0);return(0,F.jsx)("div",{className:EV.Box_6,...(0,ey.G)("filter-collaborators"),children:(0,F.jsx)(gp.A,{placeholder:a&&"organization"===a.type?n2.collaboratorFilterPlaceholderOrgProject:n2.collaboratorFilterPlaceholderUserProject,value:r,contrast:!0,onChange:e=>{let a=e.target.value;n(a),i.current&&i.current.cancel(),i.current=(0,nN.A)(()=>t(a),200),i.current()},...(0,ey.G)("filter-collaborators-input"),className:EV.TextInput})})},EJ=()=>{let{typeFilter:e,setTypeFilter:t}=EA(),[a,r]=(0,K.useState)(!1),n=(0,K.useCallback)(e=>{t(e)},[t]),i=(0,K.useCallback)((e,t)=>{n(t?eV.None:e)},[n]);return(0,F.jsxs)(yu.W,{open:a,onOpenChange:e=>r(e),children:[(0,F.jsx)(yu.W.Button,{...(0,ey.G)("collaborators-header-type-filter-button"),children:(0,F.jsx)("span",{className:EV.Text,children:"Type"})}),(0,F.jsx)(yu.W.Overlay,{children:(0,F.jsx)(fi.l,{selectionVariant:"single",...(0,ey.G)("collaborators-header-type-filter-menu"),children:EW.map(t=>(0,F.jsx)(EY,{onClickHandler:i,onClose:()=>r(!1),value:t,filter:e},t))})})]})},EX=()=>{let{roleFilter:e,setRoleFilter:t}=EA(),[a,r]=(0,K.useState)(!1),n=(0,K.useCallback)(e=>{t(e)},[t]),i=(0,K.useCallback)((e,t)=>{n(t?eO.None:e)},[n]);return(0,F.jsxs)(yu.W,{open:a,onOpenChange:e=>r(e),children:[(0,F.jsx)(yu.W.Button,{...(0,ey.G)("collaborators-header-role-filter-button"),className:EV.ActionMenu_Button,children:(0,F.jsx)("span",{className:EV.Text,children:"Role"})}),(0,F.jsx)(yu.W.Overlay,{children:(0,F.jsx)(fi.l,{selectionVariant:"single",...(0,ey.G)("collaborators-header-role-filter-menu"),children:E$.map(t=>(0,F.jsx)(EY,{onClickHandler:i,onClose:()=>r(!1),value:t,filter:e},t))})})]})},EY=({filter:e,value:t,onClickHandler:a,onClose:r})=>{let n=(0,K.useMemo)(()=>t.toLowerCase()===e?.toLowerCase(),[t,e]),i=(0,K.useCallback)(()=>{a(t,n)},[a,t,n]);return(0,F.jsx)(fi.l.Item,{tabIndex:0,onClick:i,onKeyDown:e=>{"Enter"===e.key&&(i(),r())},selected:n,...(0,ey.G)(`filter-${t.toLowerCase()}`),children:t},t)};try{EU.displayName||(EU.displayName="CollaboratorsTableHeader")}catch{}try{EU.displayName||(EU.displayName="CollaboratorsTableHeader")}catch{}try{Eq.displayName||(Eq.displayName="ErrorMessage")}catch{}try{EK.displayName||(EK.displayName="RoleBulkSetDropdown")}catch{}try{EQ.displayName||(EQ.displayName="CollaboratorsFilterInput")}catch{}try{EJ.displayName||(EJ.displayName="CollaboratorsFilterTypeDropdown")}catch{}try{EX.displayName||(EX.displayName="CollaboratorsFilterRoleDropdown")}catch{}try{EY.displayName||(EY.displayName="FilterDropdownItem")}catch{}let EZ=({allCollaboratorActorIdentifiers:e})=>{let[t,a]=(0,K.useState)(()=>new Set),r=new Set(t);for(let a of t)e.has(a)||r.delete(a);return r.size!==t.size&&a(r),[t,a]},E0={[eG.Admin]:3,[eG.Writer]:2,[eG.Reader]:1,[eG.None]:0},E1={collaborators:[]},E2=()=>{let{data:e=E1,isLoading:t,isError:a}=Ea(),r=(0,K.useMemo)(()=>new Set(e.collaborators.map(D8)),[e]),{mutateAsync:n}=Ed(),{mutateAsync:i}=Ec(),l=(0,uX.S)(),[s,o]=(0,K.useState)(x1.None),{query:d,match:u}=EA(),c=(0,K.useRef)(!0),m=(0,K.useMemo)(()=>e.collaborators.filter(u),[u,e]),[p,h]=EZ({allCollaboratorActorIdentifiers:r}),f=(0,K.useCallback)(async(e,t)=>{let{actorIds:a,role:r}=e,{loggedInUser:n}=eU(),i=`user/${n?.id}`,s=!1;if(n?.id&&(s=a.has(i)),s){if(await l({title:"Remove yourself as admin?",content:"Are you sure you want to remove yourself as Admin? You will lose access to Settings",confirmButtonContent:"Remove",confirmButtonType:"danger"})){let{failed:e}=await t({collaborators:Array.from(a),role:r});if(e.length>0&&a.size>1&&e.includes(i))o(x1.Failed);else{let e=window.location.pathname.substring(0,window.location.pathname.indexOf("/settings"));window.location.assign(e)}}}else{let{failed:e}=await t({role:r,collaborators:Array.from(a)});e.length>0&&a.size>1&&o(x1.Failed)}},[l]),g=async e=>{o(x1.None),await f({actorIds:e},e=>n(e,{onError:e=>{y({type:nF.error,message:e&&"object"==typeof e&&"message"in e&&"string"==typeof e.message?e.message:"Failed to remove collaborators"})}}))},{addToast:y}=lV(),x=async(e,t)=>{o(x1.None),await f({role:e,actorIds:t},async({collaborators:e,role:t})=>{if(!t)throw Error("you must specify a Role to assign to the selected collaborators");return i({collaborators:e,role:t},{onError:e=>{y({type:nF.error,message:e&&"object"==typeof e&&"message"in e&&"string"==typeof e.message?e.message:"Failed to update collaborators"})}})})},b=(0,K.useCallback)(({target:{name:e,checked:t}})=>{h(a=>{let n=new Set(a);return t&&void 0!==r.has(e)?n.add(e):n.delete(e),n})},[r,h]),v=(0,K.useCallback)(e=>{e.target.checked?h(new Set(m.map(D8))):h(new Set)},[m,h]),[{length:w},{length:j}]=(0,K.useMemo)(()=>t$(e.collaborators,e=>"user"===e.actor_type),[e.collaborators]),C=m.slice().sort((e,t)=>{let a=E0[t.role]-E0[e.role];if(0!==a)return a;let r=D6(e),n=D6(t);return r.localeCompare(n)}).map((e,t)=>(0,F.jsx)(EO,{collaborator:e,isLastItem:t===m.length-1,isSelected:p.has(D8(e)),onCheckboxChange:b,onDropDownClick:x,onRemoveButtonClick:g},`collaborator-row-${e.id}-${e.role}`)),I=(0,nN.A)(e=>{(0,Il.i)(e,{assertive:!0})},100);return(0,K.useEffect)(()=>{if(c.current){c.current=!1;return}if(!t){if(a){I(io.error);return}if(0===e.collaborators.length&&0===d.length){I(io.noCollaborators);return}0===C.length?I(io.filtering):I(io.collaboratorsFound(C.length))}},[d]),(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(h_.A,{as:"h3",className:EG.Heading,children:"Manage access"}),(0,F.jsxs)("div",{...(0,ey.G)("collaborators-table"),"data-team-hovercards-enabled":!0,className:EG.Box,children:[(0,F.jsx)(EU,{userCount:w,teamCount:j,selectedCollaboratorIds:p,showError:s===x1.Failed,onCheckBoxChange:v,onDropDownItemClick:x,onRemoveButtonClick:g,onDropDownButtonClick:()=>{o(x1.None)}}),t?(0,F.jsx)("div",{className:EG.Box_1,children:(0,F.jsxs)("div",{className:EG.Box_2,children:[(0,F.jsx)("div",{className:EG.Box_3,children:(0,F.jsx)(pj.A,{size:"medium"})}),(0,F.jsx)("span",{children:"Loading collaborators..."})]})}):a?(0,F.jsx)(E4,{type:E5.Error}):0===C.length?d.length>0?(0,F.jsx)(E4,{type:E5.Filtering}):(0,F.jsx)(E4,{type:E5.NoCollaborators}):C]})]})},E5={Error:"error",NoCollaborators:"no-collaborators",Filtering:"filtering"},E3=new Map([[E5.Error,{title:io.error,message:"Please try again later."}],[E5.NoCollaborators,{title:io.noCollaborators,message:"Add a collaborator to see them here."}],[E5.Filtering,{title:io.filtering,message:"Try to change or remove some filters to see results."}]]);function E4({type:e}){let t=E3.get(e);if(!t)throw Error("invalid blankslate type");return(0,F.jsxs)("div",{className:"blankslate",...(0,ey.G)(`collaborators-table-blankslate-${e}`),children:[(0,F.jsx)("h3",{...(0,ey.G)("collaborators-table-empty-title"),children:t.title}),(0,F.jsx)("p",{...(0,ey.G)("collaborators-table-empty-message"),children:t.message})]})}let E6=(0,K.memo)(E2);try{E2.displayName||(E2.displayName="CollaboratorsTableComponent")}catch{}try{E4.displayName||(E4.displayName="BlankSlateMessage")}catch{}try{E6.displayName||(E6.displayName="CollaboratorsTable")}catch{}let E8={Box:"privacy-settings-module__Box--ZLzNS",Box_1:"privacy-settings-module__Box_1--egyEx",Box_2:"privacy-settings-module__Box_2--mmiAo",Box_3:"privacy-settings-module__Box_3--PBg61",Heading:"privacy-settings-module__Heading--rXLml",Octicon:"privacy-settings-module__Octicon--gVgMD",Box_4:"privacy-settings-module__Box_4--sLgts",Link:"privacy-settings-module__Link--jpaNr",Link_1:"privacy-settings-module__Link_1--VPKbY",Box_5:"privacy-settings-module__Box_5--Eh6ro",Octicon_1:"privacy-settings-module__Octicon_1--iQ41E",Octicon_2:"privacy-settings-module__Octicon_2--tIdMC"},E7=()=>{let{isPublicProject:e}=y7(),{projectOwner:t,isOrganization:a}=eU(),r=t?.name?.toLowerCase(),{data:n=eO.None,error:i,refetch:l,status:s}=D9(),{mutate:o,status:d}=Et(),u=(0,K.useRef)(null);(0,K.useEffect)(()=>{u.current?.focus()},[]);let c=mK();return(0,F.jsxs)("div",{className:E8.Box,...(0,ey.G)("privacy-settings"),children:[(0,F.jsxs)(lx.A,{sx:{mr:a?2:0},className:E8.Box_1,...(0,ey.G)("privacy-settings-manage-visibility"),children:[(0,F.jsxs)("div",{className:E8.Box_2,children:[(0,F.jsxs)("div",{className:E8.Box_3,children:[(0,F.jsx)(h_.A,{as:"h2",className:E8.Heading,children:e?"Public project":"Private project"}),(0,F.jsx)(lw.A,{icon:e?ly.GlobeIcon:ly.LockIcon,className:E8.Octicon})]}),(0,F.jsx)("span",{className:E8.Octicon,children:e?"This project is public and visible to anyone.":"Only those with access to this project can view it."})]}),(0,F.jsx)("div",{children:(0,F.jsx)(p4.Q,{ref:u,as:cW,to:la.generatePath(c),...(0,ey.G)("privacy-settings-manage-access-link"),children:"Manage"})})]}),a&&(0,F.jsxs)("div",{className:E8.Box_1,...(0,ey.G)("privacy-settings-organization-access"),children:[(0,F.jsxs)("div",{className:E8.Box_2,children:[(0,F.jsxs)("div",{className:E8.Box_3,children:[(0,F.jsx)(h_.A,{as:"h2",className:E8.Heading,children:"Base role"}),(0,F.jsx)(lw.A,{icon:ly.OrganizationIcon,className:E8.Octicon})]}),(0,F.jsx)(E9,{owner:r,organizationAccessRole:n})]}),(0,F.jsxs)("div",{className:E8.Box_4,children:[i?(0,F.jsx)(p4.Q,{disabled:!0,trailingVisual:ly.TriangleDownIcon,...(0,ey.G)("collaborators-role-dropdown-button"),children:rr(n)}):(0,F.jsx)(Mt,{organizationAccessRole:n,updateOrganizationAccessRole:o}),(0,F.jsx)("div",{"aria-live":"polite",...(0,ey.G)("org-access-update-status"),children:(0,F.jsx)(Me,{orgAccessRoleRequestStatus:s,orgAccessRequestUpdateState:d,refetchOrganizationAccessRole:l})})]})]})]})};function E9({owner:e,organizationAccessRole:t}){if(t===eO.Admin)return(0,F.jsx)("span",{className:E8.Octicon,children:n2.privacySettingsAdmin});let a=eA("github-url"),r=`${a}/orgs/${e}/people?query=role%3Aowner`,n="privacy-settings-org-owners-link";return t===eO.Write?(0,F.jsxs)("span",{className:E8.Octicon,children:["Everyone in the organization can see and edit this project.",(0,F.jsx)(pw.A,{inline:!0,rel:"noopener noreferrer",target:"_blank",href:r,underline:!0,className:E8.Link,...(0,ey.G)(n),children:"Owners"}),"are admins of this project."]}):t===eO.Read?(0,F.jsxs)("span",{className:E8.Octicon,children:["Everyone in the organization can see this project.",(0,F.jsx)(pw.A,{inline:!0,rel:"noopener noreferrer",target:"_blank",href:r,underline:!0,className:E8.Link,...(0,ey.G)(n),children:"Owners"}),"are admins of this project."]}):(0,F.jsxs)("span",{className:E8.Octicon,children:["Only those with direct access and"," ",(0,F.jsx)(pw.A,{inline:!0,rel:"noopener noreferrer",target:"_blank",href:r,className:E8.Link_1,...(0,ey.G)(n),children:"owners"}),"can see this project. Owners are also admins of this project."]})}function Me({orgAccessRoleRequestStatus:e,orgAccessRequestUpdateState:t,refetchOrganizationAccessRole:a}){return"error"===t||"error"===e?(0,F.jsxs)("div",{...(0,ey.G)("initial-org-access-request-failure-message"),className:E8.Box_5,children:[(0,F.jsx)(lw.A,{icon:ly.StopIcon,className:E8.Octicon_1}),(0,F.jsx)("span",{children:"Something went wrong."})," ",(0,F.jsx)(pw.A,{as:"button",onClick:()=>a(),children:"Try again"})]}):"success"===t?(0,F.jsxs)("div",{...(0,ey.G)("org-access-request-success-message"),className:E8.Box_5,children:[(0,F.jsx)(lw.A,{icon:ly.CheckIcon,className:E8.Octicon_2}),(0,F.jsx)("span",{children:"Changes saved"})]}):null}function Mt({organizationAccessRole:e,updateOrganizationAccessRole:t}){return(0,F.jsx)(Ew,{align:"inside-left",roles:[...Ev,{value:eO.None,displayName:rr(eO.None.toString()),description:n2.collaboratorDropDownNone}],isOrganizationRole:!0,selectedRoles:[e],handleOnClick:a=>{a!==e&&t({role:a})}})}try{E7.displayName||(E7.displayName="PrivacySettings")}catch{}try{E9.displayName||(E9.displayName="SelectedRoleText")}catch{}try{Me.displayName||(Me.displayName="Status")}catch{}try{Mt.displayName||(Mt.displayName="OrgAccessDropdown")}catch{}let Ma=()=>{let{hasAdminPermissions:e}=eK();return e?(0,F.jsxs)("div",{className:D0.Box,...(0,ey.G)("access-settings"),children:[(0,F.jsx)(h_.A,{as:"h2",className:D0.Heading,children:"Who has access"}),(0,F.jsx)(E7,{}),(0,F.jsx)(EN,{}),(0,F.jsx)(EP,{children:(0,F.jsx)(E6,{})})]}):(0,F.jsx)(i6,{})};try{Ma.displayName||(Ma.displayName="AccessSettingsView")}catch{}let Mr=[],Mn=({ui:e,column:t,onChangeCallback:a})=>{let[r,n]=(0,xX.N)(()=>t?.settings.options??Mr),[i,l]=(0,xX.N)(()=>t?.settings.options??Mr),s=(0,K.useCallback)(()=>{n(i)},[i,n]),o=(0,K.useCallback)(()=>{l(r)},[r,l]),{postStats:d}=iN(),u=(0,K.useCallback)((a,r)=>{d({name:a,ui:e,context:r,memexProjectColumnId:t?.id})},[t?.id,d,e]),c=(0,K.useCallback)(({dragMetadata:e,dropMetadata:t,isBefore:r})=>{e.id!==t?.id&&(n(a=>{let n=a.find(({id:t})=>t===e.id);return a.reduce((e,a)=>(a.id===n.id||(a.id!==t?.id?e.push(a):r?e.push(n,a):r||e.push(a,n)),e),[])}),a?.(),u("settings_field_order"))},[n,a,u]),m=function(e={}){let t=(0,K.useRef)(e.start??0);return(0,K.useCallback)(()=>{let e=t.current;return t.current+=1,e},[])}({start:1}),p=(0,K.useCallback)(e=>{let t=rs(m(),e,r),i=[...r,t];n(i),u("settings_field_add",`${nH.newOptionsCount}: ${i.length}`),a?.()},[r,m,n,u,a]),h=(0,K.useCallback)(e=>{n(t=>t.map(t=>t.id===e.id?e:t)),a?.()},[n,a]),f=r.length>1,g=(0,K.useCallback)(e=>{if(f){let t=r.filter(t=>t.id!==e);n(t),a?.(),u("settings_field_delete",`${nH.newOptionsCount}: ${t.length}`)}},[f,r,n,a,u]);return{options:r,persistedOptions:i,commitMutations:o,revertMutations:s,onDrop:c,canRemoveOption:f,addOption:p,updateOption:h,removeOption:g}},Mi=(e,t)=>{let a=new Set(t.map(e=>e.id));return new Set("options"in e.settings?e.settings.options.filter(e=>!a.has(e.id)).map(e=>e.id):void 0)};function Ml(e,t){let a=new Set,r=new Set([...t.iterations?.map(e=>e.id)||[],...t.completedIterations?.map(e=>e.id)||[]]);if("configuration"in e.settings){for(let t of e.settings.configuration.iterations)r.has(t.id)||a.add(t.id);for(let t of e.settings.configuration.completedIterations)r.has(t.id)||a.add(t.id)}return a}let Ms=(e,t)=>{let{postStats:a}=iN(),{updateOptions:r}=Cx(),{perform:n,status:i}=uN({request:(0,K.useCallback)(async()=>{await r(e,t),a({name:tn,ui:ti,memexProjectColumnId:e.id})},[e,t,a,r]),showErrorToast:!1});return{updateColumnOptions:n,updateColumnOptionsStatus:i}},Mo={Flash:"use-confirm-delete-field-values-module__Flash--x98vW"},Md=()=>{let e=(0,uX.S)();return(0,K.useCallback)(async t=>0!==t.values.length&&e({title:nY.deleteValuesTitle(t.field.dataType,t.values.length),content:(0,F.jsx)(Mc,{...t}),confirmButtonContent:"Delete",confirmButtonType:"danger"}),[e])},Mu=({children:e})=>(0,F.jsxs)(mq.A,{variant:"danger",as:"p",className:Mo.Flash,children:[(0,F.jsx)("span",{className:"sr-only",children:"Warning: "}),e]}),Mc=({field:e,values:t,affectedItems:a,affectedWorkflows:r})=>{let{memex_table_without_limits:n}=iz(),{intro:i,itemsWarning:l,workflowsWarning:s}=function(e,t,a,r,n){let i=r>0?n0.deleteValuesAffectedWorkflowsWarning(e.dataType,t,r):null;return e.dataType===eN.Iteration?{intro:nY.deleteIterationValuesIntro(e.name,t),workflowsWarning:i,itemsWarning:a>0?nY.deleteIterationValuesAffectedItemsWarning(t,a):n?nY.deleteIterationValuesUnknownAffectedItemsWarning(t):null}:{intro:nY.deleteValuesIntro(e.dataType,e.name,t),workflowsWarning:i,itemsWarning:a>0?nY.deleteValuesAffectedItemsWarning(e.dataType,t,a):n?nY.deleteValuesUnknownAffectedItemsWarning(e.dataType,t):null}}(e,t.length,a,r,n);return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsxs)("p",{children:[i," ",(0,F.jsx)("strong",{children:nY.cannotBeUndone})]}),l&&(0,F.jsx)(Mu,{children:l}),s&&(0,F.jsx)(Mu,{children:s})]})};try{Mu.displayName||(Mu.displayName="Warning")}catch{}try{Mc.displayName||(Mc.displayName="Content")}catch{}let Mm=({externalColumn:e})=>{let{memex_table_without_limits:t}=iz(),{postStats:a}=iN(),{items:r}=ug(),n=r.map(e=>e.columns),[i,l]=(0,K.useState)(e),{findLoadedFieldIds:s}=ss(),o=lB(()=>{p(x1.None),d.current=void 0},3e3),d=(0,K.useRef)(void 0);if(void 0===i)throw Error("Column is undefined");let u=t||s().includes(i.id),{loadColumnsWithItemColumnValues:c}=_2();(0,K.useEffect)(()=>{u||c([i.id])},[u,i.id,c]);let[m,p]=(0,K.useState)(x1.None),{options:h,persistedOptions:f,commitMutations:g,revertMutations:y,onDrop:x,addOption:b,canRemoveOption:v,removeOption:w,updateOption:j}=Mn({column:i,onChangeCallback:(0,K.useCallback)(()=>{A(!0),p(x1.None)},[p]),ui:ti}),{workflowsUsingMissingColumnOption:C}=pb(),I=(0,K.useMemo)(()=>C(i.databaseId,h.map(e=>e.id)).length,[i.databaseId,h,C]),S=(0,K.useMemo)(()=>(function(e,t,a){let r=Mi(e,t),n=0;for(let t of a){let a=t[e.id],i=a?.id;r.has(i)&&n++}return n})(i,h,n),[i,h,n]),k=(0,K.useMemo)(()=>!!t&&Mi(i,h).size>0,[i,h,t]),{updateColumnOptions:N,updateColumnOptionsStatus:T}=Ms(i,h),[_,A]=(0,K.useState)(!1);(0,K.useEffect)(()=>{_||l(e)},[e,_]);let R=(0,K.useRef)(nH.genericErrorMessage),P=(0,K.useCallback)(async()=>{await N(),"succeeded"===T.current.status?(g(),A(!1),p(x1.Successful),d.current&&d.current.cancel(),d.current=o()):"failed"===T.current.status&&(y(),p(x1.Failed),(0,Il.i)(nH.updateColumnOptionsFailed,{assertive:!0}))},[g,o,N,T,y]),D=Md(),E=(0,K.useCallback)(async()=>{let e=I+S>0||k;i.id===eT.Status&&h.every(e=>""===e.name.trim())?(R.current=nH.statusFieldEmptyError,p(x1.Failed)):e?(S>0&&a({name:"settings_data_loss_single_select_warning",context:JSON.stringify({columnId:i.id,affectedOptionsUsedCount:S})}),await D({field:i,values:f.filter(e=>!h.some(t=>t.id===e.id)).map(e=>e.name),affectedItems:S,affectedWorkflows:I})?(a({name:"settings_data_loss_single_select_save",context:JSON.stringify({columnId:i.id,affectedOptionsUsedCount:S})}),await P()):(a({name:"settings_data_loss_single_select_cancel",context:JSON.stringify({columnId:i.id,affectedOptionsUsedCount:S})}),y(),A(!1),p(x1.None))):await P()},[I,S,k,i,h,D,f,a,P,y]);return(0,K.useEffect)(()=>{_&&E()},[_,E]),{commitState:m,options:h,onDrop:x,addOption:b,canRemoveOption:v,removeOption:w,updateOption:j,areColumnValuesLoaded:u,optionsChanged:_,saveSingleSelectOptions:E,errorMessage:R}};var Mp=a(15019);let Mh={opacity:0},Mf={entering:{opacity:1},entered:{opacity:1},exiting:{opacity:0,transition:"opacity 300ms ease-in-out"},exited:{opacity:0},unmounted:{opacity:0}},Mg=({commitState:e,errorMessage:t})=>{let a=(0,K.useRef)(null);return(0,K.useEffect)(()=>{e===x1.Successful&&(0,Il.i)("Saved!")},[e]),(0,F.jsx)(lx.A,{sx:{display:"flex",alignItems:"center"},children:(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(Mp.Ay,{in:e===x1.Successful,nodeRef:a,timeout:500,children:e=>(0,F.jsxs)(lv.A,{sx:{pl:2,mt:2},ref:a,style:{...Mh,...Mf[e]},children:[(0,F.jsx)(x7,{status:x1.Successful}),(0,F.jsx)(lv.A,{sx:{ml:2},...(0,ey.G)("column-settings-saved-message"),children:"Saved!"})]})}),e===x1.Failed&&(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(x7,{status:x1.Failed}),(0,F.jsx)(lv.A,{sx:{ml:2},...(0,ey.G)("single-select-options-error-box"),children:t.current})]})]})})};try{Mg.displayName||(Mg.displayName="AutosaveMessage")}catch{}let My={container:"single-select-form-module__container--Y6lQj",listContainer:"single-select-form-module__listContainer--dRDJL",addOptionContainer:"single-select-form-module__addOptionContainer--FYXNH",singleSelectItem:"single-select-form-module__singleSelectItem--QfsZB"},Mx=({options:e,onAddOption:t,onUpdateOption:a,onRemoveOption:r,canRemoveOption:n,onDrop:i,sx:l})=>{let{projectLimits:{singleSelectColumnOptionsLimit:s}}=eU(),o=(0,K.useRef)(null),d=e.length>=s,u=e=>o.current?.querySelector(`input[data-option-index='${e}']`),c=e.slice(0,s);return(0,F.jsx)("div",{className:My.container,children:(0,F.jsxs)(lx.A,{sx:l,className:My.listContainer,children:[(0,F.jsx)(kS.BS,{items:c.map(e=>({id:e.id,title:e.name,option:e})),onDrop:i,style:{listStyle:"none"},"aria-label":"Single select options",renderOverlay:({option:e},t)=>(0,F.jsx)(kS.BS.Item,{id:e.id,index:t,title:e.name,hideSortableItemTrigger:!0,isDragOverlay:!0,children:(0,F.jsx)(Mv,{option:e,index:t,enableOptionRemoval:n,onRemove:()=>r(e.id),onChange:a},e.id)},e.id),children:e.slice(0,s).map((e,t)=>(0,F.jsx)(kS.BS.Item,{id:e.id,index:t,title:e.name,hideSortableItemTrigger:!0,children:(0,F.jsx)(Mv,{option:e,index:t,enableOptionRemoval:n,onRemove:()=>r(e.id),onChange:a},e.id)},e.id))}),(0,F.jsx)("div",{className:My.addOptionContainer,children:d?(0,F.jsx)(mq.A,{variant:"warning",sx:{p:2},children:nH.singleSelectOptionLimitWarning(s)}):(0,F.jsx)(Mb,{onCreate:(a=Cn)=>{t(a),setTimeout(()=>u(e.length)?.focus())}})})]})})},Mb=({onCreate:e})=>{let[t,a]=(0,K.useState)(""),r=""!==t.trim(),n=()=>{r&&(e({...Cn,name:x0(t)}),a(""))},i=(0,xJ._)(e=>{"Enter"===e.key&&(e.preventDefault(),n())});return(0,F.jsxs)(lx.A,{as:"fieldset",sx:{display:"flex",gap:2,border:0,padding:0,margin:0},onSubmit:n,children:[(0,F.jsx)("legend",{className:"sr-only",children:"Add option"}),(0,F.jsxs)(hM.A,{sx:{flex:1},children:[(0,F.jsx)(hM.A.Label,{visuallyHidden:!0,children:"Label text"}),(0,F.jsx)(br,{fullWidth:!0,children:(0,F.jsx)(gp.A,{block:!0,value:t,onChange:e=>a(e.target.value),placeholder:"Add option\u2026",autoComplete:"false",...i})})]}),(0,F.jsx)(p4.Q,{onClick:n,disabled:!r,children:"Add"})]})};function Mv({index:e,option:t,enableOptionRemoval:a,onRemove:r,onChange:n}){let{setNodeRef:i}=(0,kS.gl)({id:t.id,data:{metadata:{id:t.id}}}),[l,s]=(0,K.useState)(!1),[o,d]=(0,K.useState)(!1),u=(0,K.useRef)(null),{openMoveDialog:c}=(0,kS.gY)();return xN(l,u),(0,F.jsxs)("div",{ref:i,className:My.singleSelectItem,...(0,ey.G)("singleSelectItem"),children:[(0,F.jsx)(kS.BS.DragTrigger,{}),(0,F.jsx)(bN,{option:t}),(0,F.jsx)(p$,{sx:{flex:1,px:2,color:"fg.subtle",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",m:0},as:"p",children:"descriptionHtml"in t?t.descriptionHtml:t.description}),(0,F.jsxs)(yu.W,{onOpenChange:d,open:o,anchorRef:u,children:[(0,F.jsx)(yu.W.Anchor,{children:(0,F.jsx)(fE.K,{icon:ly.KebabHorizontalIcon,variant:"invisible","aria-label":`Open field actions for ${t.name}`,size:"small",sx:{color:"fg.muted"},...(0,ey.G)("single-select-item-menu-button")})}),(0,F.jsx)(yu.W.Overlay,{children:(0,F.jsxs)(fi.l,{children:[(0,F.jsxs)(fi.l.Item,{onSelect:()=>s(!0),"aria-label":`Open edit dialog for ${t.name}`,...(0,ey.G)("single-select-item-edit-button"),children:[(0,F.jsx)(fi.l.LeadingVisual,{children:(0,F.jsx)(ly.PencilIcon,{})}),"Edit option"]}),(0,F.jsxs)(fi.l.Item,{"aria-label":`Advanced move ${t.name}...`,onSelect:()=>c(t.name,e,u),...(0,ey.G)("single-select-item-move-button"),children:[(0,F.jsx)(fi.l.LeadingVisual,{children:(0,F.jsx)(ly.GrabberIcon,{})}),"Advanced Move..."]}),a&&(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(fi.l.Divider,{}),(0,F.jsxs)(fi.l.Item,{variant:"danger",onSelect:r,"aria-label":`Remove ${t.name}`,...(0,ey.G)("single-select-item-delete-button"),children:[(0,F.jsx)(fi.l.LeadingVisual,{children:(0,F.jsx)(ly.XIcon,{})}),"Remove option"]})]})]})})]}),l&&(0,F.jsx)(Ck,{initialOption:t,onCancel:()=>s(!1),onSave:e=>{s(!1),n({...t,...e})}})]},t.id)}try{Mx.displayName||(Mx.displayName="SingleSelectForm")}catch{}try{Mb.displayName||(Mb.displayName="NewItemCreator")}catch{}try{Mv.displayName||(Mv.displayName="SingleSelectItem")}catch{}let Mw=({column:e})=>{let{commitState:t,options:a,onDrop:r,addOption:n,canRemoveOption:i,removeOption:l,updateOption:s,errorMessage:o}=Mm({externalColumn:e});(0,K.useEffect)(()=>{t===x1.Successful&&(0,Il.i)("Saved!")},[t]);let d=t===x1.Failed?x9:{};return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(h_.A,{as:"h3",sx:{fontSize:1,mt:4,mb:2},"aria-label":`${e.name} options`,children:"Options"}),(0,F.jsx)(Mx,{options:a,onAddOption:n,onUpdateOption:s,onRemoveOption:l,canRemoveOption:i,sx:d,onDrop:r}),(0,F.jsx)(Mg,{commitState:t,errorMessage:o})]})};try{Mw.displayName||(Mw.displayName="SingleSelectOptions")}catch{}let Mj=e=>{if("type"===e.name.toLowerCase().trim()){if(!e.userDefined)return;let{isOrganization:t}=eU();return t?"rename-custom-type-column":void 0}},MC=new Set([eT.Status,eT.SubIssuesProgress]);function MI(e){return e.userDefined||MC.has(e.id)}let MS=()=>{let{updateColumnEntry:e}=yW(),t=(0,K.useCallback)((t,a)=>!!t.userDefined&&t.name!==a&&(e(iH({...t,name:a})),!0),[e]),a=(0,K.useCallback)(async(e,a)=>{t(e,a)&&(l3(),await Cf({memexProjectColumnId:e.id,name:a}))},[t]);return{setName:t,updateName:a}};var Mk=a(92132);let MN=()=>({reservedColumnNames:i2().reservedColumnNames}),MT=e=>({isValid:!1,message:e.trim()}),M_=({allColumns:e,reservedColumnNames:t},a)=>{let r=a.trim();return r?e.some(({name:e})=>MA(e,r))?MT(nH.titleHasAlreadyBeenTaken):t.some(e=>0===e.trim().localeCompare(r,void 0,{sensitivity:"accent"}))?MT(nH.titleIsReserved):r.includes(":")?MT(nH.titleContainsReservedColonCharacter):{isValid:!0,message:""}:MT(nH.titleCannotBeBlank)},MA=(e,t)=>{let a=e.replace(/ /g,"-"),r=t.replace(/ /g,"-");return 0===a.localeCompare(r,void 0,{sensitivity:"accent"})},MR={width:"960px"},MP={padding:0,display:"flex"},MD={py:"20px",pl:"20px",pr:0},ME={width:[0,0,"480px"],height:[0,0,"auto"],display:["none","flex"],alignItems:"center",justifyContent:"center",padding:"20px",position:"relative"},MM={borderRadius:"6px",overflow:"hidden",zIndex:1,display:"flex"},MB=({onCancel:e,onConfirm:t,column:a})=>{let{postStats:r}=iN(),{reservedColumnNames:n}=MN(),{allColumns:i}=i5(),{updateName:l}=MS(),[s,o]=(0,K.useState)(!1),d=(0,Mk.j)(),u=(0,K.useId)(),[c,m]=(0,K.useState)(iu.IssueTypeRenameDialog.defaultInputString),p=Ix("issueTypes","demo"),h=(0,K.useCallback)(e=>{m(x0(e.currentTarget.value))},[m]),f=M_({allColumns:i,reservedColumnNames:n},c),g=(0,K.useCallback)(async()=>{if(!f.isValid)return o(!0);await l(a,c),r({name:tr,ui:"custom_type_rename_dialog",context:`new name: ${c}, original name: ${a.name}`,memexProjectColumnId:a.id}),t()},[l,c,f,o,t,a,r]),y=s&&!f.isValid;return(0,F.jsx)(Cw.l,{onClose:e,title:iu.IssueTypeRenameDialog.title,footerButtons:[{buttonType:"default",content:iu.IssueTypeRenameDialog.actionSecondary,onClick:e},{buttonType:"primary",content:iu.IssueTypeRenameDialog.actionPrimary,onClick:g}],sx:MR,renderBody:()=>(0,F.jsxs)(Cw.l.Body,{sx:MP,children:[(0,F.jsxs)(lx.A,{sx:MD,children:[(0,F.jsxs)("p",{children:[iu.IssueTypeRenameDialog.description(a.name),"\xa0",(0,F.jsx)(pw.A,{target:"_blank",rel:"noopener noreferrer",href:iu.IssueTypeRenameDialog.learnMoreLink,children:iu.IssueTypeRenameDialog.learnMoreText})]}),(0,F.jsxs)(hM.A,{sx:{mt:2},children:[(0,F.jsx)(hM.A.Label,{children:iu.IssueTypeRenameDialog.fieldLabel}),(0,F.jsx)(br,{fullWidth:!0,children:(0,F.jsx)(gp.A,{value:c,onChange:h,"aria-invalid":y,validationStatus:y&&!f.isValid?"error":void 0})}),y&&(0,F.jsx)(hM.A.Validation,{variant:"error",children:f.message})]})]}),(0,F.jsx)(lx.A,{sx:ME,children:(0,F.jsxs)(lx.A,{sx:MM,children:[(0,F.jsx)("video",{"aria-describedby":u,controls:!0,playsInline:!0,autoPlay:!d,muted:!0,loop:!0,style:{width:"440px",height:"auto"},children:(0,F.jsx)("source",{src:p,type:"video/mp4"})}),(0,F.jsx)(lx.A,{id:u,className:"sr-only",sx:{display:"none"},children:iu.IssueTypeRenameDialog.videoDescription})]})})]})})};try{MB.displayName||(MB.displayName="MemexIssueTypeRenameDialog")}catch{}let ML={Flash:"column-settings-banner-module__Flash--OK1kI",Box:"column-settings-banner-module__Box--YasIi",Octicon:"column-settings-banner-module__Octicon--jzf_t",Box_1:"column-settings-banner-module__Box_1--EosPx",Heading:"column-settings-banner-module__Heading--HErF4",Box_2:"column-settings-banner-module__Box_2--aNuFW"};function MF({column:e,warning:t}){let[a,r]=(0,K.useState)(!1),n=(0,K.useRef)(null);return"rename-custom-type-column"!==t?null:(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(mq.A,{...(0,ey.G)("column-settings-banner"),variant:"warning","aria-live":"polite",className:ML.Flash,children:(0,F.jsxs)("div",{className:ML.Box,children:[(0,F.jsx)("div",{children:(0,F.jsx)(lw.A,{icon:ly.AlertIcon,className:ML.Octicon})}),(0,F.jsxs)("div",{className:ML.Box_1,children:[(0,F.jsx)(h_.A,{as:"h3",className:ML.Heading,children:ic.IssueTypeRename.copy1}),ic.IssueTypeRename.copy2(e.name),"\xa0",(0,F.jsx)(pw.A,{target:"_blank",rel:"noopener noreferrer",href:ic.IssueTypeRename.learnMoreLink,children:ic.IssueTypeRename.learnMoreText})]}),(0,F.jsx)("div",{className:ML.Box_2,children:(0,F.jsx)(p4.Q,{ref:n,onClick:()=>r(!0),children:ic.IssueTypeRename.actionPrimary})})]})}),a&&(0,F.jsx)(MB,{column:e,onCancel:()=>{r(!1),setTimeout(()=>n.current?.focus(),100)},onConfirm:()=>{r(!1)}})]})}try{MF.displayName||(MF.displayName="ColumnSettingsBanner")}catch{}let MO={Box:"column-settings-view-module__Box--FpAFz",Box_1:"column-settings-view-module__Box_1--Gfkwx",Heading:"column-settings-view-module__Heading--cGp36",Box_2:"column-settings-view-module__Box_2--vAaQu",Box_3:"column-settings-view-module__Box_3--Zr20C",Blankslate:"column-settings-view-module__Blankslate--EaDlQ",Octicon:"column-settings-view-module__Octicon--u37Vu",Text:"column-settings-view-module__Text--DXjcf"},MG=()=>{let e=(0,U.jE)();return{getCountOfItemsWithColumnValue:(0,K.useCallback)(t=>oF(e).filter(e=>null!=e.columns[t]).length,[e])}},MV={Box:"delete-field-dialog-module__Box--NmqeB",Text:"delete-field-dialog-module__Text--Tgtul"},M$=({columnModel:e})=>{let{memex_table_without_limits:t}=iz();return t?(0,F.jsx)(Mz,{columnModel:e}):(0,F.jsx)(MW,{columnModel:e})},MW=({columnModel:e})=>{let{getCountOfItemsWithColumnValue:t}=MG(),a=t(e.id),r=pb().workflows.filter(t=>t.actions.some(t=>t.arguments.fieldId===e.databaseId)).length;return(0,F.jsx)(MH,{rowCount:a,workFlowsCount:r,fieldName:e.name})},Mz=({columnModel:e})=>{let{data:t}=function(e){return(0,oY.I)({queryKey:["memex","itemsWithFieldValue",e.name],queryFn:async()=>{let t=`has:${e.name}`;return(await dZ({q:t,first:1})).totalCount.value}})}(e),a=pb().workflows.filter(t=>t.actions.some(t=>t.arguments.fieldId===e.databaseId)).length;return null==t?(0,F.jsx)("div",{className:MV.Box,children:(0,F.jsx)(pj.A,{size:"medium"})}):(0,F.jsx)(MH,{rowCount:t,workFlowsCount:a,fieldName:e.name})},MH=({rowCount:e,workFlowsCount:t,fieldName:a})=>{let r=nH.deleteField(a);if(!(e>0||t>0))return(0,F.jsxs)(F.Fragment,{children:[r,"."]});let n=e>0,i=t>0,l=(0,F.jsxs)(F.Fragment,{children:["and remove its data from"," ",n?(0,F.jsxs)("strong",{children:[e," ",1!==e?"items":"item"]}):null,n&&i?" and ":null,i?(0,F.jsxs)("strong",{children:[t," ",1!==t?"workflows":"workflow"]}):null,"."]});return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsxs)("p",{children:[r," ",l]}),(0,F.jsx)("p",{children:(0,F.jsx)("span",{className:MV.Text,children:"Permanently delete data from this project?"})})]})},MU=({isDialogOpen:e,columnModel:t,numberOfColumns:a,setIsDialogOpen:r,onDeleteColumn:n})=>{let{currentView:i}=iS(),{removeField:l}=TI(),{postStats:s}=iN(),{groupedByColumn:o,clearGroupedBy:d}=d7(),u=(0,K.useCallback)(()=>{let{id:e,name:r,dataType:u}=t;i&&o?.id===e&&d(i.number),l(t),s({name:"settings_field_delete",ui:"settings",context:`name: ${r}, dataType: ${u}, total fields: ${a}`,memexProjectColumnId:e}),n?.()},[t,n,a,i,o?.id,l,s,d]),c=(0,K.useCallback)(e=>{r(!1),"confirm"===e&&u()},[u,r]);return e?(0,F.jsx)(uX.K,{onClose:c,title:nH.deleteFieldDialogTitle,confirmButtonContent:"Delete field and data",confirmButtonType:"danger",children:(0,F.jsx)(M$,{columnModel:t})}):null};try{M$.displayName||(M$.displayName="DeleteFieldDialogBody")}catch{}try{MW.displayName||(MW.displayName="DeleteFieldDialogBodyMWLDisabled")}catch{}try{Mz.displayName||(Mz.displayName="DeleteFieldDialogBodyMWLEnabled")}catch{}try{MH.displayName||(MH.displayName="DeleteFieldDialogBodyText")}catch{}try{MU.displayName||(MU.displayName="DeleteFieldDialog")}catch{}let Mq=()=>{let{updateColumnValues:e}=Cy(),{updateColumnEntry:t}=yW();return{updateIterationConfiguration:(0,K.useCallback)(async(a,r)=>{if(a.dataType!==eN.Iteration)return;let n=a.settings.configuration;if(!n)return;let i=r.iterations||n.iterations,l=r.completedIterations||n.completedIterations,s={duration:n.duration,startDay:n.startDay,...r,iterations:MK(i),completedIterations:MK(l)};l3();let{memexProjectColumn:o}=await Cf({memexProjectColumnId:a.id,settings:{configuration:s}});if(o?.settings){let{settings:e}=o;t(iH({...a,settings:e}))}return o&&e(o),o?.settings?.configuration},[t,e])}};function MK(e){return e.map(e=>uT(e,["titleHtml"]))}function MQ({title:e}){let t=(0,K.useContext)(iI);return(0,F.jsxs)(lv.A,{sx:{ml:2},...(0,ey.G)("column-settings-saved-message"),children:["Changes saved. Return to"," ",t?(0,F.jsx)(pw.A,{as:cW,to:t.returnToViewLinkTo,style:{cursor:"pointer"},tabIndex:0,...(0,ey.G)("return-to-project-link"),children:e}):e,"."]})}try{MQ.displayName||(MQ.displayName="ColumnSettingsSavedMessage")}catch{}var MJ=a(60145);let MX=/[A-Za-z ]*/;function MY(e,t,a,r,n){let i,l;let{iterations:s,completedIterations:o}=e,d=r?a9(r):e.duration,u=aQ(e),c=a0(e);if(u.length>0&&c){let e=(0,tD.H)(c.startDate);i=a??(0,MJ.W)(e,{days:d});let r=parseInt(c.title.replace(t,"").replace(MX,"").trim(),10);isNaN(r)&&(r=u.length),l=`${t} ${r+1}`}else l=`${t} 1`,i=a??new Date;let m={id:n??"",duration:d,title:l,titleHtml:l,startDate:aW(i)},p=s.slice(),h=o.slice();return(0,tB.Y)((0,tP.f)(i,d),new Date)?h.unshift(m):p.push(m),r?{iterations:p,completedIterations:h,duration:d}:{iterations:p,completedIterations:h}}function MZ(e,{id:t}){return e.filter(e=>e.id!==t)}function M0(e,t){return -1!==e.completedIterations.findIndex(e=>e.id===t.id)?{completedIterations:MZ(e.completedIterations,t)}:-1!==e.iterations.findIndex(e=>e.id===t.id)?{iterations:MZ(e.iterations,t)}:{}}function M1(e,t,a,r){let n=aQ(e).sort(aZ),i=n.findIndex(({id:e})=>e===t.id);if(-1===i)return{};let l=(0,tV.c)(aL(t),aL(n[i])),s=l<0&&a||l>0&&!r?l:0,[o,d]=[n.slice(0,i),n.slice(i+1)],u=[...o,t];for(let e of d){let t=u.at(-1),a=0===s&&r?function(e,t){let a=az(e).endDate,r=(0,tD.H)(t.startDate);return Math.max((0,tV.c)(a,r)+1,0)}(t,e):s;u.push(0!==a?a6(e,a):e)}return aX(u)}let M2="inMemoryIteration",M5=0,M3=({column:e,fieldName:t,serverConfiguration:a,onUpdate:r})=>{let{memex_table_without_limits:n}=iz(),{postStats:i}=iN(),[l,s]=(0,K.useState)("active"),[o,d]=(0,K.useState)(a),[u,c]=(0,K.useState)(!1),m=(0,K.useCallback)(e=>{d(e),c(!0)},[]),{items:p}=ug(),h=p.map(e=>e.columns),{findLoadedFieldIds:f}=ss(),g=n||f().includes(e.id),{loadColumnsWithItemColumnValues:y}=_2();(0,K.useEffect)(()=>{g||y([e.id])},[g,e.id,y]);let x=(0,K.useMemo)(()=>({...o,iterations:M6(o.iterations),completedIterations:M6(o.completedIterations)}),[o]),b=(0,K.useMemo)(()=>(function(e,t,a){let r=Ml(e,t),n=0;for(let t of a){let a=t[e.id],i=a?.id;r.has(i)&&n++}return n})(e,x,h),[e,x,h]),v=(0,K.useMemo)(()=>!!n&&Ml(e,x).size>0,[e,x,n]),w=p8(a);(0,K.useEffect)(()=>{u||a===w||d(a)},[u,a,w]);let j=(0,K.useMemo)(()=>(function(e){let t=a0(e),a=t?(0,tD.H)(t.startDate):new Date;return(0,tP.f)(a,t?.duration??0)})(o),[o]),C=(0,K.useMemo)(()=>a7(o.duration),[o.duration]),{perform:I,status:S}=uN({request:(0,K.useCallback)(async()=>{await r(x)},[x,r]),showErrorToast:!1}),[k,N]=(0,K.useState)("idle"),T=(0,K.useCallback)(async()=>{N("loading"),await I();let e=S.current.status;"failed"!==e&&c(!1),N(e)},[I,S]),_=Md(),A=(0,K.useCallback)(async()=>{if(b>0||v){i({name:"settings_data_loss_iteration_warning",context:JSON.stringify({columnId:e.id,affectedIterationOptionsUsedCount:b})});let t=[...a.iterations,...a.completedIterations],r=[...o.iterations,...o.completedIterations];await _({field:e,values:t.filter(e=>!r.some(t=>t.id===e.id)).map(e=>e.title),affectedItems:b,affectedWorkflows:0})?(i({name:"settings_data_loss_iteration_save",context:JSON.stringify({columnId:e.id,affectedIterationOptionsUsedCount:b})}),await T()):i({name:"settings_data_loss_iteration_cancel",context:JSON.stringify({columnId:e.id,affectedIterationOptionsUsedCount:b})})}else T()},[b,v,i,e,a.iterations,a.completedIterations,o.iterations,o.completedIterations,_,T]),R=(0,K.useCallback)(e=>{0!==Object.entries(e).length&&(N("idle"),m({...o,...e}))},[o,m]),P=(0,K.useCallback)(e=>R(M0(o,e)),[o,R]),D=(0,K.useCallback)((e,a)=>{R(MY(o,t,e,a,`${M2}-${++M5}`))},[o,t,R]),E=(0,K.useCallback)(e=>R(M1(o,e,!1,!0)),[o,R]),M=(0,K.useCallback)(e=>R(M1(o,a6(e,o.duration),!1,!0)),[o,R]),B=(0,K.useCallback)((e,t,a)=>R(function(e,t,a,r){let n={...t,duration:(0,tV.c)((0,tD.H)(r.startDate),(0,tD.H)(t.startDate))},i={...e,...M1(e,n,!1,!0)};return M1(i,{...a,startDate:aW((0,tP.f)(aL(r),1))},!0,!1)}(o,e,t,a)),[R,o]),L=(0,K.useCallback)(()=>{m(a),N("idle")},[a,m]),F=(0,K.useMemo)(()=>(function(e,t){let a=new Map([...e.completedIterations.map(M4(!0)),...e.iterations.map(M4(!1))]);return aQ(t).sort(aZ).map(rb).map(([e,t])=>{let[r,n]=a.get(t.id)??[void 0,void 0],[i]=(e&&a.get(e.id))??[void 0];return{localIteration:t,localPreviousIteration:e,breakExistsBefore:void 0!==e&&a4(e,t),originalIteration:r,originalIsCompleted:n,originalPreviousIteration:i}})})(a,o),[a,o]),O=(0,K.useMemo)(()=>F.filter(e=>!e.originalIsCompleted&&e.originalIteration?.startDate!==e.localIteration?.startDate).length,[F]);return{allRowData:F,areColumnValuesLoaded:g,hasUnsavedChanges:u,isActiveTab:"active"===l,selectedTab:l,setSelectedTab:s,handleRemoveIteration:P,handleCreateIteration:D,handleChangeIteration:E,handleAddBreak:M,handleChangeBreak:B,handleReset:L,handleSaveChanges:A,countPushedActiveIterations:O,localConfiguration:o,minimumStartDate:j,defaultDuration:C,requestStatus:k}},M4=e=>t=>[t.id,[t,e]];function M6(e){return e.map(e=>e.id.startsWith(M2)?{...e,id:""}:e)}let M8={Box:"add-break-button-module__Box--uQvPF",Box_1:"add-break-button-module__Box_1--X0Pzh",Label:"add-break-button-module__Label--XMsp6"};function M7({onClick:e,removeTopPadding:t}){return(0,F.jsx)("div",{className:M8.Box,children:(0,F.jsx)(lx.A,{sx:{pt:t?0:void 0,mt:t?3:void 0},className:M8.Box_1,children:(0,F.jsx)(bD.A,{onClick:e,as:"button",type:"button",className:M8.Label,...(0,ey.G)("add-break-button"),children:"Insert break"})})})}try{M7.displayName||(M7.displayName="AddBreakButton")}catch{}var M9=a(12837);let Be={Text:"iteration-diff-value-module__Text--udHD1",Text_1:"iteration-diff-value-module__Text_1--BmK2Z",Text_2:"iteration-diff-value-module__Text_2--nmEEf"},Bt=({originalValue:e="",updatedValue:t="",renderUpdatedValue:a=yB,renderOriginalValue:r=yB,sx:n,testId:i})=>(0,F.jsx)(lv.A,{sx:{...n??{}},className:Be.Text,...i?(0,ey.G)(i):{},children:e===t?(0,F.jsx)("span",{children:a(t)}):(0,F.jsxs)(F.Fragment,{children:[e&&(0,F.jsx)("del",{className:Be.Text_1,...(0,ey.G)("original-value"),children:r(e)}),e&&t&&(0,F.jsx)("span",{className:Be.Text,children:" "}),t&&(0,F.jsx)("ins",{className:Be.Text_2,...(0,ey.G)("updated-value"),children:a(t)})]})});try{Bt.displayName||(Bt.displayName="DiffValue")}catch{}let Ba={display:"flex",flexDirection:"row",position:"relative",padding:3};function Br({onClick:e}){return(0,F.jsx)(fE.K,{icon:ly.TrashIcon,sx:{border:"none",boxShadow:"none",minWidth:"16px",p:0,ml:"auto",bg:"transparent",color:"fg.muted",":hover":{bg:"transparent",boxShadow:"none"}},"aria-label":"Remove item",onClick:e,...(0,ey.G)("delete-iteration")})}function Bn({value:e,onChange:t}){let[a,r]=(0,xX.N)(e),n=()=>r(e),i=(0,K.useRef)(null),l=()=>{let r=x0(a.trim());r?r!==e&&t?.(r):n()},s=(0,xJ._)(e=>{if("Enter"===e.key)l();else{if("Escape"!==e.key)return;n()}e.preventDefault(),setTimeout(()=>i.current?.blur(),10)});return(0,F.jsx)(lx.A,{onClick:()=>i.current?.focus(),sx:{px:1,ml:-1,display:"inline-block",borderRadius:"2",cursor:"text","&:focus-within":{boxShadow:"primer.shadow.focus"},"&:hover:not(:focus-within)":{boxShadow:e=>`0 0 0 3px ${e.colors.border.default}`}},children:(0,F.jsx)(br,{children:(0,F.jsx)(gg,{as:gx,autoComplete:"off",value:a,onChange:e=>r(e.target.value),onBlur:l,"aria-label":"Edit iteration name",ref:i,...s,...(0,ey.G)("iteration-title")})})})}function Bi({value:e,onChange:t,minDate:a}){let r=(0,K.useMemo)(()=>(function(e){let{startDate:t,endDate:a}=az(e);return{from:t,to:a}})(e),[e]);return(0,F.jsx)(by.DatePicker,{variant:"range",value:r,onChange:e=>{e&&t(function(e){let t=(0,tV.c)(e.to,e.from)+1;return{startDate:aW(e.from),duration:t}}(e))},view:"2-month",minDate:a,confirmation:!0,confirmUnsavedClose:!0,anchor:t=>(0,F.jsx)(pw.A,{muted:!0,...t,sx:{color:"inherit"},as:"button","aria-label":"Edit date range",...(0,ey.G)("iteration-or-break-dates"),children:aU(e)})})}function Bl({localTitle:e="",originalTitle:t="",localInterval:a,localPreviousInterval:r,originalInterval:n,labelType:i,onRemove:l,onTitleChange:s,onIntervalChange:o,children:d}){let u=e!==t||!(0,ut.A)(a,n),c=(0,K.useMemo)(()=>r?(0,tP.f)((0,tD.H)(r.startDate),r.duration):(0,M9.d)(new Date,1),[r]);return(0,F.jsxs)(lx.A,{as:"li",sx:{listStyle:"none","&:not(:last-child)":{borderBottomWidth:"1px",borderBottomStyle:"solid",borderBottomColor:"border.muted"}},children:[d,(0,F.jsxs)(lx.A,{sx:{...Ba,backgroundColor:"break"===i?"canvas.subtle":"canvas.default",boxShadow:e=>u?`2px 0 0 ${e.colors.accent.fg} inset`:void 0},children:[(0,F.jsx)(jT,{labelType:i,sx:{pt:e?"2px":void 0}}),(0,F.jsxs)(lx.A,{sx:{flexDirection:"column",display:"flex",alignItems:"flex-start",gap:1},children:[(e||t)&&(0,F.jsx)(lx.A,{sx:{flexDirection:"row",display:"flex",justifyContent:"space-between"},children:(0,F.jsx)(Bt,{sx:{fontWeight:600,fontSize:2},originalValue:t,updatedValue:e,testId:"iteration-title-diff",renderUpdatedValue:t=>(0,F.jsx)(Bn,{value:e,onChange:s})})}),(0,F.jsx)(lx.A,{sx:{flexDirection:"row",display:"flex",justifyContent:"space-between"},children:(0,F.jsx)(Bt,{originalValue:aU(n),updatedValue:aU(a),testId:"iteration-dates-diff",renderOriginalValue:()=>(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(lv.A,{sx:{fontWeight:600},children:aq(n)}),"\xa0\xa0",(0,F.jsx)("span",{children:aU(n)})]}),renderUpdatedValue:()=>(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(lv.A,{sx:{fontWeight:600},children:aq(a)}),"\xa0\xa0",(0,F.jsx)(Bi,{value:a,onChange:o,minDate:c})]})})})]}),(0,F.jsx)(Br,{onClick:l})]})]})}try{Br.displayName||(Br.displayName="DeleteButton")}catch{}try{Bn.displayName||(Bn.displayName="TitleInput")}catch{}try{Bi.displayName||(Bi.displayName="IntervalDatePicker")}catch{}try{Bl.displayName||(Bl.displayName="IterationRowSkeleton")}catch{}function Bs({onChange:e,localPreviousIteration:t,localNextIteration:a,originalPreviousIteration:r,originalNextIteration:n}){let i=a3(t,a);if(!i)return(0,F.jsx)(F.Fragment,{});let l=a3(r,n);return(0,F.jsx)(Bl,{localInterval:i,originalInterval:l,localPreviousInterval:t,labelType:"break",onRemove:()=>e({...i,duration:0}),onIntervalChange:e})}try{Bs.displayName||(Bs.displayName="IterationBreakRow")}catch{}function Bo({iteration:e,onRemove:t,onChange:a,originalIsCompleted:r=!1,previousIteration:n,originalIteration:i,children:l}){let s=((0,K.useMemo)(()=>!(0,ut.A)(e,i),[e,i])?void 0:r)??aJ(e)?"completed":aG(new Date,e)?"current":"planned";return(0,F.jsx)(Bl,{localTitle:e.title,originalTitle:i?.title,localInterval:e,originalInterval:i,localPreviousInterval:n,labelType:s,onRemove:t,onTitleChange:t=>a({...e,title:t}),onIntervalChange:t=>a({...e,...t}),children:l})}try{Bo.displayName||(Bo.displayName="IterationRow")}catch{}let Bd={Box:"iterations-header-module__Box--pil1q",Octicon:"iterations-header-module__Octicon--lTxDy",Box_1:"iterations-header-module__Box_1--YW3of"},Bu=["days","weeks"];function Bc(e){switch(e.key){case"e":case"-":case".":case"+":e.preventDefault()}}function Bm({value:e,onChange:t,onValidChange:a}){let r=(0,K.useMemo)(()=>{var t;return Number.isNaN(t=e.quantity)?{isValid:!1}:t<1?{isValid:!1,message:nH.iterationDurationQtyLow(1)}:t>99?{isValid:!1,message:nH.iterationDurationQtyHigh(99)}:{isValid:!0}},[e.quantity]);(0,K.useEffect)(()=>a?.(r.isValid),[a,r.isValid]);let n=a=>{a&&t({...e,units:a.key})},i=fl("iteration-duration"),l=fl("duration-quantity-validation-message"),s=(0,K.useMemo)(()=>{var t;return Array.from((t=e.quantity,new Map(Bu.map(e=>[e,{children:1===t?a8[e]:e,key:e,...(0,ey.G)(`duration-${e}-menu-item`)}]))).values())},[e.quantity]);return(0,F.jsxs)(lx.A,{sx:{flexGrow:1,alignItems:"center",display:"flex"},role:"group","aria-label":nH.iterationDurationLabel,"aria-labelledby":i,children:[(0,F.jsxs)(lx.A,{sx:{position:"relative"},children:[(0,F.jsx)(gp.A,{type:"number",min:1,max:99,step:1,required:!0,value:Number.isNaN(e.quantity)?"":e.quantity,onChange:a=>{let r=a.target.valueAsNumber;t({...e,quantity:r})},onKeyDown:Bc,"aria-invalid":!r.isValid,"aria-describedby":r.message&&l,"aria-label":"Duration quantity",sx:{"&.error":{borderColor:"danger.emphasis",boxShadow:"none"},mr:2,"& > input":{textAlign:"center",pr:.5,pl:.5,width:"5ch"}},className:r.isValid?"":"error",...(0,ey.G)("duration-quantity-input"),id:"duration-quantity-input"}),(0,F.jsx)(NK.n,{message:r.message,id:l,testId:"duration-quantity-validation-message"})]}),(0,F.jsxs)(yu.W,{children:[(0,F.jsx)(yu.W.Button,{sx:{flex:1,gridTemplateColumns:"min-content 1fr min-content","[data-component=text]":{textAlign:"left"},"[data-component=buttonContent]":{flex:0}},"aria-label":"Units",...(0,ey.G)("duration-units-button"),children:(0,F.jsx)(lv.A,{sx:{flex:1,textAlign:"left"},...(0,ey.G)("duration-units-value"),children:e.units})}),(0,F.jsx)(yu.W.Overlay,{children:(0,F.jsx)(fi.l,{selectionVariant:"single",children:s.map(t=>(0,K.createElement)(fi.l.Item,{...t,key:t.key,selected:t.key===e.units,onSelect:()=>n(t)}))})})]})]})}try{Bm.displayName||(Bm.displayName="IterationDurationInput")}catch{}let Bp={datePicker:"new-iteration-options-module__datePicker--AXxA9"};function Bh({duration:e,onDurationChange:t,startDate:a,onStartDateChange:r,minStartDate:n,onValidChange:i}){return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsxs)(hM.A,{id:"iteration-start-date",sx:{mb:2},children:[(0,F.jsx)(hM.A.Label,{children:nH.iterationStartDateLabel}),(0,F.jsx)(by.DatePicker,{"aria-label":nH.iterationStartDateLabel,variant:"single",value:a,onChange:e=>{if(!e)throw Error("Start date cannot be null/undefined.");r(e)},minDate:n,showTodayButton:!1,anchorClassName:Bp.datePicker})]}),(0,F.jsxs)(hM.A,{id:"duration-quantity-input",sx:{alignItems:"initial"},children:[(0,F.jsx)(hM.A.Label,{children:nH.iterationDurationLabel}),(0,F.jsx)(Bm,{value:e,onChange:t,onValidChange:i})]})]})}try{Bh.displayName||(Bh.displayName="NewIterationOptions")}catch{}let Bf={ButtonGroup:"new-iteration-modal-button-module__ButtonGroup--vPeo0",Button_1:"new-iteration-modal-button-module__Button_1--ZMqYr",Button_2:"new-iteration-modal-button-module__Button_2--KuFTM",Box:"new-iteration-modal-button-module__Box--DEsN0",Box_1:"new-iteration-modal-button-module__Box_1--eWjxv"};function Bg({onCreate:e,defaultDuration:t,minimumStartDate:a}){let[r,n]=(0,K.useState)(!1),[i,l]=(0,K.useState)(!0),[s,o]=(0,K.useState)(t),[d,u]=(0,K.useState)(a);(0,K.useEffect)(()=>u(e=>(0,tB.Y)(e,a)?a:e),[a]);let c=()=>{o(t),u(a),l(!0)},m=()=>{n(!1)};return(0,F.jsxs)(v4.A,{className:Bf.ButtonGroup,children:[(0,F.jsx)(p4.Q,{size:"small",onClick:()=>e(a,t),leadingVisual:ly.PlusIcon,className:Bf.Button_1,...(0,ey.G)("add-default-iteration-button"),children:"Add iteration"}),(0,F.jsx)(b8.T,{renderAnchor:e=>(0,F.jsx)(p4.Q,{trailingVisual:ly.TriangleDownIcon,size:"small",className:Bf.Button_2,...(0,ey.G)("add-custom-iteration-button"),...e,children:"More options"}),width:"medium",open:r,onOpen:()=>{c(),n(!0)},onClose:m,focusZoneSettings:{bindKeys:b4.z0.Tab},align:"end",overlayProps:{...(0,ey.G)("custom-iteration-modal"),"aria-label":"Add new iteration configuration",role:"dialog",sx:{overflow:"visible"}},children:(0,F.jsxs)("form",{onSubmit:t=>{t.preventDefault(),m(),e(d,s)},children:[(0,F.jsx)("div",{className:Bf.Box,children:(0,F.jsx)(Bh,{startDate:d,onStartDateChange:u,duration:s,onDurationChange:o,onValidChange:l,minStartDate:a})}),(0,F.jsxs)("div",{className:Bf.Box_1,children:[(0,F.jsx)(p4.Q,{size:"small",onClick:m,...(0,ey.G)("cancel-add-custom-iteration"),type:"button",children:"Cancel"}),(0,F.jsx)(p4.Q,{variant:"primary",size:"small",type:"submit",disabled:!i,...(0,ey.G)("save-add-custom-iteration"),children:"Add"})]})]})})]})}try{Bg.displayName||(Bg.displayName="NewIterationModalButton")}catch{}let By=(e,t)=>({bg:"transparent",border:"none",p:4,cursor:e&&!t?"not-allowed":"pointer",fontWeight:t?"semibold":"inherit",color:t?"fg.default":e?"fg.subtle":"fg.muted"});function Bx({selectedTab:e,setSelectedTab:t,configuration:a,addButtonProps:r,disabled:n=!1,tabpanelId:i}){let l=a.iterations.length,s=a.completedIterations.length;return(0,F.jsx)("div",{children:(0,F.jsxs)(lx.A,{sx:{...Ba},className:Bd.Box,children:[(0,F.jsxs)("div",{role:"tablist","aria-disabled":n,style:{display:"flex"},children:[(0,F.jsxs)(p4.Q,{sx:By(n,"active"===e),role:"tab","aria-controls":"active"===e?i:void 0,...(0,ey.G)("active-iterations"),onClick:()=>{n||t("active")},"aria-label":"Active iterations","aria-disabled":n,"aria-selected":"active"===e,disabled:n,children:[(0,F.jsx)(lw.A,{icon:ly.ClockIcon,"aria-label":"Active iterations",className:Bd.Octicon}),(0,F.jsxs)("span",{children:[l," Active"]})]},"active"),(0,F.jsxs)(p4.Q,{sx:By(n,"completed"===e),role:"tab","aria-controls":"completed"===e?i:void 0,...(0,ey.G)("completed-iterations"),onClick:()=>{n||t("completed")},"aria-label":"Completed iterations","aria-disabled":n,"aria-selected":"completed"===e,disabled:n,children:[(0,F.jsx)(lw.A,{icon:ly.ArchiveIcon,"aria-label":"Completed iterations",className:Bd.Octicon}),(0,F.jsxs)("span",{children:[s," Completed"]})]},"completed")]}),"active"===e&&(0,F.jsx)("div",{className:Bd.Box_1,children:(0,F.jsx)(Bg,{...r})})]})})}try{Bx.displayName||(Bx.displayName="IterationsHeader")}catch{}let Bb={Box:"iteration-field-options-module__Box--h3BEU",Box_1:"iteration-field-options-module__Box_1--MooqM",Flash:"iteration-field-options-module__Flash--iF3wA",Box_2:"iteration-field-options-module__Box_2--TI4bM",Box_3:"iteration-field-options-module__Box_3--Kxlap",Text:"iteration-field-options-module__Text--MKxP5"},Bv={Box:"no-iterations-placeholder-module__Box--kRcnY",Text:"no-iterations-placeholder-module__Text--PJHsR",Text_1:"no-iterations-placeholder-module__Text_1--HFzBO"};function Bw({isActiveTab:e}){return(0,F.jsxs)("div",{className:Bv.Box,children:[(0,F.jsx)("h3",{className:Bv.Text,children:e?nY.noIterationsTitle:nY.noCompletedIterationsTitle}),(0,F.jsx)("span",{className:Bv.Text_1,children:e?nY.noIterationsDescription:nY.noCompletedIterationsDescription})]})}try{Bw.displayName||(Bw.displayName="NoIterationsPlaceholder")}catch{}function Bj({column:e,fieldName:t,serverConfiguration:a,onUpdate:r}){let{allRowData:n,areColumnValuesLoaded:i,hasUnsavedChanges:l,isActiveTab:s,selectedTab:o,setSelectedTab:d,handleRemoveIteration:u,handleCreateIteration:c,handleChangeIteration:m,handleAddBreak:p,handleChangeBreak:h,handleReset:f,handleSaveChanges:g,countPushedActiveIterations:y,localConfiguration:x,minimumStartDate:b,defaultDuration:v,requestStatus:w}=M3({column:e,fieldName:t,serverConfiguration:a,onUpdate:r}),j=(0,K.useRef)(null),C=x.iterations.length,I=(0,K.useRef)(C),S=x.completedIterations.length,k=(0,K.useRef)(S),{title:N}=mf();(0,K.useEffect)(()=>{j.current&&(C<=I.current&&S<=k.current||j.current.scrollIntoView({behavior:"smooth"}))},[C,S]),(0,K.useEffect)(()=>{I.current=C,k.current=S}),(0,K.useEffect)(()=>{"succeeded"===w&&(0,Il.i)(`Changes saved. Return to ${N}.`),"failed"===w&&(0,Il.i)(nH.genericErrorMessage)},[w,N]);let T=(0,K.useMemo)(()=>n.filter(({originalIsCompleted:e})=>"completed"===o?e:!e).map(({localIteration:e,localPreviousIteration:t,originalIteration:a,originalIsCompleted:r,originalPreviousIteration:n,breakExistsBefore:i},l)=>(0,F.jsxs)(K.Fragment,{children:[i?(0,F.jsx)(Bs,{onChange:a=>h(t,e,a),localNextIteration:e,localPreviousIteration:t,originalNextIteration:a,originalPreviousIteration:n}):null,(0,F.jsx)(Bo,{iteration:e,originalIsCompleted:r,onRemove:()=>u(e),onChange:m,previousIteration:t,originalIteration:a,children:i?null:(0,F.jsx)(M7,{onClick:()=>p(e),removeTopPadding:0===l})})]},e.id)),[n,o,p,m,u,h]),_=fl("iteration-field-options"),A=!l||"loading"===w||!i,R=!l||"loading"===w;return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsxs)("div",{className:Bb.Box,children:[(0,F.jsx)(Bx,{configuration:x,selectedTab:o,setSelectedTab:d,addButtonProps:{minimumStartDate:b,defaultDuration:v,onCreate:c},disabled:l,tabpanelId:_}),(0,F.jsx)("div",{role:"tabpanel",id:_,children:T.length>0?(0,F.jsx)("ol",{"aria-label":"completed"===o?"Completed iterations":"Active iterations",className:Bb.Box_1,children:T}):(0,F.jsx)(Bw,{isActiveTab:s})}),"completed"===o&&y>0&&(0,F.jsx)(mq.A,{className:Bb.Flash,...(0,ey.G)("active-changes-notice"),children:nY.willPushActiveIterations(y)})]}),(0,F.jsx)("div",{ref:j}),(0,F.jsxs)("div",{className:Bb.Box_2,children:[(0,F.jsx)(p4.Q,{variant:"primary",disabled:A,onClick:()=>g(),...(0,ey.G)("iteration-field-settings-save"),children:nH.saveChanges}),(0,F.jsx)(p4.Q,{disabled:R,onClick:()=>f(),...(0,ey.G)("iteration-field-settings-reset"),children:nH.reset}),(0,F.jsxs)("div",{className:Bb.Box_3,children:[(0,F.jsx)(x7,{status:w}),"succeeded"===w?(0,F.jsx)(MQ,{title:N}):"failed"===w?(0,F.jsx)("span",{className:Bb.Text,children:nH.genericErrorMessage}):null]})]})]})}try{Bj.displayName||(Bj.displayName="IterationFieldOptions")}catch{}let BC=({column:e})=>{let{updateIterationConfiguration:t}=Mq(),a=(0,K.useCallback)(async a=>{await t(e,a)},[e,t]);return(0,F.jsx)(Bj,{column:e,fieldName:e.name,serverConfiguration:e.settings.configuration,onUpdate:a},e.id)};try{BC.displayName||(BC.displayName="IterationConfigurationView")}catch{}var BI=a(51046);let BS={containerSolid:"progress-bar-module__containerSolid--LfZWC",containerSegmented:"progress-bar-module__containerSegmented--IwcYh",containerRing:"progress-bar-module__containerRing--Me4du",solid:"progress-bar-module__solid--dWpHA",segmented:"progress-bar-module__segmented--MfASq",barItemComplete:"progress-bar-module__barItemComplete--Ro6h2",barItemIncomplete:"progress-bar-module__barItemIncomplete--Yjwmp",textCount:"progress-bar-module__textCount--FR2FW",textPercentage:"progress-bar-module__textPercentage--pzQK8",consistentContentSizing:"progress-bar-module__consistentContentSizing--ZW4MK"},Bk=({color:e,completed:t,name:a,percentCompleted:r,total:n})=>(0,F.jsxs)(bD.A,{"aria-label":a,className:BS.containerRing,variant:"secondary",...(0,ey.G)("progress-bar-ring"),children:[(0,F.jsx)(BI.a,{percentCompleted:r,size:14,color:e}),(0,F.jsxs)("span",{children:[t," / ",n]})]});try{Bk.displayName||(Bk.displayName="ProgressBarRing")}catch{}let BN=({color:e,completed:t,consistentContentSizing:a,hideNumerals:r,percentCompleted:n,total:i,...l})=>{let{accent:s}=(0,ra.Wk)(e),o=Math.min(i,22),d=Math.max(Math.floor(o*n/100),1),u=0===n?0:i<=o?t:d,c=(0,vB.$)(BS.containerSegmented,{[`${BS.consistentContentSizing}`]:a});return(0,F.jsxs)("div",{className:c,...(0,ey.G)("progress-bar-segmented"),children:[!r&&(0,F.jsxs)("span",{className:BS.textCount,children:[t," / ",i]}),(0,F.jsxs)(xc.z,{className:BS.segmented,inline:!0,...l,children:[Array(u).fill(null).map((e,t)=>(0,F.jsx)(xc.z.Item,{"aria-hidden":!0,className:BS.barItemComplete,sx:{backgroundColor:s}},t)),Array(o-u).fill(null).map((e,t)=>(0,F.jsx)(xc.z.Item,{"aria-hidden":!0,className:BS.barItemIncomplete,sx:{backgroundColor:s}},t))]}),!r&&(0,F.jsxs)("span",{className:BS.textPercentage,children:[n,"%"]})]})};try{BN.displayName||(BN.displayName="ProgressBarSegmented")}catch{}let BT=({color:e,completed:t,consistentContentSizing:a,hideNumerals:r,name:n,percentCompleted:i,total:l,...s})=>{let{accent:o}=(0,ra.Wk)(e),d=(0,vB.$)(BS.containerSolid,{[`${BS.consistentContentSizing}`]:a});return(0,F.jsxs)("div",{className:d,...(0,ey.G)("progress-bar-solid"),children:[!r&&(0,F.jsxs)("span",{className:BS.textCount,children:[t," / ",l]}),(0,F.jsxs)(xc.z,{className:BS.solid,inline:!0,...s,children:[(0,F.jsx)(xc.z.Item,{"aria-hidden":!0,progress:i,className:BS.barItemComplete,sx:{backgroundColor:o}}),(0,F.jsx)(xc.z.Item,{"aria-hidden":!0,progress:100-i,className:BS.barItemIncomplete,sx:{backgroundColor:o}})]}),!r&&(0,F.jsxs)("span",{className:BS.textPercentage,children:[i,"%"]})]})};try{BT.displayName||(BT.displayName="ProgressBarSolid")}catch{}let B_={SEGMENTED:"SEGMENTED",SOLID:"SOLID",RING:"RING"},BA=({color:e="PURPLE",name:t="Progress",variant:a,...r})=>{switch(a){case B_.SEGMENTED:return(0,F.jsx)(BN,{...r,color:e,name:t});case B_.RING:return(0,F.jsx)(Bk,{...r,color:e,name:t});default:return(0,F.jsx)(BT,{...r,color:e,name:t})}};try{BA.displayName||(BA.displayName="ProgressBar")}catch{}let BR=()=>{let{updateColumnEntry:e}=yW(),[t,a]=(0,K.useState)(x1.None),r=(0,K.useCallback)((t,a)=>t.dataType!==eN.SubIssuesProgress?void 0:!(0,ut.A)(t.settings.progressConfiguration,a)&&(e(iH({...t,settings:{progressConfiguration:a}})),!0),[e]),n=(0,K.useCallback)(t=>{e(iH(t))},[e]);return{updateProgressConfiguration:(0,K.useCallback)(async(e,t)=>{if(r(e,t))try{l3();let n=await Cf({memexProjectColumnId:e.id,settings:{progressConfiguration:t}});a(x1.Successful),setTimeout(()=>{a(x1.None)},3e3),n.memexProjectColumn.settings?.progressConfiguration&&r(iH({...n.memexProjectColumn}),n.memexProjectColumn.settings?.progressConfiguration)}catch{a(x1.Failed),n(e)}},[r,n]),commitState:t}},BP=({children:e})=>(0,F.jsx)("svg",{"aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",width:16,height:16,viewBox:"0 0 16 16",fill:"currentColor",className:"octicon",style:{display:"inline-block",userSelect:"none",overflow:"visible"},children:e}),BD=()=>(0,F.jsxs)(BP,{children:[(0,F.jsx)("path",{d:"M3 10H13",stroke:"#D8DEE4",strokeWidth:"2",strokeLinecap:"round"}),(0,F.jsx)("path",{d:"M3 10H7.5",stroke:"#57606A",strokeWidth:"2",strokeLinecap:"round"})]}),BE=()=>(0,F.jsxs)(BP,{children:[(0,F.jsx)("path",{d:"M3 8H13",stroke:"#D8DEE4",strokeWidth:"2",strokeLinecap:"round"}),(0,F.jsx)("path",{d:"M3 8H13",stroke:"#6E7781",strokeWidth:"2",strokeLinecap:"round",strokeDasharray:"2 3.75"})]}),BM=()=>(0,F.jsxs)(BP,{children:[(0,F.jsxs)("g",{clipPath:"url(#clip0_3042_26109)",children:[(0,F.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.7453 8C13.7453 4.82696 11.173 2.2547 8.00002 2.2547C4.82701 2.2547 2.25479 4.82696 2.25479 8C2.25479 11.173 4.82701 13.7453 8.00002 13.7453C11.173 13.7453 13.7453 11.173 13.7453 8ZM8.00002 0.928857C11.9053 0.928858 15.0711 4.09472 15.0711 8C15.0711 11.9053 11.9053 15.0711 8.00002 15.0711C4.09478 15.0711 0.928963 11.9053 0.928962 8C0.928963 4.09472 4.09478 0.928858 8.00002 0.928857Z",fill:"#D8DEE4"}),(0,F.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.7453 8C13.7453 4.82696 11.173 2.2547 8.00002 2.2547L7.99999 2.2547L7.99999 0.928857H8.00002C11.9053 0.928858 15.0711 4.09472 15.0711 8C15.0711 11.9053 11.9053 15.0711 8.00002 15.0711C6.10246 15.0711 4.37947 14.3237 3.10942 13.1071C3.31957 13.3084 3.54254 13.497 3.77729 13.6718C4.72815 14.3797 5.84174 14.8372 7.01565 15.0023C8.18957 15.1673 9.38613 15.0345 10.4953 14.6162C11.1867 14.3554 11.8303 13.9889 12.4041 13.5321C12.7509 13.256 13.0723 12.9469 13.3633 12.6082L12.3578 11.7442C13.2226 10.7386 13.7453 9.43036 13.7453 8ZM4.10902 3.77287C3.99219 3.88041 3.87983 3.99279 3.77223 4.10973C3.87981 3.99287 3.99218 3.88048 4.10902 3.77287ZM2.25599 8.11886C2.25438 8.04086 2.25435 7.96277 2.25592 7.88463C2.25516 7.923 2.25479 7.96146 2.25479 8C2.25479 8.03972 2.25519 8.07934 2.25599 8.11886ZM3.18542 2.82115C4.42299 1.67007 6.07372 0.957248 7.8906 0.929687C7.48097 0.936023 7.07402 0.977921 6.67417 1.05425C5.95369 1.19178 5.25629 1.4411 4.60795 1.79556C4.09103 2.07818 3.61354 2.42313 3.18542 2.82115ZM0.930122 7.87063C0.96257 6.06206 1.67402 4.41923 2.82035 3.18628C2.53455 3.49382 2.27569 3.82728 2.04745 4.18326C1.40758 5.18121 1.02889 6.32402 0.946173 7.5066C0.937684 7.62797 0.932341 7.74935 0.930122 7.87063Z",fill:"#57606A"})]}),(0,F.jsx)("defs",{children:(0,F.jsx)("clipPath",{id:"clip0_3042_26109",children:(0,F.jsx)("rect",{width:"16",height:"16",fill:"white"})})})]});try{BP.displayName||(BP.displayName="IconWrapper")}catch{}try{BD.displayName||(BD.displayName="BarIcon")}catch{}try{BE.displayName||(BE.displayName="SegmentedBarIcon")}catch{}try{BM.displayName||(BM.displayName="RingIcon")}catch{}let BB={Heading:"progress-configuration-view-module__Heading--HATzy",Box:"progress-configuration-view-module__Box--ibTw8",Box_1:"progress-configuration-view-module__Box_1--x8vQ1"},BL=[{id:B_.SOLID,leadingVisual:BD,label:"Bar"},{id:B_.SEGMENTED,leadingVisual:BE,label:"Segmented bar"},{id:B_.RING,leadingVisual:BM,label:"Ring"}],BF=({value:e,onSelect:t})=>{let a=BL.find(t=>t.id===e);return(0,F.jsxs)(yu.W,{children:[(0,F.jsx)(yu.W.Button,{"aria-label":"Progress visualization variant",sx:{width:248},leadingVisual:a?.leadingVisual,block:!0,alignContent:"start",children:a?.label}),(0,F.jsx)(yu.W.Overlay,{width:"auto",children:(0,F.jsx)(fi.l,{children:BL.map(({id:e,leadingVisual:a,label:r})=>(0,F.jsxs)(fi.l.Item,{onSelect:()=>t(e),children:[r,(0,F.jsx)(fi.l.LeadingVisual,{children:(0,F.jsx)(a,{})})]},e))})})]})},BO=e=>(0,F.jsx)("form",{...(0,ey.G)("hide-numerals-checkbox-field"),children:(0,F.jsxs)(hM.A,{disabled:e.disabled,children:[(0,F.jsx)(pC.A,{...e}),(0,F.jsx)(hM.A.Label,{children:"Show numerical value"})]})}),BG=({column:e})=>{let{updateProgressConfiguration:t,commitState:a}=BR(),r=e.settings?.progressConfiguration?.variant||B_.SEGMENTED,n=e.settings?.progressConfiguration?.hideNumerals||!1,i=e.settings?.progressConfiguration?.color||"PURPLE",l={color:i,hideNumerals:n,variant:r},s=(0,K.useRef)(nH.genericErrorMessage);return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(h_.A,{as:"h3","aria-label":`${e.name} options`,className:BB.Heading,children:"Options"}),(0,F.jsx)("div",{style:{width:248},className:BB.Box,children:(0,F.jsx)(BA,{completed:2,percentCompleted:40,total:5,variant:r,hideNumerals:n,color:i})}),(0,F.jsxs)("div",{className:BB.Box_1,children:[(0,F.jsx)(BF,{value:r,onSelect:a=>{t(e,{...l,variant:a})}}),(0,F.jsx)(BO,{checked:!n||r===B_.RING,disabled:r===B_.RING,onChange:a=>{t(e,{...l,hideNumerals:!a.target.checked})}})]}),(0,F.jsx)(Cb.s,{value:i,onChange:a=>{t(e,{...l,color:a})},label:"Color"}),(0,F.jsx)(Mg,{commitState:a,errorMessage:s})]})};try{BF.displayName||(BF.displayName="VariantSelect")}catch{}try{BO.displayName||(BO.displayName="HideNumeralsCheckboxField")}catch{}try{BG.displayName||(BG.displayName="ProgressConfigurationView")}catch{}let BV=()=>{let{allColumns:e}=i5(),{fieldId:t}=(0,J.g)(),a=c$(),r=mK(),n=(0,K.useMemo)(()=>e.filter(e=>MI(e)),[e]),i=(0,K.useMemo)(()=>void 0!==t?n.find(e=>`${e.id}`===t):void 0,[n,t]),l=`${i?.name} field settings`,{setCurrentColumnTitle:s}=mM();s(l);let{postStats:o}=iN(),{updateName:d}=MS(),u=(0,K.useCallback)(async e=>{i&&e!==i.name&&(await d(i,e),o({name:tr,ui:"settings",context:`new name: ${e}, original name: ${i.name}`,memexProjectColumnId:i.id}))},[i,o,d]),{localValue:c,isError:m,isSuccess:p,inputProps:h}=x2({initialValue:i?.name??"",commitFn:u});if(!i)return(0,F.jsx)(Bz,{});let f=IS(i.dataType),g=Mj(i);return(0,F.jsxs)("div",{className:MO.Box,...(0,ey.G)(`column-settings-${i.name}`),children:[g&&(0,F.jsx)(MF,{warning:g,column:i}),(0,F.jsxs)("div",{className:MO.Box_1,children:[(0,F.jsx)(h_.A,{as:"h2",className:MO.Heading,children:l}),i.userDefined?(0,F.jsx)(B$,{column:i,numberOfColumns:n.length,onDeleteColumn:()=>{let e=n.findIndex(e=>e.id===i.id);a(lr.generatePath({...r,fieldId:n[Math.max(0,e-1)].id}),{replace:!0})}}):null]}),(0,F.jsx)("div",{className:MO.Box_2,children:(0,F.jsxs)(hM.A,{children:[(0,F.jsx)(hM.A.Label,{children:"Field name"}),i.userDefined?(0,F.jsx)(br,{children:(0,F.jsx)(gp.A,{value:c,...h,sx:{width:248,...m?x9:{}}},i.id)}):(0,F.jsx)(gp.A,{sx:{width:248},disabled:!0,value:i.name}),!i.userDefined&&(0,F.jsxs)(hM.A.Caption,{children:[i.name," fields are created by GitHub and cannot be renamed."]}),m&&(0,F.jsx)(hM.A.Validation,{variant:"error",children:0===c.length?nH.requiredFieldErrorMessage:nH.genericErrorMessage}),p&&(0,F.jsx)(hM.A.Validation,{variant:"success",children:"Saved!"})]})}),(0,F.jsxs)("div",{children:[(0,F.jsx)("div",{className:MO.Box_3,children:"Field type"}),(0,F.jsx)(p4.Q,{leadingVisual:f,disabled:!0,children:Ik(i.dataType)})]}),(0,F.jsx)(BW,{column:i})]})},B$=({column:e,numberOfColumns:t,onDeleteColumn:a})=>{let[r,n]=(0,K.useState)(!1);return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(p4.Q,{variant:"danger",onClick:()=>n(!0),children:"Delete field"}),(0,F.jsx)(MU,{numberOfColumns:t,columnModel:e,isDialogOpen:r,setIsDialogOpen:n,onDeleteColumn:a})]})},BW=(0,K.memo)(function({column:e}){switch(e.dataType){case eN.Iteration:return(0,F.jsx)(BC,{column:e});case eN.SingleSelect:return(0,F.jsx)(Mw,{column:e});case eN.SubIssuesProgress:return(0,F.jsx)(BG,{column:e});default:return null}}),Bz=(0,K.memo)(function(){return(0,F.jsxs)(pI,{sx:{backgroundColor:e=>`${e.colors.canvas.default}`},className:MO.Blankslate,children:[(0,F.jsx)(lw.A,{icon:ly.StopIcon,size:30,className:MO.Octicon}),(0,F.jsx)("h2",{children:"This field no longer exists"}),(0,F.jsx)("p",{className:MO.Text,children:"Select another field to view settings."})]})});try{BV.displayName||(BV.displayName="ColumnSettingsView")}catch{}try{(j=Icon).displayName||(j.displayName="Icon")}catch{}try{B$.displayName||(B$.displayName="DeleteField")}catch{}try{BW.displayName||(BW.displayName="ConfigurationOptions")}catch{}try{Bz.displayName||(Bz.displayName="NoFieldFound")}catch{}async function BH(){let e=nP("memex-reindex-items-api-data"),{data:t}=await ix(e.url,{method:"POST"});return t}async function BU(){l3();let e=nP("memex-delete-api-data"),{data:t}=await ix(e.url,{method:"DELETE"});return t}let Bq=()=>{let{perform:e,status:t}=uN({request:BU,showErrorToast:!0});return{deleteMemex:(0,K.useCallback)(async()=>{await e(),"succeeded"===t.current.status&&window.location.assign(t.current.data.redirectUrl)},[e,t]),status:t}},BK=()=>{let{setProject:e}=yq();return{toggleMemexClose:(0,K.useCallback)(async t=>{e((await xH({closed:t})).memexProject)},[e])}},BQ=()=>{let{setProject:e}=yq();return{toggleMemexPublic:(0,K.useCallback)(async t=>{e((await xH({public:t})).memexProject)},[e])}},BJ=()=>{let e=y7(),{setProject:t}=yq();return{updateIsTemplate:(0,K.useCallback)(async a=>{e.isTemplate!==a&&t((await xH({isTemplate:a})).memexProject)},[e.isTemplate,t])}};var BX=a(37827);let BY=e=>(0,F.jsx)(F.Fragment,{children:(0,F.jsx)(Nt,{...e})}),BZ=({children:e})=>(0,F.jsx)(lv.A,{weight:"semibold",children:e});function B0({onClose:e,onConfirm:t,projectName:a,draftIssueCount:r}){let n=(0,K.useRef)(null),[i,l]=(0,K.useState)("");return(0,K.useEffect)(()=>{n.current?.focus()},[]),(0,F.jsxs)(Cw.l,{title:nY.deleteProjectTitle,width:"large",renderBody:k9,renderHeader:BY,onClose:e,role:"alertdialog",children:[(0,F.jsx)(BX.l,{title:"Delete project warning",hideTitle:!0,description:nY.deleteProjectWarning,variant:"warning",className:"mb-2"}),(0,F.jsxs)("p",{children:["This action ",(0,F.jsx)(BZ,{children:"cannot"})," be undone. This will permanently delete the"," ",(0,F.jsx)(BZ,{children:a})," project, saved views, custom fields and associated values, and Insights data."]}),r?(0,F.jsxs)("p",{children:["This will also delete"," ",(0,F.jsxs)(BZ,{children:[r," draft issue",r>1?"s":""]})," ","that ",r>1?"were":"was"," created in this project."]}):null,(0,F.jsx)("p",{children:"This will not delete issues or pull requests themselves."}),(0,F.jsxs)("p",{children:["Please type ",(0,F.jsx)(BZ,{children:a})," to confirm."]}),(0,F.jsxs)("form",{onSubmit:t,...(0,ey.G)("confirm-delete-form"),children:[(0,F.jsx)(gp.A,{"aria-label":nY.deleteProjectInputLabel,ref:n,block:!0,onChange:e=>l(e.target.value),value:i,className:"mb-3",...(0,ey.G)("confirm-delete-input")}),(0,F.jsx)(Cw.l.Buttons,{buttons:[{content:nY.deleteProjectConfirmation,buttonType:"danger",disabled:i.trim()!==a.trim(),type:"submit",block:!0}]})]})]})}try{BZ.displayName||(BZ.displayName="BoldText")}catch{}try{B0.displayName||(B0.displayName="DeleteProjectDialog")}catch{}let B1={Box:"general-settings-view-module__Box--AZmmU",Heading:"general-settings-view-module__Heading--Lv9aL",Box_1:"general-settings-view-module__Box_1--LepIn",Text:"general-settings-view-module__Text--vYcJF",Box_2:"general-settings-view-module__Box_2--FMqHD",Box_3:"general-settings-view-module__Box_3--NF_iO",Text_1:"general-settings-view-module__Text_1--cvQD5",Box_4:"general-settings-view-module__Box_4--lK3jQ",Text_2:"general-settings-view-module__Text_2--iOUpz",Text_3:"general-settings-view-module__Text_3--TPJop",Heading_1:"general-settings-view-module__Heading_1--Wbdyx",Box_5:"general-settings-view-module__Box_5--pYuYg",Box_6:"general-settings-view-module__Box_6--sS1Xj",Text_4:"general-settings-view-module__Text_4--WMw9X",Box_7:"general-settings-view-module__Box_7--DRKDH",Box_8:"general-settings-view-module__Box_8--VTJy0",ActionMenu_Button:"general-settings-view-module__ActionMenu_Button--WUyFb",ActionList_Item:"general-settings-view-module__ActionList_Item--s_Tbh",Button_1:"general-settings-view-module__Button_1--lvRaR"};function B2({children:e,showDivider:t}){return(0,F.jsx)(lx.A,{sx:{justifyItems:"center",p:3,display:"flex",flexDirection:"row",...t?{borderBottomColor:"border.muted",borderBottomStyle:"solid",borderBottomWidth:"1px"}:{borderBottom:"unset"},"@media (max-width: 544px)":{flexDirection:"column",gap:3}},children:e})}function B5({title:e,description:t,children:a}){return(0,F.jsxs)(lx.A,{sx:{flex:"auto"},children:[(0,F.jsx)(h_.A,{as:"h3",sx:{mb:1,fontSize:1},children:e}),a,(0,F.jsx)(lv.A,{sx:{fontSize:1},children:t})]})}function B3({children:e}){return(0,F.jsx)(lx.A,{sx:{display:"flex",alignItems:"center",gap:"24px","@media (max-width: 544px)":{gap:0}},children:e})}try{B2.displayName||(B2.displayName="ProjectSettingsCard")}catch{}try{B5.displayName||(B5.displayName="ProjectSettingsCardHeader")}catch{}try{B3.displayName||(B3.displayName="ProjectSettingsCardBody")}catch{}let B4="projectNameRequired",B6=(0,nN.A)(e=>{(0,Il.i)(e,{assertive:!0})},100),B8=()=>{let e=mf(),{postStats:t}=iN(),{setProject:a}=yq(),[r,n]=(0,K.useState)(!1),[i,l]=(0,K.useState)(!1),[s,o]=(0,K.useState)({title:e.title,shortDescription:e.shortDescription,description:e.description});return(0,K.useEffect)(()=>{i&&B6(i===B4?nH.projectNameRequired:nH.genericErrorMessage)},[i]),(0,K.useEffect)(()=>{r&&B6(nH.projectSettingsSaved)},[i,r]),{updateSettings:(0,K.useCallback)(async()=>{let r={},i=s?.title?.trim(),o=s?.shortDescription,d=s?.description;if(i?.trim().length===0){l(B4);return}i&&e.title!==i&&(r.title=i),o&&e.shortDescription!==o&&o.length>0&&(r.shortDescription=o),d&&e.description!==d&&d.length>0&&(r.description=d);try{let e=await xH(r);a(e.memexProject),l(!1),n(!0),setTimeout(()=>{n(!1)},1800),t({name:"project_settings_save_success",context:JSON.stringify(Object.keys(r))})}catch{l(!0),t({name:"project_settings_save_error",context:JSON.stringify(Object.keys(r))})}},[e.description,e.shortDescription,e.title,t,a,s?.description,s?.shortDescription,s?.title]),setSettings:(0,K.useCallback)(e=>{l(!1),o(t=>({...t,...e}))},[o]),isSuccess:r,isError:i,isDirty:function(e,t){return t?.title!==e.title||t?.shortDescription!==e.shortDescription||t?.description!==e.description}(e,s)}},B7={FormControl:"project-name-editor-module__FormControl--0eDpy",TextInput:"project-name-editor-module__TextInput--VcZ90"};function B9({initialValue:e,setLocalProjectName:t}){let[a,r]=(0,xX.N)(e),[n,i]=(0,K.useState)(!1),l=(0,K.useCallback)(()=>{r(e),i(!1)},[r,i,e]),s=(0,K.useCallback)(async()=>{if(!n)return;let e=a.trim();r(e),i(!1),t(e)},[n,a,t,r]),o=(0,K.useCallback)(e=>{i(!0),r(x0(e.target.value))},[r,i]),d=(0,K.useCallback)(e=>{switch(e.key){case"Enter":s();break;case"Escape":n&&e.stopPropagation(),l()}},[s,l,n]),u=(0,xJ._)(d),c=(0,K.useCallback)(()=>{document.hasFocus()&&s()},[s]);return(0,F.jsxs)(hM.A,{id:SA,className:B7.FormControl,children:[(0,F.jsx)(hM.A.Label,{children:"Project name"}),(0,F.jsx)(br,{children:(0,F.jsx)(gp.A,{value:a,onChange:o,onBlur:c,"aria-invalid":0===a.trim().length,className:B7.TextInput,...u})}),0===a.trim().length&&(0,F.jsx)(hM.A.Validation,{variant:"error",...(0,ey.G)("project-name-error-message"),children:nH.projectNameRequired})]})}try{B9.displayName||(B9.displayName="ProjectNameEditor")}catch{}let Le={Heading:"project-settings-form-module__Heading--RO5lr",Box:"project-settings-form-module__Box--CSUk5",Box_1:"project-settings-form-module__Box_1--lqBC9",Button:"project-settings-form-module__Button--XkKLj",Text:"project-settings-form-module__Text--dpnYX",Text_1:"project-settings-form-module__Text_1--KLgI8"};function Lt(){let{title:e}=mf(),{updateSettings:t,isSuccess:a,isError:r,setSettings:n,isDirty:i}=B8(),l=(0,K.useCallback)(e=>n({title:e}),[n]),s=(0,K.useCallback)(e=>n({shortDescription:e}),[n]),o=(0,K.useCallback)(e=>n({description:e}),[n]),d=(0,uX.S)(),[u,c]=(0,K.useState)(!1),m=(0,J.KP)(({currentLocation:e,nextLocation:t})=>!!i&&e.pathname!==t.pathname&&(p(),!0)),p=(0,K.useCallback)(async()=>{c(await d({title:"Discard changes?",content:(0,F.jsx)("div",{children:"You have unsaved changes. Are you sure you want leave this page and discard them?"}),confirmButtonContent:"Discard",confirmButtonType:"danger"}))},[d]);return(0,K.useEffect)(()=>{m&&"blocked"===m.state&&(u?m.proceed():m.reset())},[u]),(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(h_.A,{as:"h2",className:Le.Heading,children:"Project settings"}),(0,F.jsx)(B9,{initialValue:e,setLocalProjectName:l}),(0,F.jsx)("div",{className:Le.Box,...(0,ey.G)("readme-edit"),children:(0,F.jsx)(bi,{setProjectShortDescription:s,editModeOff:!0})}),(0,F.jsx)("div",{...(0,ey.G)("readme-edit"),children:(0,F.jsx)(be,{setProjectDescription:o,editModeOff:!0})}),(0,F.jsxs)("div",{className:Le.Box_1,children:[(0,F.jsx)(p4.Q,{size:"medium",variant:"primary",onClick:t,className:Le.Button,...(0,ey.G)("save-project-settings-button"),children:"Save changes"}),a&&(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)("span",{...(0,ey.G)("save-project-settings-success"),className:Le.Text,children:"Saved"})," ",(0,F.jsx)(x8,{})]}),r&&(0,F.jsx)("span",{...(0,ey.G)("save-project-settings-success"),className:Le.Text_1,children:r===B4?nH.genericFormErrorMessage:nH.genericErrorMessage})]})]})}try{Lt.displayName||(Lt.displayName="ProjectSettingsForm")}catch{}function La({onClose:e}){let t=(0,K.useRef)(null);(0,K.useEffect)(()=>{t.current?.focus()},[]);let a=(0,K.useCallback)(()=>{e("cancel")},[e]),r=(0,K.useCallback)(()=>{e("confirm")},[e]);return(0,F.jsx)(Cw.l,{onClose:e,"aria-labelledby":"header-id",title:"Are you sure?",width:"small",footerButtons:[{content:(0,F.jsx)("span",{children:"Cancel"}),onClick:a,buttonType:"normal"},{content:(0,F.jsx)("span",{children:"Remove"}),onClick:r,buttonType:"danger"}],children:(0,F.jsx)("span",{children:"Remove this project as a template? It will no longer be available as a template when creating new projects."})})}try{La.displayName||(La.displayName="RemoveTemplateDialog")}catch{}let Lr=({consistency:e,inconsistencyThreshold:t})=>e&&t?e<100*t?"danger.fg":"success.fg":"fg.muted";function Ln(){let{isClosed:e,isPublicProject:t,isTemplate:a}=y7(),{isOrganization:r,projectOwner:n,copyProjectPartialUrl:i}=eU(),{createdWithTemplateMemex:l}=yU(),{hasAdminPermissions:s,canChangeProjectVisibility:o,canCopyAsTemplate:d}=eK(),{projectNumber:u}=mw(),{toggleMemexClose:c}=BK(),{toggleMemexPublic:m}=BQ(),[p,h]=(0,K.useState)(""),{postStats:f}=iN(),[g,y]=(0,K.useState)(!1),{updateIsTemplate:x}=BJ(),[b,v]=(0,K.useState)(!1),[w,j]=(0,K.useState)(""),{deleteMemex:C}=Bq(),{memex_table_without_limits:I,memex_resync_index:S}=iz(),k=I&&S&&s,N=r&&(d||s||l),T=(0,K.useCallback)(e=>{e.preventDefault(),C()},[C]),_=(0,K.useCallback)(async e=>{await c(e)},[c]),A=(0,K.useCallback)(async e=>{try{t!==e&&(await m(e),h("success"))}catch{h("error")}},[m,t]),R=(0,K.useCallback)(()=>{p&&h("")},[p,h]),{title:P,consistency:D,inconsistencyThreshold:E}=mf(),M=ug().items,B=s&&S&&!!E,L=(0,K.useMemo)(()=>M.filter(e=>"DraftIssue"===e.contentType).length,[M]),O=(0,K.useCallback)(()=>{f({name:tI,ui:tg})},[f]),G=(0,K.useCallback)(()=>{f({name:tS,ui:tg})},[f]),V=(0,K.useCallback)(()=>{f({name:"created_with_template_click",ui:"settings",context:JSON.stringify({templateMemexId:l?.id})})},[f,l]),$=(0,K.useMemo)(()=>o&&t?n?.isEnterpriseManaged?nY.projectIsInternal:nY.projectIsPublic:o?nY.projectIsPrivate:r?nY.organizationOwnedProjectVisibilityRestriction:nY.userOwnedProjectVisibilityRestriction,[o,t,r,n?.isEnterpriseManaged]),W=t?n?.isEnterpriseManaged?"Internal":"Public":"Private",z=e=>{"confirm"===e&&H(!a),v(!1)},H=(0,K.useCallback)(async e=>{try{a!==e&&(await x(e),j("success"),setTimeout(()=>{j("")},1800))}catch{j("error")}},[x,a]);return(0,K.useEffect)(()=>{"success"===w&&(0,Il.i)(nH.changesSaved)},[w,a]),(0,F.jsxs)("div",{className:B1.Box,...(0,ey.G)("general-settings"),children:[(0,F.jsx)(Lt,{}),N&&(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(h_.A,{as:"h2",className:B1.Heading,children:"Templates"}),l&&(0,F.jsx)("div",{className:B1.Box_1,children:(0,F.jsxs)("p",{...(0,ey.G)("created-with-template-link"),className:B1.Text,children:["This project was created with the\xa0",(0,F.jsx)(pw.A,{inline:!0,target:"_blank",href:l.url,onClick:V,children:(0,F.jsx)(p$,{children:l.titleHtml})}),"\xa0template."]})}),(0,F.jsxs)("div",{className:B1.Box_2,children:[s&&(0,F.jsxs)(B2,{showDivider:d,children:[(0,F.jsxs)("div",{className:B1.Box_1,children:[(0,F.jsx)("div",{id:"make-template-label",className:B1.Box_3,children:"Make template"}),(0,F.jsxs)("p",{id:"make-template-description",className:B1.Text_1,children:["Make this project a template that can be used by members of the ",(0,F.jsx)("b",{children:n?.login})," ","organization when creating new projects."]}),(0,F.jsx)("div",{})]}),(0,F.jsxs)(B3,{children:[(0,F.jsxs)("div",{className:B1.Box_4,children:["success"===w&&(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(x8,{}),(0,F.jsx)("span",{className:B1.Text_2,children:"Saved!"})]}),"error"===w&&(0,F.jsx)("span",{className:B1.Text_3,children:"Something went wrong"})]}),(0,F.jsx)(p6.A,{"aria-labelledby":"make-template-label","aria-describedby":"make-template-description",disabled:e,onClick:()=>{a||H(!a),v(a)},checked:a})]})]}),d&&(0,F.jsxs)(B2,{children:[(0,F.jsxs)("div",{className:B1.Box_1,children:[(0,F.jsx)(h_.A,{as:"h3",className:B1.Heading_1,children:"Copy as template"}),(0,F.jsx)("span",{children:"Copy this project into a template that can be used when creating new projects."})]}),(0,F.jsxs)(B3,{children:[(0,F.jsx)(Sh.x,{src:encodeURI(`${i}?copy_as_template=true`)},"settingsCopyAsTemplate"),(0,F.jsx)(p4.Q,{variant:"default","aria-label":"Copy as template",id:`settings-copy-as-template-dialog-${u}`,"data-show-dialog-id":`copy-as-template-dialog-${u}`,leadingVisual:ly.DuplicateIcon,onClick:G,className:B1.Button_1,...(0,ey.G)("copy-as-template-button"),children:(0,F.jsx)("span",{children:"Copy as template"})},"settingsCopyAsTemplateButton")]})]})]})]}),b&&(0,F.jsx)(La,{isOpen:b,onClose:e=>{z(e)}}),(0,F.jsx)(h_.A,{as:"h2",className:B1.Heading,children:"More options"}),(0,F.jsx)("div",{className:B1.Box_2,children:(0,F.jsxs)(B2,{children:[(0,F.jsx)(B5,{title:"Make a copy",description:"Make a copy of this project."}),(0,F.jsxs)(B3,{children:[(0,F.jsx)(Sh.x,{src:encodeURI(i)},"settingsCopyProject"),(0,F.jsx)(p4.Q,{variant:"default","aria-label":"Make a copy",id:`settings-copy-project-dialog-${u}`,"data-show-dialog-id":`copy-project-dialog-${u}`,className:B1.Button_1,leadingVisual:ly.CopyIcon,onClick:O,children:(0,F.jsx)("span",{children:"Make a copy"})},"settingsCopyProjectButton")]})]})}),(0,F.jsx)(h_.A,{as:"h3",className:B1.Heading,children:"Danger zone"}),(0,F.jsx)("div",{className:B1.Box_5,children:(0,F.jsxs)("div",{className:B1.Box_6,children:[s&&(0,F.jsxs)(B2,{showDivider:!0,children:[(0,F.jsxs)("div",{className:B1.Box_1,children:[(0,F.jsx)(h_.A,{as:"h3",id:"visibilityHeading",className:B1.Heading_1,children:"Visibility"}),(0,F.jsx)("span",{className:B1.Text_4,...(0,ey.G)("project-visibility-text"),children:$})]}),(0,F.jsx)(B3,{children:(0,F.jsxs)("div",{className:B1.Box_7,children:[(0,F.jsx)("div",{className:B1.Box_8,children:(0,F.jsxs)("div",{"aria-live":"polite",...(0,ey.G)("project-visibility-update-status"),children:["success"===p&&(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(x8,{}),(0,F.jsx)("span",{className:B1.Text_2,children:"Changes saved"})]}),"error"===p&&(0,F.jsx)("span",{className:B1.Text_3,children:"Something went wrong"})]})}),(0,F.jsxs)(yu.W,{children:[(0,F.jsx)(yu.W.Button,{...(0,ey.G)("project-visibility-button"),onClick:R,"aria-describedby":"visibilityHeading",leadingVisual:t?ly.GlobeIcon:ly.LockIcon,disabled:!o,className:B1.ActionMenu_Button,children:W}),(0,F.jsx)(yu.W.Overlay,{anchorSide:"inside-right",children:(0,F.jsxs)(fi.l,{selectionVariant:"single",children:[(0,F.jsxs)(fi.l.Item,{onSelect:()=>A(!1),selected:!t,className:B1.ActionList_Item,children:["Private",(0,F.jsx)(fi.l.Description,{variant:"block",children:"You choose who can read, write, and admin this project."})]},"private"),(0,F.jsxs)(fi.l.Item,{onSelect:()=>A(!0),selected:t,className:B1.ActionList_Item,children:[n?.isEnterpriseManaged?"Internal":"Public",(0,F.jsxs)(fi.l.Description,{variant:"block",children:["Everyone ",n?.isEnterpriseManaged?"in your enterprise":"on the internet"," has read access to this project. You choose who has write and admin access."]})]},"public")]})})]})]})})]}),(0,F.jsx)(B2,{showDivider:s,children:e?(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(B5,{title:"Re-open project",description:"Re-opening a project will add it to the list of open projects."}),(0,F.jsx)(B3,{children:(0,F.jsx)(p4.Q,{...(0,ey.G)("reopen-project-button"),onClick:()=>_(!1),children:"Re-open this project"})})]}):(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(B5,{title:"Close project",description:"Closing a project will disable its workflows & remove it from the list of open projects."}),(0,F.jsx)(B3,{children:(0,F.jsx)(p4.Q,{variant:"danger",...(0,ey.G)("close-project-button"),onClick:()=>_(!0),children:"Close this project"})})]})}),s&&(0,F.jsxs)(B2,{showDivider:k,children:[(0,F.jsx)(B5,{title:"Delete project",description:"Once you delete a project, there is no going back. Please be certain."}),(0,F.jsx)(B3,{children:(0,F.jsx)(p4.Q,{variant:"danger",...(0,ey.G)("delete-project-button"),onClick:()=>y(!0),children:"Delete this project"})})]}),k&&(0,F.jsxs)(B2,{children:[(0,F.jsx)(B5,{title:"Resync search index for this project",description:"This will asynchronously correct inconsistencies between the search index and the database",children:B&&(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)("span",{className:B1.Text_4,...(0,ey.G)("resync-project-es-index-consistency-text"),children:`The project data consistency with Elasticsearch is ${D?"at":""} `}),(0,F.jsx)(lv.A,{sx:{color:Lr({consistency:D,inconsistencyThreshold:E})},className:B1.Text_4,...(0,ey.G)("resync-project-es-index-consistency-value"),children:`${D?`${D}%`:"unknown"}. `})]})}),(0,F.jsx)(B3,{children:(0,F.jsx)(p4.Q,{variant:"danger",...(0,ey.G)("resync-project-es-index-button"),onClick:()=>BH(),children:"Resync search index"})})]})]})}),g&&(0,F.jsx)(B0,{onClose:()=>y(!1),projectName:P,onConfirm:T,draftIssueCount:L})]})}try{Ln.displayName||(Ln.displayName="GeneralSettingsView")}catch{}var Li=a(12152);let Ll={Button:"settings-error-fallback-module__Button--WZ9OH"},Ls=()=>{window.location.reload()},Lo=()=>(0,F.jsx)(hk,{as:"main",headingAs:"h2",heading:"This page failed to load",content:"Sorry about that. Please try refreshing and contact us if the problem persists.",...(0,ey.G)("project-settings-error-fallback"),children:(0,F.jsx)(p4.Q,{variant:"primary",onClick:Ls,className:Ll.Button,children:"Reload"})});try{Lo.displayName||(Lo.displayName="SettingsErrorFallback")}catch{}let Ld={FormControl:"add-column-modal-module__FormControl--mb7FP",FormControl_1:"add-column-modal-module__FormControl_1--gqDEy",ActionMenu_Button:"add-column-modal-module__ActionMenu_Button--N8hjd",Box:"add-column-modal-module__Box--XJROv",Octicon:"add-column-modal-module__Octicon--aN7AO",Box_1:"add-column-modal-module__Box_1--gOXMD",Box_2:"add-column-modal-module__Box_2--XzbpM",Box_3:"add-column-modal-module__Box_3--gxbep",Box_4:"add-column-modal-module__Box_4--wYFB5",Button:"add-column-modal-module__Button--vzngf"};async function Lu(e){let t=nP("memex-column-create-api-data"),{data:a}=await ix(t.url,{method:"POST",body:e});return a}let Lc=()=>{let{postStats:e}=iN(),{setAllColumns:t,allColumnsRef:a}=sl(),{updateLoadedColumns:r}=d_();return{addColumn:(0,K.useCallback)(async n=>{let i={name:n.name,dataType:n.type,settings:n.settings};l3();let l=(await Lu({memexProjectColumn:i})).memexProjectColumn;r(l.id);let s=iH(l),o=a.current.findIndex(e=>e.id===l.id)>-1;return o&&e({name:"existing_column_found",id:l.id}),t(o?[...a.current.filter(e=>e.id!==l.id),s]:[...a.current,s]),{newColumn:s}},[r,a,t,e])}},Lm=()=>{let{viewStateDispatch:e,viewsMap:t}=iS(),a=Ip(),{addColumn:r}=Lc();return{addField:uN({request:(0,K.useCallback)(async({request:n,viewNumber:i})=>{let{newColumn:l}=await r(n);if(i){let r=t[i];(0,ee.A)(r,"View must exist");let n={...r.serverViewState,visibleFields:r.serverViewState.visibleFields.concat(l.databaseId)};await a.perform({viewNumber:r.number,view:uT(n,lz)}),"succeeded"===a.status.current.status&&e({type:lc.AddField,column:l,viewNumber:i})}return l},[r,a,e,t])})}},Lp=e=>e.preventDefault(),Lh=(0,K.memo)(function({setOpen:e,isOpen:t,onSave:a,anchorRef:r,limitedTypes:n}){var i;let{allColumns:l}=i5(),s=(i=l.filter(e=>e.userDefined).length,`${nH.newField}${i>0?` ${i+1}`:""}`),{currentView:o}=iS(),[d,u]=(0,xX.N)(s,{isPropUpdateDisabled:t}),c=(0,K.useRef)(null),m=(0,K.useRef)(null),{reservedColumnNames:p}=MN(),{clientHeight:h}=ki({}),f=(0,K.useMemo)(()=>h?r.current?h-(window.pageYOffset+r.current.getBoundingClientRect().top):h:"unset",[r,h]),{options:g,addOption:y,updateOption:x,removeOption:b,onDrop:v,canRemoveOption:w,revertMutations:j}=Mn({ui:tl}),{addField:C}=Lm(),I=(0,K.useMemo)(()=>[{leadingVisual:IS(eN.Text),text:Ik(eN.Text),key:"Dropdown-text",type:eN.Text,onMouseDown:Lp,...(0,ey.G)("column-type-text")},{leadingVisual:IS(eN.Number),text:Ik(eN.Number),key:"Dropdown-number",type:eN.Number,onMouseDown:Lp,...(0,ey.G)("column-type-number")},{leadingVisual:IS(eN.Date),text:Ik(eN.Date),key:"Dropdown-date",type:eN.Date,onMouseDown:Lp,...(0,ey.G)("column-type-date")},{leadingVisual:IS(eN.SingleSelect),text:Ik(eN.SingleSelect),key:"Dropdown-singleselect",type:eN.SingleSelect,onMouseDown:Lp,...(0,ey.G)("column-type-single-select")},{leadingVisual:IS(eN.Iteration),text:Ik(eN.Iteration),key:"Dropdown-iteration",type:eN.Iteration,onMouseDown:Lp,...(0,ey.G)("column-type-iteration")}],[]),S=n&&n.length?I.filter(e=>n.includes(e.type)):I,[k,N]=(0,K.useState)(()=>S[0].type),[T,_]=(0,K.useState)(()=>S[0]),A=(0,K.useCallback)(()=>{u(s)},[s,u]),R=(0,K.useCallback)(e=>{if(e){if(d===s){if(e.type===eN.Iteration){let e=l.filter(e=>e.userDefined&&e.name.startsWith("Iteration")).length;u(nH.newIterationField(e>0?` ${e+1}`:""))}else A()}_(e),N(e.type)}},[l,s,A,u,d]),P=(0,K.useMemo)(()=>(0,M9.d)(new Date,1),[]),[D,E]=(0,K.useState)(()=>new Date),[M,B]=(0,K.useState)(re),[L,O]=(0,K.useState)(!0),G=(0,K.useCallback)(()=>{A(),j(),E(new Date),B(re),O(!0);let e=S[0];e&&(_(e),N(e.type))},[S,A,j]),V=(0,K.useCallback)((e,t)=>{switch(t){case eN.SingleSelect:{let a=Cr(g).map(({id:e,...t})=>t);return{name:e,type:t,settings:a.length>0?{options:a}:{}}}case eN.Iteration:{let a=a9(M),r=0!==D.getDay()?D.getDay():7,{iterations:n,completedIterations:i}=function(e,{duration:t,selectedStartDate:a},r){if(e.length<=0)throw Error("A title is required to create iterations");let n=a,i=[],l=[];for(let a=1;a<=3;a++)(0,tB.Y)((0,tP.f)(n,t),new Date)?l.unshift({title:`${e} ${a}`,startDate:aW(n),duration:t}):i.push({title:`${e} ${a}`,startDate:aW(n),duration:t}),n=(0,tP.f)(n,t);return{iterations:i,completedIterations:l}}(e,{duration:a,selectedStartDate:D},3);return{name:e,type:t,settings:{configuration:{startDay:r,duration:a,iterations:n,completedIterations:i}}}}case eN.Number:case eN.Text:case eN.Date:return{name:e,type:t,settings:void 0};default:tA(t)}},[D,g,M]);(0,K.useEffect)(()=>{t&&m.current?.scrollIntoView()},[t]);let $=(0,K.useCallback)(e=>{u(x0(e.currentTarget.value))},[u]),W={size:"small",type:"button"},z=(0,K.useCallback)(()=>k!==eN.SingleSelect||Cr(g).length>0,[g,k]),{isValid:H,message:U}=M_({allColumns:l,reservedColumnNames:p},d),q=z()&&H,Q=(0,K.useCallback)(t=>{"click-outside"!==t&&G(),e(!1)},[e,G]),{postStats:J}=iN(),X=(0,K.useCallback)(async()=>{if(!q)return;Q();let e=V(d,k);await C.perform({request:e,viewNumber:o?.number}),"succeeded"===C.status.current.status&&a(C.status.current.data),J({name:tn,ui:tl,memexProjectColumnId:C.status.current.data?.id})},[q,Q,V,d,k,C,o?.number,J,a]),Y=(0,K.useCallback)(e=>{"Enter"===e.key?(X(),e.preventDefault()):"Escape"===e.key&&(Q(),e.preventDefault())},[Q,X]),Z=(0,xJ._)(Y),ee=IS(k),et=g.length,ea=(0,K.useRef)(g.length);(0,K.useEffect)(()=>{ea.current=et});let er="iteration"===k?"Save and create":"Save";return t?(0,F.jsx)(b8.T,{anchorRef:r,renderAnchor:null,open:t,onClose:Q,width:"medium",overlayProps:{...(0,ey.G)("add-column-menu"),initialFocusRef:c,role:"dialog","aria-label":"Create a new field configuration",sx:f?{maxHeight:f,overflowY:"auto",overflowX:"visible"}:{overflow:"visible"}},focusZoneSettings:{bindKeys:b4.z0.Tab,containerRef:r},children:(0,F.jsxs)("form",{onSubmit:e=>e.preventDefault(),children:[(0,F.jsxs)(hM.A,{required:!0,className:Ld.FormControl,children:[(0,F.jsx)(hM.A.Label,{children:"Field name"}),(0,F.jsx)(br,{fullWidth:!0,children:(0,F.jsx)(gp.A,{...Z,onFocus:e=>e.currentTarget.select(),value:d,className:H?"":"error",onChange:$,ref:c,"aria-invalid":!H,...(0,ey.G)("add-column-name-input"),validationStatus:H?void 0:"error"})}),!H&&(0,F.jsx)(hM.A.Validation,{variant:"error",children:U})]}),(0,F.jsxs)(hM.A,{id:"add-column-type",className:Ld.FormControl_1,children:[(0,F.jsx)(hM.A.Label,{id:"add-column-type-label",children:"Field type"}),(0,F.jsxs)(yu.W,{children:[(0,F.jsx)(yu.W.Button,{"aria-labelledby":"add-column-type-label add-column-type-content",id:"add-column-type",className:Ld.ActionMenu_Button,...(0,ey.G)("add-column-type"),children:(0,F.jsxs)("div",{className:Ld.Box,children:[(0,F.jsx)("div",{children:(0,F.jsx)(lw.A,{icon:ee,className:Ld.Octicon})}),(0,F.jsx)("div",{id:"add-column-type-content",children:T.text})]})}),(0,F.jsx)(yu.W.Overlay,{children:(0,F.jsx)(fi.l,{selectionVariant:"single",children:S.map(e=>(0,K.createElement)(fi.l.Item,{selected:T===e,onSelect:()=>R(e),...e,key:e.key,children:[(0,F.jsx)(fi.l.LeadingVisual,{children:(0,F.jsx)(e.leadingVisual,{})}),e.text]}))})})]})]}),k===eN.SingleSelect&&(0,F.jsxs)("fieldset",{className:Ld.Box_1,children:[(0,F.jsx)("legend",{className:Ld.Box_2,children:"Options"}),(0,F.jsx)(Mx,{options:g,canRemoveOption:w,onAddOption:y,onUpdateOption:x,onRemoveOption:b,onDrop:v})]}),k===eN.Iteration&&(0,F.jsxs)("fieldset",{className:Ld.Box_1,children:[(0,F.jsx)("legend",{className:Ld.Box_2,children:"Options"}),(0,F.jsx)("div",{className:Ld.Box_3,children:(0,F.jsx)(Bh,{duration:M,onDurationChange:B,onValidChange:O,startDate:D,onStartDateChange:E,minStartDate:P})})]}),(0,F.jsxs)("div",{className:Ld.Box_4,children:[(0,F.jsx)(p4.Q,{...W,onClick:()=>Q(),children:"Cancel"}),(0,F.jsx)(p4.Q,{variant:"primary",...(0,ey.G)("add-column-modal-save"),...W,onClick:X,disabled:!q||!L,className:Ld.Button,children:er})]})]})}):null});try{Lh.displayName||(Lh.displayName="AddColumnModal")}catch{}try{(C=SelectedIcon).displayName||(C.displayName="SelectedIcon")}catch{}var Lf=a(21409);let Lg=(0,K.createContext)(null),Ly=()=>{let e=(0,K.useContext)(Lg);if(!e)throw Error("useDragAndDrop can only be accessed from a DropSideContext.Provider component");return{getDropSide:t=>e.overId===t?e.dropSide:null,moveToPosition:e.moveToPosition}};function Lx(e,t){let a=(0,K.useRef)(!1);(0,K.useEffect)(()=>(t?(document.body.classList.add(e),a.current=!0):(a.current&&document.body.classList.remove(e),a.current=!1),()=>{a.current&&document.body.classList.remove(e),a.current=!1}),[e,t])}let Lb=({collisionRect:e,droppableRects:t,droppableContainers:a})=>{let r=(e.top+e.bottom)/2,n=[];for(let e of a){let{id:a}=e,i=t.get(a);if(i){let t=Math.abs(r-(i.top+i.bottom)/2);n.push({id:a,data:{droppableContainer:e,value:t}})}}return n.sort((e,t)=>e.data.value-t.data.value)},Lv={Dialog_Footer:"keyboard-reorder-instructions-modal-module__Dialog_Footer--mj6FA",instructionContainerSx:"keyboard-reorder-instructions-modal-module__instructionContainerSx--Ds4S1",instructionSx:"keyboard-reorder-instructions-modal-module__instructionSx--PKizo",Box_2:"keyboard-reorder-instructions-modal-module__Box_2--BaBPz",Box_3:"keyboard-reorder-instructions-modal-module__Box_3--t9fXX",FormControl:"keyboard-reorder-instructions-modal-module__FormControl--MdWXF",Box_4:"keyboard-reorder-instructions-modal-module__Box_4--qOLAi"},Lw="hideReorderKeyboardInstructions",Lj=({isOpen:e,onClose:t})=>e?(0,F.jsx)(Cw.l,{title:"How to move objects via keyboard",subtitle:"This navigation is only available when move mode is activated.",onClose:t,renderFooter:()=>(0,F.jsx)(Cw.l.Footer,{className:Lv.Dialog_Footer,children:(0,F.jsx)(LC,{onClose:t})}),children:(0,F.jsxs)("div",{className:Lv.instructionContainerSx,children:[(0,F.jsxs)("div",{className:Lv.instructionSx,children:[(0,F.jsx)("span",{children:n3.cancelDrag}),(0,F.jsx)(kj.U,{keys:"esc"})]}),(0,F.jsxs)("div",{className:Lv.instructionSx,children:[(0,F.jsx)("span",{children:n3.moveDown}),(0,F.jsx)(kj.U,{keys:"down"})]}),(0,F.jsxs)("div",{className:Lv.instructionSx,children:[(0,F.jsx)("span",{children:n3.moveUp}),(0,F.jsx)(kj.U,{keys:"up"})]}),(0,F.jsxs)("div",{className:(0,vB.$)(Lv.instructionSx,Lv.Box_2),children:[(0,F.jsx)("span",{children:n3.endDrag}),(0,F.jsxs)("div",{children:[(0,F.jsx)(kj.U,{keys:"enter"}),(0,F.jsx)("span",{children:" or "}),(0,F.jsx)(kj.U,{keys:"space"})]})]})]})}):null,LC=({onClose:e})=>{let[t,a]=(0,uJ.M)(Lw,!1);return(0,F.jsxs)("div",{className:Lv.Box_3,children:[(0,F.jsxs)(hM.A,{className:Lv.FormControl,children:[(0,F.jsx)(pC.A,{checked:t,onChange:()=>a(!t)}),(0,F.jsx)(hM.A.Label,{children:"Don't show this again"})]}),(0,F.jsx)("div",{className:Lv.Box_4,children:(0,F.jsx)(p4.Q,{onClick:e,children:"Close"})})]})};try{Lj.displayName||(Lj.displayName="KeyboardReorderInstructionsModal")}catch{}try{LC.displayName||(LC.displayName="KeyboardReorderInstructionsFooter")}catch{}let LI={start:[kS.vL.Space,kS.vL.Enter],cancel:[kS.vL.Esc],end:[kS.vL.Space,kS.vL.Enter]},LS=[kS.FN,kS.Mk],Lk=(0,nN.A)(e=>{(0,Il.i)(e,{assertive:!0})},100),LN=class CustomKeyboardSensor extends kS.uN{};!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(LN,"activators",[{eventName:"onKeyDown",handler:(e,{keyboardCodes:t=LI,onActivation:a},{active:r})=>{let{code:n}=e.nativeEvent;if(t.start.includes(n)){let t=r.activatorNode.current;return(!t||e.target===t)&&(e.preventDefault(),a?.({event:e.nativeEvent,returnFocusRef:r.activatorNode}),!0)}return!1}},{eventName:"onClick",handler:(e,{onActivation:t},{active:a})=>{e.preventDefault();let r=new KeyboardEvent("keydown",{key:"Enter",code:"Enter"});return t?.({event:r,returnFocusRef:a.activatorNode}),!0}}]);let LT=()=>"",L_={},LA=({onDrop:e,itemIds:t,titleMap:a=L_,children:r})=>{let[n,i]=(0,K.useState)(!1),[l,s]=(0,K.useState)(0),[o,d]=(0,K.useState)(!1),[u,c]=(0,K.useState)(null),[m,p]=(0,K.useState)(null),[h,f]=(0,K.useState)(null),[g,y]=(0,K.useState)(!1),[x]=(0,uJ.M)(Lw,!1);xN(g,u),Lx("is-dragging",n);let b=(0,K.useCallback)(()=>{y(!1),i(!0)},[]),v=(0,K.useCallback)(e=>{if(!e.active)return;(0,Il.i)(n3.instructions(a[e.active.id]??e.active.id),{assertive:!0});let t=e.active.data.current?.metadata;f(t?.id??null),s(e.active.data.current?.sortable.index??0),p(wV.BEFORE)},[a]),w=(0,K.useCallback)(e=>{let a=e.over?.data.current?.metadata,r=a?.id??null,n=wW(e);if(p(n),f(r),d(!0),i(!0),e.over&&e.over.data.current){let a=e.over.data.current.sortable.index;n===wV.AFTER&&a===t.length-1&&a++,s(a)}},[t]);(0,K.useEffect)(()=>{if(n&&o){if(0===l)Lk(n3.firstItemInList);else if(l===t.length)Lk(n3.lastItemInList);else{let e=t[l-1],r=t[l];Lk(n3.movedBetween(a[e],a[r]))}}},[n,o,l,a,t]);let j=(0,K.useCallback)(e=>{(0,Il.i)(`${a[e.active.id]??e.active.id} not moved.`,{assertive:!0}),i(!1),d(!1)},[a]),C=(0,K.useCallback)(r=>{if(i(!1),d(!1),!r.active||!r.over)return;let n=r.active.data.current?.metadata,s=r.over.data.current?.metadata;if(n?.id!==s?.id&&m&&e({dragMetadata:n,dropMetadata:s,side:m}),f(null),0===l)(0,Il.i)(n3.successfulMoveTop(a[r.active.id]??""),{assertive:!0});else if(l===t.length)(0,Il.i)(n3.successfulMoveBottom(a[r.active.id]??""),{assertive:!0});else{let e=t[l-1],n=t[l];(0,Il.i)(n3.successfulMove(a[r.active.id]??"",a[e],a[n]),{assertive:!0})}},[e,m,a,t,l]),I=(0,K.useCallback)((a,r,n)=>{f(t[r]??null);let i=t[a],l=t[r];i&&l&&e({dragMetadata:{id:i},dropMetadata:{id:l},side:n?wV.BEFORE:wV.AFTER})},[t,e]),S=x_(),k=(0,K.useCallback)((e,t)=>{let{currentCoordinates:a,context:r}=t,n=r.active?.rect.current.initial?.height??25,i={...a};switch(e.code){case"ArrowDown":case"ArrowRight":i.y=i.y+n;break;case"ArrowUp":case"ArrowLeft":i.y=i.y-n;break;case"Tab":e.preventDefault();break;default:return}let l=[],s=Array.from(r.droppableRects.values());for(let e of s)l.push(e.top),s[s.length-1]===e&&l.push(e.bottom);return i.y=l.reduce((e,t)=>Math.abs(t-i.y)<Math.abs(e-i.y)?t:e),i},[]),N=(0,K.useMemo)(()=>({returnFocusRef:e})=>{o||x||(y(!0),c(e))},[x,c,o]),T=(0,kS.FR)((0,kS.MS)(kS.cA),(0,kS.MS)(LN,{coordinateGetter:k,onActivation:N}));return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(Lj,{isOpen:g,onClose:b}),(0,F.jsx)(kS.Mp,{collisionDetection:Lb,modifiers:LS,sensors:T,onDragStart:v,onDragMove:w,onDragOver:w,onDragEnd:C,onDragCancel:j,accessibility:(0,K.useMemo)(()=>({container:S,announcements:{onDragStart:LT,onDragOver:LT,onDragMove:LT,onDragEnd:LT,onDragCancel:LT}}),[S]),children:(0,F.jsx)(kS.gB,{items:t,strategy:kS._G,children:(0,F.jsx)(Lg.Provider,{value:(0,K.useMemo)(()=>({dropSide:m,overId:h,moveToPosition:I}),[m,h,I]),children:r})})})]})};try{LA.displayName||(LA.displayName="VerticalSortableContext")}catch{}let LR={heading:"column-list-nav-module__heading--mX7KT",drag:"column-list-nav-module__drag--dmJmk",showSashAfter:"column-list-nav-module__showSashAfter--RHY35",grabber:"column-list-nav-module__grabber--el6ki",icon:"column-list-nav-module__icon--NwQgO",showSashBefore:"column-list-nav-module__showSashBefore--ecwlS",leadingVisual:"column-list-nav-module__leadingVisual--1qHse"};function LP({columns:e,...t}){let a=(0,K.useMemo)(()=>e.filter(e=>MI(e)).sort(rx),[e]),r=(0,K.useMemo)(()=>a.map(e=>e.databaseId),[a]),n=(0,K.useCallback)(({dragMetadata:a,dropMetadata:r,side:n})=>{let i=-1;if(r)i=r.id;else{let t=e.at(-1);if(!t)return;i=t.databaseId}let l=i;if(n===wV.BEFORE){let t=e.findIndex(({databaseId:e})=>e===i),a=e[t-1];l=a?a.databaseId:null}(!l||e.findIndex(({databaseId:e})=>e===l)+1!==e.findIndex(({databaseId:e})=>e===a.id))&&t.onReorderColumnCallback?.(a.id,l)},[e,t]);return(0,F.jsx)(LA,{onDrop:n,itemIds:r,children:(0,F.jsx)(LE,{columns:a,...t})})}let LD=(0,Z.Ay)(lx.A).withConfig({displayName:"column-list-nav__BoxFeedbackCommitState",componentId:"sc-e1d6ee27-0"})(["&.reorder-commit-state-feedback{opacity:0;}&.reorder-commit-state-feedback.enter{opacity:1;}&.reorder-commit-state-feedback.enter-done{opacity:0;transition:opacity ","ms;}"],1e3);function LE({columns:e,reorderCommitState:t,addNewAnchorRef:a,onNewField:r,onFieldNavCallback:n}){let i=(0,K.useRef)(null),{getDropSide:l}=Ly();return(0,F.jsxs)(ys.c.Group,{sx:{position:"relative",minWidth:220},...(0,ey.G)("project-column-settings-list"),children:[(0,F.jsxs)(ys.c.GroupHeading,{as:"h2",className:LR.heading,children:[(0,F.jsx)("span",{children:"Custom fields"}),(0,F.jsx)(p4.Q,{variant:"invisible",size:"small",leadingVisual:ly.PlusIcon,ref:a,onClick:r,children:"New Field"})]}),(0,K.useMemo)(()=>e.map(e=>(0,F.jsx)(LM,{column:e,dropSide:l(e.databaseId),onLinkClick:t=>{n&&n(e.id,t)}},e.id)),[e,l,n]),(0,F.jsx)(Lf.A,{in:"success"===t,nodeRef:i,timeout:1e3,className:"reorder-commit-state-feedback",children:(0,F.jsxs)(LD,{as:"li","aria-live":"polite",ref:i,sx:{color:"success.fg",textAlign:"right",p:1,mx:2,userSelect:"none"},children:[(0,F.jsx)(lv.A,{sx:{color:"inherit",px:1},children:(0,F.jsx)(ly.CheckIcon,{})}),"Saved"]})})]})}function LM({column:e,dropSide:t,onLinkClick:a}){let r=(0,K.useMemo)(()=>({id:e.databaseId}),[e.databaseId]),n=mK(),i=IS(e.dataType),{setNodeRef:l,setActivatorNodeRef:s,listeners:o}=(0,kS.gl)({id:e.databaseId,data:{metadata:r}}),d=(0,vB.$)(LR.drag,{[LR.showSashBefore]:"before"===t,[LR.showSashAfter]:"after"===t}),u=!!Mj(e);return(0,F.jsxs)(yd,{to:{pathname:lr.generatePath({...n,fieldId:encodeURIComponent(e.id)})},onClick:a,...(0,ey.G)(`ColumnSettingsItem{id: ${e.name}}`),ref:l,className:d,children:[(0,F.jsxs)(ys.c.LeadingVisual,{...(0,ey.G)(`ColumnSettingsItemIcon{id: ${e.name}}`),className:LR.leadingVisual,children:[(0,F.jsx)("span",{className:LR.grabber,ref:s,...o,children:(0,F.jsx)(ly.GrabberIcon,{})}),(0,F.jsx)("span",{className:LR.icon,children:(0,F.jsx)(i,{})})]}),e.name,u&&(0,F.jsx)(ys.c.TrailingVisual,{...(0,ey.G)(`ColumnSettingsItemBadge{id: ${e.name}}`),children:(0,F.jsx)(bD.A,{variant:"attention",children:"Action required"})})]})}try{LP.displayName||(LP.displayName="ReorderableColumnListNav")}catch{}try{LD.displayName||(LD.displayName="BoxFeedbackCommitState")}catch{}try{LE.displayName||(LE.displayName="ColumnListNav")}catch{}try{LM.displayName||(LM.displayName="ColumnListItem")}catch{}try{(I=Icon).displayName||(I.displayName="Icon")}catch{}let LB=(0,K.memo)(function(){let{addToast:e}=lV(),{allColumns:t,setAllColumns:a}=i5(),{hasAdminPermissions:r}=eK(),{postStats:n}=iN(),[i,l]=(0,K.useState)(!1),[s,o]=(0,K.useState)("idle"),d=(0,K.useRef)(null),u=c$(),c=(0,K.useCallback)(()=>l(e=>!e),[]),m=(0,K.useCallback)(async(r,i)=>{o("saving");try{await Cf({memexProjectColumnId:r,previousMemexProjectColumnId:i})}catch{e({message:"Reorder couldn't be saved",type:"error"}),o("error");return}o("success");let l=t.findIndex(({databaseId:e})=>e===r),s=t[l];if(!s)return;let d=[...t.slice(0,l),...t.slice(l+1)],u=d.findIndex(({databaseId:e})=>e===i);u=u>-1?u:d.length-1;let c=[...d.slice(0,u+1),s,...d.slice(u+1)],m=1;for(let e of c)e.position=m,m+=1;a(c),n({name:"settings_field_reorder",ui:"settings",memexProjectColumnId:r,context:`previousColumnId: ${i}`})},[t,a,n,e,o]),p=(0,K.useCallback)((e,t)=>{n({name:"settings_field",ui:ta,memexProjectColumnId:e,context:`${t.type}: ${t.currentTarget.tagName}`})},[n]),h=mK();return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsxs)(ys.c,{...(0,ey.G)("settings-side-nav"),"aria-label":"Settings",children:[(0,F.jsxs)(yd,{end:!0,to:la.generatePath(h),...(0,ey.G)("general-settings-item"),onClick:e=>{n({name:"settings_open",ui:ta,context:`${e.type}: ${e.currentTarget.tagName}`})},children:[(0,F.jsx)(ys.c.LeadingVisual,{children:(0,F.jsx)(ly.GearIcon,{})}),"Project settings"]}),r&&(0,F.jsxs)(yd,{to:ln.generatePath(h),...(0,ey.G)("manage-access-item"),children:[(0,F.jsx)(ys.c.LeadingVisual,{children:(0,F.jsx)(ly.PeopleIcon,{})}),"Manage access"]}),(0,F.jsx)(LP,{columns:t,reorderCommitState:s,addNewAnchorRef:d,onNewField:c,onReorderColumnCallback:m,onFieldNavCallback:p})]}),(0,F.jsx)(Lh,{isOpen:i,setOpen:l,anchorRef:d,onSave:(0,K.useCallback)(e=>{u(lr.generatePath({...h,fieldId:e.id}))},[u,h])},t.length)]})});try{LB.displayName||(LB.displayName="ReorderableSettingsSideNav")}catch{}let LL=()=>(0,F.jsxs)(mU.M,{containerWidth:"full",sx:{height:"100%",padding:0,m:0,[`& > ${lx.A}`]:{minHeight:"100%"}},children:[(0,F.jsx)(mU.M.Pane,{position:"start",sx:{padding:[3,null,null,4],borderRight:"1px solid",borderColor:"border.subtle"},children:(0,F.jsx)(LB,{})}),(0,F.jsx)(mU.M.Content,{width:"large",sx:{padding:[3,null,null,4]},children:(0,F.jsx)(Li.t,{fallback:(0,F.jsx)(Lo,{}),children:(0,F.jsx)(J.sv,{})})})]});try{LL.displayName||(LL.displayName="SettingsView")}catch{}function LF(){return mL(),(0,F.jsx)(mF,{...(0,ey.G)("settings-page"),children:(0,F.jsx)(LL,{})})}try{LF.displayName||(LF.displayName="SettingsPage")}catch{}async function LO(){let e=nP("memex-without-limits-beta-signup-api-data"),{data:t}=await ix(e.url,{method:"POST"});return t}async function LG(e){let t=nP("memex-dismiss-notice-api-data");try{let{ok:a}=await ix(t.url,{method:"POST",body:e});return{success:a}}catch{return{success:!1}}}function LV(e){return e.name.toLocaleLowerCase().trim()}function L$(e){return rA(e.dataType)}let LW=()=>{let{orderedTokenizedFilters:e}=lh(),{allColumns:t}=i5();return{getGroupByFieldOptions:(0,K.useCallback)((a,r)=>{let n=e.reduce((e,r)=>{if(a&&"field"===r.type&&t.find(e=>e.name.toLowerCase()===nc(r.field))===a)for(let t of no(r.value.toLowerCase()))e[r.exclude?"exclude":"include"].add(t);return e},{include:new Set,exclude:new Set}),i=r(a,{includeAllCompletedIterations:oZ(a)&&n.include.size+n.exclude.size>0});return function(e,t,{include:a,exclude:r}){return t.reduce((t,n)=>{let i={...n,nameHtml:pO(n.nameHtml)};if(o0(e)){let e=LV(n),l=0===a.size||rW(Array.from(a),e),s=rW(Array.from(r),e);l&&!s&&t.push(i)}else if(oZ(e)){let l=o4(n.groupMetadata)?n.groupMetadata:void 0,s=0===a.size||r5(Array.from(a),e,!1,l?.id),o=r5(Array.from(r),e,!1,l?.id);s&&!o&&t.push(i)}return t},[])}(a,i,n)},[e,t])}},Lz=()=>{let{groupedByColumnId:e}=ue(),{allColumns:t}=i5(),a=t.find(t=>t.id===e),r=(0,U.jE)(),{memex_table_without_limits:n}=iz(),{queriesForGroups:i}=n?ul():{queriesForGroups:[]},l=n?(0,K.useCallback)(e=>dd(r,e),[r]):void 0,{getGroupByFieldOptions:s}=LW();return(0,K.useMemo)(()=>{let t;return a&&n?t=LH(a,i):a&&(t=s(a,dt)),{groupByFieldOptions:t,groupedByColumnId:e,getServerGroupIdForVerticalGroupId:l}},[s,l,a,e,i,n])},LH=(e,t)=>t.flatMap(e=>e.data?.groups??[]).map(t=>{let a=t.groupValue===sn,r=a?`No ${e.name}`:t.groupValue,n=o5(t.groupMetadata)?t.groupMetadata:void 0;return{id:a?o2:t.groupId,name:r,nameHtml:r,groupMetadata:n}}),LU='#__primerPortalRoot__, [id$="-portal-root"], [id^="__omnibarPortalRoot__"]';function Lq(){let e=[...document.querySelectorAll(LU)],t=e.some(e=>e.childNodes.length>0);return e&&t}function LK(e){return!!e&&null!==e.closest(LU)}function LQ(e,t){return e&&t?{type:"SET_DROP_TARGET",dragID:e,side:t}:{type:"SET_DROP_TARGET",dragID:null,side:null}}function LJ(e,t){return{type:"BEGIN_AWAITING_DROP",dropID:e,dropType:t}}function LX(e,t){let a=function(e,t){switch(t.type){case"BEGIN_AWAITING_DRAG":return{...e,isDragging:!1,isAwaitingDrag:!0,dragID:t.dragID,dragAxis:t.dragAxis,dragOffset:t.dragOffset,dragType:t.dragType,dragOrigin:t.dragOrigin};case"BEGIN_DRAG":return{...e,isDragging:!0,isAwaitingDrag:!1};case"STOP_DRAG":return{...e,isDragging:!1,isAwaitingDrag:!1,dragID:null,dragType:null,dropID:null,dropType:null};case"BEGIN_AWAITING_DROP":return{...e,dropID:t.dropID,dropType:t.dropType};case"STOP_AWAITING_DROP":return{...e,dropID:null,dropType:null};case"SET_DROP_TARGET":return{...e,dropTarget:t.dragID,dropSide:t.side}}}(e,t);return(0,ut.A)(e,a)?e:a}let LY="data-dnd-drag-id",LZ="data-dnd-drag-type",L0="data-dnd-drop-type";function L1(e,t,a=!1){return[...a?["fixed-sash"]:[],"show-sash",`show-sash-${e}`,`show-sash-${t}`]}function L2(e,t,a){requestAnimationFrame(()=>{L5(),e&&t&&e.classList.add(...L1(t,a))})}function L5(){for(let e of document.querySelectorAll(".show-sash:not(.fixed-sash)"))e.classList.remove("show-sash","show-sash-after","show-sash-before","show-sash-card","show-sash-column","show-sash-view")}function L3(e){let t=e.dropZone.getBoundingClientRect();return function e(t,a,r=10,n=0){let i;let{point:l,dropType:s,dragAxis:o}=t,d="horizontal"===o?{...l,x:l.x+n}:{...l,y:l.y+n},u=a.top<d.y&&a.right>d.x&&a.bottom>d.y&&a.left<d.x;if(!u&&r<0)return null;if(!u)return e(t,a,-r,0);if("horizontal"===o){let e=a.top+a.height/2;i=document.elementFromPoint(d.x,e)}else{let e=a.left+a.width/2;i=document.elementFromPoint(e,d.y)}let c=i?.closest(`[${LZ}=${s}]`)??null;if(!c)return e(t,a,r,n+r);let m=c.getBoundingClientRect();return[c,"horizontal"===o&&l.x>m.left+m.width/2||"horizontal"!==o&&l.y>m.top+m.height/2?"after":"before"]}(e,t)}let L4=(0,K.createContext)(null),L6=(0,K.createContext)(null),L8=(0,K.createContext)({isDragging:!1,dragType:null}),L7=(0,K.createContext)(null);function L9(e){let[t,a]=(0,K.useReducer)(LX,{isDragging:!1,isAwaitingDrag:!1,dragID:null,dragAxis:null,dragOffset:null,dragType:null,dragOrigin:null,dropID:null,dropType:null,dropTarget:null,dropSide:null}),r=(0,K.useRef)({onDragStart:null,onDragEnd:null}),n=(0,K.useRef)(t),i=(0,K.useMemo)(()=>new Map,[]),l=(0,K.useMemo)(()=>new Map,[]),s=(0,K.useRef)(null),{onDragStart:o,onDragEnd:d}=r.current,u=(0,K.useCallback)(()=>{a({type:"STOP_DRAG"}),d&&d();let e=s.current?.element;e&&e.remove(),requestAnimationFrame(()=>{L5()})},[d]),c=(0,K.useCallback)(()=>{a({type:"BEGIN_DRAG"}),o&&o(),removeEventListener("mousemove",c)},[o]),m=(0,K.useCallback)(e=>{let a=s.current;a&&requestAnimationFrame(()=>{t.dragAxis&&"vertical"!==t.dragAxis||(a.element.style.top=`${e.clientY-(t.dragOffset?.y??0)}px`),t.dragAxis&&"horizontal"!==t.dragAxis||(a.element.style.left=`${e.clientX-(t.dragOffset?.x??0)}px`)})},[t.dragAxis,t.dragOffset?.x,t.dragOffset?.y]),p=(0,K.useCallback)(e=>{0===e.button&&u()},[u]);Lx("is-dragging",t.isDragging),(0,K.useEffect)(()=>{n.current=t},[t]),(0,K.useEffect)(()=>(t.isAwaitingDrag?(window.addEventListener("mousemove",c),window.addEventListener("mouseup",u)):(window.removeEventListener("mousemove",c),window.removeEventListener("mouseup",u)),()=>{window.removeEventListener("mousemove",c),window.removeEventListener("mouseup",u)}),[c,u,t.isAwaitingDrag]),(0,K.useEffect)(()=>(t.isDragging&&(window.addEventListener("mousedown",u),window.addEventListener("mousemove",m),window.addEventListener("mouseup",p)),()=>{window.removeEventListener("mousedown",u),window.removeEventListener("mousemove",m),window.removeEventListener("mouseup",p)}),[u,m,p,t.isDragging]);let h=(0,K.useMemo)(()=>({state:t,stateRef:n,dispatch:a,dragRef:s,dropMap:i,metaMap:l,eventHandlersRef:r}),[i,l,t]),f=(0,K.useMemo)(()=>({stateRef:n,dispatch:a,dragRef:s,dropMap:i,metaMap:l,eventHandlersRef:r}),[i,l]),g=(0,K.useMemo)(()=>({isDragging:t.isDragging,dragType:t.isDragging?t.dragType:null}),[t.dragType,t.isDragging]);return(0,F.jsx)(L4.Provider,{value:h,children:(0,F.jsx)(L6.Provider,{value:f,children:(0,F.jsx)(L8.Provider,{value:g,children:(0,F.jsx)(L7.Provider,{value:t.dropID,children:e.children})})})})}try{L4.displayName||(L4.displayName="Context")}catch{}try{L6.displayName||(L6.displayName="StatelessContext")}catch{}try{L8.displayName||(L8.displayName="IsDraggingContext")}catch{}try{L7.displayName||(L7.displayName="DropIDContext")}catch{}try{L9.displayName||(L9.displayName="DragDropWithIdsContext")}catch{}function Fe(e){let t=function(e){let{dispatch:t,dragRef:a,eventHandlersRef:r}=Fa(),n=(0,K.useCallback)(n=>{var i,l,s;let o=n.nativeEvent.target?.nodeName;if(0!==n.nativeEvent.button||"INPUT"===o||"TEXTAREA"===o||n.defaultPrevented)return;let d=document.activeElement?.nodeName;if("INPUT"!==d&&"TEXTAREA"!==d&&n.preventDefault(),e.dragRef.current&&"card"===e.dragType){let t=e.dragRef.current.getBoundingClientRect(),r=e.dragRef.current.cloneNode(!0);r.style.position="fixed",r.style.top=`${t.top}px`,r.style.left=`${t.left}px`,r.style.opacity="0.5",r.style.display="none",r.style.zIndex="11",r.style.width=`${t.width}px`,r.style.height=`${t.height}px`,r.style.pointerEvents="none",requestAnimationFrame(()=>{let t=e.dragRef.current?.parentElement;t&&t.appendChild(r)}),a.current={element:r,rect:t}}else a.current=null;let u={x:n.clientX-(a.current?.rect.left??0),y:n.clientY-(a.current?.rect.top??0)};r.current={...r.current,onDragStart:e.onDragStart??null,onDragEnd:e.onDragEnd??null},t((i=e.dragID,l=e.dragType,s=e.dragOrigin,{type:"BEGIN_AWAITING_DRAG",dragID:i,dragType:l,dragOffset:u,dragAxis:e.dragAxis??null,dragOrigin:s??null}))},[t,a,r,e.dragAxis,e.dragID,e.dragOrigin,e.dragRef,e.dragType,e.onDragEnd,e.onDragStart]);return{props:e.disable?{}:{onMouseDown:n}}}(e),{metaMap:a}=Fa(),{dragType:r,dragID:n,metadata:i}=e;return(0,K.useEffect)(()=>((function(e,t,a,r){let n=e.get(t);n?n.set(a,r):e.set(t,new Map([[a,r]]))})(a,r,n,i),()=>{(function(e,t,a){let r=e.get(t);r&&(r.delete(a),0===r.size&&e.delete(t))})(a,r,n)}),[n,r,a,i]),{handle:t,props:{[LY]:e.dragID,[LZ]:e.dragType,"data-dnd-drag-index":e.dragIndex,"data-dnd-drag-transform-disable":!!e.disable}}}function Ft(e){let{stateRef:t,dispatch:a,dragRef:r,dropMap:n,metaMap:i}=Fa(),l=(0,K.useRef)(null);(0,K.useEffect)(()=>(n.set(e.dropID,[e.dropType,e.dropRef]),()=>{n.delete(e.dropID)}),[n,e.dropID,e.dropRef,e.dropType]);let{onDragOver:s,disableSash:o}=e,d=(0,K.useCallback)(n=>{let{dragType:i,dragAxis:d,dropID:u}=t.current;u||e.dropType!==t.current.dropType||requestAnimationFrame(()=>{L5()});let c={x:n.clientX,y:n.clientY};if(l.current=c,i===e.dropType){u!==e.dropID&&a(LJ(e.dropID,e.dropType)),s&&s();let t=L3({dropZone:n.currentTarget,point:c,dropType:e.dropType,dragAxis:d});if(!t){a(LQ(null));return}a(LQ(t[0].getAttribute(LY),t[1])),o||L2(t[0],t[1],e.dropType),r.current&&(r.current.element.style.display="block")}},[t,e.dropType,e.dropID,s,a,o,r]),{onDrop:u}=e,c=(0,K.useCallback)(()=>{let a=t.current;if(a.isDragging&&a.dropID===e.dropID&&a.dropType===e.dropType&&a.dragType===e.dropType&&u){let e=Fr(i,a.dragType,a.dragID);if(!e)throw Error(`No metadata found for ${a.dragType} ${a.dragID}`);let t=Fr(i,a.dropType,a.dropTarget)??null;u({state:a,dragMetadata:e,dropMetadata:t,side:a.dropSide})}},[i,u,e.dropID,e.dropType,t]),m=(0,K.useCallback)(r=>{let n=l.current;if(!n)return;let{dragType:i,dragAxis:s,dropID:d}=t.current;if(i===e.dropType){d!==e.dropID&&a(LJ(e.dropID,e.dropType));let t=L3({dropZone:r.currentTarget,point:n,dropType:e.dropType,dragAxis:s});if(!t||o)return;L2(t[0],t[1],e.dropType)}},[o,a,e.dropID,e.dropType,t]);return{props:{onMouseMove:d,onMouseUp:c,onMouseLeave:(0,K.useCallback)(()=>{let{dropID:r}=t.current;r===e.dropID&&(l.current=null,a({type:"STOP_AWAITING_DROP"}))},[a,e.dropID,t]),onScroll:m,"data-dnd-drop-id":e.dropID,[L0]:e.dropType}}}function Fa(){let e=(0,K.useContext)(L6);if(null==e)throw Error("useStatelessDragDrop must be used within a DragDropContext");return e}function Fr(e,t,a){return e.get(t)?.get(a)??null}var Fn=a(74022);function Fi(e){let t=(0,K.useRef)(null),a=(0,K.useRef)(null),r=(0,K.useRef)(null),n=(0,K.useRef)({x:e.bufferX??[0,0],y:e.bufferY??[0,0]}),i="x"===e.axis,l="y"===e.axis,s=(0,K.useRef)(null),o=e.maxBufferX??300,d=e.maxBufferY??200,u=e.deadZoneRatioX??.1,c=e.deadZoneRatioY??.1,m=(0,K.useMemo)(()=>(0,Fn.A)(()=>{let t=e.scrollRef?.current;if(!t)return;let a=t.getBoundingClientRect(),r=Math.min(a.width/2-a.width*u/2,o),i=Math.min(a.height/2-a.height*c/2,d);n.current={x:e.bufferX??[r,r],y:e.bufferY??[i,i]}},50),[e.scrollRef,e.bufferX,e.bufferY,u,o,c,d]);(0,K.useEffect)(()=>((void 0===e.bufferX||void 0===e.bufferY)&&(m(),window.addEventListener("resize",m)),()=>{window.removeEventListener("resize",m)}),[e.bufferX,e.bufferY,m]),(0,K.useEffect)(()=>{(void 0!==e.bufferX||void 0!==e.bufferY)&&(n.current={x:e.bufferX??[0,0],y:e.bufferY??[0,0]})},[e.bufferX,e.bufferY]);let p=(0,K.useCallback)(()=>{t.current&&cancelAnimationFrame(t.current),t.current=null,a.current=null,r.current=null},[]),h=(0,K.useCallback)(()=>{let n=e.scrollRef?.current;n&&(a.current&&!i&&(n.scrollTop+=a.current*e.strength),r.current&&!l&&(n.scrollLeft+=r.current*e.strength),t.current=requestAnimationFrame(h))},[i,l,e.scrollRef,e.strength]),f=(0,K.useCallback)(e=>{t.current&&0===e.button&&(p(),s.current=null)},[p]),g=(0,K.useCallback)(e=>{0===e.button&&(s.current={x:e.clientX,y:e.clientY})},[s]),y=(0,K.useCallback)(i=>{let l=e.scrollRef?.current,o=e?.mouseMoveThresholdX??15,d=e?.mouseMoveThresholdY??15;if(!e.active||!l||!s.current){p();return}let u=l.getBoundingClientRect();r.current=Fl({mousePos:i.clientX,containerStart:u.left,containerEnd:u.right,ease:e.ease,buffer:n.current.x,mouseOrigin:s.current.x,mouseMoveThreshold:o}),a.current=Fl({mousePos:i.clientY,containerStart:u.top,containerEnd:u.bottom,ease:e.ease,buffer:n.current.y,mouseOrigin:s.current.y,mouseMoveThreshold:d}),null==a.current&&null==r.current&&p(),t.current||h()},[e.active,e.ease,e.scrollRef,p,h,e.mouseMoveThresholdX,e.mouseMoveThresholdY]);(0,K.useEffect)(()=>(window.addEventListener("mousemove",y),window.addEventListener("mouseup",f),window.addEventListener("mousedown",g),()=>{window.removeEventListener("mousemove",y),window.removeEventListener("mouseup",f),window.removeEventListener("mousedown",g)}),[y,f,g])}function Fl({mousePos:e,containerStart:t,containerEnd:a,ease:r,buffer:n,mouseOrigin:i,mouseMoveThreshold:l}){let s=Array.isArray(n)?n[0]:n,o=Array.isArray(n)?n[1]:n,d=t+s,u=a-o;return Math.abs(e-i)<l?null:e<d&&e<i?Fs(-((d-Math.max(e-l,t))/s),r):e>u&&e>i?Fs((Math.min(e-l,a)-u)/o,r):null}function Fs(e,t){return t?e<0?-t(-e):t(e):e}function Fo(e){let t=(0,K.useRef)({horizontalScrollbarSize:null,verticalScrollbarSize:null}),a=(0,K.useCallback)(t=>{let{current:a}=e;if(!a)return()=>void 0;let r=new ResizeObserver(t);return r.observe(a),()=>{r.unobserve(a),r.disconnect()}},[e]);return(0,K.useSyncExternalStore)(a,()=>{let{current:a}=e;if(!a)return t.current;let r={horizontalScrollbarSize:a?a.offsetHeight-a.clientHeight:null,verticalScrollbarSize:a?a.offsetWidth-a.clientWidth:null};return(0,ut.A)(t.current,r)||(t.current=r),t.current})}let Fd=(0,K.createContext)(null),Fu=(0,K.memo)(function({children:e}){let[t,a]=(0,K.useState)(!1),r=(0,K.useMemo)(()=>({showAddFieldModal:t,setShowAddFieldModal:a}),[t]);return(0,F.jsx)(Fd.Provider,{value:r,children:e})});try{Fd.displayName||(Fd.displayName="AddFieldModalContext")}catch{}try{Fu.displayName||(Fu.displayName="AddFieldModalContextProvider")}catch{}let Fc=()=>{let e=(0,K.useContext)(Fd);if(!e)throw Error("useAddFieldModal must be used within a AddFieldModalContextProvider");return e},Fm=(0,K.createContext)(null),Fp=(0,K.memo)(function({children:e}){let t=(0,K.useRef)(null);return(0,F.jsx)(Fm.Provider,{value:(0,K.useMemo)(()=>({anchorRef:t}),[]),children:e})}),Fh=()=>{let e=(0,K.useContext)(Fm);if(!e)throw Error("useViewOptionsMenu must be used within a ViewOptionsMenuRefContextProvider");return e};try{Fm.displayName||(Fm.displayName="ViewOptionsMenuRefContext")}catch{}try{Fp.displayName||(Fp.displayName="ViewOptionsMenuRefContextProvider")}catch{}function Ff(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}let Fg=class Combobox{destroy(){this.clearSelection(),this.stop(),this.input.removeAttribute("role"),this.input.removeAttribute("aria-controls"),this.input.removeAttribute("aria-expanded"),this.input.removeAttribute("aria-autocomplete"),this.input.removeAttribute("aria-haspopup")}start(){this.input.setAttribute("aria-expanded","true"),this.input.addEventListener("compositionstart",this.compositionEventHandler),this.input.addEventListener("compositionend",this.compositionEventHandler),this.input.addEventListener("keydown",this.keyboardEventHandler),this.list.addEventListener("click",Fy),this.resetSelection()}stop(){this.clearSelection(),this.input.setAttribute("aria-expanded","false"),this.input.removeEventListener("compositionstart",this.compositionEventHandler),this.input.removeEventListener("compositionend",this.compositionEventHandler),this.input.removeEventListener("keydown",this.keyboardEventHandler),this.list.removeEventListener("click",Fy)}indicateDefaultOption(){if("active"===this.firstOptionSelectionMode){let e=Array.from(this.list.querySelectorAll('[role="option"]:not([aria-disabled="true"])')).find(Fb);e?.setAttribute("data-combobox-option-default","true")}else"selected"===this.firstOptionSelectionMode&&this.navigate(1)}navigate(e=1){let t=Array.from(this.list.querySelectorAll('[aria-selected="true"]')).find(Fb),a=Array.from(this.list.querySelectorAll('[role="option"]')).filter(Fb),r=a.indexOf(t),n=1===e?0:a.length-1;if(t&&r>=0){let t=r+e;t>=0&&t<a.length&&(n=t)}let i=a[n];if(i)for(let e of a)e.removeAttribute("data-combobox-option-default"),i===e?(this.input.setAttribute("aria-activedescendant",i.id),i.setAttribute("aria-selected","true"),function(e){e.dispatchEvent(new Event("combobox-select",{bubbles:!0}))}(i),i.scrollIntoView(this.scrollIntoViewOptions)):e.removeAttribute("aria-selected")}clearSelection(){for(let e of(this.input.removeAttribute("aria-activedescendant"),this.list.querySelectorAll('[aria-selected="true"], [data-combobox-option-default="true"]')))e.removeAttribute("aria-selected"),e.removeAttribute("data-combobox-option-default")}resetSelection(){this.clearSelection(),this.indicateDefaultOption()}constructor(e,t,{tabInsertsSuggestions:a=!0,firstOptionSelectionMode:r="none",scrollIntoViewOptions:n={block:"nearest",inline:"nearest"}}={}){Ff(this,"input",void 0),Ff(this,"list",void 0),Ff(this,"tabInsertsSuggestions",void 0),Ff(this,"firstOptionSelectionMode",void 0),Ff(this,"scrollIntoViewOptions",void 0),Ff(this,"isComposing",void 0),Ff(this,"ctrlBindings",void 0),Ff(this,"keyboardEventHandler",void 0),Ff(this,"compositionEventHandler",void 0),this.input=e,this.list=t,this.tabInsertsSuggestions=a,this.firstOptionSelectionMode=r,this.scrollIntoViewOptions=n,this.isComposing=!1,t.id||(t.id=`combobox-${Math.random().toString().slice(2,6)}`),this.ctrlBindings=!!navigator.userAgent.match(/Macintosh/),this.keyboardEventHandler=e=>(function(e,t){if(!(e.shiftKey||e.metaKey||e.altKey||!t.ctrlBindings&&e.ctrlKey||(0,rt.U0)()&&229===e.keyCode&&!t.isComposing)&&!t.isComposing)switch(e.key){case"Enter":Fx(t.input,t.list)&&e.preventDefault();break;case"Tab":t.tabInsertsSuggestions&&Fx(t.input,t.list)&&e.preventDefault();break;case"Escape":t.clearSelection();break;case"ArrowDown":t.navigate(1),e.preventDefault();break;case"ArrowUp":t.navigate(-1),e.preventDefault();break;case"n":t.ctrlBindings&&e.ctrlKey&&(t.navigate(1),e.preventDefault());break;case"p":t.ctrlBindings&&e.ctrlKey&&(t.navigate(-1),e.preventDefault());break;default:e.ctrlKey}})(e,this),this.compositionEventHandler=e=>(function(e,t){if(t.isComposing="compositionstart"===e.type,!document.getElementById(t.input.getAttribute("aria-controls")||""))return})(e,this),e.setAttribute("role","combobox"),e.setAttribute("aria-controls",t.id),e.setAttribute("aria-expanded","false"),e.setAttribute("aria-autocomplete","list"),e.setAttribute("aria-haspopup","listbox")}};function Fy(e){let t=e.target.closest('[role="option"]');t&&"true"!==t.getAttribute("aria-disabled")&&function(e,t){e.dispatchEvent(new CustomEvent("combobox-commit",{bubbles:!0,detail:t}))}(t,{event:e})}function Fx(e,t){let a=t.querySelector('[aria-selected="true"], [data-combobox-option-default="true"]');return!!a&&("true"===a.getAttribute("aria-disabled")||(a.click(),!0))}function Fb(e){return!e.hidden&&!(e instanceof HTMLInputElement&&"hidden"===e.type)&&(e.offsetWidth>0||e.offsetHeight>0)}let Fv=(e,t,a)=>{let[r,n]=(0,K.useState)(t);return a&&e in a?[a[e],eC.l,!0]:[r,n,!1]},Fw=e=>{let[t,a,r]=Fv("isOpen",!1,e),n=(0,K.useRef)(!1),i=r?eC.l:()=>{a(!0)},l=r?eC.l:()=>{!1===n.current&&a(!1)},s=(0,K.useCallback)(()=>r?eC.l:()=>{n.current=!1},[r]);return{isOpen:t,setIsOpen:a,itemOnMouseDown:r?eC.l:()=>{n.current=!0},inputOnBlur:l,inputOnFocus:i,onResetListInteraction:s}},Fj=1,FC=(e,t,a,r)=>{if(a?.[r]){let t=a[r];"function"==typeof t&&t(e)}t(e)},FI=(e,t)=>{let[a,r]=Fv("inputValue","",e),{isOpen:n,setIsOpen:i,inputOnBlur:l,inputOnFocus:s,itemOnMouseDown:o,onResetListInteraction:d}=Fw(e),u=(0,K.useRef)(null),c=(0,K.useRef)(e.items),m=(0,K.useRef)(void 0),p=(0,K.useRef)(e.onSelectedItemChange),h=(0,K.useRef)(Fj++),f=(0,K.useRef)(`combobox-input-${h.current}`),g=(0,K.useRef)(`combobox-list-${h.current}`),y=function(e){let t=(0,K.useRef)(null);return e??t}(t);c.current!==e.items&&(c.current=e.items),p.current!==e.onSelectedItemChange&&(p.current=e.onSelectedItemChange);let x=(0,K.useCallback)(e=>{if(c.current){let t=c.current[e];t&&p.current(t),d(),y.current&&y.current.focus(),i(!1)}},[d,i,y]),b=(0,K.useCallback)(e=>{let t=e.target.getAttribute("data-list-index");t&&x(parseInt(t))},[x]),v=(0,nk.M)(b);(0,K.useEffect)(()=>{let e=u.current,t=y.current;if(t&&e&&!m.current){m.current=new Fg(t,e,{firstOptionSelectionMode:"selected",tabInsertsSuggestions:!1});let a=e=>{v.current(e)};return e.addEventListener("combobox-commit",a),function(){m.current?.destroy(),m.current=void 0,e.removeEventListener("combobox-commit",a)}}},[n,y,u,v]),(0,K.useEffect)(()=>{n?m.current?.start():m.current?.stop()},[n]);let w=e=>{r(e.target.value),n||i(!0)};return{inputValue:a,setInputValue:r,getInputProps:e=>({ref:y,id:f.current,type:"text",value:a,onFocus:t=>{FC(t,s,e,"onFocus")},onBlur:t=>{FC(t,l,e,"onBlur")},onChange:t=>{FC(t,w,e,"onChange")}}),getListProps:()=>({ref:u,id:g.current}),getItemProps:(e,t,a)=>({role:"option",id:`combobox-${h.current}-item-${t}`,"data-list-index":t,onMouseDown:e=>{FC(e,o,a,"onMouseDown")}}),isOpen:n,selectFirstItem:()=>{y.current&&u.current&&(m.current?.clearSelection(),m.current?.navigate(1))}}},FS={pickerItem:"picker-list-module__pickerItem--qV3pO",blueActiveIndicator:"picker-list-module__blueActiveIndicator--sZoTB"};function Fk(e,t,a,r,n){let[i,l]=(0,K.useState)("left"),[s,o]=(0,K.useState)("top"),d=(0,K.useCallback)(()=>{if(!e?.current||!t.current)return;let{top:a,left:r,xAlign:d,yAlign:u,hasContentDimensions:c}=fs({originRef:e,contentRef:t,alignment:{xAlign:n?.xAlign??i,yAlign:n?.yAlign??s,yTopOffset:0}});t.current.style.top=`${a}px`,t.current.style.left=`${r}px`,!i&&c&&l(d),!s&&c&&o(u)},[e,t,i,s,n]);return(0,pk.N)(()=>{a||(l(void 0),o(void 0)),d();let e=new ResizeObserver(d);return e.observe(document.documentElement),()=>{e.unobserve(document.documentElement),e.disconnect()}},[d,a,...r]),{adjustPickerPosition:d}}let FN=(0,K.forwardRef)((e,t)=>(0,F.jsx)(lx.A,{as:"ul",role:"listbox",ref:t,...e,sx:{width:`calc(100vw - ${e.offsetX??52}px)`,maxHeight:`calc(100vh - ${e.offsetY??60}px)`,overflowY:"auto",p:0,m:0,listStyle:"none",bg:"canvas.default",border:"1px solid",borderColor:"border.default",borderRadius:2,boxShadow:"shadow.medium",position:"absolute",zIndex:100,fontSize:"12px","@media (min-width: 544px)":{width:"auto",minWidth:"400px"},...e.sx},children:e.children}));FN.displayName="PickerList";let FT=(0,K.forwardRef)((e,t)=>{let a=(0,fK.G7)("primer_react_select_panel_with_modern_action_list");return(0,F.jsx)("li",{ref:t,...e,className:(0,vB.A)(FS.pickerItem,{[FS.blueActiveIndicator]:a}),children:e.children})});FT.displayName="PickerItem";let F_=(0,F.jsxs)(F.Fragment,{children:["You can use ",(0,F.jsx)(kj.U,{format:"full",keys:"Control+Space"})," to add an item"]}),FA=({focusedPlaceholder:e,inputHasFocus:t,unfocusedPlaceholder:a,value:r,descriptionId:n})=>""===r&&(t||a)?(0,F.jsx)(lx.A,{sx:{position:"absolute",height:"100%",display:"flex",alignItems:"center",paddingLeft:"20px",pointerEvents:"none"},children:(0,F.jsxs)(lv.A,{sx:{fontSize:1,color:"fg.muted"},children:[!t&&(0,F.jsx)("span",{"aria-hidden":!0,children:a}),(0,F.jsx)("span",{id:n,hidden:!t,children:e})]})}):null;try{F_.displayName||(F_.displayName="DefaultOmnibarPlaceholder")}catch{}try{FA.displayName||(FA.displayName="OmnibarPlaceholder")}catch{}let FR={position:"relative",width:"100%",cursor:"text",display:"flex"},FP=({inputRef:e,renderInput:t,newItemAttributes:a,omnibarText:r,setOmnibarText:n,defaultPlaceholder:i,isDisabled:l,createDraft:s,isFocused:o,omnibarMenu:d,setOmnibarMenu:u})=>{(0,K.useEffect)(()=>{e.current&&o&&e.current?.focus()},[e,o]);let[c,m]=function(){let[e,t]=(0,K.useState)({current:null}),a=(0,K.useCallback)(a=>{e.current!==a&&t({current:a})},[e]);return[e,a]}(),p=mT(),{navigationDispatch:h}=cN(),f=(0,K.useMemo)(()=>{let e={primary:"Enter",secondary:`${(0,rt.U0)()?"\u2318":"Ctrl"}+Enter`},t=[],a=[],{memex_omnibar_prioritize_create_issue:n}=eP(),i={icon:ly.IssueOpenedIcon,title:"Create new issue",action:"createIssue",shortcutContent:(0,F.jsx)(kj.U,{keys:n?e.primary:e.secondary})},l={icon:ly.IssueDraftIcon,title:"Create a draft",action:"createDraft",shortcutContent:(0,F.jsx)(kj.U,{keys:n?e.secondary:e.primary})};return r.trim().length>0&&a.push(l),p&&a.push(i),n&&a.reverse(),t.push(a),t.push([{icon:ly.RepoIcon,title:"Add item from repository",action:"openSidePanel"}]),t},[p,r]),g=function(e){let t=(0,K.useRef)({top:0,left:0});return(0,K.useSyncExternalStore)(FE,()=>{let a=t.current;if(e.current){let{top:r,left:n}=e.current.getBoundingClientRect();(r!==a.top||n!==a.left)&&(t.current={top:r,left:n})}return t.current})}(e),y=(0,K.useCallback)(e=>{let t=e.target.value;n(t),t.startsWith("#")?u("repos"):""===t.trim()?u(null):u("discovery")},[n,u]),x=(0,K.useCallback)(()=>{iB(r)?s(r):p&&(u(null),n(""),p.start({issueTitle:r},a,e,e=>{e?.cancelled?n(r):requestAnimationFrame(()=>{h(u2({x:u8.Second,y:u8.Last,focusType:u6.Focus}))})}))},[e,a,r,p,n,h,u,s]),{openPaneBulkAdd:b}=c7(),v=(0,K.useCallback)(async e=>{if(e)switch(e.action){case"createDraft":n(""),await s(r);break;case"createIssue":n(""),x();break;case"openSidePanel":b("omnibar_discovery_suggestions_ui",void 0,"Add item from repository"!==e.title?e.title:void 0,a)}},[b,a,r,n,s,x]),{getInputProps:w,getListProps:j,getItemProps:C}=FI({items:f.flat(),onSelectedItemChange:v,isOpen:"discovery"===d},e),I=async e=>{let{memex_omnibar_prioritize_create_issue:t}=eP();switch(e.key){case"Enter":((0,rt.U0)()?e.metaKey:e.ctrlKey)?t?s(r):x():null===d&&(t?x():s(r));break;case"Tab":!e.shiftKey&&r.trim().length>0&&(e.preventDefault(),n(""),await s(r,{shouldFocusInput:!1}),requestAnimationFrame(()=>{h(u2({x:u8.Second,y:u8.Last,focusType:u6.Focus}))}));break;case"Escape":"discovery"===d&&(u(null),e.stopPropagation());break;case"ArrowDown":case"ArrowUp":"discovery"===d&&e.stopPropagation()}},S=(0,xJ._)(I),k=(0,K.useId)(),N=l?(0,F.jsx)(NO,{"aria-disabled":"true",sx:{cursor:"not-allowed",pl:"20px"},children:i}):t({...w({onChange:y}),fontSize:1,pl:"12px",lineHeight:1.5,"aria-label":nH.newItemPlaceholderAriaLabel,"aria-describedby":k,autoComplete:"off",value:r,...S});return(0,F.jsxs)(lx.A,{sx:FR,ref:m,children:[(0,F.jsx)(FA,{focusedPlaceholder:nH.newItemPlaceholder,inputHasFocus:!!o,value:r,descriptionId:k,unfocusedPlaceholder:i}),N,(0,F.jsx)(FD,{...j(),containerRef:c,groupedItems:f,getItemProps:C,itemOnMouseDown:e=>{v(e)},coordinates:g,isOpen:"discovery"===d})]})},FD=(0,K.forwardRef)(({groupedItems:e,getItemProps:t,itemOnMouseDown:a,containerRef:r,coordinates:n,isOpen:i,...l},s)=>{let o=(0,K.useRef)(null);(0,fn.T)(s,o);let{adjustPickerPosition:d}=Fk(r,o,!0,[n,e],{yAlign:"bottom"}),u=0;return(0,F.jsx)(fu,{onMount:d,children:(0,F.jsx)(FN,{...l,...(0,ey.G)("discovery-menu"),ref:o,sx:{display:i?"block":"none",p:[null,0],width:[null,"300px"],maxWidth:[null,"300px"]},"aria-label":"Discovery menu",children:e.map((e,r)=>(0,F.jsxs)(K.Fragment,{children:[e.map((e,r)=>(0,F.jsx)(K.Fragment,{children:(0,F.jsx)(FT,{style:{padding:8},value:e.title,...(0,ey.G)("issue-picker-item"),...t(e,u++,{onMouseDown:()=>a(e)}),children:(0,F.jsxs)(lx.A,{sx:{justifyContent:"space-between",overflow:"hidden",flex:1,display:"flex"},children:[(0,F.jsxs)("span",{children:[(0,F.jsx)(lw.A,{icon:e.icon,sx:{ml:2,color:"fg.muted"}}),(0,F.jsx)(lv.A,{sx:{ml:2,color:"fg.muted",fontSize:1},children:e.title})]}),(0,F.jsx)("span",{style:{display:"flex",alignItems:"center"},children:e.shortcutContent})]})})},r++)),r!==e.length&&(0,F.jsx)(fi.l.Divider,{sx:{margin:0}})]},r++))})})});FD.displayName="DiscoveryMenu";let FE=e=>{let t=new ResizeObserver(()=>requestAnimationFrame(e));return t.observe(document.documentElement),()=>{t.unobserve(document.documentElement),t.disconnect()}};try{FP.displayName||(FP.displayName="DiscoveryInput")}catch{}let FM=({items:e,onSelectedItemChange:t,textExpanderOnChange:a,expansionKey:r="#",...n},i)=>{let{inputOnBlur:l,isOpen:s,setIsOpen:o,itemOnMouseDown:d,onResetListInteraction:u}=Fw(),c=e=>{e.target.value.startsWith(r)?(s||o(!0),a(e.target.value.substr(1))):o(!1)},{getInputProps:m,selectFirstItem:p,inputValue:h,getItemProps:f,...g}=FI({items:e,isOpen:s,onSelectedItemChange:e=>{u(),o(!1),t(e)},...n},i),y=e=>{h.startsWith(r)&&o(!0)};return(0,K.useEffect)(()=>{h.startsWith(r)?o(!0):o(!1)},[h,o,r]),(0,K.useEffect)(()=>{s&&p()},[s,e,p]),{...g,isOpen:s,selectFirstItem:p,getInputProps:e=>m({onChange:t=>{e?.onChange?.(t),c(t)},onBlur:t=>{e?.onBlur?.(t),l(t)},onFocus:t=>{e?.onFocus?.(t),y(t)}}),getItemProps:(e,t,a)=>f(e,t,{...a,onMouseDown:e=>{a&&a.onMouseDown&&a.onMouseDown(e),d()}}),inputValue:h,textExpanderValue:h.startsWith(r)?h.substr(1):""}},FB={bg:e=>`${e.colors.searchKeyword.hl}`,color:"inherit",fontWeight:"bold"},FL=({text:e,chunks:t,...a})=>(0,F.jsx)(lv.A,{...a,children:t.map(t=>{let a=e.substr(t.startIndex,t.endIndex-t.startIndex);return t.highlight?(0,F.jsx)(lx.A,{as:"mark",sx:FB,children:a},t.startIndex.toString()):a})});try{FL.displayName||(FL.displayName="HighlightedText")}catch{}let FF={Box:"repo-list-module__Box--Lb3lV",Text:"repo-list-module__Text--PK2_q"},FO=(0,K.forwardRef)(({isOpen:e,loading:t,repositories:a,getItemProps:r,positionDataMap:n,inputRef:i,...l},s)=>{let o=(0,K.useRef)(null);(0,fn.T)(s,o);let{adjustPickerPosition:d}=Fk(i,o,e,[t],{yAlign:"top"}),u=fl("__omnibarPortalRoot__");return(0,F.jsx)(fu,{id:u,onMount:d,children:(0,F.jsx)(FN,{...l,...(0,ey.G)("repo-searcher-list"),className:`repo-searcher-list omnibar-picker ${e&&(t||a.length)?"visible":"hidden"}`,ref:o,hidden:!e||!t&&!a.length,"aria-label":"Repository suggestions",children:t?(0,F.jsx)("div",{className:FF.Box,children:(0,F.jsx)(pj.A,{size:"medium"})}):a.map((e,t)=>(0,K.createElement)(FG,{...r(e,t),...(0,ey.G)("repo-searcher-item"),positionData:n.get(e),key:e.id,repository:e}))})})});FO.displayName="RepoList";let FG=({repository:e,positionData:t,...a})=>{let{projectOwner:r}=eU(),n=t?.chunks??[],i=e.nameWithOwner.split("/")[0],l=i?.toLowerCase()!==r?.login.toLowerCase()?i:"";return(0,F.jsxs)(FT,{...a,children:[(0,F.jsx)(hV,{repository:e}),(0,F.jsx)("span",{className:FF.Text,children:l?`${l}/`:""}),(0,F.jsx)(FL,{text:e.name,chunks:n})]})};try{FG.displayName||(FG.displayName="RepoItem")}catch{}let FV={BaseCell:"repo-searcher-module__BaseCell--D8MNp",Box:"repo-searcher-module__Box--Gc1CF"},F$=({onRepositorySelected:e,omnibarText:t,setOmnibarText:a,inputRef:r,renderInput:n,defaultPlaceholder:i,isFocused:l,isDisabled:s,groupingMetadata:o,setOmnibarMenu:d})=>{let{suggestRepositories:u}=mk(),[c,m]=(0,K.useState)(!1),[p,h]=(0,K.useState)(),[f,g]=(0,K.useState)(),[y,x]=(0,K.useState)(()=>new WeakMap),b=(0,K.useRef)(void 0),v=(0,K.useRef)(!0),[w,j]=(0,K.useState)(!!l),C=o?.sourceObject.dataType==="issueType"&&"group"===o.sourceObject.kind,I=o?.sourceObject.dataType==="milestone"&&"group"===o.sourceObject.kind?o.value:void 0,S=(0,K.useCallback)(e=>{let t=e.reduce((e,t)=>(e.set(t,{chunks:[{startIndex:0,endIndex:t.name.length,highlight:!1}]}),e),new WeakMap);g(e),x(t),m(!1)},[g,x]),k=(0,K.useCallback)(e=>{a(e.target.value),e.target.value.length||d(null)},[a,d]),N=(0,K.useCallback)(async e=>{let t=e?await hG({query:e,onlyWithIssueTypes:C,milestone:I}):void 0;r.current?.value!=="#"&&S(t?.repositories??p??[])},[S,p,C,I,r]),T=(0,K.useCallback)(e=>{b.current&&b.current.cancel(),b.current=(0,nN.A)(()=>N(e),200),m(!0),b.current()},[b,N,m]),{getInputProps:_,getListProps:A,getItemProps:R,isOpen:P}=FM({textExpanderOnChange:e=>{!e&&p&&S(p),e&&T(e)},items:f||[],onSelectedItemChange:t=>{e(t)},inputValue:t},r),D=(0,K.useCallback)(async e=>{if(e.target instanceof HTMLInputElement||e.target instanceof HTMLInputElement){let t=e.target;switch(e.key){case"Escape":P&&(a(""),d(null),e.stopPropagation());break;case"ArrowLeft":(0!==t.selectionStart||0!==t.selectionEnd)&&(e.nativeEvent.preventFocusChange=!0);break;case"ArrowRight":(t.selectionStart!==t.value.length||t.selectionEnd!==t.value.length)&&(e.nativeEvent.preventFocusChange=!0);break;case"ArrowDown":case"ArrowUp":P&&e.stopPropagation()}}},[P,a,d]),E=(0,xJ._)(D);(0,K.useEffect)(()=>{let e=async()=>{if(void 0===p){m(!0);let e=await u({onlyWithIssueTypes:C,milestone:I});h(e),r.current?.value==="#"&&S(e)}};v.current&&(v.current=!1,e())},[p,h,u,S,C,I,t,r]),(0,K.useEffect)(()=>{r.current&&l&&r.current?.focus()},[r,l]);let M=(0,K.useCallback)(()=>{s||j(!0)},[s]),B=(0,K.useCallback)(()=>{s||j(!1)},[s]),L=(0,K.useId)(),O=s?(0,F.jsx)(NO,{"aria-disabled":"true",className:FV.BaseCell,children:i}):n({..._({onChange:k,onFocus:M,onBlur:B}),pl:"12px",fontSize:1,lineHeight:1.5,"aria-label":nH.newItemPlaceholderAriaLabel,"aria-describedby":L,"aria-keyshortcuts":"Control+Space",autoComplete:"off",value:t,...E});return(0,F.jsxs)("div",{className:FV.Box,children:[(0,F.jsx)(FA,{descriptionId:L,focusedPlaceholder:nH.newItemPlaceholder,inputHasFocus:w,unfocusedPlaceholder:i,value:t}),O,(0,F.jsx)(FO,{...A(),inputRef:r,isOpen:P,loading:c,positionDataMap:y,getItemProps:R,repositories:f||[]})]})};try{F$.displayName||(F$.displayName="RepoSearcher")}catch{}let FW={Box:"selected-repository-pill-module__Box--q1ncB",Text:"selected-repository-pill-module__Text--MNl3S",Text_1:"selected-repository-pill-module__Text_1--egBjz"},Fz=({repository:e})=>(0,F.jsxs)("div",{className:FW.Box,...(0,ey.G)("repo-searcher-selected-repo"),children:[(0,F.jsx)("span",{className:FW.Text,children:"repo:"}),(0,F.jsx)("span",{className:FW.Text_1,children:e.name})]});try{Fz.displayName||(Fz.displayName="SelectedRepositoryPill")}catch{}let FH=({item:e,...t})=>(0,F.jsx)(FT,{...t,children:(0,F.jsxs)(lx.A,{sx:{alignItems:"center",overflow:"hidden",flex:"1",display:"flex"},children:[(0,F.jsx)(lx.A,{sx:{flexShrink:0,mr:2,display:"flex"},children:(0,F.jsx)(pq,{type:e.type,state:e.state,stateReason:e?.stateReason,isDraft:!!e.isDraft})}),(0,F.jsx)("span",{children:e.title}),(0,F.jsx)(lv.A,{sx:{ml:1,color:"fg.muted"},children:`#${e.number}`})]})});try{FH.displayName||(FH.displayName="SuggestedItemOption")}catch{}let FU="add_multiple_items",Fq="create_issue",FK=(0,K.forwardRef)(({loading:e,items:t,getItemProps:a,isOpen:r,itemOnMouseDown:n,containerRef:i,...l},s)=>{let o=(0,K.useRef)(null);(0,fn.T)(s,o);let{items:d}=ug(),{adjustPickerPosition:u}=Fk(i,o,r,[e,t,d],{yAlign:"top"}),{theme:c}=(0,z.DP)(),m=fl("__omnibarPortalRoot__");return(0,F.jsx)(fu,{id:m,onMount:u,children:(0,F.jsx)(FN,{...l,...(0,ey.G)("issue-picker-list"),ref:o,className:`issue-picker-list omnibar-picker ${r&&(e||t.length)?"visible":"hidden"}`,hidden:!r||!e&&!t.length,"aria-label":"Suggestions",children:e?(0,F.jsx)(lx.A,{sx:{justifyContent:"center",my:4,display:"flex"},children:(0,F.jsx)(pj.A,{size:"medium"})}):t.map((e,t)=>e.type===Fq?(0,F.jsx)(FT,{style:{borderTop:"1px solid",borderColor:c?.colors.border.muted},...a(e,t,{onMouseDown:t=>n(t,e)}),...(0,ey.G)("create-new-issue"),children:(0,F.jsxs)(lx.A,{sx:{alignItems:"center",overflow:"hidden",flex:"1",display:"flex"},children:[(0,F.jsx)(lx.A,{sx:{flexShrink:0,mr:2,display:"flex"},children:(0,F.jsx)(lw.A,{icon:ly.PlusCircleIcon,sx:{color:"fg.muted"}})}),(0,F.jsxs)(lv.A,{sx:{flexGrow:1},children:["Create new issue"," ",e.title?(0,F.jsxs)(F.Fragment,{children:['"',(0,F.jsx)(lv.A,{sx:{fontWeight:600},children:e.title}),'"']}):null]})]})},"create"):e.type===FU?(0,F.jsx)(FT,{...a(e,t,{onMouseDown:t=>n(t,e)}),...(0,ey.G)("add-multiple-items"),children:(0,F.jsxs)(lx.A,{sx:{alignItems:"center",overflow:"hidden",flex:"1",display:"flex"},children:[(0,F.jsx)(lx.A,{sx:{flexShrink:0,mr:2,display:"flex"},children:(0,F.jsx)(lw.A,{icon:ly.RepoIcon,sx:{color:"fg.muted"}})}),(0,F.jsxs)(lv.A,{sx:{flexGrow:1},children:["Add items from ",(0,F.jsx)(lv.A,{sx:{fontWeight:600},children:e.repository.nameWithOwner})]}),(0,F.jsx)(lx.A,{sx:{flexShrink:0,ml:2,display:"flex"},children:(0,F.jsx)(lw.A,{icon:ly.ArrowRightIcon,sx:{color:"fg.muted"}})})]})},"multiple"):(0,F.jsx)(FH,{item:e,...a(e,t,{onMouseDown:t=>n(t,e)}),...(0,ey.G)("issue-picker-item")},e.number))})})});FK.displayName="SuggestedItemList";let FQ=({onItemSelected:e,onRemovePicker:t,onFilterTextChanged:a,inputRef:r,renderInput:n,loading:i,filteredItems:l,repository:s})=>{let{isOpen:o,setIsOpen:d,inputOnBlur:u,itemOnMouseDown:c,onResetListInteraction:m,inputOnFocus:p}=Fw(),h=(0,K.useRef)(null),{navigationDispatch:f}=cN(),g=null!==mT(),[y,x]=(0,K.useState)(),b=(0,K.useMemo)(()=>{let e=Array.from(l);return g&&e.push({type:Fq,title:y,repository:s}),l.length>1&&e.push({type:FU,title:y,repository:s}),e},[l,g,y,s]),v=(0,K.useCallback)(async t=>{m(),e(t),k(""),x(""),S()},[b,m]),{getInputProps:w,getListProps:j,getItemProps:C,inputValue:I,selectFirstItem:S,setInputValue:k}=FI({items:b,onSelectedItemChange:v,isOpen:o},r);(0,K.useEffect)(()=>{o&&S()},[o,b,S]);let N=(0,K.useCallback)(e=>{e.stopPropagation(),e.preventDefault(),c()},[c]),T=(0,K.useCallback)(()=>{d(!1)},[d]);return(0,F.jsxs)("div",{ref:h,onBlur:T,style:{position:"relative",width:"100%",cursor:"text",display:"flex"},children:[n({...w({onFocus:p,onBlur:u,onChange:e=>{x(e.target.value),a(e.target.value)}}),fontSize:1,lineHeight:1.5,placeholder:nH.newItemFindIssuePlaceholder(g),"aria-label":nH.newItemFindIssuePlaceholder(g),autoComplete:"off",onKeyDown:e=>{switch(e.key){case"Backspace":I||(e.preventDefault(),t());break;case"Escape":t(),e.stopPropagation();break;case"ArrowDown":case"ArrowUp":o&&e.stopPropagation();break;case"Tab":t(),requestAnimationFrame(()=>{f(u2({x:u8.Second,y:u8.Last,focusType:u6.Focus}))})}}}),(0,F.jsx)(FK,{...j(),containerRef:h,isOpen:o,loading:i,items:b,getItemProps:C,itemOnMouseDown:N,"aria-label":nH.newItemFindIssuePlaceholder(g)})]})};FQ.displayName="SuggestedItemPicker";let FJ=[],FX=(0,K.memo)(function(e){let{repository:t,filteredItemIds:a=FJ,newItemAttributes:r,inputRef:n,onItemSelected:i,onRemovePicker:l,renderInput:s,isFocused:o,...d}=e,[u,c]=(0,K.useState)(!0),{refresh:m,items:p,removeItem:h}=m$(c),{openPaneBulkAdd:f}=c7();(0,K.useEffect)(()=>{n?.current&&o&&n?.current?.focus()},[n,o]);let g=(0,K.useMemo)(()=>p?p.filter(e=>!a.includes(e.id)):[],[a,p]),y=(0,K.useCallback)(e=>m(t.id,e),[m,t]),x=mT(),b=(0,K.useCallback)(async e=>{c(!0),e.type===FU?f("omnibar_add_item_suggestions_ui",t,e.title,r):e.type===Fq?x?.start({issueTitle:e.title,repo:ms(e.repository.nameWithOwner)},r,n):(await i(e),await m(t.id,"",!0),h(e)),c(!1)},[t,f,r,i,m,h,x,n]);return(0,K.useEffect)(()=>{x?.prefetch(ms(t.nameWithOwner)),y("")},[t.nameWithOwner,x,y]),(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(lx.A,{...d,sx:{flexShrink:0,display:"flex",...d.sx},children:(0,F.jsx)(Fz,{repository:t})}),(0,F.jsx)(FQ,{onRemovePicker:l,onItemSelected:b,inputRef:n,renderInput:s,loading:u,filteredItems:g,onFilterTextChanged:y,repository:t})]})});FX.displayName="SuggestionsForRepository";let FY={[eN.TrackedBy]:n9.addedUnsupportedItemToast,[eN.ParentIssue]:ie.addedUnsupportedItemToast,[eN.IssueType]:id.addedUnsupportedItemToast,[eN.Milestone]:nQ.addedUnsupportedItemToast},FZ=e=>e.dataType in FY,F0=e=>FY[e.dataType],F1=(0,K.memo)((0,K.forwardRef)(({onAddItem:e,newItemAttributes:t,scrollRef:a,...r},n)=>{let{addToast:i}=lV(),{createMemexItem:l}=mb(),s=vp(),o=(0,K.useCallback)(async(t,a,r,n,i,o,d)=>{let u=await l({contentType:t.type,content:{id:t.id,repositoryId:a},memexProjectColumnValues:r,localColumnValues:n,previousMemexProjectItemId:i},o,d);return e?.(u),"Issue"===t.type&&t.hasSubIssues&&s(),u},[l,e,s]),d=(0,K.useCallback)(async(r,n,s,o,d,u)=>{let c=r.trim(),{updateColumnActions:m=[]}=t??{};if(c){let t=await l({contentType:eJ.DraftIssue,content:{title:x0(c)},memexProjectColumnValues:n,localColumnValues:s,previousMemexProjectItemId:o},d,u);for(let r of(e?.(t),m))if(FZ(r)&&t.contentType!==eJ.Issue){let e=F0(r);e&&i({message:e,type:nF.warning}),a?.current?.scrollTo({left:0,top:a.current?.scrollHeight,behavior:"smooth"});break}return t}return Promise.resolve(null)},[i,l,t,e,a]);return(0,F.jsx)(F2,{onAddItem:o,onAddDraftItem:d,newItemAttributes:t,...r,ref:n})}));F1.displayName="OmnibarInternal";let F2=(0,K.forwardRef)(({onAddItem:e,onAddDraftItem:t,onInputFocus:a,filteredItemIds:r,newItemAttributes:n,isFixed:i,defaultPlaceholder:l,groupingMetadata:s,disabled:o,childElementRole:d,...u},c)=>{let m=(0,K.useRef)(null);(0,fn.T)(c,m);let[p,h]=(0,K.useState)(!1),[f,g]=(0,K.useState)(null),{navigationDispatch:y}=cN(),x=mT(),b=(0,K.useCallback)(()=>{m.current?.focus()},[m]),v=(0,vB.$)({"is-focused":p,"is-fixed":i}),w=(0,vB.$)({"is-focused":p,"is-disabled":o}),{isTemplatesDialogOpen:j}=IC(),{copyingDraftsAsync:C}=Iy(),[I,S]=(0,K.useState)(!1),{viewType:k}=ma(),{showTemplateDialog:N}=eU();(0,K.useEffect)(()=>{k!==lK.Table||j||!N||C.current||i||S(!0)},[C,i,j,N,k]);let T=(0,K.useCallback)(()=>{h(!1),"discovery"===f&&g(null)},[h,f,g]),_=(0,K.useCallback)(()=>{x?.prefetch()},[x]),A=(0,K.useCallback)(()=>{a&&a(),h(!0),S(!1)},[a]),R=(0,K.useCallback)(e=>{null===f&&(e.preventDefault(),g("discovery"),A())},[f,A]),P=(0,K.useCallback)(()=>{y(cS())},[y]),D=(0,K.useCallback)(()=>S(!1),[]),E=(0,K.useCallback)(e=>{D(),R(e)},[R,D]);return(0,F.jsxs)(F3,{role:d,className:v,...(0,ey.G)("omnibar"),...u,children:[(0,F.jsxs)(lx.A,{role:"cell",sx:{height:"100%",padding:"3px 1px 3px 3px"},children:[(0,F.jsx)(fE.K,{"aria-haspopup":"menu","aria-label":nH.createNewItemOrAddExistingIssueAriaLabel,className:w,onClick:R,onFocus:P,onMouseEnter:_,disabled:o||null!==f,...(0,ey.G)("new-item-button"),icon:ly.PlusIcon,variant:"invisible",size:"small",sx:{height:"100%",color:"fg.subtle"}}),I&&(0,F.jsx)(xu.A,{relative:!1,open:!0,caret:"top-left",sx:{top:"45px","& > *::before":{left:"13px !important"},"& > *::after":{left:"14px !important"}},children:(0,F.jsxs)(xu.A.Content,{sx:{minWidth:"300px"},children:[(0,F.jsx)(h_.A,{as:"h3",sx:{fontSize:2,mb:2},children:"Add your first item"}),(0,F.jsxs)("p",{children:['Click "Add Item" to get started or use the shortcut'," ",(0,F.jsx)(kj.U,{format:"full",keys:"Control+Space"}),"."]}),(0,F.jsxs)(lx.A,{sx:{display:"flex",gap:2,mt:2},children:[(0,F.jsx)(p4.Q,{onClick:E,children:"Add item"}),(0,F.jsx)(p4.Q,{variant:"invisible",onClick:D,children:"OK, dismiss"})]})]})})]}),(0,F.jsx)(lx.A,{role:"cell",className:v,sx:{display:"flex",flex:"auto","&.is-focused":{boxShadow:e=>`inset 0 0 0 2px ${e.colors.accent.emphasis}`,borderRadius:"2px"},"&.is-fixed":{boxShadow:e=>`inset 1px 0 0 0 ${e.colors.border.default}`},"&.is-focused.is-fixed":{boxShadow:e=>`inset 1px 0 0 0 ${e.colors.accent.muted}`}},onClick:b,children:(0,F.jsx)(F6,{ref:m,isFocused:p,filteredItemIds:r,omnibarMenu:f,setOmnibarMenu:g,onAddItem:e,onAddDraftItem:t,newItemAttributes:n,onFocus:A,onBlur:T,defaultPlaceholder:l,groupingMetadata:s,disabled:o})})]})});F2.displayName="BaseOmnibar";let F5=(0,Z.i7)(["0%{opacity:0;}100%{opacity:1;}"]),F3=(0,Z.Ay)(lx.A).withConfig({displayName:"omnibar__StyledOmnibar",componentId:"sc-84578618-0"})(["align-items:stretch;display:flex;flex:auto;height:","px;max-height:","px;&.is-fixed{animation:"," 0.25s ease-in;height:","px;max-height:","px;width:100%;background-color:",";box-shadow:inset -1px 0 0 0 ",",inset 1px 0 0 0 ",",inset 0px 1px 0 0 ",",inset 0px -1px 0 0 ",",",";border-radius:var(--borderRadius-medium);&.is-focused{box-shadow:inset 0 0 0 2px ",";}}"],37,37,F5,45,45,(0,q.Jt)("colors.canvas.overlay"),(0,q.Jt)("colors.border.default"),(0,q.Jt)("colors.border.default"),(0,q.Jt)("colors.border.default"),(0,q.Jt)("colors.border.default"),(0,q.Jt)("shadows.shadow.medium"),(0,q.Jt)("colors.accent.emphasis")),F4=[],F6=(0,K.memo)((0,K.forwardRef)(({onAddItem:e,onAddDraftItem:t,onFocus:a,onBlur:r,filteredItemIds:n=F4,isFocused:i,omnibarMenu:l,setOmnibarMenu:s,newItemAttributes:o,defaultPlaceholder:d,groupingMetadata:u,disabled:c},m)=>{let p=(0,K.useRef)(null),{clearCachedSuggestions:h}=mk(),f=mn({updateActions:o?.updateColumnActions,previousItemId:o?.previousItemId,onAddItem:e,onAddDraftItem:t,groupId:o?.groupId,secondaryGroupId:o?.secondaryGroupId}),g=u?.sourceObject.dataType==="repository"&&"name"in u.sourceObject.value?u.sourceObject.value:null,[y,x]=(0,K.useState)(""),[b,v]=(0,K.useState)(g);(0,K.useEffect)(()=>{g&&(v(g),s("items"))},[g,s]);let w=(0,K.useCallback)(e=>{s("items"),v(e),x(""),a?.()},[a,s]);(0,K.useImperativeHandle)(m,()=>({focus:()=>p.current?.focus({preventScroll:!0}),blur:()=>p.current?.blur(),isInputElement:e=>e===p.current}),[]);let j=(0,K.useCallback)(async e=>{if(h(),x(""),b)return f({...e,repositoryId:b?.id})},[h,f,b]),C=(0,K.useCallback)(async(e,t)=>{"string"==typeof e&&(x(""),s(null),await f(e),t?.shouldFocusInput&&a?.())},[f,a,s]),I=(0,K.useCallback)(e=>{let{width:t,size:n,...i}=e;return(0,F.jsx)(gx,{...i,ref:p,sx:{color:"fg.default",paddingLeft:"20px"},onFocus:t=>{e.onFocus&&e.onFocus(t),a&&a()},onBlur:t=>{e.onBlur&&e.onBlur(t),r&&r()},className:c?"is-disabled":void 0,...(0,ey.G)("repo-searcher-input")})},[c,a,r]),S=(0,K.useCallback)(()=>{g||(x(""),v(null),s(null))},[g,v,s]);return(0,F.jsxs)(F.Fragment,{children:[(null===l||"discovery"===l)&&(0,F.jsx)(FP,{inputRef:p,renderInput:I,newItemAttributes:o,omnibarText:y,setOmnibarText:x,defaultPlaceholder:d,isDisabled:c,createDraft:C,isFocused:i,omnibarMenu:l,setOmnibarMenu:s}),"repos"===l&&(0,F.jsx)(F$,{inputRef:p,isFocused:i,isDisabled:c,renderInput:I,defaultPlaceholder:d,omnibarText:y,setOmnibarText:x,onRepositorySelected:w,groupingMetadata:u,setOmnibarMenu:s}),"items"===l&&b&&(0,F.jsx)(FX,{onRemovePicker:S,filteredItemIds:n,newItemAttributes:o,onItemSelected:j,repository:b,inputRef:p,isFocused:i,renderInput:I,sx:{alignItems:"center",pl:3}})]})}));F6.displayName="OmnibarInput";try{F3.displayName||(F3.displayName="StyledOmnibar")}catch{}let F8=({verticalScrollbarSize:e,isFixed:t,horizontalScrollbarSize:a,effectiveTableHeight:r,disableBlur:n})=>{let i={alignItems:"center",pl:"8px",width:e?`calc(100% - ${e}px)`:"100%",right:e?`${e}px`:"",pointerEvents:"none",">:first-child":{pointerEvents:"all"}};return t?{...i,backdropFilter:n?"unset":"blur(12px)",pb:a?0:"12px",position:"absolute",bottom:a?`${a}px`:0,pr:e?0:"8px"}:{...i,backgroundColor:"canvas.default",pb:"1px",position:"absolute",top:`${r}px`,height:"37px",borderBottom:"1px solid",borderBottomColor:"border.default",boxShadow:"shadow.medium"}},F7=(0,K.forwardRef)(({horizontalScrollbarSize:e,disableBlur:t,verticalScrollbarSize:a,isFixed:r,effectiveTableHeight:n,sx:i,children:l,...s},o)=>(0,F.jsx)(lx.A,{...s,ref:o,sx:{display:"flex",zIndex:10,...F8({isFixed:r,verticalScrollbarSize:a,horizontalScrollbarSize:e,effectiveTableHeight:n,disableBlur:t}),...i},...(0,ey.G)("omnibar-container"),children:l}));F7.displayName="OmnibarContainer";let F9={position:"absolute",width:"100%",pointerEvents:"none"},Oe=(0,K.forwardRef)(({horizontalScrollbarSize:e,children:t},a)=>(0,F.jsx)(lx.A,{ref:a,sx:{bottom:e?`${e??12}px`:0,...F9},...(0,ey.G)("omnibar-drawer"),children:t}));function Ot({applyTransientFilter:e}={applyTransientFilter:"include"}){let{items:t}=ug(),{matchesSearchQuery:a,query:r,transientQuery:n,baseQuery:i}=lh(),l=!!(r||i||e&&n.normalisedQuery);return{filteredItems:(0,K.useMemo)(()=>l?t.filter(t=>a(t,e)):t,[l,t,a,e])}}function Oa(e,t){return{[eN.Assignees]:{getGroupingMetadata:(a,r)=>(function(e,t){let a=e.Assignees;if(!a||0===a.length)return;let{memex_table_without_limits:r}=eP(),n=a.sort(fW);return t||r?n.map(e=>({value:e.login,sourceObject:{dataType:eN.Assignees,kind:"group",value:[e]}})):[{value:n.map(e=>e.login).join("_"),sourceObject:{dataType:eN.Assignees,kind:"group",value:n}}]})(e(r),t?.useDistinctAssigneesGrouping??!1),getAllGroupMetadata:(e,t)=>(function(e,t){if(e.dataType!==eN.Assignees||!t)return;let a=new Map;for(let e of t)for(let t of e.getAssignees())a.set(t.login,t);return Array.from(a.values()).sort(fW).map(e=>({value:e.login,sourceObject:{dataType:eN.Assignees,kind:"group",value:[e]}}))})(e,t)},[eN.Date]:{getGroupingMetadata:(t,a)=>(function(e,t){if(e.dataType!==eN.Date)return;let a=aw(t[e.id]);if(a)return[{value:aN(a.value),sourceObject:{dataType:eN.Date,kind:"group",value:{date:a,columnId:e.id}}}]})(t,e(a))},[eN.Iteration]:{getGroupingMetadata:(t,a)=>(function(e,t){if(e.dataType!==eN.Iteration)return;let a=ax(t[e.id]);if(!a)return;let r=aK(e).find(e=>e.id===a.id);if(r)return[{value:r.id,sourceObject:{dataType:eN.Iteration,kind:"group",value:{iteration:r,columnId:e.id}}}]})(t,e(a)),getAllGroupMetadata:e=>e.dataType!==eN.Iteration?[]:aK(e).sort(aZ).map(t=>({value:t.id,sourceObject:{dataType:eN.Iteration,kind:"group",value:{iteration:t,columnId:e.id}}}))},[eN.Labels]:{getGroupingMetadata:(t,a)=>(function(e){let t=e.Labels;if(t)return t.map(e=>({value:e.name,sourceObject:{dataType:eN.Labels,kind:"group",value:e}}))})(e(a)),getAllGroupMetadata:(e,t)=>(function(e,t){if(e.dataType!==eN.Labels||!t)return;let a=new Map;for(let e of t)for(let t of e.getLabels())a.set(t.name,t);return Array.from(a.values()).sort(fz).map(e=>({value:e.name,sourceObject:{dataType:eN.Labels,kind:"group",value:e}}))})(e,t)},[eN.Milestone]:{getGroupingMetadata:(t,a)=>(function(e){let t=e.Milestone;if(t)return[{value:t.title,sourceObject:{dataType:eN.Milestone,kind:"group",value:t}}]})(e(a))},[eN.Number]:{getGroupingMetadata:(t,a)=>(function(e,t){if(e.dataType!==eN.Number)return;let a=ay(t[e.id]);if(a)return[{value:`${a.value}`,sourceObject:{dataType:eN.Number,kind:"group",value:{number:a,columnId:e.id}}}]})(t,e(a))},[eN.ParentIssue]:{getGroupingMetadata:(t,a)=>(function(e){let t=e[eT.ParentIssue];if(t)return[{value:t.nwoReference,sourceObject:{dataType:eN.ParentIssue,kind:"group",value:t}}]})(e(a))},[eN.Repository]:{getGroupingMetadata:(t,a)=>(function(e){let t=e.Repository;if(t)return[{value:t.nameWithOwner,sourceObject:{dataType:eN.Repository,kind:"group",value:t}}]})(e(a))},[eN.SingleSelect]:{getGroupingMetadata:(t,a)=>(function(e,t){if(e.dataType!==eN.SingleSelect)return;let a=ax(t[e.id]);if(!a)return;let r=(e.settings.options||[]).find(e=>e.id===a.id);if(r)return[{value:a.id,sourceObject:{dataType:eN.SingleSelect,kind:"group",value:{option:r,columnId:e.id}}}]})(t,e(a)),getAllGroupMetadata:e=>e.dataType!==eN.SingleSelect?[]:e.settings.options.map(t=>({value:t.id,sourceObject:{dataType:eN.SingleSelect,kind:"group",value:{option:t,columnId:e.id}}}))},[eN.Text]:{getGroupingMetadata:(t,a)=>(function(e,t){if(e.dataType!==eN.Text)return;let a=ag(t[e.id]);if(a)return[{value:a.raw,sourceObject:{dataType:eN.Text,kind:"group",value:{text:a,columnId:e.id}}}]})(t,e(a))},[eN.IssueType]:{getGroupingMetadata:(t,a)=>(function(e){let t=e[eT.IssueType];if(t)return[{value:t.name,sourceObject:{dataType:eN.IssueType,kind:"group",value:t}}]})(e(a))},...Object.values(eN).reduce((e,t)=>(rM(t)||(e[t]=void 0),e),{})}}Oe.displayName="OmnibarDrawer";let Or=(0,K.createContext)({slicerItems:null}),On=()=>(0,K.useContext)(Or),Oi=Oa(e=>e.columns,{useDistinctAssigneesGrouping:!0}),Ol=(0,K.memo)(function({children:e}){let t=nA(),{items:a}=ug(),{filteredItems:r}=Ot({applyTransientFilter:"exclude"}),{memex_table_without_limits:n}=eP(),i=n?function(){let e=ui();return(0,oY.I)({queryKey:sV(e),enabled:!1,queryFn:()=>({slices:[]})})}():void 0,l=n?(0,K.useMemo)(()=>{if(!t.sliceField||t.sliceField.dataType===eN.TrackedBy||!i?.data)return[];let e=t.sliceField;return i.data.slices.map(t=>{let{sliceValue:a,sliceMetadata:r,totalCount:n}=t,i=fq(e,a,r);if(i)return{sourceObject:i,value:a,totalCount:n}}).filter(e=>!!e)},[t.sliceField,i?.data]):(0,K.useMemo)(()=>{if(!t.sliceField||t.sliceField.dataType===eN.TrackedBy)return[];let e=Oi[t.sliceField.dataType];return(0,ee.A)(e,`No grouping configuration for column ${t.sliceField.name}`),Nk(r,t.sliceField,e.getGroupingMetadata,e.getAllGroupMetadata,void 0,a).map(e=>({value:e.value,sourceObject:e.sourceObject,totalCount:{isApproximate:!1,value:e.rows.length}}))},[a,r,t.sliceField]),s=(0,K.useMemo)(()=>({slicerItems:l}),[l]);return(0,F.jsx)(Or.Provider,{value:s,children:e})});try{Or.displayName||(Or.displayName="SlicerItemsContext")}catch{}try{Ol.displayName||(Ol.displayName="SlicerItemsProvider")}catch{}let Os=(0,K.createContext)(e0);function Oo(){return(0,K.useContext)(Os)}let Od=(0,K.memo)(function({id:e,open:t,setOpen:a,anchorRef:r,ui:n}){let i=Oo(),{clientHeight:l}=vj({onResize:()=>{t&&((0,pN.flushSync)(()=>{a(!1)}),a(!0))}});return(0,F.jsx)(yu.W,{open:t,anchorRef:r,onOpenChange:eC.l,children:(0,F.jsx)(yu.W.Overlay,{sx:{maxHeight:l,overflow:"auto"},...(0,ey.G)("slice-by-menu"),role:"dialog","aria-label":"Select a field to slice by",onEscape:()=>a(!1),onClickOutside:()=>a(!1),children:(0,F.jsx)(Ou,{id:e,setOpen:a,ui:n??i},String(t))})})}),Ou=(0,K.memo)(function({setOpen:e,id:t,ui:a}){let{currentView:r}=iS(),{viewType:n}=ma(),{allColumns:i}=i5(),{sliceField:l,setSliceField:s,clearSliceField:o}=nA(),{postStats:d}=iN(),u=(0,K.useMemo)(()=>i.slice().filter(e=>rE(e.dataType)).sort(rx).map(t=>{let i=IS(t.dataType);return(0,F.jsxs)(fi.l.Item,{onSelect:i=>{if(!r)return;let u=l===t;u?o(r.number):s(r.number,t),e(!1),i.stopPropagation(),d({name:u?tw:tv,memexProjectColumnId:t.id,ui:a,context:JSON.stringify({layout:n})})},selected:l===t,disabled:!rE(t.dataType),...(0,ey.G)(`slice-${t.name}`),children:[(0,F.jsx)(fi.l.LeadingVisual,{children:(0,F.jsx)(i,{})}),t.name]},t.id)}),[i,l,r,e,d,a,n,o,s]),c=(0,K.useCallback)(()=>{let t=!!l;r&&o(r.number),e(!1),t&&d({name:tw,ui:a,context:JSON.stringify({layout:n})})},[o,r,d,e,l,a,n]);return(0,F.jsx)(fi.l,{id:t,selectionVariant:"single",children:(0,F.jsxs)(fi.l.Group,{children:[(0,F.jsx)(fi.l.GroupHeading,{children:"Slice by"}),u,(0,F.jsxs)(fi.l.Item,{selected:!l,onSelect:c,...(0,ey.G)("slice-none"),children:[(0,F.jsx)(fi.l.LeadingVisual,{children:(0,F.jsx)(ly.XIcon,{})}),"No slicing"]},"slice-none")]},"slice")})}),Oc=(0,F.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.5 1.5H6.5V5H10C10.4142 5 10.75 5.33579 10.75 5.75C10.75 6.16421 10.4142 6.5 10 6.5H6.5V7.75C6.5 8.16421 6.16421 8.5 5.75 8.5C5.33579 8.5 5 8.16421 5 7.75V6.5H1.5V14.5H5V12.75C5 12.3358 5.33579 12 5.75 12C6.16421 12 6.5 12.3358 6.5 12.75V14.5H14.5V1.5ZM5 1.5V5H1.5V1.5H5ZM0 14.5V5.75V1.5C0 0.671573 0.671573 0 1.5 0H5.75H14.5C15.3284 0 16 0.671573 16 1.5V14.5C16 15.3284 15.3284 16 14.5 16H5.75H1.5C0.671573 16 0 15.3284 0 14.5ZM9.62012 9.58516C10.8677 9.59206 11.8826 8.58286 11.8826 7.33544V6.32279C11.8826 5.90857 12.2184 5.57279 12.6326 5.57279C13.0468 5.57279 13.3826 5.90857 13.3826 6.32279V7.33544C13.3826 9.4147 11.6909 11.0966 9.61182 11.0851L9.3826 11.0839L9.3826 12.9995C9.3826 13.2178 9.12245 13.3312 8.96248 13.1827L6.07989 10.506C5.97337 10.4071 5.97337 10.2385 6.07989 10.1396L8.96248 7.46291C9.12245 7.31438 9.3826 7.42782 9.3826 7.64611V9.58384L9.62012 9.58516Z"});function Om(){return(0,F.jsx)("svg",{"aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",width:16,height:16,viewBox:"0 0 16 16",fill:"currentColor",className:"octicon",style:{display:"inline-block",userSelect:"none",overflow:"visible"},children:Oc})}try{Od.displayName||(Od.displayName="SliceByMenu")}catch{}try{Ou.displayName||(Ou.displayName="Options")}catch{}try{(S=Icon).displayName||(S.displayName="Icon")}catch{}try{Om.displayName||(Om.displayName="SlicerIcon")}catch{}function Op(e){let{variant:t,color:a,hideNumerals:r}=function(){let{allColumnsRef:e}=sl();return e.current.find(Oh)}()?.settings.progressConfiguration||{};return(0,F.jsx)(BA,{variant:t||B_.SEGMENTED,color:a,hideNumerals:r,...e})}function Oh(e){return e.dataType===eN.SubIssuesProgress}try{Op.displayName||(Op.displayName="SubIssuesProgressBar")}catch{}let Of={leadingVisual:"slicer-items-module__leadingVisual--dIwgy",icon:"slicer-items-module__icon--OFvHq",trailingVisual:"slicer-items-module__trailingVisual--ocbgq",mainContent:"slicer-items-module__mainContent--YgDuR",trailingContent:"slicer-items-module__trailingContent--UWnEr",completedIterationHeading:"slicer-items-module__completedIterationHeading--Vvcis",todayLabel:"slicer-items-module__todayLabel--gZ8pp",toggleEmptyButton:"slicer-items-module__toggleEmptyButton--vBHHt",description:"slicer-items-module__description--Q_d1f",title:"slicer-items-module__title--EMqA1",parentIssueTitle:"slicer-items-module__parentIssueTitle--fUWpV",listContainerBase:"slicer-items-module__listContainerBase--zHxYZ",actionListItem:"slicer-items-module__actionListItem--cFSr9",actionListItemActive:"slicer-items-module__actionListItemActive--CRyxX",actionListItemContainer:"slicer-items-module__actionListItemContainer--xR1fh",withIcons:"slicer-items-module__withIcons--gNnGQ",leadingContent:"slicer-items-module__leadingContent--C0yGt",noIcons:"slicer-items-module__noIcons--isSJa",SlicerPanel:"slicer-items-module__SlicerPanel--nSeK0",WritePermissions:"slicer-items-module__WritePermissions--NDcYk",Wide:"slicer-items-module__Wide--xYWHG",itemFullWidth:"slicer-items-module__itemFullWidth--z8Scn",itemRight:"slicer-items-module__itemRight--knffZ"},Og=new Set([eN.Text,eN.Number,eN.Date,eN.IssueType]),Oy=({count:e})=>(0,F.jsx)("div",{className:Of.trailingVisual,children:(0,F.jsx)(gn.A,{...(0,ey.G)("slicer-item-count"),children:e})}),Ox=({children:e,hasLeadingIcons:t=!0})=>(0,F.jsx)("div",{className:(0,vB.$)(Of.listContainerBase,t?Of.withIcons:Of.noIcons),children:e}),Ob=({fieldGrouping:e,count:t,onSliceValueChange:a,sliceValue:r})=>(0,F.jsx)(Ov,{onSelect:()=>a(e.value.iteration.title),isActive:r===e.value.iteration.title,icon:(0,F.jsx)(ly.IterationsIcon,{className:"fgColor-muted"}),title:e.value.iteration.titleHtml,description:(0,F.jsx)("div",{className:Of.description,children:aU(e.value.iteration)}),metadata:(0,F.jsxs)(F.Fragment,{children:[aG(new Date,e.value.iteration)&&(0,F.jsx)("div",{children:(0,F.jsx)(jN,{sx:{ml:2}})}),(0,F.jsx)(Oy,{count:t})]})}),Ov=({onSelect:e,isActive:t,icon:a,title:r,description:n,metadata:i,trailingContent:l,wrapTrailingContent:s=!1})=>{let o="string"==typeof r?(0,F.jsx)(p$,{as:"h3",className:Of.title,children:r}):r;return(0,F.jsx)(fi.l.Item,{onSelect:e,className:(0,vB.$)(t&&Of.actionListItemActive,Of.actionListItem,"active-item"),children:(0,F.jsxs)("div",{className:Of.actionListItemContainer,children:[(0,F.jsx)("div",{className:(0,vB.$)(Of.leadingVisual,Of.leadingContent),children:(0,F.jsx)("div",{className:Of.icon,children:a})}),(0,F.jsxs)("div",{className:Of.mainContent,children:[(0,F.jsxs)("div",{className:"flex-1 pr-2 py-2 text-left",children:[o,n,s&&(0,F.jsx)("div",{className:Of.itemFullWidth,children:l})]}),i]}),l&&(0,F.jsx)("div",{className:(0,vB.$)(s&&Of.itemRight,Of.trailingContent),children:l})]})})},Ow=({group:e,onSliceValueChange:t,sliceValue:a})=>{let r=e.totalCount.value;if("empty"===e.sourceObject.kind){let n=e.sourceObject;return(0,F.jsx)(Ov,{isActive:a===nT,title:n.value.titleHtml,onSelect:()=>t(nT),metadata:(0,F.jsx)(Oy,{count:r})},nT)}switch(e.sourceObject.dataType){case eN.SingleSelect:{let n=e.sourceObject,i=n.value.option.name;return(0,F.jsx)(Ov,{isActive:a===i,onSelect:()=>t(i),title:n.value.option.nameHtml,icon:(0,F.jsx)(h6,{color:n.value.option.color}),description:n.value.option.descriptionHtml?(0,F.jsx)("div",{className:Of.description,children:(0,F.jsx)(p$,{children:n.value.option.descriptionHtml})}):void 0,metadata:(0,F.jsx)(Oy,{count:r})},n.value.option.id)}case eN.Assignees:{let n=e.sourceObject.value[0];if(!n)return null;return(0,F.jsx)(Ov,{onSelect:()=>t(n.login),isActive:a===n.login,icon:(0,F.jsx)(h3.r,{loading:"lazy",alt:n.login,src:n.avatarUrl},n.id),title:n.login,metadata:(0,F.jsx)(Oy,{count:r})},n.id)}case eN.Labels:{let n=e.sourceObject,i=n.value.name;return(0,F.jsx)(Ov,{isActive:a===i,onSelect:()=>t(i),icon:(0,F.jsx)(jK,{color:n.value.color}),title:n.value.nameHtml,metadata:(0,F.jsx)(Oy,{count:r})},n.value.id)}case eN.Milestone:{let n=e.sourceObject,i=n.value.title;return(0,F.jsx)(Ov,{isActive:a===i,onSelect:()=>t(i),icon:(0,F.jsx)(ly.MilestoneIcon,{className:"fgColor-muted"}),title:i,metadata:(0,F.jsx)(Oy,{count:r})},n.value.id)}case eN.ParentIssue:{let r=e.sourceObject.value,n=()=>(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(p$,{as:"h3",className:Of.parentIssueTitle,children:r.title})," ",(0,F.jsxs)("span",{className:"fgColor-muted",children:["#",r.number]})]});return(0,F.jsx)(Ov,{isActive:a===r.nwoReference,onSelect:()=>t(r.nwoReference),icon:(0,F.jsx)(pq,{isDraft:!1,state:r.state,stateReason:r.stateReason,type:eJ.Issue,className:"mr-2"}),title:(0,F.jsx)(()=>{let{openParentIssue:e}=T0();return(0,F.jsx)(F.Fragment,{children:r.url?(0,F.jsx)(pw.A,{href:r.url,onClick:t=>{t.stopPropagation(),t.metaKey||t.shiftKey||1===t.button||(t.preventDefault(),e(r))},children:(0,F.jsx)(n,{})}):(0,F.jsx)(n,{})})},{}),wrapTrailingContent:!0,trailingContent:r.subIssueList?(0,F.jsx)(Op,{total:r.subIssueList.total,completed:r.subIssueList.completed,percentCompleted:r.subIssueList.percentCompleted}):void 0},r.id)}case eN.IssueType:{let n=e.sourceObject,i=n.value.name;return(0,F.jsx)(Ov,{isActive:a===i,onSelect:()=>t(i),title:i,metadata:(0,F.jsx)(Oy,{count:r})},n.value.id)}case eN.Repository:{let n=e.sourceObject,i=n.value.nameWithOwner;return(0,F.jsx)(Ov,{isActive:a===i,onSelect:()=>t(i),icon:(0,F.jsx)(hV,{repository:n.value,className:"fgColor-muted"}),title:i,metadata:(0,F.jsx)(Oy,{count:r})},n.value.id)}case eN.Text:{let n=e.sourceObject,i=n.value.text.raw;return(0,F.jsx)(Ov,{isActive:a===i,onSelect:()=>t(i),title:pO(n.value.text.html),metadata:(0,F.jsx)(Oy,{count:r})},i)}case eN.Number:{let n=e.sourceObject.value.number.value.toString();return(0,F.jsx)(Ov,{onSelect:()=>t(n),isActive:a===n,title:n,metadata:(0,F.jsx)(Oy,{count:r})},e.sourceObject.value.number.value.toString())}case eN.Date:{let n=e.sourceObject.value.date.value,i=ak(n),l=aN(n),s=ro(l)?"Today":void 0;return(0,F.jsx)(Ov,{onSelect:()=>t(l),isActive:a===l,title:i,metadata:(0,F.jsxs)(F.Fragment,{children:[s&&(0,F.jsx)("div",{children:(0,F.jsx)(bD.A,{className:Of.todayLabel,children:s})}),(0,F.jsx)(Oy,{count:r})]})},n.toString())}case eN.Iteration:return(0,F.jsx)(Ob,{fieldGrouping:e.sourceObject,count:r,onSliceValueChange:t,sliceValue:a},e.sourceObject.value.iteration.id);default:return null}},Oj=({sliceValue:e,onSliceValueChange:t,slicerItems:a,showEmptySlicerItems:r,setShowEmptySlicerItems:n})=>{let[i,l]=t$(a,e=>e.totalCount.value>0),s=l.length>0,o=a[0]?.sourceObject.dataType,d=!(o&&Og.has(o));return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsxs)(Ox,{hasLeadingIcons:d,children:[(0,F.jsx)(h_.A,{as:"h2",className:"sr-only",children:"Project items group"}),(0,F.jsxs)(fi.l,{"aria-labelledby":"slicer-panel-title",showDividers:!0,children:[i.map(a=>Ow({group:a,sliceValue:e,onSliceValueChange:t})),r&&l.map(a=>Ow({group:a,sliceValue:e,onSliceValueChange:t}))]})]}),(0,F.jsx)(OI,{hasEmptySlicerItems:s,showEmptySlicerItems:r,setShowEmptySlicerItems:n})]})},OC=({slicerItems:e,sliceValue:t,onSliceValueChange:a,showEmptySlicerItems:r,setShowEmptySlicerItems:n})=>{let i=[],l=new Map,s=null;for(let t of e)if(t.sourceObject.dataType===eN.Iteration){if("empty"!==t.sourceObject.kind){let e=t.sourceObject.value.iteration;i.push(e),l.set(e.id,t)}else s=t}let o=aX(i);if(!o.iterations.length&&!o.completedIterations.length)return null;let d=e.some(e=>0===e.totalCount.value);return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsxs)(Ox,{children:[(0,F.jsx)(h_.A,{as:"h2",className:"sr-only",children:"Project iterations list"}),(0,F.jsxs)(fi.l,{"aria-labelledby":"slicer-panel-title",showDividers:!0,children:[o.iterations.length>0&&(0,F.jsx)(F.Fragment,{children:o.iterations.map(e=>{let n=l.get(e.id);return n&&(r||n.totalCount.value)?Ow({group:n,sliceValue:t,onSliceValueChange:a}):null})}),s&&Ow({group:s,sliceValue:t,onSliceValueChange:a})]}),o.completedIterations.length>0&&(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)("div",{"data-testid":"completed-iteration-header",className:Of.completedIterationHeading,children:nH.iterationLabel.completed}),(0,F.jsx)(fi.l,{"aria-label":"Completed iterations",children:o.completedIterations.map(e=>{let n=l.get(e.id);return n&&(r||n.totalCount.value)?n&&Ow({group:n,sliceValue:t,onSliceValueChange:a}):null})})]})]}),(0,F.jsx)(OI,{hasEmptySlicerItems:d,showEmptySlicerItems:r,setShowEmptySlicerItems:n})]})},OI=({hasEmptySlicerItems:e,showEmptySlicerItems:t,setShowEmptySlicerItems:a})=>e?(0,F.jsxs)(p4.Q,{onClick:()=>a(!t),size:"small",variant:"invisible",className:Of.toggleEmptyButton,...(0,ey.G)("toggle-empty-slicer-items"),children:[t?"Hide":"Show"," empty values"]}):null;try{Oy.displayName||(Oy.displayName="ListItemCountMetadata")}catch{}try{Ox.displayName||(Ox.displayName="ListContainer")}catch{}try{Ob.displayName||(Ob.displayName="SlicerIterationItem")}catch{}try{Ov.displayName||(Ov.displayName="StandardSlicerItem")}catch{}try{(k=ParentIssueTitleText).displayName||(k.displayName="ParentIssueTitleText")}catch{}try{(N=ParentIssueTitle).displayName||(N.displayName="ParentIssueTitle")}catch{}try{Oj.displayName||(Oj.displayName="SlicerGroupByItems")}catch{}try{OC.displayName||(OC.displayName="SlicerIterationItems")}catch{}try{OI.displayName||(OI.displayName="ToggleItemsButton")}catch{}let OS=({width:e,onResetSize:t})=>{let a="slicer-panel-resizer-sash",{attributes:{role:r,...n},listeners:i,setNodeRef:l,isDragging:s}=(0,kS.PM)({id:a,attributes:{role:"separator"}});return Lx("is-resizing-slicer-panel",s),(0,F.jsx)(lx.A,{ref:l,sx:{bg:s?"accent.fg":"border.default",cursor:"col-resize",position:"relative",transitionDelay:"0.1s",width:"1px",outline:"none",zIndex:10},"aria-valuenow":e,"aria-valuemin":176,"aria-valuemax":800,"aria-orientation":"vertical",id:a,role:r,...n,...(0,ey.G)("slicer-panel-resizer-sash"),tabIndex:-1,children:(0,F.jsx)(lx.A,{...i,sx:{cursor:"col-resize",inset:"0 -3px",position:"absolute",height:"100%"},...(0,ey.G)("slicer-panel-resizer-sash-drag-activator"),tabIndex:0,onDoubleClick:t})})},Ok=({onResize:e,onResizeEnd:t,width:a})=>{let[r,n]=(0,K.useState)(a),i=e=>{e!==r&&t(e)},l=(0,K.useCallback)((e,t)=>{let{currentCoordinates:a}=t,r={...a};switch(e.code){case"ArrowDown":case"ArrowLeft":r.x=r.x-25;break;case"ArrowUp":case"ArrowRight":r.x=r.x+25;break;case"Tab":e.preventDefault();break;default:return}return r},[]),s=(0,kS.FR)((0,kS.MS)(kS.cA),(0,kS.MS)(kS.uN,{coordinateGetter:l}));return(0,F.jsx)(kS.Mp,{autoScroll:!1,onDragCancel:()=>{e(r)},onDragEnd:()=>{i(a)},onDragMove:({delta:t,active:a})=>{let r=a.rect.current.initial;if(!r)return;let n=Math.floor(r.left+r.width/2)+t.x;n>800&&(n=800),n<176&&(n=176),e(Math.round(n))},onDragStart:()=>{n(a)},accessibility:{screenReaderInstructions:{draggable:"Press enter/space to resize pane with arrow keys. Press escape to exit."}},sensors:s,children:(0,F.jsx)(OS,{onResetSize:()=>{i(392)},width:a})})};try{OS.displayName||(OS.displayName="SlicerPanelResizerSash")}catch{}try{Ok.displayName||(Ok.displayName="SlicerPanelResizer")}catch{}let ON={display:"flex",justifyContent:"space-between",margin:"12px 12px 0 12px"},OT={minHeight:"34px",minWidth:"48px",display:"flex",alignItems:"center"},O_={...OT,flexshrink:1,color:"fg.default","[data-component=buttonContent]":{flex:"1 1"}},OA={display:"block",fontSize:1,fontWeight:"bold",maxWidth:"400px"},OR={...OT,flexShrink:0,color:"fg.muted",fontWeight:"normal"};function OP({slicerItems:e}){let{sliceField:t,sliceValue:a,setSliceValue:r,sliceByPanelWidth:n,setSliceByPanelWidth:i}=nA(),[l,s]=(0,K.useState)(!1),[o,d]=(0,K.useState)(!1),{currentView:u}=iS(),{viewType:c}=ma(),{postStats:m}=iN(),{hasWritePermissions:p}=eK(),[h,f]=(0,K.useState)({}),g=(0,K.useRef)(null),y=(0,K.useCallback)(e=>{if(!t||!u)return;let n=e!==a;r(u.number,n?e:null),m({name:n?"slice_item_selected":"slice_item_deselected",memexProjectColumnId:t.id,ui:tb,context:JSON.stringify({layout:c})})},[t,u,a,r,m,c]),x=(0,K.useCallback)(()=>{t&&u&&(r(u.number,null),m({name:"slicer_deselect",memexProjectColumnId:t.id,ui:tb,context:JSON.stringify({layout:c})}))},[t,u,r,m,c]),b=(0,K.useCallback)(e=>{t&&u&&(d(e),m({name:e?"slicer_show_empty":"slicer_hide_empty",memexProjectColumnId:t.id,ui:tb,context:JSON.stringify({layout:c})}))},[t,u,m,c]),v=(0,K.useCallback)(()=>t&&e?t.dataType===eN.Iteration?(0,F.jsx)(OC,{sliceValue:a,onSliceValueChange:y,slicerItems:e,showEmptySlicerItems:o,setShowEmptySlicerItems:b}):(0,F.jsx)(Oj,{sliceValue:a,onSliceValueChange:y,slicerItems:e,showEmptySlicerItems:o,setShowEmptySlicerItems:b}):null,[t,e,a,y,o,b]),w=(0,K.useCallback)(e=>{u&&f(t=>({...t,[u.number]:e}))},[u,f]),j=(0,K.useCallback)(e=>{u&&(f(e=>{let t={...e};return delete t[u.number],t}),i(e))},[u,i]);if(!u)return null;let C=h[u.number]??n??392,I=(0,vB.$)(Of.SlicerPanel,{[Of.Wide]:C>400,[Of.WritePermissions]:!p});return(0,F.jsxs)(lx.A,{sx:{gridArea:"1/1/-1",display:"flex",height:0,minHeight:"100%"},children:[(0,F.jsx)("div",{...(0,ey.G)("slicer-panel"),className:I,style:{width:`${C}px`},children:(0,F.jsx)(mz,{children:t&&e?(0,F.jsxs)(F.Fragment,{children:[(0,F.jsxs)(lx.A,{sx:ON,children:[(0,F.jsx)(p4.Q,{variant:"invisible",sx:O_,ref:g,"aria-expanded":l,onClick:()=>s(!l),trailingVisual:ly.TriangleDownIcon,children:(0,F.jsx)(h4.A,{...(0,ey.G)("slicer-panel-title"),id:"slicer-panel-title",title:t.name,sx:OA,children:t.name})}),a&&(0,F.jsx)(p4.Q,{variant:"invisible",sx:OR,onClick:x,size:"small",children:"Deselect"})]}),(0,F.jsx)(Od,{anchorRef:g,open:l,setOpen:s,ui:tb}),v()]}):null})}),p&&(0,F.jsx)(Ok,{onResize:w,onResizeEnd:j,width:C})]})}try{OP.displayName||(OP.displayName="SlicerPanel")}catch{}var OD=a(42522);let OE=(0,K.memo)((0,K.forwardRef)(({onClick:e},t)=>{let a=(0,K.useRef)(null),[r,n]=(0,K.useReducer)(e=>e+1,0),[i,l]=(0,K.useState)(!1),{dragType:s}=function(){let e=(0,K.useContext)(L8);if(null==e)throw Error("useIsDragging must be used within a DragDropContext");return e}(),{orderedTokenizedFilters:o,insertFilter:d}=lh(),{groupedByColumn:u}=ue(),{postStats:c}=iN(),m=(0,K.useRef)(null),p=(0,K.useId)(),{projectLimits:{singleSelectColumnOptionsLimit:h}}=eU();(0,K.useEffect)(()=>{let e=e=>{"Escape"===e.key&&l(!1)};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},[]);let[f,g]=(0,K.useMemo)(()=>{let e=dt(u),t=u?.name&&nm(u.name),{included:a,excluded:r}=o.filter(e=>"field"===e.type&&e.field===t).reduce((e,t)=>{if("field"===t.type)for(let a of no(t.value))e[t.exclude?"excluded":"included"].add(a);return e},{included:new Set,excluded:new Set}),n=e.filter(e=>e.id!==o2).length;return[e.filter(e=>e.id!==o2).map(e=>({id:e.id,text:e.name,selected:function(e,t,a){let r=LV(e);return!(t.size>0&&!rW(Array.from(t),r)||rW(Array.from(a),r))}(e,a,r)})),n]},[u,o]),[y,x]=t$(f,e=>e.selected);(0,K.useEffect)(()=>{r>0&&a.current&&a?.current?.scrollIntoView()},[r]);let b=(0,K.useRef)(g);(0,K.useEffect)(()=>{g>0&&g===b.current+1&&a?.current?.scrollIntoView({behavior:"smooth"}),b.current=g},[g]);let v=(0,K.useCallback)(e=>{if(u?.name){let{dataType:t,databaseId:a,name:r}=u;d(nm(r),e),n(),c({name:"board_column_plus_show",context:JSON.stringify({dataType:t,databaseId:a,name:r})})}},[n,u,d,c]),w=(0,K.useCallback)(e=>{if(u?.name){let{dataType:t,databaseId:a,name:r}=u;d(`-${nm(r)}`,e),n(),c({name:"board_column_plus_hide",context:JSON.stringify({dataType:t,databaseId:a,name:r})})}},[n,u,d,c]),j=(0,K.useCallback)(()=>{l(!0)},[]);return"column"===s?null:(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(OD.m,{text:"Add a new column to the board",ref:m,type:"label",children:(0,F.jsx)(p4.Q,{leadingVisual:ly.PlusIcon,"aria-haspopup":"true","aria-expanded":i,onClick:j,size:"small",...(0,ey.G)("add-new-column-button")})}),(0,F.jsx)(yu.W,{open:i,anchorRef:m,children:(0,F.jsx)(yu.W.Overlay,{onEscape:()=>l(!1),onClickOutside:()=>l(!1),"aria-labelledby":p,children:(0,F.jsxs)(fi.l,{...(0,ey.G)("add-new-column-menu"),children:[(0,F.jsx)(fi.l.Group,{children:(0,K.createElement)(fi.l.Item,{...(0,ey.G)("add-new-column-option-button"),key:"new-column-button",as:"button",onSelect:e,disabled:u?.dataType==="singleSelect"&&g>=h,ref:t,children:[(0,F.jsx)(fi.l.LeadingVisual,{children:(0,F.jsx)(ly.PlusIcon,{})}),"New Column"]})}),(0,F.jsx)(fi.l.Divider,{}),(0,F.jsxs)(fi.l.Group,{selectionVariant:"multiple",children:[(0,F.jsx)(fi.l.GroupHeading,{children:"Visible columns"}),y.map(e=>(0,F.jsx)(fi.l.Item,{selected:!0,onSelect:()=>w(e.text),children:e.text},e.text))]}),(0,F.jsxs)(fi.l.Group,{selectionVariant:"multiple",children:[(0,F.jsx)(fi.l.GroupHeading,{children:"Hidden columns"}),x.map(e=>(0,F.jsx)(fi.l.Item,{selected:!1,onSelect:()=>v(e.text),role:"menuitemcheckbox",children:e.text},e.text))]})]})})})]})}));OE.displayName="AddNewColumnOption";let OM={boardView:"Board-module__boardView--IHXJN"};function OB(e,t){if(t){let a=e.find(e=>e.id===t);if(a)switch(a.dataType){case eN.SingleSelect:case eN.Iteration:return a.id}}return eT.Status}function OL(){let{sorts:e}=un();return{sortUngroupedItems:(0,K.useCallback)(t=>[...t].sort(k$(e)),[e])}}let OF=(e,t)=>a=>Nk(a,e,t.getGroupingMetadata,t.getAllGroupMetadata),OO=[];function OG(){let{memex_table_without_limits:e}=iz();return e?function(){let{memex_mwl_sticky_board_columns:e}=iz(),{filteredItems:t}=Ot(),{groupedByColumnId:a,groupByFieldOptions:r=OO}=Lz(),{groupedByColumn:n,collapsedGroups:i}=d7(),{allColumns:l}=i5(),{currentView:s}=iS(),o=(0,K.useMemo)(()=>l.filter(da),[l]),d=(0,K.useMemo)(()=>OB(o,a),[o,a]),u=(0,K.useMemo)(()=>l.find(e=>e.id===d),[l,d]),{queriesForGroups:c,queriesForSecondaryGroups:m,groupedItemQueries:p,groupsById:h}=ul(),f=(0,K.useMemo)(()=>{if(n){let{horizontalGroups:e,allItemsByVerticalGroup:t}=OV(c,m,p,h,n);return function(e,t){for(let a of e)t.includes(a.value)&&(a.isCollapsed=!0)}(e,i),{allItemsByVerticalGroup:t,horizontalGroups:e,isHorizontalGrouped:!0,horizontalGroupedByColumn:n}}let e=OV(c,m,p,h,void 0).allItemsByVerticalGroup;return{isHorizontalGrouped:!1,allItemsByVerticalGroup:e,horizontalGroups:[{value:nH.undefined,isCollapsed:!1,itemsByVerticalGroup:e,rows:t,totalCount:t.length}]}},[n,c,m,p,h,t,i]),g=e&&c.every(e=>e.isLoading),y=(0,K.useRef)({}),x=`${s?.id||-1}-${d||-1}`,b=y.current[x]||OO;return(0,K.useEffect)(()=>{r.length&&!(0,ut.A)(r,y.current[x])&&(y.current[x]=r)},[r,x]),(0,K.useMemo)(()=>({groupByFieldOptions:g?b:r,groupByFieldId:d,groupByField:u,compatibleColumns:o,filteredItems:t,groupedItems:f,isLoading:g}),[r,b,d,u,o,t,f,g])}():function(){let{filteredItems:e}=Ot(),{groupedByColumnId:t,groupByFieldOptions:a=OO}=Lz(),{groupedByColumn:r,collapsedGroups:n}=d7(),{sortUngroupedItems:i}=OL(),{missingRequiredColumnData:l}=iS(),{allColumns:s}=i5(),o=(0,K.useMemo)(()=>s.filter(da),[s]),d=(0,K.useMemo)(()=>OB(o,t),[o,t]),u=(0,K.useMemo)(()=>s.find(e=>e.id===d),[s,d]),c=OH(),m=(0,K.useMemo)(()=>{let t=Object.fromEntries(Object.entries(OW(e,d,a,l)).map(([e,t])=>[e,{items:i(t),totalCount:t.length}]));if(r){let s=c[r?.id],o=s?.groupingConfig?.(e).map(e=>{let t=Object.fromEntries(Object.entries(OW(e.rows,d,a,l)).map(([e,t])=>[e,{items:i(t)}]));return{...e,isCollapsed:n.includes(e.value),itemsByVerticalGroup:t,totalCount:e.rows.length}}).filter(e=>e.rows.length>0)??[];if(o.length>0)return{isHorizontalGrouped:!0,horizontalGroupedByColumn:r,allItemsByVerticalGroup:t,horizontalGroups:o}}return{isHorizontalGrouped:!1,allItemsByVerticalGroup:t,horizontalGroups:[{value:nH.undefined,isCollapsed:!1,itemsByVerticalGroup:t,rows:e,totalCount:e.length}]}},[r,e,d,a,l,i,c,n]);return(0,K.useMemo)(()=>({groupByFieldOptions:a,groupByFieldId:d,groupByField:u,compatibleColumns:o,filteredItems:e,groupedItems:m,isLoading:!1}),[a,d,u,o,e,m])}()}function OV(e,t,a,r,n){let i={},l=[],s=e.flatMap(e=>e?.data?.groups||[]);for(let e of s){let t=a[e.groupId],n=t?.flatMap(e=>e.data?.nodes||[])||[],l=O$(e),s=r[e.groupId],o=s?.totalCount.value;i[l]={items:n,groupId:e.groupId,totalCount:o}}if(!n)return{allItemsByVerticalGroup:i,horizontalGroups:l};for(let e of t.flatMap(e=>e?.data?.groups||[])){let t=fq(n,e.groupValue,e.groupMetadata),i={};for(let t of s){let r=a[sZ({groupId:t.groupId,secondaryGroupId:e.groupId})],n=r?.flatMap(e=>e.data?.nodes||[])||[],l=O$(t),s=!!r&&!!r[r.length-1]?.data?.pageInfo.hasNextPage;i[l]={items:n,groupId:t.groupId,hasMoreItems:s}}let o=r[e.groupId],d=o?.totalCount.value||0,u=a[e.groupId]?.flatMap(e=>e.data?.nodes||[])||[];t&&l.push({isCollapsed:!1,itemsByVerticalGroup:i,rows:u,sourceObject:t,value:e.groupValue,serverGroupId:e.groupId,totalCount:d})}return{allItemsByVerticalGroup:i,horizontalGroups:l}}function O$(e){return e.groupValue===sn?o2:e.groupId}function OW(e,t,a,r){let n={},i=a.reduce((e,t)=>(n[t.groupMetadata?.id??""]=t.id,e[t.id]=[],e),{});if(r)return i;for(let a of e){let e=function(e,t){if(-1!==t)return e[t]}(a.columns,t),r=n[e?.id??""];r&&i[r]?.push(a)}return i}let Oz=Oa(e=>e.columns),OH=()=>{let{allColumns:e}=i5();return(0,K.useMemo)(()=>Object.fromEntries(e.map(e=>{let t=Oz[e.dataType];return[e.id,{...e,groupingConfig:t?OF(e,t):void 0}]})),[e])},OU=(0,K.createContext)(null),Oq=(0,K.memo)(function({children:e}){return(0,F.jsx)(OU.Provider,{value:OG(),children:e})}),OK=()=>{let e=OQ();return(0,ee.A)(null!=e),e},OQ=()=>(0,K.useContext)(OU);try{OU.displayName||(OU.displayName="BoardContext")}catch{}try{Oq.displayName||(Oq.displayName="BoardContextProvider")}catch{}function OJ(e){return null!=e&&"serverGroupId"in e}let OX={TOP:"top"},OY=(0,K.createContext)(null),OZ=({groupByFieldId:e,horizontalGroupByFieldId:t,children:a})=>{let{updateAndReorderItem:r}=wq(),{groupedItems:n}=OG(),{bulkUpdateMultipleColumnValues:i}=N5(),{getUpdateForGroupDropEvent:l,handleGroupDropRequestError:s}=Ni(),{memex_table_without_limits:o}=iz(),{sorts:d,clearSortedBy:u}=un(),{addToast:c}=lV(),m=(0,U.jE)(),p=(0,K.useCallback)(async(t,a,n,i,o,d,u)=>{if(t.id===a)return;let c=[],m=!1;if(d?.sourceObject&&u?.sourceObject&&d.value!==u.value){let e=await l({activeItem:t,activeItemGroup:d,overItemGroup:u});e?c.push(e):m=!0}i&&!m&&c.push({dataType:eN.SingleSelect,memexProjectColumnId:e,value:{id:i.groupMetadata?.id??""}});let p="top"===n?wV.BEFORE:wV.AFTER,h=wK(c,null!=a?{overItemId:a,side:p}:void 0);if(h)try{await r(t.id,h,{layoutType:"board"})}catch(e){s(e)}},[l,e,s,r]),h=(0,K.useCallback)(async(t,a,i,o,m,p,h)=>{if(t.id===a)return;let f=[],g=!1;if(p?.sourceObject&&h?.sourceObject&&p.value!==h.value){let e=await l({activeItem:t,activeItemGroup:p,overItemGroup:h});e?f.push(e):g=!0}o&&o.id!==m&&!g&&f.push({dataType:eN.SingleSelect,memexProjectColumnId:e,value:{id:o.groupMetadata?.id??""}});let y="top"===i?wV.BEFORE:wV.AFTER,x=null!=a?{overItemId:a,side:y}:{overGroupId:n.allItemsByVerticalGroup[o?.id||""]?.groupId||""};"overGroupId"in x&&OJ(h)&&(x.overSecondaryGroupId=h.serverGroupId);let b=wK(f,x);if(!b)return;let v=null!=m&&m===o?.id,w=p?.sourceObject===h?.sourceObject,j="overGroupId"in x;if(v&&w&&!j){let e=null!=h?h.itemsByVerticalGroup[m]:n.allItemsByVerticalGroup[m];if(e){for(let a of d)if(!function(e,t,a,r,n){let i=function(e){let t=kV(e);return(e,a)=>0===t(e,a,void 0,!0)}(t),l=a.findIndex(t=>t.id===e.id),s=a.findIndex(e=>e.id===r);"before"===n&&s>l?s-=1:"after"===n&&s<l&&(s+=1);let o=a[s];return!o||i(e,o)}(t,a.column,e.items,x.overItemId,x.side)){let e={text:nH.cannotReorderForSortAction,handleClick:()=>u()};c({message:nH.cannotReorderForSortMessage,type:nF.warning,action:e});return}}}try{await r(t.id,b,{layoutType:"board"})}catch(e){s(e)}},[c,u,l,e,n.allItemsByVerticalGroup,s,d,r]),f=o?h:p,g=(0,K.useCallback)(async(e,t,a)=>{let i=n.allItemsByVerticalGroup[t]?.items,l=a===OX.TOP?i?.at(0):i?.at(-1);if(!l)return;let s=wK(void 0,{overItemId:l.id,side:a===OX.TOP?wV.BEFORE:wV.AFTER});s&&await r(e,s,{})},[n.allItemsByVerticalGroup,r]),y=(0,K.useCallback)(async(a,r,n,d)=>{let u=o?function(e,t,a){let r=dd(e,a.id);return!!r&&t.every(t=>o$(e,t.id,r))}(m,a,r):function(e,t,a){return e.every(e=>{let r=e.columns[a];return r?aM(r)&&r.id===t.groupMetadata?.id:t.id===o2})}(a,r,e);if(!t&&u)return;let c=[],p=!1;for(let t of a){let a=[];if(n?.sourceObject&&d?.sourceObject){let e=await l({activeItem:t,activeItemGroup:n,overItemGroup:d});if(e)a.push(e);else{p=!0;break}}r&&!p&&a.push({dataType:eN.SingleSelect,memexProjectColumnId:e,value:{id:r.groupMetadata?.id??""}}),c.push({itemId:t.id,updates:a})}if(!p){let e;try{if(o){let t=dd(m,r.id);if(t){let r=OJ(d)?d.serverGroupId:void 0;e=function(e,t,a,r){let n=o_(e),i=oj(e,n);if(!oc(i))return;let l=new Map;for(let a of t){let t=oA(e,a.id);if(t){let e=l.get(t);e?e.add(a):l.set(t,new Set([a]))}}let s={groupId:a,secondaryGroupId:r},o=[...of(e),s,sd],d={queryData:[],totalCounts:ow(e,n)},u={};for(let[t,a]of l.entries())if(e.setQueryData(t,e=>{if(!oP(e))return e;d.queryData.push({queryData:e,queryKey:t});let r=e.nodes.filter(e=>!a.has(e));return{...e,nodes:r}}),sq(t)){let e=t[3].groupId;u[e]?u[e]-=a.size:u[e]=-a.size;let r=t[3].secondaryGroupId;r&&(u[r]?u[r]-=a.size:u[r]=-a.size)}if(e.getQueryData(o))e.setQueryData(o,e=>{if(!oP(e))return e;d.queryData.push({queryData:e,queryKey:o});let a=[...t,...e.nodes];return{...e,nodes:a}});else{e.setQueryData(o,{nodes:t,pageInfo:{hasNextPage:!1,hasPreviousPage:!1}});let a=sZ(s);oC(e,n,{...i,groupedItems:{...i.groupedItems,[a]:[sd]}}),d.queryData.push({queryKey:o,queryData:{nodes:[],pageInfo:{hasNextPage:!1,hasPreviousPage:!1}}})}u[a]?u[a]+=t.length:u[a]=t.length,r&&(u[r]?u[r]+=t.length:u[r]=t.length);let c={groups:{}};for(let[t,a]of Object.entries(u))c.groups[t]=ov(e,n,t,a);return ox(e,n,c),d}(m,a,t,r)}}await i(c)}catch(t){s(t),e&&oU(m,e)}}},[i,l,e,s,t,o,m]),x=(0,K.useMemo)(()=>({moveCard:f,moveCards:y,moveCardToPosition:g}),[f,g,y]);return(0,F.jsx)(OY.Provider,{value:x,children:a})};function O0(){let e=(0,K.useContext)(OY);if(null==e)throw Error("useBoardCardActions must be used within a BoardCardActionsContext");return e}try{OY.displayName||(OY.displayName="BoardCardActionsContext")}catch{}let O1={RESET_STATE:"RESET_STATE",SET_DROP:"SET_DROP"},O2={dropId:void 0,dropSide:void 0};function O5(e,t){switch(t.type){case O1.RESET_STATE:return{...O2};case O1.SET_DROP:return{...e,dropId:t.dropId,dropSide:t.dropSide};default:return e}}let O3={TOGGLE_SELECTED:"TOGGLE_SELECTED",TOGGLE_ALL_SELECTED:"TOGGLE_ALL_SELECTED",EXPAND_COLUMN_SELECTION:"EXPAND_COLUMN_SELECTION",EXPAND_COLUMN_SELECTION_VIA_KEYS:"EXPAND_COLUMN_SELECTION_VIA_KEYS",SELECT_ALL_CYCLE:"SELECT_ALL_CYCLE",INIT:"INIT"},O4=(e,t)=>({type:O3.TOGGLE_SELECTED,itemId:e,state:t}),O6=e=>({type:O3.TOGGLE_ALL_SELECTED,state:e}),O8=e=>({type:O3.INIT,state:e}),O7=(e,t,a)=>({type:O3.EXPAND_COLUMN_SELECTION,anchorColumnIndex:e,anchorId:t,targetId:a}),O9=(e,t,a)=>({type:O3.EXPAND_COLUMN_SELECTION_VIA_KEYS,anchorColumnIndex:e,anchorId:t,direction:a}),Ge=e=>({type:O3.SELECT_ALL_CYCLE,columnIndex:e}),Gt=(e,t)=>{let a=t.state,r=e.selected[t.itemId]??!1;return{selected:{...e.selected,[t.itemId]:void 0!==a?a:!r}}},Ga=(e,t)=>{if(!0!==t.state)return{selected:{}};{let t=e.current.cardGrid.flatMap(e=>e.verticalGroups.flatMap(e=>e.items)),a={selected:{}};return t.map(e=>a.selected[e.id]=!0),a}},Gr=(e,t,a)=>{let r=t.current.cardGrid.flatMap(e=>e.verticalGroups[a.anchorColumnIndex]?.items??[]),n=r.findIndex(e=>e.id===a.anchorId),i=r.findIndex(e=>e.id===a.targetId);if(!(n>-1)||!(i>-1))return e;{let t=[];if(i<n?t=r.slice(i,n+1):i>n&&(t=r.slice(n,i+1)),!t.length)return e;{let e={selected:{}};for(let a of t)e.selected[a.id]=!0;return e}}},Gn=(e,t,a)=>{let r=t.current.cardGrid.flatMap(e=>e.verticalGroups[a.anchorColumnIndex]?.items??[]),n=r.reduce((e,t,a)=>(e[t.id]=a,e),{}),i=n[a.anchorId];if(void 0===i)return e;{let{selected:t}=e,l=Object.keys(t).filter(e=>t[e]&&void 0!==n[e]).sort((e,t)=>(n[e]??0)-(n[t]??0)),s=n[l[0]]??i,o=n[l[l.length-1]]??i,d=a.direction===T3.Up,u=a.direction===T3.Down,c=[];if(l.length<=1?d?c=r.slice(s-1,s+1):u&&(c=r.slice(s,s+2)):i<o?d?c=r.slice(s,o):u&&(c=r.slice(s,o+2)):d&&0!==s?c=r.slice(s-1,i+1):u&&(c=r.slice(s+1,i+1)),!c.length)return e;{let e={selected:{}};return c.map(t=>e.selected[t.id]=!0),e}}},Gi=(e,t,a)=>{let r=Object.keys(e.selected).filter(t=>!0===e.selected[t]),n=t.current.cardGrid.reduce((e,t)=>e+t.verticalGroups.reduce((e,t)=>e+t.items.length,0),0),i=t.current.cardGrid.flatMap(e=>e.verticalGroups[a.columnIndex]?.items??[]),l=0===r.length||r.length<i.length,s=r.length===n,o=i.every(e=>r.includes(e.id.toString()));if(l){let e={selected:{}};return i.map(t=>e.selected[t.id]=!0),e}return s?{selected:{}}:o?Ga(t,O6(!0)):e},Gl=(e,t)=>(0,K.useReducer)((e,a)=>{switch(a.type){case O3.TOGGLE_SELECTED:return Gt(e,a);case O3.TOGGLE_ALL_SELECTED:return Ga(t,a);case O3.EXPAND_COLUMN_SELECTION:return Gr(e,t,a);case O3.EXPAND_COLUMN_SELECTION_VIA_KEYS:return Gn(e,t,a);case O3.SELECT_ALL_CYCLE:return Gi(e,t,a);case O3.INIT:return a.state;default:return e}},e),{CardSelectionProvider:Gs,useCardSelectionDispatch:Go}=(()=>{let e=(0,K.createContext)({state:{selected:{}},selectionDispatch:()=>void 0}),t=(0,K.memo)(function({initialState:t,metaRef:a,children:r}){let[n,i]=Gl(t,a),l=(0,K.useMemo)(()=>({state:n,selectionDispatch:i}),[n,i]);return Lx("is-keyboard-moving-card",Object.keys(n.selected).length>0),(0,F.jsx)(e.Provider,{value:l,children:r})});return{CardSelectionContext:e,CardSelectionProvider:t,useCardSelectionDispatch:()=>(0,K.useContext)(e)}})();try{(T=CardSelectionContext).displayName||(T.displayName="CardSelectionContext")}catch{}try{Gs.displayName||(Gs.displayName="CardSelectionProvider")}catch{}function Gd(e,t,a,r){let{selectionDispatch:n,state:{selected:i}}=Go(),{findMemexItem:l}=ub(),{navigationDispatch:s,stateRef:o}=u9(),d=(0,K.useCallback)((e,t)=>{n(O4(e,t))},[n]),u=(0,K.useCallback)(e=>{n(O6(e))},[n]),c=(0,K.useCallback)(e=>{u(!1),d(e,!0)},[u,d]),m=(0,K.useCallback)(()=>{n(O8({selected:{}}))},[n]),p=(0,K.useCallback)((e,t,a)=>{n(O7(e,t,a))},[n]),h=(0,K.useCallback)(e=>{if(o.current?.focus?.type==="coordinate"){let{x:t,y:a}=o.current.focus.details;n(O9(t,a,e))}},[o,n]),f=Object.keys(i).filter(e=>!0===i[e]).map(Number),g=(0,K.useMemo)(()=>f.map(e=>l(e)).filter(rc).filter(e=>e.contentType!==eJ.RedactedItem),[l,f]),[y,x]=(0,K.useMemo)(()=>{let e=g.map(e=>e.id);return[e,new Set(e)]},[g]);return{expandColumnSelectionViaKeys:h,onCardClick:(0,K.useCallback)(n=>{if(e&&e.contentType!==eJ.RedactedItem&&!n.defaultPrevented){if(t?.current?.contains(n.target)){n.stopPropagation();return}if(n.shiftKey&&o.current?.focus?.type==="coordinate"){let{x:t,y:a}=o.current.focus.details;p(t,a,e.id)}else if(rh(n)&&o.current?.focus?.type==="coordinate"){if(0===f.length){let{y:e}=o.current.focus.details;d(e,!0)}d(e.id),void 0!==r&&void 0!==a&&s(cr(a,r,e.id))}else g.length>1&&!x.has(e.id)?m():Lq()||m();n.stopPropagation()}},[a,r,t,p,x,g.length,o,e,s,m,f.length,d]),resetSelection:m,filteredSelectedCardIds:y,selectSingleCard:c,state:i,toggleAllSelected:u,toggleCardSelected:d,selectAllCycle:(0,K.useCallback)(()=>{void 0!==r&&n(Ge(r))},[r,n]),filteredSelectedCards:g}}let Gu={CARD:"card",COLUMN:"column"};function Gc(e){return!!e&&"object"==typeof e&&"type"in e&&"string"==typeof e.type&&(e.type===Gu.CARD||e.type===Gu.COLUMN)}function Gm(e){return Gc(e)&&e.type===Gu.CARD}function Gp(e){return Gc(e)&&e.type===Gu.COLUMN}function Gh({children:e,setDraggingItem:t}){let{groupedItems:a}=OK(),{moveCard:r,moveCards:n}=O0(),{resetSelection:i,filteredSelectedCards:l}=Gd(),{navigationDispatch:s}=u9(),[{dropId:o,dropSide:d},u]=(0,K.useReducer)(O5,O2),{postStats:c}=iN(),{memex_small_viewport_a11y:m,memex_touch_to_drag:p}=iz(),{isSorted:h}=un(),f=h||l.length>1,g=(0,kS.MS)(kS.IG,{activationConstraint:{delay:250,tolerance:5,distance:2,autoscrollEnabled:!0}}),y=(0,kS.MS)(kS.cA,{activationConstraint:{distance:2,autoscrollEnabled:!1}}),x=(0,kS.MS)(kS.AN,{activationConstraint:{distance:2}}),b=(0,kS.FR)(...m&&p?[g,y]:[x]),v=x_(),w=(0,K.useRef)(!1),j=(0,K.useCallback)(()=>{t(null),u({type:O1.RESET_STATE}),requestAnimationFrame(()=>{L5()}),w.current=!1},[u,t]),C=(0,K.useCallback)(e=>{j();let t=e.active.data.current,i=e.over?.data.current;if(Gm(i)&&Gm(t)){let e=a.horizontalGroups[t.horizontalGroupIndex],u=a.horizontalGroups[i.horizontalGroupIndex];(0,ee.A)(e),(0,ee.A)(u);let[m,p]=function(e,t,a){if(null==t||"top"===a)return[t,a];let r=e.findIndex(({id:e})=>e===t),n=e[r+1];return n?[n.id,"top"]:[t,a]}(u.itemsByVerticalGroup[i.verticalGroup.id]?.items??[],o?Number(o):void 0,d===wV.BEFORE?"top":"bottom");s(cr(i.horizontalGroupIndex,i.columnIndex,t.item.id)),l.length>1?n(l,i.verticalGroup,e,u):r(t.item,m,p,i.verticalGroup,t.verticalGroup.id,e,u),c({name:tN,ui:tT.MouseMove,context:JSON.stringify({fieldId:i.verticalGroup.groupMetadata?.id??o2,...l.length>1?{itemIds:l.map(e=>e.id)}:{itemId:t.item.id}})})}else if(Gp(i)&&Gm(t)){let e=a.horizontalGroups[t.horizontalGroupIndex],d=a.horizontalGroups[i.horizontalGroupIndex];(0,ee.A)(e),(0,ee.A)(d),s(cr(i.horizontalGroupIndex,i.index,t.item.id)),l.length>1?n(l,i.verticalGroup,e,d):r(t.item,o,"bottom",i.verticalGroup,t.verticalGroup.id,e,d),c({name:tN,ui:tT.MouseMove,context:JSON.stringify({fieldId:i.verticalGroup.groupMetadata?.id??o2,...l.length>1?{itemIds:l.map(e=>e.id)}:{itemId:t.item.id}})})}},[j,o,d,s,l,c,n,r,a.horizontalGroups]),I=(0,K.useCallback)(e=>{l.length<=1&&i(),w.current=!0;let a=e.active.data.current;Gm(a)&&t(a.item)},[i,l.length,t]),S=(0,K.useCallback)(()=>j(),[j]),k=(0,K.useCallback)(e=>{if(!e.over||!w.current){L5();return}let t=e.over?.data.current;if(!t){u({type:O1.RESET_STATE});return}if(Gm(t)){let a=t?.item.id,r=wW(e);t.ref.current&&a&&(u({type:O1.SET_DROP,dropId:a,dropSide:r}),f||L2(t.ref.current,r,Gu.CARD))}else if(Gp(t)){let e=a.horizontalGroups[t.horizontalGroupIndex];(0,ee.A)(e);let r=e.itemsByVerticalGroup[t.verticalGroup.id]?.items.at(-1)?.id,n=r?document.querySelector(`[data-board-card-id="${r}"]`):void 0,i=wV.AFTER;u({type:O1.SET_DROP,dropId:r,dropSide:i}),!f&&n?L2(n,i,Gu.CARD):L5()}},[f,u,a.horizontalGroups]);return(0,F.jsx)(kS.Mp,{sensors:b,autoScroll:!1,accessibility:(0,K.useMemo)(()=>({container:v}),[v]),onDragStart:I,onDragMove:k,onDragEnd:C,onDragCancel:S,children:e})}try{Gh.displayName||(Gh.displayName="BoardDndContext")}catch{}function Gf(){let{memex_table_without_limits:e}=iz();if(!e)return 0;let{totalCount:t}=ul();return t.value}let Gg=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"login"},{defaultValue:null,kind:"LocalArgument",name:"number"}],t=[{kind:"Variable",name:"login",variableName:"login"}],a=[{kind:"Variable",name:"number",variableName:"number"}],r={alias:null,args:null,kind:"ScalarField",name:"suggestedIssueTypeNames",storageKey:null},n={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"useFetchFilterSuggestedIssueTypesQuery",selections:[{alias:null,args:t,concreteType:"Organization",kind:"LinkedField",name:"organization",plural:!1,selections:[{alias:null,args:a,concreteType:"ProjectV2",kind:"LinkedField",name:"projectV2",plural:!1,selections:[r],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"useFetchFilterSuggestedIssueTypesQuery",selections:[{alias:null,args:t,concreteType:"Organization",kind:"LinkedField",name:"organization",plural:!1,selections:[{alias:null,args:a,concreteType:"ProjectV2",kind:"LinkedField",name:"projectV2",plural:!1,selections:[r,n],storageKey:null},n],storageKey:null}]},params:{id:"2ca7c54da2cefe8741d6ed91728d3931",metadata:{},name:"useFetchFilterSuggestedIssueTypesQuery",operationKind:"query",text:null}}}();Gg.hash="552be06f930d82c53af4c0cd3521c6f6";let Gy=()=>{let e=(0,ek.useRelayEnvironment)(),[t,a]=(0,K.useState)(void 0),{projectOwner:r,projectData:n}=eU(),i=(0,K.useCallback)(async(t,r)=>{try{if(e&&t&&r){let n=await (0,ek.fetchQuery)(e,Gg,{login:t,number:r},{fetchPolicy:"store-or-network"}).toPromise();a(n?.organization?.projectV2?.suggestedIssueTypeNames||[])}}catch{return[]}},[e]);return(0,K.useEffect)(()=>{i(r?.login,n?.number)},[i,r?.login,n?.number]),{suggestedIssueTypeNames:t}},Gx={display:"flex",alignItems:"center",p:"12px 16px",gridArea:"1/2"},Gb=(0,K.memo)(function({isFocused:e,...t}){let{searchInputRef:a}=lh();return(0,K.useEffect)(()=>{e&&a.current?.focus()},[e,a]),(0,F.jsx)(Gv,{...t})}),Gv=(0,K.memo)(function(e){let{currentView:t,isViewStateDirty:a,saveCurrentViewState:r,resetViewState:n}=iS(),{hasWritePermissions:i}=eK(),l=t?.number,s=(0,K.useCallback)(async()=>{void 0!==l&&await r(l,{ui:e8})},[l,r]),o=(0,K.useCallback)(async()=>{void 0!==l&&n(l,{ui:e8})},[l,n]);return(0,F.jsx)(Gw,{onResetChanges:a?o:void 0,onSaveChanges:!t?.isDeleted&&a?s:void 0,hideSaveButton:!i,...e})}),Gw=(0,K.memo)(function({dispatchInputFocusEvent:e,filterCount:t,children:a,...r}){let{currentView:n}=iS(),{query:i,setQuery:l,searchInputRef:s,addSpaceToQuery:o,clearSearchQuery:d}=lh(),u=(0,K.useRef)(null),c=(0,K.useMemo)(()=>(0,nN.A)(l,200),[l]),m=n?.number;(0,K.useImperativeHandle)(s,()=>u.current);let[p,h]=(0,xX.N)(i),f=(0,nk.M)(o),g=(0,K.useCallback)(()=>{w.current?.classList.add("is-focused"),e&&e()},[e]),y=(0,K.useCallback)(()=>{w.current?.classList.remove("is-focused")},[]),x=(0,K.useCallback)(e=>{void 0!==m&&(c.cancel(),h(e),c(m,e))},[m,c,h]),b=(0,K.useCallback)(e=>{x(e.target.value)},[x]),v=(0,K.useCallback)(e=>{x(e)},[x]);f9((0,K.useCallback)(()=>{g(),f.current()},[g,f]));let w=(0,K.useRef)(null),j=(0,K.useCallback)(()=>{void 0!==m&&d(m)},[d,m]),C=(0,K.useCallback)(()=>{s.current&&s.current.selectionStart&&s.current.value.length&&s.current.selectionStart>=s.current.value.length&&f.current()},[s,f]);return(0,F.jsx)(lx.A,{sx:Gx,children:(0,F.jsx)(Gj,{children:(0,F.jsx)(gG,{height:"32px",containerRef:w,value:p,onChange:b,onChangeValue:v,onBlur:y,onFocus:g,onInputClick:C,inputRef:u,filterCount:i.length>0?t:null,onClearButtonClick:j,setValueFromSuggestion:x,...r,children:a})})})});Gb.displayName="BaseProjectViewFilterInput";let Gj=(0,K.memo)(function({children:e}){let{items:t}=ug(),{suggestedIssueTypeNames:a}=Gy(),r=(0,K.useMemo)(()=>({items:t,issueTypeSuggestedNames:a}),[t,a]);return(0,F.jsx)(fb.Provider,{value:r,children:e})});try{Gv.displayName||(Gv.displayName="BaseProjectInputWithActions")}catch{}try{Gw.displayName||(Gw.displayName="ProjectInputWithSearchContext")}catch{}try{Gj.displayName||(Gj.displayName="MemexItemsSuggestionsProvider")}catch{}let GC=()=>{let{navigationDispatch:e}=u9();return{enableOmnibar:(0,K.useCallback)((t={horizontalGroupIndex:0})=>{var a,r;e((a=t.columnId,r=t.horizontalGroupIndex,u2({focusType:u6.Focus,details:{type:"footer",verticalGroupId:a,horizontalGroupIndex:r}})))},[e]),disableOmnibar:(0,K.useCallback)(()=>{e(ci())},[e])}},GI=(0,K.memo)(function(){let{navigationDispatch:e}=u9(),{state:{focus:t,previousFocus:a}}=u7(),r=(0,K.useCallback)(()=>{e(u2({focusType:u6.Focus,details:{type:"search-input"}}))},[e]),{memex_table_without_limits:n}=iz(),{filteredItems:i,groupedItems:l,groupByFieldOptions:s}=OK(),o=n?Gf():i.length,{enableOmnibar:d}=GC(),u=(0,K.useCallback)(t=>{if(a&&fA(t)===fN.ESCAPE){e(cn());return}for(let[t,a]of l.horizontalGroups.entries())if(!a.isCollapsed)for(let[r,n]of s.entries()){let i=a.itemsByVerticalGroup[n.id]?.items;if(i&&i.length>0){let a=i[0]?.id;if(!a)return;e(cr(t,r,a));return}}d(),t.preventDefault(),t.stopPropagation()},[a,d,e,l.horizontalGroups,s]),c=(0,K.useCallback)(e=>{switch(fA(e)){case fN.ESCAPE:case fN.ARROW_DOWN:u(e);return}},[u]),m=(0,K.useCallback)(e=>{if(fA(e)===fN.ARROW_DOWN){u(e);return}},[u]);return(0,F.jsx)(Gb,{onInputKeyDown:c,onClearButtonKeyDown:m,dispatchInputFocusEvent:r,isFocused:ca(t),filterCount:(0,K.useDeferredValue)(o)})});try{GI.displayName||(GI.displayName="BoardFilterInput")}catch{}let GS={backgroundColor:"canvas.default",borderBottomColor:"border.default",borderBottomStyle:"solid",borderBottomWidth:"1px",paddingLeft:3,height:"44px",display:"flex",gap:3,alignItems:"center",position:"relative","&.collapsed":{borderBottomColor:"transparent"},"&.board":{borderRightColor:"border.default",borderRightStyle:"solid",borderRightWidth:"1px",borderTopColor:"border.default",borderTopStyle:"solid",borderTopWidth:"1px",borderLeft:"1px solid",borderLeftColor:"border.default",marginRight:"8px",paddingLeft:2,gap:2},"&.board.collapsed":{borderBottomColor:"border.default"},"&.board.collapsed:has(+ .board)":{borderBottomColor:"transparent"},"&.sticky":{position:"sticky",top:0,zIndex:1},"&.highlighted":{borderTop:"1px solid",borderTopColor:"accent.fg"},"&.highlighted + &":{borderTop:"1px solid",borderTopColor:"accent.fg"}},Gk=(0,K.forwardRef)(({topOffset:e,style:t,sx:a,...r},n)=>(0,F.jsx)(lx.A,{ref:n,sx:{...GS,...a},style:{top:e??0,...t},...r}));Gk.displayName="StyledGroupHeader";var GN=a(57304);let GT=(0,q.Jt)("colors.neutral.subtle"),G_=(0,q.Jt)("colors.neutral.muted"),GA=(0,Z.i7)(["from{background-position:-200px 0;}to{background-position:200px 0;}"]),GR=(0,Z.AH)(["background-image:linear-gradient( to right,"," 0%,"," 40%,"," 50%,"," 100% );background-color:",";background-size:200px 50px;animation:"," 1.5s linear infinite;"],GT,G_,GT,GT,(0,q.Jt)("colors.border.muted"),GA),GP=Z.Ay.div.withConfig({displayName:"placeholders__TextPlaceholder",componentId:"sc-434d631d-0"})(["display:inline-block;width:","px;height:4px;border-radius:var(--borderRadius-medium);"," ",""],e=>e.minWidth+Math.floor(Math.random()*(e.maxWidth-e.minWidth)),GR,GN.xe),GD=Z.Ay.div.withConfig({displayName:"placeholders__PillPlaceholder",componentId:"sc-434d631d-1"})(["--width:","px;display:inline-block;width:var(--width);height:14px;border-radius:100px;"," ",""],e=>e.minWidth+Math.floor(Math.random()*(e.maxWidth-e.minWidth)),GR,GN.xe),GE=Z.Ay.div.withConfig({displayName:"placeholders__AvatarPlaceholder",componentId:"sc-434d631d-2"})(["display:inline-block;width:20px;height:20px;border-radius:20px;"," ",""],GR,GN.xe),GM=()=>{let e=(0,K.useRef)(null),{isVisible:t,isCurrentlyVisible:a}=pA({ref:e}),r=(0,K.useRef)(!1),{isFetchingNextPage:n,fetchNextPage:i,hasNextPage:l,hasInitialData:s}=ul(),{memex_mwl_visible_paginator:o}=iz();return(0,K.useEffect)(()=>{GO({isVisible:t,hasInitialData:s,hasNextPage:l,isFetchingNextPage:n,skipFetch:!1,isCurrentlyVisible:a,prevIsVisible:r,memex_mwl_visible_paginator:o})&&i()},[i,s,l,n,t,o,a]),(0,K.useMemo)(()=>({ref:e,hasNextPage:l}),[l])},GB=(e=!1)=>{let t=(0,K.useRef)(null),{isVisible:a,isCurrentlyVisible:r}=pA({ref:t}),n=(0,K.useRef)(!1),{isFetchingNextPage:i,fetchNextPage:l,hasNextPage:s,hasInitialData:o}=ul(),{memex_mwl_visible_paginator:d}=iz();return(0,K.useEffect)(()=>{GO({isVisible:a,hasInitialData:o,hasNextPage:s,isFetchingNextPage:i,skipFetch:e,isCurrentlyVisible:r,prevIsVisible:n,memex_mwl_visible_paginator:d})&&l()},[l,o,s,i,a,r,e,d]),(0,K.useMemo)(()=>({ref:t,hasNextPage:s}),[s])},GL=()=>{let e=(0,K.useRef)(null),{isVisible:t,isCurrentlyVisible:a}=pA({ref:e}),r=(0,K.useRef)(!1),{isFetchingNextPageForSecondaryGroups:n,fetchNextPageForSecondaryGroups:i,hasNextPageForSecondaryGroups:l,hasInitialData:s}=ul(),{memex_mwl_visible_paginator:o}=iz();return(0,K.useEffect)(()=>{GO({isVisible:t,hasInitialData:s,hasNextPage:l,isFetchingNextPage:n,skipFetch:!1,isCurrentlyVisible:a,prevIsVisible:r,memex_mwl_visible_paginator:o})&&i()},[i,s,l,n,t,a,o]),(0,K.useMemo)(()=>({ref:e,hasNextPage:l}),[l])},GF=e=>{let t=(0,K.useRef)(null),{isVisible:a}=pA({ref:t}),{isFetchingNextPageForGroupedItems:r,fetchNextPageForGroupedItems:n,hasNextPageForGroupedItems:i}=ul();return(0,K.useEffect)(()=>{a&&i({groupId:e})&&!r({groupId:e})&&n({groupId:e})},[n,e,i,r,a]),(0,K.useMemo)(()=>({ref:t,hasNextPage:i({groupId:e})}),[i,e])},GO=({isVisible:e,hasInitialData:t,hasNextPage:a,isFetchingNextPage:r,skipFetch:n=!1,isCurrentlyVisible:i,prevIsVisible:l,memex_mwl_visible_paginator:s})=>{let o=l.current===e;return l.current=e,(!!s||!o)&&!!e&&!n&&!!t&&!r&&!!a&&(!o||!s||i())},GG=(0,Z.Ay)(lx.A).withConfig({displayName:"card-base__CardBase",componentId:"sc-87974864-0"})(["&:hover{border-color:",";}body:not(.is-keyboard-moving-card) &:focus-within :not(.js-disable-context-menu).js-context-menu-trigger,body:not(.is-keyboard-moving-card) &:focus :not(.js-disable-context-menu).js-context-menu-trigger,&:hover :not(.js-disable-context-menu).js-context-menu-trigger{opacity:unset;}body:not(.is-keyboard-moving-card) &:focus,body:not(.is-keyboard-moving-card) &.suspended-focus,body:not(.is-keyboard-moving-card) &.board-view-column-card:focus,body.is-keyboard-moving-card &.selected:not(.show-sash):focus{outline:none;border-color:",";box-shadow:0 0 0 1px ",";}body.is-keyboard-moving-card &{outline:none;}&.selected:not(:focus,.suspended-focus),body.is-keyboard-moving-card &.selected{outline:none;border-color:",";}"],(0,q.Jt)("colors.border.default"),(0,q.Jt)("colors.accent.emphasis"),(0,q.Jt)("colors.accent.emphasis"),(0,q.Jt)("colors.accent.emphasis"));try{GG.displayName||(GG.displayName="CardBase")}catch{}let GV=(0,Z.Ay)(GG).withConfig({displayName:"card-base-with-sash__CardBaseWithSash",componentId:"sc-62003f89-0"})(["position:relative;&::after,&::before{content:'';display:none;position:absolute;width:100%;background-color:",";height:",";border:0;border-radius:var(--borderRadius-medium);z-index:12;}&.show-sash-card.show-sash-after{&::after{bottom:-7px;display:block;}}&.show-sash-card.show-sash-before{&::before{top:-7px;display:block;}}&.show-sash-card.show-sash-before:first-child{&::before{top:0;}}"],(0,q.Jt)("colors.accent.emphasis"),(0,q.Jt)("space.1"));try{GV.displayName||(GV.displayName="CardBaseWithSash")}catch{}let G$={mr:"8px",width:"350px",minWidth:"350px",display:"flex",flexDirection:"column",overflowY:"hidden",borderRadius:"radii.2",bg:"canvas.inset","&.only":{borderRadius:e=>`${e.radii[2]} ${e.radii[2]} 0 0`,borderBottomColor:"transparent"},"&.hidden:not(.last-group)":{borderRadius:0,borderTopColor:"transparent",borderBottomColor:"transparent"},"&.hidden.last-group":{borderRadius:e=>`0 0 ${e.radii[2]} ${e.radii[2]}`,borderTopColor:"transparent"},"&.drag-outline:not(.only)":{borderColor:"accent.emphasis",boxShadow:e=>`0 0 0 1px ${e.colors.accent.emphasis}`},"&::after, &::before":{content:'""',display:"none",position:"absolute",top:"8px",width:"4px",bg:"accent.emphasis",height:"calc(100% - 16px)",border:0,borderRadius:"6px",zIndex:12},"body.is-dragging &.show-sash-column.show-sash-after":{"&::after":{ml:"352px",display:"block"}},'body.is-dragging &.show-sash-column.show-sash-before:not([data-dnd-drag-id="no_vertical_group"])':{"&::before":{ml:"-6px",display:"block"}}},GW=(0,K.memo)((0,K.forwardRef)(({headerContent:e,testingName:t,children:a,...r},n)=>(0,F.jsxs)(lx.A,{...r,sx:{...G$,...r.sx},ref:n,"data-board-column":t,...(0,ey.G)("board-view-column"),children:[(0,F.jsx)(lx.A,{sx:{flexDirection:"column",flexShrink:0,display:"flex"},children:e}),a]})));GW.displayName="ColumnFrame";let Gz={borderRadius:2,transition:"transform 75ms",border:"1px solid",borderColor:"border.default"},GH={display:"flex",backgroundColor:"canvas.default"},GU={flex:"auto",height:"0",p:2,px:"16px",overflowY:"hidden",position:"relative",display:"flex"},Gq={...GU,flexDirection:"column",overflowY:"auto",py:0,pb:2},GK={display:"flex",position:"sticky",top:0,zIndex:1},GQ={isolation:"isolate",height:"fit-content",width:"fit-content"},GJ=5,GX=({headerType:e="visible"})=>{let{ref:t,hasNextPage:a}=GB("hidden"===e),r=(0,F.jsx)(G4,{headerType:e});return"visible"!==e&&(r=(0,F.jsx)(lx.A,{sx:GH,children:r})),(0,F.jsx)(lx.A,{ref:t,...(0,ey.G)("board-pagination-vertical"),sx:{display:"flex"},children:a?r:null})},GY=()=>{let{ref:e,hasNextPage:t}=GL(),{queriesForGroups:a}=ul(),r=a.flatMap(e=>e.data?.groups).length;return a[a.length-1]?.data?.pageInfo?.hasNextPage&&(r+=1),(0,F.jsx)("div",{ref:e,...(0,ey.G)("board-pagination-horizontal"),children:t?(0,F.jsx)(G6,{columnCount:r}):null})},GZ=({groupId:e})=>{let{ref:t,hasNextPage:a}=GF(e);return(0,F.jsx)("div",{ref:t,...(0,ey.G)(`board-pagination-${e}`),children:a?(0,F.jsx)(G3,{}):null})},G0=({groupId:e,secondaryGroupId:t,loadMoreItemsButtonOnKeyDown:a,isLoadMoreItemsButtonFocused:r})=>{let n=(0,K.useRef)(null),{isVisible:i}=pA({ref:n}),l=(0,K.useRef)(null),{hasNextPageForGroupedItems:s,isFetchingNextPageForGroupedItems:o,fetchNextPageForGroupedItems:d,hasDataForGroupedItemsBatch:u,isFetchingGroupedItemsBatch:c,fetchGroupedItemsBatch:m}=ul(),p=(0,K.useMemo)(()=>({groupId:e,secondaryGroupId:t}),[e,t]),h=s(p),f=(0,K.useCallback)(()=>{d(p)},[d,p]),g=c(e,t),y=o(p),x=h?(0,F.jsx)(p4.Q,{onClick:f,disabled:y,onKeyDown:a,ref:l,children:"Load more items"}):null;return!i||u(e,t)||g||m(e,t),(0,K.useEffect)(()=>{r&&l.current&&(l.current.focus(),l.current.scrollIntoView({block:"nearest",inline:"nearest",behavior:"smooth"}))},[r]),(0,F.jsxs)("div",{ref:n,...(0,ey.G)(`board-pagination-${e}-${t}`),children:[y||g?(0,F.jsx)(G3,{}):null,x]})},G1=()=>(0,F.jsx)(GV,{...(0,ey.G)("placeholder-card"),className:"board-view-column-card",sx:{display:"flex",flexDirection:"column",gap:2,p:2,backgroundColor:"canvas.overlay",borderColor:"border.default",borderStyle:"solid",borderRadius:2,borderWidth:"1px"},children:[...[,,,,,].keys()].map(e=>(0,F.jsx)(GP,{style:{height:8},minWidth:80,maxWidth:200,...(0,ey.G)("placeholder")},e))}),G2=({headerType:e="visible"})=>(0,F.jsx)(GW,{sx:{...Gz,p:2,gap:2},className:e,headerContent:"hidden"!==e?(0,F.jsx)(GP,{style:{height:16,marginTop:4},minWidth:80,maxWidth:200,...(0,ey.G)("placeholder-column-header")}):null,children:"only"===e?null:(0,F.jsx)(G3,{})}),G5=({columnCount:e=GJ})=>(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(Gk,{className:(0,vB.$)("board","sticky"),children:(0,F.jsx)(GP,{style:{height:12},minWidth:80,maxWidth:200,...(0,ey.G)("placeholder-horizontal-group-header")})}),(0,F.jsx)(lx.A,{sx:GH,children:[...Array(e).keys()].map(e=>(0,F.jsx)(G2,{headerType:"hidden"},e))})]}),G3=(0,K.memo)(G1),G4=(0,K.memo)(G2),G6=(0,K.memo)(G5);try{GX.displayName||(GX.displayName="ColumnsPagination")}catch{}try{GY.displayName||(GY.displayName="HorizontalGroupsPagination")}catch{}try{GZ.displayName||(GZ.displayName="ColumnCardsPagination")}catch{}try{G1.displayName||(G1.displayName="PlaceholderCardUnmemoized")}catch{}try{G2.displayName||(G2.displayName="PlaceholderColumnUnmemoized")}catch{}try{G5.displayName||(G5.displayName="PlaceholderHorizontalGroupUnmemoized")}catch{}try{G3.displayName||(G3.displayName="PlaceholderCard")}catch{}try{G4.displayName||(G4.displayName="PlaceholderColumn")}catch{}try{G6.displayName||(G6.displayName="PlaceholderHorizontalGroup")}catch{}let G8=(e,t)=>{let{toggleFilter:a}=lh();return(0,K.useCallback)(r=>{r.target instanceof HTMLAnchorElement?r.stopPropagation():r.shiftKey||r.metaKey||a(e,t)},[e,t,a])},G7=(0,K.forwardRef)(({parentIssue:e,sx:t,as:a="a",...r},n)=>{let{openParentIssue:i}=T0();if(!e)return null;let l=e.titleHtml;return(0,F.jsx)(lx.A,{sx:{alignItems:"center",overflow:"hidden",flex:"1",height:"20px",display:"flex"},children:(0,F.jsx)(bk.A,{onClick:()=>i(e),ref:n,as:a,target:"_blank",rel:"noreferrer","data-hovercard-url":`${e.url}/hovercard`,"data-hovercard-type":"issue",leadingVisual:()=>(0,F.jsx)(pq,{isDraft:!1,state:e.state,stateReason:e.stateReason,type:eJ.Issue,size:w_(r.size)}),sx:{"&, &:hover":{bg:"canvas.default"},...t},text:(0,F.jsx)(p$,{children:`${l} #${e.number}`}),...(0,ey.G)("parent-issue-token"),...r})})});function G9(e){return{...e.reviewer,hovercardUrl:"User"===e.reviewer.type?`/hovercards?user_id=${e.reviewer.id}`:`${e.reviewer.url}/hovercard`}}G7.displayName="ParentIssueToken";let Ve=(0,K.forwardRef)(({reviews:e,...t},a)=>(0,F.jsx)(wA,{ref:a,avatars:e.map(G9),text:nH.reviewersCount(e.length),...(0,ey.G)("reviewers-token"),...t}));Ve.displayName="ReviewersToken";let Vt=()=>{let{items:e}=ug(),{openProjectItemInPane:t,openPaneHierarchyHistoryItem:a}=c7(),{getAllProjectRelationships:r}=uI();return{createSidePanelHandler:(0,K.useCallback)(n=>{let i=vI(function(e){let{title:t,state:a,stateReason:r,url:n,number:i,repoId:l,repoName:s,userName:o,assignees:d,labels:u,trackedByTitle:c}=e;return{ownerId:e.key.ownerId,uuid:e.key.primaryKey.uuid,itemId:e.key.itemId,title:t,state:a,stateReason:r,url:n,displayNumber:i,repositoryId:l,repositoryName:s,ownerLogin:o,assignees:d,labels:u,position:0,trackedByTitle:c}}(n)),l=n.url.includes("/pull/");return s=>{if(s.ctrlKey||s.metaKey||!i.item||l)return;s.preventDefault();let o=e.find(e=>e.content.id===n.key.itemId&&e.contentType!==eJ.DraftIssue);if(o)t(o);else{let n=r().get(i.item.itemId()),l=e.find(e=>e.content.id===n?.at(0));l&&(t(l),a(i))}}},[r,e,a,t])}},Va=(0,K.forwardRef)(({trackedBy:e,issueId:t,noPrefix:a=!1,projectOwner:r,as:n="a",...i},l)=>{let{createSidePanelHandler:s}=Vt(),o=e.url.includes("/pull/"),{tasklist_tracked_by_redesign:d}=iz();d&&(a=!0);let u={as:"a","data-hovercard-type":o?"pull_request":d?"tracking":"issue","data-hovercard-url":d?`${e.url}/tracking/${t}/hovercard`:`${e.url}/hovercard`,href:e.url,onClick:s(e),rel:"noreferrer",target:"_blank"},c="a"===n,m=(0,F.jsxs)(F.Fragment,{children:[!a&&n9.trackedBy," ",(0,F.jsx)(pq,{state:e.state,stateReason:e.stateReason,type:o?"PullRequest":"Issue",isDraft:!1,sx:{mr:1,height:"14px",width:"14px"}}),d?(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(lv.A,{sx:{color:"fg.default",minWidth:0,overflow:"hidden",textOverflow:"ellipsis"},children:e.title}),(0,F.jsxs)(lv.A,{sx:{fontWeight:"normal",whiteSpace:"pre"},children:[" #",e.number]})]}):(0,F.jsx)(lv.A,{sx:{minWidth:0,overflow:"hidden",textOverflow:"ellipsis"},children:function(e,t){return t&&e.userName.toLowerCase()===t.login.toLowerCase()?`${e.repoName}#${e.number}`:h8(e)}(e,r)})]}),p=d?{display:"flex",maxWidth:"285px"}:{},h=c?d?(0,F.jsx)(lx.A,{sx:p,children:m}):m:(0,F.jsx)(pw.A,{...u,sx:{color:"inherit",...p},children:m});return(0,F.jsx)(bk.A,{ref:l,text:h,...c?u:{},...i})});Va.displayName="TrackedByToken";let Vr={cardLabel:"card-label-module__cardLabel--yIx3x",tooltip:"card-label-module__tooltip--Sa5Pq"},Vn=({label:e,children:t})=>(0,F.jsx)("li",{className:Vr.cardLabel,children:(0,F.jsx)(OD.m,{type:"label",text:e,direction:"n",className:Vr.tooltip,children:t})}),Vi=({content:e,fieldName:t,filterValue:a})=>(0,F.jsx)(Vn,{label:`${t}: ${aR(e.toString())}`,children:(0,F.jsx)(bk.A,{onClick:G8(t,a),as:"button",text:(0,F.jsx)(p$,{children:e}),...(0,ey.G)(`custom-label-${t}`)})}),Vl=({fieldName:e,milestone:t})=>(0,F.jsx)(Vn,{label:`${e}: ${t.title}`,children:(0,F.jsx)(j3,{milestone:t,onClick:G8(e,t.title),as:"button"})}),Vs=({fieldName:e,iteration:t})=>(0,F.jsx)(Vn,{label:`${e}: ${t.title} (${aU(t)})`,children:(0,F.jsx)(jB,{iteration:t,onClick:G8(e,t.title),as:"button"})}),Vo=({progress:e,item:t})=>{let{openPane:a}=me(),r=(0,K.useCallback)(()=>{t&&t.contentType===eJ.Issue&&a(t)},[t,a]);return 0===e.total?null:(0,F.jsx)(Vn,{label:`Progress: ${e.completed} of ${e.total} (${nH.progressPercentCount(e.percent)})`,children:(0,F.jsx)(vU,{as:"button",constantWidth:!0,progress:e,onClick:r,...(0,ey.G)("tracks-label")})})},Vd=({trackedByItem:e,issueId:t,projectOwner:a})=>(0,F.jsx)("li",{className:Vr.cardLabel,children:(0,F.jsx)(Va,{...(0,ey.G)(`tracked-by-label-${e.key.itemId}`),trackedBy:e,issueId:t,projectOwner:a})}),Vu=({fieldName:e,parentIssue:t})=>(0,F.jsx)("li",{className:Vr.cardLabel,children:(0,F.jsx)(G7,{as:"button",parentIssue:t,onClick:G8(e,t.nwoReference),"aria-label":`${e}: ${t.title} #${t.number}`,"aria-describedby":void 0})}),Vc=({fieldName:e,label:t})=>(0,F.jsx)("li",{className:Vr.cardLabel,children:(0,F.jsx)(jq,{label:t,as:"button",onClick:G8(e,t.name),"aria-label":`Label: ${t.name}`,...(0,ey.G)("issue-label")})});function Vm({field:e,option:t}){return(0,F.jsx)(Vn,{label:`${e.name}: ${t.name}`,children:(0,F.jsx)(bN,{option:t,onClick:G8(e.name,t.name),as:"button"})})}function Vp({fieldName:e,issueType:t}){return(0,F.jsx)(Vn,{label:`${e}: ${t.name}`,children:(0,F.jsx)(wT,{issueType:t,onClick:G8(e,t.name),as:"button"})})}function Vh({fieldName:e,repository:t}){return(0,F.jsx)(Vn,{label:`${e}: ${t.nameWithOwner}`,children:(0,F.jsx)(wP,{withOwner:!0,repository:t,onClick:G8(e,t.nameWithOwner),as:"button",...(0,ey.G)("repository-label")})})}function Vf({progress:e,parentIssue:t}){let a;let r=t.getItemIdentifier(),n=G8("parent-issue",r?`${r.owner}/${r.repo}#${r.number}`:""),{findColumn:i}=y$(),l=i(eT.SubIssuesProgress);l instanceof SubIssuesProgressColumnModel&&(a=l.settings.progressConfiguration);let s={background:"none",border:"none",padding:0},o={...s,marginTop:2,width:"100%"};return(0,F.jsx)(lx.A,{as:"button",sx:a?.variant===B_.RING?s:o,"aria-label":"Sub-issues progress",onClick:e=>{r&&n(e)},children:(0,F.jsx)(BA,{completed:e.completed,consistentContentSizing:!0,percentCompleted:e.percentCompleted,total:e.total,variant:a?.variant??B_.SEGMENTED,color:a?.color})})}let Vg=(0,K.memo)(({field:e,columnData:t,item:a})=>{let{projectOwner:r}=eU(),n=null;if(!rI(e.dataType))return null;switch(e.dataType){case eN.Labels:n=t[eT.Labels]?.map(t=>F.jsx(Vc,{fieldName:e.name,label:t},t.id));break;case eN.LinkedPullRequests:n=t[eT.LinkedPullRequests]?.slice(0,10).map(e=>F.jsx("li",{className:Vr.cardLabel,"aria-label":`Linked pull request: #${e.number}`,children:F.jsx(wR,{linkedPullRequest:e})},e.id));break;case eN.Reviewers:{let e=t[eT.Reviewers];n=e&&e.length>0&&(0,F.jsx)("li",{className:Vr.cardLabel,children:(0,F.jsx)(Ve,{reviews:e,sx:{bg:"canvas.default"}})});break}case eN.Milestone:{let a=t[eT.Milestone];n=a&&(0,F.jsx)(Vl,{milestone:a,fieldName:e.name});break}case eN.Iteration:{let a=t[e.id],r=a&&aM(a)?aK(e).find(e=>e.id===a.id):void 0;n=r&&(0,F.jsx)(Vs,{iteration:r,fieldName:e.name});break}case eN.Tracks:{let e=t[eT.Tracks];n=e&&(0,F.jsx)(Vo,{progress:e,item:a});break}case eN.ParentIssue:{if(a.contentType!==eJ.Issue)return;let r=t[eT.ParentIssue];n=r&&(0,F.jsx)(Vu,{fieldName:e.name,parentIssue:r});break}case eN.TrackedBy:n=t[eT.TrackedBy]?.slice(0,10).map(e=>F.jsx(Vd,{issueId:a.itemId(),trackedByItem:e,projectOwner:r},e.key.itemId));break;case eN.SingleSelect:{let a=t[e.id],r=a&&aM(a)?e.settings.options?.find(e=>e.id===a.id):void 0;n=r&&(0,F.jsx)(Vm,{option:r,field:e});break}case eN.Date:{let a=t[e.id];if(a&&aE(a)){let t=aj(a),r=aN(new Date(a.value));n=t&&(0,F.jsx)(Vi,{content:t,fieldName:e.name,filterValue:r})}break}case eN.Number:{let a=t[e.id];n=a&&aD(a)&&(0,F.jsx)(Vi,{content:a.value.toString(),fieldName:e.name,filterValue:a.value.toString()});break}case eN.Text:{let a=t[e.id];n=a&&aP(a)&&(0,F.jsx)(Vi,{content:a.raw,fieldName:e.name,filterValue:a.raw});break}case eN.Repository:{let a=t[eT.Repository];n=a&&(0,F.jsx)(Vh,{fieldName:e.name,repository:a});break}case eN.IssueType:{let a=t[eT.IssueType];n=a&&(0,F.jsx)(Vp,{fieldName:e.name,issueType:a});break}case eN.SubIssuesProgress:{let e=t[eT.SubIssuesProgress];n=e&&e.total>0&&(0,F.jsx)(Vf,{progress:e,parentIssue:a});break}default:e.dataType}return(0,F.jsx)(F.Fragment,{children:n})});Vg.displayName="CardLabel";try{Vn.displayName||(Vn.displayName="TooltipLabel")}catch{}try{Vi.displayName||(Vi.displayName="CustomFieldLabel")}catch{}try{Vl.displayName||(Vl.displayName="MilestoneLabel")}catch{}try{Vs.displayName||(Vs.displayName="IterationLabel")}catch{}try{Vo.displayName||(Vo.displayName="TracksLabel")}catch{}try{Vd.displayName||(Vd.displayName="TrackedByLabel")}catch{}try{Vu.displayName||(Vu.displayName="ParentIssueLabel")}catch{}try{Vc.displayName||(Vc.displayName="LabelLabel")}catch{}try{Vm.displayName||(Vm.displayName="SingleSelectLabel")}catch{}try{Vp.displayName||(Vp.displayName="IssueTypeLabel")}catch{}try{Vh.displayName||(Vh.displayName="RepositoryLabel")}catch{}try{Vf.displayName||(Vf.displayName="SubIssuesProgressLabel")}catch{}let Vy={AvatarStack:"assignee-stack-module__AvatarStack--nD9b2"},Vx={cursor:"pointer",borderRadius:"50%",flexShrink:0,"&:focus-visible":{outline:e=>`2px solid ${e.colors.fg.danger}`,outlineOffset:0},".pc-AvatarItem":{display:"block"}},Vb=({assignee:e,onFocus:t,className:a,...r})=>{let{toggleFilter:n}=lh(),i=(0,K.useCallback)(t=>{t.shiftKey||t.metaKey||n("assignee",e.login)},[n,e.login]),l=(0,K.useCallback)(t=>{"Enter"===t.key&&n("assignee",e.login)},[n,e.login]),s=(0,K.useRef)(null),[o,d]=(0,Sf.B)({contentRef:s,"aria-label":e.login});return(0,F.jsxs)(lv.A,{sx:{...Vx,...r.sx},onClick:i,onFocus:t,onKeyDown:l,tabIndex:0,className:(0,vB.$)(a,"pc-AvatarItem memex-AvatarItem"),role:"button","aria-label":e.login,...(0,ey.G)("AvatarItemFilterButton"),children:[(0,F.jsx)(h3.r,{...r,ref:s,loading:"lazy",alt:e.login,src:e.avatarUrl,...o}),d]})},Vv={all:"unset",m:0,p:0},Vw={".pc-AvatarStackBody:focus-within":{width:"auto"},".pc-AvatarStackBody:focus-within .pc-AvatarItem:first-child":{mr:"0px !important"},".pc-AvatarStackBody:focus-within .pc-AvatarItem":{mr:"4px !important",ml:"0px !important",opacity:1}},Vj=({assignees:e,alignRight:t=!1,sx:a,avatarProps:r,wrapperSx:n,...i})=>void 0===e||0===e.length?null:(0,F.jsxs)(lx.A,{as:"figure",...i,sx:{...n,...Vw,...Vv},children:[(0,F.jsxs)("figcaption",{className:"sr-only",children:["Assignees: ",function(e,t={reverse:!1}){if(0===e.length)return"none";let a=e.map(e=>e.login);return nO(t.reverse?a.reverse():a)}(e,{reverse:t})]}),(0,F.jsx)(wZ.A,{alignRight:t,className:Vy.AvatarStack,children:e.map(e=>(0,F.jsx)(Vb,{assignee:e,...r},e.id))})]});try{Vb.displayName||(Vb.displayName="ClickableAvatar")}catch{}try{Vj.displayName||(Vj.displayName="AssigneeStack")}catch{}let VC=()=>(0,F.jsx)(lx.A,{sx:{width:"16px",height:"16px",bg:"border.muted",borderRadius:10,borderWidth:"0",borderStyle:"solid",borderColor:"border.default"}}),VI=(0,K.memo)(function({item:e,columnData:t,archiveItem:a,removeItem:r,moveItemToTop:n,moveItemToBottom:i,contextMenuRef:l,disableContextMenu:s,verticalGroupId:o,...d}){let u=t.Assignees,{postStats:c}=iN(),m=(0,K.useRef)(null),[p,h]=(0,K.useState)(!1),{hasWritePermissions:f}=eK(),g=null,y=(0,F.jsx)(Vj,{assignees:u,alignRight:!0,...(0,ey.G)("board-card-assignees")}),x=t.Title;if(!x)return null;switch(x.contentType){case eJ.RedactedItem:g=(0,F.jsx)(VS,{contextMenuRef:l,Icon:(0,F.jsx)(lw.A,{icon:ly.LockIcon,sx:{color:"fg.muted"}}),Title:(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(lx.A,{sx:{width:"48px",height:"4px",bg:"border.muted",borderRadius:1,borderWidth:"0",borderStyle:"solid",borderColor:"border.default"}}),(0,F.jsx)("h3",{className:"sr-only",children:"Access prohibited"})]}),Avatars:(0,F.jsx)(VC,{}),item:e,disableContextMenu:!0,removeItem:r,verticalGroupId:o});break;case eJ.DraftIssue:g=(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(VS,{ref:m,contextMenuRef:l,Icon:(0,F.jsx)(lw.A,{icon:ly.IssueDraftIcon,"aria-label":"Draft issue",sx:{color:"fg.muted"}}),Title:(0,F.jsx)(lv.A,{sx:{fontSize:0,color:"fg.muted"},children:"Draft"}),Avatars:y,item:e,convertToIssue:()=>h(!0),removeItem:r,archiveItem:a,disableContextMenu:s||!f,moveItemToTop:n,moveItemToBottom:i,verticalGroupId:o}),(0,F.jsx)(Cz,{anchorRef:m,isOpen:p,item:e,onOpenChange:e=>h(e),onSuccess:()=>c({name:eY,ui:"card-context-menu",memexProjectItemId:e.id}),...(0,ey.G)("card-menu-repo-picker")})]});break;case eJ.Issue:case eJ.PullRequest:{let d=t.Repository?.name;g=(0,F.jsx)(VS,{ref:m,contextMenuRef:l,Icon:(0,F.jsx)(pK,{title:x,size:16}),Title:(0,F.jsxs)(lv.A,{sx:{fontSize:0,color:"fg.muted"},children:[d," #",x.value.number]}),Avatars:y,item:e,archiveItem:a,removeItem:r,disableContextMenu:s||!f,moveItemToTop:n,moveItemToBottom:i,verticalGroupId:o})}}return g?(0,F.jsx)(lx.A,{...d,children:g}):null}),VS=(0,K.forwardRef)(({Avatars:e,...t},a)=>(0,F.jsxs)(lx.A,{sx:{display:"flex",justifyContent:"space-between"},ref:a,children:[(0,F.jsx)(VT,{...t}),(0,F.jsx)(lx.A,{sx:{display:"flex",flexShrink:0,justifyContent:"flex-end",alignItems:"center"},children:e})]}));VS.displayName="HeaderInternal";let Vk={ARCHIVE_ITEM:"archive-item",DELETE_FROM_PROJECT:"delete-from-project"},VN={height:"24px",alignItems:"center",userSelect:"none",cursor:"default",display:"flex","&:not(.js-disable-context-menu):not(.js-context-menu-open) .js-context-menu-trigger":{opacity:0},".js-context-menu-trigger:hover > div, &.js-context-menu-open .js-context-menu-trigger > div":{bg:"canvas.subtle"}},VT=({Icon:e,Title:t,contextMenuRef:a,item:r,convertToIssue:n,archiveItem:i,removeItem:l,moveItemToBottom:s,moveItemToTop:o,disableContextMenu:d,verticalGroupId:u})=>{let[c,m]=(0,K.useState)(!1),[p,h]=(0,K.useState)(""),{filteredSelectedCardIds:f,state:g}=Gd(),y=r.contentType!==eJ.RedactedItem&&g[r.id],x=f.length<=1,b=r.contentType===eJ.Issue||r.contentType===eJ.PullRequest,v=r.contentType===eJ.Issue||r.contentType===eJ.DraftIssue,{isSorted:w}=un(),{groupedItems:j,groupByField:C,groupByFieldOptions:I}=OK(),S=(0,K.useRef)(null),[k,N]=(0,K.useState)(!1),[T,_]=(0,K.useState)(null);(0,K.useEffect)(()=>{let e=new URL(window.location.href);e.searchParams.append(dQ,uZ.ISSUE),e.searchParams.append(dJ,r.id.toString()),h(e.href)},[r.id]),(0,K.useEffect)(()=>{T?.current&&c&&(window.setTimeout(()=>{T?.current?.focus()}),_(null))},[c,T]);let A=(0,K.useCallback)((e,t)=>{"selection"===t?(N(!1),setTimeout(()=>{let e=document.querySelector(`[data-board-card-id="${r.id}"] button[aria-labelledby]`);e?.focus()})):"click-outside"===t?N(!1):(N(!1),m(!0),_(S))},[r.id]),R=(0,vB.$)({"js-disable-context-menu":d,"js-context-menu-open":c||k}),P=j.allItemsByVerticalGroup[u??""]?.items,D=P?.at(0)?.id===r.id,E=P?.at(-1)?.id===r.id,M=(j.allItemsByVerticalGroup[o2]?.items.length??0)>0,B=(0,K.useCallback)(e=>{let t=I.some(t=>t.groupMetadata?.id===e);return e===o2?M:t},[I,M]),{postStats:L}=iN(),O=(0,K.useCallback)(e=>{C&&L({name:tN,ui:tT.ContextMenu,context:JSON.stringify({type:"column",itemId:r.id,fieldId:C.databaseId,nextValue:e.nextValue,currentValue:e.currentValue})})},[C,r.id,L]),G=(0,K.useCallback)(e=>{m(e),e&&N(!1)},[]);return(0,F.jsxs)(lx.A,{sx:VN,className:R,children:[(0,F.jsx)(lx.A,{sx:{mr:1},children:e}),t,!d&&(0,F.jsx)(lx.A,{sx:{mr:0},className:"js-context-menu-trigger",children:(0,F.jsxs)(yu.W,{open:c,onOpenChange:G,anchorRef:a,children:[(0,F.jsx)(yu.W.Anchor,{children:(0,F.jsx)(fE.K,{tooltipDirection:"e",variant:"invisible",icon:ly.KebabHorizontalIcon,...(0,ey.G)("card-context-menu-trigger"),"aria-label":"More actions",sx:{ml:1,color:"fg.muted",width:"24px",height:"24px",padding:0}})}),(0,F.jsx)(yu.W.Overlay,{anchorSide:"inside-right",onMouseDown:e=>e.stopPropagation(),children:(0,F.jsxs)(fi.l,{children:[x&&(0,F.jsxs)(F.Fragment,{children:[n?(0,F.jsxs)(fi.l.Item,{onSelect:n,...(0,ey.G)("card-context-menu-convert-to-issue"),children:[(0,F.jsx)(fi.l.LeadingVisual,{children:(0,F.jsx)(ly.IssueOpenedIcon,{})}),"Convert to issue"]}):null,b?(0,F.jsxs)(fi.l.LinkItem,{target:"_blank",href:r.getUrl(),rel:"noopener noreferrer",...(0,ey.G)("card-context-menu-open-in-new-tab"),children:[(0,F.jsx)(fi.l.LeadingVisual,{children:(0,F.jsx)(ly.LinkExternalIcon,{})}),"Open in new tab"]}):null,b?(0,F.jsx)(VR,{label:"Copy link",url:r.getUrl(),testId:"card-context-menu-copy-link"}):null,v?(0,F.jsx)(VR,{label:"Copy link in project",url:p,testId:"card-context-menu-copy-link-in-project"}):null,(0,F.jsx)(fi.l.Divider,{}),!w&&(o||s)?(0,F.jsxs)(F.Fragment,{children:[o&&(0,F.jsxs)(fi.l.Item,{disabled:D,onSelect:()=>o(tT.ContextMenu),children:[(0,F.jsx)(fi.l.LeadingVisual,{children:(0,F.jsx)(ly.MoveToTopIcon,{})}),"Move to top"]}),s&&(0,F.jsxs)(fi.l.Item,{disabled:E,onSelect:()=>s(tT.ContextMenu),children:[(0,F.jsx)(fi.l.LeadingVisual,{children:(0,F.jsx)(ly.MoveToBottomIcon,{})}),"Move to bottom"]})]}):null,(0,F.jsxs)(fi.l.Item,{"aria-haspopup":"menu","aria-expanded":k,onSelect:()=>N(!0),ref:S,children:[(0,F.jsx)(fi.l.LeadingVisual,{children:(0,F.jsx)(ly.ArrowBothIcon,{})}),"Move to column",(0,F.jsx)(fi.l.TrailingVisual,{children:(0,F.jsx)(ly.ChevronRightIcon,{})})]}),(0,F.jsx)(fi.l.Divider,{})]}),i?(0,F.jsxs)(fi.l.Item,{id:Vk.ARCHIVE_ITEM,onSelect:()=>i?.(tc),...(0,ey.G)("card-context-menu-archive-item"),children:[(0,F.jsx)(fi.l.LeadingVisual,{children:(0,F.jsx)(ly.ArchiveIcon,{})}),y&&f.length>1?`Archive ${f.length} selected items`:"Archive",(0,F.jsx)(fi.l.TrailingVisual,{children:(0,F.jsx)(kI,{})})]}):null,(0,F.jsxs)(fi.l.Item,{id:Vk.DELETE_FROM_PROJECT,variant:"danger",onSelect:()=>l(tc),...(0,ey.G)("card-context-menu-delete"),children:[(0,F.jsx)(fi.l.LeadingVisual,{children:(0,F.jsx)(ly.TrashIcon,{})}),y&&f.length>1?`Delete ${f.length} selected items from project`:"Delete from project",(0,F.jsx)(fi.l.TrailingVisual,{children:(0,F.jsx)(kC,{})})]})]})})]})}),!d&&k&&C&&(0,F.jsxs)(F.Fragment,{children:[C.dataType===eN.SingleSelect&&(0,F.jsx)(V_,{model:r,groupByField:C,onOpenChange:A,anchorRef:a,isColumnVisible:B,onChangeField:O,selectedFieldValueId:I.find(e=>e.id===u)?.groupMetadata?.id}),C.dataType===eN.Iteration&&(0,F.jsx)(VA,{model:r,groupByField:C,onOpenChange:A,anchorRef:a,isColumnVisible:B,onChangeField:O,selectedFieldValueId:I.find(e=>e.id===u)?.groupMetadata?.id})]})]})};function V_({model:e,groupByField:t,onOpenChange:a,anchorRef:r,isColumnVisible:n,onChangeField:i,selectedFieldValueId:l}){let[s,o]=(0,K.useState)(""),{options:d,saveSelected:u}=Cm({model:e,columnModel:t,selectedValueId:l??null}),c=(0,K.useMemo)(()=>[...d,{id:o2,label:`No ${t.name}`,color:"GRAY",description:"",descriptionHtml:"",name:`No ${t.name}`,nameHtml:`No ${t.name}`,selected:void 0===l}],[t.name,d,l]),m=c.every(e=>"GRAY"===e.color),p=(0,K.useCallback)(e=>Cc(e,!m),[m]),h=(0,K.useMemo)(()=>{let e=c.filter(e=>n(e.id));return""!==s?Cs(s,e,10).filteredItems:e},[s,n,c]),f=(0,K.useMemo)(()=>h.map(p),[p,h]),g=(0,K.useMemo)(()=>f.find(e=>e.selected),[f]);return e.contentType===eJ.RedactedItem?null:(0,F.jsx)(hO.X,{open:!0,onOpenChange:a,items:f,selected:g,filterValue:s,onFilterChange:o,onSelectedChange:e=>{e&&e.id!==o2?(u(d.filter(t=>t.id===e.id)),i({nextValue:e.id??null,currentValue:l??null})):(u([]),i({nextValue:null,currentValue:l??null}))},placeholderText:"Filter options",renderAnchor:({children:e,...t})=>(0,F.jsx)("div",{...t,children:e}),anchorRef:r,...(0,ey.G)("move-to-single-select-field-menu")})}function VA({model:e,groupByField:t,onOpenChange:a,anchorRef:r,isColumnVisible:n,onChangeField:i,selectedFieldValueId:l}){let[s,o]=(0,K.useState)(""),d=aQ(t.settings.configuration).find(e=>e.id===l)??null,{activeOptions:u,completedOptions:c,filterChange:m,saveSelected:p}=jM({model:e,columnModel:t,iteration:d}),h=(0,K.useMemo)(()=>[...u,...c,{id:o2,label:`No ${t.name}`,selected:void 0===l,duration:0,startDate:"",title:`No ${t.name}`,titleHtml:`No ${t.name}`}],[u,c,t.name,l]),f=(0,K.useMemo)(()=>(""!==s?m(s,h,10).filteredItems:h).filter(e=>n(e.id)),[m,s,n,h]),g=(0,K.useMemo)(()=>f.map(jP),[f]),y=(0,K.useMemo)(()=>g.find(e=>e.selected),[g]);return e.contentType===eJ.RedactedItem?null:(0,F.jsx)(hO.X,{open:!0,onOpenChange:a,items:g,selected:y,filterValue:s,onFilterChange:o,onSelectedChange:e=>{e&&e.id!==o2?(p(h.filter(t=>t.id===e.id)),i({nextValue:e.id??null,currentValue:l??null})):(p([]),i({nextValue:null,currentValue:l??null}))},placeholderText:"Filter options",renderAnchor:({children:e,...t})=>(0,F.jsx)("div",{...t,children:e}),anchorRef:r,...(0,ey.G)("move-to-iteration-field-menu")})}let VR=({url:e,label:t,testId:a})=>{let r=(0,K.useCallback)(()=>{try{navigator.clipboard.writeText(e)}catch{}},[e]);return(0,F.jsxs)(fi.l.Item,{onSelect:r,...(0,ey.G)(a),children:[(0,F.jsx)(fi.l.LeadingVisual,{children:(0,F.jsx)(ly.CopyIcon,{})}),t]})};try{VC.displayName||(VC.displayName="RedactedAvatar")}catch{}try{VI.displayName||(VI.displayName="Header")}catch{}try{VT.displayName||(VT.displayName="IconAndTitle")}catch{}try{V_.displayName||(V_.displayName="MoveToSingleSelectFieldMenu")}catch{}try{VA.displayName||(VA.displayName="MoveToIterationFieldMenu")}catch{}try{VR.displayName||(VR.displayName="CopyUrl")}catch{}let VP={fontSize:1},VD=({item:e,disableFocus:t})=>{let a=a_(e.columns.Title);switch(e.contentType){case eJ.RedactedItem:return(0,F.jsx)(p$,{sx:VP,children:a});case eJ.DraftIssue:case eJ.Issue:return(0,F.jsx)(VM,{item:e,disableFocus:t});case eJ.PullRequest:return a?(0,F.jsx)(pw.A,{href:e.content.url,target:"_blank",rel:"noreferrer",onClick:e=>e.stopPropagation(),sx:{code:{fontFamily:"fonts.mono",fontSize:0},color:"fg.default",textAlign:"left",fontSize:1,"&:hover":{textDecoration:"underline",color:"accent.fg"}},tabIndex:t?-1:0,...(0,ey.G)("card-title-external-link"),children:(0,F.jsx)("h3",{className:"d-inline f5 text-normal",children:(0,F.jsx)(p$,{children:a})})}):null}},VE=(0,K.memo)(VD);VE.displayName="Title";let VM=(0,K.forwardRef)(({item:e,disableFocus:t},a)=>{let r=e.getHtmlTitle(),{openProjectItemInPane:n}=c7(),{openPane:i}=me(),l="#";e.contentType===eJ.Issue&&(l=e.getUrl());let s=(0,K.useRef)(null),o=(0,K.useCallback)(t=>{if((t.metaKey||t.ctrlKey)&&e.contentType!==eJ.DraftIssue){t.stopPropagation();return}s?.current===document.activeElement?n(e,()=>{s?.current&&s.current.focus()}):i(e),t.preventDefault()},[e,i,n]);return(0,F.jsx)(pw.A,{ref:s,role:"button",href:l,target:"_blank",rel:"noreferrer",onClick:o,tabIndex:t?-1:0,...(0,ey.G)("card-side-panel-trigger"),children:(0,F.jsx)("h3",{className:"d-inline f5 text-normal",children:(0,F.jsx)(p$,{ref:a,sx:{code:{fontFamily:"fonts.mono",fontSize:0},color:"fg.default","&:hover":{cursor:"pointer",color:"accent.fg",textDecoration:"underline"}},children:r})})})});VM.displayName="SidePanelLink";try{VD.displayName||(VD.displayName="TitleFunc")}catch{}let VB=(0,K.memo)(function({item:e,verticalGroupId:t,archiveItem:a,removeItem:r,moveItemToTop:n,moveItemToBottom:i,contextMenuRef:l,isDragging:s=!1}){let{groupedByColumnId:o}=ue(),{visibleFields:d}=TI(),{state:u}=Gd(),c=d.find(e=>e.id===eT.SubIssuesProgress),m=d.filter(e=>e.id!==o&&rI(e.dataType)&&e.id!==c?.id),p=e.columns,h=m.length>0||void 0!==c,f=Number(p["Sub-issues progress"]?.total)>0,g=e.contentType===eJ.RedactedItem,y=!g&&!!u[e.id],x=(0,K.useId)();return(0,F.jsxs)(lx.A,{sx:{borderRadius:2,borderWidth:"0",pt:2,pb:"12px",lineHeight:1.3,backgroundColor:e=>`${y?e.colors.accent.subtle:e.colors.canvas.overlay}`,borderStyle:"solid",borderColor:e=>`${e.colors.border.default}`,color:e=>`${g?e.colors.fg.muted:e.colors.fg.default}`},children:[(0,F.jsxs)(lx.A,{sx:{px:"12px"},children:[(0,F.jsx)(VI,{...(0,ey.G)("board-card-header"),item:e,verticalGroupId:t,columnData:p,mb:1,archiveItem:a,removeItem:r,moveItemToTop:n,moveItemToBottom:i,contextMenuRef:l,disableContextMenu:s}),(0,F.jsx)(VE,{item:e,disableFocus:s})]}),h&&(0,F.jsxs)(F.Fragment,{children:[(0,F.jsxs)(lx.A,{...(0,ey.G)("card-labels"),as:"ul","aria-label":"Fields","aria-describedby":x,sx:{flexWrap:"wrap",display:"flex",gap:1,m:0,p:0,mt:2,mb:0,px:"12px",listStyle:"none"},children:[m.map(t=>(0,F.jsx)(Vg,{field:t,item:e,columnData:p},t.id)),c&&f&&(0,F.jsx)(Vg,{field:c,item:e,columnData:p},c.id)]}),(0,F.jsx)("span",{className:"sr-only",id:x,children:"Click a value to filter the view"})]})]})});try{VB.displayName||(VB.displayName="CardInternalContent")}catch{}function VL({item:e}){return(0,F.jsx)(GV,{inert:"inert",sx:{opacity:.5,borderRadius:2,borderColor:"border.muted",borderWidth:"1px",borderStyle:"solid",boxShadow:"shadow.medium"},...(0,ey.G)("drag-overlay"),children:(0,F.jsx)(VB,{item:e,contextMenuRef:(0,K.useRef)(null),removeItem:eC.l,isDragging:!0})})}try{VL.displayName||(VL.displayName="DragOverlayCard")}catch{}let VF=(e,t)=>{switch(e.dataType){case eN.Iteration:return aK(e).find(e=>e.id===t)??void 0;case eN.SingleSelect:return e.settings.options?.find(e=>e.id===t)??void 0}},VO=(e,t)=>{let a=VF(e,t);return a?"title"in a?a.title:a.name:void 0},VG=()=>{let{updateIterationConfiguration:e}=Mq();return{destroyColumnIteration:(0,K.useCallback)(async(t,a)=>{if(t.dataType!==eN.Iteration)return;let r=VF(t,a);if(!r||!t.settings.configuration)return;let n=M0(t.settings.configuration,r);await e(t,n)},[e])}},VV=e=>{let{workflowsUsingColumnOption:t}=pb(),{destroyColumnOption:a}=Cx(),{destroyColumnIteration:r}=VG(),n=(0,K.useCallback)(async(e,t)=>o0(e)?a(e,{id:t}):oZ(e)?r(e,t):void 0,[r,a]),i=(0,K.useCallback)(e=>o0(e)||oZ(e),[]),{items:l}=ug(),s=(0,K.useCallback)((e,a)=>t(e,a),[t]),o=(0,K.useCallback)(t=>e?l.map(t=>t.columns[e.id]).filter(e=>e&&"id"in e&&e.id===t).length:0,[e,l]),d=Md(),u=(0,K.useCallback)(async t=>{if(!e||!i(e))return;let a=VO(e,t),r=o(t);if(!a||!e)return;let l=s(e.databaseId,t).length;if(await d({field:e,values:[a],affectedItems:r,affectedWorkflows:l}))return n(e,t)},[e,i,o,s,d,n]);return{deleteGroup:e&&i(e)?u:void 0}},V$=e=>{e.kind;return nH.addItem},VW={loaded:"loaded",missing:"missing",loading:"loading"};function Vz(){let[e,t]=(0,K.useState)(!1),{missingRequiredColumnData:a}=iS();return((0,K.useEffect)(()=>{if(!a)return;let e=!0,r=window.setTimeout(()=>{e&&t(!0)},300);return()=>{e=!1,window.clearTimeout(r)}},[a]),(0,K.useEffect)(()=>{!a&&e&&t(!1)},[e,a]),e&&a)?{loadingState:VW.loading}:a?{loadingState:VW.missing}:{loadingState:VW.loaded}}let VH=({aggregates:e,hideItemsCount:t,itemsCount:a,columnLimit:r,counterSx:n})=>{let{itemCountContent:i,sx:l}=function({columnLimit:e,itemsCount:t}){return void 0===e?{itemCountContent:t,sx:VU.default}:{itemCountContent:`${t} / ${e}`,sx:function({columnLimit:e,itemsCount:t}){return e<t?VU.danger:VU.default}({columnLimit:e,itemsCount:t})}}({columnLimit:r,itemsCount:a});return(0,F.jsxs)(F.Fragment,{children:[!t&&(0,F.jsx)(gn.A,{sx:{...n,...l},...(0,ey.G)("column-items-counter"),children:i}),e.map(e=>(0,K.createElement)(bD.A,{sx:{...n,color:"fg.muted"},...(0,ey.G)(`column-sum-${e.name}`),key:`aggregate-sum-${e.name}`,children:[e.name,": ",function(e){return Number.isInteger(e.sum)?e.sum.toString():e.sum.toFixed(e.maxDecimalPlaces).replace(/\.?0+$/,"")}(e)]}))]})},VU={default:{color:"fg.muted"},danger:{color:"danger.fg",backgroundColor:"danger.subtle"}};try{VH.displayName||(VH.displayName="AggregateLabels")}catch{}let Vq=({isLeftmostColumn:e,columnMoveNotAvailable:t,...a})=>(0,F.jsxs)(fi.l.Item,{inactiveText:e?"This is the left-most column":void 0,...a,children:[(0,F.jsx)(fi.l.LeadingVisual,{children:(0,F.jsx)(ly.ArrowLeftIcon,{})}),"Move left",t&&(0,F.jsxs)(fi.l.Description,{variant:"block",children:["Unavailable for ",t]})]}),VK=({isRightmostColumn:e,columnMoveNotAvailable:t,...a})=>(0,F.jsxs)(fi.l.Item,{inactiveText:e?"This is the right-most column":void 0,...a,children:[(0,F.jsx)(fi.l.LeadingVisual,{children:(0,F.jsx)(ly.ArrowRightIcon,{})}),"Move right",t&&(0,F.jsxs)(fi.l.Description,{variant:"block",children:["Unavailable for ",t]})]});try{Vq.displayName||(Vq.displayName="MoveToLeftAction")}catch{}try{VK.displayName||(VK.displayName="MoveToRightAction")}catch{}let VQ={position:"sticky",right:0,mr:1},VJ=({name:e,isColumn:t=!1,open:a,setOpen:r,onRename:n,onEditLimit:i,onEditDetails:l,onHide:s,onDelete:o,onMoveToLeft:d,onMoveToRight:u,moveToLeftDisabled:c,moveToRightDisabled:m,isSingleSelect:p,items:h})=>{let{hasWritePermissions:f}=eK(),g=(0,K.useMemo)(()=>h.filter(e=>e.contentType!==eJ.RedactedItem),[h]),y=(0,K.useRef)(null),{memex_column_menu_position:x}=iz(),{openArchiveConfirmationDialog:b}=ww(),{openRemoveConfirmationDialog:v}=wS(),w=(0,K.useCallback)(()=>{0!==h.length&&b(h.map(e=>e.id),tp,nH.archiveGroupItemsConfirmationTitle,nH.archiveGroupItemsConfirmationMessage(h.length))},[b,h]),j=(0,K.useCallback)(()=>{0!==h.length&&v(h.map(e=>e.id),tp,{title:nH.deleteGroupItemsConfirmationTitle,content:nH.deleteGroupItemsConfirmationMessage(h.length)})},[v,h]),C=(0,K.useCallback)(()=>{r(!a)},[a,r]),I=(0,K.useCallback)(()=>{a&&r(!1)},[a,r]),S=[];n&&f&&S.push((0,F.jsx)(VX,{onSelect:n},"rename")),i&&f&&S.push((0,F.jsx)(VY,{onSelect:i},"editLimit")),l&&f&&S.push((0,F.jsx)(VZ,{onSelect:l},"editDetails")),s&&S.push((0,F.jsx)(V0,{onSelect:s},"hide")),o&&f&&S.push((0,F.jsx)(V1,{onSelect:o},"delete"));let k=[];f&&(k.push((0,F.jsx)(V2,{disabled:0===g.length,onSelect:w},"archiveItems")),k.push((0,F.jsx)(V5,{disabled:0===g.length,onSelect:j},"deleteItems")));let N=[];if(x&&d&&f){let e=c||!p;N.push((0,F.jsx)(Vq,{disabled:e,isLeftmostColumn:p&&c,columnMoveNotAvailable:!1===p?"iterations":void 0,onSelect:d},"moveToLeft"))}if(x&&u&&f){let e=m||!p;N.push((0,F.jsx)(VK,{disabled:e,isRightmostColumn:p&&m,columnMoveNotAvailable:!1===p?"iterations":void 0,onSelect:u},"moveToRight"))}return 0===k.length&&0===S.length&&0===N.length?null:(0,F.jsxs)(yu.W,{open:a,children:[(0,F.jsx)(yu.W.Anchor,{children:(0,F.jsx)(fE.K,{ref:y,"aria-label":nH.groupHeaderMenu(e,t),"aria-haspopup":"menu",variant:"invisible",icon:ly.KebabHorizontalIcon,size:"small",sx:VQ,onClick:C,onKeyDown:e=>{("Enter"===e.key||"Space"===e.code)&&(e.preventDefault(),C())}})}),(0,F.jsx)(yu.W.Overlay,{align:"end",onClickOutside:I,onEscape:I,children:(0,F.jsxs)(fi.l,{role:"menu",children:[k.length>0&&(0,F.jsxs)(fi.l.Group,{children:[(0,F.jsx)(fi.l.GroupHeading,{children:"Items"}),k]}),S.length>0&&(0,F.jsxs)(F.Fragment,{children:[k.length>0&&(0,F.jsx)(fi.l.Divider,{}),(0,F.jsxs)(fi.l.Group,{children:[(0,F.jsx)(fi.l.GroupHeading,{children:t?"Column":"Group"}),S]})]}),N.length>0&&(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(fi.l.Divider,{}),(0,F.jsxs)(fi.l.Group,{children:[(0,F.jsx)(fi.l.GroupHeading,{children:"Position"}),N]})]})]})})]})},VX=e=>(0,F.jsxs)(fi.l.Item,{...e,children:[(0,F.jsx)(fi.l.LeadingVisual,{children:(0,F.jsx)(ly.PencilIcon,{})}),"Rename"]}),VY=e=>(0,F.jsxs)(fi.l.Item,{...e,children:[(0,F.jsx)(fi.l.LeadingVisual,{children:(0,F.jsx)(ly.NumberIcon,{})}),"Set limit"]}),VZ=e=>(0,F.jsxs)(fi.l.Item,{...e,children:[(0,F.jsx)(fi.l.LeadingVisual,{children:(0,F.jsx)(ly.PencilIcon,{})}),"Edit details"]}),V0=e=>(0,F.jsxs)(fi.l.Item,{...e,children:[(0,F.jsx)(fi.l.LeadingVisual,{children:(0,F.jsx)(ly.EyeClosedIcon,{})}),"Hide from view"]}),V1=e=>(0,F.jsxs)(fi.l.Item,{variant:"danger",...e,children:[(0,F.jsx)(fi.l.LeadingVisual,{children:(0,F.jsx)(ly.TrashIcon,{})}),"Delete"]}),V2=e=>(0,F.jsxs)(fi.l.Item,{...e,children:[(0,F.jsx)(fi.l.LeadingVisual,{children:(0,F.jsx)(ly.ArchiveIcon,{})}),"Archive all"]}),V5=e=>(0,F.jsxs)(fi.l.Item,{variant:"danger",...e,children:[(0,F.jsx)(fi.l.LeadingVisual,{children:(0,F.jsx)(ly.TrashIcon,{})}),"Delete all"]});try{VJ.displayName||(VJ.displayName="GroupMenu")}catch{}try{VX.displayName||(VX.displayName="RenameGroupAction")}catch{}try{VY.displayName||(VY.displayName="EditGroupLimitAction")}catch{}try{VZ.displayName||(VZ.displayName="EditGroupDetailsAction")}catch{}try{V0.displayName||(V0.displayName="HideGroupAction")}catch{}try{V1.displayName||(V1.displayName="DeleteGroupAction")}catch{}try{V2.displayName||(V2.displayName="ArchiveItemsAction")}catch{}try{V5.displayName||(V5.displayName="DeleteItemsAction")}catch{}let V3="INPUT",V4=(0,K.memo)((0,K.forwardRef)(function({item:e,scrollIntoView:t,index:a,verticalGroup:r,columnIndex:n,horizontalGroupIndex:i,onMouseDown:l,focusType:s,keyboardMovingCard:o,isDragDisabled:d,isVisible:u,size:c,...m},p){let h=(0,K.useContext)(Z.Dx),f=(0,K.useRef)(null),g=(0,K.useRef)(null);(0,fn.T)(p,g);let{moveCard:y,moveCards:x,moveCardToPosition:b}=O0(),{navigationDispatch:v,stateRef:w}=u9(),{expandColumnSelectionViaKeys:j,filteredSelectedCardIds:C,onCardClick:I,resetSelection:S,selectSingleCard:k,selectAllCycle:N,state:T}=Gd(e,f,i,n),{clearClipboard:_,copyItems:A}=TQ(),{openPane:R}=me(),{supportedItemTypes:P}=c7(),{hasWritePermissions:D}=eK(),{findMemexItem:E}=ub(),{isSorted:M}=un(),{postStats:B}=iN(),L=e.contentType===eJ.RedactedItem,O=!L&&!!T[e.id],G=o?.cardIds.includes(e.id),V=(o?.cardIds.length??0)>1,$=s===u6.Focus&&o&&o.cardIds.length<=1,W=s===u6.Focus?o?.sashSide:void 0,z=(0,K.useCallback)(()=>{v(cr(i,n,e.id))},[i,n,e,v]),H=(0,K.useCallback)(()=>{var t;S(),v((t=e.id,u2({focusType:u6.Focus,details:{type:"nearestCard",indexOfCardWithinColumn:a,columnIndex:n,cardId:t,findMemexItem:E,horizontalGroupIndex:i}})))},[S,v,a,n,i,e.id,E]),{openRemoveConfirmationDialog:U}=wS(void 0,H,z),{openArchiveConfirmationDialog:q}=ww(void 0,H,z),Q=(0,K.useCallback)(t=>{let a=O&&C.length>1?C:[e.id];a.every(e=>{let t=E(e);return!!t&&wd(t.contentType)})&&q(a,t)},[O,C,e.id,E,q]),J=(0,K.useCallback)(t=>{U(O&&C.length>1?C:[e.id],t)},[C,O,e.id,U]),X=(0,K.useCallback)(t=>{D&&(b(e.id,r.id,"top"),B({name:tN,ui:t,context:JSON.stringify({type:"top",fieldId:r.groupMetadata?.id??o2,itemId:e.id})}))},[D,e.id,b,B,r.groupMetadata?.id,r.id]),Y=(0,K.useCallback)(t=>{D&&(b(e.id,r.id,"bottom"),B({name:tN,ui:t,context:JSON.stringify({type:"bottom",fieldId:r.groupMetadata?.id??o2,itemId:e.id})}))},[D,e.id,b,B,r.groupMetadata?.id,r.id]),ee=(0,K.useCallback)(()=>{A(O&&C.length>1?C.reduce((e,t)=>{let a=E(t);return a&&e.push(a),e},[]):[e],{withHeaders:!0})},[O,C,e,E,A]),et=u?"unset":`${c}px`,ea=(0,K.useMemo)(()=>({...m.sx,borderRadius:2,borderColor:h.colors.border.default,borderWidth:"1px",borderStyle:"solid",boxShadow:h.shadows.shadow.medium,height:et,"&:hover":{cursor:L?"not-allowed":d?"default":"grab"}}),[m.sx,h.colors.border.default,h.shadows.shadow.medium,et,L,d]),er=(0,K.useCallback)(()=>{if(o&&S(),0===C.length&&k(e.id),D){let t=C.length>1?C:[e.id],a=w.current?.focus?.type==="coordinate"?w.current.focus.details.y:void 0;a&&v(u5({type:"coordinate",focusType:u6.Focus,details:{x:n,y:a,meta:{horizontalGroupIndex:i,keyboardMovingCard:{sashSide:"after",cardIds:t,returnFocus:{horizontalGroupIndex:i,columnIndex:n,cardId:a}}}}}))}else v(cr(i,n,e.id))},[o,C,D,S,k,i,e.id,w,v,n]),en=(0,K.useCallback)((t,a)=>{let l=E(t);if(!l)return;y(l,e.id,a,r);let s=r.groupMetadata?.id??o2;B({name:tN,ui:tT.KeyboardShortcut,context:JSON.stringify({fieldId:s,itemId:t})}),S(),v(cr(i,n,t))},[E,y,e.id,r,B,S,v,i,n]),ei=(0,K.useCallback)(e=>{let t=e.map(e=>E(e)).filter(rc);x(t,r);let a=r.groupMetadata?.id??o2;B({name:tN,ui:tT.KeyboardShortcut,context:JSON.stringify({fieldId:a,itemIds:t.map(e=>e.id)})}),o&&v(cr(i,n,o.returnFocus.cardId))},[x,r,B,o,E,v,i,n]);(0,K.useEffect)(()=>{s===u6.Focus&&g.current&&(g.current.focus(),g.current.scrollIntoView({block:"nearest",inline:"nearest",behavior:"smooth"}))},[s,g]),(0,K.useEffect)(()=>{t&&g.current?.scrollIntoView({block:"nearest",inline:"nearest",behavior:"smooth"})},[t]);let el=(0,K.useCallback)(t=>{let a=w.current?.focus?.type==="coordinate";if(t.shiftKey||rh(t)&&a)return t.preventDefault();o&&S(),s!==u6.Edit&&(function(e,t){if(e.current){let a=t.target.closest("[data-suspend-card-focus]");return null!=a&&e.current.contains(a)}return!1}(g,t)?(t.stopPropagation(),v(cr(i,n,e.id,u6.Suspended))):(v(cr(i,n,e.id)),l&&l(t)))},[w,o,s,S,v,n,e.id,l,i]),es=(0,K.useCallback)(t=>{let a=t.target;if(s===u6.Focus&&a.nodeName!==V3){let a=T5(eC.l,t);if(a.action){if(T1(t),(M||V)&&o&&a.action.navigation.y)return;v(a.action),o||S()}else if((a.keyAsShortcut===fN.DELETE||a.keyAsShortcut===fN.BACKSPACE)&&D&&!L)J(tm),T1(t);else if(a.keyAsShortcut===fN.ARCHIVE)Q(tm),T1(t);else if(a.keyAsShortcut===fN.SHIFT_ARROW_UP||a.keyAsShortcut===fN.SHIFT_ARROW_DOWN)o&&z(),j(a.keyAsShortcut===fN.SHIFT_ARROW_UP?T3.Up:T3.Down),T1(t);else if(a.keyAsShortcut===fN.ENTER&&o){let e="before"===W?"top":"bottom";if(1===o.cardIds.length){let t=o.cardIds[0];t&&en(t,e)}else ei(o.cardIds)}else a.keyAsShortcut!==fN.SHIFT_SPACE&&a.keyAsShortcut!==fN.ENTER||L?a.keyAsShortcut===fN.SPACE&&P.has(e.contentType)?R(e):a.keyAsShortcut===fN.META_A?(N(),T1(t)):a.keyAsShortcut===fN.ESCAPE?(_(),S(),o&&v(cr(o.returnFocus.horizontalGroupIndex,o.returnFocus.columnIndex,o.returnFocus.cardId))):a.keyAsShortcut===fN.META_C&&D&&!L?ee():a.keyAsShortcut===fN.TAB&&(S(),o?v(cr(o.returnFocus.horizontalGroupIndex,o.returnFocus.columnIndex,o.returnFocus.cardId)):v(ci())):er()}},[s,D,L,o,P,e,M,V,v,S,J,Q,j,z,W,en,ei,er,R,N,_,ee]),eo=(0,K.useCallback)(()=>{!function(e,t,a){if(!e?.focus?.details||"coordinate"!==e.focus.type)return!1;let r=e.focus.details;return r.y===t&&r.x===a}(w.current,e.id,n)&&document.activeElement===g.current&&v(cr(i,n,e.id))},[w,e.id,n,v,i]),ed=(0,K.useCallback)(e=>{if(!e.relatedTarget){S(),v(ci());return}s===u6.Suspended&&g.current&&(g.current.contains(document.activeElement)||document.activeElement===document.body)&&e.preventDefault()},[s,S,v]),eu=(0,K.useMemo)(()=>$&&W&&!M?Object.fromEntries(L1(W,"card",!0).map(e=>[e,!0])):{},[M,W,$]);return(0,F.jsx)(GV,{...(0,ey.G)("board-view-column-card"),sx:{...ea,flexDirection:"column",flexShrink:0,mb:"8px",overflow:"visible"},ref:g,"data-board-card-id":e.id,"data-hovercard-subject-tag":iV(e),onMouseDown:el,onClick:I,onFocus:eo,onBlur:ed,onKeyDown:es,className:(0,vB.$)(eu,{"keyboard-moving-card":G,"suspended-focus":s===u6.Suspended,selected:O,"board-view-column-card":!0}),...m,"data-test-card-is-selected":O||void 0,"data-test-keyboard-moving-card":G||void 0,"data-test-card-is-focused":s===u6.Focus||void 0,children:u?(0,F.jsx)(VB,{item:e,verticalGroupId:r.id,archiveItem:Q,removeItem:J,moveItemToTop:X,moveItemToBottom:Y,contextMenuRef:f}):null})}));V4.displayName="Card";let V6=(0,K.memo)(function(e){let t=(0,K.useRef)(null),{isVisible:a,size:r}=pA({ref:t}),{item:n,verticalGroup:i,columnIndex:l,isDragDisabled:s}=e,{attributes:o,listeners:d,setNodeRef:u}=(0,kS.PM)({id:n.id,data:{type:"card",item:n,ref:t,verticalGroup:i,columnIndex:l,horizontalGroupIndex:e.horizontalGroupIndex},disabled:s||!a}),{setNodeRef:c}=(0,kS.zM)({id:n.id,data:{type:"card",item:n,ref:t,verticalGroup:i,columnIndex:l,horizontalGroupIndex:e.horizontalGroupIndex},disabled:!a});return c(t.current),u(t.current),(0,F.jsx)(V4,{size:r,ref:t,...e,isVisible:a,...o,...d})});try{V6.displayName||(V6.displayName="DraggableCard")}catch{}let V8=(0,Z.Ay)(lx.A).withConfig({displayName:"styled-keyboard-moving-card-placeholder__StyledKeyboardMovingCardPlaceholder",componentId:"sc-13a4877a-0"})(["background-color:",";height:",";border:0;border-radius:var(--borderRadius-medium);z-index:12;outline:none;"],(0,q.Jt)("colors.accent.emphasis"),(0,q.Jt)("space.1"));try{V8.displayName||(V8.displayName="StyledKeyboardMovingCardPlaceholder")}catch{}let V7=(0,K.memo)((0,K.forwardRef)(function({keyboardMovingCard:e,verticalGroup:t,columnIndex:a,focusType:r,horizontalGroupIndex:n,...i},l){let s=(0,K.useRef)(null);(0,fn.T)(l,s);let{moveCard:o,moveCards:d}=O0(),{navigationDispatch:u}=u9(),{resetSelection:c}=Gd(void 0,void 0,n,a),{isSorted:m}=un(),{findMemexItem:p}=ub(),{postStats:h}=iN(),f=(0,K.useCallback)(()=>{if(1===e.cardIds.length){let a=e.cardIds[0];if(a){let r="after"===e.sashSide?"bottom":"top",n=p(a);n&&o(n,void 0,r,t)}}else d(e.cardIds.map(e=>p(e)).filter(rc),t);h({name:tN,ui:tT.KeyboardShortcut,context:JSON.stringify({fieldId:t.groupMetadata?.id??o2,...e.cardIds.length>1?{itemIds:e.cardIds}:{itemId:e.cardIds[0]}})}),u(cr(n,a,e.returnFocus.cardId))},[n,e.cardIds,e.returnFocus.cardId,e.sashSide,u,a,o,t,d,p,h]);(0,K.useEffect)(()=>{s.current?.focus()},[s]);let g=(0,K.useCallback)(t=>{let a=t.target;if(r===u6.Focus&&a.nodeName!==V3){let a=T5(u,t);a.action?T1(t):a.keyAsShortcut===fN.ENTER?f():(a.keyAsShortcut===fN.ESCAPE||a.keyAsShortcut===fN.TAB)&&(c(),u(cr(e.returnFocus.horizontalGroupIndex,e.returnFocus.columnIndex,e.returnFocus.cardId)))}},[r,u,f,c,e.returnFocus.horizontalGroupIndex,e.returnFocus.columnIndex,e.returnFocus.cardId]),y=e.cardIds.length>1;return(0,F.jsx)(V8,{...(0,ey.G)("board-view-keyboard-moving-card-placeholder"),ref:s,"data-board-card-id":-1,tabIndex:0,onKeyDown:g,className:(0,vB.$)({"suspended-focus":r===u6.Suspended}),...i,"data-test-card-is-focused":!0,sx:{opacity:m||y?0:1}})}));try{V7.displayName||(V7.displayName="KeyboardMovingCardPlaceholder")}catch{}try{V7.displayName||(V7.displayName="KeyboardMovingCardPlaceholder")}catch{}let V9=()=>(0,F.jsx)(lx.A,{sx:{content:"",display:"block",width:"100%",backgroundColor:"accent.emphasis",height:gm("space.1"),border:"0",borderRadius:2}});try{V9.displayName||(V9.displayName="EmptyColumnSash")}catch{}let $e=e=>{let{currentView:t,viewStateDispatch:a}=iS(),{groupedByColumn:r}=ue(),n=t?.number,i=r?.databaseId,l=e.groupMetadata?.id,{perform:s}=uN({request:(0,K.useCallback)(async e=>{"number"==typeof n&&"number"==typeof i&&l&&t&&(await Ic({viewNumber:n,view:{...uT(t.serverViewState,["id","number","createdAt","updatedAt","priority"]),layoutSettings:{...t.serverViewState.layoutSettings,board:{...t.serverViewState.layoutSettings.board,columnLimits:{...t.serverViewState.layoutSettings.board?.columnLimits,[i]:{...t.serverViewState.layoutSettings.board?.columnLimits?.[i],[l]:e}}}}}}),a({type:lc.UpdateBoardColumnLimit,limit:e,columnDatabaseId:i,optionId:l,viewNumber:n}))},[n,i,l,t,a])});return{updateColumnLimit:s,columnLimit:i&&l?t?.localViewStateDeserialized.layoutSettings.board?.columnLimits?.[i]?.[l]:void 0}},$t=e=>{let{moveColumnOption:t}=Cx();return{moveColumn:(0,K.useCallback)(async(a,r,n)=>{if(e?.dataType!==eN.SingleSelect||a===r)return;let i=e.settings.options.findIndex(e=>e.id===a)+1,l=e.settings.options.findIndex(e=>e.id===r)+1,s="before"===n?l:l+1;i<l&&s--,await t(e,{id:a,position:Math.max(s,1)})},[e,t])}},$a=({initialColumnLimit:e,onSave:t,onCancel:a})=>{let[r,n]=(0,K.useState)(!1),[i,l]=(0,K.useState)(e??""),s=(0,K.useRef)(null),o=()=>t(""===i?void 0:i);(0,K.useEffect)(()=>s.current?.focus(),[]);let d=(0,K.useRef)(null);(0,bS.g)({containerRef:d,onClickOutside:e=>e.preventDefault()});let u=(0,K.useId)();return(0,F.jsx)(_H.tL,{commands:{"projects:save-form":o},children:(0,F.jsx)(Cw.l,{title:`${e&&e>0?nH.edit:nH.set} column limit`,onClose:a,role:"dialog","aria-modal":"true",width:"medium",ref:d,footerButtons:[{type:"button",onClick:a,content:"Cancel"},{form:u,type:"submit",content:"Save",trailingVisual:()=>(0,F.jsx)(_H.hh,{variant:"onEmphasis",commandId:"projects:save-form"}),buttonType:"primary"}],children:(0,F.jsx)("form",{id:u,onSubmit:e=>(e.preventDefault(),o()),onInvalid:e=>{e.preventDefault(),n(!0)},children:(0,F.jsx)($r,{ref:s,value:i,onChange:l,invalidSubmission:r})})})})},$r=(0,K.forwardRef)(function({value:e,onChange:t,invalidSubmission:a},r){let n=function(e){if(""!==e){if(Number.isNaN(e)||!Number.isInteger(e))return nH.fieldMustBeAnInteger;if(e>1e6)return nH.columnLimitExceeded;if(e<0)return nH.fieldMustBePositiveOrZero}}(e),i=a&&void 0!==n;return(0,F.jsxs)(hM.A,{children:[(0,F.jsx)(hM.A.Label,{children:"Column limit"}),(0,F.jsx)(gp.A,{ref:r,value:e,onChange:e=>t(Number.isNaN(e.target.valueAsNumber)?"":e.target.valueAsNumber),onKeyDown:e=>{["e","E","+","-","."].includes(e.key)&&e.preventDefault()},block:!0,name:"Column limit",validationStatus:i?"error":void 0,"aria-invalid":i?"true":void 0,type:"number",min:0,max:1e6,...(0,ey.G)("column-limit-text-input")}),i&&(0,F.jsx)(hM.A.Validation,{variant:"error",children:n}),(0,F.jsx)(hM.A.Caption,{children:"A limit on the number of items in a column"})]})});try{$a.displayName||($a.displayName="ColumnLimitModal")}catch{}try{$r.displayName||($r.displayName="ColumnLimitInput")}catch{}let $n="24px",$i={fontSize:2,fontWeight:"bold"},$l=(0,K.memo)(({columnLimit:e,counterSx:t,hideItemsCount:a,itemsCount:r,verticalGroup:n,isEditing:i,loadingState:l,setIsEditing:s,onNameChange:o,isUserEditable:d,initialFocus:u,placeholder:c})=>{let[m,p]=(0,xX.N)(n.name),h=(0,K.useRef)(null),f=(0,K.useRef)(null),g=(0,K.useRef)(i);(0,K.useEffect)(()=>{i&&f.current?.focus()},[i]);let y=(0,K.useRef)(u);(0,K.useEffect)(()=>{y.current&&h.current?.focus()},[]),(0,K.useEffect)(()=>{!i&&g.current&&h.current?.focus(),g.current=i},[i]);let x=fd(null,[],{stopPropagation:!0,preventDefault:!1}),b=(0,K.useCallback)(e=>{p(e.currentTarget.value)},[p]),v=(0,K.useCallback)(()=>{d&&(p(n.name),s(!0))},[d,n.name,s,p]),w=(0,K.useCallback)(()=>{p(n.name),s(!1)},[n.name,s,p]),j=(0,K.useCallback)(()=>{o(m),w()},[m,o,w]),C=(0,K.useCallback)(e=>{switch(fA(e)){case fN.ESCAPE:i&&w();return;case fN.ENTER:i?j():v();return}},[i,v,w,j]),I=(0,xJ._)(C),S=i?{boxShadow:"primer.shadow.focus",borderRadius:"2px"}:d?{"&:focus-within":{boxShadow:"primary.shadow.focus",borderRadius:"2"},"&:hover:not(:focus-within)":{boxShadow:e=>`0 0 0 3px ${e.colors.border.default}`,borderRadius:"2"}}:{};return(0,F.jsxs)(lx.A,{ref:h,onClick:v,onKeyDown:i?void 0:C,tabIndex:d?0:-1,...(0,ey.G)("board-view-column-title"),sx:{...S,display:"flex",alignItems:"center",height:$n,my:1,mr:2,overflow:"hidden",columnGap:2},children:[o3(n.groupMetadata)&&(0,F.jsx)(h6,{color:n.groupMetadata.color}),i?(0,F.jsx)(br,{children:(0,F.jsx)(gg,{as:gx,ref:f,onChange:b,onBlur:j,onMouseDown:x,...I,type:"text",value:m,placeholder:c,sx:{height:$n},...$i})}):(0,F.jsx)("h2",{children:(0,F.jsx)(p$,{role:d?"button":void 0,...(0,ey.G)("board-view-column-title-text"),sx:{lineHeight:$n,cursor:"default",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",display:"block"},...$i,children:n.nameHtml})}),l===VW.loaded&&(0,F.jsx)(VH,{aggregates:[],counterSx:{flexShrink:0,...t},hideItemsCount:a,columnLimit:e,itemsCount:r})]})});$l.displayName="EditableColumnName";let $s=(0,K.memo)(function({verticalGroup:e,groupId:t,items:a,isLoading:r=!1,index:n,scrollToItemId:i,initialNameFocus:l,onDelete:s,onUpdateDetails:o,isDraggable:d,isUserEditable:u,isCurrentIteration:c,iterationDateRange:m,hidden:p,horizontalGroup:h,horizontalGroupIndex:f,headerType:g="visible",isLastGroup:y,totalCount:x=0}){var b,v;let w=(0,U.jE)(),{groupMetadata:j}=e,{currentView:C}=iS(),I=C?.number,S=(0,K.useRef)(null),k=(0,K.useRef)(null),N=(0,kS.fF)(),T=null!==N.active,[_,A]=(0,K.useState)(!1),[R,P]=(0,K.useState)(!1),[D,E]=(0,K.useState)(!1),{enableOmnibar:M}=GC(),{state:B}=u7(),{hasWritePermissions:L}=eK(),{resetSelection:O,filteredSelectedCards:G}=Gd(),{insertFilter:V}=lh(),{groupByField:$,groupByFieldOptions:W}=OK(),{groupedByColumn:z}=ue(),{postStats:H}=iN(),{isSorted:q}=un(),{columnLimit:Q,updateColumnLimit:J}=$e(e),X=N.over?.data.current,Y=N.active?.data.current,Z=h&&"value"in h?h.value:void 0,ee=Gp(X)&&X.verticalGroup.id===e.id&&f===X.horizontalGroupIndex,et=Gm(X)&&X.verticalGroup.id===e.id&&f===X.horizontalGroupIndex,ea=(0,K.useRef)(null),{navigationDispatch:er}=u9(),{memex_table_without_limits:en}=iz(),ei=ee||et,el=ei&&0===a.length&&!q&&G.length<=1,es=(0,K.useMemo)(()=>({id:e.groupMetadata?.id}),[e.groupMetadata?.id]),eo=h?.sourceObject&&(h.sourceObject.kind,!1),ed=Fe({dragAxis:"horizontal",dragID:e.id,dragType:"column",dragIndex:n,dragRef:S,disable:!u||!d,metadata:es}),{setNodeRef:eu}=(0,kS.zM)({id:Z?`${Z}-${e.id}`:e.id,data:{verticalGroup:e,type:"column",ref:S,index:n,horizontalGroupIndex:f}});eu(S.current),Fi({active:Gm(Y)&&et,scrollRef:k,strength:50,deadZoneRatioY:.5});let ec=B.focus?.type==="coordinate"?B.focus:null,em=ec?.details.x===n&&!!ec?.details.meta.keyboardMovingCard,ep=ei||em,eh=ep&&(G.length>1||(ec?.details.meta.keyboardMovingCard?.cardIds.length??0)>1),ef=q&&ep||eh,eg=(0,K.useCallback)(()=>{if(z?.name){let{dataType:t,databaseId:a,name:r}=z;V(`-${nm(z.name)}`,e.name),H({name:"board_column_menu_hide",context:JSON.stringify({dataType:t,databaseId:a,name:r})})}},[z,e.name,V,H]),{moveColumn:ex}=$t($),eb=$?.dataType===eN.SingleSelect,ev=(0,K.useCallback)(()=>{if(!j?.id||!eb)return;let e=$c(W,j.id),t=$m(W[e-1]);t&&(ex(j?.id,t,"before"),eH(!1))},[j?.id,eb,W,ex]),ew=(0,K.useCallback)(()=>{if(!j?.id||!eb)return;let e=$c(W,j.id),t=$m(W[e+1]);t&&(ex(j?.id,t,"after"),eH(!1))},[j?.id,eb,W,ex]),ej=(0,K.useCallback)(()=>{A(!0)},[]),eC=(0,K.useCallback)(t=>{e.groupMetadata?.id&&o({id:e.groupMetadata?.id,name:t},{id:e.groupMetadata?.id,name:e.nameHtml})},[o,e.nameHtml,e.groupMetadata?.id]),eI=async e=>{await J(e),E(!1)},eS=e=>{j&&o(e,j),P(!1)},ek=(0,K.useCallback)(()=>{M({columnId:e.id,horizontalGroupIndex:f})},[M,e.id,f]),eT=(0,K.useCallback)(e=>{e.stopPropagation(),ek()},[ek]),e_=(0,K.useCallback)(()=>{O()},[O]),eA=(b=B.focus,b?.type==="add-item"&&!eo&&B.focus.details.verticalGroupId===e.id&&f===B.focus.details.horizontalGroupIndex),eR=!!ct(B.focus)&&B.focus.details.verticalGroupId===e.id&&f===B.focus.details.horizontalGroupIndex,eP=!!ct(B.focus)&&B.focus.details.verticalGroupId===e.id&&!Z&&!en;(0,pk.N)(()=>{xD(k.current)},[I]),(0,K.useEffect)(()=>{eA&&ea.current&&(ea.current.focus(),ea.current.scrollIntoView({block:"nearest",inline:"nearest",behavior:"smooth"}))},[eA]);let eD=(0,K.useCallback)(e=>{T5(er,e).action&&T1(e)},[er]),{loadingState:eE}=Vz(),{hideItemsCount:eM,getAggregatesForItems:eB,getAggregatesForGroupId:eL}=Sq(),eF=en?dd(w,e.id):void 0,eO=en?(0,K.useMemo)(()=>null!=eF?eL(eF):[],[eL,eF]):(0,K.useMemo)(()=>eB(a),[a,eB]),eG=o0(z)?"singleSelectDetails":"name",eV=(0,vB.$)(g,{"last-group":y,"drag-outline":ef}),e$=(v=B.focus,v?.type==="load-more-items"&&B.focus.details.verticalGroupId===e.id&&f===B.focus.details.horizontalGroupIndex),eW=(0,K.useCallback)(e=>{T5(er,e).action&&T1(e)},[er]),[ez,eH]=(0,K.useState)(!1),eU=en&&"only"!==g&&t,eq=OJ(h)&&h.serverGroupId;return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsxs)(GW,{id:e.id,testingName:e.name,sx:Gz,ref:S,...ed.props,onClick:e_,hidden:p,"data-board-column-has-outline":ef,className:eV,headerContent:"hidden"===g?null:(0,F.jsxs)(lx.A,{sx:{bg:"canvas.inset",alignItems:"flex-start",justifyContent:"space-between",maxWidth:"350px",pt:2,pb:1,px:3,display:"flex"},...ed.handle.props,children:[(0,F.jsxs)(lx.A,{sx:{display:"flex",flexDirection:"row",alignItems:"center",maxWidth:"90%",flexWrap:"wrap"},children:[(0,F.jsx)($l,{hideItemsCount:eM,columnLimit:Q,itemsCount:x,verticalGroup:e,onNameChange:eC,isUserEditable:u&&"name"===eG,initialFocus:l,isEditing:_,loadingState:eE,setIsEditing:A}),eE===VW.loaded&&(0,F.jsx)(VH,{aggregates:eO,counterSx:{mr:2,mt:1,mb:1},hideItemsCount:!0,itemsCount:x}),c&&(0,F.jsx)(jN,{sx:{my:1}})]}),(0,F.jsx)(lx.A,{sx:{backgroundColor:"canvas.inset",alignItems:"center",display:"flex"},children:eE===VW.loading?(0,F.jsx)(pj.A,{size:"small","aria-label":"Loading data required to properly display view",...(0,ey.G)("view-loading-indicator")}):eE===VW.missing?null:u&&(0,F.jsx)(VJ,{items:a,open:ez,setOpen:eH,name:e.name,isColumn:!0,onRename:"name"===eG?ej:void 0,onEditDetails:"singleSelectDetails"===eG?()=>P(!0):void 0,onEditLimit:()=>E(!0),onHide:eg,onDelete:j&&s?()=>s(j.id):void 0,onMoveToLeft:ev,onMoveToRight:ew,moveToLeftDisabled:1===n,moveToRightDisabled:eb&&n===W.length-1,isSingleSelect:eb})})]}),children:["hidden"!==g&&m&&(0,F.jsx)(lx.A,{sx:{bg:"canvas.inset",maxWidth:"350px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",mt:-1,pb:2,px:3,color:"fg.muted",flexShrink:0},...(0,ey.G)(`${e.id}-date-range-board-header`),children:m}),"hidden"!==g&&(0,F.jsx)(p$,{sx:{mt:-1,pb:2,px:3,maxWidth:"350px",color:"fg.muted"},children:o3(j)?j.descriptionHtml:""}),(0,F.jsxs)(lx.A,{ref:k,className:"column-drop-zone",...(0,ey.G)(`drop-zone-${e.name}`),[L0]:"card",sx:{flexDirection:"column",backgroundColor:"canvas.inset",flexGrow:1,overflowY:"auto",position:"relative",px:2,py:"4px",display:"flex",scrollPaddingBottom:"7px"},children:[el&&(0,F.jsx)(V9,{}),(0,F.jsxs)(p_,{rootRef:null,sizeEstimate:125,disableHide:T,children:["only"!==g&&a.length>0&&a.map((t,a)=>{let r=ec?.details.x===n&&ec?.details.y===t.id?ec.focusType:void 0,l=!L||t.contentType===eJ.RedactedItem;return(0,F.jsx)(V6,{item:t,scrollIntoView:t.id===i,index:a,verticalGroup:e,columnIndex:n,focusType:r,keyboardMovingCard:ec?.details.meta.keyboardMovingCard,isDragDisabled:l,horizontalGroupId:Z,horizontalGroupIndex:f},t.id)}),0===a.length&&"only"!==g&&ec?.details.x===n&&ec?.details.meta.horizontalGroupIndex===f&&ec?.details.meta.keyboardMovingCard&&(0,F.jsx)(V7,{horizontalGroupIndex:f,verticalGroup:e,columnIndex:n,focusType:ec.focusType,keyboardMovingCard:ec.details.meta.keyboardMovingCard})]}),"only"!==g&&(0,F.jsx)($o,{isVisible:eR,shouldScroll:eP}),eU&&eq&&h.serverGroupId&&(0,F.jsx)(G0,{groupId:t,secondaryGroupId:h.serverGroupId,loadMoreItemsButtonOnKeyDown:eW,isLoadMoreItemsButtonFocused:e$}),r&&(0,F.jsx)(G3,{}),eU&&!eq&&(0,F.jsx)(GZ,{groupId:t})]}),"only"!==g&&L&&(0,F.jsx)(p4.Q,{onClick:eT,ref:ea,variant:"invisible",sx:{color:"fg.muted",display:"flex",py:2,'& [data-component="buttonContent"]':{flex:0}},block:!0,size:"large",leadingVisual:ly.PlusIcon,...(0,ey.G)("board-view-add-card-button"),disabled:eo,onKeyDown:eD,title:h?.sourceObject&&V$(h.sourceObject)||nH.addItem,children:nH.addItem})]}),D&&(0,F.jsx)($a,{initialColumnLimit:Q,onCancel:()=>E(!1),onSave:eI}),R&&o3(j)&&(0,F.jsx)(Ck,{initialOption:j,onCancel:()=>P(!1),onSave:e=>eS({...j,...e})})]})}),$o=({isVisible:e,shouldScroll:t})=>{let a=(0,K.useRef)(null);return(0,K.useEffect)(()=>{t&&a.current?.scrollIntoView({behavior:"smooth"})},[t]),e?(0,F.jsx)($u,{ref:a,sx:{flexShrink:0,height:"8px",bg:"accent.emphasis",border:"0",borderRadius:"6px",mb:"12px"},...(0,ey.G)("board-view-add-card-indicator")}):null},$d=(0,Z.i7)(["from{opacity:0;}to{opacity:1;}"]),$u=(0,Z.Ay)(lx.A).withConfig({displayName:"column__StyledPlaceholder",componentId:"sc-21e0a66f-0"})(["animation:"," 0.2s ease-out;"],$d);function $c(e,t){return t?e.findIndex(e=>e.groupMetadata?.id===t):-1}function $m(e){return e?.groupMetadata?.id}try{$s.displayName||($s.displayName="Column")}catch{}try{$o.displayName||($o.displayName="IsAddingItemsIndicator")}catch{}try{$u.displayName||($u.displayName="StyledPlaceholder")}catch{}let $p=()=>{let{updateIterationConfiguration:e}=Mq(),{memex_table_without_limits:t}=iz(),a=(0,U.jE)();return{updateColumnIterationTitle:(0,K.useCallback)(async(r,n)=>{if(r.dataType!==eN.Iteration)return;let i=aK(r).find(e=>e.id===n.id);if(!i||!r.settings.configuration)return;i.title=n.name;let{iterations:l,completedIterations:s}=r.settings.configuration;t&&du(a,{...i,...n,titleHtml:n.name??i.titleHtml},n.name),await e(r,{iterations:l,completedIterations:s})},[t,a,e])}},$h=()=>{let{updateColumnOption:e}=Cx(),{updateColumnIterationTitle:t}=$p();return{updateVerticalGroup:(0,K.useCallback)(async(a,r,n=!1)=>o0(a)?e(a,r,n):oZ(a)?t(a,r):void 0,[t,e])}},$f=e=>{let{updateVerticalGroup:t}=$h(),{perform:a}=uN({request:(0,K.useCallback)(async a=>{e&&await t(e,a)},[e,t]),rollback:(0,K.useCallback)(a=>{e&&t(e,a,!0)},[e,t])});return{updateColumnDetails:a}},$g=[];function $y({groupByFieldOptions:e,itemsGroupedByField:t,groupByField:a,isLoading:r=!1,scrollToItemId:n,lastNewColumnNameRef:i,horizontalGroup:l,horizontalGroupIndex:s,headerType:o="visible",hideColumn:d,isLastGroup:u}){let{hasWritePermissions:c}=eK(),{deleteGroup:m}=VV(a),{updateColumnDetails:p}=$f(a),{memex_table_without_limits:h}=iz(),f=h&&!(r&&e.length),g=(0,K.useCallback)(e=>!!(a&&a.dataType===eN.Iteration&&o4(e.groupMetadata))&&aG(new Date,e.groupMetadata),[a]);return(0,F.jsxs)(F.Fragment,{children:[e.map((e,h)=>{let f=t[e.id],y=f?.items??$g,x=c&&e.id!==o2,b=a?.dataType!==eN.Iteration,v=f&&"totalCount"in f?f.totalCount:void 0;return(0,F.jsx)($s,{hidden:d(e),verticalGroup:e,groupId:f?.groupId,totalCount:v,items:y,isLoading:r,index:h,onDelete:m,onUpdateDetails:p,scrollToItemId:n,initialNameFocus:i.current===e.name,isUserEditable:x,isDraggable:b,isCurrentIteration:g(e),iterationDateRange:o4(e.groupMetadata)?aU(e.groupMetadata)??"":"",horizontalGroup:l,headerType:o,isLastGroup:u,horizontalGroupIndex:s},e.id)}),f&&(0,F.jsx)(GX,{headerType:o})]})}try{$y.displayName||($y.displayName="Columns")}catch{}let $x=e=>{let{addColumnOption:t}=Cx(),{perform:a}=uN({request:(0,K.useCallback)(async a=>{e?.dataType===eN.SingleSelect&&await t(e,a)},[t,e])});return{addColumn:a}},$b={is:e=>(0,N$.A)(e)&&"groupedValue"in e&&"string"==typeof e.groupedValue},$v=({groupId:e,groupedValue:t,isCollapsed:a,isEmpty:r})=>{let{toggleGroupCollapsed:n}=d7(),i=(0,kS.zM)({id:`droppable-group-${e}`,data:{groupedValue:t},disabled:!(a||r)}),l=lB(()=>n(t),500);return(0,K.useEffect)(()=>{if(i.isOver&&a){let e=l();return()=>e.cancel()}},[i.isOver,a,l]),i};function $w({onCollapseToggle:e,isCollapsed:t,expandCollapseLabel:a,...r}){return(0,F.jsx)(fE.K,{variant:"invisible",size:"small",onClick:e,sx:{color:"fg.muted","&:hover, > svg:hover, > span:hover":{color:"accent.fg",textDecoration:"none"}},icon:t?ly.ChevronRightIcon:ly.ChevronDownIcon,...r,"aria-label":a})}try{$w.displayName||($w.displayName="GroupHeaderExpansionButton")}catch{}let $j=(0,K.forwardRef)(({isCollapsed:e,isHighlighted:t,metadata:a,itemsInGroup:r,children:n,sticky:i,swimlanesHeaderRef:l,...s},o)=>{let{sourceObject:d}=a,{groupedByColumnId:u,groupedByColumn:c,toggleGroupCollapsed:m}=d7(),{postStats:p}=iN(),{viewType:h}=ma(),f=cp(d),g=ch(d),[y,x]=(0,K.useState)(!1),b=c?.dataType===eN.SingleSelect&&d.dataType===eN.SingleSelect&&"empty"!==d.kind,v=b?d.value.option:null,w=c?.dataType===eN.Iteration&&d.dataType===eN.Iteration&&"empty"!==d.kind,j="empty"===d.kind,C=(0,K.useCallback)(()=>{let t=!e;u&&p({key:"memex_project_field_group_by_collapse_toggle",groupTitle:rp(f),memexProjectColumnId:u,collapsed:t,numberOfRows:r.length}),m(a.value)},[e,u,m,a,p,f,r]),{updateColumnOption:I}=Cx(),S=e=>{b&&(I(c,e),x(!1))},k=void 0!==c&&"empty"!==a.sourceObject.kind,{insertFilter:N}=lh(),T=(0,K.useCallback)(()=>{k&&(N(`-${nm(c.name)}`,f),p({name:"group_hide",context:JSON.stringify(a.sourceObject)}))},[k,N,c,f,p,a.sourceObject]),{deleteGroup:_}=VV(c),A=(0,K.useMemo)(()=>_&&(()=>{b?_(d.value.option.id):w&&_(d.value.iteration.id)}),[_,w,b,d]),[R,P]=(0,K.useState)(!1),D=(0,K.useCallback)(()=>{x(!1),P(!0)},[x,P]),E=e?`Expand group ${f}`:`Collapse group ${f}`;return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(Gk,{className:(0,vB.$)({collapsed:e,board:h===lK.Board,sticky:i,highlighted:t}),topOffset:l?.current?.getBoundingClientRect().height??0,...(0,ey.G)(`group-header-${g}`),ref:o,...s,children:(0,F.jsxs)(lx.A,{role:"cell",className:(0,vB.$)({board:h===lK.Board,roadmap:h===lK.Roadmap}),sx:{position:"sticky",height:"44px",left:"16px",gap:3,display:"flex",alignItems:"center",overflow:"hidden","&.board":{left:"-8px"},"&.roadmap":{position:"relative",width:"100%",left:"unset"}},children:[(0,F.jsx)($w,{onCollapseToggle:C,isCollapsed:e,expandCollapseLabel:E,...(0,ey.G)(`group-by-toggle-collapsed-${g}`)}),(0,F.jsx)(lx.A,{sx:{alignItems:"center",display:"flex",overflow:"hidden",cursor:"default",gap:2},children:n}),(0,F.jsx)(VJ,{name:f,items:r,open:R,setOpen:P,onEditDetails:b?()=>x(!0):void 0,onHide:k?T:void 0,onDelete:j?void 0:A})]})}),y&&v&&(0,F.jsx)(Ck,{initialOption:v,onCancel:D,onSave:e=>S({...v,...e})})]})});function $C({titleHtml:e,sx:t}){return(0,F.jsx)(p$,{sx:{color:"fg.default",fontWeight:"bold",fontSize:2,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",...t},...(0,ey.G)("group-name"),children:e})}$j.displayName="GroupHeader";try{$C.displayName||($C.displayName="SanitizedGroupHeaderText")}catch{}let $I={AvatarStack:"assignees-group-header-label-module__AvatarStack--G5PaP"};function $S({assignees:e,rowCount:t,aggregates:a,hideItemsCount:r,titleSx:n}){let i=nO(e.map(e=>e.login));return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(wZ.A,{className:$I.AvatarStack,children:e.map(e=>(0,F.jsx)(h3.r,{loading:"lazy",alt:e.login,src:e.avatarUrl},e.id))}),(0,F.jsx)($C,{titleHtml:i,sx:n}),(0,F.jsx)(VH,{counterSx:{color:"fg.muted"},itemsCount:t,aggregates:a,hideItemsCount:r})]})}try{$S.displayName||($S.displayName="AssigneesGroupHeaderLabel")}catch{}function $k({titleHtml:e,label:t,rowCount:a,hideItemsCount:r,aggregates:n,titleSx:i}){return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)($C,{titleHtml:e,sx:i}),t&&(0,F.jsx)(bD.A,{sx:{color:"accent.fg"},...(0,ey.G)("table-group-label"),children:t}),(0,F.jsx)(VH,{counterSx:{color:"fg.muted"},itemsCount:a,aggregates:n,hideItemsCount:r})]})}try{$k.displayName||($k.displayName="DefaultGroupHeaderLabel")}catch{}function $N({iteration:e,rowCount:t,aggregates:a,hideItemsCount:r,titleSx:n}){let i=e.titleHtml,l=az(e),s=aG(new Date,e);return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)($C,{titleHtml:i,sx:n}),(0,F.jsx)(VH,{counterSx:{color:"fg.muted"},itemsCount:t,aggregates:a,hideItemsCount:r}),l&&(0,F.jsxs)(lv.A,{sx:{color:"fg.muted",ml:2,fontSize:(0,q.Jt)("fontSizes.1"),textAlign:"left",whiteSpace:"nowrap",minWidth:0,overflow:"hidden",code:{fontFamily:"fonts.mono",fontSize:0}},...(0,ey.G)("group-name-subtitle"),children:[(0,F.jsx)("time",{dateTime:aN(l.startDate),children:aV(l.startDate)})," - ",(0,F.jsx)("time",{dateTime:aN(l.endDate),children:aV(l.endDate)})]}),s&&(0,F.jsx)(jN,{sx:{ml:2}})]})}try{$N.displayName||($N.displayName="IterationGroupHeaderLabel")}catch{}let $T={[`:not(:has(.${BS.containerRing}))`]:{width:"175px"}},$_=({parentIssue:e,rowCount:t,aggregates:a,hideItemsCount:r,titleSx:n})=>{let{openParentIssue:i}=T0();return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(pq,{isDraft:!1,state:e.state,stateReason:e.stateReason,type:eJ.Issue}),e.url?(0,F.jsx)(pw.A,{href:e.url,onClick:t=>{t.metaKey||t.shiftKey||1===t.button||(t.preventDefault(),i(e))},children:(0,F.jsx)($A,{parentIssue:e,titleSx:n})}):(0,F.jsx)($A,{parentIssue:e,titleSx:n}),(0,F.jsx)(VH,{counterSx:{color:"fg.muted"},itemsCount:t,aggregates:a,hideItemsCount:r}),e.subIssueList&&(0,F.jsx)(lx.A,{sx:$T,children:(0,F.jsx)(Op,{total:e.subIssueList.total,completed:e.subIssueList.completed,percentCompleted:e.subIssueList.percentCompleted})})]})},$A=({parentIssue:e,titleSx:t})=>{let a=e.titleHtml;return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)($C,{titleHtml:a,sx:t})," ",(0,F.jsxs)(lx.A,{as:"span",sx:{color:"fg.muted",fontSize:16},children:["#",e.number]})]})};try{$_.displayName||($_.displayName="ParentIssueGroupHeaderLabel")}catch{}try{$A.displayName||($A.displayName="ParentIssueTitle")}catch{}function $R({repository:e,rowCount:t,aggregates:a,hideItemsCount:r,titleSx:n}){return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(hV,{repository:e}),(0,F.jsx)($C,{titleHtml:e.nameWithOwner,sx:n}),(0,F.jsx)(VH,{counterSx:{color:"fg.muted"},itemsCount:t,aggregates:a,hideItemsCount:r})]})}try{$R.displayName||($R.displayName="RepositoryGroupHeaderLabel")}catch{}let $P=({option:e,rowCount:t,aggregates:a,hideItemsCount:r,titleSx:n})=>(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(h6,{color:e.color}),(0,F.jsx)($C,{titleHtml:e.nameHtml,sx:n}),(0,F.jsx)(VH,{counterSx:{color:"fg.muted"},itemsCount:t,aggregates:a,hideItemsCount:r}),e.descriptionHtml&&(0,F.jsx)(p$,{sx:{color:"fg.muted",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:"200ch",flexBasis:0,flexGrow:1,mb:"-2px"},children:e.descriptionHtml})]});try{$P.displayName||($P.displayName="SingleSelectGroupHeaderLabel")}catch{}let $D=({sourceObject:e,rowCount:t,aggregates:a,hideItemsCount:r,titleSx:n})=>{if("empty"===e.kind)return(0,F.jsx)($k,{titleHtml:e.value.titleHtml,rowCount:t,aggregates:a,hideItemsCount:r,titleSx:n});switch(e.dataType){case eN.Assignees:return(0,F.jsx)($S,{assignees:e.value,rowCount:t,aggregates:a,hideItemsCount:r,titleSx:n});case eN.Date:{let i=ak(e.value.date.value),l=ro(aN(e.value.date.value))?"Today":void 0;return(0,F.jsx)($k,{titleHtml:i,label:l,rowCount:t,aggregates:a,hideItemsCount:r,titleSx:n})}case eN.Repository:return(0,F.jsx)($R,{repository:e.value,rowCount:t,aggregates:a,hideItemsCount:r,titleSx:n});case eN.Iteration:return(0,F.jsx)($N,{iteration:e.value.iteration,rowCount:t,aggregates:a,hideItemsCount:r,titleSx:n});case eN.ParentIssue:return(0,F.jsx)($_,{parentIssue:e.value,aggregates:a,hideItemsCount:r,rowCount:t,titleSx:n});case eN.SingleSelect:return(0,F.jsx)($P,{option:e.value.option,rowCount:t,aggregates:a,hideItemsCount:r,titleSx:n});default:{let i=function(e){if("empty"===e.kind)return e.value.titleHtml;switch(e.dataType){case eN.SingleSelect:return e.value.option.nameHtml;case eN.Milestone:return e.value.title;case eN.IssueType:return e.value.name;case eN.ParentIssue:return e.value.nwoReference;case eN.Number:return`${e.value.number.value}`;case eN.Text:return e.value.text.html;case eN.Labels:return e.value.nameHtml;default:tA(e)}}(e);return(0,F.jsx)($k,{titleHtml:i,rowCount:t,aggregates:a,hideItemsCount:r,titleSx:n})}}};try{$D.displayName||($D.displayName="GroupHeaderLabel")}catch{}function $E({aggregates:e,groupByField:t,groupByFieldOptions:a,groupedItems:r,headerRef:n,hideColumn:i,hideItemsCount:l,horizontalGroup:s,index:o,lastNewColumnNameRef:d,scrollToItemId:u,draggingItems:c,scrollRef:m}){let p=(0,K.useRef)(null),{memex_table_without_limits:h}=iz(),{hasNextPageForSecondaryGroups:f}=h?ul():{hasNextPageForSecondaryGroups:!1},g=(Object.values(s.itemsByVerticalGroup)||[]).reduce((e,t)=>e>t.items.length?e:t.items.length,0),{isVisible:y,size:x}=pA({ref:p,defaultHeight:s.isCollapsed?0:133*g+45+8}),b=c.some(e=>s.rows.includes(e)),{setNodeRef:v,isOver:w}=$v({groupId:s.value,groupedValue:s.value,isCollapsed:s.isCollapsed,isEmpty:0===s.rows.length}),j=y?"unset":`${x}px`,C=(y||b)&&!s.isCollapsed,I=(0,K.useRef)(s.isCollapsed);(0,pk.N)(()=>{if(s.isCollapsed!==I.current){let e=!1,t=()=>{if(!p.current||!m.current||!n.current)return 0;let{top:e}=p.current.getBoundingClientRect(),{top:t}=m.current.getBoundingClientRect();return e-(n.current.getBoundingClientRect().height+44)-t},a=()=>{requestAnimationFrame(()=>{if(!m.current)return;let a=t();(e||a<0)&&(m.current.scrollTop=m.current.scrollTop+a,e=!0)})};a(),window.setTimeout(()=>{a()},10)}I.current=s.isCollapsed},[s.isCollapsed,n,m]);let S=!f&&r.horizontalGroups.length-1===o;return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)($j,{sticky:!0,isCollapsed:s.isCollapsed,metadata:s,itemsInGroup:s.rows,swimlanesHeaderRef:n,ref:v,isHighlighted:w,children:(0,F.jsx)($D,{sourceObject:s.sourceObject,rowCount:s.totalCount,aggregates:e,hideItemsCount:l})}),(0,F.jsx)("div",{ref:p,style:{height:j},children:C?(0,F.jsx)(lx.A,{sx:GH,"data-board-horizontal-group":cp(s.sourceObject),children:(0,F.jsx)($y,{groupByFieldOptions:a,itemsGroupedByField:s.itemsByVerticalGroup,groupByField:t,scrollToItemId:u,lastNewColumnNameRef:d,headerType:"hidden",hideColumn:i,horizontalGroup:s,isLastGroup:S,horizontalGroupIndex:o})}):null})]})}try{$E.displayName||($E.displayName="HorizontalGroup")}catch{}let $M=(0,K.memo)((0,K.forwardRef)(function(e,t){return(0,F.jsx)(Oq,{children:(0,F.jsx)($F,{ref:t})})})),$B=[],$L={selected:{}},$F=(0,K.memo)((0,K.forwardRef)(function(e,t){let{currentView:a}=iS(),{memex_disable_autofocus:r}=iz(),{setGroupedBy:n}=ue(),{groupedItems:i,groupByFieldOptions:l,compatibleColumns:s}=OK(),{showTemplateDialog:o}=IC(),d=(0,K.useRef)(null);(0,fn.T)(t,d);let u=a?.number,c=(0,K.useRef)(void 0);(0,K.useEffect)(()=>{r||o||c.current===u||(c.current=u,window.setTimeout(()=>d.current?.focusIn()))},[u,o,r]),eg(()=>{if(!a)return null;let e=[],t=["c","Column field by...",e];for(let[t,r]of Object.entries(s))e.push([t,`Column field by: ${r.name}`,"column.field",()=>n(a.number,r)]);return t},[s,a,n]);let m=(0,nk.M)({cardGrid:i.horizontalGroups.map(e=>({horizontalGroupId:e.value,isCollapsed:e.isCollapsed,isFooterDisabled:!!e.sourceObject&&cu(e.sourceObject),verticalGroups:l.map(t=>{let a=e.itemsByVerticalGroup[t.id],r=a?.items??$B,n=!!a&&"hasMoreItems"in a&&!!a.hasMoreItems;return{verticalGroupId:t.id,items:r,hasMoreItems:n}})}))});return(0,F.jsx)(Ol,{children:(0,F.jsx)(L9,{children:(0,F.jsx)(Gs,{initialState:$L,metaRef:m,children:(0,F.jsxs)(ce,{metaRef:m,children:[(0,F.jsx)(GI,{}),(0,F.jsx)($O,{ref:d})]})})})})})),$O=(0,K.memo)((0,K.forwardRef)(function(e,t){let{groupedItems:a,groupByField:r,groupByFieldId:n,groupByFieldOptions:i,isLoading:l}=OK(),{groupedByColumn:s}=d7(),{sliceField:o}=nA(),{slicerItems:d}=On(),{addColumn:u}=$x(r),{moveColumn:c}=$t(r),{updateIterationConfiguration:m}=Mq(),p=(0,K.useRef)(null),[h,f]=(0,K.useState)(!1),g=(0,K.useRef)(null),y=(0,K.useRef)(!1),x=(0,K.useRef)(null),{navigationDispatch:b,stateRef:v}=u9(),{resetSelection:w,filteredSelectedCards:j}=Gd(),{missingRequiredColumnData:C}=iS(),I=(0,K.useCallback)(({dragMetadata:e,dropMetadata:t,side:r})=>{if(!e||!t)return;let n=e.id,i=t.id;i===o2&&(i=Object.keys(a.allItemsByVerticalGroup)[1],r="before"),c(n,i,r||"before")},[a.allItemsByVerticalGroup,c]),[S,k]=(0,K.useState)(null),N=(0,K.useMemo)(()=>j.length>1?j:S?[S]:$B,[S,j]),T=Ft({dropID:"board",dropType:"column",dropRef:p,onDrop:I});Fi({active:!!S,scrollRef:p,strength:50,deadZoneRatioX:.5,maxBufferX:350});let _=(0,K.useCallback)(e=>{x.current=e.name,u(e),f(!1)},[u]),A=(0,K.useCallback)(()=>{y.current=!0,f(!1)},[]);(0,pk.N)(()=>{y.current&&(y.current=!1,g.current?.focus())});let R=(0,K.useRef)(null),{enableOmnibar:P,disableOmnibar:D}=GC(),{horizontalScrollbarSize:E}=Fo(p),{memex_table_without_limits:M,memex_small_viewport_a11y:B,memex_mwl_refresh_groups:L}=iz(),O=(0,U.jE)(),G=(0,K.useCallback)(e=>{switch(fA(e)){case fN.CTRL_SPACE:R.current?.isInputElement(e.target)?D():P();break;case fN.ESCAPE:R.current?.isInputElement(e.target)&&D()}},[D,P]),V=(0,K.useCallback)(()=>{v.current&&ct(v.current.focus)&&D()},[D,v]),$=(0,K.useCallback)(e=>{if(e.defaultPrevented)return;let t=e.relatedTarget;e.currentTarget.contains(t)||R.current?.isInputElement(t)||(b(ci()),Lq()||w())},[w,b]);(0,K.useEffect)(()=>(window.addEventListener("keydown",G),()=>{window.removeEventListener("keydown",G)}),[G]);let W=(0,K.useCallback)(()=>{for(let[e,t]of a.horizontalGroups.entries())for(let[r,n]of i.entries()){if(!(n&&a.allItemsByVerticalGroup[n.id]?.items.length))continue;let i=t.itemsByVerticalGroup[n.id]?.items[0]?.id;if(i)return cr(e,r,i)}return null},[i,a.allItemsByVerticalGroup,a.horizontalGroups]);(0,K.useImperativeHandle)(t,()=>({focusIn:()=>{let e=W();e?b(e):P({columnId:o2,horizontalGroupIndex:0})}}));let{scrollToItemId:z,onNewItem:H}=$V(),{hasWritePermissions:q}=eK(),Q=(0,K.useCallback)(async()=>{if(r){if(r.dataType===eN.Iteration){let{configuration:e}=r.settings;if(!e)return;let t=MY(e,r.name),a=await m(r,t);if(M&&L){if(!a)return;let e=a0(a);if(!e)return;dc(O,e,e.title)}return}f(!0)}},[r,L,M,O,m]);Lx("is-dragging",!!S);let{hideItemsCount:J,getAggregatesForItems:X,getAggregatesForGroupId:Y}=Sq(),{setShowAddFieldModal:Z,showAddFieldModal:ee}=Fc(),{anchorRef:et}=Fh(),ea=(0,K.useCallback)(e=>0===(a.allItemsByVerticalGroup[e.id]?.items??$B).length&&e.id===o2&&!C&&!l,[a.allItemsByVerticalGroup,l,C]),er=(0,K.useMemo)(()=>358*i.filter(e=>!ea(e)).length,[i,ea]),en=(0,K.useRef)(null);return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(OZ,{groupByFieldId:n,horizontalGroupByFieldId:s?.id,children:(0,F.jsxs)(Gh,{setDraggingItem:k,children:[(0,F.jsxs)(lx.A,{sx:{flexDirection:"column",flex:"auto",overflowY:"hidden",display:"flex",position:"relative"},"data-hpc":!0,children:[(0,F.jsx)(p_,{rootRef:p,children:(0,F.jsxs)(lx.A,{...(0,ey.G)("board-view"),ref:p,onPointerDown:V,onBlur:$,...T.props,sx:a.isHorizontalGrouped?Gq:GU,"data-memex-small-viewport-a11y":B,className:OM.boardView,children:[a.isHorizontalGrouped?(0,F.jsxs)(F.Fragment,{children:[(0,F.jsxs)(lx.A,{sx:GK,children:[(0,F.jsx)(lx.A,{ref:en,sx:GH,children:(0,F.jsx)($y,{groupByFieldOptions:i,itemsGroupedByField:a.allItemsByVerticalGroup,groupByField:r,isLoading:l,scrollToItemId:z,lastNewColumnNameRef:x,headerType:a.horizontalGroups.length>0?"only":void 0,hideColumn:ea,horizontalGroupIndex:0})}),q&&!h&&(0,F.jsx)("div",{children:(0,F.jsx)(OE,{ref:g,onClick:Q})})]}),(0,F.jsxs)(lx.A,{sx:GQ,style:{minWidth:`${er}px`},...(0,ey.G)("swimlanes-container"),children:[a.horizontalGroups.map((e,t)=>{let n=M?e.serverGroupId?Y(e.serverGroupId):[]:X(e.rows);return(0,F.jsx)($E,{horizontalGroup:e,headerRef:en,aggregates:n,hideItemsCount:J,groupByFieldOptions:i,groupByField:r,scrollToItemId:z,lastNewColumnNameRef:x,hideColumn:ea,groupedItems:a,index:t,draggingItems:N,scrollRef:p},e.value)}),M&&!l&&(0,F.jsx)(GY,{})]})]}):(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)($y,{groupByFieldOptions:i,itemsGroupedByField:a.horizontalGroups[0].itemsByVerticalGroup,groupByField:r,isLoading:l,scrollToItemId:z,lastNewColumnNameRef:x,hideColumn:ea,horizontalGroupIndex:0}),q&&!h&&(0,F.jsx)(OE,{ref:g,onClick:Q})]}),h?(0,F.jsx)(Ck,{initialOption:Cn,onSave:_,onCancel:A}):null]})}),q&&(0,F.jsx)($G,{ref:R,horizontalScrollbarSize:E,getPreviousItemId:(e,t)=>{let r=a.horizontalGroups[t]?.itemsByVerticalGroup[e];if(!M)return r?.items.at(-1)?.id},onNewItem:H}),ee&&(0,F.jsx)(Lh,{isOpen:ee,setOpen:Z,anchorRef:et,onSave:eC.l})]}),(0,F.jsx)(kS.Hd,{dropAnimation:null,children:N.map(e=>(0,F.jsx)(VL,{item:e},e.id))})]})}),o&&(0,F.jsx)(OP,{slicerItems:d})]})})),$G=(0,K.memo)((0,K.forwardRef)(function({horizontalScrollbarSize:e,onNewItem:t,getPreviousItemId:a},r){let{groupedItems:n,groupByFieldOptions:i}=OK(),l=(0,K.useRef)(null),s=(0,K.useRef)(null),{state:o,navigationDispatch:d}=u7(),{enableOmnibar:u,disableOmnibar:c}=GC(),m=ct(o.focus),{groupedByColumn:p}=ue(),{getServerGroupIdForVerticalGroupId:h}=Lz(),{memex_table_without_limits:f}=iz(),g=(0,K.useRef)(null);(0,fn.T)(r,g),(0,pk.N)(()=>{m?(window.setTimeout(()=>g.current?.focus()),l.current&&(l.current.scrollTop=0)):g.current?.blur()},[c,m,u,g]);let y=f?(0,K.useMemo)(()=>{if(!ct(o.focus)||!p||!rP(p.dataType))return null;let e=[],t=o.focus.details.verticalGroupId,r=i.find(e=>e.id===t);r?.groupMetadata&&(p.id,eT.Status,e.push({dataType:p.dataType,memexProjectColumnId:p.id,value:{id:r.groupMetadata.id}}));let l=n.horizontalGroups[o.focus.details.horizontalGroupIndex],s=l?.serverGroupId;if(l){let t="sourceObject"in l?l.sourceObject:void 0;if(t){let a=fH(t);a&&e.push(a)}}return{updateColumnActions:e,previousItemId:a(t,o.focus.details.horizontalGroupIndex),groupId:h?h(t):t,secondaryGroupId:s}},[o.focus,p,i,n.horizontalGroups,a,h]):(0,K.useMemo)(()=>{if(!ct(o.focus)||!p||!rP(p.dataType))return null;let e=[],t=o.focus.details.verticalGroupId,r=i.find(e=>e.id===t);r?.groupMetadata&&(p.id,eT.Status,e.push({dataType:p.dataType,memexProjectColumnId:p.id,value:{id:r.groupMetadata.id}}));let l=n.horizontalGroups[o.focus.details.horizontalGroupIndex];if(l){let t="sourceObject"in l?l.sourceObject:void 0;if(t){let a=fH(t);a&&e.push(a)}}return{updateColumnActions:e,previousItemId:a(t,o.focus.details.horizontalGroupIndex)}},[o.focus,p,i,n.horizontalGroups,a]),x=(0,K.useCallback)(e=>{let t=T5(d,e);t.action?T2(e,t.keyAsShortcut):t.keyAsShortcut===fN.ESCAPE&&(d(cn()),T1(e))},[d]),b=(0,K.useMemo)(()=>{if(!ct(o.focus))return;let e=o.focus.details.verticalGroupId,t=i.find(t=>t.id===e),a=n.horizontalGroups[o.focus.details.horizontalGroupIndex];if(!a)return;let r="sourceObject"in a?a.sourceObject:void 0;if(r&&t?.groupMetadata)return{value:t.groupMetadata.id,sourceObject:r}},[o.focus,i,n.horizontalGroups]);return(0,F.jsx)(Oe,{ref:l,horizontalScrollbarSize:e,children:(0,F.jsx)(F7,{ref:s,horizontalScrollbarSize:e,disableBlur:!0,isFixed:!0,sx:{position:"static",bottom:"unset",transition:"opacity 0.2s ease-in-out",display:m?"block":"none",opacity:`${m?"1":"0"}`},children:(0,F.jsx)(F1,{ref:g,newItemAttributes:y??void 0,groupingMetadata:b,onAddItem:t,onKeyDown:x,isFixed:!0,defaultPlaceholder:F_})})})})),$V=()=>{let e=(0,K.useRef)(void 0);return(0,K.useEffect)(()=>{e.current=void 0}),{onNewItem:(0,K.useCallback)(t=>{e.current=t.id},[]),scrollToItemId:e.current}};try{$M.displayName||($M.displayName="Board")}catch{}try{$M.displayName||($M.displayName="Board")}catch{}try{$F.displayName||($F.displayName="InnerBoard")}catch{}try{$F.displayName||($F.displayName="InnerBoard")}catch{}try{$O.displayName||($O.displayName="BoardInner")}catch{}try{$O.displayName||($O.displayName="BoardInner")}catch{}try{$G.displayName||($G.displayName="BoardOmnibar")}catch{}try{$G.displayName||($G.displayName="BoardOmnibar")}catch{}function $$(e){let t=e.flatRows.find(e=>!e.isGrouped),a=e.visibleColumns.find(e=>!kv(e));return a&&t?cI(t.id,a.id):null}let $W=e=>{let{currentView:t,missingRequiredColumnData:a}=iS(),[r,n]=(0,K.useState)(()=>$$(e)??cw());return!function({currentViewNumber:e,setInitialFocalPoint:t,table:a,missingRequiredColumnData:r}){let n=(0,K.useRef)(r),i=(0,K.useRef)(e);(0,K.useEffect)(()=>{if(r)return;let l=n.current&&!r;(i.current!==e||l)&&(l&&document.activeElement?.id===gv||t($$(a)))},[r,e,t,a]),(0,K.useEffect)(()=>{n.current=r,i.current=e})}({currentViewNumber:t?.number,missingRequiredColumnData:a,setInitialFocalPoint:n,table:e}),r};var $z=a(58748);function $H({totalHeight:e,scrollRef:t,table:a}){let{memex_small_viewport_a11y:r}=iz(),[n,i]=(0,K.useState)(!1);return(0,$z.w)(()=>{let n=void 0!==a.groupedRows,l=e+45>(t.current?.clientHeight??0),s=t.current&&"absolute"===getComputedStyle(t.current).position;r&&!s?i(!1):i(!n&&l)}),n}var $U=a(32885);function $q(e,t,a){let r=e.id.toString();return a?[a.id,r].join("."):r}function $K(e,t,a){return[...e].sort((e,r)=>{for(let n=0;n<t.length;n+=1){let i=t[n],l=!1===a[n]||"desc"===a[n],s=i?.(e,r)??0;if(0!==s)return l?-s:s}return e.index-r.index})}let $Q=(e,t)=>{let{memex_table_without_limits:a}=iz();return a?iQ(e,t):$J(t)},$J=e=>{let{hasColumnData:t}=_q();return t(e)},$X=(e,t,a)=>{},$Y=(e,t,a)=>{(0,K.useEffect)(()=>{$X(e,t,a)})},$Z=$Y.bind(null,"CellRenderer"),$0=$Y.bind(null,"CellEditor"),$1=(0,K.forwardRef)(({...e},t)=>(0,F.jsx)(p4.Q,{...e,sx:{border:"none",boxShadow:"none",minWidth:"16px",p:0,ml:"auto",bg:"transparent",":hover":{bg:"transparent",boxShadow:"none"}},"aria-label":"Dropdown button",...(0,ey.G)("dropdown-button"),tabIndex:-1,ref:t,children:(0,F.jsx)(ly.TriangleDownIcon,{size:16,className:"fgColor-muted"})}));$1.displayName="DropdownCaret";let $2={BaseCell:"dropdown-cell-module__BaseCell--n9woI"},$5=(0,K.forwardRef)(({children:e,isDisabled:t,className:a},r)=>(0,F.jsxs)(NO,{disallowSelection:!0,className:(0,vB.$)($2.BaseCell,a),children:[e,t?null:(0,F.jsx)($1,{ref:r})]}));$5.displayName="DropdownCell";var $3=a(4146),$4=a.n($3);function $6(e,{nullWhenRedacted:t=!0}={}){let a=e.displayName||e.name||"withCellRenderer(anonymous)",r=a=>t&&a.model.contentType===eJ.RedactedItem?null:(0,F.jsx)(e,{...a});return $4()(r,e),r.displayName=`withCellRenderer(${a})`,(0,K.memo)(r)}let $8=()=>(0,F.jsxs)(NO,{children:[(0,F.jsx)(GE,{...(0,ey.G)("placeholder")}),(0,F.jsx)(GP,{ml:2,minWidth:30,maxWidth:50})]}),$7=$6(function({currentValue:e,model:t,dropdownRef:a,isDisabled:r}){return($Z("AssigneesRenderer",t.id),AX(e))?(0,F.jsx)($8,{}):AZ(e)?(0,F.jsx)($5,{ref:a,isDisabled:r,children:(0,F.jsx)(w6,{users:e.value,isDisabled:r})}):t.contentType===eJ.DraftIssue?(0,F.jsx)($5,{ref:a,isDisabled:r}):null});$7.displayName="AssigneesRenderer";try{$8.displayName||($8.displayName="LoadingAssigneesCell")}catch{}let $9={width:"small",onMouseDown:e=>{e.stopPropagation()}};function We({model:e,columnId:t,rowIndex:a,renderButton:r,height:n,maxHeight:i,...l}){let{postStats:s}=iN(),{navigationDispatch:o}=cN(),d=c_(),u=(0,K.useRef)(null),c=(0,K.useCallback)(e=>(u.current=e.ref.current,(0,F.jsx)("summary",{...e,onClick:e=>{e.stopPropagation(),e.preventDefault(),e.nativeEvent.detail<=1&&o(u2({focusType:u6.Focus}))},onKeyDown:e.onKeyDown,role:"button",tabIndex:e.tabIndex,style:{height:36,outline:"none",listStyle:"none"},children:r()})),[r,o]);(0,K.useEffect)(()=>{o(u2({focusType:u6.Suspended}))},[e.contentType,o]);let m=(0,K.useCallback)((e,a,r)=>{if(!e)switch(a){case"selection":case"escape":case"click-outside":case"cancel":{let e={focusType:u6.Focus},t=r&&"key"in r&&"Enter"===r.key;return"selection"===a&&t&&(e.y=u8.Next),o(u2(e))}case"convert-confirmation":if(t===eT.Repository)return o(u2({y:u8.Next,focusType:u6.Focus}));return;default:return}},[t,o]),p=(0,K.useCallback)(e=>{e.target instanceof Element&&e.target.closest("summary")===u.current||m(!1,"click-outside")},[m]),h=jc({...l,model:e,initialFilterValue:d,onOpenChange:m,columnId:t,renderAnchor:c});return!function({contentType:e},t){if(e!==eJ.DraftIssue)return!1;let a=ap(t);return!!a&&!oi(a)}(e,t)?(0,F.jsx)(hO.X,{...h,overlayProps:{...$9,height:n,maxHeight:i,sx:{...$9.sx,animationDuration:"80ms"},onClickOutside:p,...(0,ey.G)(TZ(a,t))}}):(0,F.jsx)(Cz,{renderAnchor:c,isOpen:!0,showPrompt:t!==eT.Repository,item:e,onOpenChange:m,onSuccess:()=>s({name:eY,ui:"cell-editor",memexProjectItemId:e.id})})}We.displayName="SelectPanelEditor";let Wt=({currentValue:e,model:t,columnId:a,...r})=>{$0("AssigneesEditor",t.id);let{fetchOptions:n,saveSelected:i}=function({model:e,onSaved:t}){let{updateItem:a}=wH(),{fetchSuggestedAssignees:r}=uG();return{fetchOptions:(0,K.useCallback)(()=>{r(e)},[e,r]),saveSelected:(0,K.useCallback)(async r=>{await a(e,{dataType:eN.Assignees,value:r}),t&&t()},[e,t,a])}}({model:t}),l=(0,K.useMemo)(()=>AZ(e)?e.value:[],[e]),s=(0,K.useCallback)(()=>(0,F.jsx)($7,{currentValue:e,model:t}),[e,t]);return(0,F.jsx)(We,{model:t,placeholderText:"Search people",selected:l,fetchOptions:n,filterOptions:wO,getSortAttribute:wX,convertOptionToItem:wY,saveSelected:i,renderButton:s,columnId:a,groupMetadata:[{groupId:"assigned"},{groupId:"suggestions",header:{title:"Suggestions",variant:"filled"}}],...r})},Wa=(0,K.memo)(Wt);Wa.displayName="AssigneesEditor";try{Wt.displayName||(Wt.displayName="AssigneesEditorFunc")}catch{}let Wr=new ScoringCache,Wn=Wr.sortByWithCache.bind(Wr);function Wi(e,t,a){return wB(e,t,e=>e.name,Wr,Wn,a)}let Wl=()=>{let{findMemexItem:e}=ub(),{setColumnValue:t}=up(),{setSuggestedIssueTypesForItem:a}=uO();return{fetchSuggestedIssueTypes:(0,K.useCallback)(async r=>{a(r.getSuggestionsCacheKey(),void 0);let{response:n,error:i}=await uF(()=>{if(r.memexItemId?.())return kH({memexProjectItemId:r.memexItemId()});if(r.contentType===eJ.Issue)return uD({kind:sf.ISSUE,itemId:r.itemId(),repositoryId:r.ownerId()});throw Error(`Unsupported item type: ${r.contentType}`)}),l=e(r.id);l&&!i&&t(l,{memexProjectColumnId:eT.IssueType,value:n?.suggestions.find(e=>e.selected)});let s=n?.suggestions??i;return a(r.getSuggestionsCacheKey(),s),s},[a,t,e])}},Ws={Box:"use-issue-type-editor-module__Box--LMZjW",Box_1:"use-issue-type-editor-module__Box_1--Aa2Fw",ColorDecorator:"use-issue-type-editor-module__ColorDecorator--jOAds"},Wo=e=>({...e,...(0,ey.G)("table-cell-editor-row"),children:(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)("div",{className:Ws.Box,children:e.name}),(0,F.jsx)("div",{className:Ws.Box_1,children:e.description})]}),description:"",leadingVisual:()=>(0,F.jsx)(h6,{color:e.color||"GRAY",className:Ws.ColorDecorator}),descriptionVariant:"block"}),Wd=e=>e.name,Wu={BaseCell:"date-renderer-module__BaseCell--DnoCJ"},Wc=()=>(0,F.jsx)(NO,{children:(0,F.jsx)(GP,{minWidth:80,maxWidth:100,...(0,ey.G)("placeholder")})}),Wm=$6(function({currentValue:e,model:t,isDisabled:a}){if($Z("DateRenderer",t.id),AX(e))return(0,F.jsx)(Wc,{});if(AY(e))return null;let r=ak(e.value.value);return(0,F.jsx)(NO,{className:Wu.BaseCell,children:(0,F.jsx)(w1,{dangerousHtml:r,isDisabled:a})})});try{Wc.displayName||(Wc.displayName="LoadingDateCell")}catch{}try{Wm.displayName||(Wm.displayName="DateRenderer")}catch{}let Wp={Box:"issue-type-renderer-module__Box--LmlsQ",Token:"issue-type-renderer-module__Token--nmN83"},Wh=()=>(0,F.jsx)(NO,{children:(0,F.jsx)(GP,{minWidth:50,maxWidth:100,...(0,ey.G)("placeholder")})}),Wf=$6(function({currentValue:e,model:t,dropdownRef:a,isDisabled:r}){$Z("IssueTypeRenderer",t.id);let n=AZ(e)?e.value:void 0,i=ra.i4.find(e=>e===n?.color),l=(0,ra.Wk)(i||"GRAY");return AX(e)?(0,F.jsx)(Wh,{}):t.contentType===eJ.DraftIssue?(0,F.jsx)($5,{ref:a,isDisabled:r}):(0,F.jsx)($5,{ref:a,isDisabled:r,children:n&&(0,F.jsx)("div",{className:Wp.Box,children:(0,F.jsx)(bk.A,{sx:{bg:l.bg,color:l.fg,borderColor:l.border},text:n.name,className:Wp.Token})})})});Wf.displayName="IssueTypeRenderer";try{Wh.displayName||(Wh.displayName="LoadingIssueTypeCell")}catch{}let Wg={Box:"label-group-module__Box--AYAjZ"},Wy=({labels:e,dropdownRef:t,isDisabled:a})=>(0,F.jsx)($5,{ref:t,isDisabled:a,children:(0,F.jsx)("div",{className:Wg.Box,children:e?.map(e=>F.jsx(jq,{label:e},e.id))})});try{Wy.displayName||(Wy.displayName="LabelGroup")}catch{}let Wx=()=>(0,F.jsx)(NO,{children:(0,F.jsx)(GD,{minWidth:30,maxWidth:60,...(0,ey.G)("placeholder")})}),Wb=$6(function({currentValue:e,model:t,dropdownRef:a,isDisabled:r}){$Z("LabelsRenderer",t.id);let n=AZ(e)?e.value:void 0;return AX(e)?(0,F.jsx)(Wx,{}):t.contentType===eJ.DraftIssue?(0,F.jsx)($5,{ref:a,isDisabled:r}):(0,F.jsx)(Wy,{labels:n,dropdownRef:a,isDisabled:r})});Wb.displayName="LabelsRenderer";try{Wx.displayName||(Wx.displayName="LoadingLabelsCell")}catch{}let Wv={Link:"link-cell-module__Link--CrAQz"},Ww=(0,K.forwardRef)((e,t)=>{let a=(0,K.useRef)(null);(0,fn.T)(t,a);let r=e.isDisabled?{color:"fg.muted",...e.sx}:e.sx;return(0,F.jsx)(pw.A,{target:"_blank",rel:"noreferrer",tabIndex:-1,...e,sx:r,ref:a,className:Wv.Link})});Ww.displayName="LinkCell";let Wj={Box:"milestone-module__Box--JZ8Wt"},WC=(0,K.memo)(function({milestone:e,isDisabled:t}){return(0,F.jsx)("div",{className:Wj.Box,children:e&&(0,F.jsx)(Ww,{href:e.url,muted:!0,isDisabled:t,children:e.title})})});try{WC.displayName||(WC.displayName="Milestone")}catch{}let WI=()=>(0,F.jsx)(NO,{children:(0,F.jsx)(GP,{minWidth:50,maxWidth:100,...(0,ey.G)("placeholder")})}),WS=$6(function({currentValue:e,model:t,dropdownRef:a,isDisabled:r}){if($Z("MilestoneRenderer",t.id),AX(e))return(0,F.jsx)(WI,{});if(t.contentType===eJ.DraftIssue)return(0,F.jsx)($5,{ref:a,isDisabled:r});let n=AZ(e)?e.value:void 0;return(0,F.jsx)($5,{ref:a,isDisabled:r,children:(0,F.jsx)(WC,{milestone:n,isDisabled:r})})});WS.displayName="MilestoneRenderer";try{WI.displayName||(WI.displayName="LoadingMilestoneCell")}catch{}let Wk={BaseCell:"number-renderer-module__BaseCell--N0F77"},WN=()=>(0,F.jsx)(NO,{className:Wk.BaseCell,children:(0,F.jsx)(GP,{minWidth:20,maxWidth:30,...(0,ey.G)("placeholder")})}),WT=$6(function({currentValue:e,model:t,isDisabled:a}){return($Z("NumberRenderer",t.id),AX(e))?(0,F.jsx)(WN,{}):AY(e)?null:(0,F.jsx)(NO,{className:Wk.BaseCell,children:(0,F.jsx)(w1,{dangerousHtml:e.value,isDisabled:a})})});WT.displayName="NumberRenderer";try{WN.displayName||(WN.displayName="LoadingNumberCell")}catch{}let W_=()=>(0,F.jsx)(NO,{children:(0,F.jsx)(GP,{minWidth:50,maxWidth:100,...(0,ey.G)("placeholder")})}),WA=$6(function({currentValue:e,model:t,dropdownRef:a,isDisabled:r}){if($Z("ParentIssueRenderer",t.id),AX(e))return(0,F.jsx)(W_,{});let n=AZ(e)?e.value:void 0;return(0,F.jsx)($5,{ref:a,isDisabled:r,children:(0,F.jsx)(G7,{parentIssue:n})})});WA.displayName="ParentIssueRenderer";try{W_.displayName||(W_.displayName="LoadingParentIssueCell")}catch{}let WR={Text:"repository-renderer-module__Text--KSiwU"},WP=()=>(0,F.jsx)(NO,{children:(0,F.jsx)(GP,{minWidth:50,maxWidth:120,...(0,ey.G)("placeholder")})}),WD=$6(function({currentValue:e,model:t,dropdownRef:a,isDisabled:r}){if($Z("RepositoryRenderer",t.id),AX(e))return(0,F.jsx)(WP,{});if(AZ(e)){let t=e.value;return(0,F.jsx)(NO,{children:(0,F.jsxs)(Ww,{href:t.url,muted:!0,isDisabled:r,children:[(0,F.jsx)(hV,{repository:t}),(0,F.jsx)("span",{className:WR.Text,children:t.nameWithOwner})]})})}return t.contentType===eJ.DraftIssue?(0,F.jsx)($5,{ref:a,isDisabled:r}):null});WD.displayName="RepositoryRenderer";try{WP.displayName||(WP.displayName="LoadingRepositoryCell")}catch{}let WE={DropdownCell:"single-select-renderer-module__DropdownCell--ZwNvr"},WM=()=>(0,F.jsx)(NO,{children:(0,F.jsx)(GD,{minWidth:40,maxWidth:80,...(0,ey.G)("placeholder")})}),WB=$6(function({currentValue:e,model:t,columnId:a,dropdownRef:r,options:n,isDisabled:i}){if($Z("SingleSelectRenderer",t.id),!ap(a))return null;let l=AZ(e)?e.value.id:null,s=n.find(e=>e.id===l);return AX(e)?(0,F.jsx)(WM,{}):s?(0,F.jsx)($5,{ref:r,isDisabled:i,className:WE.DropdownCell,children:(0,F.jsx)("div",{className:WE.DropdownCell,children:(0,F.jsx)(bN,{option:s})})}):(0,F.jsx)($5,{ref:r,isDisabled:i})});WB.displayName="SingleSelectRenderer";try{WM.displayName||(WM.displayName="LoadingSingleSelectCell")}catch{}let WL=()=>(0,F.jsx)(NO,{children:(0,F.jsx)(GP,{minWidth:80,maxWidth:200,...(0,ey.G)("placeholder")})}),WF=$6(function({currentValue:e,model:t,isDisabled:a}){return($Z("TextRenderer",t.id),AX(e))?(0,F.jsx)(WL,{}):AY(e)?null:(0,F.jsx)(NO,{children:(0,F.jsx)(w1,{dangerousHtml:e.value.html,isDisabled:a})})});WF.displayName="TextRenderer";try{WL.displayName||(WL.displayName="LoadingTextCell")}catch{}let WO={Box:"title-renderer-module__Box--pR5i2",Box_1:"title-renderer-module__Box_1--c_Kxi",Text:"title-renderer-module__Text--xc_OK"},WG=()=>(0,F.jsx)(NO,{children:(0,F.jsx)(GP,{minWidth:80,maxWidth:200,...(0,ey.G)("placeholder")})}),WV=$6(function({currentValue:e,model:t,isDisabled:a}){$Z("TitleRenderer",t.id);let r=aA(AZ(e)?e.value:void 0),{openPane:n}=c9();return(0,F.jsxs)(NO,{children:[(0,F.jsx)("div",{className:WO.Box,children:(0,F.jsx)(A0,{titleColumn:e})}),(0,F.jsx)(A5,{model:t,isDisabled:a,currentValue:e,openPane:n}),ab(r)&&(0,F.jsx)("div",{className:WO.Box_1,children:(0,F.jsxs)("span",{className:WO.Text,children:[" #",r]})})]})},{nullWhenRedacted:!1});WV.displayName="TitleRenderer";try{WG.displayName||(WG.displayName="LoadingTitleCell")}catch{}var W$=a(57616);let WW={BaseCell:"tracks-renderer-module__BaseCell--hxg9p",Octicon:"tracks-renderer-module__Octicon--nSFmb"},Wz=()=>(0,F.jsx)(NO,{children:(0,F.jsx)(GD,{minWidth:30,maxWidth:60,...(0,ey.G)("placeholder")})}),WH=()=>(0,F.jsxs)(NO,{className:WW.BaseCell,children:[(0,F.jsx)(lw.A,{icon:ly.AlertIcon,className:WW.Octicon}),"Failed to load data"]}),WU=$6(function({currentValue:e,model:t}){$Z("TracksRenderer",t.id);let{openPane:a}=c9(),r=(0,K.useRef)(null),n=(0,K.useRef)(null),[i,l]=(0,K.useState)(!1),s=Fk(r,n,i,[e],{xAlign:"center",yAlign:"top"}),o=(0,K.useCallback)(()=>{t.contentType===eJ.Issue&&a(t)},[t,a]),d="found"===e.state&&0===Object.keys(e.value).length;if(AX(e))return(0,F.jsx)(Wz,{});if(AY(e)||t.contentType===eJ.DraftIssue||0===e.value.total)return null;if(d)return(0,F.jsx)(WH,{});let u=t.contentType===eJ.PullRequest?{as:"a",href:t.getUrl(),target:"_blank",rel:"noopener noreferrer"}:{as:"button",onClick:o},c=`${t.id}-tracks-completion-value`;return(0,F.jsxs)(NO,{children:[(0,F.jsx)(W$.Y,{direction:"n",open:i,"aria-label":nH.progressPercentCount(Math.floor(e.value.completed/e.value.total*100)),ref:n,id:c,"aria-live":"polite",portalProps:{onMount:s.adjustPickerPosition}}),(0,F.jsx)(vU,{progress:e.value,"aria-describedby":c,tabIndex:-1,ref:r,onPointerEnter:()=>l(!0),onPointerLeave:()=>l(!1),...u})]})});WU.displayName="TracksRenderer";try{Wz.displayName||(Wz.displayName="LoadingTracksCell")}catch{}try{WH.displayName||(WH.displayName="FailedToLoadDataCell")}catch{}let Wq=({currentValue:e,model:t,...a})=>{$0("IssueTypeEditor",t.id);let{fetchOptions:r,saveSelected:n}=function({model:e,onSaved:t}){let{updateItem:a}=wH(),{fetchSuggestedIssueTypes:r}=Wl();return{fetchOptions:(0,K.useCallback)(()=>{r(e)},[e,r]),saveSelected:(0,K.useCallback)(async r=>{await a(e,{dataType:eN.IssueType,value:r[0]}),t&&t()},[e,t,a])}}({model:t}),i=(0,K.useMemo)(()=>AZ(e)?[e.value]:[],[e]),l=(0,K.useCallback)(()=>(0,F.jsx)(Wf,{currentValue:e,model:t}),[e,t]);return(0,F.jsx)(We,{model:t,placeholderText:"Search types",blankslateText:"No types to show.",selected:i,fetchOptions:r,filterOptions:Wi,getSortAttribute:Wd,convertOptionToItem:Wo,saveSelected:n,renderButton:l,...a,singleSelect:!0,height:"auto",maxHeight:"large"})},WK=(0,K.memo)(Wq);try{Wq.displayName||(Wq.displayName="IssueTypeEditorFunc")}catch{}try{WK.displayName||(WK.displayName="IssueTypeEditor")}catch{}let WQ=({currentValue:e,model:t,...a})=>{let{fetchOptions:r,saveSelected:n}=function({model:e,onSaved:t}){let{updateItem:a}=wH(),{fetchSuggestedLabels:r}=uW();return{fetchOptions:(0,K.useCallback)(()=>{r(e)},[e,r]),saveSelected:(0,K.useCallback)(async r=>{await a(e,{dataType:eN.Labels,value:r}),t&&t()},[e,t,a])}}({model:t});$0("LabelsEditor",t.id);let i=(0,K.useMemo)(()=>(AZ(e)?e.value:[]).map(e=>({...e,selected:!0})),[e]),l=(0,K.useCallback)(()=>(0,F.jsx)(Wb,{currentValue:e,model:t}),[e,t]);return(0,F.jsx)(We,{model:t,placeholderText:"Search labels",selected:i,fetchOptions:r,filterOptions:j$,getSortAttribute:jz,convertOptionToItem:jH,saveSelected:n,renderButton:l,...a})},WJ=(0,K.memo)(WQ);try{WQ.displayName||(WQ.displayName="LabelsEditorFunc")}catch{}try{WJ.displayName||(WJ.displayName="LabelsEditor")}catch{}let WX=({currentValue:e,model:t,...a})=>{$0("MilestoneEditor",t.id);let{fetchOptions:r,saveSelected:n}=function({model:e,onSaved:t}){let{updateItem:a}=wH(),{fetchSuggestedMilestones:r}=uH();return{fetchOptions:(0,K.useCallback)(()=>{r(e)},[e,r]),saveSelected:(0,K.useCallback)(async r=>{await a(e,{dataType:eN.Milestone,value:r[0]}),t&&t()},[e,t,a])}}({model:t}),i=(0,K.useMemo)(()=>AZ(e)?[e.value]:[],[e]),l=(0,K.useCallback)(()=>(0,F.jsx)(WS,{currentValue:e,model:t}),[e,t]);return(0,F.jsx)(We,{model:t,placeholderText:"Search milestones",blankslateText:"No milestones to show.",selected:i,fetchOptions:r,filterOptions:j0,getSortAttribute:j2,convertOptionToItem:j5,groupMetadata:[{groupId:"open",header:{title:"Open",variant:"filled"}},{groupId:"closed",header:{title:"Closed",variant:"filled"}}],saveSelected:n,renderButton:l,...a,singleSelect:!0,height:"auto",maxHeight:"large"})},WY=(0,K.memo)(WX);try{WX.displayName||(WX.displayName="MilestoneEditorFunc")}catch{}try{WY.displayName||(WY.displayName="MilestoneEditor")}catch{}function WZ(e,t){let[a,r]=(0,K.useState)(!1);(0,pk.N)(()=>{!a&&e.current&&(r(!0),t&&t(),e.current.focus())},[a,e,t])}let W0={BorderlessTextInput:"text-cell-editor-module__BorderlessTextInput--vdwqN",Text:"text-cell-editor-module__Text--dNLHd"},W1=({submitValue:e,cleanupFn:t,defaultValue:a})=>{let r=(0,K.useRef)(a),n=(0,K.useCallback)(e=>{r.current=e.target.value},[r]),i=(0,K.useCallback)(()=>{if(null!==r.current){let t=e(r.current.toString());return r.current=null,t}},[r,e]),l=(0,K.useCallback)(()=>{r.current=null},[]);return(0,pk.N)(()=>function(){i(),t&&t()},[]),{onChange:n,protectedSubmitValue:i,cancelSaveOnBlur:l}},W2=({model:e,align:t,columnId:a,defaultValue:r,rowId:n,onUpdate:i,validationFn:l,type:s,emojiPickerDisabled:o=!1})=>{let d=(0,K.useRef)(null),{postStats:u}=iN(),{navigationDispatch:c}=cN();WZ(d);let m=(0,K.useRef)(!0),{setValidationMessage:p,clearValidationMessage:h,validationMessageId:f}=No(n,a),{cancelSaveOnBlur:g,protectedSubmitValue:y,onChange:x}=W1({submitValue:(0,K.useCallback)(t=>{if(u({name:r||"number"==typeof r&&0!==r?ts:to,memexProjectColumnId:a,memexProjectItemId:e.content.id}),!l)return i(t);let n=!1;return m.current&&(n=i(t)),n&&h(),n},[h,a,r,e.content.id,i,u,l]),cleanupFn:h,defaultValue:r}),b=(0,K.useCallback)(e=>{if(x(e),!l){m.current=!0,h();return}let t=l(e.target.value);t?(m.current=!1,p(t,n,a)):(m.current=!0,h())},[x,l,p,n,a,h]),v=(0,K.useCallback)(e=>{switch(fA(e)){case fN.ENTER:y()&&c(u2({y:u8.Next,focusType:u6.Focus})),e.stopPropagation(),e.preventDefault();return;case fN.SHIFT_TAB:y()&&c(u2({x:u8.Previous,focusType:u6.Focus,details:{wrap:!0}})),e.stopPropagation(),e.preventDefault();return;case fN.TAB:y()&&c(u2({x:u8.Next,focusType:u6.Focus,details:{wrap:!0}})),e.stopPropagation(),e.preventDefault();return;case fN.ESCAPE:g(),c(u2({focusType:u6.Focus})),e.stopPropagation(),e.preventDefault();return}},[g,c,y]),w=(0,xJ._)(v),j=(0,F.jsx)(gx,{...w,onChange:b,defaultValue:r,ref:d,"aria-describedby":f,"aria-invalid":!m.current,type:s,sx:{textAlign:"right"===t?"right":"left"},className:W0.BorderlessTextInput});return(0,F.jsx)(NO,{editing:!0,sx:"right"===t?{justifyContent:"flex-end"}:void 0,children:o?(0,F.jsx)("span",{className:W0.Text,children:j}):(0,F.jsx)(br,{fullWidth:!0,children:j})})};try{W2.displayName||(W2.displayName="TextCellEditor")}catch{}let W5=(0,K.memo)(function(e){let{currentValue:t,model:a,columnId:r,rowId:n,replaceContents:i}=e,l=c_(),s=AZ(t)?t.value:null,{updateItem:o}=wH(),d=i||!s?l:s.value,u=(0,K.useCallback)(e=>{let t;let n=s?.value;if(""!==e){let a=ah(e);Number.isNaN(a)?null!=n&&(t={value:n}):t={value:a}}return o(a,{dataType:eN.Number,memexProjectColumnId:r,value:t}),!0},[r,a,s?.value,o]);return(0,F.jsx)(W2,{model:a,columnId:r,rowId:n,defaultValue:d,onUpdate:u,validationFn:j7.Ge,align:"right",emojiPickerDisabled:!0})});W5.displayName="NumberEditor";var W3=a(5051);let W4=e=>{let{databaseId:t,state:a,stateReason:r,title:n,number:i,id:l}=e;if(t)return{id:t,globalRelayId:l,number:i,state:"CLOSED"===a?"closed":"open",stateReason:"string"==typeof r&&["COMPLETED","NOT_PLANNED","REOPENED","DUPLICATE"].includes(r)?r.toLocaleLowerCase():void 0,title:n,titleHtml:"",url:"",repository:"",owner:"",nwoReference:"",subIssueList:{total:0,completed:0,percentCompleted:0},updatedAt:""}},W6=({currentValue:e,model:t})=>{$0("ParentIssueEditor",t.id);let{navigationDispatch:a}=cN(),{saveSelected:r}=function({model:e,onSaved:t}){let{updateItem:a}=wH(),r=Nr(),n=(0,K.useCallback)(e=>am(e)?r({title:nH.cannotEditTitle,content:nH.cannotEditItemContent,confirmButtonContent:nH.confirmDialog}):ac(e)?r({title:"Parent issue can't be updated",content:e.message}):void 0,[r]);return{saveSelected:(0,K.useCallback)(async r=>{try{await a(e,{dataType:eN.ParentIssue,value:r})}catch(e){n(e)}t?.()},[n,e,t,a])}}({model:t}),[n,i]=(0,K.useState)("Issue");(0,K.useEffect)(()=>{a(u2({focusType:u6.Suspended}))},[t.contentType,a]);let l=(0,K.useCallback)(async e=>{if(e[0]){let t=W4(e[0]);await r(t)}else await r(void 0)},[r]),s=(0,K.useCallback)(e=>{i(e),e||a(u2({focusType:u6.Focus}))},[i,a]),o=(0,K.useCallback)(()=>(0,F.jsx)(WA,{currentValue:e,model:t}),[e,t]),d=t.getNameWithOwner()?.join("/"),u=t.getOwner();if(!d||!u)return null;let c=AZ(e)?[e.value.globalRelayId]:[],m=t.content.globalRelayId?[t.content.globalRelayId]:[];return(0,F.jsx)(W3.D,{onPickerTypeChange:s,onIssueSelection:l,selectedIssueIds:c,hiddenIssueIds:m,defaultRepositoryNameWithOwner:d,organization:u,pickerType:n,anchorElement:e=>(0,F.jsx)("summary",{style:{height:36,outline:"none",listStyle:"none"},role:"button",...e,children:o()})})},W8=(0,K.memo)(W6);try{W6.displayName||(W6.displayName="ParentIssueEditorFunc")}catch{}try{W8.displayName||(W8.displayName="ParentIssueEditor")}catch{}let W7=(0,K.memo)(function(e){let{currentValue:t,model:a,rowId:r,columnId:n}=e,i=c_(),l=AZ(t)?t.value.raw:"",{updateItem:s}=wH(),o=e.replaceContents||!l?i:l,d=(0,K.useCallback)(e=>(s(a,{dataType:eN.Text,memexProjectColumnId:n,value:x0(e)}),!0),[n,a,s]);return(0,F.jsx)(W2,{model:a,columnId:n,rowId:r,defaultValue:o,onUpdate:d,validationFn:j7.UI})});W7.displayName="TextEditor";let W9={Box:"title-editor-module__Box--lh6pe",Octicon:"title-editor-module__Octicon--gy9Ve",BorderlessTextInput:"title-editor-module__BorderlessTextInput--g0Z2Q",BorderlessTextInput_1:"title-editor-module__BorderlessTextInput_1--hnzWM"},ze=(0,K.memo)(function(e){let{model:t,currentValue:a}=e,r=t.columns,{navigationDispatch:n}=cN(),i=c_(),l=(0,K.useRef)(null),s=(0,K.useRef)(!0),{updateItem:o}=wH(),{postStats:d}=iN(),{setColumnValue:u}=up();WZ(l);let{addToast:c}=lV(),m=e.replaceContents?i:AZ(a)?aT(a.value):"",{perform:p}=uN({request:(0,K.useCallback)(async e=>{if(l.current){let a=x0(l.current.value);await o(t,{dataType:eN.Title,value:{...e,title:{raw:a,html:a}}})}},[t,o]),rollback:(0,K.useCallback)(async e=>{u(t,{memexProjectColumnId:eT.Title,value:e})},[t,u])}),{cancelSaveOnBlur:h,protectedSubmitValue:f,onChange:g}=W1({submitValue:(0,K.useCallback)(e=>{let a=r.Title;return!!a&&a.contentType!==eJ.RedactedItem&&(""===e?c({message:nH.titleCannotBeBlank,type:nF.warning}):(p(a.value,a.value),d({name:e9,ui:"title field",memexProjectItemId:t.content.id})),!0)},[c,r,t.content.id,p,d]),defaultValue:m}),y=(0,K.useCallback)(e=>{switch(fA(e)){case fN.ENTER:f()&&n(u2({y:u8.Next,focusType:u6.Focus})),e.stopPropagation(),e.preventDefault();return;case fN.SHIFT_TAB:f()&&n(u2({x:u8.Previous,focusType:u6.Focus,details:{wrap:!0}})),e.stopPropagation(),e.preventDefault();return;case fN.TAB:f()&&n(u2({x:u8.Next,focusType:u6.Focus,details:{wrap:!0}})),e.stopPropagation(),e.preventDefault();return;case fN.ESCAPE:h(),n(u2({focusType:u6.Focus})),e.stopPropagation(),e.preventDefault();return}},[n,h,f]),x={onChange:(0,K.useCallback)(e=>{g(e),s.current=!0},[g]),...(0,xJ._)(y)},b=r.Title;if(!b)return null;switch(b.contentType){case eJ.DraftIssue:return(0,F.jsxs)(NO,{editing:!0,children:[(0,F.jsx)("div",{className:W9.Box,children:(0,F.jsx)(lw.A,{icon:ly.IssueDraftIcon,"aria-label":"Draft issue",className:W9.Octicon})}),(0,F.jsx)(br,{fullWidth:!0,children:(0,F.jsx)(gx,{...x,defaultValue:m,ref:l,className:W9.BorderlessTextInput})})]});case eJ.Issue:case eJ.PullRequest:return(0,F.jsxs)(NO,{editing:!0,children:[(0,F.jsx)("div",{className:W9.Box,children:(0,F.jsx)(pK,{title:b})}),(0,F.jsx)(br,{fullWidth:!0,children:(0,F.jsx)(gx,{...x,defaultValue:m,ref:l,className:W9.BorderlessTextInput_1})})]});default:return null}});ze.displayName="TitleEditor";let zt=e=>e?{value:new Date((0,bb.x)(e,{representation:"date"}))}:void 0,za=(0,K.memo)(function(e){let{model:t,rowIndex:a,columnId:r,currentValue:n}=e,{updateItem:i}=wH(),{postStats:l}=iN(),[s,o]=(0,K.useState)(!0),{navigationDispatch:d}=cN(),u=!e.replaceContents&&AZ(n)?n.value:null,c=(0,K.useCallback)(e=>{(o(!1),"submit-key-press"===e)?d(u2({y:u8.Next,focusType:u6.Focus})):d(u2({focusType:u6.Focus}))},[d]),m=(0,K.useCallback)(async e=>{await i(t,{dataType:eN.Date,memexProjectColumnId:r,value:zt(e)}),l({name:u?ts:to,memexProjectColumnId:r,memexProjectItemId:t.id})},[r,u,t,l,i]),p=(0,K.useRef)(null),h=(0,K.useCallback)(e=>(p.current=e.ref.current,(0,F.jsx)("summary",{...e,...(0,ey.G)("table-cell-date-editor"),onClick:e=>{e.stopPropagation(),e.preventDefault(),e.nativeEvent.detail<=1&&c()},onKeyDown:e.onKeyDown,role:"button",tabIndex:e.tabIndex,style:{height:36,outline:"none",listStyle:"none"},children:(0,F.jsx)(Wm,{currentValue:n,model:t})})),[c,n,t]),f=(0,K.useCallback)(e=>{if(e.target instanceof Element&&e.target.closest("summary")===p.current)return},[]);return(0,F.jsx)(by.DatePicker,{open:s,onChange:m,onClose:c,value:u?new Date(ak(u.value)):null,showTodayButton:!1,showClearButton:!0,anchoredOverlayProps:{overlayProps:{onEscape:()=>c(),onClickOutside:f,onMouseDown:e=>{e.preventDefault()},...(0,ey.G)(TZ(a,r.toString()))},focusTrapSettings:{restoreFocusOnCleanUp:!1}},anchor:h})});za.displayName="DateEditor";let zr={Box:"iteration-renderer-module__Box--UAdz1",Label:"iteration-renderer-module__Label--IBs87"},zn=()=>(0,F.jsx)(NO,{children:(0,F.jsx)(GD,{minWidth:40,maxWidth:80,...(0,ey.G)("placeholder")})}),zi=$6(function({currentValue:e,model:t,dropdownRef:a,columnId:r,isDisabled:n}){return($Z("IterationRenderer",t.id),ap(r))?AX(e)?(0,F.jsx)(zn,{}):AY(e)?(0,F.jsx)($5,{ref:a,isDisabled:n}):(0,F.jsx)($5,{ref:a,isDisabled:n,children:(0,F.jsx)("div",{className:zr.Box,children:(0,F.jsx)(bD.A,{className:zr.Label,children:(0,F.jsx)(p$,{children:e.value.titleHtml})})})}):null});zi.displayName="IterationRenderer";try{zn.displayName||(zn.displayName="LoadingIterationCell")}catch{}let zl=({currentValue:e,model:t,columnModel:a,...r})=>{let{activeOptions:n,completedOptions:i,selected:l,saveSelected:s,filterChange:o}=jM({model:t,iteration:AZ(e)?e.value:null,columnModel:a}),d=(0,K.useCallback)(()=>(0,F.jsx)(zi,{currentValue:e,model:t,columnId:r.columnId}),[e,t,r.columnId]);return(0,F.jsx)(We,{model:t,fetchOptions:eC.l,placeholderText:"Filter options",selected:l,options:[...n,...i.slice(0,3)],filterOptions:o,getSortAttribute:jD,convertOptionToItem:jP,saveSelected:s,renderButton:d,getOptionMatchingFilterValue:jE,groupMetadata:[{groupId:"active"},{groupId:"completed",header:{title:"Completed",variant:"filled"}}],...r,singleSelect:!0,height:"auto",maxHeight:"large"})},zs=(0,K.memo)(zl);try{zl.displayName||(zl.displayName="IterationEditorFunc")}catch{}try{zs.displayName||(zs.displayName="IterationEditor")}catch{}let zo=({model:e,...t})=>(0,F.jsx)(We,{model:e,fetchOptions:eC.l,placeholderText:"",selected:[],filterOptions:eC.l,getSortAttribute:eC.l,convertOptionToItem:eC.l,saveSelected:eC.l,renderButton:eC.l,...t}),zd=(0,K.memo)(zo);try{zo.displayName||(zo.displayName="RepositoryEditorFunc")}catch{}try{zd.displayName||(zd.displayName="RepositoryEditor")}catch{}let zu={Text:"single-select-editor-module__Text--hyUn7"},zc=(0,K.memo)(({model:e,columnModel:t,currentValue:a,...r})=>{let{navigationDispatch:n}=cN(),{addColumnOption:i}=Cx(),{findColumn:l}=y$(),{projectLimits:{singleSelectColumnOptionsLimit:s}}=eU(),{saveSelected:o,options:d,selected:u}=Cm({columnModel:t,model:e,selectedValueId:AZ(a)?a.value.id:null}),c=(0,K.useCallback)(()=>(0,F.jsx)(WB,{currentValue:a,model:e,columnId:r.columnId,options:t.settings.options}),[a,e,r.columnId,t]),m=eq(d),[p,h]=(0,K.useState)(null),f=(0,K.useCallback)(async e=>{h(null),await i(t,e);let a=l(t.id),r=o0(a)?a.settings.options.find(({name:t})=>t===e.name):void 0;r&&o([{...r,selected:!0}]),n(u2({focusType:u6.Focus}))},[i,t,l,o,n]),g=(0,K.useCallback)(e=>{let t=x0(e);return m?{...(0,ey.G)("table-cell-editor-max-options-length-row"),text:nH.singleSelectOptionLimitWarning(s),disabled:!0}:{description:"Create new option",descriptionVariant:"block",leadingVisual:ly.PlusIcon,children:(0,F.jsx)("span",{className:zu.Text,children:(0,F.jsx)("strong",{children:t})}),onAction:async(e,a)=>{a.preventDefault(),h({...Cn,name:t})},...(0,ey.G)("add-column-option")}},[m,s]),y=d.every(e=>"GRAY"===e.color),x=(0,K.useCallback)(e=>Cc(e,!y),[y]);return p?(0,F.jsx)(Ck,{initialOption:p,onSave:f,onCancel:()=>h(null)}):(0,F.jsx)(We,{model:e,fetchOptions:eC.l,placeholderText:"Filter options",selected:u,options:d,filterOptions:Cs,getSortAttribute:Cu,convertOptionToItem:x,saveSelected:o,renderButton:c,renderCreateNewOption:g,getOptionMatchingFilterValue:Co,singleSelect:!0,height:"initial",maxHeight:"large",...r})});zc.displayName="SingleSelectEditor";let zm=(0,K.memo)(zc);try{zm.displayName||(zm.displayName="SingleSelectEditor")}catch{}let zp={BaseCell:"linked-pull-requests-group-module__BaseCell--lRNhD"},zh=({linkedPullRequests:e})=>(0,F.jsx)(NO,{className:zp.BaseCell,children:e?.map(e=>F.jsx(wR,{linkedPullRequest:e,tabIndex:-1},e.id))});try{zh.displayName||(zh.displayName="LinkedPullRequestGroup")}catch{}let zf=()=>(0,F.jsx)(NO,{children:(0,F.jsx)(GD,{minWidth:30,maxWidth:60,...(0,ey.G)("placeholder")})}),zg=$6(function({currentValue:e,model:t}){return($Z("LinkedPullRequestsRenderer",t.id),AX(e))?(0,F.jsx)(zf,{}):t.contentType===eJ.DraftIssue||AY(e)?null:(0,F.jsx)(zh,{linkedPullRequests:e.value})});zg.displayName="LinkedPullRequestsRenderer";try{zf.displayName||(zf.displayName="LoadingLinkedPullRequestsCell")}catch{}let zy=()=>(0,F.jsx)(NO,{children:(0,F.jsx)(GD,{minWidth:30,maxWidth:60,...(0,ey.G)("placeholder")})}),zx=$6(function({currentValue:e,model:t}){return($Z("ReviewersRenderer",t.id),AX(e))?(0,F.jsx)(zy,{}):t.contentType===eJ.DraftIssue||AY(e)?null:(0,F.jsx)(NO,{children:(0,F.jsx)(w6,{users:e.value})})});zx.displayName="ReviewersRenderer";try{zy.displayName||(zy.displayName="LoadingReviewersCell")}catch{}var zb=a(78555),zv=a(66401);let zw={BaseCell:"sub-issues-progress-renderer-module__BaseCell--IKedv",ButtonBase:"sub-issues-progress-renderer-module__ButtonBase--tyRvx"},zj=()=>(0,F.jsx)(NO,{children:(0,F.jsx)(GP,{minWidth:50,maxWidth:100,...(0,ey.G)("placeholder")})}),zC=$6(function({currentValue:e,model:t}){$Z("SubIssuesProgressRenderer",t.id);let a="found"===e.state&&0===Object.keys(e.value).length,r=G8("parent-issue",t.getNameWithOwnerReference());if(AX(e))return(0,F.jsx)(zj,{});if((0,zv.A)(e))return null;if(a)return(0,F.jsx)(WH,{});if(t.contentType===eJ.DraftIssue)return null;let n=AZ(e)?e.value:void 0;if(!n||0===n.total)return null;let i=`Sub-issues progress: ${n.completed} of ${n.total} (${n.percentCompleted}%)`,l=`${i}. Show sub-issues for: ${t.getRawTitle()}`;return(0,F.jsx)(NO,{className:zw.BaseCell,children:(0,F.jsx)(zb.u,{variant:"invisible","aria-label":l,onClick:r,className:zw.ButtonBase,children:(0,F.jsx)(Op,{completed:n.completed,consistentContentSizing:!0,name:"Sub-issues progress",percentCompleted:n.percentCompleted,total:n.total})})})});zC.displayName="SubIssuesProgressRenderer";try{zj.displayName||(zj.displayName="LoadingSubIssuesProgressCell")}catch{}let zI=()=>(0,F.jsx)(NO,{children:(0,F.jsx)(GD,{minWidth:30,maxWidth:60,...(0,ey.G)("placeholder")})}),zS=$6(({currentValue:e,model:t,projectOwner:a})=>{$Z("TrackedByRenderer",t.id);let r=AZ(e)?e.value:void 0;return r?(0,F.jsx)(NO,{children:r.map(e=>(0,F.jsx)(Va,{trackedBy:e,issueId:t.content.id,projectOwner:a,noPrefix:!0},e.key.itemId))}):null});zS.displayName="TrackedByRenderer";try{zI.displayName||(zI.displayName="LoadingTrackedByCell")}catch{}let zk={title:{typeToEditEnabled:!1,Placeholder:(0,F.jsx)(WG,{}),Cell(e){let t=eT.Title,a=e.row.original.columns[t],r=$Q(e.row.original,t),n=(0,K.useMemo)(()=>r?a?AK(a):AJ:AQ,[a,r]);return(0,F.jsx)(WV,{currentValue:n,model:e.row.original,isDisabled:e.isDisabled})},CellEditor(e){let t=e.row.original,{replaceContents:a}=e,r=eT.Title,n=e.row.original.columns[r],i=$Q(e.row.original,r),l=(0,K.useMemo)(()=>i?n?AK(n):AJ:AQ,[n,i]);return(0,F.jsx)(ze,{model:t,replaceContents:a,currentValue:l})}},text:{Placeholder:(0,F.jsx)(WL,{}),Cell(e){let t=e.column.columnModel?.id||-1,a=e.row.original.columns[t],r=$Q(e.row.original,t),n=(0,K.useMemo)(()=>{if(!r)return AQ;let e=ag(a);return e?AK(e):AJ},[a,r]);return(0,F.jsx)(WF,{currentValue:n,model:e.row.original,isDisabled:e.isDisabled})},CellEditor(e){let t=e.row.original;if(!e.column.columnModel||!e.column.columnModel.userDefined)throw Error(`${nH.textEditor} ${nH.requiresCustomColumn}`);let{replaceContents:a}=e,r=e.column.columnModel.id,n=e.row.original.columns[r],i=$Q(e.row.original,r),l=(0,K.useMemo)(()=>{if(!i)return AQ;let e=ag(n);return e?AK(e):AJ},[n,i]);return(0,F.jsx)(W7,{currentValue:l,model:t,replaceContents:a,columnId:r,rowId:e.row.id})}},number:{Placeholder:(0,F.jsx)(WN,{}),Cell(e){let t=e.column.columnModel?.id||-1,a=e.row.original.columns[t],r=$Q(e.row.original,t),n=(0,K.useMemo)(()=>{if(!r)return AQ;let e=ay(a);return e?AK(e.value.toString()):AJ},[a,r]);return(0,F.jsx)(WT,{currentValue:n,model:e.row.original,isDisabled:e.isDisabled})},CellEditor(e){let t=e.row.original,{replaceContents:a}=e;if(!e.column.columnModel||!e.column.columnModel.userDefined)throw Error(`${nH.numberEditor} ${nH.requiresCustomColumn}`);let r=e.column.columnModel.id,n=e.row.original.columns[r],i=$Q(e.row.original,r),l=(0,K.useMemo)(()=>{if(!i)return AQ;let e=ay(n);return e?AK(e):AJ},[n,i]);return(0,F.jsx)(W5,{currentValue:l,model:t,replaceContents:a,rowId:e.row.id,columnId:r})}},singleSelect:{Placeholder:(0,F.jsx)(WM,{}),Cell(e){let t=e.column.columnModel?.id||-1,a=e.row.original.columns[t],r=$Q(e.row.original,t),n=(0,K.useMemo)(()=>{if(!r)return AQ;let e=ax(a);return e?AK(e):AJ},[a,r]);if(e.column.columnModel?.dataType!==eN.SingleSelect)throw Error(nH.singleSelectCustomModelError);return(0,F.jsx)(WB,{currentValue:n,model:e.row.original,options:e.column.columnModel.settings.options,columnId:e.column.id,dropdownRef:e.dropdownRef,isDisabled:e.isDisabled})},CellEditor(e){let t=e.row.original,a=e.column.columnModel?.id||-1,r=e.row.original.columns[a],n=$Q(e.row.original,a),i=(0,K.useMemo)(()=>{if(!n)return AQ;let e=ax(r);return e?AK(e):AJ},[r,n]);if(t.contentType===eJ.RedactedItem)return null;if(e.column.columnModel?.dataType!==eN.SingleSelect)throw Error(nH.singleSelectCustomModelError);return(0,F.jsx)(zm,{currentValue:i,model:t,rowIndex:e.row.index,columnModel:e.column.columnModel,columnId:e.column.id})}},date:{Placeholder:(0,F.jsx)(Wc,{}),Cell(e){let t=e.column.columnModel?.id||-1,a=e.row.original.columns[t],r=$Q(e.row.original,t),n=(0,K.useMemo)(()=>{if(!r)return AQ;let e=aw(a);return e?AK(e):AJ},[a,r]);return(0,F.jsx)(Wm,{currentValue:n,model:e.row.original,isDisabled:e.isDisabled})},CellEditor(e){let t=e.row.original,{replaceContents:a}=e;if(!e.column.columnModel||!e.column.columnModel.userDefined)throw Error(`${nH.dateEditor} ${nH.requiresCustomColumn}`);let r=e.column.columnModel.id,n=e.row.original.columns[r],i=$Q(e.row.original,r),l=(0,K.useMemo)(()=>{if(!i)return AQ;let e=aw(n);return e?AK(e):AJ},[n,i]);return(0,F.jsx)(za,{currentValue:l,model:t,replaceContents:a,rowIndex:e.row.index,columnId:e.column.columnModel.id})}},assignees:{Placeholder:(0,F.jsx)($8,{}),Cell(e){let t=eT.Assignees,a=$Q(e.row.original,t),r=e.row.original.columns[t],n=(0,K.useMemo)(()=>a?r?AK(r.map(w3)):AJ:AQ,[r,a]);return(0,F.jsx)($7,{currentValue:n,model:e.row.original,dropdownRef:e.dropdownRef,isDisabled:e.isDisabled})},CellEditor(e){let t=e.row.original,a=eT.Assignees,r=$Q(e.row.original,a),n=e.row.original.columns[a],i=(0,K.useMemo)(()=>r?n?AK(n.map(w3)):AJ:AQ,[n,r]);return t.contentType===eJ.RedactedItem?null:(0,F.jsx)(Wa,{currentValue:i,model:t,rowIndex:e.row.index,columnId:e.column.id})}},iteration:{Placeholder:(0,F.jsx)(zn,{}),Cell(e){let t=e.column.columnModel?.id||-1,a=e.row.original.columns[t],r=$Q(e.row.original,t),n=(0,K.useMemo)(()=>{if(!r)return AQ;let t=ax(a);if(!t)return AJ;let n=(oZ(e.column.columnModel)?aK(e.column.columnModel):[]).find(e=>e.id===t.id);return n?AK(n):AJ},[a,r,e.column.columnModel]);return(0,F.jsx)(zi,{currentValue:n,model:e.row.original,columnId:e.column.id,dropdownRef:e.dropdownRef,isDisabled:e.isDisabled})},CellEditor(e){let t=e.row.original,a=e.column.columnModel?.id||-1,r=e.row.original.columns[a],n=$Q(e.row.original,a),i=(0,K.useMemo)(()=>{if(!n)return AQ;let t=ax(r);if(!t)return AJ;let a=(oZ(e.column.columnModel)?aK(e.column.columnModel):[]).find(e=>e.id===t.id);return a?AK(a):AJ},[r,n,e.column.columnModel]);if(t.contentType===eJ.RedactedItem)return null;if(e.column.columnModel?.dataType!==eN.Iteration)throw Error(nH.iterationCustomModelError);return(0,F.jsx)(zs,{currentValue:i,model:t,rowIndex:e.row.index,columnModel:e.column.columnModel,columnId:e.column.id})}},milestone:{Placeholder:(0,F.jsx)(WI,{}),Cell(e){let t=eT.Milestone,a=e.row.original.columns[t],r=$Q(e.row.original,t),n=(0,K.useMemo)(()=>r?a?AK(a):AJ:AQ,[a,r]);return(0,F.jsx)(WS,{currentValue:n,model:e.row.original,dropdownRef:e.dropdownRef,isDisabled:e.isDisabled})},CellEditor(e){let t=e.row.original,a=eT.Milestone,r=e.row.original.columns[a],n=$Q(e.row.original,a),i=(0,K.useMemo)(()=>n?r?AK(r):AJ:AQ,[r,n]);return t.contentType===eJ.RedactedItem?null:(0,F.jsx)(WY,{currentValue:i,model:t,rowIndex:e.row.index,columnId:e.column.id})}},labels:{Placeholder:(0,F.jsx)(Wx,{}),Cell(e){let t=eT.Labels,a=$Q(e.row.original,t),r=e.row.original.columns[t],n=(0,K.useMemo)(()=>a?r?AK(r):AJ:AQ,[r,a]);return(0,F.jsx)(Wb,{currentValue:n,model:e.row.original,dropdownRef:e.dropdownRef,isDisabled:e.isDisabled})},CellEditor(e){let t=e.row.original,a=eT.Labels,r=$Q(e.row.original,a),n=e.row.original.columns[a],i=(0,K.useMemo)(()=>r?n?AK(n):AJ:AQ,[n,r]);return t.contentType===eJ.RedactedItem?null:(0,F.jsx)(WJ,{currentValue:i,model:t,rowIndex:e.row.index,columnId:e.column.id})}},repository:{Placeholder:(0,F.jsx)(WP,{}),Cell(e){let t=eT.Repository,a=$Q(e.row.original,t),r=e.row.original.columns[t],n=(0,K.useMemo)(()=>a?r?AK(r):AJ:AQ,[r,a]);return(0,F.jsx)(WD,{currentValue:n,dropdownRef:e.dropdownRef,model:e.row.original,isDisabled:e.isDisabled})},CellEditor(e){let t=e.row.original;return t.contentType===eJ.DraftIssue?(0,F.jsx)(zd,{model:t,rowIndex:e.row.index,columnId:e.column.id}):null}},linkedPullRequests:{Placeholder:(0,F.jsx)(zf,{}),Cell(e){let t=eT.LinkedPullRequests,a=$Q(e.row.original,t),r=e.row.original.columns[t],n=(0,K.useMemo)(()=>a?r?AK(r):AJ:AQ,[r,a]);return(0,F.jsx)(zg,{model:e.row.original,currentValue:n})},CellEditor:()=>null},reviewers:{Placeholder:(0,F.jsx)(zy,{}),Cell(e){let t=eT.Reviewers,a=$Q(e.row.original,t),r=e.row.original.columns[t],n=(0,K.useMemo)(()=>a?r?AK(r.map(w5)):AJ:AQ,[r,a]);return(0,F.jsx)(zx,{model:e.row.original,currentValue:n})},CellEditor:()=>null},tracks:{Placeholder:(0,F.jsx)(Wz,{}),Cell(e){let t=eT.Tracks,a=$Q(e.row.original,t),r=e.row.original.columns[t],n=(0,K.useMemo)(()=>a?r?AK(r):AJ:AQ,[r,a]);return(0,F.jsx)(WU,{model:e.row.original,currentValue:n})},CellEditor:()=>null},trackedBy:{Placeholder:(0,F.jsx)(zI,{}),Cell(e){let t=eT.TrackedBy,a=$Q(e.row.original,t),r=e.row.original.columns[t],{projectOwner:n}=eU(),i=(0,K.useMemo)(()=>a?r?AK(r):AJ:AQ,[r,a]);return(0,F.jsx)(zS,{model:e.row.original,currentValue:i,projectOwner:n})},CellEditor:()=>null},issueType:{Placeholder:(0,F.jsx)(Wh,{}),Cell(e){let t=eT.IssueType,a=$Q(e.row.original,t),r=e.row.original.columns[t],n=(0,K.useMemo)(()=>a?r?AK(r):AJ:AQ,[r,a]);return(0,F.jsx)(Wf,{model:e.row.original,currentValue:n,dropdownRef:e.dropdownRef,isDisabled:e.isDisabled})},CellEditor(e){let t=e.row.original,a=eT.IssueType,r=$Q(e.row.original,a),n=e.row.original.columns[a],i=(0,K.useMemo)(()=>r?n?AK(n):AJ:AQ,[n,r]);return t.contentType===eJ.DraftIssue||t.contentType===eJ.Issue?(0,F.jsx)(WK,{currentValue:i,model:t,rowIndex:e.row.index,columnId:e.column.id}):null}},parentIssue:{Placeholder:(0,F.jsx)(W_,{}),Cell(e){let t=eT.ParentIssue,a=$Q(e.row.original,t),r=e.row.original.columns[t],n=(0,K.useMemo)(()=>a?r?AK(r):AJ:AQ,[r,a]);return(0,F.jsx)(WA,{model:e.row.original,currentValue:n,dropdownRef:e.dropdownRef,isDisabled:e.isDisabled})},CellEditor(e){let t=e.row.original,a=eT.ParentIssue,r=$Q(e.row.original,a),n=e.row.original.columns[a],i=(0,K.useMemo)(()=>r?n?AK(n):AJ:AQ,[n,r]);return t.contentType!==eJ.Issue?null:(0,F.jsx)(W8,{currentValue:i,model:t,rowIndex:e.row.index,columnId:e.column.id})}},subIssuesProgress:{Placeholder:(0,F.jsx)(zj,{}),Cell(e){let t=eT.SubIssuesProgress,a=$Q(e.row.original,t),r=e.row.original.columns[t],n=(0,K.useMemo)(()=>a?r?AK(r):AJ:AQ,[r,a]);return(0,F.jsx)(zC,{model:e.row.original,currentValue:n})},CellEditor:()=>null}},zN=Oa(e=>e.original.columns,{useDistinctAssigneesGrouping:!1}),zT=Oa(e=>e.original.columns,{useDistinctAssigneesGrouping:!0});function z_(e){return Object.keys(zk).reduce((t,a)=>(t[a]={...t[a],groupingConfiguration:e[a]},t),{...zk})}let zA=z_(zN),zR=z_(zT),zP=(0,K.createContext)(null),zD=(0,K.memo)(function({isFieldVisible:e,children:t}){let{allColumns:a}=i5(),{memex_group_by_multi_value_changes:r}=iz(),{getWidth:n}=__(),i=(0,K.useMemo)(()=>a.map(e=>(function(e,t={memex_group_by_multi_value_changes:!1},a){let r=function(e,{useDistinctAssigneesGrouping:t}){return t?zR[e.dataType]:zA[e.dataType]}(e,{useDistinctAssigneesGrouping:t.memex_group_by_multi_value_changes});return function(e,t,a){let{groupingConfiguration:r,...n}=t,i=kV(e),l=r?{canGroupBy:L$(e),getGroupedRows:NT(e,r),getGroupValue:N_(e,r)}:{canGroupBy:!1};return{canSort:!0,sortType:(e,t,a,r)=>e.isGrouped&&t.isGrouped?0:i(e.original,t.original,r,!0),Header:e.name,id:e.id.toString(),minWidth:75,width:a,columnModel:e,...l,...n}}(e,r,a)})(e,{memex_group_by_multi_value_changes:r},n(e.id))),[a,r,n]),l=(0,K.useMemo)(()=>a.filter(t=>!e(t)).map(e=>`${e.id}`),[a,e]),s=(0,K.useMemo)(()=>({columnDefinitions:i,hiddenColumns:l}),[i,l]);return(0,F.jsx)(zP.Provider,{value:s,children:t})});try{zP.displayName||(zP.displayName="TableColumnsContext")}catch{}try{zD.displayName||(zD.displayName="TableColumnsProvider")}catch{}let zE=()=>{let e=(0,K.useContext)(zP);if(null===e)throw Error("useTableColumns must be accessed from within a TableColumnsContext.Provider");return e},zM={SET_DRAGGING_COLUMN:"useColumnReordering.SET_DRAGGING_COLUMN",SET_DRAG_TARGET:"useColumnReordering.SET_DRAG_TARGET",RESET:"useColumnReordering.RESET"};function zB(){return{type:zM.RESET}}function zL(e){let{visibleFields:t}=TI(),a=(0,K.useMemo)(()=>t.map(e=>e.id.toString()),[t]);e.useOptions.push(e=>({...e,initialState:{...e.initialState,columnOrder:a}})),e.getHeaderProps.push(zF),e.stateReducers.push(zO)}function zF(e,t){let{hasWritePermissions:a}=eK(),r=!a||!1===t.column.canReorder,n={column:t.column,columnOrder:t.instance.state.columnOrder,overColumn:t.instance.state.overColumn},i=(0,kS.gl)({disabled:r,id:t.column.id,data:n});return Lx("is-dragging",i.isDragging),[e,{dragProps:i}]}function zO(e,t){if(!zV.includes(t.type))return e;switch(t.type){case zM.RESET:{let t={...e,draggingColumnId:null,overColumn:null};if(rn(e,t))return e;return t}case zM.SET_DRAGGING_COLUMN:{let a={...e,draggingColumnId:t.columnId};if(rn(e,a))return e;return a}case zM.SET_DRAG_TARGET:{let a={...e,overColumn:t.overColumn};if(rn(e.overColumn??{},a.overColumn??{}))return e;return a}}}function zG(e,t,a){if(!1===t.canBeShifted)return kv(t)?"right":"left";{let t=e.over?.rect;return t&&e.activatorEvent instanceof PointerEvent?a>t.left+t.width/2?"right":"left":"right"}}let zV=Object.values(zM),z$="useCustomGroupBy",zW="useRanking",zz="useSortedByGroupOrdering",zH=[$U.useColumnOrder.pluginName,$U.useSortBy.pluginName,z$,zz,zW];function zU(e,t){let a=[],r=zH.indexOf(t);return r>-1&&(a=zH.slice(0,r)),(0,$U.ensurePluginOrder)(e,a,t)}let zq={RESET_GROUP_BY:"useCustomGroupBy.RESET_GROUP_BY",SET_GROUP_BY:"useCustomGroupBy.SET_GROUP_BY",TOGGLE_GROUP_BY:"useCustomGroupBy.TOGGLE_GROUP_BY"},zK=e=>{e.stateReducers.push(zQ),e.visibleColumnsDeps.push((e,{instance:t})=>[...e,t.state.groupByColumnIds]),e.visibleColumns.push(zJ),e.useInstance.push(zX)};function zQ(e,t,a,r){if(!zY.includes(t.type))return e;switch(t.type){case zq.RESET_GROUP_BY:{let t=r&&r.initialState&&r.initialState.groupByColumnIds||[],a={...e,groupByColumnIds:t};if(rn(e,a))return e;return a}case zq.SET_GROUP_BY:{let a={...e,groupByColumnIds:t.groupedColumnIds};if(rn(e,a))return e;return a}case zq.TOGGLE_GROUP_BY:{let{columnId:a,value:r}=t;if(void 0!==r?r:!e.groupByColumnIds.includes(a))return{...e,groupByColumnIds:[...e.groupByColumnIds,a]};return{...e,groupByColumnIds:e.groupByColumnIds.filter(e=>e!==a)}}}}function zJ(e,t){let a=t.instance.state.groupByColumnIds||[];for(let t of e)t.isGrouped=a.includes(t.id);return e}function zX(e){let{allColumns:t,plugins:a,state:{groupByColumnIds:r},dispatch:n}=e;for(let r of(zU(a,zK.pluginName),t))r.canGroupBy&&(r.toggleGroupBy=()=>e.toggleGroupBy(r.id));let i=(0,K.useCallback)((e,t)=>{n({type:zq.TOGGLE_GROUP_BY,columnId:e,value:t})},[n]),l=(0,K.useCallback)(e=>{n({type:zq.SET_GROUP_BY,value:e})},[n]),{groupedRowsList:s,flatRowsList:o,rowsByIdHash:d}=function(e){let{memex_table_without_limits:t}=iz();return t?function(e){let{rows:t,flatRows:a,rowsById:r,state:{groupByColumnIds:n,collapsedGroups:i},allColumns:l}=e,{data:s,groupedItemQueries:o,queriesForGroups:d,groupsById:u}=ul();return(0,K.useMemo)(()=>{if(!n.length||!s)return{groupedRowsList:t,flatRowsList:a,rowsByIdHash:r};let e=n.find(e=>l.find(t=>t.id===e)),c=l.find(t=>t.id===e);if(!c)throw Error(`Column with id ${e} is used for grouping but could not be found`);let m=c.columnModel;if(!m)throw Error(`Column with id ${e} is used for grouping but does not have a valid model`);let p={},h={};return{groupedRowsList:d.flatMap(e=>e?.data?.groups||[]).map(t=>{let a=t.groupId,n=o[a],l=u[a];if(!l||!n)return;let{groupValue:s,groupMetadata:d,totalCount:c}=l,f=n.reduce((e,t)=>(e.push(...t?.data?.nodes||[]),e),[]),g=`${e}:${a}`,y=f.map(e=>{let t=NN(r[e.id],g);return p[t.id]=t,h[e.id]=t,t});return{id:g,isGrouped:!0,groupedColumnId:e,groupedValue:a,groupedSourceObject:fq(m,s,d),subRows:y,totalCount:c?.value||0,isCollapsed:i.indexOf(a)>-1}}).filter(e=>!!e),flatRowsList:a.map(e=>h[e.id]).filter(e=>!!e),rowsByIdHash:p}},[n,s,d,l,o,a,t,r,u,i])}(e):function(e){let{rows:t,flatRows:a,rowsById:r,allColumns:n,state:{groupByColumnIds:i,collapsedGroups:l}}=e;return(0,K.useMemo)(()=>{if(!i.length)return{groupedRowsList:t,flatRowsList:a,rowsByIdHash:r};let e=i.filter(e=>n.find(t=>t.id===e)),s=[],o={};return{groupedRowsList:function e(t,a,r,n,i,l,s=0,o){if(s===t.length){for(let e of l)a.push(e),r[e.id]=e;return l}let d=t[s],u=n.find(e=>e.id===d);if(!u)throw Error(`Column with id ${d} is used for grouping but could not be found`);if(!u.getGroupedRows)throw Error(`Column with id ${d} is used for grouping but does not have a valid grouping function`);if(!u.columnModel)throw Error(`Column with id ${d} is used for grouping but does not have a valid model`);return u.getGroupedRows(l).map(({value:l,sourceObject:u,rows:c})=>{let m=`${d}:${l}`,p=e(t,a,r,n,i,c,s+1,m=o?`${o}>${m}`:m);return{id:m,isGrouped:!0,groupedColumnId:d,groupedValue:l,groupedSourceObject:u,subRows:p,totalCount:p.length,isCollapsed:i.indexOf(l)>-1}})}(e,s,o,n,l,t),flatRowsList:s,rowsByIdHash:o}},[i,t,a,r,n,l])}(e)}(e);Object.assign(e,{groupedRows:r.length>0?s:void 0,rows:o,flatRows:o,rowsById:d,toggleGroupBy:i,setGroupBy:l})}zK.pluginName=z$;let zY=Object.values(zq);function zZ(e){e.useInstance.push(z0)}function z0(e){let t=(0,K.useRef)(e.state.columnResizing.isResizingColumn),{updateWidth:a}=__();(0,K.useEffect)(()=>{if(null!=t.current&&!e.state.columnResizing.isResizingColumn){let r=e.columns.find(e=>e.id===t.current);r&&null!==r.width&&a(t.current,Number(r.width))}t.current=e.state.columnResizing.isResizingColumn},[e.columns,e.state.columnResizing,a])}function z1(e){e.useInstance.push(z2)}function z2(e){Object.assign(e,{autoResetResize:!e.state.columnResizing.isResizingColumn})}let z5=e=>{e.useInstance.push(z3)};function z3(e){let{rows:t,plugins:a}=e;zU(a,z5.pluginName),(0,K.useMemo)(()=>{let e=0;for(let a of t)if(a.isGrouped)for(let t of a.subRows)t.index=e++;else a.index=e++;return t},[t])}function z4(e){e.useInstance.push(z6)}function z6(e){let{rows:t,flatRows:a,groupedRows:r,state:{sortBy:n,groupByColumnIds:i},plugins:l}=e;zU(l,z4.pluginName);let{memex_table_without_limits:s}=iz(),[o,d]=(0,K.useMemo)(()=>{if(!r)return[t,a];let e=n[0]&&n[0].id,l=n[0]&&n[0].desc?"desc":"asc",o=i[0],d=!s&&e&&o&&e===o&&"desc"===l,u=d?r.slice().reverse():r,c=d?u.map(e=>[...e.subRows]).flat():a;return[u,c]},[a,i,r,s,t,n]);Object.assign(e,{rows:d,flatRows:d,groupedRows:r?o:void 0})}function z8({fields:e,plugins:t}){let{sorts:a}=un(),{groupedByColumnId:r,collapsedGroups:n}=d7(),{columnDefinitions:i,hiddenColumns:l}=zE(),s=(0,K.useMemo)(()=>a.map(e=>({id:e.column.id.toString(),desc:"desc"===e.direction})),[a]),o=(0,K.useMemo)(()=>r?[`${r}`]:[],[r]),d=(0,K.useMemo)(()=>[kx,...e.map(e=>e.id.toString())],[e]),u=[$U.useBlockLayout,$U.useColumnOrder,$U.useSortBy,zK,z4,z5,zL,_x,_N,z1,$U.useResizeColumns,zZ,$U.useRowSelect,N9,...t],{query:c}=lh(),m=function(){let{memex_table_without_limits:e}=iz();return e?function(){let{items:e}=ug();return(0,K.useMemo)(()=>e,[e])}():function(){let{filteredItems:e}=Ot(),{sortUngroupedItems:t}=OL();return(0,K.useMemo)(()=>t(e),[e,t])}()}();return(0,$U.useTable)({columns:i,data:m,orderByFn:$K,getRowId:$q,initialState:{hiddenColumns:l,sortBy:s,groupByColumnIds:o,collapsedGroups:n,columnOrder:d},manualSortBy:!0,autoResetHiddenColumns:!1,autoResetSelectedRows:!1,autoResetResize:!0,useControlledState:e=>(0,K.useMemo)(()=>({...e,sortBy:s,groupByColumnIds:o,collapsedGroups:n,hiddenColumns:l,columnOrder:d}),[e,d,s,c,o,l,n])},...u)}function z7(e,t,a){let r=(0,K.useRef)(void 0),n=(0,K.useRef)(t.length);return(0,pk.N)(()=>{if(r.current&&t.length!==n.current){let n=t.findIndex(e=>e.original.id===r.current),i=a?.rowHeight??37;e.current?.scrollTo({left:a?.left,top:n*i,behavior:"smooth"}),r.current=void 0}n.current=t.length}),{onNewItem:(0,K.useCallback)(e=>{r.current=e.id},[])}}z5.pluginName=zW,z4.pluginName=zz;let z9={tableBodyContainer:"ReactTable-module__tableBodyContainer--aeYvr"};var He=a(80874);let Ht={Box:"column-drop-zone-sash-module__Box--gFJCK",Box_1:"column-drop-zone-sash-module__Box_1--MU8we"},Ha=(0,K.memo)(e=>{let t=(0,K.useContext)(Nc),a=t?.column,r=e.visibleColumns.at(-1)===a,n=t?.side;if(a){let t=a.totalLeft;return("right"===n&&(t+=a.totalWidth),r&&"right"===n?t-=3:t-=Math.ceil(1.5),e.sticky&&e.height)?(0,F.jsx)("div",{style:{marginLeft:t,marginTop:-e.height,height:e.height,width:3},className:Ht.Box}):(0,F.jsx)("div",{style:{left:t,width:3},className:Ht.Box_1})}return null});Ha.displayName="ColumnDropZoneSash";let Hr=(e,t)=>e?t===wV.BEFORE?e.rect.top:e.rect.bottom:null,Hn={Box:"row-reorder-sash-module__Box--R_j58",Octicon:"row-reorder-sash-module__Octicon--uWD67"},Hi=({rows:e,isGrouped:t,scrollRef:a,headerHeight:r,tableWidth:n})=>{let{active:i,over:l}=(0,kS.fF)(),{ctrlKey:s}=k3(),o=(0,K.useMemo)(()=>{let a=[];if(t)for(let t of e){let e=t.subRows[t.subRows.length-1]?.original?.id;void 0!==e&&a.push(e)}else{let t=e[e.length-1]?.original?.id;void 0!==t&&a.push(t)}return a},[e,t]),d=(0,K.useCallback)(e=>o.includes(e),[o]),u=i?w$(i,l):null,c=u?Hr(l,u):null,m=l?.data.current,p=Nz.is(m)?m.originalItemId:null,h=!!p&&d(p),f=u===wV.AFTER&&h?-2:0,g=(0,K.useMemo)(()=>{if(a?.current&&null!==c){let e=a.current.getBoundingClientRect(),t=r??0,i=n?`${n}px`:"100%";return{top:a.current.scrollTop-e.top-t+f+c-1,left:a.current.scrollLeft,width:i}}return{}},[a,n,r,c,f]);return(0,F.jsx)(F.Fragment,{children:!!(i&&l&&null!==c&&p&&u&&i.id!==l.id)&&(0,F.jsx)("div",{style:{height:3,...g},className:Hn.Box,children:t&&s?(0,F.jsx)(lw.A,{icon:ly.PlusIcon,sx:{left:52,top:"-7px"},size:16,className:Hn.Octicon}):null})})};try{Hi.displayName||(Hi.displayName="RowReorderSash")}catch{}function Hl(){let{navigationDispatch:e}=cN();return(0,K.useCallback)(()=>{e(cS())},[e])}let Hs=[kS.FN,kS.Mk],Ho={threshold:{x:0,y:.2}},Hd=(0,K.memo)(function({children:e}){let t=Hl(),a=Nj(),r=T4(),[n,i]=(0,K.useState)(!1),[l,s]=(0,K.useState)(null),o=(0,K.useCallback)(e=>a.flatRows.find(t=>t.original.id===e)?.original,[a]),d=(0,K.useCallback)(e=>{let t=a.groupedRows?.find(t=>t.groupedValue===e);return t&&{sourceObject:t.groupedSourceObject,value:t.groupedValue}},[a]);Lx("is-dragging",n);let u=NS(),c=(0,K.useCallback)(()=>{i(!0),r(),t()},[r,t]),m=(0,K.useCallback)(()=>i(!1),[]),p=(0,K.useCallback)(async({over:e,active:t})=>{i(!1);let a=t.data.current;if(!Nz.is(a))return;s(a.originalItemId);let r=o(a.originalItemId),n=d(a.sortable.containerId);if(!r)return;let l=e?.data.current;if(Nz.is(l)){let a=o(l.originalItemId),i=w$(t,e),s=d(l.sortable.containerId);if(!a||!i)return;await u({activeItem:r,activeItemGroup:n,overItemGroup:s,overItem:a,side:i})}else if($b.is(l)){let e=d(l.groupedValue);if(!e||!n)return;await u({activeItem:r,activeItemGroup:n,overItemGroup:e})}s(null)},[o,d,u]),h=(0,kS.FR)((0,kS.MS)(kS.AN,{activationConstraint:{distance:4}})),f=x_();return(0,F.jsx)(kS.Mp,{collisionDetection:Lb,modifiers:Hs,onDragStart:c,onDragEnd:p,onDragCancel:m,autoScroll:Ho,sensors:h,accessibility:(0,K.useMemo)(()=>({container:f}),[f]),children:(0,F.jsx)(NW.Provider,{value:l,children:e})})});try{Hd.displayName||(Hd.displayName="RowReorderingProvider")}catch{}function Hu(e){let{state:{focus:t},navigationDispatch:a}=ck(),r=(0,K.useRef)(null),n=(0,K.useCallback)(()=>!!(e&&t&&cb(t,e))||!!(t&&cg(t)),[t,e]),i=(0,K.useCallback)(()=>{e?a(cC(e)):a(cw())},[a,e]);(0,K.useEffect)(()=>{n()&&r.current?.focus()},[n]);let l=(0,K.useCallback)(()=>{i()},[i]),s=(0,K.useCallback)(e=>{let t=T5(a,e);t.action?T2(e,t.keyAsShortcut):t.keyAsShortcut===fN.ESCAPE&&(a(u2({focusType:u6.Focus,details:{previousFocus:!0}})),T1(e))},[a]);return(0,K.useMemo)(()=>({onKeyDown:s,onFocus:l,omnibarRef:r}),[l,s,r])}let Hc=({pageType:e})=>e===sR?(0,F.jsx)(Hm,{}):e===sP?(0,F.jsx)(Hp,{}):sQ(e)?(0,F.jsx)(Hh,{groupId:e.groupId}):null,Hm=()=>{let{ref:e,hasNextPage:t}=GM(),{visibleColumns:a}=Nj();return(0,F.jsx)("div",{ref:e,...(0,ey.G)("table-pagination"),children:t?[...[,,,,,].keys()].map(e=>(0,F.jsx)(Hg,{columns:a},e)):null})},Hp=()=>{let{ref:e,hasNextPage:t}=GB(),{visibleColumns:a}=Nj();return(0,F.jsx)("div",{ref:e,...(0,ey.G)("table-pagination"),children:t?[...[,,,,,].keys()].map(e=>(0,F.jsx)(Hg,{columns:a},e)):null})},Hh=({groupId:e})=>{let{ref:t,hasNextPage:a}=GF(e),{visibleColumns:r}=Nj();return(0,F.jsx)("div",{ref:t,...(0,ey.G)(`table-pagination-${e}`),children:a?[...[,,,,,].keys()].map(e=>(0,F.jsx)(Hg,{columns:r},e)):null})},Hf=({columns:e})=>(0,F.jsx)(_u,{role:"row",style:{..._m},...(0,ey.G)("placeholder-row"),children:e.map(e=>(0,F.jsx)(_o,{role:"gridcell",style:{whiteSpace:"nowrap",width:e.width},children:e.Placeholder},e.id))}),Hg=(0,K.memo)(Hf);try{Hc.displayName||(Hc.displayName="TablePagination")}catch{}try{Hm.displayName||(Hm.displayName="UngroupedPagination")}catch{}try{Hp.displayName||(Hp.displayName="GroupsPagination")}catch{}try{Hh.displayName||(Hh.displayName="GroupedItemsPagination")}catch{}try{Hf.displayName||(Hf.displayName="PlaceholderRowUnmemoized")}catch{}try{Hg.displayName||(Hg.displayName="PlaceholderRow")}catch{}let Hy=e=>{let t=kS.fF().active?.data.current;return Nz.is(t)&&e.some(e=>e.original.id===t.originalItemId)},Hx=(0,K.memo)(function(e){let t=(0,K.useRef)(null),{isVisible:a,size:r}=pA({ref:t,defaultHeight:37*e.rows.length}),{state:{focus:n}}=ck(),i=!!n&&"coordinate"===n.type&&e.rows.some(e=>e.id===n.details.y),l=Hy(e.rows),s=a?"unset":`${r}px`,o=(0,K.useMemo)(()=>({height:s}),[s]);return(0,F.jsx)("div",{style:o,ref:t,children:a||i||l?e.rows.map(t=>(0,F.jsx)(_p,{row:t,index:t.index,data:e.itemData},t.original.id)):null})});try{Hx.displayName||(Hx.displayName="TableRowChunk")}catch{}let Hb=(0,K.memo)(function({groupId:e,scrollRef:t,metadata:a,shouldDisableFooter:r,footerPlaceholder:n}){let{omnibarRef:i,onFocus:l,onKeyDown:s}=Hu(e),o=(0,K.useMemo)(()=>{let e=fH(a.sourceObject);if(e)return{updateColumnActions:[e],groupId:a.value}},[a.sourceObject,a.value]),d=ch(a.sourceObject);return(0,F.jsx)(lx.A,{sx:(0,K.useMemo)(()=>({alignItems:"center",height:"37px",width:"100%",pl:"12px",bg:r?"canvas.subtle":"canvas.default",color:r?"fg.muted":"inherit",backdropFilter:"unset",pointerEvents:"none",borderBottom:"unset",borderBottomColor:"unset",boxShadow:"unset",left:0,marginTop:"1px",position:"sticky",display:"flex",">:first-child":{pointerEvents:"all"}}),[r]),...(0,ey.G)(`table-group-footer-${d}`),children:(0,F.jsx)(F1,{ref:i,role:"row",isFixed:!1,newItemAttributes:o,defaultPlaceholder:n,groupingMetadata:a,onKeyDown:s,onInputFocus:l,disabled:r,scrollRef:t})})});function Hv({groupId:e,firstRowIndex:t,isCollapsed:a,itemData:r,isEditable:n,metadata:i,rows:l,scrollRef:s,shouldDisableFooter:o,footerPlaceholder:d}){let{memex_table_without_limits:u}=iz();return a?null:(0,F.jsxs)(F.Fragment,{children:[(0,He.A)(l,5).map((e,a)=>(0,F.jsx)(Hx,{rows:e,rowOffset:t+5*a,chunkIndex:a,chunkSize:5,itemData:r},a)),u&&(0,F.jsx)(Hc,{pageType:{groupId:i.value}}),n&&(0,F.jsx)(Hb,{groupId:e,scrollRef:s,metadata:i,shouldDisableFooter:o,footerPlaceholder:d})]})}try{Hb.displayName||(Hb.displayName="TableGroupFooter")}catch{}try{Hv.displayName||(Hv.displayName="TableGroupContents")}catch{}let Hw={Box:"table-group-module__Box--F3vEc"},Hj={Box:"table-group-separator-module__Box--aWfDX"},HC=(0,K.memo)(function(){return(0,F.jsx)("div",{style:{height:`${NV}px`},className:Hj.Box})});try{HC.displayName||(HC.displayName="TableGroupSeparator")}catch{}let HI=45+NV,HS=(0,K.memo)(function({groupId:e,metadata:t,rows:a,firstRowIndex:r,itemData:n,scrollRef:i,isCollapsed:l,shouldDisableFooter:s,footerPlaceholder:o,isEditable:d,totalCount:u}){let c=(0,K.useRef)(null),{missingRequiredColumnData:m}=iS(),p=ch(t.sourceObject),{isVisible:h,size:f}=pA({ref:c,defaultHeight:(l?0:37*a.length+39)+HI}),g=h?"unset":`${f}px`,y=(0,K.useMemo)(()=>({height:g}),[g]),{state:{focus:x}}=ck(),{memex_table_without_limits:b}=iz(),{hideItemsCount:v,getAggregatesForItems:w,getAggregatesForGroupId:j}=Sq(),C=(0,K.useMemo)(()=>a.map(e=>e.original),[a]),I=b?(0,K.useMemo)(()=>j(t.value),[j,t.value]):(0,K.useMemo)(()=>w(C),[C,w]),S=Hy(a),k=h||S||x&&(cv(x)?a.some(e=>e.id===x.details.y):cb(x,e)),{setNodeRef:N,isOver:T}=$v({groupId:e,groupedValue:t.value,isCollapsed:l,isEmpty:0===a.length});return(0,F.jsx)(lx.A,{sx:y,ref:c,...(0,ey.G)(`table-group-${p}`),role:"rowgroup",children:k?(0,F.jsxs)(F.Fragment,{children:[(0,F.jsxs)(lx.A,{sx:{borderTop:"1px solid",borderBottom:"1px solid",borderColor:T?"accent.fg":"border.muted",cursor:T?"grabbing":"auto"},ref:N,className:Hw.Box,children:[(0,F.jsx)($j,{role:"row",isCollapsed:l,metadata:t,itemsInGroup:a.map(e=>e.original),children:(0,F.jsx)($D,{sourceObject:t.sourceObject,rowCount:u,aggregates:I,hideItemsCount:v})}),m?null:(0,F.jsx)(Nq,{rows:a,groupedValue:t.value,children:(0,F.jsx)(Hv,{groupId:e,firstRowIndex:r,isCollapsed:l,itemData:n,metadata:t,rows:a,scrollRef:i,shouldDisableFooter:s,footerPlaceholder:o,isEditable:d})})]}),(0,F.jsx)(HC,{})]}):null})});try{HS.displayName||(HS.displayName="TableGroup")}catch{}let Hk={HeaderGridCellLayout:"dummy-table-header-cell-module__HeaderGridCellLayout--ACxOH"},HN={Box:"header-grid-cell-module__Box--WjJPO"},HT=(0,K.forwardRef)((e,t)=>{let{sx:a,className:r,...n}=e;return(0,F.jsx)(lx.A,{ref:t,role:"columnheader","aria-colspan":1,sx:a,className:(0,vB.$)(r,HN.Box),...n})});HT.displayName="HeaderGridCell";let H_={Box:"header-grid-cell-layout-module__Box--yzcg2"},HA=(0,K.forwardRef)((e,t)=>{let{children:a,sx:r,className:n,...i}=e;return(0,F.jsx)(lx.A,{sx:r,ref:t,className:(0,vB.$)(n,H_.Box),...i,children:a})});HA.displayName="HeaderGridCellLayout";let HR=e=>{let{dragProps:t,...a}=e.header.getHeaderProps({style:{minWidth:e.header.width,height:e.height}});return e.header.id===kb?(0,K.createElement)(HT,{tabIndex:-1,...a,key:a.key,...t.listeners,...(0,ey.G)(TX(e.header.id)),ref:t.setNodeRef},(0,F.jsx)(HA,{className:Hk.HeaderGridCellLayout,children:e.header.render("Header")})):(0,K.createElement)("div",{...a,key:a.key,role:"cell",...t.listeners,ref:t.setNodeRef})};try{HR.displayName||(HR.displayName="DummyHeaderCell")}catch{}function HP({direction:e,index:t}){return(0,F.jsxs)("span",{style:{display:"inline-flex",alignItems:"center",verticalAlign:"text-bottom"},children:["desc"===e?(0,F.jsx)(ly.SortDescIcon,{}):(0,F.jsx)(ly.SortAscIcon,{}),void 0!==t&&(0,F.jsx)(lv.A,{sx:{px:"2px",fontWeight:"bold",fontSize:0},role:"presentation",children:t+1})]})}try{HP.displayName||(HP.displayName="ColumnSortIcon")}catch{}let HD={Box:"table-header-cell-module__Box--ChzNI",Button:"table-header-cell-module__Button--s82B5",Box_1:"table-header-cell-module__Box_1--CvYTd",HeaderGridCellLayout:"table-header-cell-module__HeaderGridCellLayout--cU7Y4",Text:"table-header-cell-module__Text--YdHPK",Box_2:"table-header-cell-module__Box_2--LlqCv",IconButton:"table-header-cell-module__IconButton--qObUF"},HE=(0,K.memo)(e=>{let t=e.header.columnModel,{currentView:a}=iS(),{groupByColumn:r,header:n,sliceByColumn:i}=e,l=(0,K.useRef)(null),[s,o]=(0,K.useState)(!1),{sortBy:d}=Nb(),{canSort:u,isSorted:c,isSortedDesc:m,sortedIndex:p}=n,{appendFilter:h,focusFilterInput:f}=lh(),{postStats:g}=iN(),{hideField:y,moveField:x,visibleFields:b,visibleFieldIndexMap:v}=TI(),{hasWritePermissions:w}=eK(),{setColumnSort:j}=un(),C=Tc(),I=N3(),{sliceField:S}=nA(),{memex_column_menu_position:k}=iz(),N=S===t,T=t.dataType===eN.Title,_=t.dataType===eN.SingleSelect,A=t.dataType===eN.SubIssuesProgress,R=(0,K.useCallback)(()=>{a&&(y(a.number,t),g({name:e4,ui:e3,memexProjectColumnId:t.id}))},[t,y,g,a]),P=(0,K.useCallback)(e=>{if(!t)return;let a="desc"===e,r=c?p:0;j(t,a===m?null:e),o(!1),g({name:a?e5:e2,ui:e3,context:t.id,index:r})},[t,m,c,p,j,o,g]),D=(0,K.useCallback)(()=>e.header.isGrouped?(0,F.jsx)("div",{className:HD.Box,...(0,ey.G)(`grouped-label-${t.name}`),children:(0,F.jsx)(lw.A,{icon:ly.RowsIcon})}):null,[t.name,e.header.isGrouped]),E=(0,K.useCallback)(()=>{let e=d.length>1,a=e?`${_V(p)} `:"";return c?(0,F.jsx)(p4.Q,{variant:"invisible",size:"small","aria-label":`Change ${a}sort direction to ${m?"ascending":"descending"}`,onClick:()=>P(m?"asc":"desc"),className:HD.Button,...(0,ey.G)(`sorted-label-${t.id}`),children:(0,F.jsx)(HP,{direction:m?"desc":"asc",index:e?p:void 0})}):null},[c,m,t.id,d.length,p,P]),M=(0,K.useCallback)(()=>N?(0,F.jsx)("div",{className:HD.Box,...(0,ey.G)(`sliced-label-${t.name}`),children:(0,F.jsx)(lw.A,{icon:Om})}):null,[t.name,N]),B=IN(t.dataType),L=IT(t.dataType),O=(0,K.useMemo)(()=>{if(!u)return[];let e=c&&!m,a=c&&m,r=!rk(t.dataType);return[(0,F.jsxs)(fi.l.Item,{onSelect:()=>P("asc"),disabled:r,sx:{fontWeight:e?(0,q.Jt)("fontWeights.bold"):(0,q.Jt)("fontWeights.normal")},"aria-describedby":`sort-description-asc-${t.id}`,...(0,ey.G)(`sort-toggle-asc-${t.id}`),children:[(0,F.jsx)(fi.l.LeadingVisual,{children:(0,F.jsx)(ly.SortAscIcon,{})}),(0,F.jsx)("span",{children:e?nH.tableHeaderContextMenu.sortAscendingActive:nH.tableHeaderContextMenu.sortAscending}),(0,F.jsx)(fi.l.TrailingVisual,{children:e&&(0,F.jsx)(ly.XIcon,{})})]},`sort-ascending-${t.id}`),(0,F.jsx)("span",{id:`sort-description-asc-${t.id}`,className:"sr-only",children:B},`sort-description-asc-${t.id}`),(0,F.jsxs)(fi.l.Item,{onSelect:()=>P("desc"),disabled:r,sx:{fontWeight:a?(0,q.Jt)("fontWeights.bold"):(0,q.Jt)("fontWeights.normal")},"aria-describedby":`sort-description-desc-${t.id}`,...(0,ey.G)(`sort-toggle-desc-${t.id}`),children:[(0,F.jsx)(fi.l.LeadingVisual,{children:(0,F.jsx)(ly.SortDescIcon,{})}),(0,F.jsx)("span",{children:a?nH.tableHeaderContextMenu.sortDescendingActive:nH.tableHeaderContextMenu.sortDescending}),(0,F.jsx)(fi.l.TrailingVisual,{children:a&&(0,F.jsx)(ly.XIcon,{})})]},`sort-descending-${t.id}`),(0,F.jsx)("span",{id:`sort-description-desc-${t.id}`,className:"sr-only",children:L},`sort-description-desc-${t.id}`)]},[u,c,m,t.id,t.dataType,B,L,P]),G=c$(),V=mK(),{navigationDispatch:$}=cN(),W=(0,K.useCallback)((e,t)=>{h(e),f(),$(cj()),t.stopPropagation()},[h,f,$]),z=(0,K.useCallback)(()=>{if(!a)return;let e=b.indexOf(t);x(a.number,t,e-1)},[t,a,x,b]),H=(0,K.useCallback)(()=>{if(!a)return;let e=b.indexOf(t);x(a.number,t,e+1)},[t,a,x,b]),U=(0,K.useMemo)(()=>{let e=[(0,F.jsxs)(fi.l.Item,{onSelect:e=>{(0,pN.flushSync)(()=>{o(!1)}),W(t.name,e)},disabled:!rT(t.dataType),...(0,ey.G)("create-filter-trigger"),children:[(0,F.jsx)(fi.l.LeadingVisual,{children:(0,F.jsx)(ly.FilterIcon,{})}),nH.tableHeaderContextMenu.filterValues]},`filter-by-values-${t.id}`)];return T&&e.push((0,F.jsxs)(fi.l.Item,{onSelect:e=>{W("is",e),o(!1)},...(0,ey.G)("create-is-filter-trigger"),children:[(0,F.jsx)(fi.l.LeadingVisual,{children:(0,F.jsx)(ly.FilterIcon,{})}),nH.tableHeaderContextMenu.filterByType]},`filter-by-is-${t.id}`)),e},[t.id,t.dataType,t.name,T,W,o]),Q=(0,K.useCallback)(()=>{r(e.header,e3),o(!1)},[r,e.header,o]),J=(0,K.useMemo)(()=>e.header.canGroupBy?[(0,F.jsxs)(fi.l.Item,{onSelect:Q,sx:{fontWeight:e.header.isGrouped?(0,q.Jt)("fontWeights.bold"):(0,q.Jt)("fontWeights.normal")},disabled:!rA(t.dataType),...(0,ey.G)("group-by-trigger"),children:[(0,F.jsx)(fi.l.LeadingVisual,{children:(0,F.jsx)(ly.RowsIcon,{})}),e.header.isGrouped?nH.tableHeaderContextMenu.groupByActive:nH.tableHeaderContextMenu.groupByValues,(0,F.jsx)(fi.l.TrailingVisual,{children:e.header.isGrouped&&(0,F.jsx)(ly.XIcon,{})})]},`group-by-${t.id}`)]:[],[e.header.canGroupBy,e.header.isGrouped,t.id,t.dataType,Q]),X=(0,K.useCallback)(()=>{i(t),o(!1)},[t,o,i]),Y=(0,K.useMemo)(()=>rE(t.dataType)?[(0,F.jsxs)(fi.l.Item,{onSelect:X,sx:{fontWeight:N?(0,q.Jt)("fontWeights.bold"):(0,q.Jt)("fontWeights.normal")},disabled:!rE(t.dataType),...(0,ey.G)("slice-by-trigger"),children:[(0,F.jsx)(fi.l.LeadingVisual,{children:(0,F.jsx)(Om,{})}),nH.tableHeaderContextMenu.sliceByValues,(0,F.jsx)(fi.l.TrailingVisual,{children:N&&(0,F.jsx)(ly.XIcon,{})})]},`slice-by-${t.id}`)]:[],[t,X,N]),Z=e.header.getResizerProps(),ee=(0,K.useCallback)(e=>{e.stopPropagation(),Z.onMouseDown(e)},[Z]),et=(0,K.useCallback)(()=>e.header.canResize&&w?(0,F.jsx)(F.Fragment,{children:(0,F.jsx)("div",{...Z,onMouseDown:ee,className:HD.Box_1,...(0,ey.G)(`${t.name}-column-resizer`)})}):null,[ee,e.header.canResize,Z,t,w]),ea=(0,kS.fF)(),er=e.header.getHeaderProps({className:`${w?ea.active?"":"hoverable":"readonly"}`,style:{minWidth:e.header.width,height:e.height}});Lx("is-resizing",e.header.isResizing);let en=(0,K.useCallback)(()=>{let t=I()[0];t&&C&&setTimeout(()=>{C.selectColumn(e.header.id),$(cI(t.id,e.header.id))})},[C,$,e.header.id,I]),ei=(0,K.useMemo)(()=>{if(k&&w){let e=0===v.get(t.id),a=v.get(t.id)===b.length-1;return[(0,F.jsx)(Vq,{disabled:e,isLeftmostColumn:e,onSelect:z},"moveToLeft"),(0,F.jsx)(VK,{disabled:a,isRightmostColumn:a,onSelect:H},"moveToRight")]}return[]},[k,w,v,t.id,b.length,z,H]);return(0,K.useMemo)(()=>{let{dragProps:a,...r}=er,n=[...J,...Y],i=null!==C;return(0,K.createElement)(HT,{...r,key:r.key,...(0,ey.G)(TX(e.header.id)),"aria-sort":function(e,t){if(e)return void 0===t?"none":t?"descending":"ascending"}(e.header.canSort,e.header.isSortedDesc),children:[(0,F.jsxs)(HA,{sx:{boxShadow:e=>`inset 0 -2px 0 ${E()||D()||M()?e.colors.neutral.emphasis:e.colors.border.default}, inset 0 1px 0 ${e.colors.border.default}`,height:e.height},ref:a.setNodeRef,className:HD.HeaderGridCellLayout,...a.listeners,children:[(0,F.jsx)("span",{className:HD.Text,...(0,ey.G)(`${t.name}-column-header-name`),children:e.header.render("Header")}),(0,F.jsxs)("div",{className:HD.Box_2,children:[(0,F.jsx)(D,{}),(0,F.jsx)(M,{}),(0,F.jsx)(E,{}),(0,F.jsxs)(yu.W,{open:s,onOpenChange:o,anchorRef:l,children:[(0,F.jsx)(yu.W.Anchor,{children:(0,F.jsx)(fE.K,{ref:l,icon:ly.KebabHorizontalIcon,variant:"invisible",size:"small","aria-label":`${t.name} column options`,className:HD.IconButton,...(0,ey.G)(`${t.name}-column-menu-trigger`)})}),(0,F.jsx)(yu.W.Overlay,{...(0,ey.G)(`${t.name}-column-menu`),initialFocusRef:l,children:(0,F.jsxs)(fi.l,{children:[i&&(0,F.jsxs)(fi.l.Item,{onSelect:en,children:[(0,F.jsx)(fi.l.LeadingVisual,{children:(0,F.jsx)(ly.MultiSelectIcon,{})}),nH.tableHeaderContextMenu.selectColumn]}),O.length>0&&(0,F.jsx)(yu.W.Divider,{}),O,U.length>0&&(0,F.jsx)(yu.W.Divider,{}),U,n.length>0&&(0,F.jsx)(yu.W.Divider,{}),n,!T&&(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(yu.W.Divider,{}),(0,F.jsxs)(fi.l.Item,{onSelect:R,disabled:c,children:[(0,F.jsx)(fi.l.LeadingVisual,{children:(0,F.jsx)(ly.EyeClosedIcon,{})}),nH.tableHeaderContextMenu.hideField]})]}),w&&(t.userDefined||_||A)&&(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(fi.l.Divider,{}),(0,F.jsxs)(fi.l.Item,{onSelect:()=>{G({pathname:lr.generatePath({...V,fieldId:t.id})})},disabled:!w,children:[(0,F.jsx)(fi.l.LeadingVisual,{children:(0,F.jsx)(ly.GearIcon,{})}),nH.tableHeaderContextMenu.fieldSettings]})]}),ei.length>0&&(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(fi.l.Divider,{}),(0,F.jsx)(fi.l.Group,{children:ei})]})]})})]})]})]}),(0,F.jsx)(et,{})]})},[er,U,J,Y,C,e.header,e.height,t.name,t.userDefined,t.id,D,M,E,s,en,O,T,R,c,w,_,A,ei,et,o,G,V])});HE.displayName="TableHeaderCell";try{(_=GroupedLabel).displayName||(_.displayName="GroupedLabel")}catch{}try{(A=SortedLabel).displayName||(A.displayName="SortedLabel")}catch{}try{(R=SlicedLabel).displayName||(R.displayName="SlicedLabel")}catch{}try{(P=ColumnResizeDragger).displayName||(P.displayName="ColumnResizeDragger")}catch{}let HM={Box:"table-header-module__Box--r_Qif",Box_1:"table-header-module__Box_1--sNz9u"},HB={threshold:{x:.3,y:0}},HL=[kS.dU],HF=(0,K.memo)(e=>{!function(){if(!(0,K.useContext)(Nf))throw Error("Must use `useTableColumnResizing` in child of `<TableProvider>")}();let{currentView:t}=iS(),{viewType:a}=ma(),{postStats:r}=iN();$Y("Table","TableHeader","");let{clearGroupedBy:n,setGroupedBy:i}=d7(),{groupByColumnIds:l}=Nb(),{toggleGroupBy:s}=Nj(),{setSliceField:o,clearSliceField:d,sliceField:u}=nA(),c=(0,K.useCallback)((e,a)=>{let o=e.columnModel;if(o&&t){if(e.isGrouped?n(t.number):i(t.number,o),l.length&&!e.isGrouped)for(let e of l)s(e,!1);r({groupByEnabled:!e.isGrouped,memexProjectColumnId:o.id,key:e1,ui:a}),e.toggleGroupBy()}},[l,r,n,t,i,s]),m=(0,K.useCallback)(e=>{if(!t)return;let n=u===e;n?d(t.number):o(t.number,e),r({name:n?tw:tv,ui:e3,memexProjectColumnId:e.id,context:JSON.stringify({layout:a})})},[d,t,r,o,u,a]),p=(0,kS.FR)((0,kS.MS)(kS.AN,{activationConstraint:{distance:2}})),h=function(){let{moveField:e,visibleFields:t}=TI(),{currentView:a}=iS(),r=Nv(),n=(0,K.useRef)(!1),i=(0,K.useCallback)(e=>{var t;let{column:a}=e.active.data.current;n.current=!0,r((t=a.id,{type:zM.SET_DRAGGING_COLUMN,columnId:t}))},[r]),l=(0,K.useRef)(0);(0,K.useEffect)(()=>{let e=e=>l.current=e.clientX;return document.addEventListener("mousemove",e),()=>document.removeEventListener("mousemove",e)});let s=(0,K.useCallback)(e=>{if(!e.over||!n.current){r(zB());return}let{column:t}=e.over.data.current,a=zG(e,t,l.current);r(t&&a?{type:zM.SET_DRAG_TARGET,overColumn:{column:t,side:a}}:{type:zM.SET_DRAG_TARGET,overColumn:null})},[r]),o=(0,K.useCallback)(()=>{n.current=!1,r(zB())},[r]);return{onDragStart:i,onDragMove:s,onDragEnd:(0,K.useCallback)(i=>{let s;n.current=!1;let{columnOrder:o,column:d,overColumn:u}=i.active.data.current;if(!a||!u||d.id===u.column.id){r(zB());return}let c=zG(i,u.column,l.current),m=o.indexOf(d.id),p=o.indexOf(u.column.id);s="left"===c?m<p?p-1:p:m<p?p:p+1,r(zB());let h=t.find(e=>`${e.id}`===d.id);if(!h)throw Error("No field found for dragging column");e(a.number,h,s-1)},[a,r,e,t]),onDragCancel:o}}(),f=x_();return(0,F.jsx)(kS.Mp,{modifiers:HL,sensors:p,collisionDetection:kS.TT,autoScroll:HB,accessibility:(0,K.useMemo)(()=>({container:f}),[f]),...h,children:(0,F.jsx)(lx.A,{sx:{height:e.height,minWidth:e.tableWidth,boxShadow:e=>`inset 0 -2px 0 ${e.colors.border.default}, inset 0 1px 0 ${e.colors.border.default}`},className:HM.Box,children:e.headerGroups.map(t=>{let a=t.getHeaderGroupProps({style:{width:"100%"}});return(0,K.createElement)("div",{...a,key:a.key,className:HM.Box_1},t.headers.map(a=>a.columnModel?(0,F.jsx)(HE,{header:a,headers:t.headers,groupByColumn:c,sliceByColumn:m,height:e.height},a.id):(0,F.jsx)(HR,{header:a,height:e.height},a.id)))})})})});HF.displayName="TableHeader";let HO={tableScrollContainer:"TableBody-module__tableScrollContainer--bwBKt",tableScrollContainerInner:"TableBody-module__tableScrollContainerInner--LlFZK",Box:"TableBody-module__Box--IW_3R",StyledTableRow:"TableBody-module__StyledTableRow--w3SpX"};function HG({scrollRef:e,containerRef:t,table:a,isOmnibarFixed:r,loadingState:n,tableGroups:i,itemData:l,hasWritePermissions:s}){let o=void 0!==i,{memex_table_without_limits:d,memex_small_viewport_a11y:u}=iz();return(0,F.jsx)(p_,{rootRef:e,sizeEstimate:185,children:(0,F.jsx)("div",{className:(0,vB.$)(HO.tableScrollContainer,HO.Box),"data-memex-small-viewport-a11y":u,...(0,ey.G)("table-scroll-container"),ref:e,children:(0,F.jsxs)("div",{style:{userSelect:"none",position:"relative",width:a.totalColumnsWidth,minWidth:"100%",paddingBottom:r?"69px":"unset"},"data-memex-small-viewport-a11y":u,className:HO.tableScrollContainerInner,children:[(0,F.jsx)(HF,{headerGroups:a.headerGroups,height:34,scrollRef:e,tableWidth:a.totalColumnsWidth}),(0,F.jsx)(Ha,{visibleColumns:a.visibleColumns,height:34,sticky:!0}),(0,F.jsxs)("div",{ref:t,children:[(0,F.jsx)(Hd,{children:(0,F.jsxs)(mz,{children:[n===VW.loading?(0,F.jsxs)(_u,{style:_m,className:HO.StyledTableRow,...(0,ey.G)("view-loading-indicator"),children:[(0,F.jsx)(pj.A,{size:"small"}),"Loading..."]}):n===VW.missing?null:i?i.map(t=>(0,F.jsx)(HS,{groupId:t.id,rows:t.subRows,metadata:{value:t.groupedValue,sourceObject:t.groupedSourceObject},totalCount:d?t.totalCount:t.subRows.length,firstRowIndex:t.subRows[0]?.index??0,itemData:l,isCollapsed:t.isCollapsed,scrollRef:e,shouldDisableFooter:cu(t.groupedSourceObject),footerPlaceholder:cm(t),isEditable:s},t.id)):(0,F.jsx)(Nq,{rows:a.rows,children:(0,He.A)(a.rows,5).map((e,t)=>(0,F.jsx)(Hx,{rows:e,rowOffset:5*t,chunkIndex:t,chunkSize:5,itemData:l},t))}),(0,F.jsx)(Hi,{rows:o?i:a.rows,isGrouped:o,scrollRef:e})]})}),d&&(0,F.jsx)(Hc,{pageType:o?sP:sR})]}),(0,F.jsx)(Ha,{visibleColumns:a.visibleColumns})]})})})}try{HG.displayName||(HG.displayName="TableBodyWithObserver")}catch{}let HV=(0,K.memo)(function({filterCount:e}){let{state:{focus:t},navigationDispatch:a}=ck(),r=(0,K.useCallback)(()=>{a(cj())},[a]),n=(0,K.useCallback)(e=>{if(fA(e)===fN.ARROW_DOWN){a(u2({x:u8.First,y:u8.First,focusType:u6.Focus})),T1(e);return}},[a]),i=(0,K.useCallback)(e=>{if(fA(e)===fN.ARROW_DOWN){a(u2({x:u8.First,y:u8.First,focusType:u6.Focus})),T1(e);return}},[a]);return(0,F.jsx)(Gb,{onInputKeyDown:n,onClearButtonKeyDown:i,dispatchInputFocusEvent:r,isFocused:cy(t),filterCount:e})});try{HV.displayName||(HV.displayName="TableFilterInput")}catch{}let H$=(0,K.memo)(function({onAddItem:e,isFixed:t}){let{omnibarRef:a,onFocus:r,onKeyDown:n}=Hu();return(0,F.jsx)(F1,{ref:a,role:"row",childElementRole:"gridcell",onAddItem:e,onKeyDown:n,onInputFocus:r,isFixed:t,defaultPlaceholder:F_})});try{H$.displayName||(H$.displayName="TableOmnibar")}catch{}let HW={VisibleFieldGroup:"VisibleFieldGroup",HiddenFieldGroup:"HiddenFieldGroup"},Hz=(0,K.memo)(function({id:e,open:t,setOpen:a,anchorRef:r}){let{clientHeight:n}=ki({onResize:()=>{t&&((0,pN.flushSync)(()=>{a(!1)}),a(!0))}});return(0,F.jsx)(yu.W,{open:t,anchorRef:r,onOpenChange:eC.l,children:(0,F.jsx)(yu.W.Overlay,{sx:{maxHeight:n,overflow:"auto"},...(0,ey.G)("column-visibility-menu"),onEscape:()=>a(!1),onClickOutside:()=>a(!1),children:(0,F.jsx)(HH,{id:e,setOpen:a},String(t))})})}),HH=(0,K.memo)(function({id:e,setOpen:t}){let{currentView:a}=iS(),{setShowAddFieldModal:r,showAddFieldModal:n}=Fc(),{allColumns:i}=i5(),{isFieldVisible:l,toggleField:s,visibleFields:o}=TI(),{hasWritePermissions:d}=eK(),u=Oo(),c=(0,K.useCallback)(e=>{r(!0),t(!1),e.stopPropagation()},[t,r]),m=(0,K.useCallback)((e,t,r)=>{let n=l(e),i=e.dataType===eN.Title,o=IS(e.dataType);return(0,F.jsxs)(Hq,{groupId:t,dragProps:{column:e,index:r},disabled:i,onSelect:i?void 0:t=>{ry(t),a&&(s(a.number,e,void 0,u),t.stopPropagation())},selected:n,children:[(0,F.jsx)(fi.l.LeadingVisual,{children:(0,F.jsx)(o,{})}),e.name]},e.id)},[a,l,s,u]),[p,h]=(0,K.useMemo)(()=>{let e=new Set(o.map(e=>e.databaseId)),t=i.filter(t=>!e.has(t.databaseId)),a=[],r=[];for(let[e,t]of o.entries())a.push(m(t,HW.VisibleFieldGroup,e));for(let[e,a]of t.entries())r.push(m(a,HW.HiddenFieldGroup,e));return[a,r]},[i,m,o]),f=(0,K.useMemo)(()=>d&&!n,[d,n]);return(0,F.jsx)(L9,{children:(0,F.jsxs)(fi.l,{id:e,sx:{width:"max-content"},...(0,ey.G)("visible-columns-menu"),children:[(0,F.jsx)(fi.l.Group,{children:(0,F.jsxs)(fi.l.Item,{disabled:!f,onSelect:e=>{ry(e),c(e)},...(0,ey.G)("new-field-button"),children:[(0,F.jsx)(fi.l.LeadingVisual,{children:(0,F.jsx)(ly.PlusIcon,{})}),"New field"]},"new-field")}),(0,F.jsx)(fi.l.Divider,{}),(0,F.jsxs)(fi.l.Group,{selectionVariant:"multiple",children:[(0,F.jsx)(fi.l.GroupHeading,{children:"Visible fields"}),p]}),(0,F.jsxs)(fi.l.Group,{selectionVariant:"multiple",children:[(0,F.jsx)(fi.l.GroupHeading,{children:"Hidden fields"}),h]})]})})}),HU={position:"relative",mb:1,userSelect:"none","&:not(.hide-sash):not(.is-dragging)":{"&::after, &::before":{content:"''",display:"none",position:"absolute",width:"100%",bg:"accent.emphasis",height:"4px",border:0,borderRadius:"6px",zIndex:12},"&.show-sash-before":{"&::before":{display:"block",top:"-4px",left:0}},"&.show-sash-after":{"&::after":{display:"block",bottom:"-4px",right:0}}}},Hq=(0,K.memo)(function({dragProps:e,groupId:t,...a}){let{currentView:r}=iS(),{groupedByColumn:n}=d7(),{moveField:i,hideField:l,isFieldVisible:s}=TI(),{findColumnByDatabaseId:o}=ua(),d=(0,K.useRef)(null),[u,c]=(0,K.useState)(!1),[m]=function(e,t=150){let[a,r]=(0,K.useState)(()=>e?"none":"auto"),n=(0,nk.M)(t);return(0,K.useEffect)(function(){if(!e)return;let t=!0,a=setTimeout(()=>{t&&r("none")},n.current);return()=>{t=!1,clearTimeout(a)}},[e,n]),(0,K.useEffect)(function(){e||r("auto")},[e]),[a,r]}(u),p=Oo(),h=Fe({dragID:String(e?.column.databaseId),dragType:"add-column-option",dragRef:d,dragIndex:e?.index??-1,dragOrigin:HW.VisibleFieldGroup,metadata:{},disable:!e,onDragStart(){c(!0)},onDragEnd(){c(!1)}}),f=Ft({dropRef:d,dropID:String(e?.column.databaseId),dropType:"add-column-option",onDrop({state:{dragID:a}}){if(!a||!r)return;let s=o(Number(a));if(s&&a!==String(e?.column.databaseId)){if(t===HW.HiddenFieldGroup){if(n===s||s.dataType===eN.Title)return;l(r.number,s)}if(e&&t===HW.VisibleFieldGroup){i(r.number,s,e.index,p);return}}}}),g=(0,vB.$)({"hide-sash":!e||!s(e.column)||u});return(0,F.jsx)(fi.l.Item,{...(0,ey.G)(function(e,t){let a=nm(t);return`${e?"visible":"hidden"}-column-item-${a}`}(s(e.column),e?.column.name)),...h.props,...h.handle.props,...f.props,...a,sx:{...HU,...a.sx,boxShadow:u?e=>`0 0 0 1px ${e.colors.accent.emphasis}`:void 0,":hover":u?{background:"initial"}:void 0,pointerEvents:m},className:g})});try{Hz.displayName||(Hz.displayName="AddColumnMenu")}catch{}try{HH.displayName||(HH.displayName="Options")}catch{}try{(D=Icon).displayName||(D.displayName="Icon")}catch{}try{Hq.displayName||(Hq.displayName="DragAndDroppableActionListItem")}catch{}let HK={IconButton:"add-column-header-module__IconButton--cb0UJ"},HQ=(0,K.forwardRef)(({showAddFieldModal:e,columnMenuTriggerRef:t},a)=>{let[r,n]=(0,K.useState)(!1),{stateRef:i,navigationDispatch:l}=cN(),s=(0,K.useCallback)(()=>{let e=i.current&&i.current.focus;e&&cv(e)&&l(u2({focusType:u6.Suspended})),n(!0)},[l,i]);return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(fE.K,{size:"small",variant:"invisible",icon:ly.PlusIcon,"aria-label":"Add field",ref:a,onClick:s,onKeyPress:s,disabled:e||r,...(0,ey.G)("column-visibility-menu-trigger"),className:HK.IconButton}),(0,F.jsx)(Hz,{open:r,setOpen:n,anchorRef:t})]})});HQ.displayName="AddColumnMenu";let HJ=(0,K.memo)(()=>{let{setShowAddFieldModal:e,showAddFieldModal:t}=Fc(),a=Nj(),{stateRef:r,navigationDispatch:n}=cN(),i=(0,K.useCallback)(e=>{let t=r.current&&r.current.focus||void 0;if(t&&cv(t))n(cI(t.details.y,e.id.toString()));else{let t=a.flatRows.find(e=>!e.isGrouped);t&&n(cI(t.id,e.id.toString()))}},[n,r,a.flatRows]),l=(0,K.useRef)(null);return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(HQ,{showAddFieldModal:t,columnMenuTriggerRef:l,ref:l}),(0,F.jsx)(Lh,{isOpen:t,setOpen:e,anchorRef:l,onSave:i})]})});HJ.displayName="AddColumnHeader";let HX={Header:HJ,id:kb,width:50,canSort:!1,nonNavigable:!0,canBeShifted:!1,canReorder:!1,Placeholder:"",Cell:"",CellEditor:""},HY=e=>[...e,HX],HZ=null;function H0(){if(null!=HZ)return HZ;let e=navigator.userAgent.toLowerCase();return HZ=e.includes("webkit")&&!e.includes("chrome")}function H1(e,t){let a=!!t?.sticky,{currentView:r}=iS(),n=r?.number,i=(0,K.useRef)(n),{firstNavigableColumnId:l,lastNavigableColumnId:s}=(0,K.useMemo)(()=>({firstNavigableColumnId:e.visibleColumns.find(e=>!e.nonNavigable)?.id,lastNavigableColumnId:e.visibleColumns.slice().reverse().find(e=>!e.nonNavigable)?.id}),[e.visibleColumns]),o=(0,K.useCallback)((e,t,{isSuspended:r})=>{let o=e===document.activeElement,d=!o&&e.contains(document.activeElement),u=t===l,c=t===s;if(d)return;let m="nearest";if(i.current!==n){if(i.current=n,!a)return}else u&&o&&!a?m="end":c&&o&&!a&&(m="start");e.focus({preventScroll:!0}),!r&&(H0()?"scrollIntoViewIfNeeded"in e&&"function"==typeof e.scrollIntoViewIfNeeded&&e.scrollIntoViewIfNeeded(!1):e.scrollIntoView({block:"nearest",inline:m}))},[n,l,s,a]);return(0,K.useMemo)(()=>({prepareRow:e.prepareRow,focusCellElement:o}),[o,e.prepareRow])}let H2=()=>{let e=(0,K.useRef)(null),t=T4(),a=Nv();return(0,K.useEffect)(()=>{function a(a){let r=a.target;e.current?.contains(r)||LK(r)||t()}return document.addEventListener("mousedown",a),()=>{document.removeEventListener("mousedown",a)}},[t,a]),{containerRef:e}},H5=()=>{let{state:{focus:e},navigationDispatch:t}=ck(),a=Nv(),{clearClipboard:r}=TQ(),n=T4(),i=(0,K.useCallback)(t=>{!(!e||cv(e)&&e.details.meta.editing)&&"\\"===t.key&&((0,rt.U0)()?t.metaKey:t.ctrlKey)&&t.shiftKey&&cv(e)&&(t.stopPropagation(),t.preventDefault(),a(_y(e)))},[e,a]),l=(0,K.useCallback)(a=>{let r=a.relatedTarget,n=a.currentTarget.contains(r),i=LK(r),l=e?.type==="coordinate"&&e.details.meta.suspended;i||n||l||t(cS())},[t,e]);return(0,K.useEffect)(()=>{let e=e=>{let a=fA(e);a===fN.CTRL_SPACE&&(e.stopPropagation(),e.preventDefault(),t(u5({focusType:u6.Focus,type:cf.GLOBAL_OMNIBAR,details:null}))),a===fN.ESCAPE&&(r(),n())};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[a,t,r,n]),{onKeyDown:i,onBlur:l}},H3=[e=>{e.columns.push(HY)}],H4=()=>cj().focus,H6=(0,K.memo)((0,K.forwardRef)(function(e,t){$Y("Table","ReactTable","");let{visibleFields:a}=TI(),r=z8((0,K.useMemo)(()=>({fields:a,plugins:H3}),[a])),n=(0,K.useRef)({instance:r,getHeaderFocus:H4}),{memex_table_without_limits:i}=iz(),l=i?Gf():r.flatRows.length;return(0,F.jsx)(Nx,{table:r,cellHeight:37,children:(0,F.jsx)(cT,{metaRef:n,children:(0,F.jsx)(Td,{children:(0,F.jsx)(Tx,{children:(0,F.jsx)(Ol,{children:(0,F.jsxs)(TK,{children:[(0,F.jsx)(HV,{filterCount:(0,K.useDeferredValue)(l)}),(0,F.jsx)(H7,{table:r,ref:t})]})})})})})})})),H8={position:"relative",flex:"1 1 auto",width:"100%"},H7=(0,K.forwardRef)(function({table:e},t){let{onKeyDown:a,onBlur:r}=H5(),{navigationDispatch:n}=ck(),[i,l]=(0,K.useState)(null),{memex_table_without_limits:s,memex_disable_autofocus:o,memex_small_viewport_a11y:d}=iz(),u=$W(e),c=(0,K.useCallback)(()=>{u&&n(u)},[n,u]);(0,K.useEffect)(()=>{o||c()},[c,o]),(0,K.useImperativeHandle)(t,()=>({focusIn:c}));let m=(0,K.useRef)(null),{hasWritePermissions:p}=eK(),{loadingState:h}=Vz(),f=0;if(s){let{hasNextPage:e}=ul();f=e?5:0}let g=h===VW.loaded?(e.rows.length+f)*37+34:71,y=$H({table:e,totalHeight:g,scrollRef:m}),{horizontalScrollbarSize:x,verticalScrollbarSize:b}=Fo(m),{onNewItem:v}=z7(m,e.rows,{left:0,rowHeight:37}),{currentView:w}=iS(),j=w?.number,{containerRef:C}=H2(),{sliceField:I}=nA(),{slicerItems:S}=On(),k=H1(e);(0,pk.N)(()=>{xD(m.current)},[j]);let N=e?.groupedRows?cc(e.groupedRows):void 0,T=(0,K.useMemo)(()=>({flex:"1 1 auto",flexDirection:"column",width:"100%",position:"relative",backgroundImage:t=>e.groupedRows?"none":`url("data:image/svg+xml,%3Csvg viewBox='0 0 1 1' xmlns='http://www.w3.org/2000/svg'%3E%3Crect width='1' height='1' fill='transparent' /%3E%3C/svg%3E"), url("data:image/svg+xml,%3Csvg viewBox='0 0 1 1' xmlns='http://www.w3.org/2000/svg'%3E%3Crect width='1' height='1' fill='${encodeURIComponent(t.colors.border.muted)}' /%3E%3C/svg%3E")`,backgroundSize:"1px 37px",backgroundPositionY:"15px",backgroundRepeat:"repeat-x, repeat",bg:e.groupedRows?e=>`${e.colors.canvas.inset}`:y?e=>`${e.colors.canvas.default}`:e=>`${e.colors.canvas.inset}`,display:"flex",gridArea:"2/2"}),[y,e.groupedRows]);return(0,F.jsx)(F.Fragment,{children:(0,F.jsxs)(ND.Provider,{value:(0,K.useMemo)(()=>({setMoveDialogProps:l}),[l]),children:[(0,F.jsxs)(lx.A,{...e.getTableProps({onKeyDown:a,onBlur:r,role:"grid"}),...(0,ey.G)("table-root"),sx:T,children:[i&&(0,F.jsx)(NA,{close:()=>{l(null)},...i}),(0,F.jsx)(lx.A,{sx:H8,"data-memex-small-viewport-a11y":d,className:z9.tableBodyContainer,"data-hpc":!0,children:(0,F.jsx)(H.A,{fontSize:"14px",children:(0,F.jsx)(HG,{scrollRef:m,containerRef:C,table:e,tableGroups:N,isOmnibarFixed:y,loadingState:h,hasWritePermissions:p,itemData:k})})}),(!N||0===N.length)&&p&&(0,F.jsx)(F7,{horizontalScrollbarSize:x,verticalScrollbarSize:b,isFixed:y,effectiveTableHeight:g,children:(0,F.jsx)(H$,{onAddItem:v,isFixed:y})})]}),I&&(0,F.jsx)(OP,{slicerItems:S})]})})});try{H6.displayName||(H6.displayName="ReactTable")}catch{}try{H6.displayName||(H6.displayName="ReactTable")}catch{}try{H7.displayName||(H7.displayName="InnerTable")}catch{}let H9=(0,K.memo)(function({children:e}){let{isFieldVisible:t}=TI();return(0,F.jsx)(zD,{isFieldVisible:t,children:e})});try{H9.displayName||(H9.displayName="TableColumnsProviderForTable")}catch{}var Ue=a(60499);function Ut(e){let t=new ResizeObserver(e);return t.observe(document.documentElement),()=>{t.unobserve(document.documentElement),t.disconnect()}}let Ua=["memex_placeholder_notice","memex_issue_types_rename_prompt"],Ur=Ua.reduce((e,t)=>(e[t]=!1,e),{}),Un=(0,K.createContext)(null),Ui=()=>{let e={...Ur},t=eA("memex-user-notices");if(t)for(let a of t)e[a]=!0;return e},Ul=()=>Ua.reduce((e,t)=>(e[t]="unset",e),{}),Us=(0,K.memo)(function({children:e}){let[t,a]=(0,K.useState)(()=>Ui()),[r,n]=(0,K.useState)(()=>Ul()),{postStats:i}=iN(),l=(0,K.useCallback)((e,t)=>{n(a=>({...a,[e]:t}))},[]),s=(0,K.useCallback)(async e=>{a(t=>({...t,[e]:!1})),l(e,"unset")},[l]),o=(0,K.useCallback)(async(e,t=!1)=>{s(e);try{await LG({notice:e}),i({name:"dismissed_user_notice",context:JSON.stringify({notice:e,tookAction:t})})}catch{}},[s,i]),d=(0,K.useMemo)(()=>({userNotices:t,hideUserNotice:s,dismissUserNotice:o,userNoticeVariants:r,setUserNoticeVariant:l}),[t,s,o,r,l]);return(0,F.jsx)(Un.Provider,{value:d,children:e})}),Uo=()=>{let e=(0,K.useContext)(Un);if(!e)throw Error("useUserNotices must be used within a UserNoticesContext.Provider");return e};try{Un.displayName||(Un.displayName="UserNoticesContext")}catch{}try{Us.displayName||(Us.displayName="UserNoticesStateProvider")}catch{}let Ud=(0,K.forwardRef)(function({activeClassName:e,...t},a){return(0,F.jsx)(cz,{...t,ref:a})});try{Ud.displayName||(Ud.displayName="NavLinkWithoutActiveClassName")}catch{}let Uu=({anchorRef:e,children:t,imageToLoad:a})=>{let[r,n]=(0,K.useState)(!1),{showTemplateDialog:i}=eU(),{isPaneOpened:l,containerRef:s}=c7(),[o,d]=(0,K.useState)(null),[u,c]=(0,K.useState)({top:0,left:0}),[m,p]=(0,K.useState)("top-left"),h=l&&s.current?.contains(e.current),f=(0,K.useCallback)(t=>{if(!e.current)return()=>void 0;let a=new MutationObserver(t);return a.observe(e.current,{attributes:!0,characterData:!1,childList:!1,subtree:!0}),()=>{a.disconnect()}},[e]),g=(0,K.useCallback)(()=>!!(e.current&&"none"!==e.current.style.display),[e]),y=(0,K.useSyncExternalStore)(f,g);(0,K.useEffect)(()=>{if(!a)return;let e=document.createElement("img");e.src=a,e.onload=function(){n(!0)}},[a,n]);let x=(0,K.useCallback)(()=>{o&&e.current&&c((0,b4.uG)(o,e.current,{side:"outside-top",align:"start",alignmentOffset:-8,anchorOffset:12}))},[e,o,c]);return((0,K.useEffect)(()=>{if(!e.current)return;let{left:t}=e.current.getBoundingClientRect();p(t+-8===u.left?"top-left":"top-right")},[e,u,p]),(0,K.useLayoutEffect)(x,[x]),(0,$z.w)(x),(0,b6.G)({containerRef:e,disabled:!u,bindKeys:b4.z0.Tab}),i||l&&!h||!y||a&&!r)?null:(0,F.jsx)(P5.Ay,{returnFocusRef:e,ref:d,sx:{overflow:"visible"},...(0,ey.G)("user-notice-popover"),onClickOutside:eC.l,onEscape:eC.l,top:u.top,left:u.left,children:(0,F.jsx)(xQ.A,{caret:m,sx:{display:"flex",flexDirection:"column",fontSize:1,justifyContent:"space-between",padding:4,width:"326px"},children:t})})};try{Uu.displayName||(Uu.displayName="UserNoticePopover")}catch{}let Uc={borderRadius:"6px",width:"276px",height:"183px",boxShadow:e=>DD({size:"1px",color:e.colors.border.default})},Um=({anchorRef:e})=>{let{hasAdminPermissions:t}=eK(),a=Ix("issueTypes","popover"),{allColumns:r}=i5(),{userNotices:n,dismissUserNotice:i,setUserNoticeVariant:l,userNoticeVariants:s}=Uo(),o=(0,K.useRef)(null),{anchorRef:d}=Fh(),u=r.find(e=>"type"===e.name.toLowerCase().trim()&&!0===e.userDefined),c=u&&Mj(u),m=(0,K.useCallback)((e=!1)=>{i("memex_issue_types_rename_prompt",e),d.current?.focus()},[i,d]),p=(0,K.useCallback)(()=>{l("memex_issue_types_rename_prompt","modal")},[l]),h=(0,K.useCallback)(()=>{l("memex_issue_types_rename_prompt","unset"),setTimeout(()=>o?.current?.focus(),250)},[l]);if(!u||!t||!n.memex_issue_types_rename_prompt||"rename-custom-type-column"!==c)return null;let f="modal"===s.memex_issue_types_rename_prompt;return(0,F.jsx)(F.Fragment,{children:f?(0,F.jsx)(MB,{column:u,onCancel:h,onConfirm:()=>m(!0)}):(0,F.jsxs)(Uu,{anchorRef:e,imageToLoad:a,children:[(0,F.jsx)(h_.A,{as:"h2",sx:{fontSize:1,fontWeight:"bold"},children:(0,F.jsxs)(lx.A,{sx:{display:"flex",alignItems:"center"},children:[(0,F.jsx)(lw.A,{size:14,icon:ly.InfoIcon,sx:{color:"accent.fg",mr:2}}),iu.IssueTypeRenamePopover.title]})}),(0,F.jsx)(lv.A,{sx:{mt:2},as:"p",children:iu.IssueTypeRenamePopover.description(u.name)}),(0,F.jsx)(lx.A,{as:"img",src:a,sx:Uc,alt:iu.IssueTypeRenamePopover.altText}),(0,F.jsxs)(lx.A,{sx:{fontSize:1,mt:3,display:"flex",justifyContent:"flex-start",gap:2},children:[(0,F.jsx)(p4.Q,{ref:o,onClick:p,children:iu.IssueTypeRenamePopover.actionPrimary}),(0,F.jsx)(p4.Q,{variant:"invisible",onClick:()=>m(),children:iu.IssueTypeRenamePopover.actionSecondary})]})]})})};try{Um.displayName||(Um.displayName="MemexIssueTypeRenamePopover")}catch{}let Up=e=>e.replace(/[\\/:"*?<>|]/g,""),Uh=()=>{let{itemsToCsv:e}=TQ(),{currentView:t}=iS(),{matchesSearchQuery:a}=lh(),{items:r}=ug(),n=mf().title,{postStats:i}=iN(),l=(0,uX.S)(),{memex_table_without_limits:s}=iz();return(0,K.useCallback)(async()=>{if(!t)return;let o=s?[...r]:r.filter(e=>a(e)),d=e(o,{withHeaders:!0});if(d&&(!s||await l({title:"Export view data",content:"Only rows that have been loaded into this view will be exported.",confirmButtonContent:"Export",confirmButtonType:"primary"}))){i({name:"file_export",number_of_rows:o.length});let e=`${Up(n)} - ${Up(t.name)}.tsv`,a=new Blob([d],{type:im.CSV}),r=URL.createObjectURL(a),l=document.createElement("a");l.style.display="none",l.href=r,l.download=e,document.body.appendChild(l),l.click(),document.body.removeChild(l),window.URL.revokeObjectURL(r)}},[t,r,e,a,n,i,l,s])},Uf=()=>{let e=iW(()=>{let e=document.querySelector("command-palette");return e&&e.closest("details")}),t=(0,K.useCallback)(t=>{if(!e.current)return()=>void 0;let a=new MutationObserver(t);return a.observe(e.current,{attributes:!0}),()=>{a.disconnect()}},[e]),a=(0,K.useCallback)(()=>{let t=e.current;return!!(t&&t.hasAttribute("open"))},[e]);return{isCommandPaletteVisible:(0,K.useSyncExternalStore)(t,a)}},Ug=(0,K.memo)(function({id:e,open:t,setOpen:a,anchorRef:r}){let{clientHeight:n}=vj({onResize:()=>{t&&((0,pN.flushSync)(()=>{a(!1)}),a(!0))}});return(0,F.jsx)(yu.W,{open:t,anchorRef:r,onOpenChange:eC.l,children:(0,F.jsx)(yu.W.Overlay,{sx:{maxHeight:n,overflow:"auto"},...(0,ey.G)("field-sum-menu"),onEscape:()=>a(!1),onClickOutside:()=>a(!1),children:(0,F.jsx)(Uy,{id:e},String(t))})})}),Uy=(0,K.memo)(function({id:e}){let{currentView:t}=iS(),{allColumns:a}=i5(),r=(0,K.useMemo)(()=>a.filter(e=>e.dataType===eN.Number).sort(rx),[a]),{hideItemsCount:n,sum:i,toggleItemsCount:l,addFieldAggregation:s,removeFieldAggregation:o}=Sq(),{postStats:d}=iN(),u=t?.localViewStateDeserialized?.viewType,c=Oo(),m=(0,K.useMemo)(()=>{let e=e=>{t&&(l(t.number),d({name:n?"aggregation_settings_show_items_count":"aggregation_settings_hide_items_count",ui:c,context:u}),e.stopPropagation())};return(0,F.jsx)(fi.l.Item,{selected:!n,onSelect:t=>{ry(t),e(t)},...(0,ey.G)("sum-of-items"),children:"Count"},"items-count")},[n,t,l,d,c,u]),p=(0,K.useMemo)(()=>r.map(e=>{let a=i.some(t=>t.id===e.id),r=r=>{t&&(a?o(t.number,"sum",e):s(t.number,"sum",e),d({name:a?"aggregation_settings_sum_removed":"aggregation_settings_sum_applied",ui:c,memexProjectColumnId:e.id,context:u}),r.stopPropagation())};return(0,F.jsx)(fi.l.Item,{selected:a,onSelect:e=>{ry(e),r(e)},...(0,ey.G)(`sum-of-${e.name}`),children:e.name},e.id)}),[s,i,t,r,o,d,c,u]);return(0,F.jsx)(fi.l,{id:e,selectionVariant:"multiple",children:(0,F.jsxs)(fi.l.Group,{children:[(0,F.jsx)(fi.l.GroupHeading,{children:"Field sum"}),m,p]})})});try{Ug.displayName||(Ug.displayName="FieldSumMenu")}catch{}try{Uy.displayName||(Uy.displayName="MenuOptions")}catch{}let Ux=(0,K.memo)(function({open:e,setOpen:t,anchorRef:a,children:r}){let{clientHeight:n}=vj({onResize:()=>{e&&((0,pN.flushSync)(()=>{t(!1)}),t(!0))}});return(0,F.jsx)(yu.W,{open:e,anchorRef:a,onOpenChange:eC.l,children:(0,F.jsx)(yu.W.Overlay,{sx:{maxHeight:n,overflow:"auto"},...(0,ey.G)("group-by-menu"),onEscape:()=>t(!1),onClickOutside:()=>t(!1),children:r})})}),Ub=(0,K.memo)(function({id:e,groupedByColumn:t,setGroupedBy:a,isValidGroupByColumn:r,handleClearGroupBy:n,title:i,setOpen:l}){let{currentView:s}=iS(),{viewType:o}=ma(),{allColumns:d}=i5(),{postStats:u}=iN(),c=Oo(),m=(0,K.useMemo)(()=>d.filter(r).sort(rx).map(e=>{let r=IS(e.dataType);return(0,F.jsxs)(fi.l.Item,{selected:t===e,onSelect:r=>{if(!s)return;let i=t===e;if(i){if(!n)return;n()}else a(s.number,e);u({groupByEnabled:!i,memexProjectColumnId:e.id,key:e1,ui:c,context:o}),l(!1),r.stopPropagation()},disabled:!rA(e.dataType),...(0,ey.G)(`group-by-${e.name}`),children:[(0,F.jsx)(fi.l.LeadingVisual,{children:(0,F.jsx)(r,{})}),e.name]},e.id)}),[d,r,t,s,u,c,o,l,n,a]);return(0,F.jsx)(fi.l,{id:e,selectionVariant:"single",children:(0,F.jsxs)(fi.l.Group,{children:[(0,F.jsx)(fi.l.GroupHeading,{children:i}),m,n&&(0,F.jsxs)(fi.l.Item,{selected:!t,onSelect:e=>{ry(e),n()},...(0,ey.G)("group-by-none"),children:[(0,F.jsx)(fi.l.LeadingVisual,{children:(0,F.jsx)(ly.XIcon,{})}),"No grouping"]},"group-by-none")]})})});try{Ux.displayName||(Ux.displayName="GroupByMenu")}catch{}try{Ub.displayName||(Ub.displayName="GroupByMenuOptions")}catch{}try{(E=Icon).displayName||(E.displayName="Icon")}catch{}let Uv=(0,K.memo)(function({id:e,open:t,setOpen:a,anchorRef:r}){return(0,F.jsx)(Ux,{open:t,setOpen:a,anchorRef:r,children:(0,F.jsx)(Uw,{id:e,setOpen:a},String(t))})}),Uw=(0,K.memo)(function({id:e,setOpen:t}){let{groupedByColumn:a,setGroupedBy:r,clearGroupedBy:n}=d7(),{currentView:i}=iS(),l=(0,K.useCallback)(()=>{i&&n(i.number),t(!1)},[n,i,t]);return(0,F.jsx)(Ub,{id:e,groupedByColumn:a,setGroupedBy:r,isValidGroupByColumn:L$,handleClearGroupBy:l,title:"Group by",setOpen:t})});try{Uv.displayName||(Uv.displayName="HorizontalGroupByMenu")}catch{}try{Uw.displayName||(Uw.displayName="HorizontalGroupByMenuOptions")}catch{}let Uj=(0,K.memo)(function({id:e,open:t,setOpen:a,anchorRef:r}){let[n,i]=(0,K.useState)(!1),{clientHeight:l}=vj({onResize:()=>{t&&((0,pN.flushSync)(()=>{a(!1)}),a(!0))}}),{dateFields:s,setDateFields:o}=ko(),{currentView:d}=iS(),u=(0,K.useCallback)(e=>{if(!d||!S7(e))return;let[t=lH,r=lH]=s;if(t===lH||r===lH){let a=[];a=t===lH?oZ(e)&&r===lH?[e,e]:[e,r]:[t,e],o(d.number,a)}a(!0)},[d,s,o,a]);return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(yu.W,{open:t,anchorRef:r,onOpenChange:eC.l,children:(0,F.jsx)(yu.W.Overlay,{sx:{maxHeight:l,overflow:"auto"},role:"dialog","aria-label":"Select date fields",...(0,ey.G)("roadmap-date-fields-menu"),onEscape:()=>a(!1),onClickOutside:()=>a(!1),children:(0,F.jsx)(US,{id:e,setOpen:a,setAddFieldOpen:i},String(t))})}),(0,F.jsx)(Lh,{isOpen:!t&&n,setOpen:i,anchorRef:r,onSave:u,limitedTypes:[eN.Date,eN.Iteration]})]})}),UC=({dateFields:e,currentValue:t,onSelect:a,variant:r})=>(0,F.jsx)(F.Fragment,{children:e.map(e=>{let n=IS(e.dataType);return(0,F.jsxs)(fi.l.Item,{selected:e.id===t,onSelect:t=>{t.preventDefault(),a(e,r)},...(0,ey.G)(`date-field-${r}-${e.name}`),children:[(0,F.jsx)(fi.l.LeadingVisual,{children:(0,F.jsx)(n,{})}),`${e.name} ${oZ(e)?n6.iterationSuffix(r):""}`]},e.id)})});function UI(e,t){return S7(e)&&S7(t)&&e.id===t.id&&o1(e)}let US=(0,K.memo)(function({id:e,setOpen:t,setAddFieldOpen:a}){let{currentView:r}=iS(),{allColumns:n}=i5(),i=(0,K.useMemo)(()=>n.filter(e=>S7(e)).sort(rx),[n]),{hasWritePermissions:l}=eK(),{postStats:s}=iN(),o=Oo(),d=(0,K.useCallback)(e=>{a(!0),t(!1),e.stopPropagation()},[a,t]),{dateFields:u,setDateFields:c}=ko(),[m=lH,p=lH]=u,h=(0,K.useCallback)((e,t)=>{if(!r)return;let a=[];if("start"===t){let t=S7(e)&&oZ(e)?e:lH,r=UI(e,p);a.push(e,r?t:p)}else{let t=UI(e,m);a.push(t?lH:m,e)}s({name:"roadmap_date_field_selected",ui:o,context:"start"===t?"start":"target",...S7(e)?{memexProjectColumnId:e.databaseId}:{}}),c(r.number,a)},[r,s,o,c,p,m]);return(0,F.jsxs)(fi.l,{id:e,children:[(0,F.jsx)(fi.l.Group,{children:(0,F.jsxs)(fi.l.Item,{disabled:!l,onSelect:e=>{ry(e),d(e)},...(0,ey.G)("roadmap-new-field-button"),children:[(0,F.jsx)(fi.l.LeadingVisual,{children:(0,F.jsx)(ly.PlusIcon,{})}),"New field"]},"new-field")}),(0,F.jsx)(fi.l.Divider,{}),(0,F.jsxs)(fi.l.Group,{selectionVariant:"single",children:[(0,F.jsx)(fi.l.GroupHeading,{children:n6.startDate}),(0,F.jsx)(UC,{dateFields:i,currentValue:m===lH?m:m?.id,onSelect:h,variant:"start"}),(0,F.jsx)(fi.l.Item,{selected:m===lH,onSelect:e=>{e.preventDefault(),h(lH,"start")},...(0,ey.G)("date-field-no-start"),children:n6.noStartDate},"none")]}),(0,F.jsxs)(fi.l.Group,{selectionVariant:"single",children:[(0,F.jsx)(fi.l.GroupHeading,{children:n6.endDate}),(0,F.jsx)(UC,{dateFields:i,currentValue:p===lH?p:p?.id,onSelect:h,variant:"end"}),(0,F.jsx)(fi.l.Item,{disabled:!i,selected:p===lH,onSelect:e=>{e.preventDefault(),h(lH,"end")},...(0,ey.G)("date-field-no-end"),children:n6.noEndDate},"none")]})]})});try{Uj.displayName||(Uj.displayName="RoadmapDateFieldsMenu")}catch{}try{UC.displayName||(UC.displayName="DateFields")}catch{}try{(M=Icon).displayName||(M.displayName="Icon")}catch{}try{US.displayName||(US.displayName="MenuOptions")}catch{}let Uk=(0,K.memo)(function({id:e,open:t,setOpen:a,anchorRef:r}){return(0,F.jsx)(Ux,{open:t,setOpen:a,anchorRef:r,children:(0,F.jsx)(UN,{id:e,setOpen:a},String(t))})}),UN=(0,K.memo)(function({setOpen:e,id:t}){let{groupedByColumn:a,setGroupedBy:r,clearGroupedBy:n}=d7(),{currentView:i}=iS(),l=(0,K.useCallback)(()=>{i&&n(i.number),e(!1)},[n,i,e]);return(0,F.jsx)(Ub,{id:t,groupedByColumn:a,setGroupedBy:r,isValidGroupByColumn:L$,handleClearGroupBy:l,title:"Group by",setOpen:e})});try{Uk.displayName||(Uk.displayName="RoadmapGroupByMenu")}catch{}try{UN.displayName||(UN.displayName="RoadmapGroupByMenuOptions")}catch{}let UT=new Set([eN.Iteration,eN.Milestone,eN.Date]);function U_(e){return UT.has(e.dataType)}let UA=()=>{let{allColumns:e}=i5();return(0,K.useMemo)(()=>e.filter(U_).sort(rx),[e])},UR=()=>{let{isRoadmapMarkerFieldsDirty:e}=ko(),{hasWritePermissions:t}=eK();return(0,F.jsx)(D$,{isDirty:e,hideDirtyState:!t,children:(0,F.jsx)(ly.LocationIcon,{})})};function UP({id:e}){let{currentView:t}=iS(),a=UA(),{markerFields:r,toggleMarkerField:n}=ko(),i=(0,K.useMemo)(()=>new Set(r),[r]),{postStats:l}=iN(),s=Oo(),o=(0,K.useCallback)(e=>{if(!t)return;let a=i.has(e);n(t.number,e),l({name:a?"roadmap_marker_hide":"roadmap_marker_show",ui:s,memexProjectColumnId:e.id})},[t,i,n,l,s]);return(0,F.jsx)(fi.l,{...(0,ey.G)("roadmap-markers-menu"),id:e,selectionVariant:"multiple",children:(0,F.jsxs)(fi.l.Group,{children:[(0,F.jsx)(fi.l.GroupHeading,{children:"Markers"}),a.map(e=>{let t=IS(e.dataType);return(0,F.jsxs)(fi.l.Item,{selected:i.has(e),onSelect:t=>{ry(t),o(e)},children:[(0,F.jsx)(fi.l.LeadingVisual,{children:(0,F.jsx)(t,{})}),e.name]},e.id)})]})})}let UD=(0,K.memo)(function({id:e,open:t,setOpen:a,anchorRef:r}){let{clientHeight:n}=ki({onResize:()=>{t&&((0,pN.flushSync)(()=>{a(!1)}),a(!0))}});return(0,F.jsx)(yu.W,{open:t,anchorRef:r,onOpenChange:eC.l,children:(0,F.jsx)(yu.W.Overlay,{sx:{maxHeight:n,overflow:"auto"},...(0,ey.G)("column-marker-menu"),role:"dialog",onEscape:()=>a(!1),onClickOutside:()=>a(!1),"aria-label":"Configure vertical markers to display on roadmap",children:(0,F.jsx)(UP,{id:e})})})});try{UT.displayName||(UT.displayName="MarkerFields")}catch{}try{UR.displayName||(UR.displayName="MarkerDirtyIcon")}catch{}try{UP.displayName||(UP.displayName="RoadmapMarkerMenu")}catch{}try{(B=Icon).displayName||(B.displayName="Icon")}catch{}try{UD.displayName||(UD.displayName="MarkerColumnMenu")}catch{}let UE=(0,K.memo)(function({id:e,open:t,setOpen:a,anchorRef:r}){let n=kf(),{clientHeight:i}=vj({onResize:()=>{t&&((0,pN.flushSync)(()=>{a(!1)}),a(!0))}});return(0,F.jsx)(yu.W,{open:t,anchorRef:r,onOpenChange:eC.l,children:(0,F.jsx)(yu.W.Overlay,{sx:{maxHeight:i,overflow:"auto"},...(0,ey.G)("roadmap-zoom-level-menu"),role:"dialog","aria-label":n6.zoomMenuDialogAriaLabel(n),onEscape:()=>a(!1),onClickOutside:()=>a(!1),children:(0,F.jsx)(UL,{id:e,setOpen:a},String(t))})})}),UM=[{type:lU.Month,label:n6.zoomLevelOptions.month},{type:lU.Quarter,label:n6.zoomLevelOptions.quarter},{type:lU.Year,label:n6.zoomLevelOptions.year}],UB=(0,K.memo)(function({currentValue:e,onSelect:t}){return(0,F.jsx)(F.Fragment,{children:UM.map(a=>(0,F.jsx)(fi.l.Item,{selected:a.type===e,onSelect:e=>{e.preventDefault(),t(a.type)},...(0,ey.G)(`zoom-level-${a.type}`),children:a.label},a.type))})}),UL=(0,K.memo)(function({id:e,setOpen:t}){let{currentView:a}=iS(),r=kf(),n=ky(),{postStats:i}=iN(),l=Oo(),s=(0,K.useCallback)(e=>{a&&(n(a.number,e),i({name:"roadmap_zoom_level_set",ui:l,context:e}),t(!1))},[a,n,i,l,t]);return(0,F.jsx)(fi.l,{id:e,children:(0,F.jsxs)(fi.l.Group,{selectionVariant:"single",...(0,ey.G)("roadmap-zoom-list"),children:[(0,F.jsx)(fi.l.GroupHeading,{children:n6.zoomLevel}),(0,F.jsx)(UB,{currentValue:r,onSelect:s})]})})});try{UE.displayName||(UE.displayName="RoadmapZoomLevelMenu")}catch{}try{UB.displayName||(UB.displayName="ZoomLevels")}catch{}try{UL.displayName||(UL.displayName="MenuOptions")}catch{}let UF=(0,K.memo)(function({id:e,open:t,setOpen:a,anchorRef:r}){let n=(0,K.useId)(),i=e??n,{clientHeight:l}=vj({onResize:()=>{t&&((0,pN.flushSync)(()=>{a(!1)}),a(!0))}}),s=`${i}_label`,o=`${i}_description`;return(0,F.jsx)(yu.W,{open:t,anchorRef:r,onOpenChange:eC.l,children:(0,F.jsxs)(yu.W.Overlay,{sx:{maxHeight:l,overflow:"auto"},...(0,ey.G)("sort-by-menu"),role:"dialog","aria-label":"Select a field to sort by",onEscape:()=>a(!1),onClickOutside:()=>a(!1),children:[(0,F.jsx)(lx.A,{id:s,sx:{fontWeight:"bold",m:3,mb:2,fontSize:0,color:"fg.muted"},children:"Sort by"}),(0,F.jsx)(lx.A,{id:o,sx:{mx:3,my:1,fontSize:0,color:"fg.muted"},children:"Select up to 2 fields"}),(0,F.jsx)(UO,{id:i,setOpen:a,labelledBy:s,describedBy:o},String(t))]})})}),UO=(0,K.memo)(function({setOpen:e,id:t,labelledBy:a,describedBy:r}){let{allColumns:n}=i5(),{sorts:i,isSorted:l,clearSortedBy:s,setColumnSort:o}=un(),{postStats:d}=iN(),u=Oo(),c=(0,K.useMemo)(()=>n.slice().sort(rx).map(e=>{let t=i.findIndex(t=>t.column.id===e.id),a=i[t],r=r=>{let n=_G(a?.direction??null),i=a?t:0;o(e,n),d({name:"desc"===n?e5:e2,ui:u,context:e.id,index:i}),r.stopPropagation()},n=IS(e.dataType),l=i.length>1;return(0,F.jsxs)(fi.l.Item,{onSelect:e=>{ry(e),r(e)},selected:void 0!==a,...(0,ey.G)(`sort-by-${e.name}`),disabled:!rk(e.dataType),children:[(0,F.jsx)(fi.l.LeadingVisual,{children:(0,F.jsx)(n,{})}),e.name,void 0!==a&&(0,F.jsxs)("span",{className:"sr-only",children:["(",l?`${_V(t)} `:"","sort:"," ","asc"===a.direction?"ascending":"descending",")"]}),void 0!==a&&(0,F.jsx)(fi.l.TrailingVisual,{children:(0,F.jsx)(HP,{direction:a.direction,index:l?t:void 0})})]},e.id)}),[n,i,o,d,u]),m=(0,K.useCallback)(()=>{s(),e(!1)},[s,e]);return(0,F.jsxs)(fi.l,{id:t,selectionVariant:"single","aria-labelledby":a,"aria-describedby":r,children:[c,(0,F.jsxs)(fi.l.Item,{selected:!l,onSelect:m,...(0,ey.G)("sort-by-none"),children:[(0,F.jsx)(fi.l.LeadingVisual,{children:(0,F.jsx)(ly.XIcon,{})}),"No sorting"]},"sort-by-none")]})});try{UF.displayName||(UF.displayName="SortByMenu")}catch{}try{UO.displayName||(UO.displayName="Options")}catch{}try{(L=Icon).displayName||(L.displayName="Icon")}catch{}let UG=(0,K.memo)(function({id:e,open:t,setOpen:a,anchorRef:r}){return(0,F.jsx)(Ux,{open:t,setOpen:a,anchorRef:r,children:(0,F.jsx)(UV,{id:e,setOpen:a},String(t))})}),UV=(0,K.memo)(function({id:e,setOpen:t}){let{groupedByColumn:a,setGroupedBy:r}=ue();return(0,F.jsx)(Ub,{id:e,groupedByColumn:a,setGroupedBy:r,setOpen:t,isValidGroupByColumn:da,title:"Column by"})});try{UG.displayName||(UG.displayName="VerticalGroupByMenu")}catch{}try{UV.displayName||(UV.displayName="VerticalGroupByMenuOptions")}catch{}function U$(){let{isVisibleFieldsDirty:e}=TI(),{hasWritePermissions:t}=eK();return(0,F.jsx)(D$,{isDirty:e,hideDirtyState:!t,children:(0,F.jsx)(ly.NoteIcon,{})})}function UW(){let{isGroupedByDirty:e}=d7(),{hasWritePermissions:t}=eK();return(0,F.jsx)(D$,{isDirty:e,hideDirtyState:!t,children:(0,F.jsx)(ly.RowsIcon,{})})}function Uz(){let{isGroupedByDirty:e}=ue(),{hasWritePermissions:t}=eK();return(0,F.jsx)(D$,{isDirty:e,hideDirtyState:!t,children:(0,F.jsx)(ly.ColumnsIcon,{})})}function UH(){let{isSortedByDirty:e}=un(),{hasWritePermissions:t}=eK();return(0,F.jsx)(D$,{isDirty:e,hideDirtyState:!t,children:(0,F.jsx)(lw.A,{icon:ly.ArrowBothIcon,sx:{transform:"rotate(90deg)"}})})}function UU(){let{isAggregationSettingsDirty:e}=Sq(),{hasWritePermissions:t}=eK();return(0,F.jsx)(D$,{isDirty:e,hideDirtyState:!t,...(0,ey.G)("aggregation-settings-dirty"),children:(0,F.jsx)(ly.NumberIcon,{})})}let Uq=()=>{let{hasWritePermissions:e}=eK(),{isRoadmapDateFieldsDirty:t}=ko();return(0,F.jsx)(D$,{isDirty:t,hideDirtyState:!e,...(0,ey.G)("roadmap-date-fields-dirty"),children:(0,F.jsx)(ly.CalendarIcon,{})})},UK=()=>{let{hasWritePermissions:e}=eK(),{isRoadmapZoomLevelDirty:t}=ko();return(0,F.jsx)(D$,{isDirty:t,hideDirtyState:!e,...(0,ey.G)("roadmap-zoom-level-dirty"),children:(0,F.jsx)(ly.ZoomInIcon,{})})};function UQ(){let{isSliceByDirty:e}=nA(),{hasWritePermissions:t}=eK();return(0,F.jsx)(D$,{isDirty:e,hideDirtyState:!t,children:(0,F.jsx)(Om,{})})}try{U$.displayName||(U$.displayName="VisibleFieldsLeadingVisual")}catch{}try{UW.displayName||(UW.displayName="GroupLeadingVisual")}catch{}try{Uz.displayName||(Uz.displayName="VerticalGroupLeadingVisual")}catch{}try{UH.displayName||(UH.displayName="SortLeadingVisual")}catch{}try{UU.displayName||(UU.displayName="AggregationLeadingVisual")}catch{}try{Uq.displayName||(Uq.displayName="RoadmapDateFieldsDirtyIcon")}catch{}try{UK.displayName||(UK.displayName="RoadmapZoomLevelIcon")}catch{}try{UQ.displayName||(UQ.displayName="SlicerLeadingVisual")}catch{}function UJ(e){return{hideIf:()=>!1,...e}}let UX=UJ({icon:UQ,title:"Slice by",MenuComponent:Od,testId:"slice-by-menu",useHasValue:()=>{let{sliceField:e}=nA();return!!e},TextContent(){let{sliceField:e}=nA();return(0,F.jsx)(qn,{active:!!e,title:"Slice by",children:e?e.name:"none"})}}),UY=UJ({icon:U$,title:"Fields",MenuComponent:Hz,testId:"add-field-menu",useHasValue:()=>{let{visibleFields:e}=TI();return e.length>0},TextContent(){let{visibleFields:e}=TI();return(0,F.jsx)(qn,{active:e.length>0,title:"Fields",children:nO(e.map(e=>e.name))})}}),UZ=UJ({icon:UW,title:"Group by",MenuComponent:Uv,testId:"group-by-menu",useHasValue:()=>{let{groupedByColumn:e}=d7();return!!e},TextContent(){let{groupedByColumn:e}=d7();return(0,F.jsx)(qn,{active:!!e,title:"Group by",children:e?e.name:"none"})}}),U0=UJ({icon:UH,title:"Sort by",MenuComponent:UF,testId:"sort-by-menu",useHasValue:()=>{let{isSorted:e}=un();return e},TextContent(){let{sorts:e,isSorted:t}=un();return(0,F.jsx)(qn,{active:t,title:"Sort by",children:t?e.map((t,a)=>(0,F.jsxs)(K.Fragment,{children:[(0,F.jsx)(HP,{direction:t.direction})," ",t.column.name,(0,F.jsx)("span",{className:"sr-only",children:"asc"===t.direction?" (ascending)":" (descending)"}),a!==e.length-1&&", "]},t.column.id)):"manual"})}}),U1=UJ({icon:UU,title:"Field sum",MenuComponent:Ug,testId:"field-sum-menu",useHasValue:()=>{let{sum:e,hideItemsCount:t}=Sq();return!!e[0]||!t},TextContent(){let{hideItemsCount:e,sum:t}=Sq(),a=e?"":"Count";if(t.length){let e=t[0];null!=e&&(a+=`${a?", ":""}${e.name}`),t.length>1&&(a+=` and ${t.length-1} more`)}return(0,F.jsx)(qn,{active:!!a,title:"Field sum",children:a||"none"})}}),U2=UJ({...U1,hideIf:({currentView:e})=>!!e&&0===e.localViewState.groupBy.length}),U5=UJ({icon:Uz,title:"Column by",MenuComponent:UG,testId:"column-by-menu",useHasValue:()=>!0,TextContent(){let{groupedByColumn:e}=ue();return(0,F.jsx)(qn,{active:!!e,title:"Column by",children:e?e.name:"none"})}}),U3=UJ({...UZ,MenuComponent:Uk,TextContent(){let{groupedByColumn:e}=d7();return(0,F.jsx)(qn,{active:!!e,title:"Group by",children:e?e.name:"none"})}}),U4=UJ({icon:UR,title:"Marker fields",MenuComponent:UD,testId:"markers-menu",useHasValue:()=>{let{markerFields:e}=ko();return e.length>0},TextContent(){let{markerFields:e}=ko(),t=e.length>0;return(0,F.jsx)(qn,{active:t,title:"Markers",children:t?nO(e.map(e=>e.name)):"none"})}}),U6=UJ({icon:Uq,title:"Dates",MenuComponent:Uj,testId:"date-fields-menu",useHasValue:()=>{let{dateFields:e}=ko();return new Set(e.filter(S7).map(e=>e.name)).size>0},TextContent(){let{dateFields:e}=ko(),t=nO(Array.from(new Set(e.filter(S7).map(e=>e.name))).filter(e=>!!e));return(0,F.jsx)(qn,{active:!!t,title:"Dates",children:t||"none"})}}),U8=UJ({icon:UK,title:"Zoom level",MenuComponent:UE,testId:"zoom-level",useHasValue:()=>!0,TextContent(){let e=kf();return(0,F.jsx)(qn,{active:!0,title:"Zoom level",children:n6.zoomLevelOptions[e]})}}),U7={[lK.Table]:[UY,UZ,U0,U2,UX],[lK.Board]:[UY,U5,UZ,U0,U1,UX],[lK.Roadmap]:[U3,U4,U0,U6,U8,U2,UX]},U9=[U4,U0,U6,U8],qe={display:"flex",justifyContent:"space-between",whiteSpace:"nowrap",width:"100%",maxWidth:"100%"},qt={color:"fg.muted",fontStyle:"normal"},qa={maxWidth:"150px",overflow:"hidden",textOverflow:"ellipsis",fontStyle:"normal"},qr={...qa,fontStyle:"italic"};function qn({title:e,active:t,children:a}){return(0,F.jsxs)(lv.A,{sx:qe,children:[(0,F.jsxs)(lv.A,{sx:qt,children:[e,": "]}),(0,F.jsx)(lv.A,{sx:t?qa:qr,children:a})]})}try{qn.displayName||(qn.displayName="ListItemContent")}catch{}let qi=(0,K.memo)((0,K.forwardRef)(({title:e,testId:t,children:a,disabled:r,icon:n,onSelect:i},l)=>(0,F.jsxs)(fi.l.Item,{ref:l,disabled:r,...(0,ey.G)(`view-options-menu-item-${t}`),onSelect:t=>{i(e),t.preventDefault()},children:[(0,F.jsx)(fi.l.LeadingVisual,{children:(0,F.jsx)(n,{})}),a,(0,F.jsx)(fi.l.TrailingVisual,{children:(0,F.jsx)(ly.ChevronRightIcon,{})})]}))),ql=(0,K.memo)((0,K.forwardRef)(({onSelect:e,selectedOption:t},a)=>{let{viewType:r}=ma(),{currentView:n}=iS(),i=iz(),l=U7[r];return l&&n?(0,F.jsxs)(fi.l.Group,{variant:"subtle",children:[(0,F.jsx)(fi.l.GroupHeading,{children:"Configuration"}),l.map(r=>r.hideIf({currentView:n,enabledFeatures:i})?null:(0,K.createElement)(qi,{...r,ref:r.title===t?a:void 0,key:r.title,onSelect:e},(0,F.jsx)(r.TextContent,{})))]}):null})),qs=(0,K.memo)(function({currentMenu:e,setShowSubMenu:t,anchorRef:a}){let{viewType:r}=ma(),{currentView:n}=iS(),i=iz(),l=U7[r];return l&&n?(0,F.jsx)(F.Fragment,{children:l.map(({MenuComponent:r,title:l,...s})=>s.hideIf({currentView:n,enabledFeatures:i})?null:(0,F.jsx)(r,{anchorRef:a,open:e===l,setOpen:e=>{t(e?l:null)}},l))}):null});try{qi.displayName||(qi.displayName="ListItem")}catch{}try{ql.displayName||(ql.displayName="ConfigurationItems")}catch{}try{qs.displayName||(qs.displayName="ConfigurationItemMenus")}catch{}var qo=a(16945);let qd=[{type:lK.Table,Icon:ly.TableIcon,title:"Table"},{type:lK.Board,Icon:ly.ProjectIcon,title:"Board"},{type:lK.Roadmap,Icon:ly.ProjectRoadmapIcon,title:"Roadmap"}],qu={px:3,py:1},qc={display:"block",color:"fg.muted",fontSize:0,fontWeight:"bold",py:2},qm=(0,K.memo)(function({view:e,setOpen:t}){let{isViewTypeDirty:a,viewType:r,setViewType:n}=ma(),{hasWritePermissions:i}=eK(),{postStats:l}=iN(),s=(0,K.useCallback)((e,t)=>(0,F.jsx)(D$,{isDirty:a,hideDirtyState:!t.selected||!i,children:(0,F.jsx)(e,{})}),[i,a]),o=(0,K.useCallback)(a=>{let r=qd[a];r&&(n(e,r.type,e0),l({name:e7,ui:e0,context:r.type}),t(!1))},[n,e,l,t]),d=(0,K.useId)(),u=(0,K.useId)();return(0,F.jsxs)(hM.A,{id:d,sx:qu,children:[(0,F.jsx)(hM.A.Label,{id:u,sx:qc,children:"Layout"}),(0,F.jsx)(qo.I,{"aria-labelledby":u,fullWidth:!0,onChange:o,...(0,ey.G)("view-options-menu-layout"),children:qd.map(e=>(0,F.jsx)(qo.I.Button,{leadingIcon:()=>s(e.Icon,{selected:r===e.type}),selected:r===e.type,...(0,ey.G)(`view-type-${e.type}`),children:e.title},e.type))})]})});try{qm.displayName||(qm.displayName="LayoutToggle")}catch{}let qp={display:"flex",alignItems:"center",justifyContent:"center",px:0,py:0,height:18,width:18},qh=({isViewStateDirty:e,children:t,onClick:a})=>{let{hasWritePermissions:r}=eK();return(0,F.jsx)(D$,{isDirty:e,hideDirtyState:!r,onClick:a,...e?(0,ey.G)("view-options-dirty"):void 0,children:t})},qf=(0,K.forwardRef)(function(e,t){let{isViewStateDirty:a}=iS(),{userNotices:r}=Uo(),n=(0,K.useRef)(null);return(0,K.useImperativeHandle)(t,()=>n.current),(0,F.jsx)(qh,{isViewStateDirty:a,onClick:e.onClick,children:(0,F.jsx)(fE.K,{tooltipDirection:r.memex_issue_types_rename_prompt?"nw":"sw",...e,ref:n,icon:ly.TriangleDownIcon,sx:qp,"aria-label":`View options for ${e.viewName}`,...(0,ey.G)("view-options-menu-toggle")})})});try{qh.displayName||(qh.displayName="DirtyViewIndicator")}catch{}try{qf.displayName||(qf.displayName="MenuAnchor")}catch{}let qg=()=>{let{roadmapTruncateTitles:e,roadmapShowDateFields:t}=_B();return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(qy,{option:e}),(0,F.jsx)(qy,{option:t})]})};function qy({option:e}){return(0,F.jsx)(fi.l.Item,{role:"menuitemcheckbox",selected:e.enabled,onSelect:e.toggleEnabled,children:e.label},e.name)}try{qg.displayName||(qg.displayName="RoadmapUserSettingsMenu")}catch{}try{qy.displayName||(qy.displayName="OptionsElement")}catch{}let qx=({close:e,selectedTab:t,returnRef:a})=>{let{views:r,updateViewPriority:n}=iS();return(0,F.jsx)(kS.Ux.Provider,{value:(0,K.useMemo)(()=>({dragIndex:null,overId:null,direction:"vertical",isInDragMode:!1,moveDialogItem:{title:t.name,index:r.findIndex(e=>e.id===t.id)},openMoveDialog:eC.l,moveToPosition:async(e,t,a)=>{let i;let l=r[e],s=r[t];if(!l||!s)return;a?i=r[t]:a||t===r.length-1||(i=r[t+1]);let o=e!==r.length-1?r[e+1]:void 0;await n(l.number,i?.id||"",i?.number,o?.number)},items:r.map(e=>({title:e.name,id:e.id}))}),[r,n,t]),children:(0,F.jsx)(kS.BS.SortableMoveDialog,{returnFocusRef:a,closeDialog:()=>{e()}})})},qb=(0,K.createContext)({setMoveTabDialogProps:()=>{}}),qv=()=>{let{setMoveTabDialogProps:e}=(0,K.useContext)(qb);return{setMoveTabDialogProps:e}};try{qx.displayName||(qx.displayName="MoveTabDialog")}catch{}try{qb.displayName||(qb.displayName="MoveTabDialogContext")}catch{}let qw=(0,K.memo)(function({returnFocusRef:e,view:t,handleRenameViewClick:a,handleDuplicateView:r,handleDestroyView:n,viewsLength:i}){let{setMoveTabDialogProps:l}=qv(),{views:s}=iS(),{memex_table_without_limits:o}=iz();return(0,F.jsxs)(F.Fragment,{children:[t.isDeleted?null:(0,F.jsxs)(fi.l.Item,{...(0,ey.G)("view-options-menu-item-rename-view"),onSelect:a,children:[(0,F.jsx)(fi.l.LeadingVisual,{children:(0,F.jsx)(ly.PencilIcon,{})}),"Rename view"]}),o&&s.length>1?(0,F.jsxs)(fi.l.Item,{onSelect:()=>{l({selectedTab:t,returnRef:e})},"aria-label":`Move ${t.name}`,...(0,ey.G)("view-options-advanced-move-dialog"),children:[(0,F.jsx)(fi.l.LeadingVisual,{children:(0,F.jsx)(ly.GrabberIcon,{})}),"Move view"]}):null,(0,F.jsxs)(fi.l.Item,{...(0,ey.G)("view-options-menu-item-duplicate-view"),onSelect:r,children:[(0,F.jsx)(fi.l.LeadingVisual,{children:(0,F.jsx)(ly.VersionsIcon,{})}),nH.duplicateView({isDirty:t.isViewStateDirty})]}),(0,F.jsxs)(fi.l.Item,{...(0,ey.G)("view-options-menu-item-delete-view"),onSelect:n,disabled:i<=1,variant:"danger",children:[(0,F.jsx)(fi.l.LeadingVisual,{children:(0,F.jsx)(ly.TrashIcon,{})}),t.isDeleted?"Remove deleted view":"Delete view"]})]})});try{qw.displayName||(qw.displayName="ViewActionItems")}catch{}let qj={Footer:"view-changes-button-module__Footer--umFSU"};function qC({view:e,setOpen:t}){let{hasWritePermissions:a}=eK(),{saveCurrentViewState:r,resetViewState:n}=iS(),i=(0,K.useCallback)(async()=>{await r(e.number,{ui:e0}),t(!1)},[r,t,e.number]),l=(0,K.useCallback)(async()=>{n(e.number,{ui:e0}),t(!1)},[n,t,e.number]);return(0,F.jsxs)(IW.B,{direction:"horizontal",justify:"end",gap:"condensed",padding:"normal",className:qj.Footer,children:[(0,F.jsx)(p4.Q,{onClick:l,...(0,ey.G)("view-options-menu-reset-changes-button"),children:nH.discardChanges}),a&&!e.isDeleted?(0,F.jsx)(p4.Q,{variant:"primary",onClick:i,disabled:!e.isViewStateDirty,...(0,ey.G)("view-options-menu-save-changes-button"),children:nH.saveChanges}):null]})}try{qC.displayName||(qC.displayName="ViewChangeButtons")}catch{}let qI={overflow:"auto"},qS=(0,K.memo)(function({view:e,viewOptionMenuTriggerRef:t,showViewOptionsMenu:a}){let{hideUserNotice:r}=Uo(),[n,i]=(0,K.useState)(!1),[l,s]=(0,K.useState)(null),{clientHeight:o}=vj({onResize:()=>{n&&((0,pN.flushSync)(()=>{i(!1)}),i(!0))}}),{query:d}=lh(),{views:u,currentView:c,duplicateCurrentViewState:m,destroyCurrentView:p}=iS(),{hasWritePermissions:h}=eK(),{anchorRef:f}=Fh(),g=(0,K.useRef)(null);(0,K.useEffect)(()=>{n&&s(null)},[n]);let y=(0,K.useCallback)(async()=>{p(e.number,{ui:e0},()=>{i(!1),f.current?.focus()})},[p,e.number,f]),x=(0,K.useCallback)(async()=>{c&&(await m(c.number,void 0,{ui:e0}),i(!1))},[c,m]),b=(0,K.useCallback)(()=>{i(!1),s("rename-view")},[]);(0,K.useImperativeHandle)(t,()=>f.current);let{isCommandPaletteVisible:v}=Uf(),w=Uh(),j=mK();return(0,F.jsxs)(lx.A,{sx:{position:"relative"},children:[(0,F.jsx)(qf,{ref:f,onClick:()=>{r("memex_issue_types_rename_prompt"),i(e=>!e)},viewName:e.name,open:n}),(0,F.jsx)(yu.W,{anchorRef:f,open:n&&!v,onOpenChange:(0,K.useCallback)(e=>i(e),[]),children:(0,F.jsxs)(yu.W.Overlay,{...(0,ey.G)("view-options-menu-modal"),width:"medium",sx:qI,style:{maxHeight:o},children:[(0,F.jsx)(qm,{view:e,setOpen:i}),(0,F.jsxs)(fi.l,{className:"pt-0",children:[(0,F.jsx)(fi.l.Divider,{}),(0,F.jsx)(ql,{selectedOption:"rename-view"===l?null:l,onSelect:e=>{s(e)},ref:g}),(0,F.jsx)(qs,{anchorRef:g,currentMenu:"rename-view"===l?null:l,setShowSubMenu:s}),e.localViewState.layout===l$.Roadmap?(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(fi.l.Divider,{}),(0,F.jsxs)(fi.l.Group,{selectionVariant:"multiple",children:[(0,F.jsx)(fi.l.GroupHeading,{children:"User settings"}),(0,F.jsx)(qg,{})]})]}):null,h?(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(fi.l.Divider,{}),(0,F.jsx)(fi.l.Group,{children:(0,F.jsxs)(fi.l.LinkItem,{as:cW,...(0,ey.G)("view-options-menu-item-show-insights"),to:{pathname:li.generatePath(j),search:d?`${new URLSearchParams({filterQuery:d})}`:void 0},children:[(0,F.jsx)(fi.l.LeadingVisual,{children:(0,F.jsx)(ly.GraphIcon,{})}),"Generate chart"]})})]}):null,h?(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(fi.l.Divider,{}),(0,F.jsx)(qw,{returnFocusRef:f,handleRenameViewClick:b,handleDuplicateView:x,handleDestroyView:y,viewsLength:u.length,view:e})]}):null,(0,F.jsx)(fi.l.Divider,{}),(0,F.jsxs)(fi.l.Item,{onSelect:w,children:[(0,F.jsx)(fi.l.LeadingVisual,{children:(0,F.jsx)(ly.DownloadIcon,{})}),"Export view data"]})]}),e.isViewStateDirty?(0,F.jsx)(F.Fragment,{children:(0,F.jsx)(qC,{setOpen:i,view:e})}):null]})}),c?(0,F.jsx)(qN,{anchorRef:f,open:"rename-view"===l,setOpen:e=>s(()=>e?"rename-view":null),view:c,showViewOptionsMenu:a},e.id):null]})}),qk=e=>{e.stopPropagation()},qN=(0,K.memo)(function({open:e,setOpen:t,anchorRef:a,view:r,showViewOptionsMenu:n}){let{renameView:i}=iS(),[l,s]=(0,xX.N)(r.name),{hasWritePermissions:o}=eK(),d=(0,K.useRef)(null),u=(0,K.useCallback)(()=>{s(r.name)},[s,r.name]),c=(0,K.useCallback)(async e=>{switch(e.key){case"Enter":l.trim().length>0&&l!==r.name&&(await i(r.number,l,{ui:e0}),t(!1),n?.()),e.preventDefault();break;case"Escape":u()}},[l,r.name,r.number,i,t,n,u]),m=(0,xJ._)(c),p=(0,K.useCallback)(e=>{s(e.target.value)},[s]);return e?(0,F.jsx)(Cw.l,{title:"Rename view",width:"small",initialFocusRef:d,returnFocusRef:a,onClose:()=>{t(!1)},footerButtons:[{content:nH.cancelChanges,onClick:e=>{e.preventDefault(),u(),t(!1)}},{content:nH.saveChanges,buttonType:"primary",onClick:async e=>{e.preventDefault(),0!==l.trim().length&&l!==r.name&&(await i(r.number,l,{ui:e0}),t(!1),n?.())}}],children:(0,F.jsxs)(hM.A,{children:[(0,F.jsx)(hM.A.Label,{children:"View name"}),(0,F.jsx)(br,{fullWidth:!0,children:(0,F.jsx)(gp.A,{ref:d,block:!0,autoComplete:"off",value:l,onChange:p,onMouseDown:qk,disabled:!o||r.isDeleted,...m})}),0===l.trim().length?(0,F.jsx)(hM.A.Validation,{variant:"error",children:nH.viewNameRequired}):null]})}):null});try{qS.displayName||(qS.displayName="ViewOptionsMenu")}catch{}try{qN.displayName||(qN.displayName="RenameViewMenu")}catch{}let qT={...qp,backgroundColor:"canvas.subtle",borderRadius:2,borderColor:"border.subtle",borderWidth:"1px",borderStyle:"solid",visibility:"visible",opacity:1},q_={[lK.Board]:ly.ProjectIcon,[lK.List]:ly.ProjectIcon,[lK.Roadmap]:ly.ProjectRoadmapIcon,[lK.Table]:ly.TableIcon},qA=(e,t)=>t?ly.TrashIcon:q_[e],qR=({selected:e,viewLayout:t,isDeleted:a})=>(0,F.jsx)(lw.A,{icon:qA(lY(t),a),sx:{color:a?"fg.subtle":e?"fg.default":"fg.muted"}}),qP={display:"flex",maxWidth:"100%",width:"100%",gap:2,position:"relative","&::after, &::before":{content:'""',display:"none",position:"absolute",top:"-8px",width:"4px",bg:"accent.emphasis",height:"calc(100% + 16px)",border:0,borderRadius:"6px",zIndex:12},"body.is-dragging &.show-sash-view.show-sash-after":{"&::after":{right:"-20px",display:"block"},"&.selected::after":{right:"-20px"}},"body.is-dragging &.show-sash-view.show-sash-before":{"&::before":{left:"-18px",display:"block"},"&.selected::before":{right:"-21px"}}},qD=(0,K.forwardRef)(function({view:e,selected:t,viewOptionMenuTriggerRef:a,hideViewOptionsMenu:r,showViewOptionsMenu:n,setViewOptionsPlaceholderRef:i},l){let s=(0,K.useRef)(null);(0,K.useImperativeHandle)(l,()=>s.current);let o=(0,K.useRef)(null),{renameView:d}=iS(),[u,c]=(0,xX.N)(e.name),[m,p]=(0,K.useState)(!1),{hasWritePermissions:h}=eK(),f=(0,K.useRef)(null),g=(0,K.useRef)(null),y=(0,g7.d)(n,500,{trailing:!0,leading:!1});(0,K.useEffect)(()=>{t&&g.current&&i(g.current)},[t,i]);let x=(0,K.useMemo)(()=>({id:e.id,number:e.number}),[e.id,e.number]),b=Fe({dragAxis:"horizontal",dragID:`${e.number}`,dragType:"view",dragIndex:e.number,dragRef:o,disable:!h,metadata:x});(0,K.useEffect)(()=>{m&&f.current?.focus()},[m,f]);let v=(0,K.useCallback)(e=>{t&&(!e||2===e.detail)&&h&&p(!0)},[h,t]),w=(0,K.useCallback)(()=>{p(!1)},[p]),j=(0,K.useCallback)(e=>{r(),c(e.target.value),y()},[y,r,c]),C=(0,K.useCallback)(e=>{e.stopPropagation()},[]),I=(0,K.useCallback)(()=>{c(e.name)},[c,e.name]),S=(0,K.useCallback)(t=>{switch(t.key){case"Enter":m||v(),u.trim().length>0&&u!==e.name&&d(e.number,u,{ui:e0}),t.preventDefault(),(0,pN.flushSync)(()=>{w()}),a.current?.focus();break;case"Escape":I(),m&&w()}},[m,u,e.name,e.number,a,v,d,w,I]),k=(0,xJ._)(S),N=(0,K.useCallback)(()=>{document.hasFocus()&&(0===u.trim().length?I():d(e.number,u,{ui:e0}),w())},[u,I,w,d,e.number]),T=t&&m;return(0,F.jsxs)(lx.A,{className:(0,vB.$)({selected:t}),ref:o,...b.props,sx:qP,...b.handle.props,children:[(0,F.jsx)("div",{children:(0,F.jsx)(qR,{selected:t,viewLayout:e.localViewState.layout,isDeleted:e.isDeleted})}),(0,F.jsx)(lx.A,{onClick:v,sx:h&&T?{px:1,ml:-1,"&:focus-within":{boxShadow:"primer.shadow.focus",borderRadius:"2"},"&:hover:not(:focus-within)":{boxShadow:"primer.shadow.focus",borderRadius:"2"}}:{pl:1,ml:-1,overflow:"hidden"},children:T?(0,F.jsx)(br,{children:(0,F.jsx)(gg,{as:gx,ref:f,sx:{fontSize:1},autoComplete:"off",value:u,onChange:j,onMouseDown:C,onBlur:N,"aria-label":"Change view name",disabled:!h||e.isDeleted,...k,...(0,ey.G)("view-name-input")})}):(0,F.jsx)(lv.A,{ref:s,sx:{display:"inline-block",color:t?"fg.default":"fg.muted","&:hover":{color:"fg.default"},whiteSpace:"nowrap",maxWidth:"100%",pr:t?"6px":0},...(0,ey.G)("view-name-static"),children:u})}),t?(0,F.jsx)(lx.A,{ref:g,sx:qT,...(0,ey.G)("view-options-placeholder"),children:(0,F.jsx)(ly.TriangleDownIcon,{})}):null]})});try{qR.displayName||(qR.displayName="ViewTypeIcon")}catch{}try{qD.displayName||(qD.displayName="ViewTab")}catch{}let qE=e=>{let[t,a]=(0,K.useState)(null);return(0,F.jsx)(qb.Provider,{value:(0,K.useMemo)(()=>({setMoveTabDialogProps:a}),[a]),children:(0,F.jsxs)(L9,{children:[t&&(0,F.jsx)(qx,{close:()=>{let e=t.returnRef;a(null),e.current?.focus()},...t}),(0,F.jsx)(qM,{...e})]})})},qM=(0,K.memo)(function({projectViewId:e,onFocusIntoCurrentView:t}){let{views:a,viewsMap:r,currentView:n,setCurrentViewNumber:i,updateViewPriority:l}=iS(),{projectLimits:{viewsLimit:s}}=eU(),{hasWritePermissions:o}=eK(),{userNotices:d}=Uo(),u=(0,K.useRef)(null),c=(0,K.useRef)(null),m=(0,K.useRef)(null),p=(0,K.useRef)(null),h=(0,K.useRef)(null),f=H0(),g=(0,K.useCallback)(()=>{p.current&&(p.current.style.display="none",p.current.style.left="0px"),m.current&&(m.current.style.visibility="visible",m.current.style.opacity="1")},[]),y=(0,K.useCallback)(()=>{(f?requestAnimationFrame:setTimeout)(()=>{m.current&&p.current&&h.current&&(p.current.style.display="flex",p.current.style.left=`${h.current.scrollLeft-h.current.getBoundingClientRect().left+m.current.getBoundingClientRect().left}px`,m.current.style.visibility="hidden",m.current.style.opacity="0")})},[f]);(0,K.useEffect)(()=>{g(),y()},[g,y,a]),ki({onResize:()=>{g(),y()}});let x=Ft({dropID:"views",dropType:"view",dropRef:u,onDrop:(0,K.useCallback)(async({dragMetadata:e,dropMetadata:t,side:n})=>{let i;if(!o||!t||!e)return;let s=r[e.number],d=a.findIndex(t=>t.id===e?.id),u=a.findIndex(e=>e.id===t?.id);if(!s||d===u||("before"===n?i=a[u]:"after"===n&&u!==a.length-1&&(i=a[u+1]),s.number===i?.number))return;let c=d!==a.length-1?a[d+1]:void 0;await l(s.number,i?.id||"",i?.number,c?.number),y()},[o,r,a,l,y])}),b=(0,K.useCallback)(e=>{fA(e)===fN.ARROW_DOWN&&(e.preventDefault(),t())},[t]),v=(0,K.useMemo)(()=>{var e,t;let a={};return r=>(e=a)[t=r]??(e[t]={current:null})},[]);(0,K.useEffect)(()=>{let e=n&&v(n.number).current,t=h.current;e&&t&&function(e,t,{direction:a="xy"}={}){let r=e.getBoundingClientRect(),n=t.getBoundingClientRect();a.includes("y")&&(n.top<r.top?e.scrollTop-=r.top-n.top:n.bottom>r.bottom&&(e.scrollTop+=n.bottom-r.bottom)),a.includes("x")&&(n.left<r.left?e.scrollLeft-=r.left-n.left:n.right>r.right&&(e.scrollLeft+=n.right-r.right))}(t,e,{direction:"x"})},[v,n]);let w=(0,K.useCallback)(e=>{m.current=e,y()},[y]);return(0,F.jsxs)(lx.A,{ref:h,sx:{position:"relative",overflowX:"auto",overflowY:"hidden",backgroundColor:"canvas.inset",boxShadow:e=>`inset -1px -1px 0px 0px ${e.colors.border.default}`},children:[(0,F.jsx)(lx.A,{...x.props,ref:u,sx:{width:"fit-content",pl:[3,4,5]},children:(0,F.jsxs)(Ue.A,{"aria-label":"Select view",sx:{isolation:"isolate",'& [role="tablist"]':{overflow:"hidden"},"> nav":{borderBottom:"none"},"& .TabNav-item:not(.selected):not(:first-child):not(.TabNav-item.selected + .TabNav-item)::before":{content:'""',position:"absolute",backgroundColor:"border.muted",width:"1.5px",height:"19px",top:"50%",right:"100%",transform:"translateY(-50%)"},"& .TabNav-item.TabNav-item-truncate:not(.selected)::after":{content:"''",position:"absolute",right:1,top:"50%",width:"30px",height:"21px",transform:"translateY(-50%)",backgroundImage:e=>`linear-gradient(to right, transparent, ${e.colors.canvas.inset} 75%, ${e.colors.canvas.inset} 50%, ${e.colors.canvas.inset} 25%)`}},...(0,ey.G)("tab-nav"),children:[a.map(t=>{let a=t.number===n?.number;return(0,F.jsx)(qO,{ref:v(t.number),selected:a,projectViewId:e,onTabChange:e=>{e.preventDefault(),a||(i(t.number,{ui:tt}),g())},view:t,onKeyDown:a?b:void 0,setViewOptionsPlaceholderRef:w,viewOptionMenuTriggerRef:c,showViewOptionsMenu:y,hideViewOptionsMenu:g},t.number)}),o&&a.length<s&&(0,F.jsx)(qL,{})]})}),n?(0,F.jsxs)(lx.A,{sx:{position:"absolute",top:"9px",left:0,display:"none"},ref:p,...(0,ey.G)("view-options-menu"),children:[(0,F.jsx)(Os.Provider,{value:e0,children:(0,F.jsx)(qS,{viewOptionMenuTriggerRef:c,view:n,showViewOptionsMenu:y})}),d.memex_issue_types_rename_prompt&&(0,F.jsx)(Um,{anchorRef:p})]}):null]})}),qB={"&:hover":{color:"fg.default"},overflow:"hidden",whiteSpace:"nowrap",color:"fg.muted",alignSelf:"center",mr:[3,4,5]};function qL(){let{createNewDefaultView:e,duplicateCurrentViewState:t,currentView:a}=iS();return(0,F.jsxs)(yu.W,{children:[(0,F.jsx)(yu.W.Button,{...(0,ey.G)("view-navigation-create-new-view"),role:"tab",sx:qB,variant:"invisible",leadingVisual:ly.PlusIcon,trailingAction:null,children:"New view"}),(0,F.jsx)(yu.W.Overlay,{...(0,ey.G)("view-navigation-create-new-view-overlay"),children:(0,F.jsxs)(fi.l,{children:[(0,F.jsxs)(fi.l.Group,{children:[(0,F.jsx)(fi.l.GroupHeading,{children:"Layout"}),(0,F.jsxs)(fi.l.Item,{onSelect:()=>e({layout:l$.Table},{ui:tt}),children:[(0,F.jsx)(fi.l.LeadingVisual,{children:(0,F.jsx)(ly.TableIcon,{})}),"Table"]}),(0,F.jsxs)(fi.l.Item,{onSelect:()=>e({layout:l$.Board},{ui:tt}),children:[(0,F.jsx)(fi.l.LeadingVisual,{children:(0,F.jsx)(ly.ProjectIcon,{})}),"Board"]}),(0,F.jsxs)(fi.l.Item,{onSelect:()=>e({layout:l$.Roadmap},{ui:tt}),children:[(0,F.jsx)(fi.l.LeadingVisual,{children:(0,F.jsx)(ly.ProjectRoadmapIcon,{})}),"Roadmap"]})]}),a?(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(fi.l.Divider,{}),(0,F.jsxs)(fi.l.Item,{onSelect:()=>{t(a.number,void 0,{ui:tt})},children:[(0,F.jsx)(fi.l.LeadingVisual,{children:(0,F.jsx)(ly.CopyIcon,{})}),nH.duplicateView({isDirty:a.isViewStateDirty})]})]}):null]})})]})}let qF=(0,K.forwardRef)(function({sx:e,...t},a){return(0,F.jsx)(Ud,{...t,ref:a})}),qO=(0,K.forwardRef)(function({selected:e,onTabChange:t,view:a,projectViewId:r,viewOptionMenuTriggerRef:n,setViewOptionsPlaceholderRef:i,hideViewOptionsMenu:l,showViewOptionsMenu:s,onKeyDown:o},d){let{hasWritePermissions:u}=eK(),c=(0,K.useRef)(null),m=(0,K.useSyncExternalStore)(Ut,()=>(function(e){if(!e)return!1;let t=e.style.overflow;t&&"visible"!==t||(e.style.overflow="hidden");let a=e.offsetWidth<e.scrollWidth;return e.style.overflow=t,a})(c.current)),p=mK();return(0,F.jsxs)(Ue.A.Link,{ref:d,className:m&&!e?"TabNav-item-truncate":"",selected:e,"aria-selected":e?"true":void 0,as:qF,"aria-controls":e?r:void 0,to:e?void 0:i9.generatePath({...p,viewNumber:a.number}),sx:{position:"relative",cursor:"pointer",display:"flex",alignItems:"center",margin:0,flexGrow:1,width:"200px",maxWidth:"max-content",minWidth:e?"min-content":m?"140px":void 0,px:3,pr:e?void 0:3},title:a.name,onKeyDown:o,onClick:e=>{e.altKey||e.ctrlKey||e.metaKey||e.shiftKey||0!==e.button||t(e)},...(0,ey.G)("view-navigation-view-tab-link"),children:[(0,F.jsx)(qD,{ref:c,view:a,selected:e,viewOptionMenuTriggerRef:n,hideViewOptionsMenu:l,showViewOptionsMenu:s,setViewOptionsPlaceholderRef:i}),a.isViewStateDirty&&!e&&(0,F.jsx)(D$,{isDirty:!0,hideDirtyState:!u,sx:{top:"-5px",left:"-4px",zIndex:1}},`dirty-for-${a.number}`)]})});try{qE.displayName||(qE.displayName="ViewNavigation")}catch{}try{qM.displayName||(qM.displayName="ViewNavigationInner")}catch{}try{qL.displayName||(qL.displayName="NewViewMenu")}catch{}try{qF.displayName||(qF.displayName="TabNavLink")}catch{}try{qO.displayName||(qO.displayName="ViewNavigationTab")}catch{}let qG=e=>e.dataType!==eN.Title,qV=()=>{let{currentView:e}=iS(),{allColumns:t}=i5(),{setShowAddFieldModal:a}=Fc(),{toggleField:r,visibleFields:n}=TI(),{hasWritePermissions:i}=eK(),{isProjectViewRoute:l}=lu();eg(()=>{if(!l||!e)return null;let s=[];i&&s.push(["c","Create new field","field.create",()=>a(!0)]);let o=["m","Manage fields...",s];if(e.localViewState.layout===l$.Roadmap)return o;for(let[a,i]of Object.entries(t.filter(qG)))n.find(e=>e.id===i.id)?s.push([a,`Hide: ${i.name}`,"column.hide",()=>r(e.number,i,void 0,e6)]):s.push([a,`Show: ${i.name}`,"column.show",()=>r(e.number,i,void 0,e6)]);return o},[l,e,i,t,a,r,n])},q$=()=>{let{postStats:e}=iN(),{groupedByColumnId:t,setGroupedBy:a,clearGroupedBy:r}=d7(),{isProjectViewRoute:n}=lu(),{visibleFields:i}=TI(),{currentView:l}=iS(),s=(0,K.useCallback)(t=>{l&&(r(l.number),e({groupByEnabled:!1,memexProjectColumnId:t.id,key:e1,ui:e6}))},[r,l,e]),o=(0,K.useCallback)(t=>{l&&(a(l.number,t),e({groupByEnabled:!0,memexProjectColumnId:t.id,key:e1,ui:e6}))},[a,l,e]);eg(()=>{if(!n)return null;let e=[],a=["g","Group by...",e];for(let[a,r]of(t&&e.push(["g","Remove group by","grouping.clear",()=>i.map(e=>s(e))]),Object.entries(i.filter(e=>L$(e)))))r.id===t?e.push([a,`Ungroup by: ${r.name}`,"column.ungroup",()=>s(r)]):e.push([a,`Group by: ${r.name}`,"column.group",()=>o(r)]);return a},[n,t,i,o,s])},qW=()=>{let{postStats:e}=iN(),{viewType:t}=ma(),{sliceField:a,setSliceField:r,clearSliceField:n}=nA(),{isProjectViewRoute:i}=lu(),{allColumns:l}=i5(),{currentView:s}=iS(),o=(0,K.useCallback)(a=>{s&&(n(s.number),e({name:tw,memexProjectColumnId:a?.id,ui:e6,context:JSON.stringify({layout:t})}))},[n,s,e,t]),d=(0,K.useCallback)(a=>{s&&(r(s.number,a),e({name:tv,memexProjectColumnId:a.id,ui:e6,context:JSON.stringify({layout:t})}))},[s,r,e,t]);eg(()=>{if(!i)return null;let e=[],t=["h","Slice by...",e];for(let[t,r]of(a&&e.push(["h","Remove slice by","slicing.clear",o]),Object.entries(l.filter(e=>rE(e.dataType)).sort(rx))))r.id===a?.id?e.push([t,`Unslice by: ${r.name}`,"column.unslice",()=>o(r)]):e.push([t,`Slice by: ${r.name}`,"column.slice",()=>d(r)]);return t},[i,a,l,o,d])},qz=()=>{let{currentView:e}=iS(),{allColumns:t}=i5(),{visibleFields:a}=TI(),{getColumnSort:r,isSorted:n,clearSortedBy:i,setPrimarySortPreservingSecondary:l}=un(),{isProjectViewRoute:s}=lu(),{postStats:o}=iN(),d=(0,K.useMemo)(()=>t.slice().sort((e,t)=>(function(e,t,a){let r=a.findIndex(t=>t.id===e.id),n=a.findIndex(e=>e.id===t.id);return -1===r&&-1===n?e.name.localeCompare(t.name):-1===r&&n>-1?1:-1===n&&r>-1?-1:r-n})(e,t,a)),[t,a]),u=(0,K.useCallback)((t,a)=>{e&&(l(t,a),o({name:"desc"===a?e5:e2,ui:e6,context:t.id,index:0}))},[e,o,l]);eg(()=>{if(!s||!e)return null;let t=[],a=["s","Sort by...",t];for(let[e,a]of(n&&t.push(["s","Remove sort by","sorting.clear",()=>i()]),Object.entries(d))){let n=r(a),l=()=>u(a,"asc"),s=()=>u(a,"desc");n?"asc"===n.direction?t.push([e,`${nH.sortBy}: ${a.name}, desc`,"column.sort",s]):t.push([e,`${nH.unsortBy}: ${a.name}`,"column.unsort",()=>i()]):t.push([e,`${nH.sortBy}: ${a.name}, asc`,"column.sort",l])}return a},[s,e,n,i,d,r,u])},qH="roadmap-pill-area",qU={Header:"",id:qH,width:50,canSort:!1,nonNavigable:!1,canBeShifted:!1,canReorder:!1,Placeholder:"",Cell:"",CellEditor:""},qq=e=>[...e,qU];var qK=a(4883);let qQ=(0,K.createContext)(null),qJ=()=>{let e=(0,K.useContext)(qQ);if(null===e)throw Error("useRoadmapDateFieldsMenu must be used within a RoadmapDateFieldsMenuContext");return e},qX=(0,K.createContext)(null),qY=(0,K.createContext)(null),qZ=(0,K.createContext)(null),q0=(0,K.createContext)(null),q1=(0,K.createContext)(null),q2=(0,K.createContext)(null),q5={month:{columnWidth:48,timeRangeMonths:6},quarter:{columnWidth:16,timeRangeMonths:18},year:{columnWidth:4,timeRangeMonths:72}},q3=(0,K.memo)(function({children:e}){let t=(0,K.useMemo)(()=>nV(new Date),[]),a=kc(),r=kf(),{disableDateFieldsPopover:n}=kd(),[i,l]=(0,K.useState)(r),s=(0,K.useMemo)(()=>q5[i].columnWidth,[i]),[{timeRangeStart:o,timeRangeEnd:d},u]=(0,K.useState)(()=>({timeRangeStart:nV((0,qK.P)(t,-q5[r].timeRangeMonths)),timeRangeEnd:nV((0,qK.P)(t,q5[r].timeRangeMonths))})),c=(0,K.useRef)(null),m=(0,K.useRef)(null),p=(0,K.useMemo)(()=>Math.abs((0,tV.c)(d,o)),[d,o])*s,h=(0,K.useCallback)(e=>{let t=d.getTime()-o.getTime();return 0+(e.getTime()-o.getTime())/t*(p-0)},[p,0,d,o]),f=(0,K.useCallback)(e=>{if(c&&c.current){let t=c.current.getBoundingClientRect().left;return c.current.scrollLeft+e-t}return 0},[]),g=(0,K.useCallback)(e=>{let t=o.getTime();return new Date(new Date((d.getTime()-t)/p*e+t).setUTCHours(0,0,0,0))},[d,o,p]),y=(0,K.useCallback)(e=>{if(c&&c.current){let t=c.current.getBoundingClientRect().left;return g(c.current.scrollLeft+e-t)}},[g]),x=(0,K.useSyncExternalStore)((0,K.useCallback)(e=>{if(!c.current)return()=>void 0;let t=new ResizeObserver(e);return t.observe(c.current),()=>{t.disconnect()}},[]),(0,K.useCallback)(()=>c.current?.clientWidth??1,[c])),b=(0,K.useCallback)(()=>{if(c&&c.current){let e=c.current.scrollLeft+a;return{left:e,right:e+x-a}}return{left:0,right:0}},[a,x]),v=(0,g7.d)(e=>{w(e)},500),w=(0,K.useCallback)(e=>{let t=m.current;if(!t||t.completed){m.current=e;let t=e.zoomLevel||i;u({timeRangeStart:nV((0,qK.P)(e.date,-q5[t].timeRangeMonths)),timeRangeEnd:nV((0,qK.P)(e.date,q5[t].timeRangeMonths))})}},[i]),j=(0,K.useCallback)(()=>{v({date:d,direction:"next"})},[v,d]),C=(0,K.useCallback)(()=>{v({date:o,direction:"prev"})},[v,o]),I=(0,K.useCallback)(()=>{let e=(c.current?.clientWidth??window.innerWidth)-a;return Math.floor(a+1/3*e-s/2)},[a,s]),S=(0,K.useCallback)((e,t=!1)=>{if(c&&c.current){let a=h(e),r=I();a-r<1?w({date:e,direction:"prev"}):a+r>p-1?w({date:e,direction:"next"}):c.current?.scrollTo({left:a-r,behavior:t?"smooth":"auto"})}},[h,w,I,p]),k=(0,K.useCallback)((e=!1)=>{if(c&&c.current){let t=c.current.scrollLeft-a+c.current.offsetWidth-50;c.current?.scrollTo({left:t,behavior:e?"smooth":"auto"})}},[a]),N=(0,K.useCallback)((e=!1)=>{if(c&&c.current){let t=c.current.scrollLeft+a-c.current.offsetWidth+50;c.current?.scrollTo({left:t,behavior:e?"smooth":"auto"})}},[a]),[T,_]=(0,K.useState)(!1),A=(0,K.useCallback)(e=>{n(),_(e)},[n]),{allColumns:R}=i5(),{dateFields:P}=ko(),D=(0,K.useMemo)(()=>R.reduce((e,t)=>{if(oZ(t)){let a=aK(t).map(e=>{let{startDate:t,duration:a}=e,r=aH({startDate:t,duration:a});return{...e,start:r.startDate,end:r.endDate}});e[t.id]=a}return e},{}),[R]),E=(0,K.useCallback)((e,t)=>D[e.id]?.find(e=>t>=e.start&&t<=e.end),[D]),M=(0,K.useCallback)(e=>{let t=P[0]??lH,a=P[1]??lH,r={start:e,end:e};if(t!==lH&&oZ(t)){let n=E(t,e);n?(r.start=n.start,r.startIteration=n,a===lH&&(r.end=n.end,r.endIteration=n)):r.start=void 0}if(a!==lH&&oZ(a)){let n=E(a,e);n?(r.end=n.end,r.endIteration=n,t===lH&&(r.start=n.start,r.startIteration=n)):r.end=void 0}return r},[P,E]);(0,pk.N)(()=>{if(r!==i&&c&&c.current){let e=g(I()+c.current.scrollLeft);l(r),w({date:e,direction:"none",zoomLevel:r})}},[r,w,i,I,s,g]),(0,pk.N)(()=>{if(m.current&&c.current){let{date:e,direction:t,completed:a}=m.current;if(!a){let a=h(e),r="next"===t?c.current.offsetWidth:"prev"===t?0:I();c.current?.scrollTo({left:a-r})}}},[s,h,d,o,I]),(0,K.useEffect)(()=>{if(m.current&&c.current){let{date:e,completed:t}=m.current;t||(S(e,!0),m.current={...m.current,completed:!0})}},[S,d,o]);let[B,L]=(0,K.useState)(!1);return(0,F.jsx)(qZ.Provider,{value:M,children:(0,F.jsx)(qY.Provider,{value:b,children:(0,F.jsx)(qX.Provider,{value:(0,K.useMemo)(()=>({columnWidth:s,getX:h,getXFromClientX:f,getDateFromClientX:y,getDateFromX:g,timeRangeEnd:d,timeRangeStart:o,totalWidth:p,today:t}),[s,h,f,y,g,d,o,p,t]),children:(0,F.jsx)(q2.Provider,{value:L,children:(0,F.jsx)(q1.Provider,{value:B,children:(0,F.jsx)(q0.Provider,{value:(0,K.useMemo)(()=>({roadmapRef:c,scrollToDate:S,scrollToNextPage:k,scrollToPrevPage:N,shiftToNextRange:j,shiftToPrevRange:C}),[S,k,N,j,C]),children:(0,F.jsx)(qQ.Provider,{value:(0,K.useMemo)(()=>({isDateConfigurationMenuOpen:T,setOpenDateConfigurationMenu:A}),[T,A]),children:e})})})})})})})}),q4=()=>{let e=(0,K.useContext)(qX);if(null===e)throw Error("useRoadmapView must be used within a RoadmapViewContext");return e},q6=()=>{let e=(0,K.useContext)(qZ);return(0,ee.A)(null!=e,"useRoadmapGetTimeSpan must be used within a RoadmapGetTimeSpanContext"),e},q8=()=>{let e=(0,K.useContext)(qY);return(0,ee.A)(null!=e,"useRoadmapGetViewport must be used within a RoadmapGetViewportContext"),e},q7=()=>{let e=(0,K.useContext)(q0);if(null===e)throw Error("useRoadmapNavigation must be used within a RoadmapNavigationContext");return e},q9=()=>{let e=(0,K.useContext)(q1);return(0,ee.A)(null!==e),e},Ke=()=>{let e=(0,K.useContext)(q2);return(0,ee.A)(null!==e),e};try{q3.displayName||(q3.displayName="RoadmapViewProvider")}catch{}let Kt={CustomDate:"custom-date",Iteration:"iteration",IterationBreak:"iteration-break",Milestone:"milestone"},Ka=(0,K.createContext)(null),Kr=(0,K.createContext)(null),Kn=(0,K.createContext)(null),Ki=(0,K.memo)(function({children:e,rows:t}){let{dateFields:a,markerFields:r}=ko(),{timeRangeStart:n,timeRangeEnd:i}=q4(),{allColumns:l}=i5(),s=(0,K.useMemo)(()=>{let e=[];for(let t of r)o1(t)&&e.push(t);return e},[r]),o=!!r.find(e=>e.id===eT.Milestone),d=(0,K.useMemo)(()=>{let e=new Map;if(!o)return e;for(let a of t)!function(t){let a=t.getMilestone();if(!a?.dueDate)return;let r=new Date(a.dueDate);if(r<n||r>i)return;let l=e.get(a.dueDate)??new Map;e.set(a.dueDate,l.set(a.id,a))}(a.original);return e},[o,t,i,n]),u=(0,K.useMemo)(()=>t.map(e=>e.original),[t]),c=(0,K.useMemo)(()=>(function(e,t,a,r){let n=new Map;function i(e){for(let i of t){let t=e.getCustomField(i.id);if(t?.value){let l=tR(t.value),s=new Date(l);if(s<a||s>r)continue;n.set(l,{id:`${e.id}:${i.id}`,type:Kt.CustomDate,title:i.name,date:l})}}}for(let t of e){if("rows"in t){for(let e of t.rows)i(e);continue}i(t)}return n})(u,s,n,i),[s,u,i,n]),m=(0,K.useMemo)(()=>(function(e,t,a,r,n){let i=new Map,l=e.reduce((e,t)=>(oZ(t)&&e.push(t),e),[]),s=new Set(a.map(e=>e===lH?lH:e.databaseId)),o=new Set([...t.map(e=>e.databaseId)]);function d(e,t,a,l){let s=new Date(e);if(s>=r&&s<=n){let r=i.get(e);if(r){let t=r.options;t.push(l),i.set(e,{...r,title:`${t.length} iterations`,duration:r.duration>l.duration?r.duration:l.duration,options:t})}else i.set(e,{id:l.id,type:a,title:l.title,date:l.startDate,duration:l.duration,isDateField:t,options:[l]})}}for(let e of l)if(o.has(e.databaseId)){let t=aK(e).sort(aZ);for(let[a,r]of t.entries()){let n=function(e,t){let a=a3(e,t);if(void 0!==a)return{id:`break-${e?.id}-${t?.id}`,title:"Break",titleHtml:"Break",startDate:tR(a.startDate.toString()),duration:a.duration}}(t[a-1],r);void 0!==n&&d(n.startDate,s.has(e.databaseId),Kt.IterationBreak,n),d(r.startDate,s.has(e.databaseId),Kt.Iteration,r)}}return i})(l,r,a.filter(e=>e!==lH&&oZ(e)),n,i),[l,r,a,n,i]),p=(0,K.useMemo)(()=>(function(e){let t=new Map;for(let[a,r]of e.entries()){let e=[...r.values()],[n,i]=e.reduce((e,t)=>(e[0].push(t.title),e[1].push(`${t.title} (${t.repoNameWithOwner})`),e),[[],[]]);t.set(a,{id:`milestone:${a}`,type:Kt.Milestone,title:e.length>1?`${e.length} milestones`:nO(n),description:nO(i),date:a,options:e})}return t})(d),[d]),h=(0,K.useMemo)(()=>{let e=new Map([...c,...p]);return{markersInRange:[...m.values(),...e.values()].sort((e,t)=>new Date(e.date).getTime()-new Date(t.date).getTime()),singleDayMarkerMap:e}},[c,m,p]);return(0,F.jsx)(Ka.Provider,{value:h,children:(0,F.jsx)(Kr.Provider,{value:d.size,children:(0,F.jsx)(Kn.Provider,{value:m.size,children:e})})})}),Kl=()=>{let e=(0,K.useContext)(Ka);return(0,ee.A)(null!=e,"useRoadmapMarkersInRange must be used within a RoadmapMarkersInRangeProvider"),e};function Ks(){let e=(0,K.useContext)(Kr);return(0,ee.A)(null!=e,"useRoadmapMilestoneMarkersSize must be used within a RoadmapMarkersInRangeProvider"),e}function Ko(){let e=(0,K.useContext)(Kn);return(0,ee.A)(null!=e,"useRoadmapIterationMarkersSize must be used within a RoadmapMarkersInRangeProvider"),e}let Kd=e=>{if(e.type!==Kt.Iteration||!e.isDateField)return!1;let t=new Date,a=new Date(e.date),r=new Date(t.getFullYear(),t.getMonth(),t.getDate()),n=(0,tP.f)(aF(e.date,e.duration||0),1);return(0,tE.d)(r,(0,tM.e)(a,1))&&(0,tB.Y)(r,n)};try{Ka.displayName||(Ka.displayName="RoadmapMarkersInRangeContext")}catch{}try{Kr.displayName||(Kr.displayName="RoadmapMilestoneMarkersSizeContext")}catch{}try{Kn.displayName||(Kn.displayName="RoadmapIterationMarkersSizeContext")}catch{}try{Ki.displayName||(Ki.displayName="RoadmapMarkersInRangeProvider")}catch{}let Ku=()=>{let e=Ks();return Ko()>0||e>0},Kc=()=>Ku()?88:64,Km=()=>{let e=Kc(),{groupedByColumnId:t}=d7();return(0,K.useMemo)(()=>({scrollMarginTop:`${e+1+(t?44:0)}px`,scrollMarginBottom:"64px"}),[e,t])};function Kp({children:e,sx:t}){return(0,F.jsx)(lx.A,{sx:{display:"flex",alignItems:"center",overflow:"hidden",padding:"12px",position:"relative",height:"40px",borderBottom:"1px solid",borderColor:"border.muted",...t},children:e})}let Kh={cursor:"default",backgroundColor:"canvas.default",zIndex:2},Kf=(0,K.memo)((0,K.forwardRef)(function(e,t){let{children:a,sx:r,role:n="gridcell",style:i,...l}=e;return(0,F.jsx)(lx.A,{ref:t,role:n,sx:{...Kh,...r},style:i,...l,children:a})})),Kg={display:"flex",height:"40px",alignItems:"center","body.roadmap-date-tooltip-visible:not(.is-dragging) &.roadmap-row:hover":{zIndex:1},"body:not(.is-dragging) &.roadmap-row:hover, &.pill-drag":{"& .roadmap-table-cell":{backgroundColor:"canvas.subtle","&:before":{backgroundColor:"canvas.subtle"}},"& .roadmap-pill:not(.is-focused)":{border:"1px solid",borderColor:"fg.muted",borderRadius:1},"& .menu-trigger":{opacity:1},"&.row-highlight":{zIndex:3}},"&.roadmap-row.row-highlight:not(.row-selected)":{"& .roadmap-table-cell, & .roadmap-table-cell:hover":{boxShadow:e=>`0 -1px 0 0 ${e.colors.accent.emphasis}, 0 1px 0 0 ${e.colors.accent.emphasis}`}},"&.roadmap-row.row-highlight, &.roadmap-row.row-selected":{zIndex:3,"& .roadmap-table-cell, & .roadmap-table-cell:hover":{backgroundColor:"canvas.default","&:before":{zIndex:-1,content:'""',position:"absolute",backgroundColor:e=>`${e.colors.accent.subtle}`},":not(.is-focused):before":{inset:0}},"&.selection-top-edge .roadmap-table-cell":{boxShadow:e=>`0 -1px 0 0 ${e.colors.accent.emphasis}`},"&.selection-bottom-edge .roadmap-table-cell":{boxShadow:e=>`0 1px 0 0 ${e.colors.accent.emphasis}`},"&.selection-top-edge.selection-bottom-edge .roadmap-table-cell":{boxShadow:e=>`0 -1px 0 0 ${e.colors.accent.emphasis}, 0 1px 0 0 ${e.colors.accent.emphasis}`}},"& .roadmap-table-cell.is-focused":{zIndex:3,position:"sticky","& .roadmap-drag-sash:after":{borderColor:"transparent"}},"& .roadmap-table-cell.is-selected, .roadmap-table-cell.is-copy-source":{zIndex:3,position:"sticky"},"& .roadmap-table-cell.is-selected":{backgroundColor:"canvas.default","&:before":{backgroundColor:e=>`${e.colors.accent.subtle}`}},"& .roadmap-table-cell":{userSelect:"none"}},Ky={boxShadow:"shadow.medium","&::after":{content:'""',position:"absolute",inset:0,borderBottom:"1px solid",borderBottomColor:"border.default",zIndex:-1}},Kx=(0,K.forwardRef)(function({row:e,children:t,isDraggingPill:a,isHighlighted:r,className:n,...i},l){let{flatRows:s,groupedRows:o}=Nj(),d=Nw(),u=e?T7(e,s,o):null,c=e&&!!d?.[e.id]&&T6(e),m=kc(),p=(0,vB.$)("roadmap-row",{"row-highlight":r,"row-selected":c,"selection-top-edge":c&&u&&(!u.beforeSelected||u.firstInGroup),"selection-bottom-edge":c&&u&&(!u.afterSelected||u.lastInGroup),"pill-drag":a},n),h=Km();return(0,F.jsx)(lx.A,{ref:l,role:"row",className:p,sx:Kg,style:{...h,marginLeft:`-${m}px`},"data-test-row-is-selected":c,...i,children:t})});try{Kp.displayName||(Kp.displayName="RoadmapCellContent")}catch{}try{Kf.displayName||(Kf.displayName="RoadmapCell")}catch{}try{Kf.displayName||(Kf.displayName="RoadmapCell")}catch{}try{Kx.displayName||(Kx.displayName="RoadmapRow")}catch{}let Kb=()=>null,Kv=e=>cv(e)&&e.details.x===qH,Kw=(e,t,a)=>{if(e.original.contentType===eJ.RedactedItem)return!1;if(t)return!0;let r=a(e.original.columns);return!!(r.start||r.end)},Kj=({hasWritePermissions:e,getTimeSpanFromColumnData:t})=>(a,r,n,i)=>{if(!(n.y===u8.Next||n.y===u8.Previous))return!0;let l=Kv(a),s=(cg(a)||cx(a))&&r&&Kv(r);return!(l||s)||Kw(i,e,t)},KC=({hasWritePermissions:e,getTimeSpanFromColumnData:t})=>(a,r,n)=>r.x!==u8.Next&&r.x!==u8.Previous||a!==qH||!n||Kw(n,e,t),KI={color:"fg.muted",fontWeight:"normal"},KS={position:"absolute",top:"3px",right:3,zIndex:4,pr:[0,2,3],my:0,"&:before":{content:'""',position:"absolute",top:0,left:"-20px",width:"20px",height:"100%",backgroundColor:"canvas.default",maskImage:"linear-gradient(to right, rgba(255, 255, 255, 0) 0%, rgba(255, 255, 255, 1) 100%)"},display:"flex",flexDirection:"row",alignItems:"center",backgroundColor:"canvas.default",listStyle:"none"},Kk=(0,K.memo)(function(){let e=(0,K.useRef)(null);(0,b6.G)({containerRef:e,bindKeys:b4.z0.ArrowHorizontal});let{isTableNarrow:t}=kw();return(0,F.jsx)(lx.A,{role:"menubar",ref:e,as:"ul",sx:KS,...(0,ey.G)("quick-action-toolbar"),children:(0,F.jsxs)(Os.Provider,{value:"view options toolbar",children:[!t&&(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(KT,{}),(0,F.jsx)(KP,{}),(0,F.jsx)(KE,{}),(0,F.jsx)(KD,{})]}),t&&(0,F.jsx)(KN,{}),(0,F.jsx)(K_,{}),(0,F.jsx)(KA,{}),(0,F.jsx)(KR,{})]})})}),KN=()=>{let e=(0,K.useId)(),t=(0,K.useRef)(null),a=(0,K.useRef)(null),[r,n]=(0,K.useState)(!1),[i,l]=(0,K.useState)(null),{isSortedByDirty:s}=un(),{isRoadmapMarkerFieldsDirty:o,isRoadmapZoomLevelDirty:d,isRoadmapDateFieldsDirty:u}=ko(),{hasWritePermissions:c}=eK(),m=e=>"Dates"===e&&"Dates"!==i?t:a;return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)("li",{role:"menuitem",children:(0,F.jsx)(D$,{...(0,ey.G)("quick-action-toolbar-options-dirty"),isDirty:s||o||d||u,hideDirtyState:!c,children:(0,F.jsx)(fE.K,{"aria-label":n6.toolbarRoadmapOptions,ref:t,size:"small",variant:"invisible",icon:ly.SlidersIcon,onClick:()=>n(!r),"aria-controls":e,"aria-expanded":r,"aria-haspopup":"true",sx:KI,...(0,ey.G)("quick-action-toolbar-options-button")})})}),(0,F.jsx)(yu.W,{anchorRef:t,open:r,onOpenChange:e=>n(e),children:(0,F.jsxs)(yu.W.Overlay,{width:"medium",...(0,ey.G)("quick-action-toolbar-options-menu"),children:[(0,F.jsx)(fi.l,{id:e,children:U9.map(e=>(0,F.jsxs)(fi.l.Item,{ref:i===e.title?a:null,onSelect:t=>{l(e.title),t.preventDefault()},children:[(0,F.jsx)(fi.l.LeadingVisual,{children:(0,F.jsx)(e.icon,{})}),(0,F.jsx)(e.TextContent,{}),(0,F.jsx)(fi.l.TrailingVisual,{children:(0,F.jsx)(ly.ChevronRightIcon,{})})]},e.title))}),U9.map(e=>(0,F.jsx)(e.MenuComponent,{anchorRef:m(e.title),open:i===e.title,setOpen:t=>{l(t?e.title:null)}},e.title))]})})]})},KT=()=>{let e=(0,K.useId)(),t=(0,K.useRef)(null),[a,r]=(0,K.useState)(!1);return(0,F.jsxs)(lx.A,{as:"li",sx:{position:"relative"},role:"menuitem",children:[(0,F.jsx)(p4.Q,{...(0,ey.G)("quick-action-toolbar-markers-menu"),ref:t,"aria-haspopup":"true","aria-expanded":a,"aria-controls":e,trailingVisual:null,variant:"invisible",size:"small",sx:KI,leadingVisual:UR,onClick:()=>r(e=>!e),children:"Markers"}),(0,F.jsx)(yu.W,{anchorRef:t,open:a,children:(0,F.jsx)(yu.W.Overlay,{role:"dialog",onEscape:()=>r(!1),onClickOutside:()=>r(!1),"aria-label":"Configure vertical markers to display on roadmap",children:(0,F.jsx)(UP,{id:e})})})]})};function K_(){let{today:e}=q4(),{scrollToDate:t}=q7(),a=(0,K.useRef)(null),[r,n]=(0,Sf.B)({contentRef:a,"aria-label":n6.scrollToDateText(e)});return(0,F.jsxs)(lx.A,{as:"li",sx:{position:"relative"},role:"menuitem",children:[(0,F.jsx)(p4.Q,{onClick:()=>{t(e,!0)},size:"small",variant:"invisible",sx:KI,...r,ref:a,children:n6.toolbarToday}),n]})}function KA(){let{scrollToPrevPage:e}=q7();return(0,F.jsx)("li",{role:"menuitem",children:(0,F.jsx)(fE.K,{tooltipDirection:"nw",onClick:()=>{e(!0)},size:"small",variant:"invisible","aria-label":n6.scrollToPreviousPage,icon:ly.ChevronLeftIcon,sx:KI})})}function KR(){let{scrollToNextPage:e}=q7();return(0,F.jsx)("li",{role:"menuitem",children:(0,F.jsx)(fE.K,{role:"menuitem",tooltipDirection:"nw",onClick:()=>{e(!0)},size:"small",variant:"invisible","aria-label":n6.scrollToNextPage,icon:ly.ChevronRightIcon,sx:KI})})}function KP(){let{isSorted:e,sorts:t}=un(),a=(0,K.useRef)(null),[r,n]=(0,K.useState)(!1),{sortLabel:i,sortText:l}=(0,K.useMemo)(()=>e?{sortLabel:`Sorted by: ${t.map(e=>`${e.column.name} ${"asc"===e.direction?"ascending":"descending"}`).join(", ")}`,sortText:t.map(e=>e.column.name).join(", ")}:{sortLabel:"No sort applied",sortText:"Sort"},[e,t]),s=fl("quick-action-toolbar-sort-by-menu");return(0,F.jsxs)(lx.A,{as:"li",sx:{position:"relative"},role:"menuitem",children:[(0,F.jsx)(p4.Q,{ref:a,"aria-haspopup":"true","aria-expanded":r,onClick:()=>{n(!r)},variant:"invisible",size:"small",sx:KI,"aria-controls":s,"aria-label":i,...(0,ey.G)("quick-action-toolbar-sort-by-menu"),children:(0,F.jsxs)(lx.A,{sx:{display:"flex"},children:[(0,F.jsx)(UH,{}),(0,F.jsx)(lv.A,{sx:{ml:2},children:l})]})}),(0,F.jsx)(UF,{id:s,anchorRef:a,open:r,setOpen:n})]})}function KD(){let{hasWritePermissions:e}=eK(),t=kf(),{isRoadmapZoomLevelDirty:a}=ko(),r=(0,K.useRef)(null),[n,i]=(0,K.useState)(!1),l=fl("roadmap-zoom-level-menu");return(0,F.jsxs)(lx.A,{as:"li",sx:{position:"relative"},role:"menuitem",children:[(0,F.jsx)(p4.Q,{ref:r,"aria-haspopup":"true","aria-expanded":n,onClick:()=>{i(!n)},variant:"invisible",size:"small","aria-label":n6.toolbarZoomAriaLabel(t),sx:KI,"aria-controls":l,...(0,ey.G)("quick-action-toolbar-zoom-level"),children:(0,F.jsxs)(lx.A,{sx:{display:"flex"},children:[(0,F.jsx)(D$,{isDirty:a,hideDirtyState:!e,...(0,ey.G)("roadmap-zoom-level-dirty"),children:(0,F.jsx)(ly.ZoomInIcon,{})}),(0,F.jsx)(lv.A,{sx:{ml:2},children:n6.zoomLevelOptions[t]})]})}),(0,F.jsx)(UE,{id:l,anchorRef:r,open:n,setOpen:i})]})}function KE(){let{dateFields:e,areDateFieldsDefault:t}=ko(),{isDateFieldsPopoverDisabled:a}=kd(),r=new Set(e.filter(S7).map(e=>e.name)),{isDateConfigurationMenuOpen:n,setOpenDateConfigurationMenu:i}=qJ(),{currentView:l}=iS(),{postStats:s}=iN(),o=0===r.size,d=l?.serverViewState.layout!==l$.Roadmap&&l?.localViewState.layout===l$.Roadmap,u=!o&&t&&d,c=e.some(e=>S7(e)&&"iteration"===e.dataType)?"iteration":"date",m=(0,K.useRef)(null),p=!a&&(o||u),h=fl("roadmap-date-fields-menu");return(0,F.jsxs)(lx.A,{as:"li",sx:{position:"relative"},role:"menuitem",children:[(0,F.jsx)(p4.Q,{ref:m,"aria-haspopup":"true","aria-expanded":n,onClick:()=>{i(!n)},variant:"invisible",size:"small","aria-label":n6.toolbarDateFieldsAriaLabel,sx:KI,"aria-controls":h,...(0,ey.G)("quick-action-toolbar-date-fields-menu"),children:(0,F.jsxs)(lx.A,{sx:{display:"flex"},children:[(0,F.jsx)(Uq,{}),(0,F.jsx)(lv.A,{sx:{ml:2},children:n6.toolbarDateFields})]})}),p&&(0,F.jsx)(xu.A,{relative:!1,open:p,caret:"top",sx:{top:"24px",left:"-54px"},children:(0,F.jsxs)(xu.A.Content,{sx:{mt:2},children:[(0,F.jsx)(lx.A,{sx:{fontSize:2,fontWeight:"bold"},children:n6.gettingStarted.popoverTitle}),(0,F.jsx)(lx.A,{sx:{marginTop:2,marginBottom:3},children:u?n6.gettingStarted.fieldsSelectedByDefault(c):n6.gettingStarted.projectNeedsField}),(0,F.jsx)(p4.Q,{onClick:()=>{var e;let t;i(!0),s({name:"roadmap_date_fields_popover_dismissed",ui:"roadmap_date_fields_popover",context:JSON.stringify((e=r.size,t="none",c===eN.Iteration?t="iteration_field":c===eN.Date&&(t=`${e}_date_field${1===e?"":"s"}`),{dateFields:t}))})},children:n6.gettingStarted.popoverDismissButton})]})}),(0,F.jsx)(Uj,{id:h,anchorRef:m,open:n,setOpen:i})]})}try{Kk.displayName||(Kk.displayName="RoadmapControls")}catch{}try{KN.displayName||(KN.displayName="RoadmapCondensedOptions")}catch{}try{KT.displayName||(KT.displayName="RoadmapMarkerButton")}catch{}try{K_.displayName||(K_.displayName="TodayButton")}catch{}try{KA.displayName||(KA.displayName="PrevPageButton")}catch{}try{KR.displayName||(KR.displayName="NextPageButton")}catch{}try{KP.displayName||(KP.displayName="RoadmapSortByMenu")}catch{}try{KD.displayName||(KD.displayName="ZoomLevelMenu")}catch{}try{KE.displayName||(KE.displayName="DateConfigurationMenu")}catch{}function KM(e,t){let{start:a,end:r,startIteration:n,endIteration:i}=e;if(n&&a)return r?i?n===i?`${n$(a,r)} [${n.title}]`:`${n$(a,r)} [${n.title} start - ${i.title} end]`:a.getTime()===r.getTime()?`${nG(a)} [${n.title} start]`:`${n$(a,r)} [${n.title} start - ${nG(r,"MMM d")}]`:`${nG(a)} [${n.title} start]`;return i&&r?a?a.getTime()===r.getTime()?`${nG(r)} [${i.title} end]`:`${n$(a,r)} [${nG(a,"MMM d")} - ${i.title} end]`:`${nG(r)} [${i.title} end]`:a&&r&&a.getTime()!==r.getTime()?n$(a,r):a?nG(a):r?nG(r):t&&!KB(t)?n6.noDateFieldsConfiguredTooltip:void 0}function KB(e){return e.filter(S7).length>0}let KL={PillLink:"pill_link",ArrowButton:"arrow_button",AddDateButton:"add_dates_button"},KF=(0,K.createContext)(null),KO=(0,K.memo)(function({children:e,cell:t,rowRef:a}){let{state:{focus:r},navigationDispatch:n}=ck(),[i,l]=(0,K.useState)(null),s=(0,K.useMemo)(()=>!!(r&&cv(r)&&r.details.y===t.row.id&&r.details.x===t.column.id),[t,r]),o=(0,K.useRef)(null),d=(0,K.useRef)(null),u=(0,K.useRef)(null),c=(0,K.useRef)(null),m=(0,K.useCallback)(()=>u.current?{type:KL.ArrowButton,element:u.current}:c.current?{type:KL.AddDateButton,element:c.current}:d.current?{type:KL.PillLink,element:d.current}:null,[]),p=(0,K.useCallback)(e=>e?o.current!==e:!!o.current,[]),h=(0,K.useCallback)(e=>{let t=m();if(p(t?.element)&&(l(t),o.current=t?.element??null),t?.element){if(t.element.focus({preventScroll:!0}),!e.scrollIntoView)return;a.current&&(H0()?"scrollIntoViewIfNeeded"in a.current&&"function"==typeof a.current.scrollIntoViewIfNeeded&&a.current.scrollIntoViewIfNeeded(!1):a.current.scrollIntoView({block:"nearest",inline:"nearest"}))}},[m,p,a]),f=(0,K.useCallback)(()=>{s&&h({scrollIntoView:!1})},[s,h]);(0,pk.N)(()=>{s?h({scrollIntoView:!0}):(l(null),o.current=null)},[s,h,l]);let{openProjectItemInPane:g}=c7(),y=(0,K.useRef)(!1),x=(0,K.useCallback)((e=200)=>{y.current=!0,window.setTimeout(()=>{y.current=!1},e)},[]),b=t.row.original,v=b.contentType===eJ.DraftIssue||b.contentType===eJ.Issue,w=(0,K.useCallback)(e=>{if(y.current){e.preventDefault();return}!v||(e.metaKey||e.ctrlKey)&&b.contentType!==eJ.DraftIssue||(g(b,()=>{d.current?.focus()}),e.preventDefault())},[g,b,d,v]),j=i?.type,C=(0,K.useCallback)(e=>{let t=fA(e);T5(n,e).action?T1(e):j===KL.PillLink&&t===fN.SPACE&&v&&(g(b,()=>{d.current?.focus()}),T1(e))},[n,v,g,b,j]),I=(0,K.useCallback)(()=>{s||n(cI(t.row.id,t.column.id,!1))},[s,n,t]),S=(0,K.useCallback)(()=>{s||n(cI(t.row.id,t.column.id,!1))},[s,n,t]);return(0,F.jsx)(KF.Provider,{value:(0,K.useMemo)(()=>({wrapperProps:{onKeyDown:C,onPointerDown:I,tabIndex:-1},onFocusInternalElement:S,linkRef:d,onClickPillLink:w,temporarilyIgnorePillLinkClick:x,arrowButtonRef:u,addDateButtonRef:c,refocusPillArea:f,focusType:j}),[C,I,S,w,x,f,j]),children:e})}),KG=()=>{let e=(0,K.useContext)(KF);if(!e)throw Error("useRoadmapPillAreaFocus must be used within a RoadmapPillAreaFocusContext");return e};try{KO.displayName||(KO.displayName="RoadmapPillAreaFocusProvider")}catch{}let KV=(e,t,a)=>{if("none"!==t&&"number"==typeof t.id){let r=t.id,n=e.id,i=t.dataType;if(i===eN.Iteration){let t=e.getCustomField(r),l=t?ts:to;if(!t||t.id!==a?.id)return{memexProjectColumnId:r,action:{dataType:i,memexProjectColumnId:r,value:a},stats:{payload:{name:l,memexProjectColumnId:r,memexProjectItemId:n}}}}else if(i===eN.Date){let t={value:a},l=e.getCustomField(r),s=l?.value?new Date(l.value):void 0,o=s?ts:to;if(!s||s.getTime()!==t.value?.getTime())return{memexProjectColumnId:r,action:{dataType:i,memexProjectColumnId:r,value:t},stats:{payload:{name:o,memexProjectColumnId:r,memexProjectItemId:n}}}}}};function K$(){let{updateMultipleSequentially:e}=uh(),{postStats:t}=iN(),{dateFields:[a=lH,r=lH]}=ko(),n=(0,K.useCallback)((n,i)=>{let l=new Map,s=KV(n,a,i.startIteration||i.start),o=KV(n,r,i.endIteration||i.end);s&&l.set(s.memexProjectColumnId,s),o&&l.set(o.memexProjectColumnId,o);let d=Array.from(l.values()).map(e=>e.action),u=Array.from(l.values()).map(e=>e.stats),c=d.length>0?e(n,d):Promise.resolve();for(let e of u)t(e.payload);return c},[a,r,t,e]);return(0,K.useMemo)(()=>({updateItemDates:n}),[n])}let KW={borderRadius:"5px",backgroundColor:"canvas.default",border:"1px solid",borderColor:"border.muted",padding:"0",color:"fg.muted",width:22,position:"relative","&.is-focused":{outline:"none"},"&.is-focused::before":{content:'""',position:"absolute",width:"calc(100% - 2px)",height:"calc(100% - 2px)",border:"2px solid",borderColor:"accent.emphasis",inset:-1,borderRadius:"5px"}},Kz={...KW,backgroundColor:"unset",border:"none","&.roadmap-add-date-button:hover":{backgroundColor:"unset",border:"none"}},KH={position:"absolute",height:28,backgroundColor:"canvas.default",borderStyle:"dotted",borderWidth:"1px",borderColor:"fg.muted",borderRadius:"5px",opacity:.7},KU=(0,K.memo)(function({isBefore:e,startDate:t,endDate:a,role:r,wrapperProps:n,onFocusInternalElement:i,arrowButtonRef:l,className:s}){let{scrollToDate:o}=q7(),d=q8(),u=kc(),c=d(),m=(0,K.useCallback)(()=>{t&&o(t,!0)},[o,t]),p=t?n6.scrollToDateText(t):a?n6.scrollToDateText(a):"";return(0,F.jsx)(lx.A,{role:r,sx:{position:"sticky",zIndex:1},style:{left:e?u+8:u+(c.right-c.left)-30},...n||{},children:(0,F.jsx)(fE.K,{tooltipDirection:e?"e":"w",onClick:m,variant:"invisible",icon:e?ly.ArrowLeftIcon:ly.ArrowRightIcon,...(0,ey.G)("roadmap-navigation-button"),sx:KW,"aria-label":p,ref:l??null,className:(0,vB.$)(s),...i?{onFocus:i}:{}})})}),Kq=(0,K.memo)(function(e){let{wrapperProps:t,onFocusInternalElement:a,arrowButtonRef:r,focusType:n}=KG();return(0,F.jsx)(KU,{wrapperProps:t,onFocusInternalElement:a,arrowButtonRef:r,className:n===KL.ArrowButton?"is-focused":void 0,...e})}),KK=(0,K.memo)(function({item:e,date:t,offsetX:a,isDefaultAddButton:r,hideTooltip:n,hidePlaceholder:i}){let l;let s=q6(),{today:o}=q4(),{updateItemDates:d}=K$(),{dateFields:u}=ko(),c=kc(),{setOpenDateConfigurationMenu:m}=qJ(),p=c$(),{wrapperProps:h,onFocusInternalElement:f,addDateButtonRef:g,focusType:y}=KG(),x=mK(),b=KB(u),v=r||!t,w=v?o:t,j=s(w),C=!j.start||!j.end;C?l=n6.noIterationConfiguredTooltip(nG(w)):b?(l=KM(j),l=v?`Add to today at ${l}`:`Add to ${l}`):l=n6.noDateFieldsConfiguredTooltip;let I=(0,K.useCallback)(()=>{if(b){if(C){let e=function(e){if(e&&"none"!==e&&oZ(e))return e}(j.start?u[1]:u[0]);e&&p({pathname:lr.generatePath({...x,fieldId:e.id})})}else w&&d(e,j)}else m(!0)},[u,b,C,e,p,m,w,j,d,x]),[S,k]=(0,K.useState)(!1),N=(0,K.useCallback)(e=>{k(!0),f&&f(e)},[f]),T=(0,K.useCallback)(()=>k(!1),[]),_=!i&&!(r&&!S)&&!C,A=(!r||S)&&C?ly.IterationsIcon:ly.PlusIcon,R=v||C?KW:Kz,{sx:P,style:D}=r?{sx:{position:"sticky",zIndex:1},style:{left:c+8}}:{sx:{position:"absolute",zIndex:1,"[popover]:popover-open":{opacity:n?0:1,animation:"none"}},style:{left:a-11}};return(0,F.jsxs)(F.Fragment,{children:[_&&(0,F.jsx)(KQ,{timeSpan:j}),(0,F.jsx)(lx.A,{sx:P,style:D,role:"gridcell",...h,children:(0,F.jsx)(fE.K,{tooltipDirection:!b||C||v?"e":"n",onClick:I,onFocus:N,onBlur:T,variant:"invisible",icon:A,sx:R,...(0,ey.G)("roadmap-add-date-button"),className:(0,vB.$)("roadmap-add-date-button",{"is-focused":y===KL.AddDateButton}),"aria-label":l,ref:g},l)})]})}),KQ=({timeSpan:e})=>{let{getX:t,columnWidth:a}=q4(),r=e.start?t(e.start):0,n=e.end?t(e.end):0;return(0,F.jsx)(lx.A,{role:"gridcell",sx:KH,style:{width:n-r+a,left:r},children:"\xa0"})};try{KU.displayName||(KU.displayName="NavigationArrow")}catch{}try{Kq.displayName||(Kq.displayName="NavigationArrowWithFocusContext")}catch{}try{KK.displayName||(KK.displayName="AddDateButton")}catch{}try{KQ.displayName||(KQ.displayName="PillPlaceholder")}catch{}let KJ={backgroundColor:"initial",zIndex:0,display:"flex",alignItems:"center",width:"100%"},KX={display:"flex",flexShrink:0,alignItems:"center",lineHeight:1.5,left:0,height:28,fontSize:"14px",fontWeight:"normal",backgroundColor:"canvas.default",padding:"0 16px",borderColor:"border.default",borderRadius:"14px",borderWidth:"2px"},KY=(0,K.memo)(function({startDate:e,endDate:t,pillOffsetLeft:a,pillWidth:r}){let n=q8(),i=kc(),l=(0,K.useRef)(null),{isVisible:s}=pA({ref:l}),o=(0,K.useRef)(null),{isVisible:d}=pA({ref:o}),u=n(),c=!s&&a+r<=u.left+1,m=!s&&a>=u.right-1,p=KM({start:e,end:t}),h=(0,F.jsx)(bD.A,{sx:KX,style:{width:r},className:"roadmap-pill",...(0,ey.G)("roadmap-view-group-header-item")}),f=(0,F.jsx)(lx.A,{sx:{display:"flex",flexShrink:0,color:"fg.muted",alignItems:"center",whiteSpace:"nowrap",textAlign:"left",width:"min-content"},children:p});return(0,F.jsxs)(Kf,{role:"gridcell","data-date-start":e?aN(e):void 0,"data-date-end":t?aN(t):void 0,sx:KJ,children:[(0,F.jsx)(lx.A,{ref:o,role:"presentation",sx:{position:"absolute",width:8},style:{left:a}}),(0,F.jsx)(lx.A,{ref:l,sx:{position:"absolute",display:"flex",alignItems:"center"},style:{left:a},children:h}),s?(0,F.jsx)(lx.A,{sx:{position:d?"absolute":"sticky",display:"flex",alignItems:"center"},style:{left:d?a+16:i+8},children:f}):c||m?(0,F.jsx)(KU,{isBefore:c,startDate:e,endDate:t}):null]})});try{KY.displayName||(KY.displayName="RoadmapGroupPill")}catch{}let KZ=(0,K.memo)(function({rows:e}){let t,a;let{getTimeSpanFromColumnData:r}=ko(),{getX:n,totalWidth:i}=q4();for(let n of e){let e=r(n.original.columns),[i,l]=nW([e.start,e.end]);i&&(!t||i<t)&&(t=i),l&&(!a||l>a)&&(a=l)}let l={start:t,end:a},s=l.start?n(l.start):0,o=l.end?n((0,tP.f)(l.end,1))-s:0,d=s+o<=0,u=s>=i,c=!d&&!u,m=l.start||l.end;return m?c?(0,F.jsx)(KY,{startDate:l.start,endDate:l.end,pillOffsetLeft:s,pillWidth:o}):m?(0,F.jsx)(KU,{role:"gridcell",isBefore:d,startDate:l.start,endDate:l.end}):null:null});try{KZ.displayName||(KZ.displayName="RoadmapGroupPillArea")}catch{}let K0=(e,t,{leading:a=!0,trailing:r=!0,onChangeBehavior:n="flush"}={})=>{let i=(0,nk.M)(e),l=(0,K.useMemo)(()=>(0,Fn.A)((...e)=>i.current(...e),t,{leading:a,trailing:r}),[i,t,a,r]);return(0,K.useEffect)(()=>()=>{l?.[n]()},[l,n]),l},K1=()=>{let[e,t]=(0,K.useState)({isHovered:!1,mouseX:null,mouseY:null,buttonPressedOnEntry:!1}),a=(0,K.useCallback)(e=>t(t=>({...t,isHovered:!0,buttonPressedOnEntry:!!e.buttons})),[]),r=K0(e=>{t(t=>({...t,mouseX:e.clientX,mouseY:e.clientY}))},16),n=(0,K.useCallback)(()=>t(e=>({...e,isHovered:!1,buttonPressedOnEntry:!1})),[]);return(0,K.useMemo)(()=>({mouseState:e,onMouseEnter:a,onMouseMove:r,onMouseLeave:n}),[e,a,r,n])};var K2=a(37050),K5=a(20514);function K3(){let{hasWritePermissions:e}=eK(),t=(0,K.useCallback)(t=>e&&t.contentType!==eJ.RedactedItem,[e]);return(0,K.useMemo)(()=>({canUpdate:e,canUpdateItem:t}),[t,e])}let K4=(e,t)=>(0,tG.L)(e,24*t),K6=e=>e!==lH&&oZ(e),K8=e=>e!==lH&&o1(e),K7=new Set(["move","expand-leading","expand-trailing"]),K9={display:"block",overflow:"hidden",textOverflow:"ellipsis",verticalAlign:"middle",whiteSpace:"nowrap"},Qe={color:"fg.muted",textAlign:"left",whiteSpace:"nowrap",textDecoration:"none"},Qt={flexShrink:0,left:0,height:28,backgroundColor:"canvas.default",boxShadow:"shadow.medium",borderColor:"border.default",padding:"0 8px",borderRadius:"5px"},Qa={position:"absolute",right:"0",width:"1px",height:"16px",backgroundColor:"canvas.subtle"},Qr={display:"flex",flexShrink:0,alignItems:"center",lineHeight:1.5,left:0,height:28,fontSize:"14px",fontWeight:"normal",backgroundColor:"transparent",padding:"0 8px",borderColor:"transparent",borderRadius:1,cursor:"default"},Qn={...Qr,cursor:"grab"},Qi={position:"absolute",height:28,backgroundColor:"accent.muted",borderStyle:"dotted",borderWidth:"1px",borderColor:"accent.muted",borderRadius:1,opacity:.5},Ql={position:"absolute",left:0,right:0,height:"100%","body.is-dragging &:hover":{" &:not(.active)":{backgroundColor:"transparent","&::after, &::before":{opacity:0,display:"none"}}}},Qs={...Ql,display:"none"},Qo={width:21,height:21,cursor:"col-resize",position:"absolute",zIndex:1,"& .roadmap-item-drag-handle":{content:'""',width:"3px",height:21,backgroundColor:"transparent",boxShadow:"none",borderRadius:"2px",position:"absolute",top:"50%",transform:"translateY(-50%)",bottom:0,"&.active":{backgroundColor:"fg.default",borderColor:"black",borderWidth:1,borderStyle:"solid",boxShadow:"0px 4px 4px rgba(0, 0, 0, 0.25)"}},"&.expand-trailing":{left:"100%","& .roadmap-item-drag-handle":{left:"50%",transform:"translate(-50%, -50%)"}},"&.expand-leading":{right:"100%","& .roadmap-item-drag-handle":{left:"50%",transform:"translate(-50%, -50%)"}},"&:hover":{"& .roadmap-item-drag-handle":{backgroundColor:"fg.subtle","&.active":{backgroundColor:"fg.default",borderColor:"black"}}},"body.is-dragging &:hover":{"& .roadmap-item-drag-handle:not(.active)":{backgroundColor:"transparent"}}},Qd=(0,K.memo)((0,K.forwardRef)(function({tooltip:e,operation:t,active:a,containerRef:r,...n},i){let[l,s]=(0,Sf.B)({contentRef:r,"aria-label":e,className:"roadmap-item-drag-handle-tooltip",direction:"n",alignmentOffset:-10.5,anchorOffset:-10.5,anchorSide:"expand-leading"===t?"inside-left":"inside-right",open:!!a||void 0});return(0,F.jsxs)(lx.A,{...(0,ey.G)(`roadmap-view-item-${t}-handle`),className:t,"data-dnd-operation":t,sx:Qo,...n,ref:i,...l,children:[(0,F.jsx)("div",{className:(0,vB.$)("roadmap-item-drag-handle",{active:a})}),s]})})),Qu=[],Qc=(0,K.memo)(function({titleHtml:e,renderLink:t,titleColumnValue:a,timeSpan:r,pendingTimeSpan:n,url:i,number:l,assignees:s=Qu,allowedOperations:o,dragProps:d,dragDetails:u,index:c}){let m=q8(),{getX:p}=q4(),h=kc(),{isVisible:f}=pA({ref:d.node}),g=null!==n,{wrapperProps:y,focusType:x,refocusPillArea:b,onFocusInternalElement:v,linkRef:w,onClickPillLink:j}=KG(),C=(0,K.useRef)(null),{isVisible:I}=pA({ref:C}),[S,k]=n?nW([n.start,n.end]):nW([r.start,r.end]),N=S?p(S):0,T=k?p((0,tP.f)(k,1))-N:0,_=m(),A=!f&&N+T<=_.left+1,R=!f&&N>=_.right-1,P=Hl(),[D,E]=(0,K.useState)(void 0);Lx("roadmap-date-tooltip-visible",void 0!==D),(0,pk.N)(()=>{d.isDragging,b()},[f,d.isDragging,b]);let{roadmapTruncateTitles:M}=_B(),B=(0,F.jsx)(p$,{sx:K9,children:e}),L=o.has("allowed-drag-update"),O=d.isDragging&&!!u,G=O&&!g?u.dragGhostSpan.endX-u.dragGhostSpan.startX:0,{theme:V}=(0,z.DP)(),$=V?.shadows.shadow.medium;"string"==typeof $&&($.startsWith("0 3px 6px rgb")||$.startsWith("0 3px 6px #"))&&($=$.replace("0 3px 6px","-3px 6px 6px -3px"));let W=$?{...Qt,boxShadow:$}:Qt,H=(0,F.jsx)(bD.A,{sx:W,style:{width:T}}),U=(0,F.jsx)(bD.A,{ref:w,as:"a",href:i,target:"_blank",rel:"noreferrer",onClick:j,onFocus:v,sx:{...L?Qn:Qr,pointerEvents:O?"none":"auto",outline:"none","&.is-focused::before":{content:'""',position:"absolute",width:"calc(100% - 4px)",height:"calc(100% - 4px)",border:"2px solid",borderColor:"accent.emphasis",borderRadius:"5px",inset:0}},style:{width:O?G:T},...d.attributes,...d.listeners,onMouseOver:e=>{if(O)return;let t=e.currentTarget.getBoundingClientRect(),a=e.clientX-t.left,r=e.clientX-t.left>t.width/2;E({left:r?0:2*a-t.width,right:r?t.width-2*a:0})},onMouseOut:()=>{O||E(void 0)},className:(0,vB.$)("roadmap-pill",{"is-focused":x===KL.PillLink}),...(0,ey.G)("roadmap-view-item-pill"),children:(0,F.jsx)(bW.A,{"aria-label":KM(O?u.adjustedTimeSpan:r),className:(0,vB.$)("roadmap-pill-tooltip",{active:u?.operation==="move"}),sx:O&&"move"!==u.operation?Qs:Ql,style:D,direction:0===c?"s":"n"})}),q=(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(lx.A,{sx:{flexShrink:0,mr:2,display:"flex",pointerEvents:"none"},children:(0,F.jsx)(A0,{titleColumn:a})}),t?(0,F.jsx)(pw.A,{href:i,target:"_blank",rel:"noreferrer",onClick:j,sx:{...Qe,pointerEvents:O?"none":"auto"},hoverColor:"accent.fg",draggable:!1,tabIndex:-1,...(0,ey.G)("roadmap-item-link"),children:B}):B,l?(0,F.jsx)(lv.A,{sx:{ml:1,color:"fg.muted"},children:`#${l}`}):null,(0,F.jsx)(Vj,{assignees:s,wrapperSx:{zIndex:1},avatarProps:{onFocus:P},...(0,ey.G)("roadmap-item-assignees")})]}),Q=u?.operation==="expand-leading"&&!u?.swapHandles||u?.operation==="expand-trailing"&&u?.swapHandles,J=u?.operation==="expand-trailing"&&!u?.swapHandles||u?.operation==="expand-leading"&&u?.swapHandles,X=!(0,fK.G7)("memex_roadmap_drag_style")&&(O||g);return(0,F.jsxs)(Kf,{role:"gridcell",...(0,ey.G)("roadmap-pill"),"data-date-start":S?aN(S):void 0,"data-date-end":k?aN(k):void 0,sx:{backgroundColor:"initial",zIndex:0,display:"flex",alignItems:"center",width:"100%"},children:[(0,F.jsx)(lx.A,{ref:C,role:"presentation",sx:{position:"absolute",width:0},style:{left:N}}),(0,F.jsxs)(lx.A,{ref:d.setNodeRef,sx:{position:"absolute",display:"flex",alignItems:"center"},style:{left:N},...(0,ey.G)("roadmap-view-pill-background"),children:[H,!M.enabled&&(0,F.jsx)(lx.A,{sx:Qa})]}),O&&!g&&(0,F.jsx)(Qm,{timeSpan:u.adjustedTimeSpan}),(0,F.jsxs)(lx.A,{ref:d.setNodeRef,sx:{position:"absolute",display:"flex",alignItems:"center",zIndex:1},style:{left:N,transform:`translateX(${O&&u.dragGhostSpan.startX?u.dragGhostSpan.startX-N:0}px) translateZ(0)`},...y,...(0,ey.G)("roadmap-view-pill-foreground"),children:[U,o.has("allowed-drag-expand")&&S&&k?(0,F.jsxs)(F.Fragment,{children:[J?null:(0,F.jsx)(Qd,{tooltip:KM({start:O?u.adjustedTimeSpan.start:r.start,startIteration:O?u.adjustedTimeSpan.startIteration:r.startIteration,end:void 0})||n6.noDateSet,operation:"expand-leading",active:Q,ref:d.setActivatorNodeRef,containerRef:d.node,...d.attributes,...d.listeners,tabIndex:-1,"aria-label":"Resize the item by dragging the earlier date"}),Q?null:(0,F.jsx)(Qd,{tooltip:KM({start:void 0,end:O?u.adjustedTimeSpan.end:r.end,endIteration:O?u.adjustedTimeSpan.endIteration:r.endIteration})||n6.noDateSet,operation:"expand-trailing",active:J,ref:d.setActivatorNodeRef,containerRef:d.node,...d.attributes,...d.listeners,tabIndex:-1,"aria-label":"Resize the item by dragging the later date"})]}):null]}),f||O?(0,F.jsx)(lx.A,{sx:{position:X||I||M.enabled?"absolute":"sticky",display:"flex",alignItems:"center"},style:{left:X||I||M.enabled?N+8:h+8,opacity:O||g?.3:void 0},...(0,ey.G)("roadmap-view-item-pill-content"),children:M.enabled?(0,F.jsx)(h4.A,{title:e,expandable:!0,sx:{maxWidth:T-16,display:"flex",alignItems:"center"},children:q}):q}):A||R?(0,F.jsx)(Kq,{isBefore:A,startDate:S,endDate:k}):null]})}),Qm=({timeSpan:e})=>{let{getX:t}=q4(),[a,r]=nW([e.start,e.end]),n=a?t(a):0,i=r?t((0,tP.f)(r,1))-n:0;return(0,F.jsx)(lx.A,{sx:Qi,style:{width:i,left:n},...(0,ey.G)("roadmap-view-pill-drag-target"),children:"\xa0"})};try{Qd.displayName||(Qd.displayName="RoadmapPillDragHandle")}catch{}try{Qd.displayName||(Qd.displayName="RoadmapPillDragHandle")}catch{}try{Qc.displayName||(Qc.displayName="RoadmapPill")}catch{}try{Qm.displayName||(Qm.displayName="TargetPill")}catch{}let Qp=(0,K.memo)(function({item:e,mouseState:t,setIsDragging:a,...r}){let n=q6(),i=q8(),{getX:l,getDateFromClientX:s,totalWidth:o}=q4(),{canUpdateItem:d}=K3(),{dateFields:u,getTimeSpanFromColumnData:c}=ko(),m=kc(),{updateItemDates:p}=K$(),{roadmapRef:h}=q7(),{temporarilyIgnorePillLinkClick:f}=KG(),[g,y]=(0,K.useState)(null),[x,b]=(0,K.useState)(void 0),v=(0,K.useMemo)(()=>c(e.columns),[e.columns,c]),w=h.current?.getBoundingClientRect().left??0,j=(0,K.useCallback)(e=>v.startIteration&&!e.startIteration&&u[0]?Qh(u[0]):v.endIteration&&!e.endIteration&&u[1]?Qh(u[1]):void 0,[u,v]),C=(0,K.useCallback)(t=>{let a=j(t);return a?(b(a.id),Promise.resolve()):(y(t),f(),p(e,t).finally(()=>{y(null)}))},[j,e,p,f]),I=(0,K.useCallback)(()=>{f(2e3)},[f]),{memex_small_viewport_a11y:S}=iz(),{isTouchDevice:k}=(0,K2.k)(),{allowedOperations:N,dragProps:T,dragDetails:_}=function({timeSpan:e,onSaveDate:t,onCancel:a,disabled:r}){let{getDateFromClientX:n,getXFromClientX:i,getDateFromX:l}=q4(),s=q8(),{dateFields:o}=ko(),{getNextTimeSpanWithDates:d,getNextTimeSpanWithIterations:u,getGhostSpan:c}=function(){let e=q6(),{getX:t}=q4(),{dateFields:a}=ko(),r=a[0]??lH,n=a[1]??lH,i=(0,K.useCallback)((e,a,r,n=!1)=>{let[i,l]=nW([e.start,e.end]);if(!(i&&l))return{startX:0,endX:0};let s={startX:t(i),endX:t(K4(l,1))};switch(a){case"move":s.startX+=r,s.endX+=r;break;case"expand-leading":n?(s.startX=t(l),s.endX=t(i),s.endX+=r):s.startX+=r;break;case"expand-trailing":n?(s.startX=t(K4(l,1)),s.endX=t(K4(i,1)),s.startX+=r):s.endX+=r}return s},[t]),l=(0,K.useCallback)((t,a,i)=>{let l=e(i);if(K6(r)&&K6(n)&&t.startIteration===t.endIteration||K6(r)&&n===lH||r===lH&&K6(n));else if(K6(r)&&K8(n))switch(a){case"move":if(t.start&&t.end){let e=(0,K5.m)(t.end,t.start);l.end=l.start&&K4(l.start,e)}else t.start?(l.end=void 0,l.endIteration=void 0):(l.start=void 0,l.startIteration=void 0);break;case"expand-leading":t.end&&(l.end=t.end,l.endIteration=t.endIteration);break;case"expand-trailing":t.start&&(l.start=t.start,l.startIteration=t.startIteration);break;default:tA(a)}else if(K8(r)&&K6(n))switch(a){case"move":if(t.start&&t.end){let e=(0,K5.m)(t.end,t.start);l.start=l.end&&K4(l.end,-e)}else t.start?(l.end=void 0,l.endIteration=void 0):(l.start=void 0,l.startIteration=void 0);break;case"expand-leading":t.end&&(l.end=t.end,l.endIteration=t.endIteration);break;case"expand-trailing":t.start&&(l.start=t.start,l.startIteration=t.startIteration);break;default:tA(a)}else switch(a){case"move":if(t.startIteration&&t.endIteration&&t.start&&t.end){let a=(0,K5.m)(t.end,t.start),r=l.start&&e(K4(l.start,a));l.end=r?.end,l.endIteration=r?.endIteration}else t.start?(l.end=void 0,l.endIteration=void 0):(l.start=void 0,l.startIteration=void 0);break;case"expand-leading":t.end&&(l.end=t.end,l.endIteration=t.endIteration);break;case"expand-trailing":t.start&&(l.start=t.start,l.startIteration=t.startIteration);break;default:tA(a)}if(!(l.start&&l.end&&(0,tE.d)(l.start,l.end)))return l},[n,e,r]),s=(0,K.useCallback)((e,t,a)=>{let{start:r,end:n}=e,i=r,l=n;switch(t){case"move":i=r?K4(r,a):void 0,l=n?K4(n,a):void 0;break;case"expand-leading":r?(i=K4(r,a),n||(l=r)):n&&(i=K4(n,a));break;case"expand-trailing":n?(l=K4(n,a),r||(i=n)):r&&(l=K4(r,a))}let s=!!(i&&l&&(0,tE.d)(i,l));return s&&("expand-leading"===t&&i&&(i=K4(i,-1)),"expand-trailing"===t&&l&&(l=K4(l,1)),[i,l]=[l,i]),{swapHandles:s,nextTimeSpan:{start:i,end:l}}},[]);return(0,K.useMemo)(()=>({getNextTimeSpanWithDates:s,getNextTimeSpanWithIterations:l,getGhostSpan:i}),[s,l,i])}(),m=(0,K.useRef)(null),p=o[0]??lH,h=o[1]??lH,f=K6(p)||K6(h),g=e.start&&e.end&&(0,tE.d)(e.start,e.end),y=K3().canUpdate&&!r,x=y&&!o.some(e=>e===lH)&&!(f&&p===h)&&!(f&&g),b=(0,kS.PM)({id:"pill",disabled:!y}),{isDragging:v,activatorEvent:w,transform:j}=b;Lx("is-dragging",v),(0,K.useEffect)(()=>{!v&&m.current&&(m.current=null)},[v]);let C=(0,K.useMemo)(()=>{let e=new Set;return y&&e.add("allowed-drag-update"),x&&e.add("allowed-drag-expand"),e},[x,y]),I=(0,K.useMemo)(()=>{if(w&&w.target instanceof HTMLElement){let e=w.target.closest("[data-dnd-operation]");if(e&&e instanceof HTMLElement){let t=e.getAttribute("data-dnd-operation");if(t&&K7.has(t))return t}}return"move"},[w]),S=(()=>{let t;let a=w&&"clientX"in w?w.clientX:null;if(!I||!a)return null;if(!m.current){let e=i(a),t=n(a);if(!t)return null;m.current={x:e,date:t}}let r=s(),o=Math.min(r.right-m.current.x,Math.max(r.left-m.current.x,j?.x??0)),p=m.current.date,h=l(m.current.x+o);if(!h||!p)return null;let y={...e};g&&(y.start=e.end,y.startIteration=e.endIteration,y.end=e.start,y.endIteration=e.startIteration);let x=(0,K5.m)(h,p),b=!1;if(f){let e;switch(I){case"move":e=h;break;case"expand-leading":e=y.start?K4(y.start,x):h;break;case"expand-trailing":e=y.end?K4(y.end,x):h;break;default:tA(I)}if(!(t=u(y,I,e)))return null}else{let{nextTimeSpan:e,swapHandles:a}=d(y,I,x);t=e,b=a}let v=c(y,I,o,b);return{operation:I,adjustedTimeSpan:t,dragGhostSpan:v,swapHandles:b}})(),k=(0,K.useCallback)(async()=>{S?.adjustedTimeSpan&&C.has("allowed-drag-update")&&await t(S.adjustedTimeSpan)},[C,S?.adjustedTimeSpan,t]);return(0,kS.E5)({onDragEnd:k,onDragCancel:a}),{dragProps:b,allowedOperations:C,dragDetails:S}}({timeSpan:v,disabled:e.contentType===eJ.RedactedItem||!!g||(k??!1)&&S,onSaveDate:C,onCancel:I});Fi({active:T.isDragging,axis:"x",scrollRef:h,strength:20,bufferX:[m,50],bufferY:[20,20],ease:e=>Math.pow(e,5)}),(0,pk.N)(()=>{if(x){if(t&&t.isHovered&&t.mouseX){let e=t.mouseX>w+m+8?s(t.mouseX):void 0,a=e&&n(e);(!a||a.start&&a.end)&&b(void 0)}else b(void 0)}},[t?.isHovered,x,t,w,m,s,n]),(0,K.useEffect)(()=>{a(T.isDragging)},[T.isDragging,a]);let[A,R]=nW([v.start,v.end]),P=A?l(A):0,D=R?l((0,tP.f)(R,1))-P:0,E=P+D<=0,M=!E&&!(P>=o),B=A||R,L=!!(T.isDragging&&_&&j(_.adjustedTimeSpan)),O=!B&&d(e),G=B&&x||L;if((O||G)&&t&&t.isHovered&&t.mouseX){let a=t.mouseX>w+m+8?s(t.mouseX):void 0;if(a){let r;let n=i().left,l=t.mouseX<w+m+30,s=t.buttonPressedOnEntry&&!T.isDragging;return l&&!x||s?(r=n+8+11,a=void 0):r=n-w-m+t.mouseX,(0,F.jsx)(KK,{item:e,date:a,offsetX:r,hideTooltip:T.isDragging,hidePlaceholder:s})}}return L?null:M?(0,F.jsx)(Qc,{item:e,timeSpan:v,allowedOperations:N,dragProps:T,dragDetails:_,pendingTimeSpan:g,...r}):B?(0,F.jsx)(Kq,{role:"gridcell",isBefore:E,startDate:A,endDate:R}):d(e)&&!x?(0,F.jsx)(KK,{isDefaultAddButton:!0,item:e,date:void 0,offsetX:0}):null});function Qh(e){if(e&&e!==lH&&oZ(e))return e}try{Qp.displayName||(Qp.displayName="RoadmapPillArea")}catch{}let Qf="is-roadmap-table-expanding-dragging",Qg=[kS.dU],Qy={start:["Space","Enter"],cancel:["Escape"],end:["Space","Enter","Tab"]},Qx=(0,K.memo)(function({children:e,focusable:t}){let{columnWidth:a}=q4(),{roadmapRef:r}=q7(),n=Ke(),[i,l]=(0,K.useState)(!1),s=(0,K.useCallback)(()=>{l(!0),n(!0)},[n]),o=(0,K.useCallback)(()=>{l(!1),n(!1)},[n]),{updateTitleColumnWidth:d,updateLocalTitleColumnWidth:u}=ko(),c=kp();Lx("is-dragging",i),Lx("is-roadmap-table-expanding-dragging",i);let m=T4(),p=Hl(),h=(0,K.useCallback)(e=>{let t=e.active.rect.current.initial;if(!t)return;let a=e.delta.x;return Math.min(Math.max(Math.round(Math.floor(t.left+t.width/2)+a-c-(r.current?.getBoundingClientRect().left??0)),75),1e3)},[c,r]),f=(0,K.useCallback)(e=>{s();let t=h(e);t&&(u(t),m(),p())},[p,m,h,s,u]),g=(0,K.useCallback)(async e=>{o();let t=h(e);if(t)try{await d(t)}finally{u(null)}},[o,h,d,u]),y=(0,K.useCallback)(async e=>{o(),u(null)},[u,o]),x=(0,K.useCallback)((e,t)=>{let{currentCoordinates:r}=t;switch(fA(e)){case fN.ARROW_RIGHT:return{...r,x:r.x+a};case fN.ARROW_LEFT:return{...r,x:r.x-a}}},[a]),b=(0,kS.MS)(kS.AN),v=(0,kS.MS)(kS.uN,{coordinateGetter:x,keyboardCodes:Qy}),w=(0,kS.FR)(b,t?v:null),j=x_();return(0,F.jsx)(kS.Mp,{autoScroll:!1,onDragStart:s,onDragMove:f,onDragEnd:g,onDragCancel:y,modifiers:Qg,sensors:w,accessibility:(0,K.useMemo)(()=>({container:j}),[j]),children:e})});try{Qx.displayName||(Qx.displayName="RoadmapTableColumnResizeProvider")}catch{}let Qb={cursor:"col-resize",paddingLeft:"8px",position:"absolute",top:0,right:"-8px",width:"16px",height:"100%",zIndex:3,"&::after":{content:'""',position:"absolute",top:"-1px",right:"8px",bottom:"-1px",borderRight:"1px solid",borderColor:"border.muted"},[`body.${Qf} &`]:{"&::after":{borderRightColor:"accent.fg"}}},Qv=e=>{e.stopPropagation(),e.preventDefault()},Qw=e=>{e.stopPropagation(),e.preventDefault()},Qj=e=>{e.stopPropagation(),e.preventDefault()},QC=(0,K.memo)(function({id:e}){let t=kc(),a=kp(),{attributes:{role:r,...n},listeners:i,setNodeRef:l}=(0,kS.PM)({id:e,attributes:{role:"separator",tabIndex:-1}});return(0,F.jsx)(lx.A,{sx:Qb,className:"roadmap-drag-sash",ref:l,role:r,"aria-label":n6.dragSashAriaLabel,"aria-valuenow":t+60,"aria-valuemin":135+a,"aria-valuemax":1060+a,"aria-orientation":"vertical",...i,onClick:Qv,onFocus:Qj,onMouseDown:Qw,...n,...(0,ey.G)("roadmap-table-drag-sash")})}),QI={cursor:"col-resize",display:"flex",position:"sticky",width:"18px",height:"32px",zIndex:3,alignItems:"center",top:"-32px",justifyContent:"center","& > svg":{backgroundColor:"canvas.default",transform:"rotate(90deg)"},[`&:hover, &:focus-visible, .${Qf} &`]:{"& > svg":{color:"accent.fg"}}},QS=(0,K.memo)(function({id:e}){let t=kc(),a=kp(),r=Hl(),{attributes:{role:n,...i},listeners:l,setNodeRef:s}=(0,kS.PM)({id:e,attributes:{role:"separator"}}),o=(0,K.useRef)(null),[d,u]=(0,Sf.B)({contentRef:o,"aria-label":n6.dragSashAriaLabel});return(0,F.jsxs)(lx.A,{sx:QI,ref:e=>{o.current=e,s(e)},style:{left:t-8-1},role:n,"aria-label":n6.dragSashAriaLabel,"aria-valuenow":t+60,"aria-valuemin":135+a,"aria-valuemax":1060+a,"aria-orientation":"vertical",...l,...i,...d,...(0,ey.G)("roadmap-table-drag-sash"),onFocus:(0,K.useCallback)(()=>{d.onFocus(),r()},[r,d]),children:[(0,F.jsx)(ly.UnfoldIcon,{}),u]})});try{QC.displayName||(QC.displayName="RoadmapTableDragSash")}catch{}try{QS.displayName||(QS.displayName="RoadmapTableHeaderDragSash")}catch{}let Qk={...Kh,height:40,position:"sticky",flexGrow:1,left:60},QN=(0,K.memo)(function({number:e,cell:t,focusCellElement:a,isLastCell:r}){let{titleColumnWidth:n}=ko(),{hasWritePermissions:i}=eK(),l=Km();return(0,F.jsx)(_l,{row:t.row,column:t.column,render:t.render,getCellProps:t.getCellProps,isDragging:!1,focusCellElement:a,sx:Qk,styles:{...l,maxWidth:n,minWidth:n},className:"roadmap-table-cell",children:i&&r&&(0,F.jsx)(Qx,{children:(0,F.jsx)(QC,{id:`RoadmapTableDragSash-${e}`})})})}),QT={...Kh,height:40,position:"sticky",left:"0px",flexShrink:0,width:60,minWidth:60},Q_=(0,K.memo)(function({cell:e,focusCellElement:t,isDragging:a}){return(0,F.jsx)(_l,{row:e.row,column:e.column,render:e.render,getCellProps:e.getCellProps,isDragging:a,focusCellElement:t,sx:QT,className:"roadmap-table-cell"})}),QA={...Kh,height:40,position:"sticky",flexGrow:1,maxWidth:120,minWidth:120},QR=(0,K.memo)(function({number:e,startCell:t,endCell:a,focusCellElement:r}){let{hasWritePermissions:n}=eK(),{titleColumnWidth:i}=ko(),l=a&&t!==a,s=t?120:0,{state:{focus:o}}=ck(),{isFocused:d}=t?Tj(t,o):{isFocused:!1},{isFocused:u}=a?Tj(a,o):{isFocused:!1},c=Tm(t),m=Tm(a);return(0,F.jsxs)(F.Fragment,{children:[t&&(0,F.jsx)(_l,{row:t.row,column:t.column,render:t.render,getCellProps:t.getCellProps,isDragging:!1,focusCellElement:r,sx:QA,styles:{maxWidth:120,minWidth:120,left:60+i},className:"roadmap-table-cell",children:!l&&n&&(0,F.jsx)(Qx,{children:!c&&!d&&(0,F.jsx)(QC,{id:`RoadmapTableDragSash-${e}`})})}),l&&(0,F.jsx)(_l,{row:a.row,column:a.column,render:a.render,getCellProps:a.getCellProps,isDragging:!1,focusCellElement:r,sx:QA,styles:{maxWidth:120,minWidth:120,left:60+i+s},className:"roadmap-table-cell",children:n&&(0,F.jsx)(Qx,{children:!m&&!u&&(0,F.jsx)(QC,{id:`RoadmapTableDragSash-${e}`})})})]})});try{QN.displayName||(QN.displayName="RoadmapTitleCell")}catch{}try{Q_.displayName||(Q_.displayName="RoadmapNumberCell")}catch{}try{QR.displayName||(QR.displayName="RoadmapTimeSpanCells")}catch{}let QP=(0,K.memo)(function({row:e,itemData:t}){let a=(0,K.useRef)(null),{isVisible:r}=pA({ref:a}),[n,i]=(0,K.useState)(!1),{showDateFields:l}=ko(),{dateFields:s}=ko(),{mouseState:o,...d}=K1(),u=(0,kS.FR)((0,kS.MS)(kS.AN,{activationConstraint:{distance:2}})),c=[kS.dU],m=e.original,p=m.getHtmlTitle(),h=m.getUrl(),f=m.columns,g=f[eT.Title],y=(0,K.useMemo)(()=>g?AK(g):AJ,[g]),x=f[eT.Assignees],b=aA(g),v=x_(),{roadmapShowDateFields:w}=_B();t.prepareRow(e);let j=e.cells.find(e=>e.column.id===kx),C=e.cells.find(e=>e.column.columnModel?.id===eT.Title),I=l?e.cells.find(e=>s[0]!==lH&&e.column.columnModel?.id===s[0]?.id):void 0,S=l?e.cells.find(e=>s[1]!==lH&&e.column.columnModel?.id===s[1]?.id):void 0,k=e.cells.find(e=>e.column.id===qH),N=(0,K.useMemo)(()=>({container:v,screenReaderInstructions:{draggable:w.enabled?"To update the start and target dates, drag item or edit date fields":'To update the start and target dates, drag item or enable the user setting "Show date fields" in the views options menu to edit date fields'}}),[v,w.enabled]),{setNodeRef:T,setActivatorNodeRef:_,listeners:A,isSorting:R,isDragging:P,isDropped:D}=NU(e),E=(0,K.useMemo)(()=>({rowNumber:e.index+1,setSortActivatorNodeRef:_,sortListeners:A}),[e.index,_,A]);(0,fn.T)(T,a);let{isTableNarrow:M}=kw();return r&&C&&k&&j?(0,F.jsxs)(Kx,{ref:a,row:e,...(0,ey.G)(TY(e.index)),isDraggingPill:n,isHighlighted:P||D,...R?{}:d,className:M?"narrow-roadmap-table":"",children:[(0,F.jsxs)(_c.Provider,{value:E,children:[(0,F.jsx)(Q_,{cell:j,focusCellElement:t.focusCellElement,isDragging:R}),(0,F.jsx)(QN,{cell:C,focusCellElement:t.focusCellElement,number:b,isLastCell:!l||!I&&!S}),l&&(0,F.jsx)(QR,{startCell:I,endCell:S,focusCellElement:t.focusCellElement,number:b})]}),(0,F.jsx)(kS.Mp,{sensors:u,autoScroll:!1,modifiers:c,accessibility:N,children:(0,F.jsx)(KO,{cell:k,rowRef:a,children:(0,F.jsx)(Qp,{titleHtml:p,renderLink:m.contentType!==eJ.RedactedItem,url:h,titleColumnValue:y,number:b,assignees:x,index:e.index,item:m,mouseState:o,setIsDragging:i})})})]}):(0,F.jsx)(Kx,{"aria-hidden":"true",ref:a})});try{QP.displayName||(QP.displayName="RoadmapItem")}catch{}let QD=e=>e&&cu(e.sourceObject)&&e.sourceObject.dataType===eN.Milestone?nH.cannotAddItemsWhenGroupByMilestone:nH.addItem,QE={position:"sticky",left:0},QM=(0,K.memo)(function({groupId:e,groupRows:t,groupMetadata:a,...r}){let n=(0,K.useRef)(null),{omnibarRef:i,onFocus:l,onKeyDown:s}=Hu(e),{isVisible:o}=pA({ref:n}),d=(0,K.useRef)(!1),u=!!a&&cu(a.sourceObject),c=QD(a),m=kc(),p=(0,K.useMemo)(()=>{if(!a||!t)return null;let e=fH(a.sourceObject);return{updateColumnActions:e?[e]:void 0,previousItemId:t[t.length-1]?.original?.id}},[a,t]);(0,pk.N)(()=>{d.current&&(d.current=!1,n?.current&&("scrollIntoViewIfNeeded"in n.current&&"function"==typeof n.current.scrollIntoViewIfNeeded?n.current.scrollIntoViewIfNeeded(!1):n.current.scrollIntoView({block:"nearest"})))});let h=(0,K.useCallback)(()=>{d.current=o},[o]);return(0,F.jsx)(Kx,{ref:n,...(0,ey.G)("roadmap-omnibar-item"),children:(0,F.jsx)(Kf,{sx:QE,style:{width:m},...r,children:(0,F.jsxs)(Kp,{sx:{padding:"0 0 0 12px",bg:u?"canvas.subtle":"canvas.default",color:u?"fg.muted":"inherit"},children:[(0,F.jsx)(F1,{ref:i,newItemAttributes:p??void 0,defaultPlaceholder:c,onFocus:l,onKeyDown:s,onAddItem:h,groupingMetadata:a,disabled:u}),(0,F.jsx)(Qx,{children:(0,F.jsx)(QC,{id:"RoadmapTableDragSash-omnibar"})})]})})})});try{QM.displayName||(QM.displayName="RoadmapOmnibarItem")}catch{}let QB=({pageType:e})=>e===sR?(0,F.jsx)(QL,{}):e===sP?(0,F.jsx)(QF,{}):sQ(e)?(0,F.jsx)(QO,{groupId:e.groupId}):null,QL=()=>{let{ref:e,hasNextPage:t}=GM();return(0,F.jsx)("div",{ref:e,...(0,ey.G)("roadmap-pagination"),children:t?[...[,,,,,].keys()].map(e=>(0,F.jsx)(QV,{},e)):null})},QF=()=>{let{ref:e,hasNextPage:t}=GB();return(0,F.jsx)("div",{ref:e,...(0,ey.G)("roadmap-pagination"),children:t?[...[,,,,,].keys()].map(e=>(0,F.jsx)(QV,{},e)):null})},QO=({groupId:e})=>{let{ref:t,hasNextPage:a}=GF(e);return(0,F.jsx)("div",{ref:t,...(0,ey.G)(`roadmap-pagination-${e}`),children:a?[...[,,,,,].keys()].map(e=>(0,F.jsx)(QV,{},e)):null})},QG=()=>{let e=kc();return(0,F.jsx)(lx.A,{className:"roadmap-row",role:"row",sx:Kg,...(0,ey.G)("placeholder-row"),children:(0,F.jsx)(_o,{className:"roadmap-table-cell",sx:Kh,style:{height:"100%",position:"sticky",left:0,width:e,paddingLeft:"60px"},children:(0,F.jsx)(GP,{minWidth:80,maxWidth:200,...(0,ey.G)("placeholder")})})})},QV=(0,K.memo)(QG);try{QB.displayName||(QB.displayName="RoadmapPagination")}catch{}try{QL.displayName||(QL.displayName="UngroupedPagination")}catch{}try{QF.displayName||(QF.displayName="GroupsPagination")}catch{}try{QO.displayName||(QO.displayName="GroupedItemsPagination")}catch{}try{QG.displayName||(QG.displayName="PlaceholderRowUnmemoized")}catch{}try{QV.displayName||(QV.displayName="PlaceholderRow")}catch{}let Q$=(0,K.memo)(function({groupMetadata:e,groupId:t,rows:a,isOmnibarFixed:r,itemData:n}){let{hasWritePermissions:i}=eK(),{memex_table_without_limits:l}=iz();return(0,F.jsxs)(K.Fragment,{children:[a.map(e=>(0,F.jsx)(QP,{row:e,itemData:n},e.original.id)),l&&(0,F.jsx)(QB,{pageType:e?{groupId:e.value}:sR}),i&&!r&&(0,F.jsx)(QM,{groupMetadata:e,groupRows:a,groupId:t})]})});try{Q$.displayName||(Q$.displayName="RoadmapItems")}catch{}let QW={roadmapGroupHeader:"RoadmapGroup-module__roadmapGroupHeader--ZrQoC"};function Qz({collapsedGroupIds:e,tableGroups:t,itemData:a}){let{memex_table_without_limits:r}=iz();return(0,F.jsxs)(K.Fragment,{children:[t.map((t,n)=>{let i=e.includes(t.groupedValue);return(0,F.jsxs)(K.Fragment,{children:[(0,F.jsx)(QU,{metadata:{value:t.groupedValue,sourceObject:t.groupedSourceObject},totalCount:r?t.totalCount:t.subRows.length,index:n,collapsed:i,rows:t.subRows,itemData:a,groupId:t.id}),(0,F.jsx)(HC,{})]},t.id)}),r&&(0,F.jsx)(QB,{pageType:sP})]})}let QH={position:"sticky",left:0,overflow:"hidden",zIndex:2,pl:2,gap:2},QU=(0,K.memo)(function({collapsed:e,metadata:t,rows:a,itemData:r,groupId:n,totalCount:i}){let{hideItemsCount:l,getAggregatesForItems:s,getAggregatesForGroupId:o}=Sq(),d=(0,K.useMemo)(()=>a.map(e=>e.original),[a]),{memex_table_without_limits:u}=iz(),c=u?(0,K.useMemo)(()=>o(t.value),[o,t.value]):(0,K.useMemo)(()=>s(d),[d,s]),m=cp(t.sourceObject),{hasWritePermissions:p}=eK(),{setNodeRef:h,isOver:f}=$v({groupId:n,groupedValue:t.value,isCollapsed:e,isEmpty:0===a.length}),g=kc();return(0,F.jsxs)(lx.A,{...(0,ey.G)(`roadmap-group-${m}`),role:"rowgroup",sx:{...e?QK:Qq,borderColor:f?"accent.fg":"border.muted"},ref:h,children:[(0,F.jsxs)(QQ,{children:[(0,F.jsxs)($j,{isCollapsed:e,metadata:t,itemsInGroup:a.map(e=>e.original),sx:QH,style:{minWidth:g,width:g},className:QW.roadmapGroupHeader,children:[(0,F.jsx)($D,{sourceObject:t.sourceObject,aggregates:c,hideItemsCount:l,rowCount:i,titleSx:{flexShrink:1}}),p&&(0,F.jsx)(Qx,{children:(0,F.jsx)(QC,{id:`RoadmapTableDragSash-${t.value}`})})]}),(0,F.jsx)(KZ,{rows:a})]}),!e&&(0,F.jsx)(Nq,{rows:a,groupedValue:t.value,children:(0,F.jsx)(Q$,{groupMetadata:t,rows:a,isOmnibarFixed:!1,itemData:r,groupId:n})})]})}),Qq={position:"relative",display:"flex",flexDirection:"column",borderTop:"1px solid",borderTopColor:"border.default","&:first-child":{borderTop:"none"},...Ky},QK={...Qq,borderBottom:"1px solid",borderBottomColor:"border.default","&::after":{borderBottom:"none"}},QQ=({children:e})=>(0,F.jsx)(lx.A,{sx:QJ,role:"row",...(0,ey.G)("roadmap-group-header-row"),children:e}),QJ={display:"flex",position:"relative",alignItems:"center",height:"44px"};try{Qz.displayName||(Qz.displayName="GroupedRoadmapItems")}catch{}try{QU.displayName||(QU.displayName="RoadmapGroup")}catch{}try{QQ.displayName||(QQ.displayName="RoadmapGroupHeaderRow")}catch{}var QX=a(42150),QY=a(94978),QZ=a(77068),Q0=a(11897),Q1=a(92528);let Q2={today:{nub:"danger.fg",marker:"danger.muted"},customDate:{nub:"fg.subtle",marker:"fg.muted"},iteration:{nub:"fg.subtle",marker:"fg.muted"},currentIteration:{nub:"accent.fg",marker:"accent.muted"},iterationBreak:{nub:"canvas.default"},milestone:{nub:"success.fg",marker:"success.muted"},divider:{marker:"border.default"}},Q5={position:"absolute",width:"1px",borderLeftWidth:1,borderLeftStyle:"solid",top:"1px",bottom:0,zIndex:-1},Q3={...Q5,borderLeftColor:Q2.today.marker,borderLeftWidth:2},Q4={...Q5,borderLeftColor:Q2.iteration.marker,opacity:.33},Q6={...Q5,borderLeftColor:Q2.milestone.marker},Q8={...Q5,borderLeftColor:Q2.customDate.marker,opacity:.33},Q7={...Q5,borderLeftColor:Q2.currentIteration.marker},Q9={...Q5,borderLeftColor:Q2.divider.marker},Je={display:"inline-block",position:"absolute",height:"7px",width:"7px",borderRadius:0,zIndex:2,top:"-4.5px"},Jt={...Je,borderRadius:"100%",backgroundColor:Q2.today.nub,width:"8px",height:"8px",top:"-5px"},Ja={...Je,backgroundColor:"transparent"},Jr={...Je,backgroundColor:"transparent",borderColor:Q2.iteration.nub,borderStyle:"solid",borderWidth:2,borderRadius:"100%"},Jn={...Je,borderRadius:"2px",backgroundColor:Q2.milestone.nub,transform:"rotate(45deg)"},Ji={...Je,height:"4px",width:"4px",borderRadius:0,backgroundColor:Q2.customDate.nub,top:"-4.5px",borderTopRightRadius:"50%",transform:"translate(1.5px, 2px) rotate(120deg) skewX(-30deg) scale(1,.866)","&::before":{content:'""',position:"absolute",height:"4px",width:"4px",backgroundColor:"inherit",borderTopRightRadius:"50%",transform:"rotate(-135deg) skewX(-45deg) scale(1.414,.707) translate(0,-50%)"},"&::after":{content:'""',position:"absolute",height:"4px",width:"4px",backgroundColor:"inherit",borderTopRightRadius:"50%",transform:"rotate(135deg) skewY(-45deg) scale(.707,1.414) translate(50%)"}},Jl={...Jr,backgroundColor:Q2.iterationBreak.nub},Js={...Jr,borderColor:Q2.currentIteration.nub};function Jo(){return(0,F.jsxs)(lx.A,{role:"row",sx:{position:"relative"},children:[(0,F.jsx)(Ju,{}),(0,F.jsx)(Jm,{})]})}function Jd(){return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(Jx,{}),(0,F.jsx)(Jc,{}),(0,F.jsx)(Jf,{})]})}function Ju(){let{getX:e,today:t}=q4(),{singleDayMarkerMap:a}=Kl(),r=e((0,K.useMemo)(()=>(0,tG.L)(t,12),[t]))-3.5,n=(0,K.useRef)(null),{isVisible:i}=pA({ref:n}),[l,s]=(0,Sf.B)({contentRef:n,"aria-label":`Today: ${KM({start:t,end:t})}`}),o=tR(t.toISOString()),d=a.has(o);return(0,F.jsx)(lx.A,{as:"time",role:"gridcell",dateTime:o,ref:n,sx:i&&!d?Jt:Ja,style:{left:`${r}px`},...l,...(0,ey.G)("roadmap-today-marker-nub"),children:s})}function Jc(){let{getX:e,today:t,totalWidth:a}=q4(),{singleDayMarkerMap:r}=Kl(),n=e((0,K.useMemo)(()=>(0,tG.L)(t,12),[t]));if(!(n>0&&n<a))return null;let i=tR(t.toISOString());return r.has(i)?null:(0,F.jsx)(lx.A,{sx:Q3,style:{left:`${n-.5}px`,height:"100%"},...(0,ey.G)("roadmap-today-marker")})}function Jm(){let{markersInRange:e}=Kl();return(0,F.jsx)(F.Fragment,{children:e.map(e=>(0,F.jsx)(Jh,{marker:e,isCurrent:Kd(e)},e.id))})}let Jp={[Kt.CustomDate]:Ji,[Kt.Iteration]:Jr,[Kt.IterationBreak]:Jl,[Kt.Milestone]:Jn};function Jh({isCurrent:e=!1,marker:t}){let{getX:a,today:r}=q4(),{startDate:n,endDate:i}=(0,K.useMemo)(()=>{let e="duration"in t?new Date(t.date):(0,tG.L)(new Date(t.date),12),a="duration"in t?(0,tP.f)(e,t.duration):new Date(t.date);return{startDate:e,endDate:a}},[t]),l=a(new Date(n))-3,s=(0,K.useRef)(null),{isVisible:o}=pA({ref:s}),d=tR(r.toISOString()),u=t.date===d&&!("duration"in t),{startDate:c,endDate:m}="duration"in t?az({startDate:t.date,duration:t.duration}):{startDate:n,endDate:i},p="duration"in t&&t.options.length>1?kn(t.options):`${t.title}: ${KM({start:c,end:m})}`,[h,f]=(0,Sf.B)({contentRef:s,"aria-label":p}),g=e?Js:Jp[t.type];return(0,F.jsx)(lx.A,{as:"time",role:"gridcell",dateTime:t.date,ref:s,sx:u?{...g,backgroundColor:Q2.today.nub}:g,style:{left:`${l}px`,...o?{}:{backgroundColor:"transparent",borderColor:"transparent"}},...h,...(0,ey.G)(`${t.type}-marker-nub-${t.id}`),children:f})}let Jf=(0,K.memo)(function(){let{markersInRange:e}=Kl();return(0,F.jsx)(F.Fragment,{children:e.map(e=>(0,F.jsx)(Jy,{marker:e,isCurrent:Kd(e)},e.id))})}),Jg={[Kt.CustomDate]:Q8,[Kt.Iteration]:Q4,[Kt.IterationBreak]:Q4,[Kt.Milestone]:Q6};function Jy({marker:e,isCurrent:t=!1}){let{getX:a,today:r}=q4(),n=a(new Date((0,K.useMemo)(()=>"duration"in e?new Date(e.date):(0,tG.L)(new Date(e.date),12),[e]))),i=tR(r.toISOString()),l=e.date===i&&!("duration"in e),s=t?Q7:Jg[e.type],o=l?{...s,borderLeftColor:Q2.today.marker,opacity:1}:s;return(0,F.jsx)(lx.A,{...(0,ey.G)(`${e.type}-marker-line`),sx:o,style:{left:`${n}px`,height:"100%"}})}function Jx(){let{getX:e,timeRangeEnd:t,timeRangeStart:a}=q4(),r=kf(),n=Array.from({length:r===lU.Month?Math.abs((0,QZ.I)(t,a))+1:Math.abs((0,QY.W)(t,a))+1},(e,t)=>r===lU.Month?nV((0,Q0.J)((0,Q1.k)(a,{weekStartsOn:1}),t)):nV((0,qK.P)((0,QX.w)(a),t)));return(0,F.jsx)(F.Fragment,{children:n.map(t=>{let a=e(t);return(0,F.jsx)(lx.A,{sx:Q9,style:{left:`${a}px`,height:"100%"}},a)})})}try{Jo.displayName||(Jo.displayName="RoadmapMarkerHeaderNubs")}catch{}try{Jd.displayName||(Jd.displayName="RoadmapMarkers")}catch{}try{Ju.displayName||(Ju.displayName="TodayMarkerNub")}catch{}try{Jc.displayName||(Jc.displayName="TodayMarkerLine")}catch{}try{Jm.displayName||(Jm.displayName="MarkerNubs")}catch{}try{Jh.displayName||(Jh.displayName="MarkerNub")}catch{}try{Jf.displayName||(Jf.displayName="MarkerLines")}catch{}try{Jy.displayName||(Jy.displayName="MarkerLine")}catch{}try{Jx.displayName||(Jx.displayName="DividerMarkersLines")}catch{}let Jb={position:"sticky",left:"4px",paddingLeft:"12px",paddingTop:"8px",fontSize:"12px",backgroundColor:"canvas.default",whiteSpace:"nowrap",flexShrink:0,flexGrow:0,"&:before":{content:'""',position:"absolute",top:0,left:"-20px",width:"20px",height:"100%",backgroundColor:"canvas.default",maskImage:"linear-gradient(to right, rgba(255, 255, 255, 0) 0%, rgba(255, 255, 255, 1) 100%)"}},Jv={position:"absolute",paddingTop:"6px",display:"flex",justifyContent:"center",fontSize:"12px"},Jw={...Jv,color:Q2.today.nub,fontWeight:"bold"},Jj={position:"relative",width:"100%",top:"-32px"},JC=(0,K.memo)(function(){let{totalWidth:e}=q4(),t=Ku(),a=Kc(),{hasWritePermissions:r}=eK();return(0,F.jsxs)(lx.A,{role:"rowgroup",sx:{height:a,borderBottomStyle:"solid",borderBottomWidth:2,borderBottomColor:"border.default",position:"sticky",top:0,zIndex:3,backgroundColor:"canvas.default",width:`${e}px`,color:"fg.muted",contain:"layout"},...(0,ey.G)("roadmap-header"),children:[(0,F.jsx)(Jk,{}),t&&(0,F.jsx)(JT,{}),(0,F.jsx)(JS,{}),(0,F.jsx)(Jo,{}),r?(0,F.jsx)(lx.A,{role:"row",sx:Jj,children:(0,F.jsx)("div",{role:"gridcell",children:(0,F.jsx)(Qx,{focusable:!0,children:(0,F.jsx)(QS,{id:"RoadmapTableHeaderDragSash"})})})}):null]})}),JI={[lU.Month]:1,[lU.Quarter]:7,[lU.Year]:14},JS=(0,K.memo)(function(){let{columnWidth:e,getX:t,timeRangeEnd:a,timeRangeStart:r,today:n}=q4(),i=kf(),l=(0,K.useMemo)(()=>{let l=r.getUTCDay(),s=JI[i],o=(0,tP.f)(r,(s-l+1)%s),d=Math.floor((0,tV.c)(a,o)/s),u=o.getTime();return Array.from({length:d},(a,r)=>{let i=new Date(u+r*s*864e5),l=i.getTime()===n.getTime(),o=`${i.getUTCFullYear()}-${(i.getUTCMonth()+1).toString().padStart(2,"0")}-${i.getUTCDate().toString().padStart(2,"0")}`;return(0,F.jsx)(lx.A,{sx:l?Jw:Jv,role:"columnheader",style:{left:t(i),width:e},as:"time","data-index":r,dateTime:o,"aria-current":l?"date":void 0,children:i.getUTCDate()},o)})},[e,t,a,r,n,i]);return(0,F.jsx)(lx.A,{role:"row",sx:{position:"relative",display:"flex",height:"32px"},children:l})}),Jk=(0,K.memo)(function(){let{timeRangeEnd:e,timeRangeStart:t,getX:a}=q4(),r=kf(),n=(0,QX.w)(t),i=a(nV((0,qK.P)(n,1)))-12,l=(0,K.useMemo)(()=>(0,QY.W)(e,t)+1,[e,t]),s=r===lU.Year,o=(0,K.useMemo)(()=>Array.from({length:l},(r,o)=>{let d=s?"MMM yyyy":"MMMM yyyy",u=(0,qK.P)(n,o),c=nV(u),m=nV((0,qK.P)(u,1)),p=0,h=4,f=12;if(0===o)h=0,i<=0?(f=0,p=0):(f=i<16?i:16,p=i);else if(1===o&&i<0){if(c.getTime()===t.getTime())p=a(m)-a(c)-12;else{let e=12+i;f=e,h=-e,p=a(m)-a(c)-12+e}}else if(o===l-1){let t=a(e)-a(c)+12-32;t<=0?(f=0,p=0):(t<12&&(f=t),p=t)}else p=a(m)-a(c);return(0,F.jsx)(lx.A,{role:"columnheader",sx:Jb,style:{width:`${p}px`,left:`${h}px`,paddingLeft:`${f}px`},children:(0,by.formatDate)(u,d)},u.getTime())}),[l,s,n,i,t,a,e]);return(0,F.jsxs)(lx.A,{role:"row",sx:{position:"relative",display:"flex",height:"32px"},children:[o,(0,F.jsx)(JN,{})]})}),JN=()=>(0,F.jsx)(lx.A,{sx:{position:"sticky",width:"32px}",right:0,backgroundColor:"canvas.default"}}),JT=(0,K.memo)(function(){let{getX:e}=q4(),{markersInRange:t}=Kl(),a=Ko(),r=Ks(),{milestoneMarkers:n,iterationMarkers:i}=(0,K.useMemo)(()=>t.reduce((e,t)=>(t.type===Kt.Iteration||t.type===Kt.IterationBreak?e.iterationMarkers.push(t):t.type===Kt.Milestone&&e.milestoneMarkers.push(t),e),{iterationMarkers:[],milestoneMarkers:[]}),[t]),l=i[0],s=l?e(new Date(l.date)):0;return t.length>0||r>0?(0,F.jsxs)(lx.A,{role:"row",sx:{position:"relative",display:"flex",height:"24px"},children:[(0,F.jsx)(lx.A,{role:"presentation",sx:J_,style:{width:`${s-12}px`},...(0,ey.G)("roadmap-iteration-marker-header-spacer")}),i.map((e,t)=>(0,F.jsx)(JD,{marker:e,nextMarker:i[t+1]},e.id)),a>0&&(0,F.jsx)(lx.A,{role:"presentation",sx:{...J_,width:"200px"},...(0,ey.G)("roadmap-iteration-marker-header-fill")}),n.map(e=>(0,F.jsx)(JP,{marker:e},e.id))]}):null}),J_={position:"sticky",color:Q2.iteration.nub,fontWeight:600,left:"4px",paddingLeft:"12px",paddingTop:"6px",fontSize:"12px",lineHeight:"12px",backgroundColor:"canvas.default",whiteSpace:"nowrap",flexShrink:0,flexGrow:0,"&:before":{content:'""',position:"absolute",top:0,left:"-20px",width:"20px",height:"100%",backgroundColor:"canvas.default",maskImage:"linear-gradient(to right, rgba(255, 255, 255, 0) 0%, rgba(255, 255, 255, 1) 100%)",pointerEvents:"none"}},JA={...J_,color:Q2.milestone.nub,position:"absolute",pl:0,boxShadow:e=>`0px 0px 11px 1px ${e.colors.canvas.default}`,"&:hover":{boxShadow:e=>`10px 0 11px 1px ${e.colors.canvas.default}, -10px 0 11px 1px ${e.colors.canvas.default}`,zIndex:1}},JR={...J_,color:Q2.currentIteration.nub};function JP({marker:e}){let{getX:t}=q4(),a=(0,K.useMemo)(()=>(0,tG.L)(new Date(e.date),12),[e.date]),r=t(a),n=(0,K.useRef)(null),[i,l]=(0,Sf.B)({contentRef:n,"aria-label":KM({start:a,end:a})});return(0,F.jsxs)(lx.A,{ref:n,role:"columnheader",sx:JA,style:{left:r},...i,...(0,ey.G)("roadmap-milestone-marker-header"),children:[(e.options.length||0)>1?(0,F.jsx)(JM,{marker:e}):(0,F.jsx)(JE,{marker:e}),l]})}function JD({marker:e,nextMarker:t}){let{getX:a,timeRangeEnd:r}=q4(),n=Kd(e),i=new Date(e.date),l=t?new Date(t.date):(0,tP.f)(i,e.duration||0),s=a(i),o=a(r<l?r:l),d=(0,K.useRef)(null),[u,c]=(0,Sf.B)({contentRef:d,"aria-label":kn(e.options),anchorOffset:6});return(0,F.jsxs)(lx.A,{ref:d,role:"columnheader",sx:n?JR:J_,style:{width:`${o-s}px`},...(0,ey.G)(`roadmap-iteration-marker-header-${e.id}`),children:[(0,F.jsx)(JB,{ref:d,sx:n?JR:J_,...u,children:1===e.options.length?(0,F.jsx)(F.Fragment,{children:e.title}):(0,F.jsxs)(yu.W,{children:[(0,F.jsx)(yu.W.Anchor,{children:(0,F.jsxs)(p4.Q,{title:e.title,"aria-label":e.title,sx:{all:"unset",cursor:"pointer","&:hover":{backgroundColor:"inherit",textDecoration:"underline"}},children:[e.title,e.date&&(0,F.jsxs)("span",{className:"sr-only",children:["(Starting on ",(0,F.jsx)("time",{dateTime:e.date,children:nG(new Date(e.date))}),")"]})]})}),(0,F.jsx)(yu.W.Overlay,{sx:{marginTop:"7px"},children:(0,F.jsx)(fi.l,{...(0,ey.G)("roadmap-iteration-marker-selector"),children:e.options.map(e=>{let{startDate:t,endDate:a}=az({startDate:e.startDate,duration:e.duration});return(0,F.jsxs)(fi.l.Item,{active:!1,selected:!1,sx:{cursor:"default",pointerEvents:"none","&:hover":{backgroundColor:"unset",color:"unset"}},children:[e.title,(0,F.jsx)(fi.l.Description,{truncate:!0,children:KM({start:t,end:a})})]},e.id)})})})]})}),c]})}function JE({marker:e}){let t=e.options[0],a=t?.url;return(0,F.jsxs)(pw.A,{sx:{all:"unset",cursor:"pointer",display:"inline-block"},target:"_blank",rel:"noopener noreferrer",href:a,title:e.description,children:[e.title,e.date&&(0,F.jsxs)("span",{className:"sr-only",children:["(Due on ",(0,F.jsx)("time",{dateTime:e.date,children:nG(new Date(e.date))}),")"]})]})}function JM({marker:e}){return(0,F.jsxs)(yu.W,{children:[(0,F.jsx)(yu.W.Anchor,{children:(0,F.jsxs)(p4.Q,{as:"button",title:e.description,"aria-label":e.description,sx:{all:"unset",cursor:"pointer","&:hover":{backgroundColor:"inherit",textDecoration:"underline"}},children:[e.options.length," milestones",e.date&&(0,F.jsxs)("span",{className:"sr-only",children:["(Due on ",(0,F.jsx)("time",{dateTime:e.date,children:nG(new Date(e.date))}),")"]})]})}),(0,F.jsx)(yu.W.Overlay,{sx:{marginTop:"7px"},children:(0,F.jsx)(fi.l,{...(0,ey.G)("roadmap-milestone-marker-selector"),children:e.options.map(e=>(0,F.jsxs)(fi.l.LinkItem,{href:e.url,target:"_blank",rel:"noopener noreferrer",children:[e.title,(0,F.jsx)(fi.l.Description,{truncate:!0,children:e.repoNameWithOwner})]},e.id))})})]})}let JB=(0,K.forwardRef)(function({children:e,sx:t,...a},r){let n=(0,K.useRef)(null);(0,K.useImperativeHandle)(r,()=>n.current);let[i,l]=(0,K.useState)(!1);return(0,F.jsxs)(lx.A,{ref:n,...a,sx:{display:"inline-block"},onPointerEnter:e=>{l(!0),a.onPointerEnter?.(e)},onPointerLeave:e=>{l(!1),a.onPointerLeave?.(e)},children:[e,i?(0,F.jsx)(JL,{sx:t,contentRef:n,children:e}):null]})});function JL({contentRef:e,children:t,sx:a}){let r=(0,K.useRef)(null),{left:n,top:i}=JF(r,e);return(0,F.jsx)(Sg.Z,{children:(0,F.jsx)(lx.A,{role:"presentation","aria-hidden":!0,sx:{...a,position:"absolute",fontSize:"12px",lineHeight:"12px",backgroundColor:"canvas.default",pointerEvents:"none",padding:0,boxShadow:e=>`10px 0 11px 1px ${e.colors.canvas.default}, -10px 0 11px 1px ${e.colors.canvas.default}`},style:{left:n,top:i},ref:r,children:t})})}let JF=(e,t)=>{let{roadmapRef:a}=q7(),r=(0,K.useRef)({top:0,left:0});return(0,K.useSyncExternalStore)((0,K.useCallback)(e=>(a.current?.addEventListener("scroll",e),()=>{a.current?.removeEventListener("scroll",e)}),[a]),(0,K.useCallback)(()=>{if(!e.current||!t.current)return r.current;let{left:a,top:n}=(0,b4.uG)(e.current,t.current,{side:"inside-top",align:"start",alignmentOffset:0,anchorOffset:0});return(r.current.left!==a||r.current.top!==n)&&(r.current={left:a,top:n}),r.current},[t,e]))};try{JC.displayName||(JC.displayName="RoadmapHeader")}catch{}try{JS.displayName||(JS.displayName="RoadmapDays")}catch{}try{Jk.displayName||(Jk.displayName="RoadmapMonths")}catch{}try{JN.displayName||(JN.displayName="RoadmapControlsCaulk")}catch{}try{JT.displayName||(JT.displayName="RoadmapMarkerHeaders")}catch{}try{JP.displayName||(JP.displayName="RoadmapMilestoneHeader")}catch{}try{JD.displayName||(JD.displayName="RoadmapIterationHeader")}catch{}try{JE.displayName||(JE.displayName="RoadmapMilestoneMarkerHeaderLink")}catch{}try{JM.displayName||(JM.displayName="RoadmapMilestoneMarkerActionMenu")}catch{}try{JB.displayName||(JB.displayName="HoverOverPortalContent")}catch{}try{JL.displayName||(JL.displayName="OverlayingContent")}catch{}let JO=(0,K.memo)(function({rows:e}){let{omnibarRef:t,onFocus:a,onKeyDown:r}=Hu(),{roadmapRef:n}=q7(),{horizontalScrollbarSize:i,verticalScrollbarSize:l}=Fo(n),{onNewItem:s}=z7(n,e,{rowHeight:40,left:void 0});return(0,F.jsx)(F7,{horizontalScrollbarSize:i,verticalScrollbarSize:l,isFixed:!0,children:(0,F.jsx)(F1,{ref:t,onKeyDown:r,onInputFocus:a,role:"row",childElementRole:"gridcell",onAddItem:s,defaultPlaceholder:F_,isFixed:!0})})});try{JO.displayName||(JO.displayName="RoadmapFixedOmnibar")}catch{}let JG={roadmapScrollContainer:"RoadmapView-module__roadmapScrollContainer--XGRpJ"},JV=[e=>{e.columns.push(qq)}],J$=(0,K.memo)((0,K.forwardRef)(function(e,t){let{addPotentiallyMissingFieldIds:a}=_Y(),{hasWritePermissions:r}=eK(),{dateFields:n,markerFields:i,getTimeSpanFromColumnData:l}=ko(),{allColumns:s}=i5(),o=z8((0,K.useMemo)(()=>({fields:s.filter(e=>e.id===eT.Title),plugins:JV}),[s])),d=(0,K.useRef)({instance:o,getHeaderFocus:Kb,focusableRowFilter:Kj({hasWritePermissions:r,getTimeSpanFromColumnData:l}),focusableColumnFilter:KC({hasWritePermissions:r,getTimeSpanFromColumnData:l})});(0,K.useEffect)(()=>{d.current.focusableRowFilter=Kj({hasWritePermissions:r,getTimeSpanFromColumnData:l}),d.current.focusableColumnFilter=KC({hasWritePermissions:r,getTimeSpanFromColumnData:l})},[r,l]),(0,K.useEffect)(()=>{a([...new Set([...n.filter(S7).map(e=>e.id),...i.map(e=>e.id)])])},[n,i,a]);let{memex_table_without_limits:u}=iz(),c=u?Gf():o.flatRows.length;return(0,F.jsx)(q3,{children:(0,F.jsx)(Nx,{table:o,cellHeight:40,children:(0,F.jsx)(cT,{metaRef:d,children:(0,F.jsx)(Td,{children:(0,F.jsx)(Tx,{children:(0,F.jsx)(Ol,{children:(0,F.jsxs)(TK,{children:[(0,F.jsx)(Gb,{filterCount:(0,K.useDeferredValue)(c)}),(0,F.jsx)(Ki,{rows:o.flatRows,children:(0,F.jsx)(JU,{table:o,ref:t})})]})})})})})})})})),JW={flex:"1 1 auto",position:"relative",display:"flex",flexDirection:"column",gridArea:"2/2",overflow:"hidden"},Jz={...JW},JH={flex:"1 1 auto",display:"flex",flexDirection:"column",position:"absolute",inset:0,backgroundColor:"canvas.subtle",overflow:"auto",scrollbarGutter:"stable","&.is-scrolling-locked":{overflow:"hidden"},"&.is-omnibar-fixed":{paddingBottom:"57px"},"&.horizontal-scrollbar-hidden":{paddingBottom:"69px"},"&.is-grouped":{paddingBottom:0}},JU=(0,K.forwardRef)(function({table:e},t){let a=q9(),{onKeyDown:r,onBlur:n}=H5(),{collapsedGroups:i}=d7(),{today:l}=q4(),s=kc(),o=Kc(),{roadmapRef:d,scrollToDate:u,shiftToNextRange:c,shiftToPrevRange:m}=q7(),{horizontalScrollbarSize:p}=Fo(d),{rows:h,groupedRows:f}=e,g=(0,K.useRef)(null),{loadingState:y}=Vz(),{hasWritePermissions:x}=eK(),{setShowAddFieldModal:b,showAddFieldModal:v}=Fc(),{anchorRef:w}=Fh(),{navigationDispatch:j}=ck(),{memex_disable_autofocus:C,memex_small_viewport_a11y:I}=iz(),S=$W(e),k=(0,K.useCallback)(()=>{S&&j(S)},[j,S]);(0,K.useEffect)(()=>{C||k()},[k,C]),(0,K.useImperativeHandle)(t,()=>({focusIn:k}));let N=$H({table:e,totalHeight:y===VW.loaded?40*h.length+o:40+o,scrollRef:g}),{sliceField:T}=nA(),{slicerItems:_}=On(),A=(0,K.useRef)(!0);(0,K.useEffect)(()=>{A.current&&(A.current=!1,u(l))},[l,u]);let R=(0,K.useCallback)(()=>{if(d?.current){let{scrollLeft:e,scrollWidth:t,clientWidth:a}=d.current;e+a+1>t?c():e<=0&&m()}},[c,m,d]),P=(0,K.useSyncExternalStore)(JY,()=>window.innerWidth),D=(0,K.useMemo)(()=>s<P?`400px 0px 400px -${s}px`:"400px 0px 400px 0px",[s,P]),E=f?cc(f):void 0,M=void 0!==E,B=H1(e,{sticky:!0});return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(p_,{rootRef:d,rootMargin:D,sizeEstimate:40,children:(0,F.jsxs)(lx.A,{sx:JW,children:[(0,F.jsx)(Kk,{}),(0,F.jsxs)(lx.A,{ref:g,role:"grid",sx:Jz,"data-hpc":!0,onKeyDown:r,onBlur:n,...(0,ey.G)("roadmap-view"),children:[(0,F.jsxs)(lx.A,{ref:d,onScroll:R,className:(0,vB.$)({"is-scrolling-locked":a,"is-grouped":M,"is-omnibar-fixed":N,"horizontal-scrollbar-hidden":0===p},JG.roadmapScrollContainer),sx:JH,"data-memex-small-viewport-a11y":I,...(0,ey.G)("roadmap-scroll-container"),children:[(0,F.jsx)(JC,{}),(0,F.jsx)(Hd,{children:(0,F.jsxs)(JX,{isGrouped:M,children:[(0,F.jsx)(Jd,{}),M&&h.length?(0,F.jsx)(Qz,{collapsedGroupIds:i,tableGroups:E,itemData:B}):(0,F.jsx)(Nq,{rows:h,children:(0,F.jsx)(Q$,{rows:h,isOmnibarFixed:N,itemData:B})}),(0,F.jsx)(Hi,{rows:M?E:h,isGrouped:M,scrollRef:d,headerHeight:o,tableWidth:s})]})})]}),N&&x&&(0,F.jsx)(JO,{rows:h})]})]})}),T&&(0,F.jsx)(OP,{slicerItems:_}),v&&(0,F.jsx)(Lh,{isOpen:v,setOpen:b,anchorRef:w,onSave:eC.l})]})}),Jq={position:"relative",flex:"1 1 auto",display:"flex",flexDirection:"column",contain:"content"},JK={...Jq,boxShadow:"shadow.medium"},JQ={position:"relative",display:"flex",flexDirection:"column"},JJ={...JQ,boxShadow:"shadow.medium",...Ky},JX=(0,K.memo)(function({isGrouped:e,children:t}){let{totalWidth:a}=q4(),{containerRef:r}=H2();return(0,F.jsx)(H.A,{fontSize:"14px",children:(0,F.jsx)(lx.A,{sx:e?Jq:JK,style:{width:a},ref:r,...(0,ey.G)("roadmap-items"),children:(0,F.jsx)(lx.A,{sx:e?JQ:JJ,children:t})})})});function JY(e){return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}try{J$.displayName||(J$.displayName="RoadmapView")}catch{}try{J$.displayName||(J$.displayName="RoadmapView")}catch{}try{JU.displayName||(JU.displayName="RoadmapContent")}catch{}try{JX.displayName||(JX.displayName="RoadmapItemsArea")}catch{}let JZ=({children:e})=>{let{roadmapShowDateFields:t}=_B(),{dateFields:a}=ko(),r=(0,K.useMemo)(()=>t.enabled?a.filter(S7).map(e=>e.id):[],[t,a]),n=(0,K.useCallback)(e=>e.id===eT.Title||r.includes(e.id),[r]);return(0,F.jsx)(zD,{isFieldVisible:n,children:e})};try{JZ.displayName||(JZ.displayName="TableColumnsProviderForRoadmap")}catch{}let J0={Box:"project-view-module__Box--B0_W_",Box_1:"project-view-module__Box_1--HBx10",Flash_1:"project-view-module__Flash_1--dCcd7",Box_2:"project-view-module__Box_2--ASBXB",Box_3:"project-view-module__Box_3--SkyLy",Box_4:"project-view-module__Box_4--AO55t",IconButton:"project-view-module__IconButton--R1lcr",Box_5:"project-view-module__Box_5--quwlc",Box_6:"project-view-module__Box_6--sWlTq",Box_7:"project-view-module__Box_7--I39Ss",Text:"project-view-module__Text--Xm0ED",ToastAction:"project-view-module__ToastAction--mUnvh",Blankslate:"project-view-module__Blankslate--RYZXR",Octicon:"project-view-module__Octicon--QZVpe",Text_1:"project-view-module__Text_1--G6JE5"},J1=(0,sp.V)({queryKey:["memex","memex-service"],fetcher:async()=>({betaSignupBanner:"hidden"}),enabled:!1,initialData:()=>eA("memex-service")||{betaSignupBanner:"hidden"}});function J2(){mL();let{memex_disable_autofocus:e}=iz(),{data:t}=J1(),a=t?.betaSignupBanner,[r,n]=(0,K.useState)("visible"===a||"staffship"===a),i=(0,K.useRef)(null),l=(0,K.useCallback)(()=>i.current?.focusIn(),[]);(0,K.useEffect)(()=>{if(!e)return;let t=e=>{fA(e)===fN.ARROW_DOWN&&document.activeElement===document.body&&(e.preventDefault(),i.current?.focusIn())};return document.addEventListener("keydown",t),()=>document.removeEventListener("keydown",t)},[e]);let s=fl("project-view");return(0,F.jsxs)("div",{id:"memex-project-view-root",...(0,ey.G)("app-root"),className:J0.Box,children:[(0,F.jsx)(qE,{projectViewId:s,onFocusIntoCurrentView:l}),(0,F.jsxs)("div",{id:s,role:"tabpanel",className:J0.Box_1,children:[r&&(0,F.jsx)(J5,{bannerType:a,setBetaBannerVisibility:n}),(0,F.jsx)(J4,{ref:i})]})]})}function J5({setBetaBannerVisibility:e,bannerType:t}){let{addToast:a}=lV(),r=(0,nk.M)(a),n=(0,K.useCallback)(async()=>{(await LO()).success&&(e(!1),r.current({message:nH.betaSignupSuccessMessage,type:nF.success}))},[r,e]),i=(0,K.useCallback)(async()=>{(await LG({notice:"memex_without_limits_beta"})).success?e(!1):r.current({message:nH.dismissNoticeError,type:nF.error})},[r,e]),{perform:l}=uN({request:n}),{perform:s}=uN({request:i}),o=(0,K.useCallback)(()=>l(),[l]),d=(0,K.useCallback)(()=>s(),[s]),u="no-project-limits-waitlist-banner",c=nH.joinWaitlist,m=nH.noProjectLimitWaitlistBanner,p=eU().pwlBetaLearnMoreLink;return"staffship"===t&&(u="no-project-limits-waitlist-staffship-banner",c=nH.joinBeta,m=nH.noProjectLimitWaitlistStaffshipBanner),(0,F.jsxs)(mq.A,{...(0,ey.G)(u),full:!0,className:J0.Flash_1,children:[(0,F.jsx)("div",{className:J0.Box_2,children:(0,F.jsx)(lw.A,{icon:ly.InfoIcon})}),(0,F.jsxs)("div",{className:J0.Box_3,children:[m," ",(0,F.jsx)(pw.A,{href:p,children:" Learn more"})]}),(0,F.jsx)("div",{className:J0.Box_4,children:(0,F.jsx)(p4.Q,{tabIndex:0,onClick:o,children:c})}),(0,F.jsx)(fE.K,{icon:ly.XIcon,"aria-label":"Dismiss alert",variant:"invisible",onClick:d,className:J0.IconButton})]})}let J3=(0,K.forwardRef)(function({type:e},t){switch(e){case lK.Table:return(0,F.jsx)(k5,{children:(0,F.jsx)(H9,{children:(0,F.jsx)(H6,{ref:t})})});case lK.Roadmap:return(0,F.jsx)(k5,{children:(0,F.jsx)(JZ,{children:(0,F.jsx)(J$,{ref:t})})});case lK.List:default:return(0,F.jsx)(k5,{children:(0,F.jsx)($M,{ref:t})})}}),J4=(0,K.memo)((0,K.forwardRef)(function(e,t){let{currentView:a,views:r,duplicateCurrentViewState:n}=iS(),{partialFailures:i,projectLimits:{viewsLimit:l}}=eU(),{viewType:s}=ma(),{addToast:o}=lV(),d=(0,nk.M)(o),{sliceField:u}=nA();return((0,K.useEffect)(()=>{let e=i?.[0];e&&d.current({message:e.message,type:nF.warning,keepAlive:!0})},[i,d]),qz(),q$(),qV(),qW(),a)?(0,F.jsxs)(F.Fragment,{children:[u?(0,F.jsx)("div",{className:J0.Box_5,children:(0,F.jsx)("div",{className:J0.Box_6,children:(0,F.jsx)(J3,{type:s,ref:t})})}):(0,F.jsx)(J3,{type:s,ref:t}),a.isDeleted?(0,F.jsxs)(lD,{role:"status",...(0,ey.G)("deleted-view-toast"),children:[(0,F.jsx)(lP,{sx:{bg:lI[nF.warning]},children:lN}),(0,F.jsxs)("div",{className:J0.Box_7,children:[(0,F.jsx)("span",{className:J0.Text,children:"This view has been deleted."}),r.length<l?(0,F.jsx)(lE,{...(0,ey.G)("deleted-view-toast-action"),onClick:()=>{n(a.number,void 0,{ui:"deleted view toast"})},className:J0.ToastAction,children:a.isViewStateDirty?"Save a copy to make changes.":"Duplicate it to make changes."}):null]})]}):null]}):(0,F.jsx)(J6,{})})),J6=(0,K.memo)(function(){return(0,F.jsxs)(pI,{"data-hpc":!0,className:J0.Blankslate,children:[(0,F.jsx)(lw.A,{icon:ly.StopIcon,size:30,className:J0.Octicon}),(0,F.jsx)("h2",{children:"This view no longer exists"}),(0,F.jsx)("p",{className:J0.Text_1,children:"Select another view to use this project."})]})});try{J2.displayName||(J2.displayName="ProjectView")}catch{}try{J5.displayName||(J5.displayName="ProjectViewWithoutLimitsWaitlistBanner")}catch{}try{J3.displayName||(J3.displayName="ProjectViewInner")}catch{}try{J4.displayName||(J4.displayName="MainView")}catch{}try{J4.displayName||(J4.displayName="MainView")}catch{}try{J6.displayName||(J6.displayName="NoViewFound")}catch{}async function J8(e){let t=nP("memex-chart-create-api-data"),{data:a}=await ix(t.url,{method:"POST",body:e});return a}async function J7(e){let t=nP("memex-chart-delete-api-data");await ix(t.url,{method:"DELETE",body:e})}async function J9(e){let t=nP("memex-chart-update-api-data"),{data:a}=await ix(t.url,{method:"PUT",body:e});return a}function Xe(e,t){let{configuration:{description:a,...r}}=e,{time:n,xAxis:i}=r;n||"time"!==i.dataSource.column||(r.time={period:"2W"});let l=Xt({...r,...t});return{number:e.number,name:e.name,description:a,localVersion:{configuration:l},serverVersion:{configuration:r}}}function Xt(e){return"time"!==e.xAxis.dataSource.column||RY(e.yAxis.aggregate.operation)||(e.yAxis.aggregate={operation:"count"}),e}function Xa(){let{hasUnlimitedSavedCharts:e}=Pu();return{getOverrides:(0,K.useCallback)(t=>{let a={};if(e){let e=t.get(dE);null!=e&&e in RQ&&(a.type=e);let r=t.get(dU),n=t.get(dH);null!=r&&null!=n&&(a.xAxis={dataSource:"time"===r?{column:"time"}:{column:parseInt(r,10)},groupBy:n?{column:parseInt(n,10)}:void 0});let i=t.get(dK),l=t.get(dq);null!=i&&null!=l&&i in RJ&&(a.yAxis={aggregate:{operation:i,columns:l?[parseInt(l,10)]:void 0}})}let r=t.get(dD);return null!=r&&(a.filter=r),a},[e])}}let Xr=(0,K.memo)(function({children:e}){let{isInsightsEnabled:t,hasUnlimitedSavedCharts:a,savedChartsLimit:r}=Pu(),{getChartLinkParameters:n}=function(){let{hasUnlimitedSavedCharts:e}=Pu();return{getChartLinkParameters:(0,K.useCallback)(t=>{let a=t.localVersion.configuration,r=t.serverVersion.configuration,n=new URLSearchParams;return e&&(Pm(n,a.type,r.type),Pp(n,a.xAxis,r.xAxis),Ph(n,a.yAxis,r.yAxis)),Pc(n,a.filter,r.filter),Pf(n,a.time,r.time),n},[e])}}(),{getInitialChartState:i}=function(){let{getOverrides:e}=Xa();return{getInitialChartState:(0,K.useCallback)(t=>{let a=eA("memex-charts-data")??[];for(let e of a)Xt(e.configuration);let r="time"===t.xAxis.dataSource.column,n=r?n4.defaultLeanBurnupChartName:n4.defaultStatusChartName,i=r?n4.defaultLeanBurnupChartDescription:n4.defaultStatusChartDescription,l=[{number:0,name:n,configuration:{...t,description:i}},...a],s=ll.matchFullPath(window.location.pathname),o=li.matchFullPath(window.location.pathname),d=null;s&&s.params.insightNumber?d=parseInt(s.params.insightNumber,10):o&&(d=0);let u=new URLSearchParams(window.location.search);return Object.fromEntries(l.map(t=>{let a=Xe(t,t.number===d?e(u):void 0);return[a.number,a]}))},[e])}}(),{getOverrides:l}=Xa(),{findColumn:s}=y$(),{findColumnByDatabaseId:o}=ua(),{postStats:d}=iN(),u=(0,bZ.A)(),c=(0,K.useRef)({}),m=(0,K.useCallback)(()=>({chart:{configuration:{filter:"is:issue",type:"stacked-area",xAxis:{dataSource:{column:"time"},groupBy:{column:s("Status").databaseId}},yAxis:{aggregate:{operation:"count"}},time:{period:"2W"}}}}),[s]),p=(0,K.useCallback)(()=>({chart:{configuration:{filter:"",type:"column",xAxis:{dataSource:{column:s("Status").databaseId}},yAxis:{aggregate:{operation:"count"}}}}}),[s]),h=(0,K.useCallback)(()=>t?m():p(),[m,p,t]),f=(0,K.useCallback)(()=>p(),[p]),[g,y]=(0,K.useState)(()=>i(h().chart.configuration)),x=(0,K.useCallback)(()=>a||Object.values(g).filter(e=>!Rq(e)).length<r,[g,a,r]),b=(0,K.useCallback)(e=>g[e],[g]),v=mK(),w=(0,K.useCallback)(e=>{let t=b(e);if(!t){let e=li.generatePath(v);return{url:e,pathname:e,search:""}}let a=Rq(t)?li.generatePath(v):ll.generatePath({...v,insightNumber:t.number}),r=n(t).toString();return{url:`${a}${r?`?${r}`:""}`,pathname:a,search:r}},[b,n,v]),j=(0,K.useCallback)((e,t,a)=>{c.current[t]&&window.clearTimeout(c.current[t]),c.current[t]=window.setTimeout(()=>{if(u()){let r={};if(e===ty||e===tx){let e=a?.xAxis?.dataSource?.column;r.dataSourceName=ab(e)?o(e)?.name:e;let t=a?.xAxis?.groupBy?.column;r.groupByName=ab(t)?o(t)?.name:t;let n=a?.yAxis?.aggregate?.columns?.[0];r.aggregateName=ab(n)?o(n)?.name:n}d({name:e,context:JSON.stringify({chartNumber:t,...r,...a})})}},250)},[o,u,d]),C=uN({request:(0,K.useCallback)(async function(e){let t=await J8(e);return y(e=>({...e,[t.chart.number]:Xe(t.chart)})),j(ty,t.chart.number,t.chart.configuration),t},[j])}),I=uN({request:(0,K.useCallback)(async function(e){if(e.chartNumber<0)throw Error("Invalid chart number");let t=await J9(e);return y(e=>({...e,[t.chart.number]:{...e[t.chart.number],name:t.chart.name}})),j("insights_chart_rename",t.chart.number,t.chart.configuration),t},[j])}),S=uN({request:(0,K.useCallback)(async function(e){if(e.chartNumber<0)throw Error("Invalid chart number");let t=await J9(e);return y(e=>({...e,[t.chart.number]:Xe(t.chart)})),j(tx,t.chart.number,t.chart.configuration),t},[j])}),k=uN({request:(0,K.useCallback)(async function(e){if(e<0)throw Error("Invalid chart number");await J7({chartNumber:e}),y(t=>{if(!t[e])return t;let{[e]:a,...r}=t;return r}),j("insights_chart_delete",e)},[j])}),N=(0,K.useCallback)((e,t)=>{y(a=>{let r=a[e];if(!r||void 0!==t.filter&&1===Object.keys(t).length&&t.filter===r.localVersion.configuration.filter)return a;j("insights_chart_update_local",e,t);let n=Xt({...r.localVersion.configuration,...t});return{...a,[e]:{...r,localVersion:{configuration:n}}}})},[j]),T=(0,K.useCallback)(e=>{y(t=>{let a=t[e];return a?{...t,[e]:{...a,localVersion:a.serverVersion}}:t}),j("insights_chart_discard_local",e)},[j]),_=(0,nk.M)(b);(0,K.useEffect)(function(){function e(){let e;let t=ll.matchFullPath(window.location.pathname),a=li.matchFullPath(window.location.pathname);if(t&&t.params.insightNumber)e=parseInt(t.params.insightNumber,10);else{if(!a)return;e=0}let r=_.current(e),n=new URLSearchParams(window.location.search);r&&N(r.number,{...r.serverVersion.configuration,...l(n)})}return window.addEventListener("popstate",e),()=>{window.removeEventListener("popstate",e)}},[_,l,N]);let A=(0,K.useCallback)(e=>{y(t=>{let a=Object.fromEntries(e.map(e=>{var a;let r=(a=t[e.number])&&RH(a).isDirty?{...a,name:e.name,serverVersion:{configuration:e.configuration}}:Xe(e);return[r.number,r]}));return a[0]=t[0],a})},[]);return(0,F.jsx)(yG.Provider,{value:(0,K.useMemo)(()=>({chartConfigurations:g,getChartConfigurationByNumber:b,getChartLinkTo:w,getDefaultChart:h,getCreateChartRequest:f,canCreateChart:x,updateChartConfigurations:A}),[g,b,w,h,f,x,A]),children:(0,F.jsx)(R0.Provider,{value:(0,K.useMemo)(()=>({createChartConfiguration:C,updateChartConfiguration:S,updateChartName:I,destroyChartConfiguration:k,updateLocalChartConfiguration:N,resetLocalChangesForChartNumber:T}),[C,k,S,I,N,T]),children:e})})});try{Xr.displayName||(Xr.displayName="ChartStateProvider")}catch{}let Xn=(0,a(79760).E7)(void 0),Xi=({children:e,environment:t})=>(0,F.jsx)(ek.RelayEnvironmentProvider,{environment:t||Xn,children:e});try{Xi.displayName||(Xi.displayName="RelayProvider")}catch{}let Xl=(0,Z.DU)(["html{color-scheme:",";}body.is-dragging{overflow-x:hidden;}body.is-dragging,body.is-dragging *,body.is-resizing,body.is-resizing *{user-select:none !important;}body.is-dragging,body.is-dragging *{cursor:grabbing !important;& a:hover{color:inherit;text-decoration:inherit;}}body.is-resizing-slicer-panel *{cursor:col-resize;& #memex-root{pointer-events:none;#slicer-panel-resizer-sash{pointer-events:auto;}}}#memex-root{background-color:",";mark.find-in-project-highlight{background-color:yellow;color:black;}}code{font-size:0.9em;background-color:",";padding:0.1em;border-radius:0.25em;}.hide-copy-project-button-in-memex{display:none;}"],e=>e.$colorScheme?.startsWith("dark")?"dark":"light",(0,q.Jt)("colors.canvas.default"),(0,q.Jt)("colors.neutral.muted"));function Xs(){let e=(0,J.r5)();return((0,K.useEffect)(()=>{if(!(e instanceof Error))return;let t=setTimeout(()=>{throw e});return()=>{clearTimeout(t)}},[e]),e)?(0,F.jsx)(yj,{}):null}let Xo=(0,K.memo)(function({children:e=null}){let{memex_v7_start_transition:t}=iz(),{isOrganization:a}=eU(),r=Ee(),n=Es(),i=(0,K.useMemo)(()=>{var t,i,l,s,o,d;let u=(0,F.jsx)(wf,{children:(0,F.jsx)(Ia,{mainAppContent:(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(S_,{isProjectPath:!0,children:(0,F.jsx)(SP,{})}),(0,F.jsx)(J2,{})]})})}),c=(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(S_,{children:(0,F.jsx)(SM,{title:"Workflows"})}),(0,F.jsx)(yv,{})]});return(0,X.Ys)([{path:i7.path,errorElement:(0,F.jsx)(Xs,{}),element:(0,F.jsxs)(Xu,{children:[(0,F.jsx)(Xc,{}),(0,F.jsx)(y3,{}),(0,F.jsx)(Sp,{}),(0,F.jsx)(xj,{}),(0,F.jsx)(J.sv,{}),(0,F.jsx)(SB,{}),e]}),children:ru([{path:i7.path,element:u},{path:i9.path,element:u},{path:li.path,element:(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(S_,{children:(0,F.jsx)(SM,{title:"Insights"})}),(0,F.jsx)(DZ,{})]}),children:[{path:li.path,element:(0,F.jsx)(DF,{})},{path:ll.path,element:(0,F.jsx)(DF,{})}]},(i={children:ru([{path:ls.path,element:(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(S_,{children:(0,F.jsx)(SM,{title:"Archive"})}),(0,F.jsx)(R$,{})]})},{path:la.path,element:(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(S_,{children:(0,F.jsx)(SM,{title:"Settings"})}),(0,F.jsx)(LF,{})]}),children:ru([(t={path:ln.path,element:(0,F.jsx)(Ma,{}),loader:async()=>(0,Y.v6)({collaborators:n(),organizationAccessRole:a?await r():null})},l=AS.ADMIN,s=t,Ak(l)?s:null),{path:lr.path,element:(0,F.jsx)(BV,{})},{path:la.path,element:(0,F.jsx)(Ln,{})}])},function(e){let{memex_automation_enabled:t}=eP();return t?e:null}({children:ru([{path:le.path,element:c},{path:lt.path,element:c}])})])},o=AS.DEFAULT,d=i,Ak(o)?d:null),{path:"*",element:(0,F.jsx)(i6,{})}])}],{future:{v7_fetcherPersist:!0,v7_normalizeFormMethod:!0,v7_partialHydration:!0,v7_relativeSplatPath:!0,v7_skipActionErrorRevalidation:!0}})},[e,a,n,r]);return(0,F.jsx)(X.pg,{router:i,future:{v7_startTransition:t}})}),Xd=(0,K.memo)(function({children:e=null}){return(0,F.jsx)(mh,{children:(0,F.jsx)(Xo,{children:e})})}),Xu=({children:e,environment:t})=>{Xm();let{colorScheme:a}=(0,z.DP)();return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(Xl,{$colorScheme:a}),(0,F.jsx)("div",{role:"region",id:"__primerPortalRoot__",style:{zIndex:37,position:"absolute",width:"100%"}}),(0,F.jsx)(Xi,{environment:t,children:(0,F.jsx)(lG,{children:(0,F.jsx)(xo,{children:(0,F.jsx)(mS,{children:(0,F.jsx)(iY,{children:(0,F.jsx)(ef,{children:(0,F.jsx)(NY,{children:(0,F.jsx)(AI,{children:(0,F.jsx)(N0,{children:(0,F.jsx)(mX,{children:(0,F.jsx)(uL,{children:(0,F.jsx)(uC,{children:(0,F.jsx)(pg,{children:(0,F.jsx)(Xr,{children:(0,F.jsx)(Fp,{children:(0,F.jsx)(Fu,{children:(0,F.jsx)(y0,{children:(0,F.jsx)(Us,{children:(0,F.jsx)(Ij,{children:(0,F.jsx)(yH,{children:(0,F.jsx)(mD,{children:e})})})})})})})})})})})})})})})})})})})})})]})},Xc=(0,K.memo)(function(){let e=c$(),{isReadonly:t}=eK(),{isInsightsEnabled:a}=Pu(),{returnToViewLinkTo:r}=iS(),{projectViewRoutesMatch:n}=lu(),i=(0,J.RQ)(la.pathWithChildPaths),l=(0,J.RQ)(le.pathWithChildPaths),s=(0,J.RQ)(li.pathWithChildPaths),o=(0,J.RQ)(ls.pathWithChildPaths),{memex_automation_enabled:d}=eP(),{ownerIdentifier:u,ownerType:c,projectNumber:m}=mK();return eg(()=>{let p=[],h=["n","Navigate to...",p];return(n||p.push(["p","Navigate to project views","navigate",()=>e(r)]),t||i||p.push(["s","Navigate to settings","navigate",()=>e(la.generatePath({ownerType:c,ownerIdentifier:u,projectNumber:m}))]),t||l||!d||p.push(["w","Navigate to workflows","navigate",()=>e(le.generatePath({ownerType:c,ownerIdentifier:u,projectNumber:m}))]),a&&!s&&p.push(["i","Navigate to insights","navigate",()=>e(li.generatePath({ownerType:c,ownerIdentifier:u,projectNumber:m}))]),t||o||p.push(["a","Navigate to archive","navigate",()=>e(ls.generatePath({ownerType:c,ownerIdentifier:u,projectNumber:m}))]),0===p.length)?null:h},[n,t,i,l,d,a,s,o,e,r,c,u,m]),null}),Xm=()=>{let{resolvedColorScheme:e}=(0,z.DP)(),t=x_();(0,K.useEffect)(()=>{t&&e&&t.setAttribute("data-current-theme-color-scheme",e)},[e,t])};try{Xs.displayName||(Xs.displayName="RootBoundary")}catch{}try{Xo.displayName||(Xo.displayName="AppRoutes")}catch{}try{Xd.displayName||(Xd.displayName="App")}catch{}try{Xu.displayName||(Xu.displayName="AppContainer")}catch{}try{Xc.displayName||(Xc.displayName="NavigationCommands")}catch{}let Xp=new Set(["light","light_high_contrast","light_colorblind","light_tritanopia","dark","dark_dimmed","dark_high_contrast","dark_colorblind","dark_tritanopia"]),Xh={colorMode:"auto",dayScheme:"light",nightScheme:"dark"};function Xf(e){let t=new MutationObserver(e);return t.observe(document.documentElement,{attributes:!0,attributeFilter:["data-color-mode","data-light-theme","data-dark-theme"]}),()=>{t.disconnect()}}function Xg(){let e=function(){let{dataset:e}=document.documentElement;return{mode:e.colorMode,light:e.lightTheme,dark:e.darkTheme}}(),{themePreferences:{markdown_fixed_width_font:t,...a}}=eU();return{mode:e.mode??a?.mode,light:e.light??a.light,dark:e.dark??a?.dark}}let Xy=(0,G.S)();Xy.setQueryDefaults(["memex"],{retry:1});let Xx=({children:e,rootElement:t})=>{let a=(0,F.jsx)(yj,{});return(0,F.jsx)(xT.Provider,{value:t,children:(0,F.jsx)(U.Ht,{client:Xy,children:(0,F.jsx)(W.n,{children:(0,F.jsx)(Xb,{children:(0,F.jsx)(ErrorBoundary,{fallback:a,children:(0,F.jsx)(Xd,{children:e})})})})})})},Xb=({children:e})=>{let t=function(){let e=iW(Xg);return(0,K.useSyncExternalStore)(Xf,()=>{let t=Xg();return(0,ut.A)(e.current,t)?e.current:(e.current=t,t)})}();return(0,F.jsx)(z.NP,{...function(e){let t,a;return e?(e.light&&(Xp.has(e.light)?t=e.light:e.light.startsWith("light")&&(t="light")),e.dark&&(Xp.has(e.dark)?a=e.dark:e.dark.startsWith("dark")&&(a="dark")),{colorMode:function(e){switch(e){case"light":return"day";case"dark":return"night";default:return e}}(e.mode),dayScheme:t,nightScheme:a}):Xh}(t),children:(0,F.jsx)(H.A,{display:"contents",children:e})})};try{Xb.displayName||(Xb.displayName="MemexThemeProvider")}catch{}async function Xv(e,t,a){let r=t?.parentElement;if(!document.getElementById("portal-root")){let e=document.createElement("div");e.setAttribute("id","portal-root"),r?.appendChild(e)}a.render((0,F.jsx)(K.StrictMode,{children:e})),t.style.overflow="hidden",t.parentElement?.parentElement&&(t.parentElement.parentElement.style.overflow="hidden")}var Xw=new WeakSet;let Xj=class ProjectsV2 extends HTMLElement{async connectedCallback(){let e=(V.A.isEnabled()?(await (function(e,t,a){if(!t.has(e))throw TypeError("attempted to get private field on non-instance");return a})(this,Xw,XC).call(this)).createRoot:$.H)(this);this.reactRoot=e,i7.matchFullPathOrChildPaths(window.location.pathname)&&(this.uuid=(0,O._)(),(0,O.c)(this.uuid),Xv((0,F.jsx)(Xx,{rootElement:this}),this,e))}disconnectedCallback(){(0,G.S)().removeQueries({queryKey:["memex"]}),this.reactRoot?.unmount()}constructor(...e){super(...e),function(e,t){(function(e,t){if(t.has(e))throw TypeError("Cannot initialize the same private elements twice on an object")})(e,t),t.add(e)}(this,Xw)}};function XC(){return a.e("react-profiling").then(a.t.bind(a,87335,19))}"undefined"==typeof window||window.customElements.get("projects-v2")||window.customElements.define("projects-v2",Xj)},50045:(e,t,a)=>{a.d(t,{I:()=>r});let r=(0,a(96540).createContext)(null)},13080:(e,t,a)=>{a.d(t,{C:()=>l,i:()=>s});var r=a(47584),n=a(75632),i=a(46493);function l(e,t){(0,n.G7)("arianotify_comprehensive_migration")?s(o(e),{...t,element:t?.element??e}):(0,n.G7)("primer_live_region_element")&&t?.element===void 0?(0,i.Cj)(e,{politeness:t?.assertive?"assertive":"polite"}):s(o(e),t)}function s(e,t){let{assertive:a,element:l}=t??{};(0,n.G7)("arianotify_comprehensive_migration")&&"ariaNotify"in Element.prototype?(l||document.body).ariaNotify(e,{interrupt:t?.assertive?"all":"none"}):(0,n.G7)("primer_live_region_element")&&void 0===l?(0,i.iP)(e,{politeness:a?"assertive":"polite"}):function(e,t,a){let n=a??r.XC?.querySelector(t?"#js-global-screen-reader-notice-assertive":"#js-global-screen-reader-notice");n&&(n.textContent===e?n.textContent=`${e}\u00A0`:n.textContent=e)}(e,a,l)}function o(e){return(e.getAttribute("aria-label")||e.innerText||"").trim()}},56176:(e,t,a)=>{let r;function n(){if(!r)throw Error("Client env was requested before it was loaded. This likely means you are attempting to use client env at the module level in SSR, which is not supported. Please move your client env usage into a function.");return r}function i(){return r?.locale??"en-US"}function l(){return!!n().login}a.d(t,{JK:()=>i,M3:()=>l,_$:()=>n}),!function(){if("undefined"!=typeof document){let e=document.getElementById("client-env");if(e)try{r=JSON.parse(e.textContent||"")}catch(e){console.error("Error parsing client-env",e)}}}()},88804:(e,t,a)=>{a.d(t,{Dn:()=>ProviderBase,Ie:()=>StaticItemsPage,q7:()=>Item});var r=a(91385),n=a(42677);function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}let StaticItemsPage=class StaticItemsPage{constructor(e,t,a){i(this,"title",void 0),i(this,"scopeId",void 0),i(this,"providers",[]),i(this,"scopeType","static_items_page"),this.title=e,this.scopeId=t,this.providers=[new StaticItemsProvider(a)]}};let StaticItemsProvider=class StaticItemsProvider{async fetch(e){return{results:this.fuzzyFilter(this.items,e)}}enabledFor(){return!0}clearCache(){}fuzzyFilter(e,t,a=0){if(t.isBlank())return e;let r=[];for(let n of e)n.calculateScore(t.text)>a&&r.push(n);return r}constructor(e){i(this,"items",void 0),i(this,"hasCommands",!0),i(this,"debounce",0);let t=e.length;this.items=e.map((e,a)=>(e.priority=t-a,e))}};let Item=class Item{get matchingFields(){return this.matchFields?this.matchFields:[this.title]}get key(){return`${this.title}-${this.group}-${this.subtitle}-${this.matchFields?.join("-")}`}get id(){return this._id||(this._id=(0,n.Q)(this.key).toString()),this._id}calculateScore(e){return Math.max(...this.matchingFields.map(t=>this.calculateScoreForField({field:t,queryText:e})))}calculateScoreForField({field:e,queryText:t}){return(0,r.qA)(t,e)?(0,r.fN)(t,e):-1/0}constructor(e){i(this,"title",void 0),i(this,"priority",void 0),i(this,"group",void 0),i(this,"subtitle",void 0),i(this,"matchFields",void 0),i(this,"typeahead",void 0),i(this,"hint",void 0),i(this,"icon",void 0),i(this,"score",0),i(this,"position",""),i(this,"_id",void 0),this.title=e.title,this.priority=e.priority,this.group=e.group,this.subtitle=e.subtitle,this.matchFields=e.matchFields,this.typeahead=e.typeahead,this.hint=e.hint,this.icon=e.icon}};let ProviderBase=class ProviderBase{fuzzyFilter(e,t,a=0){if(t.isBlank())return e;let r=[];for(let n of e)n.calculateScore(t.text)>a&&r.push(n);return r}}},2640:(e,t,a)=>{a.d(t,{D:()=>i,Y:()=>l});var r=a(13080),n=a(47584);function i(e){if(!n.XC)return;let t=n.XC.querySelector("title"),a=n.XC.createElement("title");a.textContent=e,t?t.textContent!==e&&(t.replaceWith(a),(0,r.i)(e)):(n.XC.head.appendChild(a),(0,r.i)(e))}function l(e){return document.body.classList.contains("logged-out")?`${e} \xb7 GitHub`:e}},75028:(e,t,a)=>{a.d(t,{G:()=>n,K:()=>i});var r=a(47584);let n=r.XC?.readyState==="interactive"||r.XC?.readyState==="complete"?Promise.resolve():new Promise(e=>{r.XC?.addEventListener("DOMContentLoaded",()=>{e()})}),i=r.XC?.readyState==="complete"?Promise.resolve():new Promise(e=>{r.cg?.addEventListener("load",e)})},42445:(e,t,a)=>{a.d(t,{N7:()=>g});var r=a(36301),n=a(77065),i=a(24212);function l(e){return(0,i.q)(e.stack||"").map(e=>({filename:e.file||"",function:String(e.methodName),lineno:(e.lineNumber||0).toString(),colno:(e.column||0).toString()}))}function s(e){let t=document.querySelectorAll(e);if(t.length>0)return t[t.length-1]}var o=a(9080),d=a(47584),u=a(95505);let c=!1,m=0,p=Date.now(),h=new Set(["AbortError","AuthSessionExpiredError","TypeError"]),f=new Set(["Failed to fetch","NetworkError when attempting to fetch resource.","Unable to perform this operation. Please try again later."]);function g(e,t={}){if(!(e instanceof Error||"object"==typeof e&&null!==e&&"name"in e&&"string"==typeof e.name&&"message"in e&&"string"==typeof e.message)){if(function(e){if(!e||"boolean"==typeof e||"number"==typeof e)return!0;if("string"==typeof e){if(w.some(t=>e.includes(t)))return!0}else if("object"==typeof e&&"string"==typeof e.message&&"number"==typeof e.code)return!0;return!1}(e))return;let a=Error(),r=function(e){try{return JSON.stringify(e)}catch{return"Unserializable"}}(e);y(x({type:"UnknownError",value:`Unable to report error, due to a thrown non-Error type: ${typeof e}, with value ${r}`,stacktrace:l(a),catalogService:void 0},t));return}e.name&&("AbortError"===e.name||h.has(e.name)&&f.has(e.message)||e.name.startsWith("ApiError")&&f.has(e.message))||y(x({type:e.name,value:e.message,stacktrace:l(e),catalogService:e.catalogService},t))}async function y(e){if(!(!v&&!c&&m<10&&(0,n.TT)()))return;let t=document.head?.querySelector('meta[name="browser-errors-url"]')?.content;if(t){if(e.error.stacktrace.some(e=>b.test(e.filename)||b.test(e.function))){c=!0;return}m++;try{await fetch(t,{method:"post",body:JSON.stringify(e)})}catch{}}}function x(e,t={}){return Object.assign({error:e,sanitizedUrl:`${window.location.protocol}//${window.location.host}${function(){let e=s("meta[name=analytics-location]");return e?e.content:window.location.pathname}()+function(){let e=s("meta[name=analytics-location-query-strip]"),t="";e||(t=window.location.search);let a=s("meta[name=analytics-location-params]");for(let e of(a&&(t+=(t?"&":"?")+a.content),document.querySelectorAll("meta[name=analytics-param-rename]"))){let a=e.content.split(":",2);t=t.replace(RegExp(`(^|[?&])${a[0]}($|=)`,"g"),`$1${a[1]}$2`)}return t}()}`||window.location.href,readyState:document.readyState,referrer:(0,u.dR)(),timeSinceLoad:Math.round(Date.now()-p),user:function(){let e=document.head?.querySelector('meta[name="user-login"]')?.content;if(e)return e;let t=(0,r.y)();return`anonymous-${t}`}()||void 0,actorId:document.head?.querySelector('meta[name="octolytics-actor-id"]')?.content,bundler:o.v,ui:!!document.querySelector('meta[name="ui"]'),release:document.head?.querySelector('meta[name="release"]')?.content},t)}let b=/(chrome|moz|safari)-extension:\/\//,v=!1;d.cg?.addEventListener("pageshow",()=>v=!1),d.cg?.addEventListener("pagehide",()=>v=!0),"function"==typeof BroadcastChannel&&new BroadcastChannel("shared-worker-error").addEventListener("message",e=>{g(e.data.error)});let w=["Object Not Found Matching Id","Not implemented on this platform","provider because it's not your default extension"]},75632:(e,t,a)=>{a.d(t,{G7:()=>o,XY:()=>d,fQ:()=>s});var r=a(5225),n=a(56176);function i(){return new Set((0,n._$)().featureFlags)}let l=a(47584).X3||function(){try{return process?.env?.STORYBOOK==="true"}catch{return!1}}()?i:(0,r.A)(i);function s(){return Array.from(l())}function o(e){return l().has(e)}let d={isFeatureEnabled:o}},4460:(e,t,a)=>{a.d(t,{C3:()=>s,JV:()=>n,K3:()=>c,MM:()=>o,OE:()=>m,Zu:()=>u,bj:()=>i,jc:()=>d,kd:()=>l});var r=a(47584);function n(){return r.Kn?.state||{}}function i(e){p(n(),"",e)}function l(e){r.Kn?.pushState({appId:n().appId},"",e),h()}function s(e){p({...n(),...e},"",location.href)}function o(e){i(`?${e.toString()}${r.fV.hash}`)}function d(){i(r.fV.pathname+r.fV.hash)}function u(e){i(e.startsWith("#")?e:`#${e}`)}function c(){i(r.fV.pathname+r.fV.search)}function m(){r.Kn?.back()}function p(e,t,a){r.Kn?.replaceState(e,t,a),h()}function h(){r.cg?.dispatchEvent(new CustomEvent("statechange",{bubbles:!1,cancelable:!1}))}},73218:(e,t,a)=>{a.d(t,{l:()=>r});let r=()=>void 0},87016:(e,t,a)=>{a.d(t,{A:()=>s,Ad:()=>i,Ds:()=>r,EU:()=>l,FR:()=>n,ZM:()=>o});let r={open:"state:open",closed:"state:closed",default:"state:open archived:false assignee:@me sort:updated-desc",defaultRepoLevelOpen:"is:issue state:open",defaultRepoLevelClosed:"is:issue state:closed",assignedToMe:"is:issue state:open archived:false assignee:@me sort:updated-desc",pullsAssignedToMe:"state:open archived:false assignee:@me is:pr sort:updated-desc",mentioned:"is:issue state:open archived:false mentions:@me sort:updated-desc",createdByMe:"is:issue state:open archived:false author:@me sort:updated-desc",recentActivity:"is:issue involves:@me updated:>@today-1w sort:updated-desc",pullsAuthored:"state:open archived:false author:@me is:pr updated:>@today-60d sort:updated-desc",pullsReviewed:"state:open archived:false reviewed-by:@me -author:@me is:pr updated:>@today-60d sort:updated-desc",pullsReviewRequested:"state:open archived:false user-review-requested:@me is:pr updated:>@today-60d sort:updated-desc",pullsMentioned:"state:open archived:false mentions:@me is:pr updated:>@today-60d sort:updated-desc"},n={today:"@today"},i={day:"d",week:"w",month:"m",year:"y"},l=RegExp(`^(\\d+)(${Object.values(i).join("|")})`),s="@",o="sort:created-desc"},760:(e,t,a)=>{a.d(t,{$D:()=>i,KJ:()=>h,M7:()=>u,NQ:()=>o,RM:()=>y,SC:()=>l,a6:()=>n,dh:()=>s,sS:()=>p,x:()=>f,y1:()=>g,yV:()=>d});var r=a(80528);let n=10,i=5,l={archived:{name:"Archived",value:"archived",priority:10,icon:r.m4.Archived,description:"Specify archived or non-archived items only"},base:{name:"Base",value:"base",priority:n,icon:r.m4.Branch,description:"Pull Request base branch"},closed:{name:"Closed date",value:"closed",priority:n,icon:r.m4.Calendar,description:"Closing date"},comments:{name:"Comment count",value:"comments",priority:n,icon:r.m4.Comment,description:"Item comment count"},created:{name:"Creation date",value:"created",priority:n,icon:r.m4.Calendar,description:"Creation date"},draft:{name:"Draft",value:"draft",priority:n,icon:r.m4.Draft,description:"Search for draft items"},head:{name:"Head",value:"head",priority:n,icon:r.m4.Branch,description:"Head branch commit sha"},in:{name:"In",value:"in",icon:r.m4.Filter,description:"Restrict your search to the title, body, comments, or any combination of these",priority:n},interactions:{name:"Interactions count",value:"interactions",priority:n,icon:r.m4.Discussion,description:"Interaction count"},is:{name:"Is",value:"is",icon:r.m4.Apps,description:'Filter only "issues", "pulls", "open", "closed", or "draft"',priority:3},language:{name:"Code language",value:"language",priority:n,icon:r.m4.Code,description:"Code language"},linked:{name:"Linked",value:"linked",icon:r.m4.PullRequest,description:"Items linked to an issue or pull request",priority:n},merged:{name:"Merge date",value:"merged",priority:n,icon:r.m4.Calendar,description:"Merge date"},milestone:{name:"Milestone",value:"milestone",priority:n,icon:r.m4.Milestone,description:"Milestone"},no:{name:"No",value:"no",priority:n,icon:r.m4.Forbidden,description:"Filter by items without a specific metadata value"},reactions:{name:"Reaction count",value:"reactions",priority:n,icon:r.m4.Reaction,description:"Reactions count"},reason:{name:"Reason",value:"reason",priority:n,icon:r.m4.Mention,description:"Filter by item closed reason"},review:{name:"Review state",value:"review",priority:n,icon:r.m4.PullRequest,description:"Specify a review state"},sha:{name:"Commit SHA",value:"sha",priority:n,icon:r.m4.FileCode,description:"Commit SHA"},state:{name:"State",value:"state",priority:3,icon:r.m4.Draft,description:"Look for open / closed items"},status:{name:"Status",value:"status",priority:n,icon:r.m4.Draft,description:"Commit status: pending | success | failure"},team:{name:"Team",value:"team",priority:n,icon:r.m4.Team,description:"Team name"},teamReviewRequested:{name:"Team review requested",value:"team-review-requested",priority:n,icon:r.m4.Team,description:"Review requested from team"},sort:{name:"Sort",value:"sort",priority:n,icon:r.m4.Sort,description:"Sort results"},itemType:{name:"Item Type",value:"type",priority:n,icon:r.m4.Apps,description:"Specify the type of item to search for: issue or pr"},type:{name:"Type",value:"type",priority:n,icon:r.m4.Issue,description:"Specify the type of issue to search for"},updated:{name:"Update date",value:"updated",priority:n,icon:r.m4.Calendar,description:"Updated date"},repo:{name:"Repository",value:"repo",priority:1,icon:r.m4.Repo,singularItemName:"Repository",description:"Filter by repository"},org:{name:"Organization",value:"org",priority:2,icon:r.m4.Organization,singularItemName:"Organization",description:"Filter by organization"},label:{name:"Label",value:"label",priority:3,icon:r.m4.Tag,singularItemName:"Label",description:"Filter by label"},project:{name:"Project",value:"project",priority:3,icon:r.m4.Project,singularItemName:"Project",description:""}},s=[l.base,l.head,l.language,l.milestone,l.sha],o=[l.archived,l.comments,l.closed,l.created,l.draft,l.in,l.interactions,l.is,l.linked,l.merged,l.no,l.reactions,l.reason,l.review,l.sort,l.state,l.status,l.updated],d={author:{name:"Author",value:"author",icon:r.m4.Person,description:"The author of the item",priority:3},assignee:{name:"Assignee",value:"assignee",icon:r.m4.Person,description:"The assignee of the item",priority:3},involves:{name:"Involves",value:"involves",icon:r.m4.Person,description:"The user involved in the item",priority:n},mentions:{name:"Mentions",value:"mentions",icon:r.m4.Mention,description:"The user mentioned in the item",priority:n},commenter:{name:"Commenter",value:"commenter",icon:r.m4.Person,description:"Items commented on by the user",priority:n},reviewRequested:{name:"Review Requested",value:"review-requested",icon:r.m4.Person,description:"Items with review requested for the user",priority:n},reviewedBy:{name:"Reviewed By",value:"reviewed-by",icon:r.m4.Person,description:"Items reviewed by the user",priority:n},user:{name:"User",value:"user",icon:r.m4.Person,description:"Items in repositories owned by the user",priority:n},userReviewRequested:{name:"User Review Requested",value:"user-review-requested",icon:r.m4.Mention,description:"Items with review requested for the user explicitly",priority:n}},u=Object.values(d),c=[{value:"@today",name:"Today",description:"Today",priority:1},{valueFunc:()=>{let e=new Date,t=e.getFullYear(),a=(e.getMonth()+1).toString().padStart(2,"0"),r=(e.getDate()-1).toString().padStart(2,"0");return`${t}-${a}-${r}`},name:"Yesterday",description:"Yesterday",priority:2},{value:">@today-1w",name:"Last 7 days",description:"Last 7 days",priority:3},{value:">@today-1m",name:"Last 30 days",description:"Last 30 days",priority:4},{valueFunc:()=>{let e=new Date;return`>${e.getFullYear()-1}-12-31`},name:"This year",description:"This year",priority:5}],m=[{value:"<10",name:"Less than 10",description:"Less than 10",priority:1},{value:">10",name:"More than 10",description:"More than 10",priority:2},{value:"10..100",name:"Between 10 and 100",description:"Between 10 and 100",priority:3},{value:"100",name:"100",description:"Exactly 100",priority:4}],p={archived:[{value:"true",name:"Yes",description:"Only archived items",priority:1},{value:"false",name:"No",description:"Only non-archived items",priority:2}],closed:c,comments:m,created:c,draft:[{value:"true",name:"Yes",description:"Only draft items",priority:1},{value:"false",name:"No",description:"Only non-draft items",priority:2}],in:[{value:"title",description:"Match values in title",priority:1},{value:"body",description:"Match values in body",priority:2},{value:"comments",description:"Match values in comments",priority:3}],interactions:m,is:[{value:"issue",description:"Issues only",priority:1,icon:r.m4.Issue},{name:"Pull Request",value:"pr",description:"Pull Requests only",priority:2,icon:r.m4.PullRequest},{value:"open",description:"Items with open state",priority:3,icon:r.m4.Issue},{value:"closed",description:"Items with closed state",priority:4,icon:r.m4.IssueClosed},{value:"draft",description:"Items with draft state",priority:5,icon:r.m4.Draft}],type:[{value:"issue",description:"Issues only",priority:1,icon:r.m4.Issue},{name:"Pull Request",value:"pr",description:"Pull Requests only",priority:2,icon:r.m4.PullRequest}],linked:[{value:"issue",description:"Pull requests that are linked to an issue",priority:2,icon:r.m4.Issue},{name:"Pull Request",value:"pr",description:"Issue that are linked to pull requests",priority:1,icon:r.m4.PullRequest}],merged:c,no:[{value:"assignee",description:"Items without an assignee",priority:1,icon:r.m4.Mention},{value:"label",description:"Items without a label",priority:2,icon:"tag"},{value:"milestone",description:"Items without a milestone",priority:3,icon:"milestone"},{value:"project",description:"Items without a project",priority:4,icon:r.m4.Project}],reactions:m,reason:[{value:"completed",description:"Items that were closed as completed",priority:1},{value:"not planned",description:"Items that were closed as not planned",priority:2}],review:[{value:"none",name:"No reviews",description:"No reviews",priority:1},{value:"required",name:"Review required",description:"Review required",priority:2},{value:"approved",description:"Has approving review",priority:3},{value:"changes_requested",name:"Changes requested",description:"Review requesting changes",priority:4}],sort:[{value:"created-desc",name:"Newest",description:"Newest",priority:1},{value:"created-asc",name:"Oldest",description:"Oldest",priority:2},{value:"comments-desc",name:"Most commented",description:"Most commented",priority:3},{value:"updated-desc",name:"Recently updated",description:"Recently updated",priority:4}],state:[{value:"open",description:"Items with open state",priority:1},{value:"closed",description:"Items with closed state",priority:2}],status:[{value:"pending",description:"Items with pending status",priority:1},{value:"success",description:"Items with success status",priority:2},{value:"failure",description:"Items with failure status",priority:3}],updated:c},h=[l.team,l.teamReviewRequested],f=25,g=100,y={archived:"Not archived",base:"Without base",closed:"Not closed on date",comments:"Without comments count",created:"Not created on date",draft:"Not draft",head:"Without head",interactions:"Without interactions count",is:"Is not",language:"Without code language",linked:"Without linked",reactions:"Without reactions count",reason:"Without reason",review:"Without review state",state:"Without state",status:"Without status",team:"Not in team","team-review-requested":"Not in team review requested",type:"Without type",updated:"Not updated on date",repo:"Not in repository",org:"Not in organization",label:"Without label",project:"Not in project",author:"Not authored by",assignee:"Not assigned to",involves:"Not involving",mentions:"Not mentioned by",commenter:"Not commented by","review-requested":"Without review requested by","reviewed-by":"Not reviewed by",user:"Not owned by user","user-review-requested":"Without user review requested"}},33554:(e,t,a)=>{a.d(t,{k:()=>AsyncFilterProvider});var r=a(56366);function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}let AsyncFilterProvider=class AsyncFilterProvider extends EventTarget{abortPreviousRequests(){this.abortController.abort(),this.abortController=new AbortController}async fetchData(e){let t;let a=e.parsedQuery.at(-1),n=new URL(this.endpoint,window.location.origin),i=n.searchParams||new URLSearchParams,l=e.rawQuery.toString();if(this.repositoryScope&&""!==this.repositoryScope){let e=`repo:${this.repositoryScope}`;l.includes(e)||(l=`${l} ${e}`)}i.set("q",l),i.set("filter_value",a.value),n.search=i.toString();try{let e=(0,r.RD)(n.toString());t=await fetch(e,{method:"GET",mode:"same-origin",headers:{Accept:"application/json","Content-Type":"application/json"},signal:this.abortController.signal})}catch(e){if("AbortError"!==e.name)throw e}if(t&&(0,r.Gr)()){let e=await t.clone().json();(0,r.Av)(e)}return t}constructor(e,t){super(),n(this,"endpoint",void 0),n(this,"repositoryScope",void 0),n(this,"abortController",void 0),this.endpoint=e,this.repositoryScope=t,this.abortController=new AbortController}}},71953:(e,t,a)=>{a.d(t,{D:()=>UserFilterProvider});var r=a(80528),n=a(91385),i=a(33554);function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}let UserFilterProvider=class UserFilterProvider extends i.k{async handleEvent(e){let t=e.parsedQuery.at(-1);if((""!==t.value||this.priority<=5)&&t?.type!=="filter"&&!e.parsedQuery.some(e=>"filter"===e.type&&e.filter===this.value)&&((0,n.qA)(t?.value,this.name)||(0,n.qA)(t?.value,this.value))&&this.dispatchEvent(new Event("show")),t?.type!==this.type||t.filter!==this.value)return;this.abortPreviousRequests();let a=this.fetchAndEmitData(e);this.dispatchEvent(new r.dS(a))}async fetchAndEmitData(e){let t=await this.fetchData(e);if(!t||!t.ok)return;let a=e.parsedQuery.at(-1),r=(await t.json()).users,i=(""===a.value||(0,n.qA)(a.value,"@me"))&&""!==this.currentUserLogin;for(let e of(i&&this.emitSuggestion(this.useLogin?this.currentUserLogin??"":"@me","",this.currentUserAvatarUrl,a.value),r))i&&e.login===this.currentUserLogin||this.emitSuggestion(e.login,e.name,e.avatarUrl,a.value)}emitSuggestion(e,t,a,i){let l=3;i&&(l-=.75*(0,n.fN)(i,e),l-=.25*(0,n.fN)(i,t)),"@me"===e&&(l=1),this.dispatchEvent(new r.qi({filter:this.value,value:e,description:t,inlineDescription:!0,priority:l,icon:this.icon,avatar:a?{url:a,type:"user"}:void 0}))}constructor(e,{name:t,value:a,icon:r,priority:n,useLogin:i=!1},s,o,d){super("/filter-suggestions/users",d),l(this,"type","filter"),l(this,"icon","person"),l(this,"name",void 0),l(this,"priority",void 0),l(this,"singularItemName",void 0),l(this,"value",void 0),l(this,"currentUserLogin",void 0),l(this,"currentUserAvatarUrl",void 0),l(this,"useLogin",void 0),this.name=t,this.singularItemName=t,this.value=a,this.icon=r,this.priority=n,this.currentUserLogin=s,this.currentUserAvatarUrl=o,this.useLogin=i,e.addEventListener("query",this),e.attachProvider(this)}}},74753:(e,t,a)=>{a.d(t,{A:()=>s});let{getItem:r,setItem:n,removeItem:i}=(0,a(80688).A)("localStorage"),l="REACT_PROFILING_ENABLED",s={enable:()=>n(l,"true"),disable:()=>i(l),isEnabled:()=>!!r(l)}},9080:(e,t,a)=>{a.d(t,{k:()=>l,v:()=>s});var r=a(5225),n=a(47584);let i=(0,r.A)(function(){return n.XC?.head?.querySelector('meta[name="runtime-environment"]')?.content||""}),l=(0,r.A)(function(){return"enterprise"===i()}),s="webpack"},80688:(e,t,a)=>{a.d(t,{A:()=>l,D:()=>s});var r=a(47584),n=a(57516);let i=class NoOpStorage{getItem(){return null}setItem(){}removeItem(){}clear(){}key(){return null}get length(){return 0}};function l(e,t={throwQuotaErrorsOnSet:!1},a=r.cg,s=e=>e,o=e=>e){let d;try{if(!a)throw Error();d=a[e]||new i}catch{d=new i}let{throwQuotaErrorsOnSet:u}=t;function c(e){t.sendCacheStats&&(0,n.i)({incrementKey:e})}function m(e){try{if(d.removeItem(e),t.ttl){let t=`${e}:expiry`;d.removeItem(t)}}catch{}}return{getItem:function(e,t=Date.now()){try{let a=d.getItem(e);if(!a)return null;let r=`${e}:expiry`,n=Number(d.getItem(r));if(n&&t>n)return m(e),m(r),c("SAFE_STORAGE_VALUE_EXPIRED"),null;return c("SAFE_STORAGE_VALUE_WITHIN_TTL"),s(a)}catch{return null}},setItem:function(e,a,r=Date.now()){try{if(d.setItem(e,o(a)),t.ttl){let a=`${e}:expiry`,n=r+t.ttl;d.setItem(a,n.toString())}}catch(e){if(u&&e instanceof Error&&e.message.toLowerCase().includes("quota"))throw e}},removeItem:m,clear:d.clear,key:d.key,get length(){return d.length}}}function s(e){return l(e,{throwQuotaErrorsOnSet:!1},r.cg,JSON.parse,JSON.stringify)}},32329:(e,t,a)=>{a.d(t,{Ai:()=>i,Gq:()=>r,SO:()=>n});let{getItem:r,setItem:n,removeItem:i}=(0,a(80688).A)("sessionStorage")},67307:(e,t,a)=>{a.d(t,{Kq:()=>SoftNavErrorEvent,RQ:()=>SoftNavEndEvent,gh:()=>SoftNavPayloadEvent,ni:()=>SoftNavSuccessEvent,sW:()=>SoftNavStartEvent});var r=a(18056);function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}let i=class SoftNavEvent extends Event{constructor(e,t){super(t),n(this,"mechanism",void 0),this.mechanism=e}};let SoftNavStartEvent=class SoftNavStartEvent extends i{constructor(e){super(e,r.z.START)}};let SoftNavSuccessEvent=class SoftNavSuccessEvent extends i{constructor(e,t){super(e,r.z.SUCCESS),n(this,"visitCount",void 0),this.visitCount=t}};let SoftNavErrorEvent=class SoftNavErrorEvent extends i{constructor(e,t){super(e,r.z.ERROR),n(this,"error",void 0),this.error=t}};let SoftNavEndEvent=class SoftNavEndEvent extends i{constructor(e){super(e,r.z.END)}};let SoftNavPayloadEvent=class SoftNavPayloadEvent extends Event{constructor(e){super("soft-nav:payload"),n(this,"payload",void 0),n(this,"appPayload",void 0),this.payload=e.payload,this.appPayload=e.appPayload}}},73081:(e,t,a)=>{a.d(t,{Bu:()=>h,SC:()=>d,Ti:()=>m,iS:()=>u,k5:()=>o,o4:()=>c,rZ:()=>p});var r=a(18056),n=a(67307),i=a(6211),l=a(95505);let s=0;function o(){s=0,document.dispatchEvent(new Event(r.z.INITIAL)),(0,l.xT)()}function d(e){(0,l.LM)()||(document.dispatchEvent(new Event(r.z.PROGRESS_BAR.START)),document.dispatchEvent(new n.sW(e)),(0,l.Vy)(e),(0,l.ZW)(),(0,l.HK)(),(0,i.E5)())}function u(e={}){g(e)&&(s+=1,document.dispatchEvent(new n.ni((0,l.di)(),s)),m(e))}function c(e={}){if(!g(e))return;s=0;let t=(0,l.my)()||l.BW;document.dispatchEvent(new n.Kq((0,l.di)(),t)),f(),(0,i.Cd)(t),(0,l.xT)()}function m(e={}){if(!g(e))return;let t=(0,l.di)();f(),document.dispatchEvent(new n.RQ(t)),(0,l.Ff)(),(0,l.JA)(t)}function p(e={}){g(e)&&((0,i.Im)(),document.dispatchEvent(new Event(r.z.RENDER)))}function h(){document.dispatchEvent(new Event(r.z.FRAME_UPDATE))}function f(){document.dispatchEvent(new Event(r.z.PROGRESS_BAR.END))}function g({skipIfGoingToReactApp:e,allowedMechanisms:t=[]}={}){return(0,l.LM)()&&(0===t.length||t.includes((0,l.di)()))&&(!e||!(0,l.gc)())}},18056:(e,t,a)=>{a.d(t,{z:()=>r});let r=Object.freeze({INITIAL:"soft-nav:initial",START:"soft-nav:start",REPLACE_MECHANISM:"soft-nav:replace-mechanism",SUCCESS:"soft-nav:success",ERROR:"soft-nav:error",FRAME_UPDATE:"soft-nav:frame-update",END:"soft-nav:end",RENDER:"soft-nav:render",PROGRESS_BAR:{START:"soft-nav:progress-bar:start",END:"soft-nav:progress-bar:end"}})},6211:(e,t,a)=>{a.d(t,{Cd:()=>o,E5:()=>s,Im:()=>d,nW:()=>l});var r=a(57516),n=a(95505);let i="stats:soft-nav-duration",l={turbo:"TURBO",react:"REACT","turbo.frame":"FRAME",ui:"UI",hard:"HARD"};function s(){window.performance.clearResourceTimings(),window.performance.mark(i)}function o(e){(0,r.i)({turboFailureReason:e,turboStartUrl:(0,n.dR)(),turboEndUrl:window.location.href})}function d(){let e=function(){if(0===performance.getEntriesByName(i).length)return null;performance.measure(i,i);let e=performance.getEntriesByName(i).pop();return e?e.duration:null}();if(!e)return;let t=l[(0,n.di)()],a=Math.round(e);t===l.react&&document.dispatchEvent(new CustomEvent("staffbar-update",{detail:{duration:a}})),(0,r.i)({requestUrl:window.location.href,softNavigationTiming:{mechanism:t,destination:(0,n.fX)()||"rails",duration:a,initiator:(0,n.Pv)()||"rails"}})}},95505:(e,t,a)=>{a.d(t,{BW:()=>n,Ff:()=>p,HK:()=>b,JA:()=>S,LM:()=>h,Pv:()=>j,Vy:()=>m,ZW:()=>w,dR:()=>v,di:()=>f,fX:()=>C,gc:()=>I,k9:()=>x,my:()=>y,r7:()=>k,wG:()=>g,xT:()=>c});var r=a(32329);let n="reload",i="soft-nav:fail",l="soft-nav:fail-referrer",s="soft-nav:referrer",o="soft-nav:marker",d="soft-nav:react-app-name",u="soft-nav:latest-mechanism";function c(){(0,r.SO)(o,"0"),(0,r.Ai)(s),(0,r.Ai)(i),(0,r.Ai)(l),(0,r.Ai)(d),(0,r.Ai)(u)}function m(e){(0,r.SO)(o,e)}function p(){(0,r.SO)(o,"0")}function h(){let e=(0,r.Gq)(o);return e&&"0"!==e}function f(){return(0,r.Gq)(o)}function g(){return!!y()}function y(){return(0,r.Gq)(i)}function x(e){(0,r.SO)(i,e||n),(0,r.SO)(l,window.location.href)}function b(){(0,r.SO)(s,window.location.href)}function v(){return(0,r.Gq)(s)||document.referrer}function w(){let e=C();e?(0,r.SO)(d,e):(0,r.Ai)(d)}function j(){return(0,r.Gq)(d)}function C(){return document.querySelector('react-partial[partial-name="repos-overview"]')?"repos-overview":document.querySelector("react-app")?.getAttribute("app-name")}function I(){return!!document.querySelector("react-app")?.getAttribute("app-name")}function S(e){(0,r.SO)(u,e)}function k(){return(0,r.Gq)(u)}},47584:(e,t,a)=>{a.d(t,{KJ:()=>r.KJ,Kn:()=>n.Kn,X3:()=>r.X3,XC:()=>n.XC,cg:()=>n.cg,fV:()=>n.fV,g5:()=>r.g5});var r=a(25992),n=a(39833)},39833:(e,t,a)=>{a.d(t,{Kn:()=>l,XC:()=>n,cg:()=>i,fV:()=>s});let r="undefined"!=typeof FORCE_SERVER_ENV&&FORCE_SERVER_ENV,n="undefined"==typeof document||r?void 0:document,i="undefined"==typeof window||r?void 0:window,l="undefined"==typeof history||r?void 0:history,s="undefined"==typeof location||r?{pathname:"",origin:"",search:"",hash:"",href:""}:location},25992:(e,t,a)=>{a.d(t,{KJ:()=>i,X3:()=>n,g5:()=>l});var r=a(39833);let n=void 0===r.XC,i=!n;function l(){return!!n||!r.XC||!!(r.XC.querySelector('react-app[data-ssr="true"]')||r.XC.querySelector('react-partial[data-ssr="true"][partial-name="repos-overview"]'))}},57516:(e,t,a)=>{a.d(t,{X:()=>h,i:()=>u});var r=a(47584),n=a(75028),i=a(9080),l=a(75632),s=a(56176),o=a(70170);let d=[];function u(e,t=!1,a=.5){if(!r.X3&&!0!==(0,l.G7)("browser_stats_disabled")){if(a<0||a>1)throw RangeError("Sampling probability must be between 0 and 1");void 0===e.timestamp&&(e.timestamp=Date.now()),e.loggedIn=(0,s.M3)(),e.staff=h(),e.bundler=i.v,Math.random()<a&&d.push(e),t?p():m()}}let c=null,m=(0,o.n)(async function(){await n.K,null==c&&(c=window.requestIdleCallback(p))},5e3);function p(){if(c=null,!d.length)return;let e=r.XC?.head?.querySelector('meta[name="browser-stats-url"]')?.content;if(e){for(let t of function(e){let t=[],a=e.map(e=>JSON.stringify(e));for(;a.length>0;)t.push(function(e){let t=e.shift(),a=[t],r=t.length;for(;e.length>0&&r<=65536;){let t=e[0].length;if(r+t<=65536){let n=e.shift();a.push(n),r+=t}else break}return a}(a));return t}(d))!function(e,t){try{navigator.sendBeacon&&navigator.sendBeacon(e,t)}catch{}}(e,`{"stats": [${t.join(",")}] }`);d=[]}}function h(){return!!r.XC?.head?.querySelector('meta[name="user-staff"]')?.content}r.XC?.addEventListener("pagehide",p),r.XC?.addEventListener("visibilitychange",p)},34876:(e,t,a)=>{a.d(t,{Y:()=>s,m:()=>o});let r="\\s*(\\[[xX]\\]|\\[[\\s]\\])(?=\\s)",n="^(?:\\s*[-+*]|(?:\\s*\\d+\\.))",i="\\s*(.*?)\\s*$",l=`${n}${r}${i}`;function s(e){return RegExp("#{1,6}\\s+.*").test(e)}function o(e){let t=new RegExp(l);return e.split("\n").map(e=>e.trim()).map(e=>{if(s(e)||t.test(e))return e;let a=new RegExp(n).test(e),l=new RegExp(r).test(e),o=e&&new RegExp(i).test(e);if(!a&&!l&&!o||!o)return e;let d=e;return a||(d=`- ${e}`),l||(d=`${d.slice(0,2)}[ ] ${d.slice(2)}`),d}).join("\n")}},45996:(e,t,a)=>{a.d(t,{A:()=>i});var r=a(38568),n=a(96540);function i(){let e=(0,n.useRef)(!1),t=(0,n.useCallback)(()=>e.current,[]);return(0,r.N)(()=>(e.current=!0,()=>{e.current=!1}),[]),t}},38568:(e,t,a)=>{a.d(t,{N:()=>i});var r=a(47584),n=a(96540);let i=void 0!==r.cg?.document?.createElement?n.useLayoutEffect:n.useEffect},82060:(e,t,a)=>{a.d(t,{A:()=>i});var r=a(45996),n=a(96540);let i=function(e){let t=(0,r.A)(),[a,i]=(0,n.useState)(e);return[a,(0,n.useCallback)(e=>{t()&&i(e)},[t])]}},59418:(e,t,a)=>{a.d(t,{y:()=>l});var r=a(74848),n=a(21728),i=a(50045);function l(e){let t,a,l;let s=(0,n.c)(7),{children:o,appName:d,category:u,metadata:c}=e;return s[0]!==d||s[1]!==u||s[2]!==c?(a={appName:d,category:u,metadata:c},s[0]=d,s[1]=u,s[2]=c,s[3]=a):a=s[3],t=a,s[4]!==o||s[5]!==t?(l=(0,r.jsx)(i.I.Provider,{value:t,children:o}),s[4]=o,s[5]=t,s[6]=l):l=s[6],l}try{l.displayName||(l.displayName="AnalyticsProvider")}catch{}},39647:(e,t,a)=>{a.d(t,{d:()=>ed});var r=a(74848),n=a(81425),i=a(75177),l=a(89323),s=a(87330),o=a(15385),d=a(27331),u=a(24021),c=a(8386),m=a(56221),p=a(38621),h=a(53949),f=a(96540);let g=(0,f.createContext)({}),y=({children:e})=>{let{size:t}=(0,f.useContext)(g);return"sparkline"!==t?(0,r.jsx)(r.Fragment,{children:e}):null};try{y.displayName||(y.displayName="LeadingVisual")}catch{}var x=a(44634),b=a(84217);function v(e){switch(typeof e){case"string":case"number":return e.toString();case"object":if(Array.isArray(e))return e.map(v).join("");if(null!==e&&"props"in e)return v(e.props.children);return"";default:return""}}let w=({as:e="h3",sx:t,children:a})=>{let{setTitle:n,size:i}=(0,f.useContext)(g);return(0,f.useEffect)(()=>{n(v(a))},[n,a]),"sparkline"!==i?(0,r.jsx)(b.A,{as:e,sx:{font:"var(--text-title-shorthand-small)",...t},children:a}):null};try{w.displayName||(w.displayName="Title")}catch{}var j=a(52464);let C=({sx:e,children:t})=>{let{setDescription:a,size:n}=(0,f.useContext)(g);return(0,f.useEffect)(()=>{a(v(t))},[a,t]),"sparkline"!==n?(0,r.jsx)(j.A,{sx:{color:"fg.muted",font:"var(--text-caption-shorthand)",...e},children:t}):null};try{C.displayName||(C.displayName="Description")}catch{}let I=({children:e})=>{let{size:t}=(0,f.useContext)(g);return"sparkline"!==t?(0,r.jsx)(r.Fragment,{children:e}):null};try{I.displayName||(I.displayName="TrailingVisual")}catch{}var S=a(14783),k=a.n(S),N=a(65006),T=a.n(N),_=a(44802),A=a.n(_),R=a(20535),P=a.n(R),D=a(9264),E=a.n(D),M=a(84834),B=a.n(M),L=a(85316),F=a.n(L);let O=()=>!1,G=["Solid","ShortDash","Dot","DashDot","LongDash","ShortDashDotDot","ShortDot","LongDashDot","Dash","ShortDashDot","LongDashDotDot"],V=["circle","square","diamond","triangle","triangle-down"],$={circle:"\u25CF",square:"\u25A0",diamond:"\u25C6",triangle:"\u25B2","triangle-down":"\u25BC"},W=e=>"datetime"===e?"{value:%b %e}":void 0,z=({xAxis:e,gridLineDashStyle:t,gridLineWidth:a})=>{if(void 0===e)return;let r=e.title;return{gridLineWidth:a,...e,labels:{format:W(e.type),...e.labels},title:{text:r},gridLineDashStyle:t}},H=({yAxis:e,gridLineDashStyle:t,gridLineWidth:a})=>{if(void 0!==e)return(Array.isArray(e)?e:[e]).map(e=>{let r=e.title;return{gridLineWidth:a,...e,labels:{format:W(e.type),...e.labels},title:{text:r},gridLineDashStyle:t}})},U=(e,t)=>(e??[]).map((e,a)=>({type:t,dashStyle:G[a%G.length],marker:{symbol:V[a%V.length]},...e})),q=({plotOptions:e,marker:t,labels:a,stacking:r})=>({series:{...e,marker:{enabled:t??!1},dataLabels:{enabled:a??!1},lineWidth:2,borderWidth:1.5,stacking:r??void 0}}),K={tickWidth:0,lineWidth:0,gridLineColor:"var(--borderColor-muted)",gridLineDashStyle:"Dash",lineColor:"var(--borderColor-default)",stackLabels:{style:{color:"var(--fgColor-default)",fontSize:"var(--text-body-size-small)",textOutline:"1px var(--bgColor-default)"}},labels:{style:{color:"var(--fgColor-muted)",fontSize:"var(--text-body-size-small)"}},title:{style:{color:"var(--fgColor-muted)",fontSize:"var(--text-body-size-small)"}}},Q={accessibility:{keyboardNavigation:{order:["legend","series"]}},colors:["var(--data-blue-color-emphasis, var(--data-blue-color))","var(--data-green-color-emphasis, var(--data-green-color))","var(--data-orange-color-emphasis, var(--data-orange-color))","var(--data-pink-color-emphasis, var(--data-pink-color))","var(--data-yellow-color-emphasis, var(--data-yellow-color))","var(--data-red-color-emphasis, var(--data-red-color))","var(--data-purple-color-emphasis, var(--data-purple-color))","var(--data-auburn-color-emphasis, var(--data-auburn-color))","var(--data-teal-color-emphasis, var(--data-teal-color))","var(--data-gray-color-emphasis, var(--data-gray-color))"],caption:{align:"left",style:{color:"var(--fgColor-muted)"},verticalAlign:"top"},title:{align:"left",style:{color:"var(--fgColor-default)"},text:void 0},tooltip:{backgroundColor:"var(--bgColor-default)",borderRadius:6,borderColor:"var(--borderColor-muted)",borderWidth:1,shape:"rect",padding:10,shadow:{offsetX:2,offsetY:2,opacity:.02,width:4,color:"var(--shadowColor-default)"},style:{color:"var(--fgColor-default)",fontFamily:"var(--fontStack-sansSerif)",fontSize:"var(--text-body-size-small)"},useHTML:!0,headerFormat:'<table style="min-width: 120px;"><tr><th colspan="3" style="color:var(--fgColor-muted, var(--color-fg-muted)); font-weight:var(--base-text-weight-semibold); padding-bottom:2px;">{point.key}</th></tr>',pointFormatter:function(){let e=this.series?.options?.marker?.symbol??"circle";return`<tr><td style="padding-top:var(--base-size-4)"><span style="color:${this.color}">${$[e]}</span> ${this.series.name}</td><td style="text-align: right; padding-top:var(--base-size-4);"><strong>${this.y}</strong></td></tr>`},footerFormat:"</table>"},credits:{enabled:!1},chart:{animation:!1,events:{afterA11yUpdate(){let e=this.container;e?.setAttribute("role","application")}},spacing:[4,0,4,0],backgroundColor:"var(--bgColor-default, var(--color-canvas-default))",style:{fontFamily:"var(--fontStack-sansSerif)",fontSize:"var(--text-body-size-small)",color:"var(--fgColor-default)"}},legend:{itemStyle:{fontSize:"var(--text-body-size-small)",font:"var(--fontStack-sansSerif)",color:"var(--fgColor-default)"},align:"left",verticalAlign:"top",x:-8,y:-12,itemHoverStyle:{color:"var(--fgColor-default)"},title:{style:{color:"var(--fgColor-default)"}}},navigation:{buttonOptions:{enabled:!1}},exporting:{fallbackToExportServer:!1},plotOptions:{series:{animation:!1},spline:{animation:!1},bar:{borderColor:"var(--bgColor-default)"},column:{borderColor:"var(--bgColor-default)"}},xAxis:{tickWidth:0,lineWidth:1,gridLineColor:"var(--borderColor-muted)",gridLineDashStyle:"Dash",lineColor:"var(--borderColor-default)",labels:{style:{color:"var(--fgColor-muted)",fontSize:"var(--text-body-size-small)"}},title:{style:{color:"var(--fgColor-muted)",fontSize:"var(--text-body-size-small)"}}},yAxis:[K]};var J=a(13080);function X(e){if(e)return new Intl.DateTimeFormat("sv-SE",{timeZone:"UTC"}).format(new Date(e))}A()(k()),P()(k()),E()(k()),B()(k()),A()(T()),P()(T()),E()(T()),B()(T()),function(){let e=k().getOptions().accessibility?.series?.pointDescriptionEnabledThreshold;for(let t of[T(),k()])t.wrap(t.Point.prototype,"highlight",function(a,...r){let n=a.apply(this,r),i=this.series.chart.userOptions.accessibility?.series?.pointDescriptionEnabledThreshold||e;if(i&&"number"==typeof i&&this.series.data.length>i){let e=t.SeriesAccessibilityDescriber.defaultPointDescriptionFormatter(this);(0,J.i)(e,{assertive:!0})}return n})}(),function(){for(let e of[T(),k()])e.wrap(e.Chart.prototype,"getDataRows",function(e,t){let a=e.call(this,t),r=this.xAxis[0]?.min,n=this.xAxis[0]?.max;return r&&n&&(a=a.filter(function(e){return"number"!=typeof e.x||e.x>=r&&e.x<=n})),a})}(),k().setOptions({lang:{decimalPoint:".",thousandsSep:","}}),T().setOptions({lang:{decimalPoint:".",thousandsSep:","}});let Y={xl:"432px",large:"320px",medium:"256px",small:"128px",sparkline:"128px"},Z=({type:e="line",xAxisTitle:t,yAxisTitle:a,useUTC:n=!0,showRangeSelector:i=!1,dataGrouping:l=!1,colors:s,plotOptions:o,series:d,xAxisOptions:u,yAxisOptions:c,tooltipOptions:m,overrideOptionsNotRecommended:p})=>{let{title:h,size:y,chartRef:b}=(0,f.useContext)(g),v=(0,f.useMemo)(()=>s,[s]),w=(0,f.useMemo)(()=>o,[o]),j=(0,f.useMemo)(()=>d,[d]),C=(0,f.useMemo)(()=>u??[],[u]),I=(0,f.useMemo)(()=>c??[],[c]),S=(0,f.useMemo)(()=>m,[m]),N=(0,f.useMemo)(()=>p,[p]),_=j.length>1&&"sparkline"!==y,A=j.length>3,R=w&&function e(t,a,r){if("object"!=typeof t||null===t)return!1;if(t[a]===r)return!0;for(let n in t)if(void 0!==t[n])return e(t[n],a,r);return!1}(w,"stacking","normal"),P=i||l?"stockChart":"chart",D=(0,f.useMemo)(()=>Array.isArray(I)?I:[I],[I]),E=(0,f.useMemo)(()=>"stockChart"===P?T():k(),[P]),M=(0,f.useMemo)(()=>{let r=(0,x.A)({},Q,{accessibility:{...A?{keyboardNavigation:{order:["series","legend"]}}:{},...h?{screenReaderSection:{beforeChartFormat:"<div>{typeDescription}</div><div>{chartSubtitle}</div><div>{chartLongdesc}</div><div>{playAsSoundButton}</div><div>{viewTableButton}</div><div>{xAxisDescription}</div><div>{yAxisDescription}</div><div>{annotationsTitle}{annotationsList}</div>"}}:{}},chart:{type:e,height:"number"==typeof y?y:Y[y],events:{render(){i&&window.setTimeout(()=>{let[e,t]=Array.from(b.current?.container.current?.querySelectorAll(".highcharts-a11y-proxy-group-navigator input[type=range]")||[]),{dataMin:a,dataMax:r,min:n,max:i}=this.xAxis?.[0]||{};e&&t&&void 0!==a&&void 0!==r&&void 0!==n&&void 0!==i&&(e.setAttribute("aria-label","Start of selected range"),e.setAttribute("aria-valuemin",a.toString()),e.setAttribute("aria-valuemax",r.toString()),e.setAttribute("aria-valuenow",n.toString()),t.setAttribute("aria-label","End of selected range"),t.setAttribute("aria-valuemin",a.toString()),t.setAttribute("aria-valuemax",r.toString()),t.setAttribute("aria-valuenow",i.toString()));let l=X(n),s=X(i);e&&t&&l&&s&&(e.setAttribute("aria-valuetext",l),t.setAttribute("aria-valuetext",s))},0)}}},time:{useUTC:n},colors:v,exporting:{chartOptions:{title:{text:h}},filename:h,csv:{dateFormat:"%Y-%m-%d"}},lang:{accessibility:{chartContainerLabel:h?`${h}. Interactive chart.`:"Interactive chart.",navigator:{groupLabel:`${h} Axis zoom`}}},legend:{enabled:_,...A?{align:"right",layout:"vertical",verticalAlign:"middle"}:{}},plotOptions:(0,x.A)({},Q.plotOptions,{series:{marker:{enabled:"sparkline"!==y&&"spline"!==e},enableMouseTracking:"sparkline"!==y}},w),series:j,tooltip:(0,x.A)({},{enabled:"sparkline"!==y,shared:R},S),xAxis:(0,x.A)({},{visible:"sparkline"!==y,gridLineWidth:"sparkline"!==y?1:0,title:{text:"sparkline"!==y?t:void 0}},C),yAxis:D.map(e=>{if(e)return(0,x.A)({},K,{visible:"sparkline"!==y,gridLineWidth:"sparkline"!==y?1:0,title:{text:"sparkline"!==y?a:void 0}},e)}),...i?{rangeSelector:{enabled:!0,inputEnabled:!1,buttons:[],dropdown:"never"}}:{}},N);if(i&&r.accessibility&&r.accessibility.keyboardNavigation&&(r.accessibility.keyboardNavigation.order=[...r.accessibility?.keyboardNavigation?.order??[],"navigator"]),r.series&&r.colors){let e=0,t=[];for(let a of r.series)if("areaspline"===a.type||"area"===a.type){let n;a.color?n=a.color:(n=r.colors[e],e++),a.fillColor||(a.fillColor={linearGradient:{x1:0,x2:0,y1:0,y2:1},stops:[[0,`color-mix(in srgb, ${n} 25%, transparent)`],[1,`color-mix(in srgb, ${n} 1%, transparent)`]]}),t.push(a),e>r.colors.length-1&&(e=0)}else t.push(a);r.series=t}return r},[e,t,a,n,i,h,y,_,A,R,b,v,w,j,S,C,D,N]);return(0,r.jsx)(F(),{constructorType:P,highcharts:E,ref:b,options:M})},ee=({type:e,options:t,series:a,marker:n,labels:i,...l})=>{let{xAxis:s,yAxis:o,plot:d}=t??{},u=(0,f.useMemo)(()=>z({xAxis:s,gridLineDashStyle:"Solid"}),[s]),c=(0,f.useMemo)(()=>H({yAxis:o,gridLineDashStyle:"Solid"}),[o]),m=(0,f.useMemo)(()=>U(a,e),[a,e]),p=(0,f.useMemo)(()=>q({plotOptions:d,marker:n,labels:i}),[d,n,i]);return m.length>11&&O()&&console.error("Ideally, a line chart should contain no more than 11 lines."),(0,r.jsx)(Z,{type:e,xAxisOptions:u,yAxisOptions:c,series:m,plotOptions:p,...l})},et=e=>(0,r.jsx)(ee,{...e,type:"line"});try{ee.displayName||(ee.displayName="BaseLineChart")}catch{}try{et.displayName||(et.displayName="LineChart")}catch{}let ea=e=>(0,r.jsx)(ee,{...e,type:"spline"});try{ea.displayName||(ea.displayName="SplineChart")}catch{}let er=({type:e,options:t,series:a,stacking:n="normal",marker:i,labels:l,...s})=>{let{xAxis:o,yAxis:d,plot:u}=t??{},c=(0,f.useMemo)(()=>z({xAxis:o,gridLineDashStyle:"Solid"}),[o]),m=(0,f.useMemo)(()=>H({yAxis:d,gridLineDashStyle:"Solid"}),[d]),p=(0,f.useMemo)(()=>U(a,e),[a,e]),h=(0,f.useMemo)(()=>q({plotOptions:u,marker:i,labels:l,stacking:n}),[i,l,n,u]);return p.length>5&&O()&&console.error("Ideally, an area chart should contain no more than 5 lines."),(0,r.jsx)(Z,{type:e,xAxisOptions:c,yAxisOptions:m,series:p,plotOptions:h,...s})},en=e=>(0,r.jsx)(er,{...e,type:"area"});try{er.displayName||(er.displayName="BaseAreaChart")}catch{}try{en.displayName||(en.displayName="AreaChart")}catch{}let ei=e=>(0,r.jsx)(er,{...e,type:"areaspline"});try{ei.displayName||(ei.displayName="AreaSplineChart")}catch{}let el=({options:e,series:t,stacking:a,labels:n,...i})=>{let{xAxis:l,yAxis:s,plot:o}=e??{},d=(0,f.useMemo)(()=>z({xAxis:l,gridLineWidth:0}),[l]),u=(0,f.useMemo)(()=>H({yAxis:s,gridLineDashStyle:"Dash"}),[s]),c=(0,f.useMemo)(()=>U(t,"column"),[t]),m=(0,f.useMemo)(()=>q({plotOptions:o,labels:n,stacking:a}),[n,a,o]);return c.length>5&&O()&&console.error("Ideally, a column chart should contain no more than 5 segments or columns."),(0,r.jsx)(Z,{type:"column",xAxisOptions:d,yAxisOptions:u,series:c,plotOptions:m,...i})};try{el.displayName||(el.displayName="ColumnChart")}catch{}function es({children:e}){return(0,r.jsx)(d.l.Body,{sx:{padding:0},children:e})}function eo({size:e="medium",border:t,padding:a="normal",visibleControls:b,className:v,children:j,chartRef:S}){let k=b??"sparkline"!==e,N=t??"sparkline"!==e,[T,..._]=(0,u.H)(j,{leadingVisual:y,title:w,description:C,trailingVisual:I,chart:Z}),[A,R]=(0,f.useState)(""),[P,D]=(0,f.useState)(""),E=(0,n.L)(S),M=(0,f.useMemo)(()=>({title:A,setTitle:R,description:P,setDescription:D,size:e,chartRef:E}),[A,R,P,D,e,E]),B=(0,f.useRef)(null),[L,F]=(0,f.useState)(),O=(0,f.useCallback)(()=>F(!0),[]),G=(0,f.useCallback)(()=>F(!1),[]);(0,f.useEffect)(()=>{!1===L&&B.current?.focus()},[L]);let V=(0,f.useCallback)(()=>{if(!E.current?.chart)return[];let[e,...t]=E.current.chart.getDataRows();return t.map((t,a)=>t.reduce((t,r,n)=>({...t,id:a,[e[n]]:r}),{}))},[E]),$=(0,f.useCallback)(()=>E.current?.chart?(E.current?.chart?.getDataRows())[0].map((e,t)=>({header:e,field:e,rowHeader:0===t})):[],[E]),W=(0,f.useCallback)(()=>E.current?.chart?.downloadCSV(),[E]),z=(0,f.useCallback)(()=>{E.current?.chart.update({exporting:{chartOptions:{caption:{text:P}}}});let e=JSON.stringify(E.current?.chart?.userOptions,(e,t)=>"string"==typeof t?t.replace(/var\(--([^,)]+)[,)]+/g,(e,t)=>getComputedStyle(E.current?.container.current??document.body).getPropertyValue(`--${t}`).trim()):t);E.current?.chart?.exportChartLocal({type:"image/png"},JSON.parse(e))},[E,P]),H=null,U=(0,f.useMemo)(()=>(0,x.A)({},T.chart?.props?.overrideOptionsNotRecommended||{},{accessibility:{screenReaderSection:{onViewDataTableClick:O}}}),[T.chart?.props?.overrideOptionsNotRecommended,O]);T.chart&&(H=(0,f.cloneElement)(T.chart,{overrideOptionsNotRecommended:U}));let q=(0,f.useMemo)(()=>!!(T.leadingVisual||T.trailingVisual||k||T.title||T.description),[T.leadingVisual,T.trailingVisual,k,T.title,T.description]);return(0,r.jsxs)(g.Provider,{value:M,children:[(0,r.jsxs)(i.A,{className:v,sx:{...N?{borderWidth:"1px",borderStyle:"solid",borderColor:"border.default",borderRadius:2}:{},p:"none"===a?0:`var(--stack-padding-${a})`},...(0,h.G)("chart-card"),children:[(0,r.jsxs)(i.A,{sx:{display:q?"flex":"none",justifyContent:"space-between",alignContent:"flex-start",mb:"sparkline"!==e?3:0},children:[(0,r.jsxs)(i.A,{sx:{display:"flex"},children:[(0,r.jsx)(i.A,{sx:{mr:T.leadingVisual?2:0,alignContent:"center"},children:T.leadingVisual}),(0,r.jsxs)("div",{children:[T.title,T.description]})]}),(0,r.jsxs)(i.A,{sx:{display:"flex",alignItems:"center",alignSelf:"flex-start"},children:[(0,r.jsx)(i.A,{sx:{mr:T.leadingVisual?2:0},children:T.trailingVisual}),k&&(0,r.jsxs)(l.W,{anchorRef:B,children:[(0,r.jsx)(l.W.Anchor,{children:(0,r.jsx)(s.K,{"aria-label":"Chart options",icon:p.KebabHorizontalIcon,variant:"invisible",size:"small"})}),(0,r.jsx)(l.W.Overlay,{width:"auto",children:(0,r.jsxs)(o.l,{children:[(0,r.jsx)(o.l.Item,{onSelect:O,children:"View as table"}),(0,r.jsx)(o.l.Item,{onSelect:W,children:"Download CSV"}),(0,r.jsx)(o.l.Item,{onSelect:z,children:"Download PNG"})]})})]})]})]}),H??_]}),L&&(0,r.jsx)(d.l,{title:A,onClose:G,footerButtons:[{buttonType:"default",content:"Download CSV",onClick:W}],renderBody:es,children:(0,r.jsx)(c.X.Container,{sx:{".Table":{"--table-border-radius":0},".TableHeader:first-child,.TableCell:first-child":{borderLeft:0},".TableHeader:last-child,.TableCell:last-child":{borderRight:0}},children:(0,r.jsx)(m.b,{data:V(),columns:$()})})})]})}eo.displayName="ChartCard";let ed=Object.assign(eo,{LeadingVisual:y,Title:w,Description:C,TrailingVisual:I,Chart:Z,LineChart:et,ColumnChart:el,AreaChart:en,AreaSplineChart:ei,SplineChart:ea,Context:g});try{es.displayName||(es.displayName="DialogBodyWithoutPadding")}catch{}try{ed.displayName||(ed.displayName="ChartCard")}catch{}},47657:(e,t,a)=>{a.d(t,{s:()=>h});var r=a(74848),n=a(20820),i=a(38621),l=a(75177),s=a(52464),o=a(15198),d=a(53949),u=a(96540),c=a(42522);let m={Radio:"ColorPicker-module__Radio--g4qIB"},p=(0,u.forwardRef)(({children:e,"aria-describedby":t,"aria-labelledby":a,...n},i)=>(0,r.jsx)(l.A,{ref:i,...n,children:e}));p.displayName="BoxWithoutAriaLabel";let h=({value:e,onChange:t,label:a})=>{let i=(0,u.useId)(),o=e=>{let a=e.target.value;(0,n.Nh)(a)&&t(a)};return(0,r.jsxs)(l.A,{as:"fieldset",sx:{border:0,padding:0,margin:0},children:[(0,r.jsx)(s.A,{as:"legend",sx:{fontWeight:"bold",mb:2},children:a}),(0,r.jsx)(l.A,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:n.i4.map(t=>(0,r.jsx)(f,{name:i,color:t,onChange:o,selected:e===t},t))})]})},f=({color:e,onChange:t,selected:a,name:l})=>{let{fg:s,bg:h}=(0,n.Wk)(e),f=(e[0]??"")+e.slice(1).toLowerCase(),g=(0,u.useId)();return(0,r.jsx)(c.m,{text:f,direction:"s",id:g,children:(0,r.jsxs)(p,{as:"label",sx:{p:2,background:a?s:h,color:a?"canvas.default":s,borderRadius:2,lineHeight:0,":has(:focus-visible)":{outlineWidth:"2px",outlineStyle:"solid",outlineColor:"accent.fg",outlineOffset:"1px"}},...(0,d.G)(`color-picker-option-${f}`),children:[(0,r.jsx)(o.A,{"aria-labelledby":g,name:l,value:e,checked:a,onChange:t,className:m.Radio}),a?(0,r.jsx)(i.CheckCircleFillIcon,{}):(0,r.jsx)(i.CircleIcon,{})]})})};try{h.displayName||(h.displayName="ColorPicker")}catch{}try{f.displayName||(f.displayName="ColorOption")}catch{}},84688:(e,t,a)=>{a.d(t,{x:()=>u});var r=a(74848),n=a(21728),i=a(93108),l=a(96540),s=a(94232);function o(e,t){let a,l,o,u,c,m;let p=(0,n.c)(13);p[0]!==e?({children:a,src:o,...l}=e,p[0]=e,p[1]=a,p[2]=l,p[3]=o):(a=p[1],l=p[2],o=p[3]),p[4]===Symbol.for("react.memo_cache_sentinel")?(u=[],p[4]=u):u=p[4];let[h]=(0,s.I)(d,!0,u);return p[5]!==h||p[6]!==o?(c=h?{}:{src:o,"data-nonce":(0,i.M1)()},p[5]=h,p[6]=o,p[7]=c):c=p[7],p[8]!==a||p[9]!==l||p[10]!==t||p[11]!==c?(m=(0,r.jsx)("include-fragment",{...l,ref:t,...c,children:a}),p[8]=a,p[9]=l,p[10]=t,p[11]=c,p[12]=m):m=p[12],m}function d(){return!1}let u=(0,l.forwardRef)(o);try{o.displayName||(o.displayName="IncludeFragmentWithRef")}catch{}try{u.displayName||(u.displayName="IncludeFragment")}catch{}},37954:(e,t,a)=>{a.d(t,{o:()=>m});var r=a(74848),n=a(62596),i=a(53949),l=a(38621),s=a(75177),o=a(87330),d=a(30729),u=a(96540),c=a(65848);function m({id:e,inputRef:t,placeholder:a,inputValue:c,label:m,visuallyHideLabel:p,clearIconInitiallyVisible:f=!1,onKeyPress:g,onKeyDown:y,onChange:x,onRequestProvider:b,renderSingularItemNames:v,sxString:w,"data-testid":j,sx:C}){let I=(0,u.useRef)(null);e=`query-builder-${e}`;let S=`${e}-label`,k=`${e}-input`;(0,u.useEffect)(()=>{if(!(I.current instanceof n.MK))return;let t=I.current;return t&&(t.addEventListener("query-builder:request-provider",b),t.readyForRequestProviders(),t.id=`query-builder-${e}`,t.setAttribute("data-filter-key",":"),t.className="QueryBuilder",t.renderSingularItemNames=v||!0,null!=w&&t.setAttribute("style",w)),()=>{t?.removeEventListener("query-builder:request-provider",b)}},[e,b,w,v]);let N=(0,r.jsx)(s.A,{sx:{width:"100%",textAlign:"center",display:"flex",flexDirection:"row",justifyItems:"flex-start"},children:(0,r.jsx)(d.A,{icon:l.SearchIcon,"aria-label":"Search",sx:{ml:"12px",mr:1,color:"fg.muted"}})}),T=e=>{e.preventDefault();let t=I.current;t?.inputSubmit()},[_,A]=(0,u.useState)(c),R=(0,u.useCallback)(e=>{A(t?.current?.value),x(e)},[t,x]);return(0,u.useEffect)(()=>{async function e(){A(c),await I?.current?.parseQuery(void 0,!1)}c!==_&&e()},[_,c,I]),(0,r.jsx)("form",{acceptCharset:"UTF-8",action:"/search",method:"get",style:{flex:1,minWidth:0,...C},onSubmit:e=>T(e),...(0,i.G)("query-builder-form"),children:(0,r.jsxs)("query-builder",{ref:I,"defer-request-providers":!0,"data-catalyst":"true","data-filter-key":":",children:[(0,r.jsxs)("div",{className:"FormControl FormControl--fullWidth",style:{gap:0},children:[(0,r.jsx)("label",{id:S,htmlFor:k,className:`FormControl-label ${void 0===p||!0===p?"sr-only":""}`,children:m}),(0,r.jsxs)("div",{className:"QueryBuilder-StyledInput width-fit","data-target":"query-builder.styledInput",style:{minHeight:"30px"},children:[N?(0,r.jsx)("span",{id:`${e}-leadingvisual-wrap`,children:N}):(0,r.jsx)("div",{className:"QueryBuilder-spacer"}),(0,r.jsxs)("div",{"data-target":"query-builder.styledInputContainer",className:"QueryBuilder-StyledInputContainer",tabIndex:-1,...(0,i.G)("filter-styled-input"),children:[(0,r.jsx)("div",{"aria-hidden":"true",className:"QueryBuilder-StyledInputContent","data-target":"query-builder.styledInputContent"}),(0,r.jsxs)("div",{className:"QueryBuilder-InputWrapper",style:{height:"30px"},children:[(0,r.jsx)("div",{"aria-hidden":"true",className:"QueryBuilder-Sizer","data-target":"query-builder.sizer"}),(0,r.jsx)("input",{id:k,"data-testid":j,placeholder:a,ref:t,value:c,onKeyPress:g,onKeyDown:y,onChange:R,name:`${e}-inputname`,autoComplete:"off",spellCheck:"false",className:"FormControl-input QueryBuilder-Input FormControl-medium","data-target":"query-builder.input","data-action":"input:query-builder#inputChange blur:query-builder#inputBlur keydown:query-builder#inputKeydown focus:query-builder#inputFocus",style:{height:"30px"},"aria-labelledby":S})]})]}),(0,r.jsx)("span",{className:"sr-only",id:`${e}-clear`,children:"Clear"}),(0,r.jsx)(o.K,{unsafeDisableTooltip:!0,type:"button",id:`${e}-clear-button`,"aria-labelledby":`${e}-clear ${S}`,"data-target":"query-builder.clearButton","data-action":"click:query-builder#clear focus:query-builder#clearButtonFocus blur:query-builder#clearButtonBlur","align-items":"center","border-radius":1,size:"small",sx:{mr:"1px",px:2,py:0,display:"flex",color:"muted",borderRadius:"0 4px 4px 0"},hidden:f,variant:"invisible",...(0,i.G)("clear-filters-query-builder"),icon:l.XCircleFillIcon})]}),h,(0,r.jsx)("div",{className:"position-relative",children:(0,r.jsx)("div",{className:"Overlay-backdrop--anchor right-0 left-0",style:{marginTop:"4px"},children:(0,r.jsx)("div",{className:"Overlay Overlay-whenNarrow Overlay--height-auto",hidden:!0,"data-target":"query-builder.overlay",children:(0,r.jsx)("div",{className:"Overlay-body Overlay-body--paddingNone",children:(0,r.jsx)("ul",{role:"listbox",className:"ActionListWrap QueryBuilder-ListWrap","aria-label":"Suggestions","data-action":"combobox-commit:query-builder#comboboxCommit mousedown:query-builder#resultsMousedown","data-target":"query-builder.resultsList","data-persist-list":!1,id:`${e}-results`,...(0,i.G)("query-builder-results")})})})})})]}),(0,r.jsx)("div",{"data-target":"query-builder.screenReaderFeedback","aria-live":"polite","aria-atomic":"true",className:"sr-only"})]})})}let p={apps:l.AppsIcon,archived:l.ArchiveIcon,bookmark:l.BookmarkIcon,branch:l.GitBranchIcon,calendar:l.CalendarIcon,circle:l.DotFillIcon,code:l.CodeIcon,comment:l.CommentIcon,default:l.FilterIcon,discussion:l.CommentDiscussionIcon,draft:l.IssueDraftIcon,"file-code":l.FileIcon,filter:l.FilterIcon,forbidden:l.NoEntryIcon,history:l.HistoryIcon,issue:l.IssueOpenedIcon,issueClosed:l.IssueClosedIcon,iterations:l.IterationsIcon,mention:l.MentionIcon,merged:l.GitMergeIcon,milestone:l.MilestoneIcon,no:l.CircleSlashIcon,not:l.NoEntryIcon,organization:l.OrganizationIcon,pencil:l.PencilIcon,person:l.PersonIcon,"plus-circle":l.PlusCircleIcon,project:l.TableIcon,pullRequest:l.GitPullRequestIcon,question:l.QuestionIcon,reaction:l.SmileyIcon,repo:l.RepoIcon,search:l.SearchIcon,"single-select":l.SingleSelectIcon,sort:l.SortDescIcon,tag:l.TagIcon,team:l.PeopleIcon,trash:l.TrashIcon},h=(0,r.jsx)(r.Fragment,{children:Object.entries(p).map(([e,t])=>{let a=`${e}-icon`,n=(0,c.F0)((0,r.jsx)(d.A,{icon:t,"aria-hidden":!1}));return(0,r.jsx)("template",{id:a,dangerouslySetInnerHTML:{__html:n}},a)})});try{m.displayName||(m.displayName="QueryBuilder")}catch{}},18347:(e,t,a)=>{a.d(t,{BP:()=>c,D3:()=>u,O8:()=>o});var r=a(74848),n=a(21728),i=a(96540),l=a(47584),s=a(38568);let o={ServerRender:"ServerRender",ClientHydrate:"ClientHydrate",ClientRender:"ClientRender"},d=(0,i.createContext)(o.ClientRender);function u(e){let t,a,u,c;let m=(0,n.c)(8),{wasServerRendered:p,children:h}=e;m[0]!==p?(t=()=>l.X3?o.ServerRender:p?o.ClientHydrate:o.ClientRender,m[0]=p,m[1]=t):t=m[1];let[f,g]=(0,i.useState)(t);return m[2]!==f?(a=()=>{f!==o.ClientRender&&g(o.ClientRender)},u=[f],m[2]=f,m[3]=a,m[4]=u):(a=m[3],u=m[4]),(0,s.N)(a,u),m[5]!==h||m[6]!==f?(c=(0,r.jsx)(d.Provider,{value:f,children:h}),m[5]=h,m[6]=f,m[7]=c):c=m[7],c}function c(){return(0,i.useContext)(d)}try{d.displayName||(d.displayName="RenderPhaseContext")}catch{}try{u.displayName||(u.displayName="RenderPhaseProvider")}catch{}},67136:(e,t,a)=>{a.d(t,{Qn:()=>o,T8:()=>u,Y6:()=>m,k6:()=>c});var r=a(74848),n=a(65556),i=a(96540),l=a(73218),s=a(82060);let o=5e3,d=(0,i.createContext)({addToast:l.l,addPersistedToast:l.l,clearPersistedToast:l.l}),u=(0,i.createContext)({toasts:[],persistedToast:null});function c({children:e}){let[t,a]=(0,s.A)([]),[l,c]=(0,i.useState)(null),{safeSetTimeout:m}=(0,n.A)(),p=(0,i.useCallback)(function(e){a([...t,e]),m(()=>a(t.slice(1)),o)},[t,m,a]),h=(0,i.useCallback)(function(e){c(e)},[c]),f=(0,i.useCallback)(function(){c(null)},[c]),g=(0,i.useMemo)(()=>({addToast:p,addPersistedToast:h,clearPersistedToast:f}),[h,p,f]),y=(0,i.useMemo)(()=>({toasts:t,persistedToast:l}),[t,l]);return(0,r.jsx)(d.Provider,{value:g,children:(0,r.jsx)(u.Provider,{value:y,children:e})})}function m(){return(0,i.useContext)(d)}try{d.displayName||(d.displayName="ToastContext")}catch{}try{u.displayName||(u.displayName="InternalToastsContext")}catch{}try{c.displayName||(c.displayName="ToastContextProvider")}catch{}}},e=>{var t=t=>e(e.s=t);e.O(0,["primer-react","react-core","react-lib","octicons-react","vendors-node_modules_primer_behaviors_dist_esm_index_mjs","vendors-node_modules_oddbird_popover-polyfill_dist_popover-fn_js","vendors-node_modules_github_mini-throttle_dist_index_js-node_modules_stacktrace-parser_dist_s-1d3d52","vendors-node_modules_emotion_is-prop-valid_dist_emotion-is-prop-valid_esm_js-node_modules_emo-b1c483","vendors-node_modules_dompurify_dist_purify_es_mjs","vendors-node_modules_lodash-es__Stack_js-node_modules_lodash-es__Uint8Array_js-node_modules_l-4faaa6","vendors-node_modules_date-fns_format_mjs","vendors-node_modules_date-fns_addWeeks_mjs-node_modules_date-fns_addYears_mjs-node_modules_da-827f4f","vendors-node_modules_github_relative-time-element_dist_index_js","vendors-node_modules_focus-visible_dist_focus-visible_js-node_modules_lodash-es__isIterateeCa-89abd9","vendors-node_modules_tanstack_query-core_build_modern_queryObserver_js-node_modules_tanstack_-defd52","vendors-node_modules_github_hotkey_dist_index_js-node_modules_date-fns_getDaysInMonth_mjs-nod-70c11b","vendors-node_modules_lodash-es_isEqual_js","vendors-node_modules_dnd-kit_modifiers_dist_modifiers_esm_js-node_modules_dnd-kit_sortable_di-72228e","vendors-node_modules_braintree_browser-detection_dist_browser-detection_js-node_modules_githu-bb80ec","vendors-node_modules_react-relay_index_js","vendors-node_modules_lodash-es_cloneDeep_js","vendors-node_modules_fzy_js_index_js-node_modules_github_paste-markdown_dist_index_js","vendors-node_modules_highcharts-react-official_dist_highcharts-react_min_js-node_modules_high-7e7fe4","vendors-node_modules_react-relay_hooks_js-node_modules_github_combobox-nav_dist_index_js-node-1f33c6","vendors-node_modules_chart_js_dist_chart_js-node_modules_date-fns_parseISO_mjs","vendors-node_modules_ml-regression-simple-linear_src_index_js-node_modules_chartjs-adapter-da-5ef63e","vendors-node_modules_github_jtml_lib_index_js-node_modules_tanstack_react-query_build_modern_-a0175e","vendors-node_modules_lodash-es_pickBy_js","vendors-node_modules_allex_crc32_lib_crc32_esm_js-node_modules_github_quote-selection_dist_in-97b256","ui_packages_paths_index_ts","ui_packages_ui-commands_ui-commands_ts","ui_packages_date-picker_date-picker_ts","ui_packages_drag-and-drop_drag-and-drop_ts-ui_packages_hydro-analytics_hydro-analytics_ts","ui_packages_list-view_src_hooks_use-next-header-tag_ts-ui_packages_verified-fetch_verified-fe-1f4c4d","ui_packages_filter_utils_index_ts-ui_packages_fuzzy-score_fuzzy-filter_ts-ui_packages_use-ana-5890eb","ui_packages_filter_providers_index_ts","ui_packages_item-picker_components_RepositoryPicker_tsx","ui_packages_relay-environment_relay-environment_ts-ui_packages_use-named-color_use-named-colo-bdf255","ui_packages_commenting_constants_values_ts-ui_packages_commenting_components_ActivityHeader_t-f9065d","ui_packages_insights-charts_src_index_ts","ui_packages_query-builder-element_query-builder-element_ts","ui_packages_app-uuid_app-uuid_ts-ui_packages_signed-commit-badge_index_ts-ui_packages_use-nav-07c073","ui_packages_commenting_hooks_use-markdown-body_ts-ui_packages_commenting_utils_blocked-commen-338167","ui_packages_issue-viewer_constants_labels_ts-ui_packages_item-picker_components_BranchPicker_-bc1aa3","ui_packages_issue-viewer_components_IssueViewer_tsx-ui_packages_issue-viewer_contexts_IssueVi-135fec","ui_packages_query-builder_utils_query_ts-ui_packages_use-link-interception_use-hovercard-clic-f2adbf"],()=>t(41951)),e.O()}]);
//# sourceMappingURL=memex-25bf675a1cc6.js.map